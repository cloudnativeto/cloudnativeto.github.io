<!DOCTYPE html><html lang="zh" >


<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  
  
  
    <meta name="generator" content="Wowchemy 5.5.0 for Hugo" />
  

  
  










  







  
  
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  

  
  
  
    
      
      <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" media="print" onload="this.media='all'">
    
  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="本文是一篇介绍容器运行时和管理工具的文章，对主要的容器管理工具做了介绍" />

  
  <link rel="alternate" hreflang="zh" href="https://cloudnative.to/blog/journey-from-containerization-to-orchestration-and-beyond/" />

  
  
  
    <meta name="theme-color" content="#0a55a7" />
  

  
  

  

  <link rel="stylesheet" href="/css/vendor-bundle.min.c7b8d9abd591ba2253ea42747e3ac3f5.css" media="print" onload="this.media='all'">

  
  
  
    
    

    
    
    
    
      
      
    
    
    

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/github.min.css" crossorigin="anonymous" title="hl-light" media="print" onload="this.media='all'">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" media="print" onload="this.media='all'" disabled>
        
      
    

    
    
    

    

    
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
      
      

      
      
        
      

      
    
      
      

      
      

      
    
      
      

      
      

      
    
  

  
  
  
  
  
  <link rel="stylesheet" href="/css/wowchemy.008259417e6adf8980695ebbbb46553f.css" />

  



  


  


  


  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f3dc895ea3bd6186cd835841d365c103";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



  
  
  

  

  
    <link rel="manifest" href="/manifest.webmanifest" />
  

  <link rel="icon" type="image/png" href="/media/icon_hu0802e500a55b0406ddf0453824effa47_6997_32x32_fill_lanczos_center_3.png" />
  <link rel="apple-touch-icon" type="image/png" href="/media/icon_hu0802e500a55b0406ddf0453824effa47_6997_180x180_fill_lanczos_center_3.png" />

  <link rel="canonical" href="https://cloudnative.to/blog/journey-from-containerization-to-orchestration-and-beyond/" />

  
  
  
  
  
  
  
  
    
  
  

  
  
    
    
  
  <meta property="twitter:card" content="summary_large_image" />
  
    <meta property="twitter:site" content="@CloudNativeCN" />
    <meta property="twitter:creator" content="@CloudNativeCN" />
  
  <meta property="og:site_name" content="云原生社区（中国）" />
  <meta property="og:url" content="https://cloudnative.to/blog/journey-from-containerization-to-orchestration-and-beyond/" />
  <meta property="og:title" content="容器化到容器编排之旅 | 云原生社区（中国）" />
  <meta property="og:description" content="本文是一篇介绍容器运行时和管理工具的文章，对主要的容器管理工具做了介绍" /><meta property="og:image" content="https://cloudnative.to/media/sharing.png" />
    <meta property="twitter:image" content="https://cloudnative.to/media/sharing.png" /><meta property="og:locale" content="zh" />
  
    
      <meta
        property="article:published_time"
        content="2019-08-28T10:42:00&#43;08:00"
      />
    
    <meta property="article:modified_time" content="2024-01-29T21:00:05&#43;08:00">
  

  


    






  




<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cloudnative.to/blog/journey-from-containerization-to-orchestration-and-beyond/"
  },
  "headline": "容器化到容器编排之旅",
  
  "datePublished": "2019-08-28T10:42:00+08:00",
  "dateModified": "2024-01-29T21:00:05+08:00",
  
  "author": {
    "@type": "Person",
    "name": "Ivan Velichko"
  },
  
  "publisher": {
    "@type": "Organization",
    "name": "云原生社区（中国）",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cloudnative.to/media/logo.svg"
    }
  },
  "description": "本文是一篇介绍容器运行时和管理工具的文章，对主要的容器管理工具做了介绍"
}
</script>

  

  

  

  





  <title>容器化到容器编排之旅 | 云原生社区（中国）</title>
</head>


<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" class="page-wrapper   " data-wc-page-id="abca668e17bcd2f9fe9f1aa14a250c65" >
  <button onclick="topFunction()" id="backTopBtn" title="Go to top"><i class="fa-solid fa-circle-up" aria-hidden="true"></i></button>
  
  
  
  
  
  
  
  
  
  <script src="/js/wowchemy-init.min.62d6f8dfe8493f1c68557dde65bec362.js"></script>

  


<aside class="search-modal" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6 search-title">
          <p>搜索</p>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#" aria-label="关闭"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="搜索..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search" class="form-control"
        aria-label="搜索...">
        
      </div>

      
      

      
    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

      <div id="search-common-queries">
        
      </div>

    </section>
  </div>
</aside>



  <div class="page-header">
    











  


<header class="header--fixed">
  <nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id="navbar-main">
    <div class="container-xl">

      
      <div class="d-none d-lg-inline-flex">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生社区（中国）"
            
            ></a>
      </div>
      

      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar-content" aria-controls="navbar-content" aria-expanded="false" aria-label="切换导航">
      <span><i class="fas fa-bars"></i></span>
      </button>
      

      
      <div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none">
        <a class="navbar-brand" href="/"><img src="/media/logo.svg" alt="云原生社区（中国）"
          
          ></a>
      </div>
      

      
      
      <div class="navbar-collapse main-menu-item collapse justify-content-start" id="navbar-content">

        
        <ul class="navbar-nav d-md-inline-flex">
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/community"><span>社区</span></a>
          </li>

          
          

          

          
          
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link  active" href="/blog"><span>博客</span></a>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>小组</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/k8s-gateway-api"><span>Kubernetes Gateway API SIG</span></a>
              
            </div>
          </li>

          
          

          
          <li class="nav-item dropdown">
            <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"><span>资料</span><span class="caret"></span>
            </a>
            <div class="dropdown-menu">
              
                <a class="dropdown-item" href="/envoy/"><span>Envoy 中文文档</span></a>
              
                <a class="dropdown-item" href="/kubebuilder/"><span>Kubebuilder 中文文档</span></a>
              
                <a class="dropdown-item" href="https://lib.jimmysong.io/"><span>云原生资料库</span></a>
              
                <a class="dropdown-item" href="https://istio.io/latest/zh/"><span>Istio 中文文档</span></a>
              
            </div>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
          

          <li class="nav-item">
            <a class="nav-link " href="/event"><span>活动</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#feed"><span>更新</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#tags"><span>标签</span></a>
          </li>

          
          

          

          
          
          
            
          

          

          
          
          
          

          
            
              
              
            
            
              
              
              
                
              
              
            
          

          <li class="nav-item">
            <a class="nav-link " href="/#about"><span>关于</span></a>
          </li>

          
          

        

          
        </ul>
      </div>

      <ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2">

        
        

        
        <li class="nav-item">
            <a class="nav-link" href="/community/join/" data-toggle="tooltip" data-placement="bottom" title="加入社区" aria-label="主站"><i class="fa-brands fa-weixin" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item">
            <a class="nav-link js-search" href="#" data-toggle="tooltip" data-placement="bottom" title="搜索" aria-label="搜索"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        
        
        <li class="nav-item d-none d-lg-inline-flex">
            <a class="nav-link" href="https://github.com/cloudnativeto/cloudnative.to" target="_blank" rel="noopener" data-toggle="tooltip" data-placement="bottom" title="查看源码" aria-label="查看源码" aria-label="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>
        </li>
        

        
        
        
        <li class="nav-item">
          <a href="#" class="nav-link set-theme">
            <i class="fa fa-sun" aria-hidden="true" id="theme-icon"></i>
          </a>
        </li>
        

        
        

      </ul>

    </div>
  </nav>
</header>


  </div>

  <div class="page-body">
    
    
    

    <div class="container-xl">
    <div class="post-container">
        












  

  
  
  
<div class="article-container pt-3">
  <h1>容器化到容器编排之旅</h1>

  

  
    


<div class="article-metadata">

  <div>
  
  
  
  
    <i class="fa-solid fa-feather"></i>
    

  <span >
      <a href="/author/ivan-velichko/">Ivan Velichko</a></span>
    
    <span class="middot-divider"></span>
    
  
  
  
  
  
  
    <i class="fa fa-language"></i>
    

  <span >
      <a href="/translators/%E9%A9%AC%E8%8B%A5%E9%A3%9E/">马若飞</a></span>
    <span class="middot-divider"></span>
  
  
  
  
  <span class="article-categories">
    <i class="fas fa-folder mr-1"></i><a href="/category/kubernetes/" class="text-capitalize">kubernetes</a></span>
  
  </div>

  
  <span class="article-date">
    
    
      
          
          发布于
      
    
    2019-08-28
  </span>
  

  

  
  <span class="middot-divider"></span>
  字数 5418
  <span class="middot-divider"></span>
  <span class="article-reading-time">
      阅读时长 25 分钟
  </span>
  

  
  
  
  

</div>

    





  
</div>


    </div>
    <div class="border-bottom mb-2"></div>
    <div class="row flex-xl-nowrap">
        <div class="col-3 d-none d-xl-block docs-toc">
            <!-- toc -->
            
<div class="">
    <ul class="nav toc-top">
        <li>
            <a href="#" id="back_to_top" class="docs-toc-title">目录</a>
        </li>
    </ul>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#编者按">编者按</a></li>
    <li><a href="#前言">前言</a></li>
    <li><a href="#容器运行时">容器运行时</a></li>
    <li><a href="#容器管理">容器管理</a>
      <ul>
        <li><a href="#containerd">containerd</a></li>
        <li><a href="#cri-o">cri-o</a></li>
        <li><a href="#dockerd">dockerd</a></li>
        <li><a href="#podman">podman</a></li>
        <li><a href="#conman">conman</a></li>
        <li><a href="#运行时垫片runtime-shims">运行时垫片（runtime shims）</a></li>
        <li><a href="#容器网络接口-cni">容器网络接口 (CNI)</a></li>
      </ul>
    </li>
    <li><a href="#编排">编排</a></li>
    <li><a href="#值得注意的项目">值得注意的项目</a>
      <ul>
        <li><a href="#buildahhttpsgithubcomcontainersbuildah"><a href="https://github.com/containers/buildah">buildah</a></a></li>
        <li><a href="#cnihttpsgithubcomcontainernetworkingcni"><a href="https://github.com/containernetworking/cni">cni</a></a></li>
        <li><a href="#cni-pluginshttpsgithubcomcontainernetworkingplugins"><a href="https://github.com/containernetworking/plugins">cni-plugins</a></a></li>
        <li><a href="#containerdhttpsgithubcomcontainerdcontainerd"><a href="https://github.com/containerd/containerd">containerd</a></a></li>
        <li><a href="#conmonhttpsgithubcomcontainersconmon"><a href="https://github.com/containers/conmon">conmon</a></a></li>
        <li><a href="#cri-ohttpsgithubcomcri-ocri-o"><a href="https://github.com/cri-o/cri-o">cri-o</a></a></li>
        <li><a href="#crunhttpsgithubcomcontainerscrun"><a href="https://github.com/containers/crun">crun</a></a></li>
        <li><a href="#imagehttpsgithubcomcontainersimage"><a href="https://github.com/containers/image">image</a></a></li>
        <li><a href="#lxchttpsgithubcomlxclxc"><a href="https://github.com/lxc/lxc">lxc</a></a></li>
        <li><a href="#lxdhttpsgithubcomlxclxd"><a href="https://github.com/lxc/lxd">lxd</a></a></li>
        <li><a href="#mobyhttpsgithubcommobymoby"><a href="https://github.com/moby/moby">moby</a></a></li>
        <li><a href="#oci-distribution-spechttpsgithubcomopencontainersdistribution-spec"><a href="https://github.com/opencontainers/distribution-spec">OCI distribution spec</a></a></li>
        <li><a href="#oci-image-spechttpsgithubcomopencontainersimage-spec"><a href="https://github.com/opencontainers/image-spec">OCI image spec</a></a></li>
        <li><a href="#oci-runtime-spechttpsgithubcomopencontainersruntime-spec"><a href="https://github.com/opencontainers/runtime-spec">OCI runtime spec</a></a></li>
        <li><a href="#podmanhttpsgithubcomcontainerslibpod"><a href="https://github.com/containers/libpod">podman</a></a></li>
        <li><a href="#rkthttpsgithubcomrktrkt"><a href="https://github.com/rkt/rkt">rkt</a></a></li>
        <li><a href="#runchttpsgithubcomopencontainersrunc"><a href="https://github.com/opencontainers/runc">runc</a></a></li>
        <li><a href="#skopeohttpsgithubcomcontainersskopeo"><a href="https://github.com/containers/skopeo">skopeo</a></a></li>
        <li><a href="#storagehttpsgithubcomcontainersstorage"><a href="https://github.com/containers/storage">storage</a></a></li>
      </ul>
    </li>
  </ul>
</nav>
</div>

            <!-- /toc -->
            
            <div class="subscribe-module col-12 mt-1">
    <img src="/img/wechat.jpg" alt="image" title="云原生社区的微信公众号"/>
    <p class="text-center pt-1">关注「云原生社区动态」微信公众号，获取本站更新</p>
</div>

            
        </div>
        <main class="article-body col-9 container docs-content" role="main">
            <article class="article">
                <div class="article-style">
                    
                    <details class="toc-inpage d-print-none d-show-block mb-0">
  <summary class="font-weight-bold">点击查看目录</summary>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#编者按">编者按</a></li>
    <li><a href="#前言">前言</a></li>
    <li><a href="#容器运行时">容器运行时</a></li>
    <li><a href="#容器管理">容器管理</a>
      <ul>
        <li><a href="#containerd">containerd</a></li>
        <li><a href="#cri-o">cri-o</a></li>
        <li><a href="#dockerd">dockerd</a></li>
        <li><a href="#podman">podman</a></li>
        <li><a href="#conman">conman</a></li>
        <li><a href="#运行时垫片runtime-shims">运行时垫片（runtime shims）</a></li>
        <li><a href="#容器网络接口-cni">容器网络接口 (CNI)</a></li>
      </ul>
    </li>
    <li><a href="#编排">编排</a></li>
    <li><a href="#值得注意的项目">值得注意的项目</a>
      <ul>
        <li><a href="#buildahhttpsgithubcomcontainersbuildah"><a href="https://github.com/containers/buildah">buildah</a></a></li>
        <li><a href="#cnihttpsgithubcomcontainernetworkingcni"><a href="https://github.com/containernetworking/cni">cni</a></a></li>
        <li><a href="#cni-pluginshttpsgithubcomcontainernetworkingplugins"><a href="https://github.com/containernetworking/plugins">cni-plugins</a></a></li>
        <li><a href="#containerdhttpsgithubcomcontainerdcontainerd"><a href="https://github.com/containerd/containerd">containerd</a></a></li>
        <li><a href="#conmonhttpsgithubcomcontainersconmon"><a href="https://github.com/containers/conmon">conmon</a></a></li>
        <li><a href="#cri-ohttpsgithubcomcri-ocri-o"><a href="https://github.com/cri-o/cri-o">cri-o</a></a></li>
        <li><a href="#crunhttpsgithubcomcontainerscrun"><a href="https://github.com/containers/crun">crun</a></a></li>
        <li><a href="#imagehttpsgithubcomcontainersimage"><a href="https://github.com/containers/image">image</a></a></li>
        <li><a href="#lxchttpsgithubcomlxclxc"><a href="https://github.com/lxc/lxc">lxc</a></a></li>
        <li><a href="#lxdhttpsgithubcomlxclxd"><a href="https://github.com/lxc/lxd">lxd</a></a></li>
        <li><a href="#mobyhttpsgithubcommobymoby"><a href="https://github.com/moby/moby">moby</a></a></li>
        <li><a href="#oci-distribution-spechttpsgithubcomopencontainersdistribution-spec"><a href="https://github.com/opencontainers/distribution-spec">OCI distribution spec</a></a></li>
        <li><a href="#oci-image-spechttpsgithubcomopencontainersimage-spec"><a href="https://github.com/opencontainers/image-spec">OCI image spec</a></a></li>
        <li><a href="#oci-runtime-spechttpsgithubcomopencontainersruntime-spec"><a href="https://github.com/opencontainers/runtime-spec">OCI runtime spec</a></a></li>
        <li><a href="#podmanhttpsgithubcomcontainerslibpod"><a href="https://github.com/containers/libpod">podman</a></a></li>
        <li><a href="#rkthttpsgithubcomrktrkt"><a href="https://github.com/rkt/rkt">rkt</a></a></li>
        <li><a href="#runchttpsgithubcomopencontainersrunc"><a href="https://github.com/opencontainers/runc">runc</a></a></li>
        <li><a href="#skopeohttpsgithubcomcontainersskopeo"><a href="https://github.com/containers/skopeo">skopeo</a></a></li>
        <li><a href="#storagehttpsgithubcomcontainersstorage"><a href="https://github.com/containers/storage">storage</a></a></li>
      </ul>
    </li>
  </ul>
</nav>
</details>

                    
                    <p>本文为翻译文章，<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/" target="_blank" rel="noopener">点击查看原文</a>。</p>
<h2 id="编者按">编者按</h2>
<p>本文是一篇介绍容器运行时和管理工具的文章。文中对主要的容器管理项目和技术做了较为详细的介绍和横向对比，并给出了项目的代码库供读者参考。</p>
<h2 id="前言">前言</h2>
<p>容器带来了更高级的服务端架构和更复杂的部署技术。目前已经有一堆类似标准的规范（<a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener">1</a>, <a href="https://github.com/opencontainers/image-spec" target="_blank" rel="noopener">2</a>, <a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/" target="_blank" rel="noopener">3</a>, <a href="https://github.com/containernetworking/cni" target="_blank" rel="noopener">4</a>, ……）描述了容器领域的方方面面。当然，它的底层是 Linux 的基本单元，如 namespace 和 cgroups。容器化软件已经变得非常的庞大，如果没有它自己关注的分离层，几乎是不可能实现的。在这个持续努力的过程中，我尝试引导自己从最底层到最高层尽可能多的实践（代码、安装、配置、集成等等），当然还有尽可能多的获得乐趣。本篇内容会随着时间的推移而改变，并反映出我对这一主题的理解。</p>
<h2 id="容器运行时">容器运行时</h2>
<p>我想从最底层的非内核原语说起——<strong>容器运行时</strong>。在容器服务里，运行时这个词是有歧义的。每个项目、公司或社区对术语<strong>容器运行时</strong>都有自己的、通常是基于上下文的特定理解。大多数情况下，运行时的特征是由一组职责定义的，从最基本的职责（创建 namespace、启动<em>init</em>进程）到复杂的容器管理，包括（但不限于）镜像操作。<a href="https://www.ianlewis.org/en/container-runtimes-part-1-introduction-container-r" target="_blank" rel="noopener">这篇文章</a>对运行时有一个很好的概述。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/runtime-levels.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<p>本节专门讨论低阶容器运行时。在<a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener">OCI 运行时规范</a>中，组成<a href="https://www.opencontainers.org/" target="_blank" rel="noopener">Open Container Initiative</a>的一些重要参与者对底层运行时进行了标准化。长话短说，低阶容器运行时是一个软件，作为一个包含 rootfs 和配置的目录输入，来描述容器参数（如资源限制、挂载点、流程开始等），并作为运行时启动一个独立进程，即容器。</p>
<p>到 2019 年，使用最广泛的容器运行时是<a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener">runc</a>。这个项目最初是 Docker 的一部分（因此它是用 Go 编写的），但最终被提取并转换为一个独立的 CLI 工具。很难高估这个组件的重要性——基本上 runc 是 OCI 运行时规范的一个参考实现。在我们的实践中将大量使用 runc，下面是<a href="https://iximiuz.com/en/posts/implementing-container-runtime-shim/" target="_blank" rel="noopener">一篇介绍性文章</a>（编者注：页面暂无内容）。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/runc.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<p>一个更值得注意的 OCI 运行时实现是<a href="https://github.com/containers/crun" target="_blank" rel="noopener">crun</a>。它用 C 语言编写，既可以作为可执行文件，也可以作为库使用。</p>
<h2 id="容器管理">容器管理</h2>
<p>在命令行中可以使用 runc 启动任意数量的容器。但是如果我们需要让这个过程自动化呢？假设我们需要启动数十个容器来跟踪它们的状态，其中一些在失败时需要重启，在终止时需要释放资源，必须从注册中心提取镜像，需要配置容器间网络等等。这是一个稍微高级的任务，并且是“容器管理器”的职责。老实说，我不知道这个词是否常用，但我发现用它来描述很合适。我将以下项目归类为“容器管理器”：<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#containerd" target="_blank" rel="noopener">containerd</a>， <a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#cri-o" target="_blank" rel="noopener">cri-o</a>， <a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#dockerd" target="_blank" rel="noopener">dockerd</a> 和 <a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#podman" target="_blank" rel="noopener">podman</a>.</p>
<h3 id="containerd">containerd</h3>
<p>与 runc 一样，我们可以再次看到 Docker 的遗产——<a href="https://github.com/containerd/containerd" target="_blank" rel="noopener">containerd</a>曾经是 Docker 项目的一部分，现在它是一个独立的软件，自称为容器运行时。但显然，它与运行时 runc 不是同一种类型的运行时。不仅它们的职责不同，其组织形式也不同。runc 只是一个命令行工具，containerd 是一个长活的守护进程。一个 runc 实例不能比底层容器进程活得更久。通常，它在<code>create</code>调用时启动，然后在<code>start</code>时从容器的 rootfs 中<a href="https://linux.die.net/man/3/exec" target="_blank" rel="noopener"><code>exec</code></a>特定文件。另一方面，containerd 可以运行的比成千上万个容器更长久。它更像是一个服务器，侦听传入的请求来启动、停止或报告容器的状态。在幕后，containerd 使用 runc。它不仅仅是一个容器生命周期管理器，还负责镜像管理（从注册表中拉取和提交镜像，本地存储镜像等等），跨容器联网管理和其他一些功能。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/containerd.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<h3 id="cri-o">cri-o</h3>
<p>另一个容器管理器是<a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener">cri-o</a>。containerd 是 Docker 重构后的结果，但 cri-o 却源于 Kubernetes 领域。在过去，Kubernetes 使用 Docker 管理容器。然而，随着<a href="https://github.com/rkt/rkt" target="_blank" rel="noopener">rkt</a>的崛起，一些人增加了在 Kubernetes 中可互换容器运行时的支持，允许 Docker 和/或 rkt 完成容器管理。这种变化导致 Kubernetes 中有大量的条件判断，没有人喜欢代码中有太多的“if”。因此，<a href="https://kubernetes.io/blog/2016/12/container-runtime-interface-cri-in-kubernetes/" target="_blank" rel="noopener">容器运行时接口（CRI）</a>被引入到 Kubernetes 中，这使得任何兼容 CRI 的高阶运行时（例如容器管理器）都可以在 Kubernetes 中使用，而无需任何代码的更改。cri-o 是 RedHat 实现的兼容 CRI 的运行时，与 containerd 一样，它也是一个守护进程，通过开放一个 gRPC 服务接口来创建、启动、停止（以及许多其他操作）容器。在底层，cri-o 可以使用任何符合 OCI 标准的低阶运行时和容器工作，默认的运行时仍然是 runc。cri-o 的主要目标是作为 Kubernetes 的容器运行时，版本控制也与 K8S 一致，项目的范围界定的很好，其代码库也比期望的更小（截止 2019 年 7 月大约是 20 个 CLOC，近似于 containerd 的 5 倍）。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/cri-o.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<p>cri-o 架构 (图像来自 cri-o.io)</p>
<p>规范的好处是所有符合规范的技术都可以互换使用。一旦 CRI 被引入，一个 containerd 的插件就可以在它的功能之上实现 CRI 的 gRPC 服务。这个想法是可行的，所以后来 containerd 获得了原生的 CRI 支持。因此，Kubernetes 可以同时使用 cri-o 和 containerd 作为运行时。</p>
<h3 id="dockerd">dockerd</h3>
<p>还有一个守护进程是<a href="https://github.com/moby/moby/tree/master/cmd/dockerd" target="_blank" rel="noopener">dockerd</a>，它是个多面手。一方面，它为<a href="https://github.com/docker/cli" target="_blank" rel="noopener">Docker 命令行</a> 开放了一个 API，为我们提供了所有这些常用的 Docker 命令（<code>Docker pull</code>、<code>Docker push</code>、<code>Docker run</code>、<code>Docker stats</code>等）。但是我们已经知道这部分功能被提取到了 containerd 中，所以在底层 dockerd 依赖于 containerd 就不足为奇了。但这基本上意味着 dockerd 只是一个前端适配器，它将 containerd 的 API 转换为广泛使用的 docker 引擎的 API。</p>
<p><a href="https://github.com/moby/moby" target="_blank" rel="noopener">dockerd</a>（编者注：原文链接是 moby 项目）也提供了<code>compose</code>和<code>swarm</code>功能，试图解决容器编配问题，包括容器的多机器集群。正如我们在 Kubernetes 上看到的，这个问题相当难解决。对于一个单 dockerd 守护进程来说，同时承担两大职责并不好。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/dockerd.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<p>dockerd 是 containerd 前端的一部分（图片来源于 Docker Blog）</p>
<h3 id="podman">podman</h3>
<p>守护进程中一个有趣的例外是<a href="https://github.com/containers/libpod" target="_blank" rel="noopener">podman</a>。这是另一个 Red Hat 项目，目的是提供一个名为<code>libpod</code>的库（而不是守护进程）来管理镜像、容器生命周期和 pod（容器组）。<code>podman</code>是一个构建在这个库之上的命令行管理工具。作为一个低阶的容器运行时，这个项目也使用 runc。从代码角度来看，podman 和 cri-o（都是 Red Hat 项目）有很多共同点。例如，它们都在内部使用<a href="https://github.com/containers/storage" target="_blank" rel="noopener">storage</a>和<a href="https://github.com/containers/image" target="_blank" rel="noopener">image</a>库。另一项正在进行的工作是在 cri-o 中直接使用 libpod 而不是 runc。podman 的另一个有趣的特性是用 drop-in 替换一些（最流行的？）日常工作流程中的<code>docker</code>命令。该项目声称兼容（在一定程度上）docker CLI API。</p>
<p>既然我们已经有了 dockerd、containerd 和 cri-o，为什么还要开发这样的项目呢？守护进程作为容器管理器的问题是，它们大多数时候必须使用 root 权限运行。尽管由于守护进程的整体性，系统中没有 root 权限也可以完成其 90% 的功能，但是剩下的 10% 需要以 root 启动守护进程。使用 podman，最终有可能使 Linux 用户的 namespace 拥有无根（rootless）容器。这可能是一个大问题，特别是在广泛的 CI 或多租户环境中，因为即使是没有权限的 Docker 容器实际上也只是系统上的<a href="https://brauner.github.io/2019/02/12/privileged.containes.html" target="_blank" rel="noopener">一个没有 root 访问权限的内核错误</a>。</p>
<p>关于这个有趣项目的更多信息可以在 <a href="http://crunchtools.com/podman-and-cri-o-in-rhel-8-and-openshift-4" target="_blank" rel="noopener">这里</a> 和 <a href="https://www.redhat.com/en/blog/why-red-hat-investing-cri-o-and-podman" target="_blank" rel="noopener">这里</a>找到。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/podman.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<h3 id="conman">conman</h3>
<p>这是我正在做的<a href="https://github.com/iximiuz/conman" target="_blank" rel="noopener">项目</a>，目的是实现一个微型容器管理器。它主要用于教学目的，但是最终的目标是使它兼容 CRI，并作为容器运行时运行在 Kubernetes 集群上。</p>
<h3 id="运行时垫片runtime-shims">运行时垫片（runtime shims）</h3>
<p>如果你自己尝试一下就会很快发现，以编程方式从容器管理器使用 runc 是一项相当棘手的任务。以下是需要解决的困难清单。</p>
<h4 id="在容器管理器重启时保证容器存活">在容器管理器重启时保证容器存活</h4>
<p>容器可以长时间运行，而容器管理器可能由于崩溃或更新（或无法预见的原因）而需要重新启动。这意味着我们需要使每个容器实例独立于启动它的容器管理器进程。幸运的是，runc 提供了一种方式通过命令<code>runc run --detach</code>从正在运行的容器中分离。我们也可能需要能够<a href="https://iximiuz.com/en/posts/linux-pty-what-powers-docker-attach-functionality/" target="_blank" rel="noopener">附加到一个正在运行的容器上</a>。为此，runc 可以运行一个由 Linux 伪终端控制的容器。通过 Unix 套接字传递 PTY 主文件描述符，可以将 PTY 的 master 端回传到启动进程（请参阅<code>runc create --console-socket</code>选项）。这意味着，只要底层容器实例存在，我们就可以保持启动进程的活动状态，以保存 PTY 文件描述符。如果我们决定在容器管理器进程中存储主 PTY 文件描述符，则重新启动该管理器将导致文件描述符的丢失，从而失去重新附着到正在运行的容器的能力。这意味着我们需要一个专用的（轻量级的）包装进程来负责转化和保持运行容器的附属状态。</p>
<h4 id="同步容器管理器和包装的-runc-实例">同步容器管理器和包装的 runc 实例</h4>
<p>由于我们通过添加包装器进程对 runc 进行了转化，所以需要一个 side-channel（也可能是 Unix 套接字）来将容器的启动传回容器管理器。</p>
<h4 id="持续追踪容器退出码exit-code">持续追踪容器退出码（exit code）</h4>
<p>分离容器会导致缺少容器状态更新。我们需要有一种方式将状态反馈给管理器。出于这个目的，文件系统听起来也是一个不错的选择。我们可以让包装器进程等待子 runc 进程终止，然后将它的退出码写到磁盘上预定义的位置。</p>
<p>为了解决所有这些问题（可能还有其他一些问题），通常使用所谓的 runtime shims。shim 是一个轻量级守护进程，控制一个正在运行的容器。shims 的实现有<a href="https://github.com/containers/conmon" target="_blank" rel="noopener">conmon</a>和 containerd 的 <a href="https://github.com/containerd/containerd/blob/master/runtime/v2/shim.go" target="_blank" rel="noopener">runtime shim</a>。我花了一些时间实现了自己的 shim 作为<a href="https://github.com/iximiuz/conman" target="_blank" rel="noopener">conman</a>项目的一部分，可以在文章<a href="https://iximiuz.com/en/posts/implementing-container-runtime-shim/" target="_blank" rel="noopener">“实现容器运行时 shim”</a>中找到（编者注：此文章还未撰写）。</p>
<h3 id="容器网络接口-cni">容器网络接口 (CNI)</h3>
<p>我们有多个责任重叠的容器运行时（或管理器），很明显需要提取网络相关的代码到一个专门的项目来复用它，或者每个运行时都应该有自己的方式来配置 NIC 设备，IP 路由，防火墙和网络的其他方面。例如，cri-o 和 containerd 都必须创建 Linux 网络名称空间，并设置 Linux <code>bridge</code>和<code>veth</code>设备来为 Kubernetes pods 创建沙箱。为了解决这个问题，引入了<a href="https://github.com/containernetworking/cni" target="_blank" rel="noopener">容器网络接口</a>项目。</p>
<p>CNI 项目提供了一个定义 CNI 插件的<a href="https://github.com/containernetworking/cni/blob/master/SPEC.md" target="_blank" rel="noopener">容器网络接口规范</a>。插件是一个可执行的 sic，容器运行时（或管理器）会调用它来安装（或释放）网络资源。插件可以用来创建网络接口，管理 IP 地址分配，或者对系统进行一些自定义配置。CNI 项目与语言无关，由于插件被定义为可执行的，它可以用于任何编程语言实现的运行时管理系统。CNI 项目还为作为一个名为<a href="https://github.com/containernetworking/plugins" target="_blank" rel="noopener">plugins</a>的用于存放最流行的用例的独立的代码库提供了一组参考插件实现。例如<a href="https://github.com/containernetworking/plugins/tree/master/plugins/main/bridge" target="_blank" rel="noopener">bridge</a>、<a href="https://github.com/containernetworking/plugins/tree/master/plugins/main/loopback" target="_blank" rel="noopener">loopback</a>、<a href="https://github.com/containernetworking/plugins/tree/master/plugins/meta/flannel" target="_blank" rel="noopener">flannel</a>等。</p>
<p>一些第三方项目将其网络相关的功能实现为 CNI 插件。一些最著名的项目如<a href="https://github.com/projectcalico/cni-plugin" target="_blank" rel="noopener">Project Calico</a>和<a href="https://github.com/weaveworks/weave" target="_blank" rel="noopener">Weave</a>。</p>
<h2 id="编排">编排</h2>
<p>容器的编排是一个非常大的主题。实际上，Kubernetes 代码中最大的部分就是解决编排问题，而不是容器化问题。因此，编排应该有自己单独的文章（或几篇）而不在本文描述。希望他们能很快跟进。</p>
<p>















<figure  id="figure-img">
  <div class="d-flex justify-content-center">
    <div class="w-100" ><img src="https://iximiuz.com/journey-from-containerization-to-orchestration-and-beyond/orchestration.png" alt="img" loading="lazy" data-zoomable /></div>
  </div><figcaption>
      img
    </figcaption></figure>
</p>
<h2 id="值得注意的项目">值得注意的项目</h2>
<h3 id="buildahhttpsgithubcomcontainersbuildah"><a href="https://github.com/containers/buildah" target="_blank" rel="noopener">buildah</a></h3>
<p>Buildah 是一个和<a href="https://github.com/opencontainers/image-spec" target="_blank" rel="noopener">OCI 容器镜像</a>一起使用的命令行工具。它是 RedHat 发起的一组项目（podman、skopeo、buildah）的一部分，目的是重新设计 Docker 处理容器的方法（主要是将单体和基于守护进程的方法转换为更细粒度的方法）。</p>
<h3 id="cnihttpsgithubcomcontainernetworkingcni"><a href="https://github.com/containernetworking/cni" target="_blank" rel="noopener">cni</a></h3>
<p>CNI 项目定义了一个容器网络接口插件规范以及一些 Go 工具。有关更深入的解释，请参见这篇<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#cni" target="_blank" rel="noopener">文章</a>相应的部分。</p>
<h3 id="cni-pluginshttpsgithubcomcontainernetworkingplugins"><a href="https://github.com/containernetworking/plugins" target="_blank" rel="noopener">cni-plugins</a></h3>
<p>一个最流行的 CNI 插件（如网桥、主机设备、环回、dhcp、防火墙等）的主库。有关更深入的解释，请参见<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#cni" target="_blank" rel="noopener">文章</a>的相应部分。</p>
<h3 id="containerdhttpsgithubcomcontainerdcontainerd"><a href="https://github.com/containerd/containerd" target="_blank" rel="noopener">containerd</a></h3>
<p>高级容器运行时（或容器管理器）作为 Docker 的一部分启动，并提取到了独立的项目中。有关更深入的解释，请参见相应的<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#containerd" target="_blank" rel="noopener">部分</a>。</p>
<h3 id="conmonhttpsgithubcomcontainersconmon"><a href="https://github.com/containers/conmon" target="_blank" rel="noopener">conmon</a></h3>
<p>一个用 C 语言编写的小型 OCI 运行时 shim，主要由<a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener">crio</a>使用。它提供了父进程（crio）与启动容器之间的同步、容器启动、退出码追踪、PTY 转发和其他一些功能。有关更深入的解释，请参见相应的<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#containerd" target="_blank" rel="noopener">部分</a>。</p>
<h3 id="cri-ohttpsgithubcomcri-ocri-o"><a href="https://github.com/cri-o/cri-o" target="_blank" rel="noopener">cri-o</a></h3>
<p>专注于 Kubernetes 容器管理器，遵循 Kubernetes 容器运行时接口（CRI）规范。版本控制与 k8s 版本控制相同。有关更深入的解释，请参见相应的<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#cri-o" target="_blank" rel="noopener">部分</a>。</p>
<h3 id="crunhttpsgithubcomcontainerscrun"><a href="https://github.com/containers/crun" target="_blank" rel="noopener">crun</a></h3>
<p>另一个 OCI 运行时规范实现。它声称是”快速和低内存占用的 OCI 容器运行时，完全用 C 编写“。但最重要的是，它可以用作任何 C/C++代码（或提供绑定其他语言）的库。它允许避免一些由它的守护进程特性引起的特定的“runc”缺陷。有关更多信息，请参见<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#runtime-shims" target="_blank" rel="noopener">Runtime Shims</a>一节。</p>
<h3 id="imagehttpsgithubcomcontainersimage"><a href="https://github.com/containers/image" target="_blank" rel="noopener">image</a></h3>
<p>一个被低估的（主观评价）Go 工具库，为<em>crio</em>、<em>podman</em>和<em>skopeo</em>等知名项目提供了支持。通过它的名字就很容易猜到——其目的是用各种方式来处理容器镜像和镜像注册表。</p>
<h3 id="lxchttpsgithubcomlxclxc"><a href="https://github.com/lxc/lxc" target="_blank" rel="noopener">lxc</a></h3>
<p>一个由 C 编写的可替换的低级容器运行时。</p>
<h3 id="lxdhttpsgithubcomlxclxd"><a href="https://github.com/lxc/lxd" target="_blank" rel="noopener">lxd</a></h3>
<p>一个由 Go 编写的高级容器运行时（或容器管理器）。底层使用 lxc 作为低级运行时。</p>
<h3 id="mobyhttpsgithubcommobymoby"><a href="https://github.com/moby/moby" target="_blank" rel="noopener">moby</a></h3>
<p>高级容器运行时（或容器管理器），以前称为<code>docker/docker</code>。提供一个著名的基于<em>containerd</em>功能的 Docker 引擎 API。有关更深入的解释，请参见相应的<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#dockerd" target="_blank" rel="noopener">部分</a>。</p>
<h3 id="oci-distribution-spechttpsgithubcomopencontainersdistribution-spec"><a href="https://github.com/opencontainers/distribution-spec" target="_blank" rel="noopener">OCI distribution spec</a></h3>
<p>一个容器镜像发布规范（开发中）。</p>
<h3 id="oci-image-spechttpsgithubcomopencontainersimage-spec"><a href="https://github.com/opencontainers/image-spec" target="_blank" rel="noopener">OCI image spec</a></h3>
<p>一个容器镜像规范。</p>
<h3 id="oci-runtime-spechttpsgithubcomopencontainersruntime-spec"><a href="https://github.com/opencontainers/runtime-spec" target="_blank" rel="noopener">OCI runtime spec</a></h3>
<p>一个低阶容器运行时规范。</p>
<h3 id="podmanhttpsgithubcomcontainerslibpod"><a href="https://github.com/containers/libpod" target="_blank" rel="noopener">podman</a></h3>
<p>一个无守护进程的 Docker 替代品。Docker 重新设计的 frontman 项目。更多信息参见 <a href="https://developers.redhat.com/blog/2019/02/21/podman-and-buildah-for-docker-users/" target="_blank" rel="noopener">RedHat developers blog</a>。</p>
<h3 id="rkthttpsgithubcomrktrkt"><a href="https://github.com/rkt/rkt" target="_blank" rel="noopener">rkt</a></h3>
<p>另一个容器管理系统。它提供了一个低阶运行时和一个高阶管理接口。它宣称是 Pod 原生的。向 Kubernetes 添加<em>rkt</em>支持的想法催生了 CRI 规范。该项目由 CoreOS 团队于 5 年前启动，在被 RedHat 收购后却停滞不前。截止到 2019 年 8 月，该项目的最后一次提交已经是大约两个月前了。<strong>更新</strong>：8 月 16 日，CNCF<a href="https://www.cncf.io/blog/2019/08/16/cncf-archives-the-rkt-project/" target="_blank" rel="noopener">宣布</a>技术监督委员会（TOC）投票决定将 rkt 项目存档。</p>
<h3 id="runchttpsgithubcomopencontainersrunc"><a href="https://github.com/opencontainers/runc" target="_blank" rel="noopener">runc</a></h3>
<p>一个低阶容器运行时和 OCI 运行时规范的参考实现。一开始作为 Docker 的一部分现在提取到了一个独立的项目中，普及度很高。有关更深入的解释，请参见相应的<a href="https://iximiuz.com/en/posts/journey-from-containerization-to-orchestration-and-beyond/#container-runtimes" target="_blank" rel="noopener">部分</a>。</p>
<h3 id="skopeohttpsgithubcomcontainersskopeo"><a href="https://github.com/containers/skopeo" target="_blank" rel="noopener">skopeo</a></h3>
<p>Skopeo 是一个命令行工具集，对容器镜像和镜像库执行各种操作。这是 RedHat 重新设计 Docker（参见 podman 和 buildah）工作的一部分，它将自己的职责抽取为专用的和独立的工具。</p>
<h3 id="storagehttpsgithubcomcontainersstorage"><a href="https://github.com/containers/storage" target="_blank" rel="noopener">storage</a></h3>
<p>一个被低估的 Go 类库，为 crio、podman 和 skopeo 等知名项目提供了支持。其目的是为存储文件系统层、容器镜像和容器（磁盘上的）提供方法。它还管理 bundle 的加载。</p>

                </div>
                

<div class="article-tags">
  
  <a class="badge badge-light" href="/tag/container/">container</a>
  
</div>











  
  
    



  
  
  
  
  
  <div class="media author-card content-widget-hr mb-4">
    
      
      <a href="/author/ivan-velichko/"><img class="avatar mr-3 avatar-circle" src="/author/ivan-velichko/avatar_hue38add62c87b7486d80c9f3fda25dfc1_12220_270x270_fill_q75_lanczos_center.jpg" alt="Ivan Velichko"></a>
    

    <div class="media-body">
      <p class="card-title"><a href="/author/ivan-velichko/">Ivan Velichko</a></p>
      
      
      
    </div>
  </div>


  


  
  
    




  




<div class="article-widget">
  
<div class="container-xl row post-nav">
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1" href="/blog/kubernetes-1.16-crd-ga-preview/" rel="next">
    <div class="meta-nav">下一页</div>
    <p>全面进化：Kubernetes CRD 1.16 GA 前瞻</p></a>
  
  
  
  <a class="col-6 post-nav-item btn btn-lg mb-md-1"  href="/blog/using-knative-as-api-aggregator-layer/" rel="prev">
    <div class="meta-nav">上一页</div>
    <p>使用 Knative 作为 API 聚合层的实践</p></a>
  
</div>

</div>










  

<p class="edit-page">
  <a href="https://github.com/cloudnativeto/cloudnative.to/edit/master/content/blog/journey-from-containerization-to-orchestration-and-beyond/index.md">
    <i class="fas fa-pen pr-2"></i>编辑本页
  </a>
</p>




  
  
  <div class="article-widget content-widget-hr">
    <p class="related-title">相关推荐</p>
    <ul>
      
      <li><a href="/blog/serverless-vs-containers/">Serverless vs Container——开发人员向左，DevOps 向右</a></li>
      
    </ul>
  </div>
  





  
  
  

  

  
  <section id="comments" class="mb-3 pt-0">
    <script>
  let themeNumber = localStorage.getItem('wcTheme');
  var giscusTheme = "light";
  if (themeNumber == 1){
    giscusTheme = "dark";
  }
  let giscusAttributes = {
    "src": "https://giscus.app/client.js",
    "data-theme": giscusTheme,
    "data-repo":"cloudnativeto\/cloudnative.to",
    "data-repo-id":"MDEwOlJlcG9zaXRvcnkyMzc3NDUxOTA=",
    "data-category":"General",
    "data-category-id":"MDE4OkRpc2N1c3Npb25DYXRlZ29yeTMyMDU5MzUy",
    "data-mapping":"pathname",
    "data-reactions-enabled":"",
    "data-emit-metadata":"0",
    "data-input-position":"top",
    "data-theme":giscusTheme,
    "data-lang":"zh-CN",
    "data-loading":"lazy",
    "crossorigin":"annoymous",
    "origins":"https://cloudnative.to",
    "originsRegex":"http://localhost:[0-9]+",
    "async": "",
  };

  let giscusScript = document.createElement("script");
  Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
  document.querySelector('#comments').appendChild(giscusScript);
</script>

  </section>
  



            </article>
        </main>
    </div>
</div>
  </div>

  <div class="page-footer">
    
    
    <div class="container">
      <footer class="site-footer">

  



  

  
  <div class="copyright py-4 bg-footer">
      <div class="row justify-content-center">
        <div class="text-center footer-color">
          <p class="mb-0">© 2020-2024 云原生社区保留所有权利</p>
        </div>
    </div>
  </div>

</footer>

    </div>
    
  </div>

  


<script src="/js/vendor-bundle.min.b4708d4364577c16ab7001b265a063a4.js"></script>




  

  
  

  

  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.1/highlight.min.js" integrity="sha512-Ypjm0o7jOxAd4hpdoppSEN0TQOC19UtPAqD+4s5AlXmUvbmmS/YMxYqAqarQYyxTnB6/rqip9qcxlNB/3U9Wdg==" crossorigin="anonymous"></script>
    
    
  










  
  <script id="search-hit-fuse-template" type="text/x-template">
    <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <div class="article-metadata search-hit-type">{{relpermalink}}</div>
          <a href="{{relpermalink}}">{{title}}</a>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
    </div>
  </script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha512-o38bmzBGX+hD3JHWUFCDA09btWaqrNmoJ3RXLlrysA7PP01Kgs4UlE4MhelE1v5dJR3+cxlR4qQlotsW7jKsnw==" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha512-mhbv5DqBMgrWL+32MmsDOt/OAvqr/cHimk6B8y/bx/xS88MVkYGPiVv2ixKVrkywF2qHplNRUvFsAHUdxZ3Krg==" crossorigin="anonymous"></script>
  












  
  
  
  
  
  
  







<script id="page-data" type="application/json">{"use_headroom":false}</script>










  
  


<script src="/zh/js/wowchemy.min.27bfa4a749fe1d78b45ea21d607b67f4.js"></script>







<script>

var mybutton = document.getElementById("backTopBtn");


window.onscroll = function() {scrollFunction()};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    mybutton.style.display = "block";
  } else {
    mybutton.style.display = "none";
  }
}


function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
</script>






<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/4.2.2/anchor.min.js" integrity="sha512-I7w3ZdSFzw5j3jU3ZkNikBNeIrl3i+hEuEdwNmqUJvwNcaBUNcijnP2gd9DtGlgVYDplfjGoD8vTNsID+lCjqg==" crossorigin="anonymous"></script>
<script>
  anchors.add();
</script>



<script>



(function() {
  'use strict';

  if(!document.queryCommandSupported('copy')) {
    return;
  }

  function flashCopyMessage(el, msg) {
    el.className = "highlight-copy-btn";
    el.textContent = msg;
    setTimeout(function() {
      el.textContent = "";
      el.className = "highlight-copy-btn fa fa-copy";
    }, 1000);
  }

  function selectText(node) {
    var selection = window.getSelection();
    var range = document.createRange();
    range.selectNodeContents(node);
    selection.removeAllRanges();
    selection.addRange(range);
    return selection;
  }

  function addCopyButton(containerEl) {
    var copyBtn = document.createElement("button");
    copyBtn.className = "highlight-copy-btn fa fa-copy";
    copyBtn.textContent = "";

    var codeEl = containerEl.firstElementChild;
    copyBtn.addEventListener('click', function() {
      try {
        var selection = selectText(codeEl);
        document.execCommand('copy');
        selection.removeAllRanges();
        
        flashCopyMessage(copyBtn, '已复制')
        
      } catch(e) {
        console && console.log(e);
        flashCopyMessage(copyBtn, 'Failed :\'(')
      }
    });

    containerEl.appendChild(copyBtn);
  }

  
  var highlightBlocks = document.getElementsByClassName('highlight');
  Array.prototype.forEach.call(highlightBlocks, addCopyButton);
})();
</script>



<script>

function Collapse(e){
  var node = document.getElementById(e);
  if (node.className.indexOf('fa-angle-down') > -1){
    node.setAttribute("class", "fa-solid fa-angle-right");
    }else{
    node.setAttribute("class", "fa-solid fa-angle-down");
    }
}
</script>


</body>
</html>
