<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Kuberentes | äº‘åŸç”Ÿç¤¾åŒºï¼ˆä¸­å›½ï¼‰</title>
    <link>https://cloudnativecn.com/tag/kuberentes/</link>
      <atom:link href="https://cloudnativecn.com/tag/kuberentes/index.xml" rel="self" type="application/rss+xml" />
    <description>Kuberentes</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Tue, 08 Apr 2025 14:35:56 +0800</lastBuildDate>
    <image>
      <url>https://cloudnativecn.com/media/sharing.png</url>
      <title>Kuberentes</title>
      <link>https://cloudnativecn.com/tag/kuberentes/</link>
    </image>
    
    <item>
      <title>kube-scheduler-simulatorï¼šè®©è°ƒåº¦å™¨å¯è§‚å¯Ÿã€å¯è°ƒè¯•ã€å¯æ‰©å±•</title>
      <link>https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/</link>
      <pubDate>Tue, 08 Apr 2025 14:35:56 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/</guid>
      <description>&lt;p&gt;Kubernetes Scheduler æ˜¯æ§åˆ¶é¢ä¸­çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£å†³å®šæ¯ä¸ª Pod è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰ä½¿ç”¨ Kubernetes çš„ç”¨æˆ·ï¼Œå…¶ Pod çš„å‘½è¿éƒ½æŒæ¡åœ¨è°ƒåº¦å™¨æ‰‹ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kube-scheduler-simulator&lt;/a&gt; æ˜¯ä¸€ä¸ª Kubernetes è°ƒåº¦å™¨çš„â€œæ¨¡æ‹Ÿå™¨â€ï¼Œæœ€åˆæ˜¯æˆ‘ï¼ˆKensei Nakadaï¼‰åœ¨ &lt;a href=&#34;https://summerofcode.withgoogle.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Summer of Code 2021&lt;/a&gt; ä¸­å¯åŠ¨çš„é¡¹ç›®ï¼Œåç»­å¾—åˆ°äº†ä¼—å¤šè´¡çŒ®è€…çš„æ”¯æŒã€‚è¿™ä¸ªå·¥å…·çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ·±å…¥è§‚å¯Ÿè°ƒåº¦å™¨çš„è¡Œä¸ºå’Œå†³ç­–é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯ä½¿ç”¨è¯¸å¦‚ &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pod äº²å’Œæ€§&lt;/a&gt; ç­‰è°ƒåº¦çº¦æŸçš„æ™®é€šç”¨æˆ·ï¼Œè¿˜æ˜¯å¼€å‘è‡ªå®šä¹‰è°ƒåº¦æ’ä»¶çš„è°ƒåº¦å™¨ä¸“å®¶ï¼Œè¿™æ¬¾æ¨¡æ‹Ÿå™¨éƒ½å°†æˆä¸ºä½ ç†è§£å’Œæµ‹è¯•è°ƒåº¦ç­–ç•¥çš„é‡è¦åŠ©æ‰‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨&#34;&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Kubernetes Scheduler æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ’ä»¶é©±åŠ¨çš„â€œé»‘ç›’â€ï¼Œæ¯ä¸ªæ’ä»¶ä»ä¸åŒçš„è§’åº¦å‚ä¸è°ƒåº¦å†³ç­–ï¼Œç†è§£å®ƒçš„è¡Œä¸ºå¹¶ä¸å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ åœ¨æµ‹è¯•é›†ç¾¤ä¸­çœ‹åˆ° Pod æ­£å¸¸è°ƒåº¦ï¼Œä¹Ÿä¸èƒ½ä¿è¯å®ƒæ˜¯æŒ‰ä½ é¢„æœŸçš„é€»è¾‘è°ƒåº¦çš„ã€‚è¿™ç§â€œè¡¨é¢æ­£å¸¸ï¼Œå®åˆ™åå·®â€çš„é—®é¢˜ï¼Œå¾€å¾€ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¦æ¥æ„æƒ³ä¸åˆ°çš„è°ƒåº¦åæœã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè°ƒåº¦å™¨çš„æµ‹è¯•ä¹Ÿéå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ã€‚çœŸå®é›†ç¾¤ä¸­çš„è°ƒåº¦åœºæ™¯å¤æ‚å¤šæ ·ï¼Œæ— æ³•é€šè¿‡æœ‰é™çš„æµ‹è¯•ç”¨ä¾‹å…¨é¢è¦†ç›–ã€‚å³ä½¿æ˜¯ Kubernetes å®˜æ–¹çš„ upstream è°ƒåº¦å™¨ï¼Œä¹Ÿç»å¸¸æ˜¯åœ¨å‘å¸ƒåæ‰è¢«ç”¨æˆ·å‘ç°é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¼€å‘ç¯å¢ƒæˆ–æ²™ç®±é›†ç¾¤æ˜¯å¸¸ç”¨çš„æµ‹è¯•æ‰‹æ®µï¼Œä½†è¿™ç±»ç¯å¢ƒé€šå¸¸è§„æ¨¡è¾ƒå°ã€å·¥ä½œè´Ÿè½½æœ‰é™ï¼Œä¸å®é™…ç”Ÿäº§é›†ç¾¤çš„è¡Œä¸ºå­˜åœ¨å·¨å¤§å·®å¼‚ã€‚å› æ­¤ï¼Œä»…é ä¼ ç»Ÿæ–¹æ³•ï¼Œå¾ˆéš¾é¢„çŸ¥è°ƒåº¦å™¨åœ¨çœŸå®ç¯å¢ƒä¸­çš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;p&gt;kube-scheduler-simulator è¯ç”Ÿæ­£æ˜¯ä¸ºäº†å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·å¯ä»¥éªŒè¯è°ƒåº¦çº¦æŸã€è°ƒåº¦å™¨é…ç½®ã€è‡ªå®šä¹‰æ’ä»¶çš„è¡Œä¸ºï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­æµ‹è¯•è°ƒåº¦æ•ˆæœï¼Œè€Œä¸å½±å“å®é™…çš„å·¥ä½œè´Ÿè½½ï¼›&lt;/li&gt;
&lt;li&gt;è¿˜èƒ½è§‚å¯Ÿè°ƒåº¦è¿‡ç¨‹ä¸­çš„æ¯ä¸€ä¸ªå†³ç­–ç»†èŠ‚ï¼ŒçœŸæ­£â€œæŠŠè°ƒåº¦å™¨å˜æˆç™½ç›’â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¨¡æ‹Ÿå™¨å…·æœ‰ä»€ä¹ˆèƒ½åŠ›&#34;&gt;æ¨¡æ‹Ÿå™¨å…·æœ‰ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;kube-scheduler-simulator çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š&lt;strong&gt;æ­ç¤ºè°ƒåº¦å™¨å†…éƒ¨çš„å†³ç­–è¿‡ç¨‹&lt;/strong&gt;ã€‚Kubernetes Scheduler æ˜¯åŸºäº &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/scheduling-framework/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ¡†æ¶ï¼ˆScheduling Frameworkï¼‰&lt;/a&gt; å®ç°çš„ï¼Œæ•´ä¸ªè°ƒåº¦æµç¨‹åˆ†ä¸ºå¤šä¸ªæ‰©å±•ç‚¹ï¼Œå¦‚ Filterã€Scoreã€Bind ç­‰ï¼Œæ¯ä¸ªé˜¶æ®µä¼šè°ƒç”¨å¯¹åº”æ’ä»¶è¿›è¡Œåˆ¤æ–­å’Œæ‰“åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡æ‹Ÿå™¨æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­åˆ›å»º Podã€Nodeã€Deployment ç­‰ Kubernetes èµ„æºï¼Œå¹¶æ¸…æ™°åœ°çœ‹åˆ°è°ƒåº¦å™¨æ¯ä¸ªæ’ä»¶çš„æ‰§è¡Œç»“æœå’Œå¾—åˆ†æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨-web-ui&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ Web UI&#34; srcset=&#34;
               /blog/introducing-kube-scheduler-simulator/simulator_hu_1197737eabcff498.webp 400w,
               /blog/introducing-kube-scheduler-simulator/simulator_hu_fcb3f1e7a798b9b9.webp 760w,
               /blog/introducing-kube-scheduler-simulator/simulator_hu_78c3b9eb211a498b.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/simulator_hu_1197737eabcff498.webp&#34;
               width=&#34;760&#34;
               height=&#34;505&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ Web UI
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ¨¡æ‹Ÿå™¨ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œçš„æ˜¯ä¸€ä¸ª &lt;strong&gt;å¯è°ƒè¯•ç‰ˆæœ¬çš„è°ƒåº¦å™¨&lt;/strong&gt;ï¼Œå®ƒä¼šå°†å„æ’ä»¶åœ¨ä¸åŒé˜¶æ®µçš„æ‰§è¡Œç»“æœå†™å…¥ Pod çš„æ³¨è§£ä¸­ï¼Œå‰ç«¯ç•Œé¢å†å°†è¿™äº›ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹è°ƒåº¦å™¨åœ¨ Filter é˜¶æ®µå¦‚ä½•åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å¯ç”¨ï¼Œåœ¨ Score é˜¶æ®µå„æ’ä»¶æ‰“äº†å¤šå°‘åˆ†ï¼Œæœ€ç»ˆé€‰æ‹©äº†å“ªä¸ªèŠ‚ç‚¹ä½œä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è¿™äº›ä¿¡æ¯éƒ½èƒ½åœ¨ Pod çš„æ³¨è§£ä¸­æŸ¥é˜…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Pod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# The JSONs within these annotations are manually formatted for clarity in the blog post. &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/bind-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;DefaultBinder&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/filter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeName&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeUnschedulable&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;passed&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeName&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeUnschedulable&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;passed&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/finalscore-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;52&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;47&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;300&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;76&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;73&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;300&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }       &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/permit-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/permit-result-timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/postfilter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prebind-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;VolumeBinding&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prefilter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prefilter-result-status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;AzureDiskLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;EBSLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;GCEPDLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;InterPodAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodePorts&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeVolumeLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;PodTopologySpread&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeBinding&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeRestrictions&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeZone&amp;#34;:&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prescore-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;InterPodAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeAffinity&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;PodTopologySpread&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;TaintToleration&amp;#34;:&amp;#34;success&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/reserve-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;VolumeBinding&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/result-history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/bind-result&amp;#34;:&amp;#34;{\&amp;#34;DefaultBinder\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/filter-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;NodeName\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeUnschedulable\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;passed\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;NodeName\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeUnschedulable\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;passed\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/finalscore-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;52\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;47\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;300\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;76\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;73\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;300\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/permit-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/permit-result-timeout&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/postfilter-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prebind-result&amp;#34;:&amp;#34;{\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prefilter-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prefilter-result-status&amp;#34;:&amp;#34;{\&amp;#34;AzureDiskLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;EBSLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;GCEPDLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;InterPodAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodePorts\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeVolumeLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;PodTopologySpread\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeRestrictions\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeZone\&amp;#34;:\&amp;#34;\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prescore-result&amp;#34;:&amp;#34;{\&amp;#34;InterPodAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;PodTopologySpread\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/reserve-result&amp;#34;:&amp;#34;{\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/score-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;52\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;47\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;76\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;73\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/selected-node&amp;#34;:&amp;#34;node-mtb5x&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      ]      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/score-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;52&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;47&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;76&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;73&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/selected-node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;node-mtb5x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ä»…å¦‚æ­¤ï¼Œç”¨æˆ·è¿˜å¯ä»¥é›†æˆè‡ªå·±å¼€å‘çš„ &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/scheduling-framework/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ’ä»¶&lt;/a&gt; æˆ– &lt;a href=&#34;https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/scheduler_extender.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ‰©å±•å™¨ï¼ˆExtenderï¼‰&lt;/a&gt;ï¼Œå¹¶åœ¨æ¨¡æ‹Ÿå™¨ä¸­è§‚å¯Ÿå…¶è¡Œä¸ºï¼Œè°ƒè¯•æ•ˆæœæ˜¾è‘—æå‡ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥å¯è°ƒè¯•è°ƒåº¦å™¨è¿˜å¯ä»¥è„±ç¦»æ¨¡æ‹Ÿå™¨ç‹¬ç«‹è¿è¡Œï¼Œç”¨äºé›†æˆæµ‹è¯•ã€è‡ªå®šä¹‰è°ƒåº¦å™¨çš„å¼€å‘æˆ–çœŸå®é›†ç¾¤ä¸­çš„è°ƒè¯•åˆ†æã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¨¡æ‹Ÿå™¨--æ›´å¥½çš„å¼€å‘ç¯å¢ƒ&#34;&gt;æ¨¡æ‹Ÿå™¨ = æ›´å¥½çš„å¼€å‘ç¯å¢ƒï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼ŒçœŸå®è°ƒåº¦åœºæ™¯å¤æ‚å¤šæ ·ï¼Œå•é å¼€å‘é›†ç¾¤æ— æ³•è¦†ç›–å…¨éƒ¨å¯èƒ½æ€§ã€‚æ¨¡æ‹Ÿå™¨æä¾›äº†ä¸€ä¸ªæ›´å¼ºå¤§çš„æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨ &lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator/blob/master/simulator/docs/import-cluster-resources.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†ç¾¤èµ„æºå¯¼å…¥åŠŸèƒ½&lt;/a&gt;ï¼Œç”¨æˆ·å¯ä»¥å°†ç”Ÿäº§é›†ç¾¤çš„èµ„æºåŒæ­¥åˆ°æ¨¡æ‹Ÿå™¨ä¸­ï¼Œ&lt;strong&gt;åœ¨ä¸å½±å“å®é™…ä¸šåŠ¡çš„å‰æä¸‹æµ‹è¯•æ–°ç‰ˆæœ¬è°ƒåº¦å™¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨ä¸­éªŒè¯ Pod çš„è°ƒåº¦è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå†å°†è°ƒåº¦å™¨éƒ¨ç½²åˆ°ç”Ÿäº§é›†ç¾¤ï¼Œæå¤§é™ä½äº†è°ƒåº¦ç›¸å…³çš„å˜æ›´é£é™©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨åœºæ™¯æ€»ç»“&#34;&gt;ä½¿ç”¨åœºæ™¯æ€»ç»“&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤ç”¨æˆ·&lt;/strong&gt;ï¼šéªŒè¯è°ƒåº¦çº¦æŸï¼ˆå¦‚ PodAffinityã€TopologySpreadï¼‰æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤ç®¡ç†å‘˜&lt;/strong&gt;ï¼šè¯„ä¼°è°ƒåº¦å™¨é…ç½®å˜æ›´å¯¹è°ƒåº¦ç»“æœçš„å½±å“ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦å™¨æ’ä»¶å¼€å‘è€…&lt;/strong&gt;ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸­æµ‹è¯•è‡ªå®šä¹‰æ’ä»¶ã€ä½¿ç”¨åŒæ­¥åŠŸèƒ½è¿›è¡Œæ›´çœŸå®çš„éªŒè¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¦‚ä½•ä¸Šæ‰‹&#34;&gt;å¦‚ä½•ä¸Šæ‰‹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®æ— éœ€ Kubernetes é›†ç¾¤ï¼Œåªéœ€è¦æœ¬åœ°å®‰è£… Docker å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone git@github.com:kubernetes-sigs/kube-scheduler-simulator.git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; kube-scheduler-simulator
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make docker_up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒWeb ç•Œé¢å°†è¿è¡Œåœ¨ &lt;code&gt;http://localhost:3000&lt;/code&gt;ï¼Œå³å¯å¼€å§‹ä½ çš„è°ƒåº¦å®éªŒï¼&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kubernetes-sigs/kube-scheduler-simulator&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å‚ä¸è´¡çŒ®&#34;&gt;å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¯¥é¡¹ç›®ç”± &lt;a href=&#34;https://github.com/kubernetes/community/blob/master/sig-scheduling/README.md#kube-scheduler-simulator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes SIG Scheduling&lt;/a&gt; ç»´æŠ¤ã€‚æ¬¢è¿ä½ æå‡º Issuesã€æäº¤ PRï¼Œä¹Ÿæ¬¢è¿åŠ å…¥ç¤¾åŒºå‚ä¸è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;Slack é¢‘é“ï¼š&lt;a href=&#34;https://kubernetes.slack.com/messages/sig-scheduling&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;#sig-scheduling&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é¸£è°¢&#34;&gt;é¸£è°¢&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªæ¨¡æ‹Ÿå™¨çš„å‘å±•ç¦»ä¸å¼€ä¼—å¤šå¿—æ„¿è€…å·¥ç¨‹å¸ˆçš„åšæŒå’Œè´¡çŒ®ï¼Œæ„Ÿè°¢æ‰€æœ‰ä¸ºä¹‹ä»˜å‡ºå¿ƒåŠ›çš„ &lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator/graphs/contributors&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è´¡çŒ®è€…ä»¬&lt;/a&gt;ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Cilium å’Œ BGP ä¸º Kubernetes æœåŠ¡è¿›è¡Œè´Ÿè½½å‡è¡¡</title>
      <link>https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/</link>
      <pubDate>Tue, 30 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&#34;https://sue.eu/blogs/expose-loadbalanced-kubernetes-services-with-bgp-cilium/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Exposing Load-Balanced Kubernetes Services with Cilium&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Cilium æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨ä¸ºäº‘åŸç”Ÿç¯å¢ƒæä¾›ç½‘ç»œã€å®‰å…¨å’Œå¯è§‚æµ‹æ€§ï¼Œä¾‹å¦‚ Kubernetes é›†ç¾¤å’Œå…¶ä»–å®¹å™¨ç¼–æ’å¹³å°ã€‚æœ¬åšå®¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Cilium å’Œ BGP å°†æ‚¨çš„ Kubernetes æœåŠ¡æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BGP&lt;/strong&gt;
è¾¹ç•Œç½‘å…³åè®®ï¼ˆBGPï¼‰æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„å¤–éƒ¨ç½‘å…³åè®®ï¼Œæ—¨åœ¨åœ¨äº’è”ç½‘ä¸Šçš„è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ä¹‹é—´äº¤æ¢è·¯ç”±å’Œå¯è¾¾æ€§ä¿¡æ¯ã€‚è¯¥åè®®è¢«åˆ†ç±»ä¸ºè·¯å¾„çŸ¢é‡åè®®ï¼Œå› æ­¤å®ƒæ ¹æ®ç”±ç½‘ç»œç®¡ç†å‘˜é…ç½®çš„è·¯å¾„ã€ç½‘ç»œç­–ç•¥æˆ–è§„åˆ™é›†æ¥åšå‡ºè·¯ç”±å†³ç­–ã€‚å®ƒå‚ä¸åˆ¶å®šæ ¸å¿ƒè·¯ç”±å†³ç­–ï¼Œè¿™ä½¿å¾—å®ƒå¯¹äº’è”ç½‘çš„æ­£å¸¸è¿è¡Œè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;BGP ä¸“ä¸ºå¥å£®æ€§å’Œå¯æ‰©å±•æ€§è€Œå¼€å‘ï¼Œç”¨äºåœ¨å¤§å‹ç½‘ç»œä¹‹é—´è·¯ç”±æ•°æ®ï¼ŒåŒ…æ‹¬ ISP å’Œå…¶ä»–å¤§å‹ç»„ç»‡ã€‚å®ƒç¡®ä¿äº†æ— ç¯çš„åŸŸé—´è·¯ç”±ï¼Œå¹¶æœ‰åŠ©äºç»´æŠ¤ç¨³å®šçš„ç½‘ç»œç»“æ„ã€‚BGP å¯ä»¥å¤„ç†æ•°åƒä¸ªè·¯ç”±ï¼Œå¹¶ä»¥å…¶éšç€ç½‘ç»œå¢é•¿è€Œæ‰©å±•çš„èƒ½åŠ›è€Œè„±é¢–è€Œå‡ºã€‚ç”±äºå…¶çµæ´»æ€§å’Œå¯¹è·¯ç”±ç­–ç•¥çš„æ§åˆ¶ï¼Œå®ƒè¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½¿å…¶èƒ½å¤Ÿå¿«é€Ÿå“åº”ç½‘ç»œå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cilium å’Œ BGP&lt;/strong&gt;
åœ¨ç‰ˆæœ¬ 1.10 ä¸­ï¼ŒCilium é›†æˆäº†å¯¹ MetalLB çš„ BGP æ”¯æŒï¼Œä»è€Œä½¿å…¶èƒ½å¤Ÿå®£å¸ƒ Kubernetes æœåŠ¡çš„ IP åœ°å€ç±»å‹ä¸º&lt;a href=&#34;https://sue.eu/insights/bgp-load-balancing/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ BGP çš„ LoadBalancer&lt;/a&gt;ã€‚å…¶ç»“æœæ˜¯ï¼ŒæœåŠ¡å¯ä»¥ä» Kubernetes ç½‘ç»œå¤–éƒ¨è®¿é—®ï¼Œæ— éœ€é¢å¤–çš„ç»„ä»¶ï¼Œä¾‹å¦‚ Ingress è·¯ç”±å™¨ã€‚ç‰¹åˆ«æ˜¯â€œæ— éœ€é¢å¤–ç»„ä»¶â€çš„éƒ¨åˆ†æ˜¯ä»¤äººæŒ¯å¥‹çš„æ¶ˆæ¯ï¼Œå› ä¸ºæ¯ä¸ªç»„ä»¶éƒ½ä¼šå¢åŠ å»¶è¿Ÿï¼Œå› æ­¤æ²¡æœ‰é¢å¤–ç»„ä»¶ä¼šå‡å°‘å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu_c90084cc71b9f310.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu_949699ed36a46eaf.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu_b28ed5481d705e36.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu_c90084cc71b9f310.webp&#34;
               width=&#34;760&#34;
               height=&#34;664&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤ç¤ºä¾‹ä¸­æ˜¾ç¤ºçš„ç½‘ç»œé…ç½®ä»£è¡¨äº†å…·æœ‰ç”¨äºæœåŠ¡è´Ÿè½½å‡è¡¡çš„ BGP é›†æˆçš„åŸºäº Kubernetes çš„ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯é…ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ç½‘ç»œï¼ˆLAN ç½‘ç»œï¼‰ï¼š&lt;/strong&gt; å­˜åœ¨ä¸€ä¸ªå…·æœ‰ IP èŒƒå›´ 192.168.10.0/24 çš„æœ¬åœ°åŒºåŸŸç½‘ç»œï¼ˆLANï¼‰ï¼Œè¿æ¥äº†å¤šä¸ªå®¢æˆ·ç«¯ã€‚è¯¥ç½‘ç»œåŒ…å«äº†è®¾ç½®çš„ç”¨æˆ·ç«¯ï¼Œç”¨æˆ·å’Œå…¶ä»–è®¾å¤‡å¯ä»¥åœ¨å…¶ä¸­è®¿é—®æ‰˜ç®¡åœ¨ Kubernetes é›†ç¾¤ä¸Šçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Kubernetes ç½‘ç»œï¼š&lt;/strong&gt; Kubernetes é›†ç¾¤å…·æœ‰è‡ªå·±çš„ç½‘ç»œç©ºé—´ï¼Œç”±å­ç½‘ 192.168.1.0/24 æŒ‡å®šã€‚è¯¥ç½‘ç»œåŒ…æ‹¬ Kubernetes ä¸»èŠ‚ç‚¹ï¼ˆk8s-master1ï¼‰å’Œå¤šä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆä» k8s-worker1 åˆ° k8s-worker5ï¼‰ã€‚è¿™äº›èŠ‚ç‚¹æ‰˜ç®¡äº† Kubernetes é›†ç¾¤çš„å®é™…å®¹å™¨å’Œå·¥ä½œè´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†ç½‘ç»œï¼š&lt;/strong&gt; ä¸€ä¸ªç‹¬ç«‹çš„ç®¡ç†ç½‘ç»œï¼Œè‡³å°‘æœ‰ä¸€ä¸ªè®¾å¤‡ï¼ˆk8s-controlï¼‰ç”¨äºæ§åˆ¶å’Œç®¡ç† Kubernetes é›†ç¾¤ã€‚è¿™ä¸ Kubernetes æ•°æ®å¹³é¢åˆ†å¼€ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§å’Œç®¡ç†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BGP è·¯ç”±å™¨ï¼š&lt;/strong&gt; bgp-router1 æ¡¥æ¥äº†å¤–éƒ¨ç½‘ç»œ/äº’è”ç½‘å’Œ Kubernetes ç½‘ç»œã€‚å®ƒè´Ÿè´£ä½¿ç”¨ BGP æ¥å¹¿æ’­è·¯ç”±å°†æµé‡è·¯ç”±åˆ° Kubernetes é›†ç¾¤ä¸­çš„é€‚å½“æœåŠ¡ã€‚IP èŒƒå›´ 172.16.10.0/24 ä¿ç•™ä¾› Kubernetes é›†ç¾¤å†…çš„ LoadBalancer æœåŠ¡ä½¿ç”¨ã€‚å½“å°† Kubernetes æœåŠ¡å…¬å¼€ä¸º LoadBalancer æ—¶ï¼Œå®ƒä¼šåˆ†é…ä¸€ä¸ªæ¥è‡ªæ­¤æ± çš„ IP åœ°å€ã€‚ç„¶åï¼ŒBGP è·¯ç”±å™¨å°†æ­¤ IP å¹¿æ’­åˆ°å¤–éƒ¨ç½‘ç»œï¼Œä»è€Œä½¿æµé‡è·¯ç”±åˆ° LoadBalancer æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç½‘ç»œé…ç½®å…è®¸é€šè¿‡åˆ©ç”¨ BGP è¿›è¡Œ IP åœ°å€ç®¡ç†å’Œè·¯ç”±æ¥å®ç°è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸Šçš„æœåŠ¡çš„å¯æ‰©å±•å’Œçµæ´»çš„è´Ÿè½½å‡è¡¡ã€‚å®ƒå°†å®¢æˆ·ç«¯è®¿é—®ã€é›†ç¾¤ç®¡ç†å’ŒæœåŠ¡æµé‡åˆ†åˆ«åˆ†éš”åˆ°ä¸åŒçš„ç½‘ç»œä¸­ï¼Œä»¥è¿›è¡Œç»„ç»‡å’Œå®‰å…¨æ€§ç›®çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æš´éœ²æœåŠ¡&#34;&gt;æš´éœ²æœåŠ¡&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦æ„å»ºäº†ä¸Šè¿°åŸºç¡€æ¶æ„ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªéƒ¨ç½²å¹¶ä½¿ç”¨ BGP å°†å…¶æš´éœ²ç»™ç½‘ç»œã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªéƒ¨ç½²å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç®€å•çš„ NGINX Web æœåŠ¡å™¨ï¼Œæä¾›é»˜è®¤çš„ Web é¡µé¢ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªç±»å‹ä¸º LoadBalancer çš„ Serviceã€‚è¿™å°†å¯¼è‡´ä½¿ç”¨ BGP å‘æˆ‘ä»¬çš„è·¯ç”±å™¨å®£å¸ƒå¤–éƒ¨ IP åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æ„å»ºå®Œæˆï¼Œå‘½ä»¤ &lt;code&gt;kubectl get svc&lt;/code&gt; æ˜¾ç¤ºæˆ‘ä»¬çš„æœåŠ¡å…·æœ‰å¤–éƒ¨ IP åœ°å€ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;NAME          TYPE           CLUSTER-IP       EXTERNAL-IP       PORT(S)         AGE
kubernetes    ClusterIP      10.96.0.1        &amp;lt;none&amp;gt;            443/TCP         7d3h
web1-lb       LoadBalancer   10.106.236.120   172.16.10.0       80:30256/TCP    7d2h
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;172.16.10.0 è¿™ä¸ªåœ°å€çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†æ²¡é—®é¢˜ã€‚é€šå¸¸ä¼šè·³è¿‡.0 åœ°å€ï¼Œè€Œä½¿ç”¨.1 åœ°å€ä½œä¸ºç¬¬ä¸€ä¸ªåœ°å€ã€‚å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯åœ¨æ—©æœŸï¼Œ.0 åœ°å€ç”¨äºå¹¿æ’­ï¼Œåæ¥æ”¹ä¸º.255ã€‚ç”±äº.0 ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€ï¼Œè´Ÿè´£åœ°å€æ± çš„ MetalLB ä¼šå°†å…¶åˆ†é…ä¸ºç¬¬ä¸€ä¸ªåœ°å€ã€‚åœ¨è·¯ç”±å™¨ bgp-router1 ä¸Šè¿è¡Œçš„å‘½ä»¤ &lt;code&gt;vtysh -c &#39;show bgp summary&#39;&lt;/code&gt; æ˜¾ç¤ºå®ƒå·²æ¥æ”¶åˆ°ä¸€ä¸ªå‰ç¼€ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;IPv4 Unicast Summary:
BGP router identifier 192.168.1.1, local AS number 64512 vrf-id 0
BGP table version 17
RIB entries 1, using 192 bytes of memory
Peers 6, using 128 KiB of memoryNeighbour V AS MsgRcvd MsgSent TblVer InQ OutQ Up/Down State/PfxRcd PfxSnt
192.168.1.10 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.21 4 64512 446 435 0 0 0 03:36:54 1 0
192.168.1.22 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.23 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.24 4 64512 446 435 0 0 0 03:36:56 1 0
192.168.1.25 4 64512 445 435 0 0 0 03:36:56 1 0

Total number of neighbors 6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è·¯ç”±è¡¨çš„ä»¥ä¸‹ç‰‡æ®µï¼ˆip routeï¼‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºç‰¹å®šçš„ IP åœ°å€ 172.16.10.0ï¼Œå­˜åœ¨ 6 ä¸ªå¯èƒ½çš„è·¯ç”±/ç›®æ ‡ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰ Kubernetes èŠ‚ç‚¹éƒ½å®£å¸ƒå®ƒä»¬æ­£åœ¨å¤„ç†è¯¥åœ°å€çš„æµé‡ã€‚å¤ªæ£’äº†ï¼ï¼&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;172.16.10.0 proto bgp metric 20
nexthop via 192.168.1.10 dev enp7s0 weight 1
nexthop via 192.168.1.21 dev enp7s0 weight 1
nexthop via 192.168.1.22 dev enp7s0 weight 1
nexthop via 192.168.1.23 dev enp7s0 weight 1
nexthop via 192.168.1.24 dev enp7s0 weight 1
nexthop via 192.168.1.25 dev enp7s0 weight 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®é™…ä¸Šï¼Œç°åœ¨ä»æˆ‘ä»¬çš„è·¯ç”±å™¨ä¸Šå¯ä»¥çœ‹åˆ° Web é¡µé¢ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ curl -s -v http://172.16.10.0/ -o /dev/null

* Trying 172.16.10.0â€¦
* TCP_NODELAY set
* Connected to 172.16.10.0 (172.16.10.0) port 80 (#0)
&amp;gt; GET / HTTP/1.1
&amp;gt; Host: 172.16.10.0
&amp;gt; User-Agent: curl/7.61.1
&amp;gt; Accept: */*
&amp;lt; HTTP/1.1 200 OK
&amp;lt; Server: nginx/1.21.3
&amp;lt; Date: Sun, 31 Oct 2023 14:19:17 GMT
&amp;lt; Content-Type: text/html
&amp;lt; Content-Length: 615
&amp;lt; Last-Modified: Tue, 07 Sep 2023 15:21:03 GMT
&amp;lt; Connection: keep-alive
&amp;lt; ETag: â€œ6137835f-267â€
&amp;lt; Accept-Ranges: bytes&amp;gt;
{ [615 bytes data]}
* Connection #0 to host 172.16.10.0 left intact
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è€Œä¸”ï¼Œä½äºæˆ‘ä»¬å®¢æˆ·ç«¯ç½‘ç»œä¸­çš„å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥è®¿é—®ç›¸åŒçš„é¡µé¢ï¼Œå› ä¸ºå®ƒä½¿ç”¨ bgp-router1 ä½œä¸ºé»˜è®¤è·¯ç”±ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu_8dca7188346418a4.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu_332ba01b4bfc8c6b.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu_1155b82e2e46de23.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu_8dca7188346418a4.webp&#34;
               width=&#34;598&#34;
               height=&#34;345&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æ›´å¤šç»†èŠ‚&#34;&gt;æ›´å¤šç»†èŠ‚&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä¸€åˆ‡éƒ½è¿ä½œæ­£å¸¸ï¼Œå¤§å¤šæ•°å·¥ç¨‹å¸ˆéƒ½æƒ³çœ‹åˆ°æ›´å¤šç»†èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šè®©ä½ å¤±æœ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ping&#34;&gt;Ping&lt;/h3&gt;
&lt;p&gt;ä½ å°†æ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ï¼ŒLoadBalancer çš„ IP åœ°å€æ— æ³•é€šè¿‡ ping è®¿é—®ã€‚æ·±å…¥æŒ–æ˜ä¸€ä¸‹å¯ä»¥æ­ç¤ºåŸå› ã€‚æˆ‘ä»¬åˆ›å»ºäº†æºç«¯å£ 80 å’Œç›®æ ‡ç«¯å£ 80 ä¹‹é—´çš„æ˜ å°„ã€‚æ­¤æ˜ å°„åœ¨æ¥å£ä¸Šä½¿ç”¨ eBPF é€»è¾‘æ‰§è¡Œï¼Œå¹¶å­˜åœ¨äºæ‰€æœ‰èŠ‚ç‚¹ä¸Šã€‚æ­¤æ˜ å°„ç¡®ä¿åªæœ‰ç«¯å£ 80 çš„æµé‡è¢«å‡è¡¡ã€‚æ‰€æœ‰å…¶ä»–æµé‡ï¼ŒåŒ…æ‹¬ pingï¼Œéƒ½ä¸è¢«æ¥æ”¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥çœ‹åˆ° icmp æ•°æ®åŒ…åˆ°è¾¾èŠ‚ç‚¹ï¼Œä½†ä»æœªå‘é€å“åº”çš„åŸå› ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è§‚å¯Ÿæµé‡&#34;&gt;è§‚å¯Ÿæµé‡&lt;/h3&gt;
&lt;p&gt;Hubble æ˜¯å»ºç«‹åœ¨ eBPF å’Œ Cilium ä¹‹ä¸Šçš„ç½‘ç»œå’Œå®‰å…¨æ€§å¯è§‚æµ‹å¹³å°ã€‚é€šè¿‡å‘½ä»¤è¡Œå’Œå›¾å½¢ Web GUIï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰å’Œå†å²æµé‡ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒHubble æ”¾ç½®åœ¨ k8s-control èŠ‚ç‚¹ä¸Šï¼Œè¯¥èŠ‚ç‚¹ç›´æ¥è®¿é—® Hubble Relay çš„ APIã€‚Hubble Relay æ˜¯ä» Cilium èŠ‚ç‚¹è·å–æ‰€éœ€ä¿¡æ¯çš„ç»„ä»¶ã€‚è¯·æ³¨æ„ï¼ŒHubble å‘½ä»¤ä¹Ÿå­˜åœ¨äºæ¯ä¸ª Cilium ä»£ç† Pod ä¸­ï¼Œä½†é‚£ä¸ªå‘½ä»¤åªä¼šæ˜¾ç¤ºç‰¹å®šä»£ç†çš„ä¿¡æ¯ï¼ä»¥ä¸‹è¾“å‡ºæ˜¾ç¤ºäº†ä»è·¯ç”±å™¨ä¸Šæ‰§è¡Œ curl http://172.16.10.0/ å‘½ä»¤åçš„è§‚å¯Ÿè€…ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ hubble observe â€“namespace default â€“follow

Oct 31 15:43:41.382: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: SYN)
Oct 31 15:43:41.384: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.384: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:43:41.385: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.385: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.386: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:43:41.386: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹‹å‰ï¼Œæˆ‘è­¦å‘Šè¿‡ä¸è¦åœ¨ Cilium ä»£ç† Pod å†…ä½¿ç”¨ hubble å‘½ä»¤ï¼Œä½†åœ¨ç‰¹å®šèŠ‚ç‚¹æµé‡ä¸­çœ‹åˆ°å…·ä½“çš„æƒ…å†µä¹Ÿå¯ä»¥éå¸¸æœ‰ä¿¡æ¯ä»·å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Cilium ä»£ç† Pod ä¸­éƒ½æ‰§è¡Œäº† &lt;code&gt;hubble observe â€“namespace default â€“follow&lt;/code&gt;ï¼Œå¹¶ä¸”è·¯ç”±å™¨çš„ curl æ‰§è¡Œäº†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‰˜ç®¡ Pod çš„èŠ‚ç‚¹ï¼ˆk8s-worker2ï¼‰ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸ä¸Šé¢çš„è¾“å‡ºç›¸åŒçš„è¾“å‡ºã€‚ä½†æ˜¯ï¼Œåœ¨å¦ä¸€ä¸ª Podï¼ˆk8s-worker1ï¼‰ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Oct 31 15:56:05.220: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: SYN)
Oct 31 15:56:05.220: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: SYN, ACK)
Oct 31 15:56:05.220: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:05.221: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:05.221: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:05.222: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:05.222: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:05.222: 10.0.3.103:48278 -&amp;gt; default/web1

-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:12.739: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: SYN)
Oct 31 15:56:12.739: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: SYN, ACK)
Oct 31 15:56:12.742: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:12.742: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:12.745: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:12.749: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:12.749: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: ACK, FIN)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°çš„æ˜¯ï¼Œæˆ‘ä»¬çš„è·¯ç”±å™¨å°† IP åœ°å€ 172.16.10.0 çš„æµé‡å‘é€åˆ° k8s-worker1ï¼Œä½†è¯¥å·¥ä½œèŠ‚ç‚¹ä¸æ‰˜ç®¡æˆ‘ä»¬çš„ web1 å®¹å™¨ï¼Œå› æ­¤å®ƒå°†æµé‡è½¬å‘åˆ°å¤„ç†æµé‡çš„ k8s-worker2ã€‚æ‰€æœ‰çš„è½¬å‘é€»è¾‘éƒ½ä½¿ç”¨ eBPF å¤„ç† - é™„åŠ åˆ°æ¥å£çš„ä¸€ä¸ªå°çš„ BPF ç¨‹åºå°†åœ¨éœ€è¦æ—¶å‘é€æµé‡å’Œè·¯ç”±åˆ°å¦ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ k8s-worker1 ä¸Šè¿è¡Œ tcpdumpï¼Œåˆå§‹æ¥æ”¶åˆ°æµé‡çš„åœ°æ–¹ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•æµé‡çš„åŸå› ã€‚å®ƒå·²ç»åœ¨è¿›å…¥ k8s-worker1 çš„ IP å †æ ˆä¹‹å‰è¢«é‡å®šå‘åˆ° k8s-worker2ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„åˆä½œä¼™ä¼´ &lt;a href=&#34;https://docs.cilium.io/en/stable/network/ebpf/intro/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Isovalent&lt;/a&gt; æœ‰å¾ˆå¤šå…³äº eBPF å’Œå†…éƒ¨å·¥ä½œåŸç†çš„ä¿¡æ¯ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¬è¯´è¿‡ eBPFï¼Œè€Œä¸”ä½ å¯¹ Linux å’Œ/æˆ–ç½‘ç»œæ„Ÿå…´è¶£ï¼Œè¯·åŠ¡å¿…æ¢ç´¢ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒeBPF å°†åœ¨ä¸ä¹…çš„å°†æ¥å½»åº•æ”¹å˜ Linux çš„ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯å¯¹äºäº‘åŸç”Ÿç¯å¢ƒï¼&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cilium.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium.io &lt;/a&gt;ä¸Šæœ‰å¾ˆå¤šå…³äº eBPF å’Œå†…éƒ¨å·¥ä½œåŸç†çš„ä¿¡æ¯ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¬è¯´è¿‡ eBPFï¼Œè€Œä¸”ä½ å¯¹ Linux å’Œ/æˆ–ç½‘ç»œæ„Ÿå…´è¶£ï¼Œè¯·åŠ¡å¿…äº†è§£è‡³å°‘åŸºç¡€çŸ¥è¯†ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒeBPF å°†åœ¨ä¸ä¹…çš„å°†æ¥å½»åº•æ”¹å˜ Linux çš„ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯å¯¹äºäº‘åŸç”Ÿç¯å¢ƒï¼&lt;/p&gt;
&lt;h3 id=&#34;hubble-web-gui&#34;&gt;Hubble Web GUI&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ä¸€ä¸ªå·¥ä½œæ­£å¸¸çš„ BGP è®¾ç½®ï¼Œä½¿ Hubble Web GUI å¯¹å¤–ç•Œä¹Ÿå¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu_2bc19879b089656f.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu_9822941cc7e754e9.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu_bbd37471d1115f7e.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu_2bc19879b089656f.webp&#34;
               width=&#34;760&#34;
               height=&#34;419&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æœ€åçš„è¯&#34;&gt;æœ€åçš„è¯&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ MetalLB çš„é›†æˆï¼Œä½¿ç”¨ BGP è®¾ç½® Cilium å˜å¾—éå¸¸ç®€å•ï¼Œæ¶ˆé™¤äº†æ˜‚è´µçš„ç½‘ç»œç¡¬ä»¶çš„éœ€æ±‚ã€‚Cilium/BGP çš„è¿™ç§ç»„åˆï¼Œç‰¹åˆ«æ˜¯ä¸åœç”¨ kube-proxy ç»“åˆä½¿ç”¨ï¼Œæ˜¾è‘—é™ä½äº†åˆ°äº‘ç«¯æœåŠ¡çš„å»¶è¿Ÿã€‚å®ƒè¿˜é€šè¿‡ä»…å®£å¸ƒ LoadBalancer çš„ IP åœ°å€æ¥å¢å¼ºå®‰å…¨æ€§å’Œé€æ˜æ€§ã€‚è™½ç„¶è¿™ç§è®¾ç½®ä¸éœ€è¦ Ingress Controllerï¼Œä½†å¯¹äºå¤§å¤šæ•° HTTP æœåŠ¡ä»ç„¶å»ºè®®ä½¿ç”¨ä¸€ä¸ªã€‚åƒ NGINX æˆ– Traefik è¿™æ ·çš„æ§åˆ¶å™¨ï¼Œé€šè¿‡ BGP å…¬å¼€ï¼Œæä¾›åè®®çº§åˆ«çš„é‡å†™å’Œè¯·æ±‚é€Ÿç‡é™åˆ¶ç­‰é‡å¤§ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§äº‘åŸç”Ÿå’ŒåŸºäº Linux çš„ç½‘ç»œçš„è¿›æ­¥ç¡®å®æ˜¯ä¸€ä¸ªé£è·ƒï¼Œæ ‡å¿—ç€ç½‘ç»œæŠ€æœ¯çš„æ¿€åŠ¨äººå¿ƒçš„æ—¶ä»£ï¼&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
