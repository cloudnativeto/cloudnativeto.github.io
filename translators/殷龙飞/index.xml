<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>æ®·é¾™é£ | äº‘åŸç”Ÿç¤¾åŒºï¼ˆä¸­å›½ï¼‰</title>
    <link>https://cloudnativecn.com/translators/%E6%AE%B7%E9%BE%99%E9%A3%9E/</link>
      <atom:link href="https://cloudnativecn.com/translators/%E6%AE%B7%E9%BE%99%E9%A3%9E/index.xml" rel="self" type="application/rss+xml" />
    <description>æ®·é¾™é£</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Mon, 25 Mar 2019 10:58:41 +0800</lastBuildDate>
    <image>
      <url>https://cloudnativecn.com/translators/%E6%AE%B7%E9%BE%99%E9%A3%9E/avatar_hu_993d1b6c8f0963be.jpg</url>
      <title>æ®·é¾™é£</title>
      <link>https://cloudnativecn.com/translators/%E6%AE%B7%E9%BE%99%E9%A3%9E/</link>
    </image>
    
    <item>
      <title>ä½¿ç”¨ Istio æ‰“é€ å¾®æœåŠ¡ï¼ˆç¬¬ 2 éƒ¨åˆ†ï¼‰â€”â€”è®¤è¯å’Œæˆæƒ</title>
      <link>https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/</link>
      <pubDate>Mon, 25 Mar 2019 10:58:41 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/</guid>
      <description>&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bke0q1bnj20m80bqwm6_hu_52c1d3643baa671b.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bke0q1bnj20m80bqwm6_hu_d41f54aa217b0f23.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bke0q1bnj20m80bqwm6_hu_3cc50835ab817492.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bke0q1bnj20m80bqwm6_hu_52c1d3643baa671b.webp&#34;
               width=&#34;760&#34;
               height=&#34;401&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://medium.com/google-cloud/back-to-microservices-with-istio-part-2-authentication-authorization-b079f77358ac&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;è¿™ç¯‡æ–‡ç« æ˜¯ä½¿ç”¨ Istio æ‰“é€ å¾®æœåŠ¡&lt;/em&gt;çš„ç¬¬äºŒéƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰çœ‹ç¬¬ä¸€ç¯‡çš„è¯ï¼Œè¯·å…ˆçœ‹&lt;a href=&#34;http://www.servicemesher.com/blog/back-to-microservices-with-istio-p1/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¬¬ä¸€éƒ¨åˆ†å†…å®¹&lt;/a&gt;ï¼Œå› ä¸ºè¿™ç¯‡åšå®¢æ˜¯ä»¥ç¬¬ä¸€ç¯‡åšå®¢ä¸ºåŸºç¡€è¿›è¡Œè¿›ä¸€æ­¥æ·±å…¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¬¬ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ª Kubernetes é›†ç¾¤ï¼Œå¹¶ä¸”åœ¨ä¸Šé¢éƒ¨ç½²äº† &lt;strong&gt;Istio&lt;/strong&gt; å’Œç¤ºä¾‹å¾®æœåŠ¡åº”ç”¨ç¨‹åºâ€œSentiment Analysisâ€ï¼Œç”¨æ¥å±•ç¤º Istio çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Istio åï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåº”ç”¨å±‚ä¸­çš„é‡è¯•ã€è¶…æ—¶ã€æ–­è·¯å™¨ã€è·Ÿè¸ªã€ç›‘æ§å†…å®¹æŠ›å¼ƒï¼Œä»¥ä¿æŒæˆ‘ä»¬çš„æœåŠ¡åº”ç”¨ä¿æŒåœ¨ä¸€ä¸ªç®€å•ä¸“æ³¨çš„å¾®å‹çŠ¶æ€ï¼Œï¼ˆå¦‚å›¾ 1 æ‰€ç¤ºï¼‰ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ç”¨äº†é«˜çº§æµ‹è¯•å’Œéƒ¨ç½²æŠ€æœ¯ï¼Œå¦‚ A/B æµ‹è¯•ï¼Œé•œåƒå’Œé‡‘ä¸é›€éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1å¾®æœåŠ¡çš„å½¢å¼æ„æˆ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1.å¾®æœåŠ¡çš„å½¢å¼æ„æˆ&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkei4aehj20aj082wf1_hu_a07ab3d8cc85dcd7.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkei4aehj20aj082wf1_hu_8fd1e19a40ddb0f1.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkei4aehj20aj082wf1_hu_cb7a13d2b9d981af.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkei4aehj20aj082wf1_hu_a07ab3d8cc85dcd7.webp&#34;
               width=&#34;379&#34;
               height=&#34;290&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1.å¾®æœåŠ¡çš„å½¢å¼æ„æˆ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å¸¦é¢†è¯»è€…ä½¿ç”¨ Istio æ¥å¤„ç†èº«ä»½éªŒè¯å’Œæˆæƒï¼&lt;/p&gt;
&lt;h2 id=&#34;istio-ä¸­çš„è®¤è¯å’Œæˆæƒ&#34;&gt;Istio ä¸­çš„è®¤è¯å’Œæˆæƒ&lt;/h2&gt;
&lt;p&gt;æˆ‘æ°¸è¿œä¸ä¼šç›¸ä¿¡è®¤è¯å’Œæˆæƒä¼šè®©æˆ‘æ„Ÿåˆ°å…´å¥‹ï¼ä½†æ˜¯ Istio å¯ä»¥è®©è¿™ä¸ªè¯é¢˜å˜å¾—æœ‰è¶£ï¼Œè¿™ç§æƒ…å†µä¸‹éš¾é“ä½ ä¸æ„Ÿåˆ°å…´å¥‹ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç­”æ¡ˆå¾ˆç®€å•&lt;/strong&gt;ï¼šIstio å°†è¿™äº›èŒè´£ä»æˆ‘ä»¬çš„æœåŠ¡ä¸‹æ²‰åˆ° Envoy ä»£ç†ï¼Œå½“è¯·æ±‚åˆ°è¾¾æˆ‘ä»¬çš„æœåŠ¡æ—¶ï¼Œå®ƒä»¬å·²ç»ç»è¿‡èº«ä»½éªŒè¯å’Œæˆæƒï¼Œæˆ‘ä»¬åªéœ€ç¼–å†™æä¾›ä¸šåŠ¡ä»·å€¼çš„ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¬èµ·æ¥ä¸é”™ï¼Ÿè®©æˆ‘ä»¬å»ç§ç§å§ï¼&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-auth0-è¿›è¡Œèº«ä»½éªŒè¯&#34;&gt;ä½¿ç”¨ Auth0 è¿›è¡Œèº«ä»½éªŒè¯&lt;/h2&gt;
&lt;p&gt;ä½œä¸ºèº«ä»½å’Œè®¿é—®ç®¡ç†æœåŠ¡å™¨ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Auth0ï¼Œå®ƒæœ‰ä¸€ä¸ªè¯•ç”¨é€‰é¡¹ï¼Œç›´è§‚æ˜“ç”¨ï¼Œæˆ‘åªæ˜¯å–œæ¬¢å®ƒï¼ä¹Ÿå°±æ˜¯è¯´ï¼Œç›¸åŒçš„åŸåˆ™å¯ä»¥ç”¨äºä»»ä½• &lt;a href=&#34;https://openid.net/developers/certified/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenID Connect å®ç°&lt;/a&gt;ï¼Œå¦‚ KeyCloakã€IdentityServer ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¦å¼€å§‹ä½¿ç”¨ï¼Œè¯·ä½¿ç”¨æ‚¨çš„å¸æˆ·å¯¼èˆªåˆ°&lt;a href=&#34;https://manage.auth0.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Auth0 Portal&lt;/a&gt;ï¼Œåœ¨ Applications&amp;gt; Default App ä¸‹åˆ›å»ºç§Ÿæˆ·å¹¶é€‰æ‹© Domainï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2-auth0-ç®¡ç†é—¨æˆ·ä¸­çš„é»˜è®¤åº”ç”¨ç¨‹åº&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2. Auth0 ç®¡ç†é—¨æˆ·ä¸­çš„é»˜è®¤åº”ç”¨ç¨‹åº&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkeum2wwj20m80exmzl_hu_822ab5e6e29657d8.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkeum2wwj20m80exmzl_hu_e894d5c9c711d038.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkeum2wwj20m80exmzl_hu_8356e70c5edc68c1.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkeum2wwj20m80exmzl_hu_822ab5e6e29657d8.webp&#34;
               width=&#34;760&#34;
               height=&#34;510&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2. Auth0 ç®¡ç†é—¨æˆ·ä¸­çš„é»˜è®¤åº”ç”¨ç¨‹åº
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ›´æ–°æ–‡ä»¶ &lt;code&gt;resource-manifests/istio/security/auth-policy.yaml&lt;/code&gt; ä»¥ä½¿ç”¨æ‚¨çš„åŸŸåï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;authentication.istio.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Policy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;auth-policy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-web-app&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-feedback&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;origins&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;jwt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://{YOUR_DOMAIN}/&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jwksUri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://{YOUR_DOMAIN}/.well-known/jwks.json&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;principalBinding&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;USE_ORIGIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™ä¸ªèµ„æºï¼Œpilot ä¼šé…ç½® envoy åœ¨å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡&lt;code&gt;sa-web-app&lt;/code&gt; å’Œ &lt;code&gt;sa-feedback&lt;/code&gt;ä¹‹å‰å¯¹å…¶è¿›è¡Œèº«ä»½éªŒè¯ã€‚åŒæ—¶ï¼Œè¿™ä¸ªç­–ç•¥ä¸ä¼šåº”ç”¨åˆ°è¿è¡Œ&lt;code&gt;sa-frontend&lt;/code&gt;æœåŠ¡çš„ envoy ä¸Šï¼Œè¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿæœªç»è®¤è¯å°±è®¿é—®å‰ç«¯æœåŠ¡ã€‚è¦åº”ç”¨è¿™äº›ç­–ç•¥ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/security/auth-policy.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;policy.authentication.istio.io &lt;span class=&#34;s2&#34;&gt;&amp;#34;auth-policy&amp;#34;&lt;/span&gt; created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿”å›é¡µé¢å¹¶å‘å‡ºè¯·æ±‚ï¼Œæ‚¨å°†çœ‹åˆ°å®ƒå°†ä»¥ 401 Unauthorized ç»“æŸï¼Œç°åœ¨è®©æˆ‘ä»¬ä»å‰ç«¯è½¬å‘ç”¨æˆ·ä»¥ä½¿ç”¨ Auth0 è¿›è¡Œèº«ä»½éªŒè¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-auth0-éªŒè¯è¯·æ±‚&#34;&gt;ä½¿ç”¨ Auth0 éªŒè¯è¯·æ±‚&lt;/h2&gt;
&lt;p&gt;è¦éªŒè¯æœ€ç»ˆç”¨æˆ·çš„è¯·æ±‚ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ Auth0 ä¸­åˆ›å»ºä¸€ä¸ª APIï¼Œè¡¨ç¤ºç»è¿‡èº«ä»½éªŒè¯çš„æœåŠ¡ï¼Œå³ï¼šè¯„è®ºï¼Œè¯¦ç»†ä¿¡æ¯å’Œè¯„çº§ã€‚è¦åˆ›å»º APIï¼Œè¯·å¯¼èˆªåˆ° &lt;strong&gt;Auth0 Portal&lt;/strong&gt; &amp;gt; &lt;strong&gt;API&lt;/strong&gt; &amp;gt; &lt;strong&gt;Create API&lt;/strong&gt; ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3åœ¨-auth0-ä¸­åˆ›å»ºæ–°-api&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3.åœ¨ Auth0 ä¸­åˆ›å»ºæ–° API&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkg16se5j20m80ivq56_hu_41ad1045bc93de3a.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkg16se5j20m80ivq56_hu_73f852136298db2d.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkg16se5j20m80ivq56_hu_78b9f366149a4fd8.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkg16se5j20m80ivq56_hu_41ad1045bc93de3a.webp&#34;
               width=&#34;760&#34;
               height=&#34;645&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3.åœ¨ Auth0 ä¸­åˆ›å»ºæ–° API
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™é‡Œçš„é‡è¦ä¿¡æ¯æ˜¯ç¨ååœ¨è„šæœ¬ä¸­ä½¿ç”¨çš„æ ‡è¯†ç¬¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è§‚ä¼—ï¼š&lt;/strong&gt; {YOUR_AUDIENCE}&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…¶ä½™æ‰€éœ€çš„è¯¦ç»†ä¿¡æ¯ä½äº Auth0 Portal ä¸­çš„ &lt;strong&gt;Applications&lt;/strong&gt; ä¸‹ï¼Œç„¶åé€‰æ‹©è‡ªåŠ¨åˆ›å»ºçš„ä¸ API åŒåçš„ &lt;strong&gt;Test Application&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¯·è®°ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŸŸåï¼š&lt;/strong&gt; {YOUR_DOMAIN}&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ· IDï¼š&lt;/strong&gt; {YOUR_CLIENT_ID}&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ Test Application ä¸­å‘ä¸‹æ»šåŠ¨åˆ°&lt;strong&gt;Allowed Callback URLs&lt;/strong&gt;æ–‡æœ¬ä½ç½®ï¼Œåœ¨æ­¤å­—æ®µä¸­æˆ‘ä»¬æŒ‡å®šè¯·æ±‚åœ¨å®Œæˆèº«ä»½éªŒè¯ååº”è¢«è½¬å‘åˆ°çš„ç›®çš„ URLã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;[http://{EXTERNAL_IP}/callback](http://%7BEXTERNAL_IP%7D/callback)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å‘&lt;strong&gt;Allowed Logout URLs&lt;/strong&gt;æ·»åŠ ä»¥ä¸‹ URLï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;[http://{EXTERNAL_IP}/logout](http://%7BEXTERNAL_IP%7D/logout)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥è®©æˆ‘ä»¬å¼€å§‹å¤„ç†å‰ç«¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ›´æ–°å‰ç«¯&#34;&gt;æ›´æ–°å‰ç«¯&lt;/h2&gt;
&lt;p&gt;æ£€å‡º &lt;code&gt;[istio-mastery]&lt;/code&gt; å­˜å‚¨åº“ä¸­çš„&lt;strong&gt;auth0&lt;/strong&gt; åˆ†æ”¯ã€‚åœ¨æ­¤åˆ†æ”¯ä¸­ï¼Œå‰ç«¯åŒ…å«ä»£ç æ›´æ”¹ä»¥å°†ç”¨æˆ·è½¬å‘åˆ° Auth0 è¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶åœ¨å¯¹å…¶ä»–æœåŠ¡çš„è¯·æ±‚ä¸­ä½¿ç”¨ JWT ä»¤ç‰Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;analyzeSentence&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;fetch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;/sentiment&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;method&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;POST&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;application/json&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;Authorization&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;sb&#34;&gt;`Bearer &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;auth&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getAccessToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;sb&#34;&gt;`&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Access Token
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;JSON&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;stringify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;sentence&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;textField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;getValue&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;then&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;this&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;setState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºäº†æ›´æ–°å‰ç«¯ä»¥ä½¿ç”¨ä½ çš„ç§Ÿæˆ·çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å¯¼èˆªåˆ°è¯¥æ–‡ä»¶ &lt;code&gt;sa-frontend/src/services/Auth.js&lt;/code&gt; å¹¶ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰è®°ä¸‹çš„å€¼æ›¿æ¢ä»¥ä¸‹å€¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kr&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;Config&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;clientID&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;{YOUR_CLIENT_ID}&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;domain&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{YOUR_DOMAIN}&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;audience&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;{YOUR_AUDIENCE}&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;ingressIP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;{EXTERNAL_IP}&amp;#39;&lt;/span&gt; &lt;span class=&#34;c1&#34;&gt;// Used to redirect after authentication
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åº”ç”¨ç¨‹åºå·²å‡†å¤‡å°±ç»ªï¼Œè¯·åœ¨ä¸‹é¢çš„å‘½ä»¤ä¸­æŒ‡å®š docker ç”¨æˆ· IDï¼Œç„¶åæ„å»ºå¹¶éƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker build -f sa-frontend/Dockerfile &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; -t &lt;span class=&#34;nv&#34;&gt;$DOCKER_USER_ID&lt;/span&gt;/sentiment-analysis-frontend:istio-auth0 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; sa-frontend
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ docker push &lt;span class=&#34;nv&#34;&gt;$DOCKER_USER_ID&lt;/span&gt;/sentiment-analysis-frontend:istio-auth0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;set&lt;/span&gt; image deployment/sa-frontend &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; sa-frontend&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$DOCKER_USER_ID&lt;/span&gt;/sentiment-analysis-frontend:istio-auth0
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯•ä¸€è¯•åº”ç”¨å§ï¼æ‚¨å°†è¢«è½¬å‘åˆ° Auth0ï¼Œåœ¨é‚£é‡Œæ‚¨å¿…é¡»ç™»å½•ï¼ˆæˆ–æ³¨å†Œï¼‰ï¼Œç„¶åè·³è½¬å›åŸé¡µé¢ï¼Œä»¥åå°±å¯ä»¥å‘å‡ºç»è¿‡èº«ä»½éªŒè¯çš„è¯·æ±‚äº†ã€‚åŒæ—¶ï¼Œå¦‚æœæ‚¨å°è¯•ä½¿ç”¨æ—©æœŸçš„ curl å‘½ä»¤ï¼Œæ‚¨å°†è·å¾— 401 çŠ¶æ€ä»£ç ï¼Œè¡¨æ˜è¯¥è¯·æ±‚æ˜¯æœªæˆæƒçš„ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œæˆæƒè¯·æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-auth0-æˆæƒ&#34;&gt;ä½¿ç”¨ Auth0 æˆæƒ&lt;/h2&gt;
&lt;p&gt;èº«ä»½éªŒè¯ä½¿æˆ‘ä»¬èƒ½å¤ŸçŸ¥é“ç”¨æˆ·æ˜¯è°ï¼Œä½†æˆ‘ä»¬éœ€è¦æˆæƒæ‰èƒ½çŸ¥é“ä»–ä»¬å¯ä»¥è®¿é—®çš„å†…å®¹ã€‚Istio ä¹Ÿä¸ºæ­¤æä¾›äº†å·¥å…·ï¼&lt;/p&gt;
&lt;p&gt;ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ç»„ç”¨æˆ·ï¼ˆå¦‚å›¾ 24 æ‰€ç¤ºï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·&lt;/strong&gt; ï¼šåªèƒ½è®¿é—® SA-WebApp å’Œ SA-Frontend æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç‰ˆä¸»&lt;/strong&gt; ï¼šå¯ä»¥è®¿é—®æ‰€æœ‰ä¸‰é¡¹æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-4æˆæƒæ¦‚å¿µ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4.æˆæƒæ¦‚å¿µ&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bki3dbfij20m80dcdhb_hu_b8ac67a008512be7.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bki3dbfij20m80dcdhb_hu_cfd96512c4b6ae8f.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bki3dbfij20m80dcdhb_hu_b2b970fecb6f12df.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bki3dbfij20m80dcdhb_hu_b8ac67a008512be7.webp&#34;
               width=&#34;760&#34;
               height=&#34;456&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4.æˆæƒæ¦‚å¿µ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¦åˆ›å»ºç”¨æˆ·ç»„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Auth0 æˆæƒæ‰©å±•ï¼Œç„¶åä½¿ç”¨ Istioï¼Œæˆ‘ä»¬å°†ä¸ºä»–ä»¬æä¾›ä¸åŒçº§åˆ«çš„è®¿é—®æƒé™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…å’Œé…ç½®-auth0-æˆæƒ&#34;&gt;å®‰è£…å’Œé…ç½® Auth0 æˆæƒ&lt;/h2&gt;
&lt;p&gt;åœ¨ Auth0 é—¨æˆ·ä¸­ï¼Œå¯¼èˆªåˆ° Extensions å¹¶å®‰è£…â€œAuth0 Authorizationâ€æ‰©å±•ã€‚å®‰è£…å®Œæˆåï¼Œå¯¼èˆªåˆ°æˆæƒæ‰©å±•å¹¶é€šè¿‡å•å‡»å³ä¸Šè§’çš„ç§Ÿæˆ·å¹¶é€‰æ‹©èœå•é€‰é¡¹â€œé…ç½®â€è¿›è¡Œé…ç½®ã€‚å¯ç”¨ç»„ï¼Œç„¶åå•å‡» &lt;strong&gt;å‘å¸ƒè§„åˆ™&lt;/strong&gt; æŒ‰é’®ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5æ¿€æ´»ä»¤ç‰Œå†…å®¹ä¸­çš„ç»„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5.æ¿€æ´»ä»¤ç‰Œå†…å®¹ä¸­çš„ç»„&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkiopfw9j20m807ndhc_hu_90aaf71b634e72cb.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkiopfw9j20m807ndhc_hu_debfb12005a05bb.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkiopfw9j20m807ndhc_hu_77b8ba238e639fb6.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkiopfw9j20m807ndhc_hu_90aaf71b634e72cb.webp&#34;
               width=&#34;760&#34;
               height=&#34;261&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5.æ¿€æ´»ä»¤ç‰Œå†…å®¹ä¸­çš„ç»„
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;åˆ›å»ºç»„&#34;&gt;åˆ›å»ºç»„&lt;/h2&gt;
&lt;p&gt;åœ¨æˆæƒæ‰©å±•ä¸­ï¼Œå¯¼èˆªåˆ° &lt;strong&gt;Groups&lt;/strong&gt; å¹¶åˆ›å»º&lt;code&gt;Moderators&lt;/code&gt;ç»„ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¼šå°†æ‰€æœ‰ç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·è§†ä¸ºå¸¸è§„ç”¨æˆ·ï¼Œå› æ­¤æ— éœ€åˆ›å»ºå…¶ä»–ç»„ã€‚&lt;/p&gt;
&lt;p&gt;é€‰æ‹© Moderators ç»„ï¼Œç„¶åå•å‡»æ·»åŠ æˆå‘˜ï¼Œæ·»åŠ æ‚¨çš„ä¸»å¸æˆ·ã€‚ä¿ç•™ä¸€äº›æ²¡æœ‰ä»»ä½•ç»„çš„ç”¨æˆ·ï¼Œä»¥éªŒè¯æ˜¯å¦ç¦æ­¢è®¿é—®ã€‚ï¼ˆæ‚¨å¯ä»¥åœ¨ Auth0 Portal&amp;gt;ç”¨æˆ·&amp;gt;åˆ›å»ºç”¨æˆ·ä¸­æ‰‹åŠ¨æ³¨å†Œæ–°ç”¨æˆ·ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;å°†ç»„å£°æ˜æ·»åŠ åˆ°è®¿é—®ä»¤ç‰Œ&#34;&gt;å°†ç»„å£°æ˜æ·»åŠ åˆ°è®¿é—®ä»¤ç‰Œ&lt;/h2&gt;
&lt;p&gt;ç”¨æˆ·å°†æ·»åŠ åˆ°ç»„ä¸­ï¼Œä½†æ­¤ä¿¡æ¯ä¸ä¼šåæ˜ åœ¨è®¿é—®ä»¤ç‰Œä¸­ã€‚ä¸ºäº†ä¿æŒ OpenID Connect ç¬¦åˆè¦æ±‚å¹¶åŒæ—¶è¿”å›ç»„ï¼Œæˆ‘ä»¬éœ€è¦å‘ä»¤ç‰Œ&lt;a href=&#34;https://auth0.com/docs/tokens/access-token#add-custom-claims&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ·»åŠ è‡ªå®šä¹‰å‘½åç©ºé—´å£°æ˜&lt;/a&gt;ã€‚è¿™å¯ä»¥ä½¿ç”¨ Auth0 è§„åˆ™æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;è¦åœ¨ Auth0 Portal ä¸­åˆ›å»ºè§„åˆ™ï¼Œè¯·å¯¼èˆªåˆ°è§„åˆ™ï¼Œå•å‡»â€œåˆ›å»ºè§„åˆ™â€å¹¶ ä»æ¨¡æ¿ä¸­ é€‰æ‹©ä¸€ä¸ª &lt;strong&gt;ç©ºè§„åˆ™&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-6åˆ›å»ºæ–°è§„åˆ™&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 6.åˆ›å»ºæ–°è§„åˆ™&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkizxe7vj20m80c2wga_hu_d23c66143986c2bc.webp 400w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkizxe7vj20m80c2wga_hu_e5d7eea54dd3838d.webp 760w,
               /blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkizxe7vj20m80c2wga_hu_2974ccbdb81d10f5.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-part-2-authentication-authorization/61411417ly1g1bkizxe7vj20m80c2wga_hu_d23c66143986c2bc.webp&#34;
               width=&#34;760&#34;
               height=&#34;412&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 6.åˆ›å»ºæ–°è§„åˆ™
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç²˜è´´ä¸‹é¢çš„ä»£ç å¹¶ä¿å­˜åä¸ºâ€œæ·»åŠ ç»„å£°æ˜â€çš„æ–°è§„åˆ™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-js&#34; data-lang=&#34;js&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;function&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;accessToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;https://sa.io/group&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;groups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;callback&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;null&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;context&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„ï¼š&lt;/strong&gt; æ­¤ä»£ç é€‰æ‹©æˆæƒæ‰©å±•ä¸­å®šä¹‰çš„ç¬¬ä¸€ä¸ªç”¨æˆ·ç»„ï¼Œå¹¶å°†å…¶ä½œä¸ºè‡ªå®šä¹‰å‘½åç©ºé—´å£°æ˜æ·»åŠ åˆ°è®¿é—®ä»¤ç‰Œä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿”å› &lt;strong&gt;è§„åˆ™é¡µé¢&lt;/strong&gt; ï¼Œç¡®è®¤æ‚¨æŒ‰æ­¤é¡ºåºæ‹¥æœ‰ä¸¤ä¸ªè§’è‰²ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;auth0 æˆæƒæ‰©å±•&lt;/li&gt;
&lt;li&gt;æ·»åŠ ç»„å£°æ˜&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¡ºåºå¾ˆé‡è¦ï¼Œå› ä¸º &lt;code&gt;**auth0-authorization-extension**&lt;/code&gt; è§„åˆ™ä¼šå¼‚æ­¥æ£€ç´¢ç»„å­—æ®µï¼Œç„¶åç”±ç¬¬äºŒä¸ªè§„åˆ™å°†å…¶æ·»åŠ ä¸ºå‘½åç©ºé—´å£°æ˜ï¼Œä»è€Œäº§ç”Ÿä»¥ä¸‹è®¿é—®ä»¤ç‰Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;https://sa.io/group&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Moderators&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;iss&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://sentiment-analysis.eu.auth0.com/&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;sub&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;google-oauth2|196405271625531691872&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; &lt;span class=&#34;c1&#34;&gt;// [shortened for brevity]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä»&lt;code&gt;https://sa.io/group&lt;/code&gt;è¿”å›çš„è®¿é—®ä»¤ç‰Œä¸­çš„å£°æ˜ä¸­æå–ç»„æ¥é…ç½® Envoy ä»£ç†ä»¥éªŒè¯ç”¨æˆ·è®¿é—®æƒé™ã€‚è¿™æ˜¯ä¸‹ä¸€èŠ‚çš„ä¸»é¢˜ï¼Œè®©æˆ‘ä»¬ç»§ç»­å‰è¿›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åœ¨-istio-ä¸­é…ç½®æˆæƒ&#34;&gt;åœ¨ Istio ä¸­é…ç½®æˆæƒ&lt;/h2&gt;
&lt;p&gt;è¦è·å¾—æˆæƒï¼Œæˆ‘ä»¬éœ€è¦ä¸º Istio å¯ç”¨ RBACã€‚ä¸ºæ­¤ï¼Œè¯·å°†ä»¥ä¸‹é…ç½®åº”ç”¨äº Meshï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;rbac.istio.io/v1alpha1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RbacConfig&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;ON_WITH_INCLUSION&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;inclusion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;                                   &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-frontend.default.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-web-app.default.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-feedback.default.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä»…ä¸ºâ€œåŒ…å«â€å­—æ®µä¸­æŒ‡å®šçš„æœåŠ¡å’Œ/æˆ–å‘½åç©ºé—´å¯ç”¨ RBACã€‚&lt;/li&gt;
&lt;li&gt;åŒ…æ‹¬æŒ‡å®šçš„æœåŠ¡åˆ—è¡¨ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/security/enable-rbac.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;rbacconfig.rbac.istio.io/default created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼Œæ‰€æœ‰æœåŠ¡éƒ½éœ€è¦åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œæ¢å¥è¯è¯´ï¼Œå¯¹æ‰€æœ‰æœåŠ¡çš„è®¿é—®éƒ½ä¼šè¢«æ‹’ç»ï¼Œå¹¶å“åº”â€œRBAC: access deniedâ€ã€‚å¯ç”¨å¯¹æˆæƒç”¨æˆ·çš„è®¿é—®æƒé™å°†æˆä¸ºä¸‹ä¸€èŠ‚çš„ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é…ç½®å¸¸è§„ç”¨æˆ·è®¿é—®&#34;&gt;é…ç½®å¸¸è§„ç”¨æˆ·è®¿é—®&lt;/h2&gt;
&lt;p&gt;æ‰€æœ‰ç”¨æˆ·éƒ½åº”è¯¥èƒ½å¤Ÿè®¿é—® &lt;strong&gt;SA-Frontend&lt;/strong&gt; å’Œ &lt;strong&gt;SA-WebApp&lt;/strong&gt; æœåŠ¡ï¼Œè¿™æ˜¯é€šè¿‡ä»¥ä¸‹ Istio çš„èµ„æºå®ç°çš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ServiceRoleï¼š&lt;/strong&gt; æŒ‡å®šç”¨æˆ·æ‹¥æœ‰çš„æƒé™&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ServiceRoleBindingï¼š&lt;/strong&gt; æŒ‡å®š ServiceRole åº”ç”¨äºè°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¯¹äºæ™®é€šç”¨æˆ·ï¼Œæˆ‘ä»¬å°†å…è®¸è®¿é—®æŒ‡å®šçš„æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;rbac.istio.io/v1alpha1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceRole&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;regular-user&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-frontend.default.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-web-app.default.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ &lt;strong&gt;å¸¸è§„ç”¨æˆ·ç»‘å®š&lt;/strong&gt;ï¼Œæˆ‘ä»¬å°† ServiceRole åº”ç”¨äºæˆ‘ä»¬é¡µé¢çš„æ‰€æœ‰è®¿é—®è€…ï¼š&lt;/p&gt;
&lt;p&gt;å“¦ï¼æ‰€æœ‰ç”¨æˆ·è¿™æ„å‘³ç€æœªç»èº«ä»½éªŒè¯çš„ç”¨æˆ·å¯ä»¥ä½¿ç”¨ SA WebApp å—ï¼Ÿä¸ï¼Œè¯¥ç­–ç•¥ä»å°†æ£€æŸ¥ JWT ä»¤ç‰Œçš„æœ‰æ•ˆæ€§ã€‚ğŸ˜‰&lt;/p&gt;
&lt;p&gt;åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/security/user-role.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;servicerole.rbac.istio.io/regular-user created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;servicerolebinding.rbac.istio.io/regular-user-binding created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é…ç½®ç‰ˆä¸»ç”¨æˆ·è®¿é—®æƒé™&#34;&gt;é…ç½®ç‰ˆä¸»ç”¨æˆ·è®¿é—®æƒé™&lt;/h2&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬çš„ç‰ˆä¸»ï¼Œæˆ‘ä»¬å¸Œæœ›å¯ç”¨å¯¹æ‰€æœ‰æœåŠ¡çš„è®¿é—®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;rbac.istio.io/v1alpha1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceRole&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mod-user&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;services&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æˆ‘ä»¬åªæƒ³å°†å…¶ç»‘å®šåˆ° Access Token å£°æ˜ &lt;code&gt;https://sa.io/group&lt;/code&gt; ç­‰äº Moderators å€¼çš„ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;rbac.istio.io/v1alpha1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceRoleBinding&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mod-user-binding&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;properties&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;request.auth.claims[https://sa.io/group]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;Moderators&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;roleRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceRole&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;mod-user&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¦åº”ç”¨é…ç½®ï¼Œè¯·æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/security/mod-role.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;servicerole.rbac.istio.io/mod-user created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;servicerolebinding.rbac.istio.io/mod-user-binding created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±äº Envoy ä¸­çš„ç¼“å­˜ï¼Œæˆæƒè§„åˆ™å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½ç”Ÿæ•ˆï¼Œä½†åœ¨æ­¤ä¹‹åï¼Œæ‚¨å°†èƒ½å¤ŸéªŒè¯ç”¨æˆ·å’Œç‰ˆä¸»å…·æœ‰ä¸åŒçš„è®¿é—®çº§åˆ«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬-2-éƒ¨åˆ†---æ‘˜è¦&#34;&gt;ç¬¬ 2 éƒ¨åˆ† - æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;æ‚¨æ˜¯å¦çœŸçš„è§è¿‡ä»»ä½•æ›´ç®€å•ï¼Œé›¶å·¥ä½œçš„å¯æ‰©å±•å’Œå®‰å…¨çš„èº«ä»½éªŒè¯å’Œæˆæƒæ¦‚å¿µï¼Ÿ&lt;/p&gt;
&lt;p&gt;ä»…ä½¿ç”¨ä¸‰ä¸ª Istio èµ„æºï¼ˆRbacConfigï¼ŒServiceRole å’Œ ServiceRoleBindingï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç»†ç²’åº¦æ§åˆ¶å¯¹æœ€ç»ˆç”¨æˆ·è®¿é—®æˆ‘ä»¬æœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬å°†è¿™äº›é—®é¢˜ä»æˆ‘ä»¬çš„æœåŠ¡ä¸­è½¬ç§»åˆ°æˆ‘ä»¬çš„ Envoyï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘å¯èƒ½å‡ºç°å®‰å…¨é—®é¢˜å’Œæ¼æ´çš„æ ·æ¿ä»£ç ï¼Œ&lt;/li&gt;
&lt;li&gt;å‡å°‘å› ä¸ºå¿˜è®°æ ‡è®°æ³¨è§£è€Œæš´éœ²æœåŠ¡ç«¯ç‚¹çš„æ„šè ¢çŠ¶å†µã€‚&lt;/li&gt;
&lt;li&gt;æ¯æ¬¡æ·»åŠ æ–°è§’è‰²æˆ–æƒé™æ—¶ï¼Œéƒ½ä¼šæ¶ˆé™¤æ›´æ–°æ‰€æœ‰æœåŠ¡çš„è¿é”æ•ˆåº”ã€‚&lt;/li&gt;
&lt;li&gt;ä¿æŒç®€å•ï¼Œå®‰å…¨å’Œå¿«é€Ÿåœ°æ·»åŠ æ–°æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Istio&lt;/strong&gt; ä½¿æ‚¨çš„å›¢é˜Ÿèƒ½å¤Ÿå†æ¬¡å°†èµ„æºé›†ä¸­åœ¨æä¾›å•†ä¸šä»·å€¼ä¸Šï¼Œè€Œä¸éœ€è¦ä¸ºæœåŠ¡çš„å‘¨è¾¹ä»»åŠ¡è¿›è¡Œå¤„ç†ï¼Œè®©å¾®æœåŠ¡å›å½’â€œå¾®å‹â€çš„æœ¬è´¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºæ‚¨æä¾›äº†åœ¨å®é™…é¡¹ç›®ä¸­å¼€å§‹ä½¿ç”¨ Istio çš„çŸ¥è¯†å’Œå®è·µã€‚&lt;/p&gt;
&lt;p&gt;å€Ÿæ­¤æœºä¼šï¼Œæˆ‘å¾ˆæ„Ÿè°¢ä½ åŠ å…¥æˆ‘çš„è¿™æ¬¡ Istio æ¢ç´¢ä¹‹æ—…ï¼Œè¿™è‚¯å®šä¸å®¹æ˜“ï¼Œä½ åšæŒä¸‹å»å°±å·²ç»å¾ˆæ£’äº†ã€‚æˆ‘ååˆ†å¸Œæœ›åœ¨ä¸‹é¢çš„è¯„è®ºä¸­çœ‹åˆ°æ‚¨çš„æƒ³æ³•ï¼Œä½ å¯ä»¥éšæ—¶åœ¨ &lt;a href=&#34;https://twitter.com/rinormaloku&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Twitter&lt;/a&gt; æˆ–æˆ‘çš„ä¸»é¡µ &lt;a href=&#34;https://rinormaloku.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;rinormaloku.com&lt;/a&gt; ä¸Šä¸æˆ‘è”ç³»ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Envoy Proxy æ„å»ºæ§åˆ¶å¹³é¢æŒ‡å—</title>
      <link>https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/</link>
      <pubDate>Wed, 06 Mar 2019 12:17:02 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://medium.com/solo-io/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh-badb6c36a2af&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¼–è€…æ¡ˆ&#34;&gt;ç¼–è€…æ¡ˆ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;Envoy ä½œä¸ºæœ€å—æ¬¢è¿çš„æ—©æœŸç½‘ç»œç»„ä»¶ï¼Œç°åœ¨å·²ç»å¯ä»¥è¯´æ˜¯äº‘åŸç”Ÿæ¶æ„ä¸­çš„é€šç”¨æ•°æ®å¹³é¢ã€‚æœ¬æ–‡ä½œè€…æŒ‡å¼•æˆ‘ä»¬æ›´æ–¹ä¾¿çš„ä½¿ç”¨ Envoyï¼ŒåŠå…¶å®šåˆ¶æ§åˆ¶å¹³é¢ï¼Œä½œè€…é€šè¿‡æ”¶é›†åˆ°çš„æ•°æ®ç»™å‡ºå®šåˆ¶æ§åˆ¶å¹³é¢ä¸åŒçš„æ„è§ï¼Œéå¸¸ä¸­è‚¯ï¼Œåç»­ç³»åˆ—ä¼šæ›´æ·±å…¥ï¼Œæ¬¢è¿å…³æ³¨è¯¥ç³»åˆ—æ–‡ç« ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; æœ€è¿‘æˆä¸ºä¸€ä¸ªå—æ¬¢è¿çš„ç½‘ç»œç»„ä»¶ã€‚å‡ å¹´å‰ Matt Klein &lt;a href=&#34;https://blog.envoyproxy.io/the-universal-data-plane-api-d15cec7a&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†™äº†ä¸€ç¯‡åšå®¢&lt;/a&gt; ï¼Œè®¨è®ºäº† Envoy çš„åŠ¨æ€é…ç½® APIï¼Œä»¥åŠ Envoy å‘å±•çš„å†å²å’ŒåŠ¨æœºã€‚ä»–ç§°è¯¥åšå®¢ä¸ºâ€œé€šç”¨æ•°æ®å¹³é¢ APIâ€ã€‚ç”±äºè®¸å¤šå…¶ä»–é¡¹ç›®é‡‡ç”¨&lt;a href=&#34;https://www.envoyproxy.io/community&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; ä½œä¸ºå…¶äº§å“çš„æ ¸å¿ƒç»„ä»¶ï¼Œå› æ­¤å¯¹äºåº”ç”¨ç¨‹åº/L7 ç½‘ç»œè§£å†³æ–¹æ¡ˆè€Œè¨€ï¼Œæ¯«ä¸å¤¸å¼ åœ°è¯´ï¼Œâ€œEnvoy å·²æˆä¸ºäº‘åŸç”Ÿæ¶æ„ä¸­çš„é€šç”¨æ•°æ®å¹³é¢â€ï¼Œè€Œä¸ä»…ä»…æ˜¯ç®€å•å»ºç«‹äº† API æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfoc0c9yj20dm07faap_hu_af867cf75f448ad1.webp 400w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfoc0c9yj20dm07faap_hu_102061eca2ca4a1e.webp 760w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfoc0c9yj20dm07faap_hu_f18c8eb4dfe5df9a.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfoc0c9yj20dm07faap_hu_af867cf75f448ad1.webp&#34;
               width=&#34;490&#34;
               height=&#34;267&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œç”±äº &lt;a href=&#34;https://blog.envoyproxy.io/the-universal-data-plane-api-d15cec7a&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy çš„é€šç”¨æ•°æ®å¹³é¢ API&lt;/a&gt; ï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†è®¸å¤š &lt;em&gt;ç®¡ç†å±‚&lt;/em&gt; çš„å®ç°ï¼Œç”¨äºé…ç½®å’Œé©±åŠ¨åŸºäº Envoy çš„åŸºç¡€æ¶æ„ã€‚æˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ä¸º Envoy æ„å»ºæ§åˆ¶å¹³é¢æ‰€éœ€çš„å†…å®¹ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥ä½¿ç”¨æ­¤ä¿¡æ¯æ¥è¯„ä¼°å“ªç§ç±»å‹çš„åŸºç¡€æ¶æ„æœ€é€‚åˆæ‚¨çš„ç»„ç»‡å’Œä½¿ç”¨æƒ…å†µã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå¹¿æ³›çš„ä¸»é¢˜ï¼Œæˆ‘ä»¬å°†åœ¨æœªæ¥å‡ å¤©å‘å¸ƒçš„å¤šéƒ¨ç³»åˆ—åšå®¢ä¸­è§£å†³å®ƒã€‚&lt;/p&gt;
&lt;p&gt;åœ¨EnvoyCon/KubeConä¸Š æœ‰ä¸€äº› &lt;a href=&#34;https://blog.envoyproxy.io/envoycon-recap-579d53576511&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç²¾å½©çš„æ¼”è®²&lt;/a&gt; ï¼Œä¸€äº›ç»„ç»‡åˆ†äº«äº†ä»–ä»¬é‡‡ç”¨ Envoy çš„ç»éªŒï¼ŒåŒ…æ‹¬ä»–ä»¬å¦‚ä½•æ„å»ºè‡ªå·±çš„æ§åˆ¶å¹³é¢ã€‚äººä»¬é€‰æ‹©è‡ªå·±å»ºç«‹æ§åˆ¶å¹³é¢çš„ä¸€äº›åŸå› ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç°æœ‰çš„è§£å†³æ–¹æ¡ˆï¼Œå»ºç«‹åœ¨å·²æœ‰ä¸åŒæ•°æ®å¹³é¢çš„æ§åˆ¶å¹³é¢ï¼Œéœ€è¦æ”¹é€  Envoyï¼ˆä¸å·²æœ‰æ–¹æ¡ˆä¸”å†²çªï¼‰&lt;/li&gt;
&lt;li&gt;ä¸ºæ²¡æœ‰ä»»ä½•ç°æœ‰å¼€æºæˆ–å…¶ä»– Envoy æ§åˆ¶å¹³é¢ï¼ˆå³ VMï¼ŒAWS ECS ç­‰ï¼‰çš„åŸºç¡€æ¶æ„æ„å»ºï¼ˆå•†ä¸šå…¬å¸å¿…é¡»é‡æ–°å»ºæ–¹æ¡ˆï¼‰&lt;/li&gt;
&lt;li&gt;ä¸éœ€è¦ä½¿ç”¨ Envoy çš„æ‰€æœ‰åŠŸèƒ½; åªæ˜¯ä¸€ä¸ªå­é›†ï¼ˆåŠŸèƒ½å¤ªå¤šï¼Œéœ€è¦ç²¾ç®€ï¼‰&lt;/li&gt;
&lt;li&gt;é¦–é€‰é€‚ç”¨äºEnvoyé…ç½®çš„ç‰¹å®šäºåŸŸçš„API/å¯¹è±¡æ¨¡å‹ï¼Œä»¥æ›´å¥½åœ°é€‚åº”å…¶å·¥ä½œæµç¨‹/ä¸–ç•Œè§‚ï¼ˆä¸å·²æœ‰æ–¹æ¡ˆå†²çªï¼‰&lt;/li&gt;
&lt;li&gt;å½“å…¶ç»„ç»‡å‡†å¤‡éƒ¨ç½²æ—¶ï¼Œæš‚æ—¶æ²¡æœ‰æˆç†Ÿçš„æ§åˆ¶å¹³é¢ï¼ˆèµ°çš„å¤ªå¿«ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mforyrc1j20go0digsn_hu_9f2c9f138ccb8477.webp 400w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mforyrc1j20go0digsn_hu_ae751db978262548.webp 760w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mforyrc1j20go0digsn_hu_5c904034cfb1050.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mforyrc1j20go0digsn_hu_9f2c9f138ccb8477.webp&#34;
               width=&#34;600&#34;
               height=&#34;486&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è‹¥æ˜¯å› ä¸ºä¸€äº›æ—©æœŸé‡‡ç”¨è€…å»ºç«‹äº†ä»–ä»¬è‡ªå·±çš„å®šåˆ¶æ§åˆ¶å¹³é¢ï¼Œå¹¶ä¸æ„å‘³ç€ä½ ç°åœ¨ä¹Ÿè¦è‡ªå·±é‡æ–°å¼€å‘æ§åˆ¶å¹³é¢ã€‚å› ä¸º Envoy æ„å»ºæ§åˆ¶å¹³é¢çš„é¡¹ç›®åœ¨å»å¹´å·²ç»æˆç†Ÿäº†å¾ˆå¤šï¼Œè‹¥ä½ å†³å®šé‡æ–°å¼€å‘å¦ä¸€ä¸ªæ§åˆ¶å¹³é¢å‰ä½ åº”è¯¥æ¢ç´¢ä½¿ç”¨å®ƒä»¬ã€‚å…¶æ¬¡ï¼Œæ­£å¦‚ Datawire çš„äººä»¬å‘ç°çš„é‚£æ ·ï¼Œ&lt;a href=&#34;https://twitter.com/danielbryantuk&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸¹å°¼å°”Â·å¸ƒè±æ©ç‰¹&lt;/a&gt; æœ€è¿‘æ˜ç¡®è¡¨ç¤ºï¼Œ &lt;a href=&#34;https://www.infoq.com/articles/ambassador-api-gateway-kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸º Envoy å»ºé€ ä¸€ä¸ªæ§åˆ¶å¹³é¢å¹¶ä¸é€‚åˆèƒ†å°çš„äºº&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.solo.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘å‚ä¸&lt;/a&gt; äº† &lt;a href=&#34;https://github.com/istio/istio&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‡ ä¸ª&lt;/a&gt;ä¸º Envoy æ„å»ºæ§åˆ¶å¹³é¢çš„&lt;a href=&#34;https://github.com/solo-io/gloo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€æºé¡¹ç›®&lt;/a&gt; ã€‚ä¾‹å¦‚ï¼Œ &lt;a href=&#34;https://gloo.solo.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gloo&lt;/a&gt; æ˜¯ &lt;a href=&#34;https://medium.com/solo-io/announcing-gloo-the-function-gateway-3f0860ef6600&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸€ä¸ªåŠŸèƒ½ç½‘å…³&lt;/a&gt; ï¼Œå¯ä»¥å……å½“éå¸¸å¼ºå¤§çš„ Kubernetes å…¥å£ï¼ŒAPI ç½‘å…³æˆ–åŠŸèƒ½ç½‘å…³ï¼Œä»¥ç®€åŒ–å•ä½“åº”ç”¨åˆ°å¾®æœåŠ¡çš„è¿‡æ¸¡ã€‚Gloo &lt;a href=&#34;https://gloo.solo.io/introduction/architecture/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ‰ä¸€ä¸ª Envoy çš„æ§åˆ¶å¹³é¢&lt;/a&gt; ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸€ç³»åˆ—çš„å¸–å­ä¸­ä½œä¸ºä¸€ä¸ªä¾‹å­æ¥è¯´æ˜å¦‚ä½•æ„å»ºä¸€ä¸ªç®€å•çš„æŠ½è±¡ï¼Œå…è®¸åœ¨ä½ éœ€è¦çš„æ§åˆ¶ç‚¹ä¸Šå®ç°å¯æ’æ‹”æ€§å’Œå¯æ‰©å±•æ€§ã€‚æ‚¨å¯ä»¥ç”¨ä½œå‚è€ƒçš„å…¶ä»–å¯é çš„æ§åˆ¶å¹³é¢å®ç°æ˜¯ &lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/heptio/contour&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Heptio Contour&lt;/a&gt; æˆ‘ä»¬å°†åœ¨æ•´ä¸ªç³»åˆ—åšå®¢ä¸­ä½¿ç”¨è¿™äº›ä½œä¸ºå¾ˆå¥½çš„ä¾‹å­ã€‚å¦‚æœä¸å‡ºæ„å¤–ï¼Œæ‚¨å¯ä»¥äº†è§£ Envoy æ§åˆ¶å¹³é¢å­˜åœ¨å“ªäº›é€‰é¡¹ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æŒ‡å¯¼æ‚¨çš„å®æ–½ï¼Œå¦‚æœæ‚¨å¿…é¡»èµ°è¿™æ¡è·¯ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpbj0hgj21200a840t_hu_778667b9578799e6.webp 400w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpbj0hgj21200a840t_hu_c19beec3ae162fa3.webp 760w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpbj0hgj21200a840t_hu_7fa7d2a7a05755f2.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpbj0hgj21200a840t_hu_778667b9578799e6.webp&#34;
               width=&#34;760&#34;
               height=&#34;204&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªåšå®¢ç³»åˆ—ä¸­ï¼Œæˆ‘ä»¬å°†çœ‹çœ‹ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨åŠ¨æ€æ›´æ–°æœºåˆ¶çš„ Envoy è·¯ç”±ã€æœåŠ¡å‘ç°å’Œå…¶ä»–é…ç½®&lt;/li&gt;
&lt;li&gt;ç¡®å®šæ„æˆæ§åˆ¶å¹³é¢çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬åç«¯å­˜å‚¨ã€æœåŠ¡å‘ç° APIã€å®‰å…¨ç»„ä»¶ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºæ‚¨å’Œç»„ç»‡æœ€é€‚åˆçš„ç”¨ä¾‹ï¼Œå»ºç«‹ä»»ä½•ç‰¹å®šäºåŸŸçš„é…ç½®å¯¹è±¡å’Œ API&lt;/li&gt;
&lt;li&gt;è€ƒè™‘å¦‚ä½•æœ€å¥½åœ°å°†æ§åˆ¶å¹³é¢æ’å…¥æ‚¨éœ€è¦çš„åœ°æ–¹&lt;/li&gt;
&lt;li&gt;éƒ¨ç½²å„ç§æ§åˆ¶å¹³é¢ç»„ä»¶çš„é€‰é¡¹&lt;/li&gt;
&lt;li&gt;é€šè¿‡æ§åˆ¶å¹³é¢çš„æµ‹è¯•å·¥å…·è¿›è¡Œæ€è€ƒ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†å¼€å§‹è¿™ä¸ªç³»åˆ—ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä½¿ç”¨ Envoy çš„åŠ¨æ€é…ç½® API åœ¨è¿è¡Œæ—¶æ›´æ–° Envoy ä»¥å¤„ç†æ‹“æ‰‘å’Œéƒ¨ç½²çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-xds-api-åŠ¨æ€é…ç½®-envoy&#34;&gt;ä½¿ç”¨ xDS API åŠ¨æ€é…ç½® Envoy&lt;/h2&gt;
&lt;p&gt;æ„å»ºåœ¨ Envoy ä¹‹ä¸Šçš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯å®ƒçš„æ•°æ®å¹³é¢ APIã€‚ä½¿ç”¨æ•°æ®å¹³é¢ APIï¼Œæˆ‘ä»¬å¯ä»¥ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/intro/arch_overview/dynamic_configuration&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŠ¨æ€é…ç½® Envoy çš„å¤§éƒ¨åˆ†é‡è¦è¿è¡Œæ—¶è®¾ç½®&lt;/a&gt; ã€‚Envoy é€šè¿‡å…¶ xDS API çš„é…ç½® &lt;a href=&#34;https://blog.envoyproxy.io/embracing-eventual-consistency-in-soa-networking-32a5ee5d443d&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ€ç»ˆä¸€è‡´çš„&lt;/a&gt; â€Š- å³æ— æ³•å½±å“é›†ç¾¤ä¸­æ‰€æœ‰ä»£ç†çš„â€œåŸå­æ›´æ–°â€ã€‚å½“æ§åˆ¶å¹³é¢å…·æœ‰é…ç½®æ›´æ–°æ—¶ï¼Œå®ƒé€šè¿‡ xDS API ä½¿å®ƒä»¬å¯ç”¨äºæ•°æ®å¹³é¢ä»£ç†ï¼Œå¹¶ä¸”æ¯ä¸ªä»£ç†å°†å½¼æ­¤ç‹¬ç«‹åœ°åº”ç”¨è¿™äº›æ›´æ–°ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ xDS åŠ¨æ€é…ç½®çš„ Envoy è¿è¡Œæ—¶æ¨¡å‹çš„éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/listeners/lds#config-listeners-lds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›‘å¬å™¨å‘ç°æœåŠ¡ API -&lt;/a&gt; ç”¨äºå‘å¸ƒç›‘å¬æµé‡çš„ç«¯å£çš„ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/listeners/lds#config-listeners-lds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LDS&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/api-v2/api/v2/eds.proto#envoy-api-file-envoy-api-v2-eds-proto&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç«¯ç‚¹å‘ç°æœåŠ¡ API-&lt;/a&gt; ç”¨äºæœåŠ¡å‘ç°çš„ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/api-v2/api/v2/eds.proto#envoy-api-file-envoy-api-v2-eds-proto&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;EDS&lt;/a&gt; ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/http_conn_man/rds#config-http-conn-man-rds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è·¯ç”±å‘ç°æœåŠ¡ API-RDS&lt;/a&gt; ç”¨äºæµé‡è·¯ç”±å†³ç­–&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/cluster_manager/cds#config-cluster-manager-cds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†ç¾¤å‘ç°æœåŠ¡ -&lt;/a&gt; ç”¨äºåç«¯æœåŠ¡çš„ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/cluster_manager/cds#config-cluster-manager-cds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CDS&lt;/a&gt; ï¼Œæˆ‘ä»¬å¯ä»¥å°†æµé‡è·¯ç”±åˆ°è¯¥æœåŠ¡&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/secret&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;secret å‘ç°æœåŠ¡ -&lt;/a&gt; ç”¨äºåˆ†å‘ Secret çš„ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/secret&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SDS&lt;/a&gt; ï¼ˆè¯ä¹¦å’Œå¯†é’¥ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpqxtkyj20p00gm0yz_hu_8a93e0b44fd287f.webp 400w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpqxtkyj20p00gm0yz_hu_7d6376accf08d9c8.webp 760w,
               /blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpqxtkyj20p00gm0yz_hu_435bceb2ac0c13fd.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/guidance-for-building-a-control-plane-to-manage-envoy-proxy-at-the-edge-as-a-gateway-or-in-a-mesh/61411417ly1g0mfpqxtkyj20p00gm0yz_hu_8a93e0b44fd287f.webp&#34;
               width=&#34;760&#34;
               height=&#34;505&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;API ä½¿ç”¨ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/overview/v2_overview#config-overview-v2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;proto3 Protocol Buffers&lt;/a&gt; å®šä¹‰ï¼Œç”šè‡³è¿˜æœ‰ä¸€äº›å‚è€ƒå®ç°å¯ç”¨äºå¼•å¯¼æ‚¨è‡ªå·±çš„æ§åˆ¶å¹³é¢ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/envoyproxy/go-control-plane&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;go æ§åˆ¶å¹³é¢&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/envoyproxy/java-control-plane&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;java çš„æ§åˆ¶å¹³é¢&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è™½ç„¶è¿™äº›é¢†åŸŸï¼ˆLDS/EDS/RDS/CDS/SDSï¼Œä¸€èµ·â€œxDSâ€ï¼‰ä¸­çš„æ¯ä¸€ä¸ªéƒ½æ˜¯åŠ¨æ€å¯é…ç½®çš„ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€æ‚¨å¿…é¡»åŠ¨æ€é…ç½®æ‰€æœ‰å†…å®¹ã€‚æ‚¨å¯ä»¥æ‹¥æœ‰é™æ€å®šä¹‰çš„éƒ¨åˆ†ç»„åˆä»¥åŠåŠ¨æ€æ›´æ–°çš„éƒ¨åˆ†ç»„åˆã€‚ä¾‹å¦‚ï¼Œè¦å®ç°ä¸€ç§ &lt;code&gt;endpoints&lt;/code&gt; é¢„æœŸä¸ºåŠ¨æ€ä½† &lt;code&gt;clusters&lt;/code&gt; åœ¨éƒ¨ç½²æ—¶ä¼—æ‰€å‘¨çŸ¥ çš„æœåŠ¡å‘ç°ç±»å‹ï¼Œæ‚¨å¯ä»¥é™æ€å®šä¹‰ &lt;code&gt;clusters&lt;/code&gt; å¹¶ä½¿ç”¨ Envoy ä¸­ çš„ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/api-v2/api/v2/eds.proto#envoy-api-file-envoy-api-v2-eds-proto&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç«¯ç‚¹å‘ç°æœåŠ¡&lt;/a&gt; ã€‚å¦‚æœæ‚¨ä¸ç¡®å®šåœ¨éƒ¨ç½²æ—¶å°†ä½¿ç”¨å“ªäº› &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/intro/arch_overview/terminology&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸Šæ¸¸é›†ç¾¤ï¼Œ&lt;/a&gt; åˆ™å¯ä»¥ä½¿ç”¨ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.9.0/configuration/cluster_manager/cds#config-cluster-manager-cds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†ç¾¤å‘ç°æœåŠ¡&lt;/a&gt; åŠ¨æ€åœ°æ‰¾åˆ°é‚£äº›ã€‚å…³é”®æ˜¯ï¼Œæ‚¨å¯ä»¥æ„å»ºä¸€ä¸ªå·¥ä½œæµç¨‹å’Œæµç¨‹ï¼Œé™æ€é…ç½®æ‚¨éœ€è¦çš„éƒ¨åˆ†ï¼ŒåŒæ—¶ä½¿ç”¨åŠ¨æ€ xDS æœåŠ¡æ¥å‘ç°è¿è¡Œæ—¶æ‰€éœ€çš„éƒ¨åˆ†ã€‚æ‚¨çœ‹åˆ°ä¸åŒçš„æ§åˆ¶å¹³é¢å®ç°çš„åŸå› ä¹‹ä¸€å¹¶ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰ä¸€ä¸ªå®Œå…¨åŠ¨æ€å’Œå¯äº’æ¢çš„ç¯å¢ƒï¼Œå…¶ä¸­æ‰€æœ‰éƒ¨åˆ†éƒ½åº”è¯¥æ˜¯åŠ¨æ€çš„ã€‚åœ¨ç»™å®šç°æœ‰çº¦æŸå’Œå¯ç”¨å·¥ä½œæµç¨‹çš„æƒ…å†µä¸‹ï¼Œé‡‡ç”¨æœ€é€‚åˆæ‚¨ç³»ç»Ÿçš„åŠ¨æ€çº§åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Gloo çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä½¿ç”¨&lt;a href=&#34;https://github.com/solo-io/gloo/blob/ac3bddf202423b297fb909eb6eff498745a8c015/projects/gloo/pkg/xds/envoy.go#L76&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäº go-control-plane çš„æ§åˆ¶å¹³é¢&lt;/a&gt; æ¥å®ç° xDS API ä»¥æœåŠ¡ Envoy çš„åŠ¨æ€é…ç½®ã€‚ä¸ Heptio Contour ä¸€æ ·ï¼ŒIstio ä¹Ÿä½¿ç”¨æ­¤å®ç°ã€‚æ­¤æ§åˆ¶å¹³é¢ API åˆ©ç”¨ &lt;a href=&#34;https://grpc.io/docs/guides/concepts.html#server-streaming-rpc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;gRPC æµ&lt;/a&gt; è°ƒç”¨å’Œå­˜æ ¹ APIï¼Œå› æ­¤æ‚¨å¯ä»¥ä½¿ç”¨å®ç°å¡«å……å®ƒã€‚ &lt;a href=&#34;https://github.com/turbinelabs/rotor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt; Turbine Labsâ€™Rotor é¡¹ç›®&lt;/a&gt; æ˜¯å¦ä¸€ä¸ªä¸å¹¸è¢«å¼ƒç”¨ä½†å¯ä»¥ç”¨æ¥å­¦ä¹ çš„&lt;a href=&#34;https://github.com/turbinelabs/rotor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é¡¹ç›®&lt;/a&gt; ã€‚è¿™æ˜¯å°† Envoy çš„æ•°æ®å¹³é¢ API ä¸æ§åˆ¶å¹³é¢é›†æˆçš„é«˜æ•ˆæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;gRPC æµä¸æ˜¯æ›´æ–° Envoy é…ç½®çš„å”¯ä¸€æ–¹å¼ã€‚åœ¨&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.5.0/api-v1/api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä»¥å‰ç‰ˆæœ¬çš„ Envoy xDS API ä¸­&lt;/a&gt; ï¼Œè½®è¯¢æ˜¯ç¡®å®šæ–°é…ç½®æ˜¯å¦å¯ç”¨çš„å”¯ä¸€é€‰é¡¹ã€‚è™½ç„¶è¿™æ˜¯å¯ä»¥æ¥å—çš„ï¼Œå¹¶ä¸”ç¬¦åˆâ€œæœ€ç»ˆä¸€è‡´â€é…ç½®æ›´æ–°çš„æ ‡å‡†ï¼Œä½†å®ƒåœ¨ç½‘ç»œå’Œè®¡ç®—ä½¿ç”¨æ–¹é¢æ•ˆç‡éƒ½è¾ƒä½ã€‚ä¹Ÿå¯èƒ½éš¾ä»¥é€‚å½“åœ°è°ƒæ•´è½®è¯¢é…ç½®ä»¥å‡å°‘æµªè´¹çš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œä¸€äº› Envoy ç®¡ç†å®æ–½é€‰æ‹©ç”Ÿæˆ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/overview/v2_overview#static&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é™æ€ Envoy é…ç½®æ–‡ä»¶ï¼Œ&lt;/a&gt; å¹¶å®šæœŸæ›¿æ¢ Envoy ç£ç›˜ä¸Šçš„é…ç½®æ–‡ä»¶ï¼Œç„¶åæ‰§è¡Œ &lt;a href=&#34;https://blog.envoyproxy.io/envoy-hot-restart-1d16b14555b5&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy è¿›ç¨‹&lt;/a&gt; çš„ &lt;a href=&#34;https://blog.envoyproxy.io/envoy-hot-restart-1d16b14555b5&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;çƒ­é‡æ–°åŠ è½½&lt;/a&gt; ã€‚åœ¨é«˜åº¦åŠ¨æ€çš„ç¯å¢ƒä¸­ï¼ˆå¦‚ Kubernetesï¼Œä½†å®é™…ä¸Šæ˜¯ä»»ä½•åŸºäº ephemeral-compute çš„å¹³å°ï¼‰ï¼Œæ­¤æ–‡ä»¶ç”Ÿæˆï¼Œäº¤ä»˜ï¼Œçƒ­é‡å¯ç­‰çš„ç®¡ç†å¯èƒ½å˜å¾—éš¾ä»¥å¤„ç†ã€‚Envoy æœ€åˆæ˜¯åœ¨ä¸€ä¸ªæ‰§è¡Œæ­¤ç±»æ›´æ–°çš„ç¯å¢ƒä¸­è¿è¡Œçš„ï¼ˆLyftï¼Œå®ƒæ˜¯åœ¨å“ªé‡Œåˆ›å»ºçš„ï¼‰ï¼Œä½†å®ƒä»¬é€æ¸è½¬å‘ä½¿ç”¨ xDS APIã€‚&lt;/p&gt;
&lt;h2 id=&#34;takeaway&#34;&gt;Takeaway&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/solo-io/gloo/graphs/contributors&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gloo å›¢é˜Ÿ&lt;/a&gt; è®¤ä¸ºä½¿ç”¨ gRPC æµå’Œ xDS API æ˜¯å®ç° Envoy åŠ¨æ€é…ç½®å’Œæ§åˆ¶çš„ç†æƒ³æ–¹å¼ã€‚åŒæ ·ï¼Œå¦‚æœæ‚¨ä¸éœ€è¦ï¼Œå¹¶éæ‰€æœ‰ Envoy é…ç½®éƒ½åº”åŠ¨æ€æä¾›ï¼Œä½†æ˜¯å¦‚æœæ‚¨åœ¨é«˜åº¦åŠ¨æ€çš„ç¯å¢ƒä¸­è¿è¡Œï¼ˆä¾‹å¦‚ï¼ŒKubernetesï¼‰ï¼Œåˆ™åŠ¨æ€é…ç½® Envoy çš„é€‰é¡¹è‡³å…³é‡è¦ã€‚å…¶ä»–ç¯å¢ƒå¯èƒ½æ²¡æœ‰è¿™ç§éœ€æ±‚ã€‚æ— è®ºå“ªç§æ–¹å¼ï¼ŒåŠ¨æ€çš„ gâ€‹â€‹RPC æµ API éƒ½æ˜¯ç†æƒ³çš„é€‰æ‹©ã€‚è¿™ç§æ–¹æ³•çš„ä¸€äº›å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº‹ä»¶é©±åŠ¨çš„é…ç½®æ›´æ–°; å½“é…ç½®åœ¨æ§åˆ¶å¹³é¢ä¸­å¯ç”¨æ—¶ï¼Œé…ç½®è¢«æ¨é€åˆ° Envoy&lt;/li&gt;
&lt;li&gt;æ— éœ€è½®è¯¢æ›´æ”¹&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰å¿…è¦çƒ­åŠ è½½ Envoy&lt;/li&gt;
&lt;li&gt;æ²¡æœ‰ä¸­æ–­æµé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ&#34;&gt;ä¸‹ä¸€æ­¥æ˜¯ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;åœ¨ç¬¬ä¸€éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡ä»‹ç» xDS API ä»¥åŠä¸º Envoy æä¾›åŠ¨æ€é…ç½®çš„ä¸åŒé€‰é¡¹ï¼Œä¸ºå¦‚ä½•ä¸º Envoy æ„å»ºæ§åˆ¶å¹³é¢å»ºç«‹äº†ä¸€äº›åŸºæœ¬èƒŒæ™¯ã€‚åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œå°†åœ¨å‡ å¤©å†…å‘å¸ƒï¼Œå°†æ¶µç›–å°†æ‚¨çš„æ§åˆ¶å¹³é¢åˆ†è§£ä¸ºå¯éƒ¨ç½²ç»„ä»¶ï¼Œç¡®å®šæ‚¨éœ€è¦å“ªäº›éƒ¨åˆ†ï¼Œç‰¹å®šäºåŸŸçš„é…ç½®å¯¹è±¡æ¨¡å‹ï¼Œä»¥åŠå¦‚ä½•è€ƒè™‘æ§ä»¶çš„å¯æ’æ‹”æ€§å¹³é¢ã€‚å…³æ³¨ twitterï¼ˆ &lt;a href=&#34;https://twitter.com/christianposta&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@christianposta&lt;/a&gt; ï¼Œ &lt;a href=&#34;https://twitter.com/soloio_inc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@ solio_in&lt;/a&gt; ï¼‰æˆ–åšå®¢ï¼ˆ &lt;a href=&#34;https://medium.com/solo-io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://medium.com/solo-io&lt;/a&gt; ï¼‰&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Istio æ‰“é€ å¾®æœåŠ¡ï¼ˆç¬¬ 1 éƒ¨åˆ†ï¼‰</title>
      <link>https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/</link>
      <pubDate>Wed, 27 Feb 2019 11:35:38 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/</guid>
      <description>&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1gyo9j20m80bq754_hu_5f517c0ee6c9b245.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1gyo9j20m80bq754_hu_28c101d37a05a1af.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1gyo9j20m80bq754_hu_184ae9f97196ce15.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1gyo9j20m80bq754_hu_5f517c0ee6c9b245.webp&#34;
               width=&#34;760&#34;
               height=&#34;401&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Istio&lt;/strong&gt; æ˜¯ä¸€ä¸ªç”± Googleï¼ŒIBM å’Œ Lyft å›¢é˜Ÿåˆä½œå¼€å‘çš„å¼€æºé¡¹ç›®ï¼Œå®ƒæä¾›äº†åŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºå¤æ‚æ€§çš„è§£å†³æ–¹æ¡ˆï¼Œä»…ä¸¾å‡ ä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æµé‡ç®¡ç†&lt;/strong&gt; ï¼šè¶…æ—¶ï¼Œé‡è¯•ï¼Œè´Ÿè½½å‡è¡¡ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§ï¼š&lt;/strong&gt; æœ€ç»ˆç”¨æˆ·èº«ä»½éªŒè¯å’Œæˆæƒï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯è§‚å¯Ÿæ€§ï¼š&lt;/strong&gt; è·Ÿè¸ªï¼Œç›‘æ§å’Œè®°å½•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥åœ¨åº”ç”¨ç¨‹åºå±‚ä¸­è§£å†³ï¼Œä½†æ˜¯æ‚¨çš„æœåŠ¡ä¸å†æ˜¯â€œå¾®å‹â€ï¼Œç›¸å¯¹äºæä¾›ä¸šåŠ¡ä»·å€¼çš„èµ„æºï¼Œå®ç°è¿™äº›çš„æ‰€æœ‰é¢å¤–å·¥ä½œéƒ½æ˜¯å…¬å¸èµ„æºçš„å‹åŠ›ã€‚æˆ‘ä»¬æ¥ä¸¾ä¸ªä¾‹å­ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PMï¼šæ·»åŠ åé¦ˆåŠŸèƒ½éœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¼€å‘ï¼šä¸¤ä¸ªå†²åˆºï¼ˆæ•æ·å¼€å‘ä¸­çš„æœ¯è¯­ï¼Œä¸€èˆ¬ä¸€ä¸ªå†²åˆºå‘¨æœŸ 30 å¤©ï¼‰ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;PMï¼šä»€ä¹ˆ&amp;hellip;&amp;hellip;ï¼Ÿé‚£åªæ˜¯ä¸€ä¸ª CRUDï¼&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;å¼€å‘ï¼šåˆ›å»º CRUD å¾ˆå®¹æ˜“ï¼Œä½†æˆ‘ä»¬éœ€è¦å¯¹ç”¨æˆ·å’ŒæœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒã€‚è€Œä¸”ç”±äºç½‘ç»œä¸å¯é ï¼Œæˆ‘ä»¬éœ€è¦åœ¨å®¢æˆ·ç«¯å®æ–½é‡è¯•å’Œç†”æ–­å™¨ï¼Œå¹¶ç¡®ä¿æˆ‘ä»¬ä¸ä¼šå ç”¨æ•´ä¸ªç³»ç»Ÿï¼Œæˆ‘ä»¬éœ€è¦ Timeout å’Œ Bulkheadsï¼Œå¦å¤–è¿˜è¦æ£€æµ‹æˆ‘ä»¬éœ€è¦ç›‘æ§çš„é—®é¢˜ï¼Œè·Ÿè¸ª[&amp;hellip; ]&lt;/p&gt;&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;PMï¼šé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠå®ƒæ”¾åœ¨äº§å“æœåŠ¡ä¸­å§ã€‚å“å‘€ï¼&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ä½ æ˜ç™½äº†ï¼Œå¿…é¡»æ»¡è¶³æ‰€æœ‰å½¢å¼æ‰å¯ä»¥ä¸ºæˆ‘ä»¬æ·»åŠ ä¸€é¡¹å·¨å¤§çš„æœåŠ¡ï¼ˆæœ‰å¾ˆå¤šä¸æ˜¯ä¸šåŠ¡åŠŸèƒ½çš„ä»£ç ï¼‰ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤º Istio å¦‚ä½•ä»æˆ‘ä»¬çš„æœåŠ¡ä¸­åˆ é™¤æ‰€æœ‰ä¸Šè¿°äº¤å‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1å¾®æœåŠ¡çš„å½¢å¼æ„æˆ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1.å¾®æœåŠ¡çš„å½¢å¼æ„æˆ&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1x75cj20ai081t8l_hu_f1d12f072b059cab.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1x75cj20ai081t8l_hu_47c895f9a701c678.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1x75cj20ai081t8l_hu_7806240f2c98b7e5.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1x75cj20ai081t8l_hu_f1d12f072b059cab.webp&#34;
               width=&#34;378&#34;
               height=&#34;289&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1.å¾®æœåŠ¡çš„å½¢å¼æ„æˆ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæœ¬æ–‡å‡è®¾æ‚¨å…·æœ‰ Kubernetes çš„çŸ¥è¯†ã€‚å¦‚æœä¸æ˜¯è¿™ç§æƒ…å†µï¼Œæˆ‘å»ºè®®æ‚¨é˜…è¯» &lt;a href=&#34;https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘å¯¹ Kubernetes çš„ä»‹ç»&lt;/a&gt;ï¼Œç„¶åç»§ç»­é˜…è¯»æœ¬æ–‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äº-istio&#34;&gt;å…³äº Istio&lt;/h2&gt;
&lt;p&gt;åœ¨æ²¡æœ‰ Istio çš„ä¸–ç•Œä¸­ï¼Œä¸€ä¸ªæœåŠ¡å‘å¦ä¸€ä¸ªæœåŠ¡ç›´æ¥å‘å‡ºè¯·æ±‚ï¼Œå¹¶ä¸”åœ¨å‘ç”Ÿæ•…éšœçš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡éœ€è¦é€šè¿‡é‡è¯•ï¼Œè¶…æ—¶ï¼Œæ‰“å¼€ç†”æ–­å™¨ç­‰æ¥å¤„ç†å®ƒã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2-kubernetes-ä¸­çš„ç½‘ç»œæµé‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2. Kubernetes ä¸­çš„ç½‘ç»œæµé‡&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1eu2vj20m8054dg4_hu_e5d9dbc74b54693d.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1eu2vj20m8054dg4_hu_39e66ef6834812bd.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1eu2vj20m8054dg4_hu_1b3f2a66aeb54b56.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1eu2vj20m8054dg4_hu_e5d9dbc74b54693d.webp&#34;
               width=&#34;760&#34;
               height=&#34;175&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2. Kubernetes ä¸­çš„ç½‘ç»œæµé‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒIstio é€šè¿‡ä¸æœåŠ¡å®Œå…¨åˆ†ç¦»ï¼Œå¹¶é€šè¿‡æ‹¦æˆªæ‰€æœ‰ç½‘ç»œé€šä¿¡æ¥æä¾›ä¸€ç§å·§å¦™çš„è§£å†³æ–¹æ¡ˆã€‚è¿™æ ·åšå¯ä»¥å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Fault Tolerance&lt;/strong&gt; â€Š- ä½¿ç”¨å“åº”çŠ¶æ€ä»£ç ï¼Œå®ƒå¯ä»¥åœ¨è¯·æ±‚å¤±è´¥å¹¶é‡è¯•æ—¶ç†è§£ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Canary Rollouts&lt;/strong&gt; â€Š- ä»…å°†æŒ‡å®šç™¾åˆ†æ¯”çš„è¯·æ±‚è½¬å‘åˆ°æ–°ç‰ˆæœ¬çš„æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç›‘æ§å’ŒæŒ‡æ ‡&lt;/strong&gt; â€Š- æœåŠ¡å“åº”æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·Ÿè¸ªå’Œå¯è§‚å¯Ÿæ€§&lt;/strong&gt; â€Š- å®ƒåœ¨æ¯ä¸ªè¯·æ±‚ä¸­æ·»åŠ ç‰¹æ®Š headerï¼Œå¹¶åœ¨é›†ç¾¤ä¸­è·Ÿè¸ªå®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt; â€Š- æå– JWT ä»¤ç‰Œå¹¶å¯¹ç”¨æˆ·è¿›è¡Œèº«ä»½éªŒè¯å’Œæˆæƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»…ä¸¾å‡ ä¾‹ï¼ˆä»…ä¸¾å‡ ä¾‹ï¼‰ï¼Œè®©æ‚¨æ„Ÿå…´è¶£ï¼æˆ‘ä»¬æ¥çœ‹ä¸€äº›æŠ€æœ¯ç»†èŠ‚å§ï¼&lt;/p&gt;
&lt;h2 id=&#34;istio-çš„æ¶æ„&#34;&gt;Istio çš„æ¶æ„&lt;/h2&gt;
&lt;p&gt;Istio æ‹¦æˆªæ‰€æœ‰ç½‘ç»œæµé‡ï¼Œå¹¶é€šè¿‡åœ¨æ¯ä¸ª pod ä¸­æ³¨å…¥æ™ºèƒ½ä»£ç†ä½œä¸º sidecar æ¥åº”ç”¨ä¸€ç»„è§„åˆ™ã€‚å¯ç”¨æ‰€æœ‰åŠŸèƒ½çš„ä»£ç†åŒ…æ‹¬ &lt;strong&gt;æ•°æ®å¹³é¢&lt;/strong&gt;ï¼Œå¹¶ä¸”è¿™äº›ä»£ç†å¯ç”±&lt;strong&gt;æ§åˆ¶å¹³é¢&lt;/strong&gt; åŠ¨æ€é…ç½®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ•°æ®å¹³é¢&#34;&gt;æ•°æ®å¹³é¢&lt;/h2&gt;
&lt;p&gt;æ³¨å…¥çš„ä»£ç†ä½¿ Istio èƒ½å¤Ÿè½»æ¾æ»¡è¶³æˆ‘ä»¬çš„è¦æ±‚ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹é‡è¯•å’Œç†”æ–­å™¨åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3envoy-å¦‚ä½•å®ç°-retries-å’Œ-circuitbreaking&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3.Envoy å¦‚ä½•å®ç° Retries å’Œ CircuitBreaking&#34;
           src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu34d0gg20m808a1kx.gif&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3.Envoy å¦‚ä½•å®ç° Retries å’Œ CircuitBreaking
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Envoy å°†è¯·æ±‚å‘é€åˆ°æœåŠ¡ B çš„ç¬¬ä¸€ä¸ªå®ä¾‹ï¼Œä½†å®ƒå¤±è´¥äº†ã€‚&lt;/li&gt;
&lt;li&gt;Envoy sidecar é‡è¯•ã€‚ï¼ˆ1ï¼‰&lt;/li&gt;
&lt;li&gt;è¿”å›å¯¹è°ƒç”¨ä»£ç†çš„å¤±è´¥è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;è¿™å°†æ‰“å¼€ç†”æ–­å™¨å¹¶åœ¨åç»­è¯·æ±‚ä¸­è°ƒç”¨ä¸‹ä¸€ä¸ªæœåŠ¡ã€‚ï¼ˆ2ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ„å‘³ç€æ‚¨ä¸å¿…ä½¿ç”¨å¦ä¸€ä¸ªé‡è¯•åº“ï¼Œæ‚¨ä¸å¿…åœ¨ç¼–ç¨‹è¯­è¨€ Xï¼ŒY æˆ– Z ä¸­å¼€å‘è‡ªå·±çš„ Circuit Breaking å’Œ Service Discovery å®ç°ã€‚æ‰€æœ‰è¿™äº›éƒ½æ˜¯å¼€ç®±å³ç”¨çš„ã€‚è¿™äº›åŠŸèƒ½éƒ½æ˜¯é€šè¿‡ Istio æ¥å®ç°ï¼Œä½ ä¸éœ€è¦æ›´æ”¹ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå¥½ï¼ç°åœ¨ä½ æƒ³åŠ å…¥ Istio çš„èˆªè¡Œï¼Œä½†ä½ ä»ç„¶æœ‰ä¸€äº›ç–‘è™‘ï¼Œä¸€äº›æ‚¬è€Œæœªå†³çš„é—®é¢˜ã€‚è¿™æ˜¯ä¸€ä¸ªä¸€åˆ€åˆ‡çš„æ–¹æ¡ˆï¼Œä½ å¯¹å®ƒæŒæ€€ç–‘æ€åº¦ï¼Œå› ä¸ºå®ƒæ€»æ˜¯æœ€ç»ˆæˆä¸ºä¸€åˆ€åˆ‡çš„æ— è§£æ–¹æ¡ˆï¼&lt;/p&gt;
&lt;p&gt;ä½ æœ€ç»ˆä½å£°è¯´äº†è¿™ä¸ªé—®é¢˜ï¼šâ€œè¿™æ˜¯å¯é…ç½®çš„å—ï¼Ÿâ€&lt;/p&gt;
&lt;p&gt;æ¬¢è¿æˆ‘çš„æœ‹å‹æ¥å·¡èˆªï¼Œæˆ‘ä»¬å°†ä¸ºå¤§å®¶ä»‹ç»ä¸€ä¸‹æ§åˆ¶å¹³é¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ§åˆ¶å¹³é¢&#34;&gt;æ§åˆ¶å¹³é¢&lt;/h2&gt;
&lt;p&gt;ç”±ä¸‰ä¸ªç»„ä»¶ç»„æˆï¼š &lt;strong&gt;Pilot&lt;/strong&gt;ã€ &lt;strong&gt;Mixer&lt;/strong&gt; å’Œ &lt;strong&gt;Citadel&lt;/strong&gt;ï¼Œå®ƒä»¬ç»„åˆä½¿ç”¨ Envoys æ¥è·¯ç”±æµé‡ï¼Œå®æ–½ç­–ç•¥å’Œæ”¶é›†é¥æµ‹æ•°æ®ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-4ä¸æ•°æ®å¹³é¢ç›¸å…³çš„æ§åˆ¶å¹³é¢&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4.ä¸æ•°æ®å¹³é¢ç›¸å…³çš„æ§åˆ¶å¹³é¢&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2b2mqj20m80eogn9_hu_669cb3fc8cf37ca9.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2b2mqj20m80eogn9_hu_51a46ed740766f9c.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2b2mqj20m80eogn9_hu_273601cabf980a34.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2b2mqj20m80eogn9_hu_669cb3fc8cf37ca9.webp&#34;
               width=&#34;760&#34;
               height=&#34;502&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4.ä¸æ•°æ®å¹³é¢ç›¸å…³çš„æ§åˆ¶å¹³é¢
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Envoyï¼ˆå³æ•°æ®å¹³é¢ï¼‰ä½¿ç”¨ç”± Istio å®šä¹‰çš„ &lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes è‡ªå®šä¹‰èµ„æºå®šä¹‰&lt;/a&gt; è¿›è¡Œé…ç½®ã€‚è¿™æ„å‘³ç€å¯¹ä½ è€Œè¨€ï¼Œå®ƒåªæ˜¯å¦ä¸€ä¸ªå…·æœ‰ç†Ÿæ‚‰è¯­æ³•çš„ Kubernetes èµ„æºã€‚åˆ›å»ºåå°†ç”±&lt;strong&gt;æ§åˆ¶å¹³é¢&lt;/strong&gt;è·å–ï¼Œå¹¶å°†å…¶åº”ç”¨äº Envoyã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœåŠ¡ä¸-istio-çš„å…³ç³»&#34;&gt;æœåŠ¡ä¸ Istio çš„å…³ç³»&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æè¿°äº† Istio ä¸æˆ‘ä»¬æœåŠ¡çš„å…³ç³»ï¼Œä½†æˆ‘ä»¬åè¿‡æ¥æ€è€ƒä¸€ä¸‹ï¼Œæˆ‘ä»¬çš„æœåŠ¡ä¸ Istio çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦ç‡åœ°è¯´ï¼Œæˆ‘ä»¬çš„æœåŠ¡å¯¹ Istio çš„å­˜åœ¨æœ‰ç€å°½å¯èƒ½å¤šçš„äº†è§£ï¼Œå°±åƒé±¼å¯¹æ°´ä¸€æ ·ï¼Œä»–ä»¬ä¼šé—®è‡ªå·±â€œè¿™åˆ°åº•æ˜¯ä»€ä¹ˆæ°´ï¼Ÿâ€ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-victoria-dimitrakopoulos&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Victoria Dimitrakopoulos&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1l39rj20m809tqd9_hu_1ae92d9515f0d015.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1l39rj20m809tqd9_hu_cfd198f0662866fe.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1l39rj20m809tqd9_hu_2c3a867ceb03ba03.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1l39rj20m809tqd9_hu_1ae92d9515f0d015.webp&#34;
               width=&#34;760&#34;
               height=&#34;335&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Victoria Dimitrakopoulos
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€æ‚¨å¯ä»¥é€‰æ‹©ä¸€ä¸ªå·¥ä½œé›†ç¾¤ï¼Œåœ¨éƒ¨ç½²äº† Istio çš„ç»„ä»¶åï¼Œå…¶ä¸­çš„æœåŠ¡å°†ç»§ç»­å·¥ä½œï¼Œå¹¶ä¸”ä»¥ç›¸åŒçš„æ–¹å¼ï¼Œæ‚¨å¯ä»¥åˆ é™¤ç»„ä»¶ï¼Œä¸€åˆ‡éƒ½ä¼šå¾ˆå¥½ã€‚å¯ä»¥ç†è§£çš„æ˜¯ï¼Œæ‚¨å°†å¤±å» Istio æä¾›çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»æœ‰è¶³å¤Ÿçš„ç†è®ºï¼Œä¸‹é¢è®©æˆ‘ä»¬æŠŠè¿™äº›ç†è®ºä»˜è¯¸å®è·µï¼&lt;/p&gt;
&lt;h2 id=&#34;istio-å®è·µ&#34;&gt;Istio å®è·µ&lt;/h2&gt;
&lt;p&gt;Istio è‡³å°‘éœ€è¦ä¸€ä¸ªå…·æœ‰ 4 ä¸ª vCPU å’Œ 8 GB RAM çš„ Kubernetes é›†ç¾¤ã€‚è¦å¿«é€Ÿè®¾ç½®é›†ç¾¤å¹¶è·Ÿè¿›æœ¬æ–‡ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ Google äº‘ç«¯å¹³å°ï¼Œå®ƒä¸ºæ–°ç”¨æˆ·æä¾› &lt;a href=&#34;https://console.developers.google.com/billing/freetrial?hl=en&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;300 ç¾å…ƒçš„å…è´¹è¯•ç”¨ç‰ˆ&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Kubernetes å‘½ä»¤è¡Œå·¥å…·åˆ›å»ºé›†ç¾¤å¹¶é…ç½®è®¿é—®åï¼Œæˆ‘ä»¬å·²å‡†å¤‡å¥½ä½¿ç”¨ Helm Package ç®¡ç†å™¨å®‰è£… Istioã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…-helm&#34;&gt;å®‰è£… Helm&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§&lt;a href=&#34;https://docs.helm.sh/using_helm/#installing-the-helm-client&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ä¸­çš„è¯´æ˜åœ¨æ‚¨çš„è®¡ç®—æœºä¸Šå®‰è£… Helm å®¢æˆ·ç«¯ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ä½¿ç”¨å®ƒæ¥ç”Ÿæˆ Istio å®‰è£…æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…-istio&#34;&gt;å®‰è£… Istio&lt;/h2&gt;
&lt;p&gt;ä»&lt;a href=&#34;https://github.com/istio/istio/releases/tag/1.0.5&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ€æ–°ç‰ˆæœ¬&lt;/a&gt;ä¸‹è½½ Istio çš„èµ„æºï¼Œå°†å†…å®¹æå–åˆ°ä¸€ä¸ªæˆ‘ä»¬å°†ç§°ä¹‹ä¸ºçš„ç›®å½•ä¸­&lt;code&gt;[istio-resources]&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;è¦è½»æ¾è¯†åˆ« Istio èµ„æº &lt;code&gt;istio-system&lt;/code&gt;ï¼Œè¯·åœ¨ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºå‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl create namespace istio-system
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åè¿›å…¥åˆ° &lt;code&gt;[istio-resources]&lt;/code&gt; ç›®å½•å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®Œæˆå®‰è£…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ helm template install/kubernetes/helm/istio &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --set global.mtls.enabled &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --set tracing.enabled &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --set kiali.enabled &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --set grafana.enabled &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt; --namespace istio-system &amp;gt; istio.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢çš„å‘½ä»¤å°† Istio çš„æ ¸å¿ƒç»„ä»¶è¾“å‡ºåˆ°æ–‡ä»¶ &lt;code&gt;istio.yaml&lt;/code&gt; ä¸­ã€‚æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹å‚æ•°è‡ªå®šä¹‰æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;global.mtls.enabled&lt;/strong&gt; è®¾ç½®ä¸º false ä»¥ä¿æŒå¼•å…¥çš„é‡ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;tracing.enabled&lt;/strong&gt; å…è®¸ä½¿ç”¨ jaeger è·Ÿè¸ªè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;kiali.enabled&lt;/strong&gt; åœ¨æˆ‘ä»¬çš„é›†ç¾¤ä¸­å®‰è£… Kiali ä»¥å®ç°æœåŠ¡å’Œæµé‡çš„å¯è§†åŒ–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;grafana.enabled&lt;/strong&gt; å®‰è£… Grafanaï¼Œä¸ºäº†æ”¶é›†æŒ‡æ ‡çš„å¯è§†åŒ–ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨ç”Ÿæˆçš„èµ„æº&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f istio.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ‡å¿—ç€æˆ‘ä»¬é›†ç¾¤ä¸­ Istio å®‰è£…çš„å®Œæˆï¼ç­‰åˆ°&lt;code&gt;istio-system&lt;/code&gt;å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰ pod éƒ½å¤„äº Running æˆ– Completed çŠ¶æ€ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl get pods -n istio-system
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²å‡†å¤‡å¥½ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†ï¼Œæˆ‘ä»¬å°†åœ¨å…¶ä¸­å¯åŠ¨å¹¶è¿è¡Œç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h2 id=&#34;sentiment-analysis-åº”ç”¨æ¶æ„&#34;&gt;Sentiment Analysis åº”ç”¨æ¶æ„&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨&lt;a href=&#34;https://medium.freecodecamp.org/learn-kubernetes-in-under-3-hours-a-detailed-guide-to-orchestrating-containers-114ff420e882&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes ç®€ä»‹æ–‡ç« &lt;/a&gt;ä¸­ä½¿ç”¨çš„ç›¸åŒå¾®æœåŠ¡åº”ç”¨ç¨‹åºï¼Œå®ƒè¶³ä»¥åœ¨å®è·µä¸­å±•ç¤º Istio çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åº”ç”¨ç¨‹åºç”±å››ä¸ªå¾®æœåŠ¡ç»„æˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;SA-Frontend æœåŠ¡&lt;/strong&gt; ï¼šæä¾›å‰ç«¯ Reactjs åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SA-WebApp æœåŠ¡&lt;/strong&gt; ï¼šå¤„ç†å¯¹ Sentiment Analysis çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SA-Logic æœåŠ¡&lt;/strong&gt; ï¼šæ‰§è¡Œ sentiment Analysisã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;SA åé¦ˆæœåŠ¡&lt;/strong&gt; ï¼šæ¥æ”¶ç”¨æˆ·å…³äºåˆ†æå‡†ç¡®æ€§çš„åé¦ˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-6-æƒ…æ„Ÿåˆ†æå¾®æœåŠ¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 6 æƒ…æ„Ÿåˆ†æå¾®æœåŠ¡&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2q2ppj20m80apmxy_hu_f4938bf54b0c768f.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2q2ppj20m80apmxy_hu_1742b977a327e0f8.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2q2ppj20m80apmxy_hu_3baa3afed947a840.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2q2ppj20m80apmxy_hu_f4938bf54b0c768f.webp&#34;
               width=&#34;760&#34;
               height=&#34;366&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 6 æƒ…æ„Ÿåˆ†æå¾®æœåŠ¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨å›¾ 6 ä¸­ï¼Œé™¤äº†æœåŠ¡ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜çœ‹åˆ° Ingress Controller åœ¨ Kubernetes ä¸­å°†ä¼ å…¥çš„è¯·æ±‚è·¯ç”±åˆ°é€‚å½“çš„æœåŠ¡ï¼ŒIstio ä½¿ç”¨äº†ä¸€ä¸ªåä¸º Ingress Gateway çš„ç±»ä¼¼æ¦‚å¿µï¼Œå°†åœ¨æœ¬æ–‡çš„åç»­éƒ¨åˆ†ä¸­ä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-istio-proxies-è¿è¡Œåº”ç”¨ç¨‹åº&#34;&gt;ä½¿ç”¨ Istio Proxies è¿è¡Œåº”ç”¨ç¨‹åº&lt;/h2&gt;
&lt;p&gt;è¦è·Ÿè¿›æœ¬æ–‡ï¼Œè¯·å…‹éš†å­˜å‚¨åº“ istio-masteryï¼ˆ &lt;a href=&#34;https://github.com/rinormaloku/istio-mastery&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/rinormaloku/istio-mastery&lt;/a&gt; ï¼‰ï¼Œå…¶ä¸­åŒ…å« Kubernetes å’Œ Istio çš„åº”ç”¨ç¨‹åºå’Œæ¸…å•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;sidecar-injection&#34;&gt;Sidecar Injection&lt;/h3&gt;
&lt;p&gt;æ³¨å…¥æ˜¯ &lt;strong&gt;è‡ªåŠ¨&lt;/strong&gt; æˆ– &lt;strong&gt;æ‰‹åŠ¨&lt;/strong&gt; å®Œæˆçš„ã€‚è¦å¯ç”¨è‡ªåŠ¨ sidecar æ³¨å…¥ï¼Œæˆ‘ä»¬éœ€è¦ &lt;code&gt;istio-injection=enabled&lt;/code&gt; é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ æ¥æ ‡è®°å‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl label namespace default istio-injection&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;enabled
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;namespace/default labeled
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ç°åœ¨å¼€å§‹ï¼Œéƒ¨ç½²åˆ°é»˜è®¤å‘½åç©ºé—´çš„æ¯ä¸ª pod éƒ½å°†è·å¾—æ³¨å…¥çš„ sidecarã€‚ä¸ºäº†éªŒè¯è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é€šè¿‡è¿›å…¥åˆ° &lt;code&gt;[istio-mastery]&lt;/code&gt; å­˜å‚¨åº“çš„æ ¹æ–‡ä»¶å¤¹ å¹¶æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ æ¥éƒ¨ç½²ç¤ºä¾‹åº”ç”¨ç¨‹åºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/kube
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;persistentvolumeclaim/sqlite-pvc created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-feedback created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service/sa-feedback created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-frontend created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service/sa-frontend created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-logic created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service/sa-logic created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-web-app created
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;service/sa-web-app created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨éƒ¨ç½²çš„æœåŠ¡ä¸­ï¼Œé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ &lt;code&gt;kubectl get pods&lt;/code&gt; éªŒè¯ pod æœ‰ä¸¤ä¸ªå®¹å™¨ï¼ˆservice å’Œ sidecarï¼‰ï¼Œå¹¶ç¡®ä¿å‡†å¤‡å¥½åï¼Œæˆ‘ä»¬çœ‹åˆ°å€¼â€œ &lt;strong&gt;2/2&lt;/strong&gt; â€è¡¨ç¤ºä¸¤ä¸ªå®¹å™¨éƒ½åœ¨è¿è¡Œã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl get pods
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME                           READY     STATUS    RESTARTS   AGE
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-feedback-55f5dc4d9c-c9wfv   2/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          12m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-frontend-558f8986-hhkj9     2/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          12m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-568498cb4d-2sjwj      2/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          12m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-568498cb4d-p4f8c      2/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          12m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-web-app-599cf47c7c-s7cvd    2/2       Running   &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;          12m
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è§†è§‰å‘ˆç°åœ¨å›¾ 7 ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-7å…¶ä¸­ä¸€ä¸ª-pod-ä¸­çš„-envoy-ä»£ç†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 7.å…¶ä¸­ä¸€ä¸ª Pod ä¸­çš„ Envoy ä»£ç†&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ti9mj209n0dtwf8_hu_a98357f15e2c396a.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ti9mj209n0dtwf8_hu_ca3ee187eae9a222.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ti9mj209n0dtwf8_hu_482819b4db0f755f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ti9mj209n0dtwf8_hu_a98357f15e2c396a.webp&#34;
               width=&#34;347&#34;
               height=&#34;497&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 7.å…¶ä¸­ä¸€ä¸ª Pod ä¸­çš„ Envoy ä»£ç†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œåº”ç”¨ç¨‹åºå¯åŠ¨å¹¶è¿è¡Œï¼Œæˆ‘ä»¬éœ€è¦å…è®¸ä¼ å…¥æµé‡åˆ°è¾¾æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¥å£ç½‘å…³&#34;&gt;å…¥å£ç½‘å…³&lt;/h2&gt;
&lt;p&gt;å…è®¸æµé‡è¿›å…¥é›†ç¾¤çš„æœ€ä½³åšæ³•æ˜¯é€šè¿‡ Istio çš„ &lt;strong&gt;å…¥å£ç½‘å…³&lt;/strong&gt; å°†å…¶è‡ªèº«ç½®äºé›†ç¾¤çš„è¾¹ç¼˜ï¼Œå¹¶åœ¨ä¼ å…¥æµé‡ä¸Šå®ç° Istio çš„åŠŸèƒ½ï¼Œå¦‚è·¯ç”±ï¼Œè´Ÿè½½å‡è¡¡ï¼Œå®‰å…¨æ€§å’Œç›‘æ§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Istio çš„å®‰è£…è¿‡ç¨‹ä¸­ï¼Œ &lt;code&gt;Ingress Gateway&lt;/code&gt; ç»„ä»¶å’Œåœ¨å¤–éƒ¨å…¬å¼€å®ƒçš„æœåŠ¡å·²å®‰è£…åˆ°é›†ç¾¤ä¸­ã€‚è¦è·å–æœåŠ¡å¤–éƒ¨ IPï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl get svc -n istio-system -l &lt;span class=&#34;nv&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ingressgateway
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME                   TYPE           CLUSTER-IP     EXTERNAL-IP
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-ingressgateway   LoadBalancer   10.0.132.127   13.93.30.120
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æœ¬æ–‡çš„åç»­éƒ¨åˆ†ä¸­ï¼Œæˆ‘ä»¬å°†è®¿é—®æ­¤ IP ä¸Šçš„åº”ç”¨ç¨‹åºï¼ˆç§°ä¸º EXTERNAL-IPï¼‰ï¼Œä¸ºæ–¹ä¾¿èµ·è§ï¼Œé€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†å…¶ä¿å­˜åœ¨å˜é‡ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nv&#34;&gt;EXTERNAL_IP&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get svc -n istio-system &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;istio-ingressgateway &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].status.loadBalancer.ingress[0].ip}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæ‚¨åœ¨æµè§ˆå™¨ä¸­è®¿é—®æ­¤ IP å¹¶ä¸”æ‚¨å°†æ”¶åˆ°æœåŠ¡ä¸å¯ç”¨é”™è¯¯ï¼Œåˆ™ &lt;strong&gt;é»˜è®¤æƒ…å†µä¸‹ Istio å°†é˜»æ­¢ä»»ä½•ä¼ å…¥æµé‡&lt;/strong&gt;ï¼Œç›´åˆ°æˆ‘ä»¬å®šä¹‰ç½‘å…³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç½‘å…³èµ„æº&#34;&gt;ç½‘å…³èµ„æº&lt;/h2&gt;
&lt;p&gt;ç½‘å…³æ˜¯åœ¨æˆ‘ä»¬çš„é›†ç¾¤ä¸­å®‰è£… Istio æ—¶å®šä¹‰çš„ Kubernetes è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼Œä½¿æˆ‘ä»¬èƒ½å¤ŸæŒ‡å®šæˆ‘ä»¬å¸Œæœ›å…è®¸ä¼ å…¥æµé‡çš„ç«¯å£ï¼Œåè®®å’Œä¸»æœºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›å…è®¸æ‰€æœ‰ä¸»æœºåœ¨ç«¯å£ 80 ä¸Šä½¿ç”¨ HTTP æµé‡ã€‚è¾¾åˆ°ä»¥ä¸‹å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é™¤äº†é€‰æ‹©å™¨&lt;code&gt;istioï¼šingressgateway&lt;/code&gt;ä¹‹å¤–ï¼Œæ‰€æœ‰é…ç½®éƒ½æ˜¯ä¸éœ€è¦è¯´æ˜çš„ã€‚ä½¿ç”¨æ­¤é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šåº”ç”¨é…ç½®çš„ Ingress Gatewayï¼Œåœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œå®ƒæ˜¯å®‰è£…åœ¨ Istio è®¾ç½®ä¸Šçš„é»˜è®¤å…¥å£ç½‘å…³æ§åˆ¶å™¨ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/http-gateway.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gateway.networking.istio.io/http-gateway created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç½‘å…³ç°åœ¨å…è®¸åœ¨ç«¯å£ 80 ä¸­è¿›è¡Œè®¿é—®ï¼Œä½†å®ƒä¸çŸ¥é“åœ¨ä½•å¤„è·¯ç”±è¯·æ±‚ã€‚è¿™éœ€è¦ä½¿ç”¨&lt;strong&gt;Virtual Service&lt;/strong&gt;æ¥å®ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;virtualservice-èµ„æº&#34;&gt;VirtualService èµ„æº&lt;/h2&gt;
&lt;p&gt;VirtualService æŒ‡ç¤º Ingress Gateway å¦‚ä½•è·¯ç”±å…è®¸è¿›å…¥é›†ç¾¤çš„è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬åº¦è¿‡å³å°†åˆ°æ¥çš„åº”ç”¨ç¨‹åºè¯·æ±‚ &lt;strong&gt;HTTP ç½‘å…³&lt;/strong&gt; å¿…é¡»è¢«è·¯ç”±åˆ° &lt;code&gt;sa-frontend&lt;/code&gt;ï¼Œ&lt;code&gt;sa-web-app&lt;/code&gt; å’Œ&lt;code&gt;sa-feedback&lt;/code&gt; æœåŠ¡ï¼ˆå‡ºäº†å¦‚å›¾ 8ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-8ä½¿ç”¨-virtualservices-é…ç½®çš„è·¯ç”±&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 8.ä½¿ç”¨ VirtualServices é…ç½®çš„è·¯ç”±&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2n39aj20m80gk75x_hu_891332d924f252ce.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2n39aj20m80gk75x_hu_27ee6da56ca958f9.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2n39aj20m80gk75x_hu_cae726e33998eddb.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2n39aj20m80gk75x_hu_891332d924f252ce.webp&#34;
               width=&#34;760&#34;
               height=&#34;566&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 8.ä½¿ç”¨ VirtualServices é…ç½®çš„è·¯ç”±
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬åˆ†è§£ä»¥ä¸‹è·¯ç”±åˆ° SA-Frontend çš„è¯·æ±‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;**/**&lt;/code&gt; åº”å°†&lt;strong&gt;ç²¾ç¡®è·¯å¾„&lt;/strong&gt; è·¯ç”±åˆ° SA-Frontend ä»¥è·å– Index.html&lt;/li&gt;
&lt;li&gt;&lt;code&gt;**/static/***&lt;/code&gt; åº”å°†&lt;strong&gt;å‰ç¼€è·¯å¾„&lt;/strong&gt; è·¯ç”±åˆ° SA-Frontend ä»¥è·å–å‰ç«¯æ‰€éœ€çš„ä»»ä½•é™æ€æ–‡ä»¶ï¼Œå¦‚ Css å’Œ JavaScript æ–‡ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„è·¯å¾„&lt;/strong&gt;&lt;code&gt;&#39;^.*\.(ico|png|jpg)$&#39;&lt;/code&gt; åº”è¯¥è·¯ç”±åˆ° SA-Frontendï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå›¾åƒèµ„æºè·¯ç”±åˆ°å‰ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ˜¯é€šè¿‡ä»¥ä¸‹é…ç½®å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-external-services&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;http-gateway                     &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/callback&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;regex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;^.*\.(ico|png|jpg)$&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-frontend            &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„é‡ç‚¹æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ­¤ VirtualService é€‚ç”¨äºé€šè¿‡&lt;strong&gt;http ç½‘å…³&lt;/strong&gt; å‘å‡ºçš„è¯·æ±‚&lt;/li&gt;
&lt;li&gt;Destination å®šä¹‰è¯·æ±‚è·¯ç”±åˆ°çš„æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šä¸Šé¢çš„é…ç½®ä½äºæ–‡ä»¶ä¸­ &lt;code&gt;sa-virtualservice-external.yaml&lt;/code&gt;ï¼Œå®ƒè¿˜åŒ…å«ç”¨äºè·¯ç”±åˆ° SA-WebApp å’Œ SA-Feedback çš„é…ç½®ï¼Œä½†ä¸ºç®€æ´èµ·è§ï¼Œå·²ç¼©çŸ­ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨ VirtualServiceï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/sa-virtualservice-external.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;virtualservice.networking.istio.io/sa-external-services created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå½“æˆ‘ä»¬åº”ç”¨ Istio èµ„æºæ—¶ï¼ŒKubernetes API æœåŠ¡å™¨ä¼šåˆ›å»ºä¸€ä¸ªç”± Istio æ§åˆ¶å¹³é¢æ¥æ”¶çš„äº‹ä»¶ï¼Œç„¶åå°†æ–°é…ç½®åº”ç”¨äºæ¯ä¸ª pod çš„ Envoy ä»£ç†ã€‚Ingress Gateway æ§åˆ¶å™¨æ˜¯å¦ä¸€ä¸ªç”±æ§åˆ¶å¹³é¢é…ç½®çš„ Envoyï¼Œå¦‚å›¾ 9 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-9é…ç½®-istio-ingressgateway-æ¥è·¯ç”±è¯·æ±‚&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 9.é…ç½® Istio-IngressGateway æ¥è·¯ç”±è¯·æ±‚&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1t95sj20m80i2jt1_hu_30d66e6384f72e7.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1t95sj20m80i2jt1_hu_e2773980e0a56bc9.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1t95sj20m80i2jt1_hu_c347d0f5c96d4950.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1t95sj20m80i2jt1_hu_30d66e6384f72e7.webp&#34;
               width=&#34;760&#34;
               height=&#34;618&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 9.é…ç½® &lt;strong&gt;Istio-IngressGateway&lt;/strong&gt; æ¥è·¯ç”±è¯·æ±‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨å¯ä»¥è®¿é—® Sentiment Analysis åº”ç”¨ç¨‹åºäº† &lt;code&gt;http://{EXTERNAL-IP}/&lt;/code&gt; ã€‚å¦‚æœæ‚¨è·å¾— Not Found çŠ¶æ€ï¼Œè¯·ä¸è¦æ‹…å¿ƒ &lt;em&gt;æœ‰æ—¶éœ€è¦é…ç½®ç”Ÿæ•ˆæ‰èƒ½æ›´æ–° envoy çš„ç¼“å­˜&lt;/em&gt; ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è½¬åˆ°ä¸‹ä¸€éƒ¨åˆ†ä¹‹å‰ï¼Œè¯·ä½¿ç”¨è¯¥åº”ç”¨ç¨‹åºç”Ÿæˆä¸€äº›æµé‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kiali---å¯è§‚å¯Ÿæ€§&#34;&gt;Kiali - å¯è§‚å¯Ÿæ€§&lt;/h2&gt;
&lt;p&gt;è¦è®¿é—® Kiali çš„ Admin UIï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl port-forward &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get pod -n istio-system -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;kiali &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -n istio-system &lt;span class=&#34;m&#34;&gt;20001&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¹¶ &lt;a href=&#34;http://localhost:20001/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost:20001/&lt;/a&gt; ä½¿ç”¨â€œadminâ€ï¼ˆä¸å«å¼•å·ï¼‰ä¸ºç”¨æˆ·å’Œå¯†ç æ‰“å¼€ç™»å½•ã€‚æœ‰å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ£€æŸ¥ Istio ç»„ä»¶çš„é…ç½®ï¼Œæ ¹æ®æ‹¦æˆªç½‘ç»œè¯·æ±‚å’Œå›ç­”æ”¶é›†çš„ä¿¡æ¯å¯è§†åŒ–æœåŠ¡ï¼Œâ€œè°åœ¨è°ƒç”¨è°ï¼Ÿâ€ï¼Œâ€œå“ªä¸ªç‰ˆæœ¬çš„æœåŠ¡æœ‰æ•…éšœï¼Ÿâ€ç­‰ç­‰ï¼ŒèŠ±ä¸€äº›æ—¶é—´æ£€éªŒ Kiali çš„åŠŸèƒ½ï¼Œç„¶åå†è½¬åˆ°ä¸‹ä¸€èŠ‚ï¼Œç”¨ Grafana å¯è§†åŒ–æŒ‡æ ‡ï¼&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-10-kiali---æœåŠ¡å¯è§‚å¯Ÿæ€§&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 10. Kiali - æœåŠ¡å¯è§‚å¯Ÿæ€§&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu28njyj20m80c7mye_hu_1ef53bdd58786bf.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu28njyj20m80c7mye_hu_1de793b4dede9a37.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu28njyj20m80c7mye_hu_d81ea3ac931f1d2b.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu28njyj20m80c7mye_hu_1ef53bdd58786bf.webp&#34;
               width=&#34;760&#34;
               height=&#34;417&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 10. Kiali - æœåŠ¡å¯è§‚å¯Ÿæ€§
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;grafana---åº¦é‡å¯è§†åŒ–&#34;&gt;Grafana - åº¦é‡å¯è§†åŒ–&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Grafana å°† Istio æ”¶é›†çš„æŒ‡æ ‡åˆ’åˆ†ä¸º Prometheus å’Œ Visualizedã€‚è¦è®¿é—® Grafana çš„ Admin UIï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶æ‰“å¼€&lt;a href=&#34;http://localhost:3000&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost:3000&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl -n istio-system port-forward &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl -n istio-system get pod -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;grafana &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;={&lt;/span&gt;.items&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;0&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;.metadata.name&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;3000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å·¦ä¸Šè§’å•å‡»èœå•&lt;strong&gt;Home&lt;/strong&gt; å¹¶é€‰æ‹© &lt;strong&gt;Istio Service Dashboard&lt;/strong&gt; å¹¶åœ¨å·¦ä¸Šè§’é€‰æ‹©ä»¥&lt;strong&gt;sa-web-app&lt;/strong&gt;å¼€å¤´çš„æœåŠ¡ï¼Œæ‚¨å°†çœ‹åˆ°æ”¶é›†çš„æŒ‡æ ‡ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1z8vbj20m80cnabv_hu_57f8441a42b4cdb7.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1z8vbj20m80cnabv_hu_3f32b79cfa3c222e.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1z8vbj20m80cnabv_hu_6d7a1051195ae1e5.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1z8vbj20m80cnabv_hu_57f8441a42b4cdb7.webp&#34;
               width=&#34;760&#34;
               height=&#34;432&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘çš„å¦ˆå‘€ï¼Œè¿™æ˜¯ä¸€ä¸ªæ²¡æœ‰ä»»ä½•æ•°æ®çš„è§†å›¾ï¼Œç®¡ç†å±‚æ°¸è¿œä¸ä¼šèµåŒè¿™ä¸€ç‚¹ã€‚è®©æˆ‘ä»¬é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ç”Ÿæˆä¸€äº›è´Ÿè½½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; true&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    curl -i http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/sentiment &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Content-type: application/json&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;sentence&amp;#34;: &amp;#34;I love yogobella&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    sleep .8&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰æ›´æ¼‚äº®çš„å›¾è¡¨ï¼Œæ­¤å¤–ï¼Œæˆ‘ä»¬æ‹¥æœ‰ Prometheus ç”¨äºç›‘æ§å’Œ Grafana ç”¨äºå¯è§†åŒ–æŒ‡æ ‡è¿™äº›ä»¤äººæƒŠè®¶çš„å·¥å…·ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿéšæ—¶äº†è§£æœåŠ¡çš„æ€§èƒ½ï¼Œå¥åº·çŠ¶å†µï¼Œå‡çº§æˆ–é™çº§ï¼&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬å°†ç ”ç©¶æ•´ä¸ªæœåŠ¡ä¸­çš„è·Ÿè¸ªè¯·æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;jaeger---è¿½è¸ª&#34;&gt;Jaeger - è¿½è¸ª&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦è·Ÿè¸ªï¼Œå› ä¸ºæˆ‘ä»¬æ‰€æ‹¥æœ‰çš„æœåŠ¡è¶Šå¤šï¼Œå°±è¶Šéš¾æ‰¾å‡ºå¤±è´¥çš„åŸå› ã€‚æˆ‘ä»¬æ¥çœ‹ä¸‹é¢å›¾ç‰‡ä¸­çš„ç®€å•æ¡ˆä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-12é€šå¸¸éšæœºå¤±è´¥çš„è¯·æ±‚&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 12.é€šå¸¸éšæœºå¤±è´¥çš„è¯·æ±‚&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ht7hj20m804fjrw_hu_7c1469ff0fc4837e.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ht7hj20m804fjrw_hu_ef9260060964f773.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ht7hj20m804fjrw_hu_5f223f19c3ba6410.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2ht7hj20m804fjrw_hu_7c1469ff0fc4837e.webp&#34;
               width=&#34;760&#34;
               height=&#34;151&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 12.é€šå¸¸éšæœºå¤±è´¥çš„è¯·æ±‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¯·æ±‚è¿›å…¥ï¼Œå¤±è´¥ï¼Œ&lt;em&gt;åŸå› æ˜¯ä»€ä¹ˆ&lt;/em&gt;ï¼Ÿ&lt;em&gt;ç¬¬ä¸€æ¬¡æœåŠ¡&lt;/em&gt;ï¼Ÿ&lt;em&gt;è¿˜æ˜¯ç¬¬äºŒä¸ª&lt;/em&gt;ï¼Ÿä¸¤è€…éƒ½æœ‰ä¾‹å¤–æƒ…å†µï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¯ä¸ªæ—¥å¿—ã€‚ä½ å‘ç°è‡ªå·±è¿™ä¹ˆåšäº†å¤šå°‘æ¬¡ï¼Ÿæˆ‘ä»¬çš„å·¥ä½œæ›´åƒæ˜¯è½¯ä»¶ä¾¦æ¢è€Œä¸æ˜¯å¼€å‘äººå‘˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å¾®æœåŠ¡ä¸­çš„ä¸€ä¸ªæ™®éé—®é¢˜ï¼Œå®ƒä½¿ç”¨åˆ†å¸ƒå¼è·Ÿè¸ªç³»ç»Ÿè§£å†³ï¼Œå…¶ä¸­æœåŠ¡å°†å”¯ä¸€çš„ header ç›¸äº’ä¼ é€’ï¼Œç„¶åå°†æ­¤ä¿¡æ¯è½¬å‘åˆ°è¯·æ±‚è·Ÿè¸ªæ”¾åœ¨ä¸€èµ·çš„åˆ†å¸ƒå¼è·Ÿè¸ªç³»ç»Ÿã€‚ä¸€ä¸ªä¾‹å­å¦‚å›¾ 13 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-13ç”¨äºæ ‡è¯†è¯·æ±‚èŒƒå›´çš„-traceid&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 13.ç”¨äºæ ‡è¯†è¯·æ±‚èŒƒå›´çš„ TraceId&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2k4zsj20rs06uwfz_hu_83c25da89419d301.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2k4zsj20rs06uwfz_hu_19da2936ab9d6533.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2k4zsj20rs06uwfz_hu_c806aed838aafce4.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2k4zsj20rs06uwfz_hu_83c25da89419d301.webp&#34;
               width=&#34;760&#34;
               height=&#34;187&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 13.ç”¨äºæ ‡è¯†è¯·æ±‚èŒƒå›´çš„ TraceId
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Istio ä½¿ç”¨ Jaeger Tracer å®ç° OpenTracing APIï¼Œè¿™æ˜¯ä¸€ä¸ªç‹¬ç«‹äºä¾›åº”å•†çš„æ¡†æ¶ã€‚è¦è®¿é—® Jaegers UIï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl port-forward -n istio-system &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get pod -n istio-system -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;jaeger &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{.items[0].metadata.name}&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;16686&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨ &lt;a href=&#34;http://localhost:16686/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost:16686&lt;/a&gt; ä¸­æ‰“å¼€ UIï¼Œé€‰æ‹© &lt;strong&gt;sa-web-app&lt;/strong&gt; æœåŠ¡ï¼Œ &lt;em&gt;å¦‚æœä¸‹æ‹‰åˆ—è¡¨ä¸­æœªæ˜¾ç¤ºè¯¥&lt;/em&gt;æœåŠ¡ï¼Œ&lt;em&gt;åˆ™åœ¨é¡µé¢ä¸Šç”Ÿæˆä¸€äº›æ´»åŠ¨å¹¶ç‚¹å‡»åˆ·æ–°&lt;/em&gt; ã€‚éšåå•å‡»è¯¥æŒ‰é’® &lt;strong&gt;æŸ¥æ‰¾ç—•è¿¹&lt;/strong&gt;ï¼Œè¿™æ˜¾ç¤ºæœ€è¿‘çš„ç—•è¿¹ï¼Œé€‰æ‹©ä»»ä½•å’Œæ‰€æœ‰çš„ç—•è¿¹çš„è¯¦ç»†åˆ†ç±»å°†ä¼šæ˜¾ç¤ºï¼Œå¦‚å›¾ 14 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-14-jaeger---è¯·æ±‚è·Ÿè¸ª&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 14. Jaeger - è¯·æ±‚è·Ÿè¸ª&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1ca17j20rs0bsgnr_hu_e3d707a5c53c5864.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1ca17j20rs0bsgnr_hu_b6fd982ebaf0d7c1.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1ca17j20rs0bsgnr_hu_80c744f19e09646d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1ca17j20rs0bsgnr_hu_e3d707a5c53c5864.webp&#34;
               width=&#34;760&#34;
               height=&#34;322&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 14. Jaeger - è¯·æ±‚è·Ÿè¸ª
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è·Ÿè¸ªæ˜¾ç¤ºï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¯·æ±‚æ¥åˆ° &lt;strong&gt;istio-ingressgateway&lt;/strong&gt; ï¼ˆå®ƒæ˜¯ç¬¬ä¸€æ¬¡ä¸å…¶ä¸­ä¸€ä¸ªæœåŠ¡è”ç³»ï¼Œå› æ­¤å¯¹äºç”Ÿæˆè·Ÿè¸ª ID çš„è¯·æ±‚ï¼‰ç„¶åç½‘å…³å°†è¯·æ±‚è½¬å‘ç»™ &lt;code&gt;sa-web-app&lt;/code&gt; æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ &lt;code&gt;sa-web-app&lt;/code&gt; æœåŠ¡ä¸­ï¼Œè¯·æ±‚ç”± Envoysidecar æ‹¾å–å¹¶åˆ›å»ºä¸€ä¸ª spanï¼ˆè¿™å°±æ˜¯æˆ‘ä»¬åœ¨è·Ÿè¸ªä¸­çœ‹åˆ°å®ƒçš„åŸå› ï¼‰å¹¶è½¬å‘åˆ° &lt;code&gt;sa-web-app&lt;/code&gt; å®¹å™¨å®ä¾‹ã€‚&lt;/li&gt;
&lt;li&gt;è¿™é‡Œæ–¹æ³• &lt;strong&gt;sentimentAnalysis&lt;/strong&gt; å¤„ç†è¯·æ±‚ã€‚è¿™äº›è·Ÿè¸ªç”±åº”ç”¨ç¨‹åºç”Ÿæˆï¼Œè¿™æ„å‘³ç€éœ€è¦æ›´æ”¹ä»£ç ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä» POST è¯·æ±‚&lt;code&gt;sa-logic&lt;/code&gt;å¼€å§‹çš„ä½ç½®ã€‚è·Ÿè¸ª ID éœ€è¦&lt;code&gt;sa-web-app&lt;/code&gt;ä¼ é€’ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;5. &amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt; ï¼šåœ¨ç¬¬ 4 ç‚¹ï¼Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºéœ€è¦è·å– Istio ç”Ÿæˆçš„ headerï¼Œå¹¶åœ¨ä¸‹ä¸€ä¸ªè¯·æ±‚æ—¶å°†å…¶ä¼ é€’ä¸‹æ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1odduj20m8055q3r_hu_40706f4dc6eb9360.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1odduj20m8055q3r_hu_27d62ee2bb29e37.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1odduj20m8055q3r_hu_b29a353120885bd0.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1odduj20m8055q3r_hu_40706f4dc6eb9360.webp&#34;
               width=&#34;760&#34;
               height=&#34;176&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Istio åšä¸»è¦çš„ç¹é‡å·¥ä½œï¼Œå› ä¸ºå®ƒåœ¨ä¼ å…¥çš„è¯·æ±‚ä¸Šç”Ÿæˆ headerï¼Œåœ¨æ¯ä¸ª sidecar ä¸Šåˆ›å»ºæ–°çš„ spanï¼Œä¼ é€’å®ƒä»¬ï¼Œä½†æ˜¯å¦‚æœæ²¡æœ‰æˆ‘ä»¬çš„æœåŠ¡ä¼ é€’ headerï¼Œæˆ‘ä»¬å°†å¤±å»è¯·æ±‚çš„å®Œæ•´è·Ÿè¸ªã€‚&lt;/p&gt;
&lt;p&gt;è¦ä¼ é€’çš„ header æ˜¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-request-id
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-b3-traceid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-b3-spanid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-b3-parentspanid
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-b3-sampled
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-b3-flags
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;x-ot-span-context
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°½ç®¡è¿™æ˜¯ä¸€é¡¹ç®€å•çš„ä»»åŠ¡ï¼Œä½†å·²ç»æœ‰&lt;a href=&#34;https://github.com/opentracing-contrib&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®¸å¤šåº“&lt;/a&gt; å¯ä»¥ç®€åŒ–è¿™ä¸€è¿‡ç¨‹ï¼Œä¾‹å¦‚åœ¨ &lt;code&gt;sa-web-app&lt;/code&gt;æœåŠ¡ä¸­ï¼Œ &lt;strong&gt;RestTemplate&lt;/strong&gt; å®¢æˆ·ç«¯é€šè¿‡ç®€å•åœ°&lt;a href=&#34;https://github.com/rinormaloku/istio-mastery/blob/master/sa-webapp/pom.xml#L36-L47&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¾èµ–é¡¹ä¸­&lt;/a&gt; æ·»åŠ  Jaeger å’Œ OpenTracing åº“æ¥ä¼ é€’ headerã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ³¨æ„ï¼šSentiment Analysis åº”ç”¨ç¨‹åºå±•ç¤ºäº† Flaskï¼ŒSpring å’Œ ASP.NET Core çš„å®ç°ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œåœ¨è°ƒæŸ¥æˆ‘ä»¬å¼€ç®±å³ç”¨ï¼ˆæˆ–éƒ¨åˆ†å¼€ç®±å³ç”¨ï¼‰ä¹‹åï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™é‡Œçš„ä¸»é¢˜ï¼Œç»†ç²’åº¦è·¯ç”±ï¼Œç®¡ç†ç½‘ç»œæµé‡ï¼Œå®‰å…¨æ€§ç­‰ç­‰ï¼&lt;/p&gt;
&lt;h2 id=&#34;æµé‡ç®¡ç†&#34;&gt;æµé‡ç®¡ç†&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Envoy çš„ Istio ä¸ºæ‚¨çš„é›†ç¾¤æä¾›äº†è®¸å¤šæ–°åŠŸèƒ½ï¼Œä»è€Œå®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;åŠ¨æ€è¯·æ±‚è·¯ç”±&lt;/strong&gt; ï¼šCanary éƒ¨ç½²ï¼ŒA/B æµ‹è¯•ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è´Ÿè½½å‡è¡¡ï¼š&lt;/strong&gt; ç®€å•å’Œä¸€è‡´çš„å“ˆå¸Œå¹³è¡¡ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•…éšœæ¢å¤&lt;/strong&gt; ï¼šè¶…æ—¶ï¼Œé‡è¯•ï¼Œç†”æ–­å™¨ï¼Œ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•…éšœæ³¨å…¥&lt;/strong&gt; ï¼šå»¶è¿Ÿï¼Œä¸­æ­¢è¯·æ±‚ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æœ¬æ–‡çš„åºåˆ—ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­å±•ç¤ºè¿™äº›åŠŸèƒ½ï¼Œå¹¶åœ¨æ­¤è¿‡ç¨‹ä¸­ä»‹ç»ä¸€äº›æ–°æ¦‚å¿µã€‚æˆ‘ä»¬å°†ç ”ç©¶çš„ç¬¬ä¸€ä¸ªæ¦‚å¿µæ˜¯ DestinationRulesï¼Œå¹¶ä½¿ç”¨é‚£äº›æˆ‘ä»¬å°†å¯ç”¨ A/B æµ‹è¯•çš„æ¦‚å¿µã€‚&lt;/p&gt;
&lt;h2 id=&#34;abæµ‹è¯•---å®è·µä¸­çš„ç›®çš„åœ°è§„åˆ™&#34;&gt;A/Bæµ‹è¯• - å®è·µä¸­çš„ç›®çš„åœ°è§„åˆ™&lt;/h2&gt;
&lt;p&gt;å½“æˆ‘ä»¬æœ‰ä¸¤ä¸ªç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºï¼ˆé€šå¸¸ç‰ˆæœ¬è§†è§‰ä¸Šæœ‰æ‰€ä¸åŒï¼‰æ—¶ä½¿ç”¨ A/B æµ‹è¯•ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¸æ˜¯ 100ï¼…è‚¯å®šä¼šå¢åŠ ç”¨æˆ·äº¤äº’ï¼Œå› æ­¤æˆ‘ä»¬åŒæ—¶å°è¯•ä¸¤ä¸ªç‰ˆæœ¬å¹¶æ”¶é›†æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥éƒ¨ç½²æ¼”ç¤ºA/Bæµ‹è¯•æ‰€éœ€çš„å‰ç«¯çš„ç¬¬äºŒä¸ªç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/kube/ab-testing/sa-frontend-green-deployment.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-frontend-green created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç»¿è‰²ç‰ˆæœ¬çš„éƒ¨ç½²æ¸…å•æœ‰ä¸¤ç‚¹ä¸åŒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¯¥ image åŸºäºä¸åŒçš„æ ‡ç­¾ï¼š &lt;code&gt;istio-green&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;pod æ ‡æœ‰ &lt;code&gt;version: green&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è€Œä½œä¸ºåŒæ–¹éƒ¨ç½²åœ¨æ ‡ç­¾ &lt;code&gt;app: sa-frontend&lt;/code&gt; é€šè¿‡è™šæ‹ŸæœåŠ¡è·¯ç”±çš„è¯·æ±‚ &lt;code&gt;sa-external-services&lt;/code&gt;  çš„æœåŠ¡ &lt;code&gt;sa-frontend&lt;/code&gt; ä¼šè¢«è½¬å‘åˆ°æ‰€æœ‰çš„å®ä¾‹ï¼Œå¹¶å°†äºè´Ÿè½½é‡‡ç”¨å¾ªç¯ç®—æ³•ï¼Œè¿™å°†å¯¼è‡´åœ¨å›¾ 16 ä¸­æå‡ºçš„è´Ÿè½½å‡è¡¡é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-16æ‰¾ä¸åˆ°è¯·æ±‚çš„æ–‡ä»¶&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 16.æ‰¾ä¸åˆ°è¯·æ±‚çš„æ–‡ä»¶&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu30v6lj20m80do761_hu_b8de091c38ca6512.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu30v6lj20m80do761_hu_1d8840e7c71b903c.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu30v6lj20m80do761_hu_53a18271b2efd745.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu30v6lj20m80do761_hu_b8de091c38ca6512.webp&#34;
               width=&#34;760&#34;
               height=&#34;467&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 16.æ‰¾ä¸åˆ°è¯·æ±‚çš„æ–‡ä»¶
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ‰¾ä¸åˆ°è¿™äº›æ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬åœ¨åº”ç”¨ç¨‹åºçš„ä¸åŒç‰ˆæœ¬ä¸­çš„å‘½åæ–¹å¼ä¸åŒã€‚è®©æˆ‘ä»¬éªŒè¯ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl --silent http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/ &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;&amp;#39;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/static/css/main.c7071b22.css
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/static/js/main.059f8e9c.js
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl --silent http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/ &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;&amp;#39;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep main
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/static/css/main.f87cd8c9.css
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;/static/js/main.f7659dbb.js
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ„å‘³ç€è¯·æ±‚ä¸€ä¸ªç‰ˆæœ¬çš„é™æ€æ–‡ä»¶çš„&lt;code&gt;index.html&lt;/code&gt;å¯ä»¥è¢«è´Ÿè½½å‡è¡¡åˆ°æä¾›å¦ä¸€ä¸ªç‰ˆæœ¬çš„ podï¼Œå…¶ä¸­å¯ä»¥ç†è§£çš„æ˜¯å…¶ä»–æ–‡ä»¶ä¸å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ï¼Œä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºæ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å¼•å…¥é™åˆ¶â€œä¸º index.html æœåŠ¡çš„åº”ç”¨ç¨‹åºçš„ç‰ˆæœ¬ï¼Œå¿…é¡»ä¸ºåç»­è¯·æ±‚æä¾›æœåŠ¡â€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ Consistent Hash Loadbalancing æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œè¿™ &lt;strong&gt;æ˜¯&lt;/strong&gt; ä½¿ç”¨é¢„å®šä¹‰å±æ€§ï¼ˆä¾‹å¦‚ HTTP headerï¼‰&lt;strong&gt;å°†æ¥è‡ªåŒä¸€å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘åˆ°åŒä¸€åç«¯å®ä¾‹çš„è¿‡ç¨‹&lt;/strong&gt;ã€‚ç”± DestionatioRules æä¾›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;destinationrules&#34;&gt;DestinationRules&lt;/h2&gt;
&lt;p&gt;åœ¨ &lt;strong&gt;VirtualService&lt;/strong&gt; å°†è¯·æ±‚è·¯ç”±åˆ°æ­£ç¡®çš„æœåŠ¡ä¹‹åï¼Œç„¶åä½¿ç”¨ &lt;strong&gt;DestinationRules&lt;/strong&gt;ï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šé€‚ç”¨äºæ­¤æœåŠ¡å®ä¾‹çš„æµé‡çš„ç­–ç•¥ï¼Œå¦‚å›¾ 17 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-17ä½¿ç”¨-istio-èµ„æºçš„æµé‡ç®¡ç†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 17.ä½¿ç”¨ Istio èµ„æºçš„æµé‡ç®¡ç†&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2yjsuj20rs09e75i_hu_21c0ad2442f18e81.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2yjsuj20rs09e75i_hu_f50bee4bc67a3fba.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2yjsuj20rs09e75i_hu_f21ba19e3755ebb6.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2yjsuj20rs09e75i_hu_21c0ad2442f18e81.webp&#34;
               width=&#34;760&#34;
               height=&#34;257&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 17.ä½¿ç”¨ Istio èµ„æºçš„æµé‡ç®¡ç†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå›¾ 17 ä»¥æ˜“äºç†è§£çš„æ–¹å¼å¯è§†åŒ– Istio èµ„æºå¦‚ä½•å½±å“ç½‘ç»œæµé‡ã€‚ä½†æ˜¯ï¼Œå‡†ç¡®åœ°è¯´ï¼Œå†³å®šå°†è¯·æ±‚è½¬å‘åˆ°å“ªä¸ªå®ä¾‹æ˜¯ç”± CRD é…ç½®çš„ Ingress Gateway çš„ Envoy åšå‡ºçš„ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ç›®æ ‡è§„åˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å°†è´Ÿè½½å‡è¡¡é…ç½®ä¸ºå…·æœ‰ä¸€è‡´æ€§å“ˆå¸Œï¼Œå¹¶ç¡®ä¿åŒä¸€ç”¨æˆ·ç”±åŒä¸€æœåŠ¡å®ä¾‹å“åº”ã€‚é€šè¿‡ä»¥ä¸‹é…ç½®å®ç°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DestinationRule&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-frontend&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-frontend&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;loadBalancer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;consistentHash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;httpHeaderName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;version  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æ ¹æ®â€œversionâ€æ ‡å¤´çš„å†…å®¹ç”Ÿæˆä¸€è‡´çš„å“ˆå¸Œã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åº”ç”¨é…ç½®å¹¶å°è¯•ä¸€ä¸‹ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/ab-testing/destinationrule-sa-frontend.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;destinationrule.networking.istio.io/sa-frontend created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶éªŒè¯åœ¨æŒ‡å®šç‰ˆæœ¬ header æ—¶æ˜¯å¦è·å¾—ç›¸åŒçš„æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl --silent -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;version: yogo&amp;#34;&lt;/span&gt; http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/ &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; tr &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;&amp;#39;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep main
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šä¸ºäº†æ–¹ä¾¿åœ¨æµè§ˆå™¨ä¸­è¿›è¡Œæµ‹è¯•ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤ &lt;a href=&#34;https://chrome.google.com/webstore/detail/modheader/idgpnmonknjnojddfkpgkljpfnnfcklj&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chrome æ‰©å±•ç¨‹åº&lt;/a&gt; å‘ç‰ˆæœ¬ header æ·»åŠ ä¸åŒçš„å€¼ï¼Œã€‚&lt;/p&gt;
&lt;p&gt;DestinationRules å…·æœ‰æ›´å¤š LoadBalancing åŠŸèƒ½ï¼Œæ‰€æœ‰è¯¦ç»†ä¿¡æ¯éƒ½å¯ä»¥æŸ¥çœ‹ &lt;a href=&#34;https://preliminary.istio.io/docs/reference/config/istio.networking.v1alpha3.html#LoadBalancerSettings&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç»§ç»­æ›´è¯¦ç»†åœ°æ¢ç´¢ VirtualService ä¹‹å‰ï¼Œè¯·æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ é™¤åº”ç”¨ç¨‹åºçš„ç»¿è‰²ç‰ˆæœ¬å’Œç›®æ ‡è§„åˆ™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl delete -f resource-manifests/kube/ab-testing/sa-frontend-green-deployment.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-frontend-green&amp;#34;&lt;/span&gt; deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl delete -f resource-manifests/istio/ab-testing/destinationrule-sa-frontend.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;destinationrule.networking.istio.io â€œsa-frontendâ€ deleted
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;é•œåƒæœåŠ¡---å®è·µä¸­çš„è™šæ‹ŸæœåŠ¡&#34;&gt;é•œåƒæœåŠ¡ - å®è·µä¸­çš„è™šæ‹ŸæœåŠ¡&lt;/h2&gt;
&lt;p&gt;å½“æˆ‘ä»¬æƒ³è¦æµ‹è¯•ç”Ÿäº§ä¸­çš„æ›´æ”¹ä½†ä¸å½±å“æœ€ç»ˆç”¨æˆ·æ—¶ï¼Œä¼šä½¿ç”¨å½±å­æˆ–é•œåƒï¼Œå› æ­¤æˆ‘ä»¬å°†è¯·æ±‚é•œåƒåˆ°å…·æœ‰æ›´æ”¹å¹¶è¯„ä¼°å®ƒçš„ç¬¬äºŒä¸ªå®ä¾‹ä¸­ã€‚ &lt;em&gt;æ›´ç®€å•çš„æ˜¯ï¼Œå½“ä½ çš„ä¸€ä¸ªåŒäº‹é€‰æ‹©æœ€å…³é”®çš„é—®é¢˜å¹¶åˆ¶ä½œä¸€ä¸ªè¶…å¤§çš„åˆå¹¶è¯·æ±‚ï¼Œå¹¶ä¸”æ²¡äººèƒ½çœŸæ­£å®¡æŸ¥ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¦æµ‹è¯•æ­¤åŠŸèƒ½ï¼Œå¯ä»¥ é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ åˆ›å»º SA-Logic çš„ç¬¬äºŒä¸ªå®ä¾‹ï¼ˆ &lt;em&gt;è¿™æ˜¯ buggy çš„&lt;/em&gt; ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/kube/shadowing/sa-logic-service-buggy.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions/sa-logic-buggy created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å¹¶éªŒè¯æ‰€æœ‰å®ä¾‹éƒ½æ ‡æœ‰ç›¸åº”çš„ç‰ˆæœ¬ï¼Œå¦å¤–è¿˜æœ‰&lt;code&gt;app=sa-logic&lt;/code&gt;æ ‡è®°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl get pods -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sa-logic --show-labels
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME                              READY   LABELS
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-568498cb4d-2sjwj         2/2     &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sa-logic,version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-568498cb4d-p4f8c         2/2     &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sa-logic,version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-buggy-76dff55847-2fl66   2/2     &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sa-logic,version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;sa-logic-buggy-76dff55847-kx8zz   2/2     &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sa-logic,version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v2
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“ &lt;code&gt;sa-logic&lt;/code&gt; æœåŠ¡ç›®æ ‡ pod æ ‡è®°ä¸º &lt;code&gt;app=sa-logic&lt;/code&gt;æ—¶ï¼Œä»»ä½•ä¼ å…¥è¯·æ±‚å°†åœ¨æ‰€æœ‰å®ä¾‹ä¹‹é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ï¼Œå¦‚å›¾ 18 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-18-round-robin-è´Ÿè½½å‡è¡¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 18. Round Robin è´Ÿè½½å‡è¡¡&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu199gtj20m80f5wgc_hu_d182f121d4f4b68a.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu199gtj20m80f5wgc_hu_535c6c6a919f399d.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu199gtj20m80f5wgc_hu_4edaa496c4a9a07e.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu199gtj20m80f5wgc_hu_d182f121d4f4b68a.webp&#34;
               width=&#34;760&#34;
               height=&#34;518&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 18. Round Robin è´Ÿè½½å‡è¡¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½†æˆ‘ä»¬å¸Œæœ›å°†è¯·æ±‚è·¯ç”±åˆ°ç‰ˆæœ¬ä¸º v1 çš„å®ä¾‹ï¼Œå¹¶é•œåƒåˆ°ç‰ˆæœ¬ä¸º v2 çš„å®ä¾‹ï¼Œå¦‚å›¾ 19 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-19è·¯ç”±åˆ°-v1-å’Œé•œåƒåˆ°-v2&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 19.è·¯ç”±åˆ° v1 å’Œé•œåƒåˆ° v2&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2f7y4j20m80b8q3y_hu_13924f3c6effa368.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2f7y4j20m80b8q3y_hu_9e886841014cf021.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2f7y4j20m80b8q3y_hu_4b6fa1ad2199d94f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2f7y4j20m80b8q3y_hu_13924f3c6effa368.webp&#34;
               width=&#34;760&#34;
               height=&#34;384&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 19.è·¯ç”±åˆ° v1 å’Œé•œåƒåˆ° v2
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä½¿ç”¨ VirtualService ä¸ DestinationRule ç»“åˆå®ç°çš„ï¼Œå…¶ä¸­ç›®æ ‡è§„åˆ™æŒ‡å®šåˆ°ç‰¹å®šå­é›†çš„å­é›†å’Œ VirtualService è·¯ç”±ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨ç›®æ ‡è§„åˆ™æŒ‡å®šå­é›†&#34;&gt;ä½¿ç”¨ç›®æ ‡è§„åˆ™æŒ‡å®šå­é›†&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹é…ç½®å®šä¹‰å­é›†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DestinationRule&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic   &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subsets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1       &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;ä¸»æœºå®šä¹‰æ­¤è§„åˆ™ä»…åœ¨å‘ &lt;code&gt;sa-logic&lt;/code&gt; æœåŠ¡å‘ç”Ÿè·¯ç”±æ—¶é€‚ç”¨&lt;/li&gt;
&lt;li&gt;è·¯ç”±åˆ°å­é›†å®ä¾‹æ—¶ä½¿ç”¨çš„å­é›†åç§°ã€‚&lt;/li&gt;
&lt;li&gt;Label å®šä¹‰äº†éœ€è¦åŒ¹é…çš„é”®å€¼å¯¹ï¼Œä»¥ä½¿å®ä¾‹æˆä¸ºå­é›†çš„ä¸€éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åº”ç”¨æ‰§è¡Œä»¥ä¸‹å‘½ä»¤çš„é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/shadowing/sa-logic-subsets-destinationrule.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; destinationrule.networking.istio.io/sa-logic created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡å®šä¹‰å­é›†ï¼Œæˆ‘ä»¬å¯ä»¥ç»§ç»­å¹¶é…ç½® VirtualService ä»¥åº”ç”¨äºè¯·æ±‚ &lt;code&gt;sa-logic&lt;/code&gt; æ‰€åœ¨çš„è¯·æ±‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è·¯ç”±åˆ°åä¸º v1 çš„å­é›†ï¼Œ&lt;/li&gt;
&lt;li&gt;é•œåƒåˆ°åä¸º v2 çš„å­é›†ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ˜¯é€šè¿‡ä»¥ä¸‹æ¸…å•å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;sa-logic          &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mirror&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;             
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic     &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±äºä¸€åˆ‡é…ç½®éƒ½æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å®ƒçš„æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/shadowing/sa-logic-subsets-shadowing-vs.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;virtualservice.networking.istio.io/sa-logic created
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ·»åŠ ä¸€äº›è´Ÿè½½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; true&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; curl -v http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/sentiment &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -H &lt;span class=&#34;s2&#34;&gt;&amp;#34;Content-type: application/json&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;sentence&amp;#34;: &amp;#34;I love yogobella&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    sleep .8&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ£€æŸ¥ Grafana ä¸­çš„ç»“æœï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰é”™è¯¯çš„ç‰ˆæœ¬å¤§çº¦æœ‰ 60ï¼…çš„è¯·æ±‚å¤±è´¥ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªå¤±è´¥å½±å“æœ€ç»ˆç”¨æˆ·ï¼Œå› ä¸ºå®ƒä»¬è¢«å½“å‰æ´»åŠ¨çš„æœåŠ¡å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-20-sa-é€»è¾‘æœåŠ¡ç‰ˆæœ¬çš„æˆåŠŸç‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 20. sa é€»è¾‘æœåŠ¡ç‰ˆæœ¬çš„æˆåŠŸç‡&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2vr8gj20m80b0t9z_hu_dd5f4bc66cd08b52.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2vr8gj20m80b0t9z_hu_5273c4220105c319.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2vr8gj20m80b0t9z_hu_e766743377c20625.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu2vr8gj20m80b0t9z_hu_dd5f4bc66cd08b52.webp&#34;
               width=&#34;760&#34;
               height=&#34;376&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 20. sa é€»è¾‘æœåŠ¡ç‰ˆæœ¬çš„æˆåŠŸç‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç¬¬ä¸€æ¬¡çœ‹åˆ°åº”ç”¨äºæˆ‘ä»¬æœåŠ¡çš„ envoy çš„ VirtualServiceï¼Œå½“å¯¹æ­¤ &lt;code&gt;sa-web-app&lt;/code&gt; æå‡ºè¯·æ±‚æ—¶ï¼Œ &lt;code&gt;sa-logic&lt;/code&gt;  é€šè¿‡ sidecar Envoyï¼Œé€šè¿‡ VirtualService é…ç½®ä¸ºè·¯ç”±åˆ°å­é›† v1 å¹¶é•œåƒåˆ°æœåŠ¡çš„å­é›† v2 &lt;code&gt;sa-logic&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¯ä»¥çœ‹åˆ°ä½ åœ¨æƒ³â€œDarn man Virtual Services å¾ˆç®€å•ï¼â€ï¼Œåœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†æŠŠå¥å­æ‰©å±•ä¸ºâ€œSimply Amazingï¼â€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é‡‘ä¸é›€éƒ¨ç½²&#34;&gt;é‡‘ä¸é›€éƒ¨ç½²&lt;/h2&gt;
&lt;p&gt;Canary Deployment æ˜¯å‘å°‘æ•°ç”¨æˆ·æ¨å‡ºæ–°ç‰ˆæœ¬åº”ç”¨ç¨‹åºçš„è¿‡ç¨‹ï¼Œä½œä¸ºéªŒè¯ç¼ºå°‘é—®é¢˜çš„ä¸€ä¸ªæ­¥éª¤ï¼Œç„¶åå‘æ›´å¹¿æ³›çš„å—ä¼—æä¾›æ›´é«˜è´¨é‡çš„å‘å¸ƒä¿è¯ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨ç›¸åŒçš„ buggy å­é›† &lt;code&gt;sa-logic&lt;/code&gt; æ¥æ¼”ç¤º canary éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¤§èƒ†åœ°å¼€å§‹ï¼Œé€šè¿‡åº”ç”¨ä¸‹é¢çš„ VirtualServiceï¼Œå°† 20ï¼…çš„ç”¨æˆ·å‘é€åˆ°æœ‰ç¼ºé™·çš„ç‰ˆæœ¬ï¼ˆè¿™ä»£è¡¨é‡‘ä¸é›€éƒ¨ç½²ï¼‰å’Œ 80ï¼…çš„å¥åº·æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;sa-logic    &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;æƒé‡æŒ‡å®šè¦è½¬å‘åˆ°ç›®æ ‡æˆ–ç›®æ ‡å­é›†çš„è¯·æ±‚çš„ç™¾åˆ†æ¯”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;code&gt;sa-logic&lt;/code&gt; ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ æ›´æ–°ä»¥å‰çš„ è™šæ‹ŸæœåŠ¡é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/canary/sa-logic-subsets-canary-versusyaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; virtualservice.networking.istio.io/sa-logic configured
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ç«‹å³çœ‹åˆ°æˆ‘ä»¬çš„ä¸€äº›è¯·æ±‚å¤±è´¥äº†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; true&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   curl -i http://&lt;span class=&#34;nv&#34;&gt;$EXTERNAL_IP&lt;/span&gt;/sentiment &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   -H â€œContent-type: application/jsonâ€ &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   -d &lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;sentence&amp;#34;: &amp;#34;I love yogobella&amp;#34;}&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --silent -w &lt;span class=&#34;s2&#34;&gt;&amp;#34;Time: %{time_total}s \t Status: %{http_code}\n&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   -o /dev/null&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; sleep .1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 0.153075s Status: &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 0.137581s Status: &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 0.139345s Status: &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Time: 30.291806s Status: &lt;span class=&#34;m&#34;&gt;500&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;VirtualServices å¯ç”¨äº† Canary Deploymentsï¼Œé€šè¿‡è¿™ç§æ–¹æ³•ï¼Œæˆ‘ä»¬å°†æ½œåœ¨çš„æŸå®³å‡å°‘åˆ°äº† 20ï¼…çš„ç”¨æˆ·ç¾¤ã€‚æ¼‚äº®ï¼ç°åœ¨ï¼Œæ¯å½“æˆ‘ä»¬å¯¹ä»£ç ä¸å®‰å…¨æ—¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ Shadowing å’Œ Canary Deploymentsï¼Œæ¢å¥è¯è¯´ï¼Œæ€»æ˜¯å¦‚æ­¤ã€‚ğŸ˜œ&lt;/p&gt;
&lt;h2 id=&#34;è¶…æ—¶å’Œé‡è¯•&#34;&gt;è¶…æ—¶å’Œé‡è¯•&lt;/h2&gt;
&lt;p&gt;ä»£ç å¹¶ä¸æ€»æ˜¯é”™è¯¯çš„ã€‚åœ¨â€œ &lt;a href=&#34;https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing#The_fallacies&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åˆ†å¸ƒå¼è®¡ç®—çš„ 8 ä¸ªè°¬è¯¯&lt;/a&gt; â€åˆ—è¡¨ä¸­ï¼Œç¬¬ä¸€ä¸ªè°¬è®ºæ˜¯â€œç½‘ç»œå¯é â€ã€‚ç½‘ç»œä¸å¯é ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬éœ€è¦è¶…æ—¶å’Œé‡è¯•çš„åŸå› ã€‚&lt;/p&gt;
&lt;p&gt;å‡ºäºæ¼”ç¤ºç›®çš„ï¼Œæˆ‘ä»¬å°†ç»§ç»­ä½¿ç”¨æœ‰ç¼ºé™·çš„ç‰ˆæœ¬ &lt;code&gt;sa-logic&lt;/code&gt;ï¼Œå…¶ä¸­éšæœºæ•…éšœæ¨¡æ‹Ÿç½‘ç»œçš„ä¸å¯é æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ç¼ºé™·çš„æœåŠ¡æœ‰ä¸‰åˆ†ä¹‹ä¸€çš„æœºä¼šèŠ±è´¹å¤ªé•¿æ—¶é—´æ¥å“åº”ï¼Œä¸‰åˆ†ä¹‹ä¸€çš„æœºä¼šä»¥å†…éƒ¨æœåŠ¡å™¨é”™è¯¯ç»“æŸï¼Œå…¶ä½™çš„æˆåŠŸå®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç¼“è§£è¿™äº›é—®é¢˜å¹¶æ”¹å–„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å¯ä»¥ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¦‚æœæœåŠ¡æ—¶é—´è¶…è¿‡ 8 ç§’ï¼Œåˆ™è¶…æ—¶&lt;/li&gt;
&lt;li&gt;é‡è¯•å¤±è´¥çš„è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ˜¯é€šè¿‡ä»¥ä¸‹èµ„æºå®šä¹‰å®ç°çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sa-logic&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;50&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;8s          &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;retries&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;attempts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;perTryTimeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;3s  &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# 3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ol&gt;
&lt;li&gt;è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ä¸º 8 ç§’ï¼Œ&lt;/li&gt;
&lt;li&gt;å®ƒå°è¯•äº† 3 æ¬¡ï¼Œ&lt;/li&gt;
&lt;li&gt;å¦‚æœå°è¯•æ—¶é—´è¶…è¿‡ 3 ç§’ï¼Œåˆ™å°è¯•å°†è¯·æ±‚æ ‡è®°ä¸ºå¤±è´¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ç§ä¼˜åŒ–ï¼Œå› ä¸ºç”¨æˆ·ä¸ä¼šç­‰å¾…è¶…è¿‡ 8 ç§’ï¼Œå¹¶ä¸”æˆ‘ä»¬åœ¨å‘ç”Ÿæ•…éšœæ—¶é‡è¯•ä¸‰æ¬¡ï¼Œä»è€Œå¢åŠ äº†å¯¼è‡´å“åº”æˆåŠŸçš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åº”ç”¨æ›´æ–°çš„é…ç½®ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f resource-manifests/istio/retries/sa-logic-retries-timeouts-vs.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;virtualservice.networking.istio.io/sa-logic configured
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¹¶æŸ¥çœ‹ Grafana å›¾è¡¨ï¼Œäº†è§£æˆåŠŸç‡çš„æ”¹å–„æƒ…å†µï¼ˆå¦‚å›¾ 21 æ‰€ç¤ºï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-21ä½¿ç”¨è¶…æ—¶å’Œé‡è¯•åçš„æ”¹è¿›&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 21.ä½¿ç”¨è¶…æ—¶å’Œé‡è¯•åçš„æ”¹è¿›&#34; srcset=&#34;
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1qjtxj20m80b63zk_hu_4633a939a617f69e.webp 400w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1qjtxj20m80b63zk_hu_99ce21954e6fe3e0.webp 760w,
               /blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1qjtxj20m80b63zk_hu_aecc3ba5dd17fdd9.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/back-to-microservices-with-istio-p1/61411417ly1g0exu1qjtxj20m80b63zk_hu_4633a939a617f69e.webp&#34;
               width=&#34;760&#34;
               height=&#34;382&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 21.ä½¿ç”¨è¶…æ—¶å’Œé‡è¯•åçš„æ”¹è¿›
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;code&gt;sa-logic-buggy&lt;/code&gt; é€šè¿‡æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ è¿›å…¥ä¸‹ä¸€éƒ¨åˆ† delete å’Œ VirtualService ä¹‹å‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl delete deployment sa-logic-buggy
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;deployment.extensions &lt;span class=&#34;s2&#34;&gt;&amp;#34;sa-logic-buggy&amp;#34;&lt;/span&gt; deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl delete virtualservice sa-logic
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;virtualservice.networking.istio.io â€œsa-logicâ€ deleted
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç†”æ–­å™¨å’Œéš”ç¦»æ¨¡å¼&#34;&gt;ç†”æ–­å™¨å’Œéš”ç¦»æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;å¾®æœåŠ¡æ¶æ„ä¸­çš„ä¸¤ä¸ªé‡è¦æ¨¡å¼ï¼Œå¯ä»¥å®ç°æœåŠ¡çš„è‡ªæˆ‘ä¿®å¤ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥ &lt;strong&gt;ç†”æ–­å™¨&lt;/strong&gt; æ˜¯ç”¨æ¥é˜»æ­¢è¯·æ±‚å°†è§†ä¸ºä¸å¥åº·æœåŠ¡çš„ä¸€ä¸ªå®ä¾‹ï¼Œå¹¶ä½¿å®ƒèƒ½å¤Ÿæ¢å¤ï¼Œåœ¨æ­¤æœŸé—´å®¢æˆ·ç«¯çš„è¯·æ±‚è½¬å‘åˆ°è¯¥æœåŠ¡çš„å¥åº·æƒ…å†µï¼ˆå¢åŠ æˆåŠŸç‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥ &lt;strong&gt;éš”ç¦»æ¨¡å¼&lt;/strong&gt; æ•´ä¸ªç³»ç»Ÿé™çº§æ¥éš”ç¦»é”™è¯¯ï¼Œé˜²æ­¢é”™è¯¯ä¼ æ’­ï¼Œä¸¾ä¸€ä¸ªéš”ç¦»æ•…éšœä¾‹å­ï¼ŒæœåŠ¡ B å¤„äºæŸåçŠ¶æ€å’Œå…¶å®ƒæœåŠ¡ï¼ˆæœåŠ¡ B çš„å®¢æˆ·ç«¯ï¼‰å‘å‡ºè¯·æ±‚åˆ°æœåŠ¡ Bï¼Œè¿™å°†å¯¼è‡´è¯¥å®¢æˆ·ç«¯å°†ä½¿ç”¨äº†è‡ªå·±çš„çº¿ç¨‹æ± ï¼Œå°†æ— æ³•æä¾›å…¶ä»–è¯·æ±‚ï¼ˆå³ä½¿è¿™äº›è¯·æ±‚ä¸æœåŠ¡ B æ— å…³ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å°†è·³è¿‡è¿™äº›æ¨¡å¼çš„å®ç°ï¼Œå› ä¸ºæ‚¨å¯ä»¥æŸ¥çœ‹ &lt;a href=&#34;https://istio.io/docs/tasks/traffic-management/circuit-breaking/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹æ–‡æ¡£ä¸­çš„å®ç°&lt;/a&gt;ï¼Œæˆ‘å¾ˆå…´å¥‹åœ°å±•ç¤ºèº«ä»½éªŒè¯å’Œæˆæƒï¼Œè¿™å°†æ˜¯ä¸‹ä¸€ç¯‡æ–‡ç« çš„ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¬¬ä¸€éƒ¨åˆ†---æ‘˜è¦&#34;&gt;ç¬¬ä¸€éƒ¨åˆ† - æ‘˜è¦&lt;/h2&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²äº† Istioï¼Œå¹¶ä½¿ç”¨å…¶è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆå¦‚ &lt;strong&gt;ç½‘å…³&lt;/strong&gt;ï¼Œ &lt;strong&gt;VirtualServices&lt;/strong&gt;ï¼Œ &lt;strong&gt;DestinationRules&lt;/strong&gt; åŠå…¶ç»„ä»¶ï¼‰å¯ç”¨äº†ä»¥ä¸‹åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;Kiali&lt;/strong&gt;ï¼Œé€šè¿‡æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„æœåŠ¡ï¼Œå®ƒä»¬å¦‚ä½•æ‰§è¡Œï¼Œä»¥åŠå®ƒä»¬å…³ç³»ï¼Œæ¥è§‚å¯Ÿæˆ‘ä»¬çš„æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;strong&gt;Prometheus&lt;/strong&gt; å’Œ &lt;strong&gt;Grafana&lt;/strong&gt; è¿›è¡Œæ”¶é›†å’Œå¯è§†åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;è¯·æ±‚ &lt;strong&gt;Jaeger&lt;/strong&gt; è·Ÿè¸ªï¼ˆHunter çš„å¾·è¯­ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¯¹ç½‘ç»œæµé‡è¿›è¡Œå…¨é¢ç»†ç²’åº¦æ§åˆ¶ï¼Œå®ç° &lt;strong&gt;Canary Deployments&lt;/strong&gt;ï¼Œ &lt;strong&gt;A/Bæµ‹è¯•å’ŒShadowing&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;li&gt;è½»æ¾å®ç° &lt;strong&gt;é‡è¯•ï¼Œè¶…æ—¶å’Œ CircuitBreakers&lt;/strong&gt; ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€æœ‰è¿™äº›éƒ½å¯ä»¥åœ¨æ²¡æœ‰ä»£ç æ›´æ”¹æˆ–ä»»ä½•å…¶ä»–ä¾èµ–æ€§çš„æƒ…å†µä¸‹å®ç°ï¼Œä»è€Œä½¿æ‚¨çš„æœåŠ¡ä¿æŒå°å·§ï¼Œæ˜“äºæ“ä½œå’Œç»´æŠ¤&lt;/p&gt;
&lt;p&gt;å¯¹äºæ‚¨çš„å¼€å‘å›¢é˜Ÿæ¥è¯´ï¼Œæ¶ˆé™¤è¿™äº›è·¨é¢†åŸŸçš„é—®é¢˜å¹¶å°†å®ƒä»¬é›†ä¸­åˆ° Istio çš„æ§åˆ¶å¹³é¢ï¼Œæ„å‘³ç€æ–°æœåŠ¡å¾ˆå®¹æ˜“å¼•å…¥ï¼Œå®ƒä»¬ä¸ä¼šå ç”¨å¤§é‡èµ„æºï¼Œå› ä¸ºå¼€å‘äººå‘˜å¯ä»¥ä¸“æ³¨äºè§£å†³ä¸šåŠ¡é—®é¢˜ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæ²¡æœ‰ä»»ä½•å¼€å‘äººå‘˜æŠ±æ€¨â€œå¿…é¡»è§£å†³æœ‰è¶£çš„ä¸šåŠ¡é—®é¢˜ï¼â€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¾ˆä¹æ„åœ¨ä¸‹é¢çš„è¯„è®ºä¸­å¬åˆ°æ‚¨çš„æƒ³æ³•ï¼Œå¹¶éšæ—¶åœ¨ &lt;a href=&#34;https://twitter.com/rinormaloku&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Twitter&lt;/a&gt; æˆ–æˆ‘çš„é¡µé¢ &lt;a href=&#34;https://rinormaloku.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;rinormaloku.com&lt;/a&gt; ä¸Šä¸æˆ‘ &lt;a href=&#34;https://rinormaloku.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è”ç³»&lt;/a&gt;ï¼Œå¹¶ç»§ç»­å…³æ³¨ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬å°†è§£å†³æœ€åä¸€å±‚è®¤è¯å’Œæˆæƒé—®é¢˜ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Cilium 1.4 å‘å¸ƒäº†ï¼Œæ–°åŠŸèƒ½ä¸€è§ˆ</title>
      <link>https://cloudnativecn.com/blog/cilium-1-4/</link>
      <pubDate>Mon, 18 Feb 2019 17:59:29 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/cilium-1-4/</guid>
      <description>&lt;p&gt;















&lt;figure  id=&#34;figure-å‘å¸ƒæ¦‚è¿°&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å‘å¸ƒæ¦‚è¿°&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmk6vqhj20jg08odga_hu_40b4d47a2dfe24b8.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmk6vqhj20jg08odga_hu_20621b9e54c7fcdb.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmk6vqhj20jg08odga_hu_10a4400055b99bc7.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmk6vqhj20jg08odga_hu_40b4d47a2dfe24b8.webp&#34;
               width=&#34;700&#34;
               height=&#34;312&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å‘å¸ƒæ¦‚è¿°
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://cilium.io/blog/2019/02/12/cilium-14/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¾ˆé«˜å…´åœ°å®£å¸ƒ Cilium 1.4 ç‰ˆæœ¬ã€‚è¯¥ç‰ˆæœ¬å¼•å…¥äº†å‡ é¡¹æ–°åŠŸèƒ½ä»¥åŠä¼˜åŒ–å’Œå¯æ‰©å±•æ€§å·¥ä½œã€‚é‡ç‚¹åŒ…æ‹¬å¢åŠ å…¨å±€æœåŠ¡ï¼Œæä¾›è·¨å¤šä¸ªé›†ç¾¤çš„ Kubernetes æœåŠ¡è·¯ç”±ã€DNS è¯·æ±‚/å“åº”æ„ŸçŸ¥æˆæƒå’Œå¯è§æ€§ã€é€æ˜åŠ å¯†ï¼ˆbetaï¼‰ã€IPVLAN æ”¯æŒä»¥è·å¾—æ›´å¥½çš„æ€§èƒ½å’Œå»¶è¿Ÿï¼ˆbetaï¼‰ã€ä¸ Flannel é›†æˆã€GKE åœ¨ COS ä¸Šæ”¯æŒã€åŸºäº AWS å…ƒæ•°æ®çš„ç­–ç•¥å®æ–½ï¼ˆalphaï¼‰ä»¥åŠä¼˜åŒ–å†…å­˜å’Œ CPU ä½¿ç”¨çš„é‡è¦å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;åƒå¾€å¸¸ä¸€æ ·ï¼Œæ„Ÿè°¢è¿‡å» 4 ä¸ªæœˆä¸­åœ¨ç‰ˆæœ¬ 1.3 å’Œ 1.4 ä¹‹é—´è´¡çŒ®äº† 1048 æ¬¡æäº¤çš„ Cilium å¼€å‘äººå‘˜åŠæ•´ä¸ªç¤¾åŒºã€‚&lt;/p&gt;
&lt;h2 id=&#34;cilium-æ˜¯ä»€ä¹ˆ&#34;&gt;Cilium æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Cilium æ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶ï¼Œç”¨äºé€æ˜åœ°æä¾›å’Œä¿æŠ¤ä½¿ç”¨ Kubernetesã€Docker å’Œ Mesos ç­‰ Linux å®¹å™¨ç®¡ç†å¹³å°éƒ¨ç½²çš„åº”ç”¨ç¨‹åºæœåŠ¡ä¹‹é—´çš„ç½‘ç»œå’Œ API è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;Cilium çš„åŸºç¡€æ˜¯ä¸€ç§åä¸º BPF çš„æ–° Linux å†…æ ¸æŠ€æœ¯ï¼Œå®ƒå¯ä»¥åœ¨ Linux æœ¬èº«å†…åŠ¨æ€æ’å…¥å¼ºå¤§çš„å®‰å…¨æ€§ã€å¯è§æ€§å’Œç½‘ç»œæ§åˆ¶é€»è¾‘ã€‚BPF ç”¨äºæä¾›è¯¸å¦‚å¤šé›†ç¾¤è·¯ç”±ï¼Œè´Ÿè½½å‡è¡¡ä»¥å–ä»£ kube-proxyï¼Œä½¿ç”¨ X.509 è¯ä¹¦çš„é€æ˜åŠ å¯†ä»¥åŠç½‘ç»œå’ŒæœåŠ¡å®‰å…¨æ€§ç­‰åŠŸèƒ½ã€‚é™¤äº†æä¾›ä¼ ç»Ÿçš„ç½‘ç»œçº§å®‰å…¨æ€§ä¹‹å¤–ï¼ŒBPF çš„çµæ´»æ€§è¿˜å¯ä»¥é€šè¿‡åº”ç”¨ç¨‹åºåè®®å’Œ DNS è¯·æ±‚/å“åº”çš„ä¸Šä¸‹æ–‡å®ç°å®‰å…¨æ€§ã€‚Cilium ä¸ Envoy ç´§å¯†é›†æˆï¼Œå¹¶æä¾›åŸºäº Go çš„æ‰©å±•æ¡†æ¶ã€‚ç”±äº BPF åœ¨ Linux å†…æ ¸ä¸­è¿è¡Œï¼Œå› æ­¤å¯ä»¥åº”ç”¨æ‰€æœ‰ Cilium åŠŸèƒ½ï¼Œè€Œæ— éœ€å¯¹åº”ç”¨ç¨‹åºä»£ç æˆ–å®¹å™¨é…ç½®è¿›è¡Œä»»ä½•æ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³ &lt;strong&gt;&lt;a href=&#34;https://cilium.readthedocs.io/en/stable/intro/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium&lt;/a&gt;&lt;/strong&gt; çš„æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œè¯·å‚é˜…**&lt;a href=&#34;https://cilium.readthedocs.io/en/stable/intro/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium ç®€ä»‹&lt;/a&gt;** ä¸€èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤šé›†ç¾¤æœåŠ¡è·¯ç”±&#34;&gt;å¤šé›†ç¾¤æœåŠ¡è·¯ç”±&lt;/h2&gt;
&lt;p&gt;Cilium 1.3 åœ¨å¤šä¸ªé›†ç¾¤ä¹‹é—´å¼•å…¥äº†åŸºæœ¬çš„ pod IP è·¯ç”±åŠŸèƒ½ã€‚Cilium 1.4 å¼•å…¥äº†åŸºäºæ ‡å‡† Kubernetes æœåŠ¡çš„å…¨å±€æœåŠ¡æ¦‚å¿µã€‚å…¨å±€æœåŠ¡å…è®¸ç”¨æˆ·æŒ‡å®š Kubernetes æœåŠ¡åœ¨å¤šä¸ªé›†ç¾¤ä¸­å¯ç”¨ã€‚ç„¶åï¼Œè¯¥æœåŠ¡å¯ä»¥åœ¨å¤šä¸ªé›†ç¾¤ä¸­å…·æœ‰åç«¯ podã€‚&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·ä½“éªŒå°±åƒåœ¨æ¯ä¸ªé›†ç¾¤ä¸­å®šä¹‰å…·æœ‰ç›¸åŒåç§°å’Œå‘½åç©ºé—´çš„ Kubernetes æœåŠ¡å¹¶æ·»åŠ æ³¨é‡Šä»¥å°†å…¶æ ‡è®°ä¸ºå…¨å±€ä¸€æ ·ç®€å•ã€‚ 















&lt;figure  id=&#34;figure-å¤šé›†ç¾¤æœåŠ¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¤šé›†ç¾¤æœåŠ¡&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkdyp1j21fk0mggly_hu_e709cd77eed54b78.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkdyp1j21fk0mggly_hu_e00ff2b323c1d1bb.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkdyp1j21fk0mggly_hu_9fc56999f47d6ce.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkdyp1j21fk0mggly_hu_e709cd77eed54b78.webp&#34;
               width=&#34;760&#34;
               height=&#34;331&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¤šé›†ç¾¤æœåŠ¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å½“ pod å‘ä¸Šæˆ–å‘ä¸‹æ‰©å±•æˆ–å˜å¾—ä¸å¥åº·æ—¶ï¼ŒKubernetes è¿è¡ŒçŠ¶æ€æ£€æŸ¥ä¿¡æ¯å¯ç”¨äºè‡ªåŠ¨æ·»åŠ å’Œåˆ é™¤åç«¯æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¤šé›†ç¾¤æ•…éšœè½¬ç§»&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¤šé›†ç¾¤æ•…éšœè½¬ç§»&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmk3324j21g80hkwev_hu_652a9a2d8174f74c.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmk3324j21g80hkwev_hu_7b24d7b9e2dc6157.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmk3324j21g80hkwev_hu_520759dde6ec6db4.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmk3324j21g80hkwev_hu_652a9a2d8174f74c.webp&#34;
               width=&#34;760&#34;
               height=&#34;255&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¤šé›†ç¾¤æ•…éšœè½¬ç§»
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ§åˆ¶å¹³é¢å»ºç«‹åœ¨ etcd ä¹‹ä¸Šï¼Œç±»ä¼¼äº Kubernetes åŸç”Ÿçš„æ“ä½œæ–¹å¼ï¼Œå…·æœ‰å¼¹æ€§å’Œç®€å•æ€§ä½œä¸ºå…¶åŸºæœ¬è®¾è®¡æ¨¡å¼ã€‚æ¯ä¸ªé›†ç¾¤ç»§ç»­è¿è¡Œå…¶è‡ªå·±çš„ etcd é›†ç¾¤ï¼Œå¹¶ä¸”å¤åˆ¶ä»¥åªè¯»æ–¹å¼è¿›è¡Œï¼Œè¿™å¯ç¡®ä¿é›†ç¾¤ä¸­çš„æ•…éšœä¸ä¼šå½±å“å…¶ä»–é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é›†ç¾¤æ§åˆ¶å¹³é¢&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é›†ç¾¤æ§åˆ¶å¹³é¢&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmjzw1jj20jg09ljrn_hu_c7dece338f882564.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmjzw1jj20jg09ljrn_hu_31321667c965d8e8.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmjzw1jj20jg09ljrn_hu_b085c70de168be47.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmjzw1jj20jg09ljrn_hu_c7dece338f882564.webp&#34;
               width=&#34;700&#34;
               height=&#34;345&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é›†ç¾¤æ§åˆ¶å¹³é¢
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å°†é›†ç¾¤è¿æ¥åœ¨ä¸€èµ·å°±åƒä½¿ç”¨äº‘ä¾›åº”å•†çš„æ ‡å‡†è·¯ç”± API æˆ–åŸºäºå¸¸è§„ IP åœ°å€çš„ VPN ç½‘å…³å’Œéš§é“çš„æœ¬åœ°åŸºç¡€è®¾æ–½åœ¨ VPC ä¹‹é—´æä¾›è·¯ç”±ï¼Œç„¶åé€šè¿‡å†…éƒ¨ Kubernetes è´Ÿè½½å‡è¡¡å™¨æš´éœ² Cilium æ§åˆ¶å¹³é¢ä»¥å°†å…¶æš´éœ²ç»™å†…éƒ¨ VPC ä¸€æ ·ç®€å•ã€‚TLS ç”¨äºä½¿ç”¨ä½œä¸º Kubernetes Secret ç®¡ç†çš„è¯ä¹¦å’Œå¯†é’¥å¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨è¿›è¡Œèº«ä»½éªŒè¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ipvlan-æ”¯æŒæµ‹è¯•ç‰ˆ&#34;&gt;IPVLAN æ”¯æŒï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/h2&gt;
&lt;p&gt;æ·»åŠ äº†ä¸€ç§æ–°çš„åŸºäº IPVLAN çš„æ•°æ®è·¯å¾„æ¨¡å¼ã€‚ä¸åŸºäº veth çš„ä½“ç³»ç»“æ„ç›¸æ¯”ï¼ŒIPVLAN å…·æœ‰ä½å»¶è¿Ÿä¼˜åŠ¿ã€‚ä½¿ç”¨ netperf åœ¨ 3.40Ghz Xeon ä¸Šçš„ä¸¤ä¸ªæœ¬åœ°å®¹å™¨ä¹‹é—´æµ‹é‡äº†ä»¥ä¸‹åŸºå‡†æµ‹è¯•ï¼Œå¹¶ä½¿ç”¨å•æ ¸ç¦ç”¨è¶…çº¿ç¨‹ã€‚ä¸ veth ç›¸æ¯”ï¼ŒIPVLAN çš„ P99 å»¶è¿Ÿç›¸å¯¹è¾ƒä½ï¼ˆè¶Šä½è¶Šå¥½ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ipvlan-æ€§èƒ½-å»¶è¿Ÿ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;IPVLAN æ€§èƒ½ (å»¶è¿Ÿ)&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05ygz1tuxj20wa0iu3yo_hu_4bd8c83c0cd1b3b8.webp 400w,
               /blog/cilium-1-4/61411417ly1g05ygz1tuxj20wa0iu3yo_hu_afed674c24db515f.webp 760w,
               /blog/cilium-1-4/61411417ly1g05ygz1tuxj20wa0iu3yo_hu_3ad9146af94d4b3f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05ygz1tuxj20wa0iu3yo_hu_4bd8c83c0cd1b3b8.webp&#34;
               width=&#34;760&#34;
               height=&#34;443&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      IPVLAN æ€§èƒ½ (å»¶è¿Ÿ)
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;IPVLAN å’Œ veth ä¹‹é—´çš„æœ€å¤§ååé‡ï¼ˆè¶Šé«˜è¶Šå¥½ï¼‰éå¸¸ç›¸ä¼¼ï¼Œä½†æ˜¯é€šè¿‡ä»å†…æ ¸ç¼–è¯‘ netfilter/iptables å¯ä»¥å®ç°éå¸¸æ˜¾ç€çš„æ€§èƒ½æå‡ã€‚å¦‚æœæ‚¨ä¸ä½¿ç”¨ NodePort æœåŠ¡å¹¶ä¸”åœ¨ç¦»å¼€ Kubernete worker node æ—¶ä¸éœ€è¦ä¼ªè£…ç½‘ç»œæµé‡ï¼Œåˆ™å·²ç»å¯ä»¥å®Œå…¨è¿è¡Œæ‚¨çš„ Kubernetes é›†ç¾¤ã€‚æˆ‘ä»¬å°†åœ¨æ¥ä¸‹æ¥çš„å‡ å‘¨å†…æä¾›æœ‰å…³å¦‚ä½•è¿è¡Œ iptables å’Œ kube-proxy çš„æŒ‡å—ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ipvlan-æ€§èƒ½&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;IPVLAN æ€§èƒ½&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkwgobj20gs0abdfq_hu_ac86a7d18487f97b.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkwgobj20gs0abdfq_hu_67f5e93c70431f78.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkwgobj20gs0abdfq_hu_8b049bcac372b8bd.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkwgobj20gs0abdfq_hu_ac86a7d18487f97b.webp&#34;
               width=&#34;604&#34;
               height=&#34;371&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      IPVLAN æ€§èƒ½
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;IPVLAN æ˜¯ 1.4 ä¸­çš„ beta çº§åŠŸèƒ½ï¼Œæœ‰å…³å¦‚ä½•å¯ç”¨å’Œé…ç½®è¯¥åŠŸèƒ½çš„è¯´æ˜ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://docs.cilium.io/en/v1.4/gettingstarted/ipvlan/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IPVLAN å…¥é—¨æŒ‡å—&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;h2 id=&#34;dnsè¯·æ±‚å“åº”çš„å®‰å…¨æ€§å’Œå¯è§æ€§&#34;&gt;DNSè¯·æ±‚/å“åº”çš„å®‰å…¨æ€§å’Œå¯è§æ€§&lt;/h2&gt;
&lt;p&gt;Cilium 1.4 æ‰©å±•äº†ç°æœ‰çš„ DNS å®‰å…¨ç­–ç•¥æ¨¡å‹ï¼Œä»¥äº†è§£å„ä¸ª pod å‘å‡ºçš„ DNS è¯·æ±‚ä»¥åŠå®ƒä»¬æ”¶åˆ°çš„ DNS å“åº”ã€‚è¿™æ˜¾ç€æé«˜äº†è®¿é—®é›†ç¾¤å¤–éƒ¨æœåŠ¡çš„ pod çš„å®‰å…¨æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨æ‰§è¡Œ DNS æŸ¥æ‰¾æ—¶ï¼Œå¯ä»¥å°† Pod é™åˆ¶ä¸ºå…·æœ‰æœ€å°æƒé™ï¼Œå³ pod å¯ä»¥ä»…é™äºæŸ¥æ‰¾åŒ¹é…æ¨¡å¼çš„ DNS åç§°ï¼Œä¾‹å¦‚ &lt;code&gt;*.domain.com&lt;/code&gt; ã€‚ä»»ä½•è¶…å‡ºå…è®¸æ¨¡å¼çš„è¯·æ±‚éƒ½å°†æ”¶åˆ° &lt;code&gt;request refused&lt;/code&gt; DNS å“åº”ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DNS æŸ¥æ‰¾åçš„é€šä¿¡å¯ä»¥é™åˆ¶ä¸ºç‰¹å®š pod æ¥æ”¶çš„ DNS å“åº”ä¸­è¿”å›çš„ IP åœ°å€ã€‚è¿™æ˜¾ç€é™ä½äº†å—æŸåº”ç”¨ç¨‹åºçš„æƒé™ï¼Œå¹¶æé«˜äº†åŸºäº DNS çš„ç­–ç•¥è§„åˆ™çš„å¯é æ€§ï¼Œå› ä¸ºæ‰§è¡Œé€»è¾‘ä¸å†éœ€è¦çŸ¥é“ DNS åç§°å¯ä»¥æ˜ å°„åˆ°çš„æ‰€æœ‰å¯èƒ½çš„ IP åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ç‰¹åˆ«æ˜¯å¯¹äºäº‘ä¾›åº”å•†æä¾›çš„æµè¡Œå­˜å‚¨ï¼Œæ¶ˆæ¯ä¼ é€’å’Œæ•°æ®åº“æœåŠ¡ï¼Œå•ä¸ª DNS åç§°å¯ä»¥æ˜ å°„åˆ°æ•°ç™¾æˆ–æ•°åƒä¸ª IP åœ°å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç°åœ¨å¯ä»¥é€šè¿‡ API è®¿é—®çš„ Cilium æˆæƒæ—¥å¿—è®°å½•å±‚è®°å½• DNS æŸ¥æ‰¾å’Œå“åº”ã€‚è¿™æä¾›äº† pod æ‰§è¡Œçš„æ¯ä¸ª DNS è¯·æ±‚å’Œå“åº”çš„ç²¾ç¡®æ—¥å¿—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-dns&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;DNS&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmku6whj217i09c3yk_hu_e940db6deeee1251.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmku6whj217i09c3yk_hu_cd8a82d507cae6ee.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmku6whj217i09c3yk_hu_a8159b922451088d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmku6whj217i09c3yk_hu_e940db6deeee1251.webp&#34;
               width=&#34;760&#34;
               height=&#34;163&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      DNS
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ç¤ºä¾‹æ˜¾ç¤ºäº†ä¸€ä¸ªæˆåŠŸçš„ DNS åºåˆ—ï¼Œç„¶åæ˜¯ DNS æœåŠ¡å™¨å“åº”çš„å¯¹ IP çš„ HTTP è¯·æ±‚ã€‚è¿™æ˜¯åº”ç”¨ç¨‹åºçš„è¡Œä¸ºæ–¹å¼å’Œå…è®¸çš„æ–¹å¼ã€‚åç»­ HTTP è¯·æ±‚å¯ä»¥ä½¿ç”¨ç¼“å­˜çš„ DNS ä¿¡æ¯ï¼Œå…è®¸æ­¤ç±»è¯·æ±‚ã€‚DNS ä¿¡æ¯å°†æ ¹æ®è®°å½•ä¸­çš„ TTL ä¿¡æ¯è¶…æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;å³ä¾§æ˜¯åº”ç”¨ç¨‹åºåœ¨å…è®¸çš„ DNS ç­–ç•¥ä¹‹å¤–æ‰§è¡Œ DNS æŸ¥æ‰¾çš„åºåˆ—ã€‚å®ƒè¿˜æ˜¾ç¤ºï¼Œå¦‚æœåº”ç”¨ç¨‹åºæ— æ³•æ‰§è¡Œ DNS æŸ¥æ‰¾ï¼Œåˆ™åœ¨åº”ç”¨ç¨‹åºæ— æ³•åœ¨ä»¥ä¸‹ä½ç½®æŸ¥æ‰¾ DNS åç§°æ—¶ï¼Œå³ä½¿ IP åœ°å€å®é™…æ˜ å°„åˆ°å…è®¸çš„ DNS åç§°ï¼Œä¹Ÿä¼šé˜»æ­¢ä»»ä½•å°è¯•è”ç³» IP åœ°å€çš„å°è¯•ã€‚ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç­–ç•¥ç¤ºä¾‹&#34;&gt;ç­–ç•¥ç¤ºä¾‹&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cilium.io/v2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;CiliumNetworkPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;egress-domain-wildcard&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpointSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;myService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;egress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;toEndpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#39;k8s:io.kubernetes.pod.namespace&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kube-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s-app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kube-dns&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;toPorts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;53&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;UDP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matchPattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*.domain.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;toFQDNs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matchPattern&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*.domain.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;toPorts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;443&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šè¿°ç­–ç•¥ç¤ºä¾‹æˆäºˆ pod æˆ–å®¹å™¨é€šè¿‡ kube-dns æ‰§è¡Œ DNS è¯·æ±‚çš„æƒé™ï¼Œä½†å°†å…è®¸çš„ DNS æŸ¥æ‰¾é™åˆ¶ä¸º &lt;code&gt;*.domain.com&lt;/code&gt; ã€‚ä¸æ¨¡å¼ä¸åŒ¹é…çš„è¯·æ±‚å°†æ”¶åˆ° &lt;code&gt;request refused&lt;/code&gt; DNS å“åº”ã€‚å®ƒè¿›ä¸€æ­¥æˆäºˆç«¯å£ 443/TCP ä¸Šçš„ pod å‡ºå£è®¿é—®æƒé™åˆ° DNS å“åº”ä¸­è¿”å›çš„ IPã€‚ä»»ä½•å°è¯•è®¿é—®å…ˆå‰æœªåœ¨ DNS å“åº”ä¸­è¿”å›çš„ä»»ä½• IP åœ°å€çš„è¯·æ±‚éƒ½å°†è¢«æ‹’ç»ã€‚&lt;/p&gt;
&lt;p&gt;è¦å¼€å§‹ä½¿ç”¨åŸºäº DNS çš„ç­–ç•¥ï¼Œè¯·éµå¾ª &lt;a href=&#34;https://docs.cilium.io/en/v1.4/gettingstarted/dns/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäº DNS çš„å…¥é—¨æŒ‡å—&lt;/a&gt; ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é€æ˜åŠ å¯†å’Œèº«ä»½éªŒè¯æµ‹è¯•ç‰ˆ&#34;&gt;é€æ˜åŠ å¯†å’Œèº«ä»½éªŒè¯ï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/h2&gt;
&lt;p&gt;ä¸ºé›†ç¾¤å†…å’Œé›†ç¾¤ä¹‹é—´çš„æ‰€æœ‰æœåŠ¡åˆ°æœåŠ¡é€šä¿¡æä¾›é€æ˜åŠ å¯†æ˜¯ä¸€ç§ç»å¸¸è¢«è¦æ±‚çš„åŠŸèƒ½ã€‚åŠ å¯†å…è®¸åœ¨ä¸å—ä¿¡ä»»çš„ç½‘ç»œä¸­è¿è¡Œ Kubernetesï¼Œé€æ˜åœ°åŠ å¯†é›†ç¾¤ä¸­æœåŠ¡ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡ã€‚èº«ä»½éªŒè¯å¯ç¡®ä¿åªæœ‰å—ä¿¡ä»»çš„å·¥ä½œèŠ‚ç‚¹æ‰èƒ½å‚ä¸é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-åŠ å¯†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;åŠ å¯†&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkyg5yj20w80dijrg_hu_ef54f6784f2a1afd.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkyg5yj20w80dijrg_hu_be6867d4081c5732.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkyg5yj20w80dijrg_hu_2eea172ac3e291a0.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkyg5yj20w80dijrg_hu_ef54f6784f2a1afd.webp&#34;
               width=&#34;760&#34;
               height=&#34;318&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      åŠ å¯†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åŠ å¯†åŸºäº X.509 è¯ä¹¦å’Œå¯†é’¥ã€‚ç›®å‰ï¼Œä½¿ç”¨ PSKï¼Œä½¿ç”¨ Kubernetes Secret åˆ†å‘ç»™æ‰€æœ‰èŠ‚ç‚¹ã€‚ä½†æ˜¯ï¼ŒåŸºç¡€ç»“æ„ä¸ SPIFFE å…¼å®¹ï¼Œå¹¶å…è®¸åœ¨å°†æ¥çš„ç‰ˆæœ¬ä¸­åœ¨æ¯ä¸ªæœåŠ¡çº§åˆ«ä¸Šä½¿ç”¨ SPIFFE è¯ä¹¦æä¾›æœåŠ¡èº«ä»½éªŒè¯ã€‚æ•°æ®è·¯å¾„å®ç°ä½¿ç”¨ Linux å†…æ ¸çš„ IPSec å®ç°ï¼Œå®ƒé¿å…äº†ä½œä¸ºæ‰€æœ‰æœåŠ¡çš„ä¸€éƒ¨åˆ†è¿è¡Œ sidecar ä»£ç†çš„éœ€è¦ï¼Œå¹¶ç¡®ä¿é€šè¿‡ç°ä»£å¤„ç†å™¨ä¸­çš„ä¸“ç”¨ CPU æŒ‡ä»¤é›†æœ‰æ•ˆå’Œè‡ªåŠ¨åœ°ä½¿ç”¨ç¡¬ä»¶è¾…åŠ©åŠ å¯†åŠ é€Ÿã€‚&lt;/p&gt;
&lt;p&gt;é€æ˜åŠ å¯†æ˜¯ä¸€ç§ beta çº§åŠŸèƒ½ã€‚è¦å¯ç”¨è¯¥åŠŸèƒ½ï¼Œè¯·å°† &lt;code&gt;--enable-ipsec&lt;/code&gt; é€‰é¡¹ä¼ é€’ç»™ä»£ç†ï¼Œå¹¶é€šè¿‡ &lt;code&gt;--ipsec-key-file&lt;/code&gt; é€‰é¡¹æˆ–ä½¿ç”¨ Kubernetes Secret æä¾›é¢„å…±äº«å¯†é’¥ï¼ˆPSKï¼‰ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŸºäº-sockmap-bpf-çš„-sidecar-åŠ é€Ÿalpha&#34;&gt;åŸºäº Sockmap BPF çš„ sidecar åŠ é€Ÿï¼ˆalphaï¼‰&lt;/h2&gt;
&lt;p&gt;æ­£å¦‚&lt;a href=&#34;https://www.youtube.com/watch?v=ER9eIXL2_14&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ KubeCon ä¸Šå®£å¸ƒçš„é‚£æ ·&lt;/a&gt; ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ Cilium 1.4 è¿›è¡Œæœ¬åœ°è¿›ç¨‹é€šä¿¡åŠ é€Ÿã€‚&lt;/p&gt;
&lt;p&gt;Sockmap åŠ é€Ÿæœ¬åœ°è¿›ç¨‹é€šä¿¡ä¸»è¦ç”¨äº sidecar ä»£ç†å’Œæœ¬åœ°è¿›ç¨‹ä¹‹é—´çš„é€šä¿¡ï¼Œä½†é€‚ç”¨äºæ‰€æœ‰æœ¬åœ°è¿›ç¨‹ã€‚ 















&lt;figure  id=&#34;figure-sockmap-åŠ é€Ÿäº†å»¶è¿Ÿ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;SockMap åŠ é€Ÿäº†å»¶è¿Ÿ&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_b3dcd470719edb61.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_99c4a33a411437a5.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_95162ba5fe864bac.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_b3dcd470719edb61.webp&#34;
               width=&#34;760&#34;
               height=&#34;454&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      SockMap åŠ é€Ÿäº†å»¶è¿Ÿ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¯ç”¨ sockmap æ—¶ï¼Œè¯·æ±‚æ•°/s å’Œæœ€å¤§ååé‡éƒ½åŠ å€ï¼š 















&lt;figure  id=&#34;figure-sockmap-åŠ é€Ÿäº†è¯·æ±‚å¤„ç†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;SockMap åŠ é€Ÿäº†è¯·æ±‚å¤„â€‹â€‹ç†&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkb7mbj20w20j00su_hu_b115ed91deb8bb18.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkb7mbj20w20j00su_hu_1e6d446073dad646.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkb7mbj20w20j00su_hu_4053b7fa2dc8efcd.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkb7mbj20w20j00su_hu_b115ed91deb8bb18.webp&#34;
               width=&#34;760&#34;
               height=&#34;451&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      SockMap åŠ é€Ÿäº†è¯·æ±‚å¤„â€‹â€‹ç†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-sockmap-åŠ é€Ÿäº†ååé‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;SockMap åŠ é€Ÿäº†ååé‡&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_121bcf7dc3314f63.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_8886913a347392a5.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_c67e6e4ed16f5b8c.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_121bcf7dc3314f63.webp&#34;
               width=&#34;579&#34;
               height=&#34;343&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      SockMap åŠ é€Ÿäº†ååé‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œæ‰€æœ‰è¿™äº›æ€§èƒ½æ•°å­—å‡ä¸ºæ¯ä¸ª CPU æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;Sockmap åŠ é€Ÿæ˜¯ 1.4 ä¸­çš„ alpha çº§åˆ«åŠŸèƒ½ã€‚å¯ä»¥ä½¿ç”¨è¯¥ &lt;code&gt;--sockops-enable&lt;/code&gt; é€‰é¡¹å¯ç”¨å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ–°-grafana-ä»ªè¡¨æ¿&#34;&gt;æ–° Grafana ä»ªè¡¨æ¿&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-grafana&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Grafana&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmjnwpaj22fu0jywfi_hu_b6ed400f84293257.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmjnwpaj22fu0jywfi_hu_189387240c5cc335.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmjnwpaj22fu0jywfi_hu_99d7112368a3b69f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmjnwpaj22fu0jywfi_hu_b6ed400f84293257.webp&#34;
               width=&#34;760&#34;
               height=&#34;173&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Grafana
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ·»åŠ äº†å‡ ä¸ªæ–°çš„ Prometheus æŒ‡æ ‡ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å•ä¸ªå‘½ä»¤å°†æ–°çš„ Grafana ä»ªè¡¨æ¿éƒ¨ç½²åˆ°ä»»ä½• Kubernetes é›†ç¾¤ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl apply -f https://raw.githubusercontent.com/cilium/cilium/v1.4/examples/kubernetes/addons/prometheus/monitoring-example.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;















&lt;figure  id=&#34;figure-grafana&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Grafana&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmjiv1kj22f40z6di3_hu_b5514b474aa7487c.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmjiv1kj22f40z6di3_hu_ddbdc1809e18ecaf.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmjiv1kj22f40z6di3_hu_422cbc4352b3b0cc.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmjiv1kj22f40z6di3_hu_b5514b474aa7487c.webp&#34;
               width=&#34;760&#34;
               height=&#34;307&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Grafana
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;flannel-æ•´åˆæµ‹è¯•ç‰ˆ&#34;&gt;Flannel æ•´åˆï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/h2&gt;
&lt;p&gt;ä¸ä½¿ç”¨ Flannel CNI æ’ä»¶é…ç½®çš„ç°æœ‰é›†ç¾¤çš„ Cilium çš„å®‰å…¨ç­–ç•¥å®æ–½å’Œè´Ÿè½½å¹³è¡¡åŠŸèƒ½çš„ç”¨æˆ·ç»å¸¸è¦æ±‚ä¸ Flannel é›†æˆã€‚&lt;/p&gt;
&lt;p&gt;Cilium 1.4 å¼•å…¥äº†ä¸€ä¸ªæ–°çš„é…ç½®é€‰é¡¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;flannel-master-device&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cni0&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä½¿å¾— Cilium å¯ä»¥ä½¿ç”¨ CNI é“¾æ¥åœ¨ flannel ä¸Šè¿è¡Œã€‚é€šè¿‡å¯ç”¨ä»¥ä¸‹é€‰é¡¹ï¼Œè¿˜å¯ä»¥è‡ªåŠ¨è·å–å·¥ä½œèŠ‚ç‚¹ä¸Šçš„ç°æœ‰å®¹å™¨/å®¹å™¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;flannel-manage-existing-containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥é€‰é¡¹è¿˜éœ€è¦ç¼–è¾‘ Cilium DaemonSet ä»¥å¯ç”¨è¯¥ &lt;code&gt;hostPID: true&lt;/code&gt; é€‰é¡¹ï¼Œä»¥ä¾¿ Cilium å¯ä»¥æŸ¥çœ‹é™„åŠ åˆ°ç°æœ‰å®¹å™¨çš„æ‰€æœ‰è¿›ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;Flannel é›†æˆä¸»è¦ç”¨äºåœ¨ç°æœ‰é›†ç¾¤ä¸­å°è¯• Cilium åŠŸèƒ½æˆ–ç”¨äºè¿ç§»ç›®çš„ã€‚æœ‰äº›å¤§è§„æ¨¡æœ‰ç”¨çš„åŠŸèƒ½å°†æ— æ³•è¿è¡Œï¼Œè¿™åŒ…æ‹¬å°†æºçš„å®‰å…¨èº«ä»½åµŒå…¥ç½‘ç»œæ•°æ®åŒ…çš„èƒ½åŠ›ï¼Œè¿™éœ€è¦å›é€€åˆ°åŸºäº IP çš„è¯†åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å…³è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://docs.cilium.io/en/v1.4/gettingstarted/flannel-integration/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;flannel å…¥é—¨æŒ‡å—&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä¸å…¶ä»–-cni-çš„åŸºå‡†æµ‹è¯•&#34;&gt;ä¸å…¶ä»– CNI çš„åŸºå‡†æµ‹è¯•&lt;/h2&gt;
&lt;p&gt;åœ¨è¿‡å»çš„ä¸¤ä¸ªæœˆé‡Œï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡å¾ˆå¤š Cilium ä¸å…¶ä»– CNI æ’ä»¶çš„æ¯”è¾ƒã€‚å› æ­¤ï¼Œæˆ‘ä»¬é’ˆå¯¹å…¶ä»–æµè¡Œçš„ CNI æ’ä»¶è¿è¡Œäº†å‡ ä¸ªåŸºå‡†æµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬è¿›å…¥å®é™…æ•°å­—ä¹‹å‰çš„ä¸¤ä¸ªå•è¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŸºå‡†æµ‹è¯•å¾ˆéš¾ã€‚æˆ‘ä»¬å¹¶æœªå£°ç§°æˆ‘ä»¬å¯ä»¥åœ¨ç†æƒ³é…ç½®ä¸­é…ç½®å…¶ä»– CNI æ’ä»¶ã€‚å¦‚æœæ‚¨æœ‰æ„è§ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼Œæˆ‘ä»¬å¾ˆä¹æ„è¿›è¡Œè°ƒæ•´ã€‚è¿™äº›åŸºå‡†æµ‹è¯•çš„ç›®æ ‡æ˜¯è¡¨æ˜ï¼Œé€šè¿‡æ”¹å˜æ¶æ„å’Œåœ¨å †æ ˆä¸­ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä»…ä»…å°†ä¸€ä¸ª CNI ä¸å¦ä¸€ä¸ª CNI è¿›è¡Œæ¯”è¾ƒï¼Œå¯ä»¥äº§ç”Ÿæœ€å¤§çš„å½±å“ã€‚å³ä½¿æ˜¯ Ciliumï¼Œå…¶æ€§èƒ½ä¹Ÿä¼šå› é…ç½®è€Œå¼‚ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬ä¸“æ³¨äºæµ‹é‡ç½‘ç»œå¼€é”€ï¼Œå› æ­¤æˆ‘ä»¬åœ¨ä¸¤ä¸ªæœ¬åœ°å®¹å™¨ä¹‹é—´è¿è¡ŒåŸºå‡†æµ‹è¯•ï¼Œä»¥å°½å¯èƒ½å¤šåœ°æ¶ˆé™¤ç¡¬ä»¶é™åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;ç›®æ ‡ä¸æ˜¯è¾¾åˆ°æœ€å¤§æˆ–æœ€ä½çš„æ•°é‡ã€‚æˆ‘ä»¬ä½¿ç”¨å•ä¸ª CPU æ ¸å¿ƒè¿›è¡Œæµ‹é‡ï¼Œé™åˆ¶ CPU çš„æ•°é‡ã€‚ç³»ç»Ÿçš„ CPU è¶Šå¤šé‚£ä¹ˆä¸Šé™å¯èƒ½ä¼šæ›´é«˜ã€‚è€Œæˆ‘ä»¬å…³æ³¨åœ¨å•æ ¸ä¸‹æ•°å­—ä¹‹é—´çš„å·®å¼‚ï¼Œè€Œä¸æ˜¯æµ‹è¯•ç»“æœæ•°çš„æœ€å¤§å€¼ã€‚&lt;/li&gt;
&lt;li&gt;é€šå¸¸é‡‡å–å‡ ä¸ªé‡ç‚¹æ¥åšåŸºå‡†ã€‚åŸºå‡†æµ‹è¯•æ€»æ˜¯åœ¨ç‰¹å®šçš„ç¯å¢ƒä¸­å®Œæˆã€‚ç†è§£ä¸Šä¸‹æ–‡å¾ˆé‡è¦ã€‚å¦‚æœæ‚¨ä¸æ¸…æ¥šæˆ‘ä»¬åœ¨è¿™é‡Œå‘å¸ƒçš„æ•°å­—ï¼Œè¯·è”ç³»æˆ‘ä»¬ï¼Œæˆ‘ä»¬ä¼šæ¾„æ¸…å®ƒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯´äº†é‚£ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥è®©æˆ‘ä»¬æ·±å…¥ç ”ç©¶æ•°å­—ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-cni-å»¶è¿Ÿ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;CNI å»¶è¿Ÿ&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkgwo1j20fz09ta9z_hu_bcb27ae78e6da604.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkgwo1j20fz09ta9z_hu_c79cbb5d5b9bf95d.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkgwo1j20fz09ta9z_hu_a910feabbdde3cea.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkgwo1j20fz09ta9z_hu_bcb27ae78e6da604.webp&#34;
               width=&#34;575&#34;
               height=&#34;353&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      CNI å»¶è¿Ÿ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šæ•°å­—æ˜¾ç¤ºäº†ä¸¤ä¸ªå®¹å™¨åœ¨å•ä¸ªè¿æ¥ä¸Šäº¤æ¢å°½å¯èƒ½å¤šçš„ 1 å­—èŠ‚è¯·æ±‚å’Œå“åº”æ¶ˆæ¯æ—¶çš„å„ç§å»¶è¿Ÿæµ‹é‡ã€‚æ­¤æµ‹è¯•ä¸»è¦æ˜¾ç¤ºç‰¹å®šè½¬å‘è·¯å¾„æ˜¯å¦éå¸¸æœ‰åˆ©äºååé‡è€Œéå»¶è¿Ÿã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cilium Sockmap æ­£åœ¨å¤§åŠ›åˆ©ç”¨å…¶èƒ½å¤Ÿåœ¨å¥—æ¥å­—çº§åˆ«ä¸Šè¿è¡Œçš„ä¼˜åŠ¿ã€‚è¿™ä»…é€‚ç”¨äºèŠ‚ç‚¹å†…çš„è¿æ¥ã€‚&lt;/li&gt;
&lt;li&gt;ä¸‹ä¸€ä¸ªæœ€ä½³ç±»åˆ«æ˜¯åœ¨ IPVLAN æ¨¡å¼ä¸‹è¿è¡Œçš„ Ciliumï¼Œnetfilter/iptables å·²å®Œå…¨åˆ é™¤ã€‚Cilium æ˜¯å¦åœ¨åŠ è½½å®‰å…¨ç­–ç•¥è§„åˆ™æ—¶è¿è¡Œæ˜¯æœ‰åŒºåˆ«çš„ï¼Œä½†è¿™ç§å·®å¼‚å¾ˆå°ã€‚è¿™æ˜¯å› ä¸ºç”¨äºç­–ç•¥å®æ–½çš„é«˜æ•ˆçš„æ¯ CPU å“ˆå¸Œè¡¨å¯ä»¥æœ€å¤§é™åº¦åœ°å‡å°‘å¼€é”€ã€‚è¯·æ³¨æ„ï¼Œæ­¤æ•°å­—å·²åŒ…å«è´Ÿè½½å¹³è¡¡ BPF æ˜ å°„æŸ¥æ‰¾ï¼Œå› æ­¤æ­¤æ¨¡å¼å…è®¸æ›¿æ¢å…¶ä»–æµ‹è¯•æœªè€ƒè™‘çš„ kube-proxyã€‚&lt;/li&gt;
&lt;li&gt;æ¥ä¸‹æ¥æ˜¯ Flannel å’Œ Cilium ä»¥ veth æ¨¡å¼è¿è¡Œã€‚Flannel æ˜¯ä¸€ä¸ªä½¿ç”¨ Linux è·¯ç”±è¡¨çš„æœ€å°ç½‘ç»œæ’ä»¶ã€‚æç®€ä¸»ä¹‰å¾—åˆ°äº†å›æŠ¥ï¼Œä½†è¿™ä¹Ÿæ„å‘³ç€ flannel ä¸èƒ½æ‰§è¡Œä»»ä½•ç­–ç•¥æ‰§è¡Œï¼Œå¹¶ä¸”å¿…é¡»ä¾èµ–äº iptables æˆ– IPVS æ¨¡å¼çš„ kube-proxyã€‚ç”±äºæ‰§è¡Œäº†ä¸€äº›å·¥ä½œä»¥åœ¨è¿æ¥è¿‡ç¨‹ä¸­å¯ç”¨ç­–ç•¥å®æ–½ï¼Œå³ä½¿ä¹‹å‰æœªåŠ è½½ä»»ä½•ç­–ç•¥è§„åˆ™ï¼ŒCilium ä¹Ÿä¼šç•¥å¾®æ¶åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;Calico åœ¨æˆ‘ä»¬çš„æµ‹è¯•ä¸­æ˜¾ç¤ºå‡ºç•¥å¾®å¢åŠ çš„å¼€é”€ã€‚å¯èƒ½ç”±äºæ·»åŠ äº†æ›´å¤šçš„ iptables è§„åˆ™å¹¶ä¸”æ­£åœ¨ä½¿ç”¨æ›´å¤šçš„ netfilter é“¾ã€‚æˆ‘ä»¬æ²¡æœ‰ä¸ºæ­¤ç‰¹å®šæµ‹è¯•åŠ è½½ä»»ä½•ç­–ç•¥è§„åˆ™åˆ° Calico ä½†æ˜¯å‡è®¾ä½¿ç”¨ ipset å°†å…è®¸ç¼©æ”¾ OKã€‚ä¸å¦‚æ¯ä¸ª CPU å“ˆå¸Œè¡¨å¥½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›åŸºå‡†æµ‹è¯•çš„å…¸å‹æ•Œäººæ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸Šä¸‹æ–‡åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´åˆ‡æ¢ã€‚è¿™äº›æ•°å­—ä¼šç”±äº &lt;strong&gt;å¾ˆå¤š&lt;/strong&gt; å½“L4/L7ä»£ç†ä¼šç°å®çš„æ›´ç³Ÿã€‚&lt;/li&gt;
&lt;li&gt;ä»»ä½•æ¯ä¸ªæ•°æ®åŒ…å¼€é”€éƒ½ä¼šäº§ç”Ÿå·¨å¤§å½±å“ã€‚å†·ç¼“å­˜å’Œæ•°æ®ç»“æ„ä¹Ÿä¼šäº§ç”Ÿè´Ÿé¢å½±å“ã€‚å¿…é¡»éå†çš„ä»£ç è¶Šå°‘è¶Šå¥½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-cni-rr&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;CNI RR&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_b3dcd470719edb61.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_99c4a33a411437a5.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_95162ba5fe864bac.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkn6wfj20vs0j0glt_hu_b3dcd470719edb61.webp&#34;
               width=&#34;760&#34;
               height=&#34;454&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      CNI RR
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¾ç¤ºäº†æ‰§è¡Œç›¸åŒåŸºå‡†æµ‹è¯•çš„æ¯ç§’è¯·æ±‚æ•°ã€‚æ¯ç§’è¯·æ±‚ä¸å»¶è¿Ÿç›¸å½“é‡å ã€‚å¯¹äºä¹‹å‰çš„æµ‹è¯•ï¼Œè¿™äº›æ•°å­—æ˜¯æŒ‰ CPU æ ¸å¿ƒæµ‹é‡çš„ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-cni-stream&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;CNI Stream&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmjsdpnj20wk0iuaa4_hu_3f6a241e5d91472c.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmjsdpnj20wk0iuaa4_hu_1399a28bf196520.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmjsdpnj20wk0iuaa4_hu_b34d186c3a3468a1.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmjsdpnj20wk0iuaa4_hu_3f6a241e5d91472c.webp&#34;
               width=&#34;760&#34;
               height=&#34;439&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      CNI Stream
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ€åä¸€å¼ å›¾è¯´æ˜äº†é¢‘è°±çš„ç›¸åæƒ…å†µã€‚TCP_STREAM æµ‹è¯•è¯•å›¾é€šè¿‡å•ä¸ª TCP è¿æ¥æŠ½å–å°½å¯èƒ½å¤šçš„å­—èŠ‚ã€‚è¿™æ˜¯å†…å­˜å¸¦å®½å¯ä»¥å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ï¼Œç½‘ç»œç¡¬ä»¶æˆ–äº‘ä¾›åº”å•†é™åˆ¶é€šå¸¸å¯ä»¥äººä¸ºåœ°é™åˆ¶åŸºå‡†ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŠ›å¼€ Sockmap çš„æ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° IPVLAN æ¨¡å¼æ¯”å…¶ä»–æ‰€æœ‰æ¨¡å¼éƒ½æœ‰æ˜æ˜¾çš„ä¼˜åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬é¢„è®¡ Calico ä¸ Cilium çš„æ•°å­—ç›¸ä¼¼ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯èƒ½ä¼šé”™è¯¯åœ°é…ç½®ä¸€äº›ä¸œè¥¿ã€‚ä»»ä½•å¸®åŠ©è¡¨ç¤ºèµèµã€‚Calico åœ¨ TCP_STREAM ä¸­è¡¨ç°æ›´å·®å¹¶æ²¡æœ‰å¤šå¤§æ„ä¹‰ï¼Œå› ä¸ºæ­¤æµ‹è¯•ä¸­çš„ iptables å¼€é”€åœ¨å¤§é‡æ•°æ®ä¸­åˆ†æ‘Šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¸¦æœ‰-sockmap-çš„-cni-stream&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¸¦æœ‰ SockMap çš„ CNI Stream&#34; srcset=&#34;
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_121bcf7dc3314f63.webp 400w,
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_8886913a347392a5.webp 760w,
               /blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_c67e6e4ed16f5b8c.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-1-4/61411417ly1g05xmkrc2cj20g309jgli_hu_121bcf7dc3314f63.webp&#34;
               width=&#34;579&#34;
               height=&#34;343&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¸¦æœ‰ SockMap çš„ CNI Stream
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å°† Sockmap æ·»åŠ å›å›¾ç‰‡è¯æ˜äº†åœ¨å¥—æ¥å­—çº§åˆ«è¿›è¡Œç½‘ç»œè¿æ¥çš„æ€§èƒ½ä¼˜åŠ¿ã€‚åŒæ ·ï¼Œè¿™ç§å¥½å¤„ä»…åœ¨æœ¬åœ°è¿›ç¨‹ä¹‹é—´è·å¾—ï¼Œå› ä¸ºå½“ sidecar ä»£ç†ç”Ÿæ•ˆæ—¶æˆ–è€…å½“æœåŠ¡è¢«è°ƒåº¦åˆ°åŒä¸€èŠ‚ç‚¹ä¸Šä»¥ä¾¿æ”¹è¿›æœ¬åœ°é€šä¿¡æ—¶ï¼Œå®ƒç»å¸¸å‘ç”Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç”¨-cos-æ”¯æŒ-gke&#34;&gt;ç”¨ COS æ”¯æŒ GKE&lt;/h2&gt;
&lt;p&gt;ä¸€ä¸ªå…¨æ–°çš„ &lt;a href=&#34;https://docs.cilium.io/en/v1.4/gettingstarted/k8s-install-gke/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æŒ‡å—&lt;/a&gt; è®°å½•äº†å¦‚ä½•ä½¿ç”¨ COS åœ¨ GKE ä¸Šè¿è¡Œ Ciliumã€‚ä¸€ä¸ªå…¨æ–°çš„ &lt;a href=&#34;https://github.com/cilium/cilium/tree/master/examples/kubernetes/node-init&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;node-init DaemonSet&lt;/a&gt; å¯ä»¥é€šè¿‡å®‰è£… BPF æ–‡ä»¶ç³»ç»Ÿå¹¶é‡æ–°é…ç½® kubelet ä»¥åœ¨ CNI æ¨¡å¼ä¸‹è¿è¡Œæ¥å‡†å¤‡ GKE èŠ‚ç‚¹ã€‚ä½¿ç”¨ &lt;a href=&#34;https://github.com/cilium/cilium-etcd-operator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cilium-etcd-operator&lt;/a&gt; æä¾› kvstore è¦æ±‚ï¼ŒåŒæ—¶ä¿æŒå®‰è£…ç®€å•ã€‚&lt;/p&gt;
&lt;h2 id=&#34;14-å‘å¸ƒäº®ç‚¹&#34;&gt;1.4 å‘å¸ƒäº®ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤šé›†ç¾¤&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¢åŠ å…¨çƒæœåŠ¡ï¼Œé€šè¿‡æ³¨é‡Šå®ç°è·¨å¤šä¸ª Kubernetes æœåŠ¡çš„ Kubernetes æœåŠ¡ã€‚ ï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/li&gt;
&lt;li&gt;è®¸å¤šæ”¹è¿›çš„å®‰è£…æŒ‡å—ï¼ŒåŒ…æ‹¬åœ¨ä½¿ç”¨ &lt;a href=&#34;https://github.com/cilium/cilium-etcd-operator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cilium-etcd-operator&lt;/a&gt; æ—¶è‡ªåŠ¨æå– SSL è¯ä¹¦çš„å·¥å…·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€æ˜åŠ å¯†ï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å¸¦æœ‰PSKçš„IPsecå°†æ‰€æœ‰pod/hoståŠ å¯†åˆ°pod/hosté€šä¿¡ã€‚&lt;/li&gt;
&lt;li&gt;IPv4 å’Œ IPv6&lt;/li&gt;
&lt;li&gt;PSK é€šè¿‡ Kubernetes Secret é…ç½®&lt;/li&gt;
&lt;li&gt;æ— éœ€ä¿®æ”¹ app æˆ– podã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;IPVLAN æ”¯æŒï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;åˆ©ç”¨ IPVLAN çš„æ–°çš„æ›¿ä»£æ•°æ®è·¯å¾„æ¨¡å¼å–ä»£äº† veth å¯¹çš„ä½¿ç”¨ï¼Œä»¥æ”¹å–„å»¶è¿Ÿå’Œæ€§èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;DNSè¯·æ±‚/å“åº”æˆæƒ&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;ç°åœ¨ï¼ŒåŸºäºæ¯ä¸ªæœåŠ¡æ‰§è¡Œçš„å®é™… DNS è¯·æ±‚å’Œå“åº”ï¼Œå¼ºåˆ¶æ‰§è¡ŒåŸºäº FQDN çš„å®‰å…¨ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤ŸæŒ‡å®šæœåŠ¡å¯ä»¥æ‰§è¡Œçš„ DNS è¯·æ±‚çš„ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨äºæŸ¥è¯¢å„ä¸ªç«¯ç‚¹æ‰§è¡Œçš„ FQDN ä¸»æœºåæŸ¥æ‰¾çš„ API å’Œ CLI&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿåœ¨ä»£ç†è¿˜åŸä¸Šæ¢å¤ FQDN æ˜ å°„ä»¥è¿›è¡ŒæŒä¹…æ˜ å°„&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªç«¯ç‚¹å¯é…ç½®çš„æœ€å° TTL å’Œæœ€å¤§ FQDN ä¸»æœº&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;flannel æ•´åˆï¼ˆæµ‹è¯•ç‰ˆï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èƒ½å¤Ÿåœ¨ flannel ä¸Šè¿è¡Œ Ciliumã€‚Flannel æä¾›ç½‘ç»œï¼ŒCilium æä¾›è´Ÿè½½å¹³è¡¡å’Œç­–ç•¥å®æ–½ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤ŸæŒ‚é’©ç°æœ‰çš„ Flannel éƒ¨ç½²è€Œæ— éœ€é‡æ–°å¯åŠ¨ä»»ä½• podã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºäº AWS å…ƒæ•°æ®çš„ç­–ç•¥å®æ–½ï¼ˆalphaï¼‰&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;èƒ½å¤Ÿæ ¹æ® AWS å…ƒæ•°æ®æŒ‡å®šç­–ç•¥è§„åˆ™ï¼Œä¾‹å¦‚ EC2 æ ‡ç­¾ï¼Œå®‰å…¨ç»„åç§°ï¼ŒVPC åç§°ï¼Œå­ç½‘åç§°ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å…¶ä»–æŒ‡æ ‡å’Œç›‘æ§&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è”ç½‘&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ kvstore å®ç°æ–°çš„ç®€å• PodCIDR è·¯ç”±ä¼ æ’­æ¨¡å¼ã€‚é€šè¿‡ --auto-direct-node-routes`å¯ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨ï¼Œå¯¹äºæ–°å®‰è£…ï¼ŒIPv6 ç°åœ¨å·²ç¦ç”¨ã€‚ç°æœ‰çš„ ConfigMaps å°†ç»§ç»­å½“å‰è¡Œä¸ºã€‚å¯ç”¨é€šè¿‡ &lt;code&gt;--enable-ipv6=true&lt;/code&gt; ã€‚&lt;/li&gt;
&lt;li&gt;èƒ½å¤Ÿåœ¨ä¸ä½¿ç”¨è¯¥ &lt;code&gt;--enable-ipv4=false&lt;/code&gt; é€‰é¡¹ åˆ†é…ä»»ä½• IPv4 åœ°å€çš„æƒ…å†µä¸‹è¿è¡Œä»… IPv6 é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;æ”¹è¿›äº†è´Ÿè½½å‡è¡¡å™¨çš„æŒä¹…è¡Œä¸º&lt;/li&gt;
&lt;li&gt;BPF sockmap æ”¯æŒåŠ é€Ÿæœ¬åœ°è¿›ç¨‹é€šä¿¡ã€‚å¯é€šè¿‡é€‰é¡¹ &lt;code&gt;--sockops-enable&lt;/code&gt; ï¼ˆalphaï¼‰è·å¾—&lt;/li&gt;
&lt;li&gt;ä» IP åœ°å€è¯†åˆ«çš„è§£è€¦ç«¯ç‚¹ï¼Œä»¥æ”¯æŒä»»æ„ IP å¯»å€æ¨¡å‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•ˆç‡å’Œè§„æ¨¡&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¤§å¤§æé«˜äº† CiliumEndpoint CRD çš„å¯æ‰©å±•æ€§ã€‚ä¸å†éœ€è¦ä¸ºå¤§å‹éƒ¨ç½²ç¦ç”¨ CEPã€‚&lt;/li&gt;
&lt;li&gt;å¼•å…¥åŸºäºCIDR/DNSçš„è§„åˆ™çš„æ¯èŠ‚ç‚¹æœ¬åœ°æ ‡è¯†ï¼Œä¸éœ€è¦é›†ç¾¤æˆ–å…¨å±€èŒƒå›´ã€‚åœ¨èŠ‚ç‚¹ 23 ä¸Šæ‰§è¡Œ DNS è¯·æ±‚çš„ pod å¯¼è‡´è¯¥ pod çš„ç™½åå• IP ä¸å†å¯¹é›†ç¾¤ä¸­çš„å…¶ä»–èŠ‚ç‚¹äº§ç”Ÿä»»ä½•å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ IPv6 ä»¥å‡å°‘å°å‹éƒ¨ç½²ä¸­çš„å†…å­˜å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ç°åœ¨ï¼Œé»˜è®¤æƒ…å†µä¸‹ç¦ç”¨ BPF æ˜ å°„é¢„åˆ†é…ï¼Œä»¥å‡å°‘å°å‹éƒ¨ç½²ä¸­çš„å†…å­˜å ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨äºä»£ç†å’Œå®¢æˆ·ç«¯å‘½ä»¤çš„å•ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ä»¥å‡å°‘å®¹å™¨å›¾åƒå¤§&lt;/li&gt;
&lt;li&gt;å°† bugtool ç¼–è¯‘ä¸ºé™æ€äºŒè¿›åˆ¶æ–‡ä»¶&lt;/li&gt;
&lt;li&gt;æ–°çš„ cilium-operator æä¾›å•ä¾‹ä»»åŠ¡ï¼Œå¦‚ CEP åƒåœ¾æ”¶é›†ã€‚&lt;/li&gt;
&lt;li&gt;CNI ADD ä¸Šçš„åŒæ­¥ pod æ ‡ç­¾æ£€ç´¢ã€‚è¿™å¯ä»¥ç¨å¾®é™ä½ pod è°ƒåº¦é€Ÿç‡ï¼Œä½†é¿å…åœ¨æ²¡æœ‰ init ç­–ç•¥çš„æƒ…å†µä¸‹å¯åŠ¨ pod çš„ç­–ç•¥ä¸¢å¤±ã€‚&lt;/li&gt;
&lt;li&gt;çŠ¶æ€æ¢æµ‹å™¨ç°åœ¨åŒæ—¶æ”¶é›†çŠ¶æ€ä»¥æé«˜å‡†ç¡®æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ç»ˆæ­¢æ—¶æ›´å¥½çš„ä¿¡å·å¤„ç†å’Œæ–°çš„ terminationGracePeriodSeconds é»˜è®¤å€¼ä¸º 1 ç§’ï¼Œä»¥æœ€å¤§é™åº¦åœ°å‡å°‘ä»£ç†çš„åœæœºæ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;å¢åŠ äº†å¯¹ Kubernetes 1.13 çš„æ”¯æŒ&lt;/li&gt;
&lt;li&gt;æ”¯æŒè‡ªåŠ¨æŒ‚è½½ BPF æ–‡ä»¶ç³»ç»Ÿçš„æ–° CRI-O ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;æ–°çš„ NodeInit DaemonSet ä¸º Cilium å®‰è£…è‡ªåŠ¨å‡†å¤‡ GKE èŠ‚ç‚¹ã€‚è¿™æ ·å¯ä»¥ä½¿ç”¨ COS å’Œè‡ªåŠ¨ç¼©æ”¾ã€‚&lt;/li&gt;
&lt;li&gt;å½“ cilium ä¸ç®¡ç† kube-dns æ—¶ï¼Œcilium-operator ç°åœ¨ä¼šè‡ªåŠ¨é‡å¯ kube-dnsã€‚è¿™ç®€åŒ–äº†æ‰˜ç®¡ Kubernetes äº§å“çš„åˆå§‹å®‰è£…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ”¹è¿›äº† Istio é›†æˆ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è§‚æµ‹&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ–°æŒ‡æ ‡ï¼škvstore æ“ä½œï¼Œä»£ç†ä¸Šæ¸¸/å¤„ç†å»¶è¿Ÿï¼Œè½¬å‘å’Œä¸¢å¼ƒå­—èŠ‚ï¼ŒèŠ‚ç‚¹äº‹ä»¶ï¼ŒèŠ‚ç‚¹æ•°ï¼Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡æ¡£&lt;/strong&gt;
&lt;ul&gt;
&lt;li&gt;æ ‡å‡†å®‰è£…ç°åœ¨ä½¿ç”¨ &lt;a href=&#34;https://github.com/cilium/cilium-etcd-operator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cilium-etcd-operator&lt;/a&gt; ï¼Œä¸å†ä¾èµ–äºæä¾›å¤–éƒ¨ kvstore çš„ç”¨æˆ·ã€‚&lt;/li&gt;
&lt;li&gt;æ–°çš„ GKE æŒ‡å—ï¼ŒåŒ…æ‹¬ COS æ”¯æŒ&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ eksctl çš„ç®€åŒ– EKS æŒ‡å—&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·æ”¹è¿›äº†é›†ç¾¤ç½‘æ ¼æŒ‡å—&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å‡çº§è¯´æ˜&#34;&gt;å‡çº§è¯´æ˜&lt;/h2&gt;
&lt;p&gt;åƒå¾€å¸¸ä¸€æ ·ï¼Œè¯·æŒ‰ç…§&lt;a href=&#34;https://cilium.readthedocs.io/en/v1.4/install/upgrade/#upgrading-minor-versions&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‡çº§æŒ‡å—&lt;/a&gt; å‡çº§æ‚¨çš„ Cilium éƒ¨ç½²ã€‚éšæ„åœ¨ &lt;a href=&#34;https://cilium.herokuapp.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Slack&lt;/a&gt; ä¸Š ping æˆ‘ä»¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‘å¸ƒ&#34;&gt;å‘å¸ƒ&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‘è¡Œè¯´æ˜å’ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼š &lt;a href=&#34;https://github.com/cilium/cilium/releases/tag/1.4.0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;1.4.0&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;å®¹å™¨ imageï¼š &lt;code&gt;docker.io/cilium/cilium:v1.4.0&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes çš„æ— æœåŠ¡å™¨æ¡†æ¶çš„è¯„ä¼°</title>
      <link>https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/</link>
      <pubDate>Thu, 08 Nov 2018 13:20:46 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/</guid>
      <description>&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtshzvvdnj20m808ct8v_hu_4892e0d54a6a5e35.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtshzvvdnj20m808ct8v_hu_932ce1511e71617d.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtshzvvdnj20m808ct8v_hu_53e170da5ef30b66.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtshzvvdnj20m808ct8v_hu_4892e0d54a6a5e35.webp&#34;
               width=&#34;760&#34;
               height=&#34;285&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://rancher.com/blog/2018/2018-04-23-evaluation-of-serverless-frameworks-for-kbe/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Rancher 1.6 å’Œ Rancher 2.0 åº•å±‚å®¹å™¨ç¼–æ’å¼•æ“çš„æœ¯è¯­å’Œæ¦‚å¿µç•¥å¾®æœ‰æ‰€ä¸åŒã€‚æƒ³è¦äº†è§£è¿™äº›å·®å¼‚å°±éœ€è¦å…ˆäº†è§£ Cattle å’Œ Kubernetes ä¹‹é—´çš„æ ¹æœ¬åŒºåˆ«ã€‚å¯¹äºä½¿ç”¨è¿‡ Cattle æˆ–è€… Kubernetes çš„æ–°æ‰‹æ¥è¯´ï¼Œè¿™ç¯‡æ–‡ç« æ¯”è¾ƒé€‚åˆæ‚¨ã€‚åŒæ—¶ä½ ä¹Ÿå¯ä»¥ä»è¿™é‡Œè·å–åˆ°å®¹å™¨ç¼–æ’å¼•æ“ Cattle åˆ° Kubernetes çš„å¯¹åº”å…³ç³»è¯æ±‡è¡¨ cheatsheetã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://rancher.com/tags/serverless&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ— æœåŠ¡å™¨&lt;/a&gt; &lt;a href=&#34;https://rancher.com/tags/kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kubernetes&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åœ¨ Pokemon Go çš„æ—©æœŸï¼Œæˆ‘ä»¬éƒ½æƒŠè®¶äº Niantic å¦‚ä½•åœ¨å…¨çƒèŒƒå›´å†…æ‰©å±•å…¶ç”¨æˆ·ç¾¤ï¼Œç°åœ¨çœ‹æ¥ä»–ä»¬åº”è¯¥æ˜¯ä»¥æ— ç¼åœ°å‘å…¶å®¹å™¨é›†ç¾¤æ·»åŠ é¢å¤–çš„èŠ‚ç‚¹ä»¥å®¹çº³æ›´å¤šçš„ç©å®¶å’Œç¯å¢ƒï¼Œæ‰€æœ‰è¿™ä¸€åˆ‡éƒ½å¯ä»¥é€šè¿‡ä½¿ç”¨ Kubernetes ä½œä¸ºå®¹å™¨ç¼–æ’å·¥å…·æ¥å®ç°ã€‚Kubernetes åœ¨æ‰©å±•å’Œç®¡ç†å®¹å™¨åŸºç¡€æ¶æ„ä¸­ï¼Œèƒ½å¤Ÿä»å¼€å‘è€…è§’åº¦æŠ½è±¡å‡ºéƒ¨åˆ†è¿‡ç¨‹å’Œä½çº§ä¾èµ–å…³ç³»ã€‚è¿™ä½¿å®ƒæˆä¸ºä¸€ä¸ªéå¸¸æœ‰æ•ˆçš„å¹³å°ï¼Œç”¨äºå¼€å‘å’Œç»´æŠ¤è·¨å¤šä¸ªå®¹å™¨çš„åº”ç”¨ç¨‹åºæœåŠ¡ã€‚æœ¬æ–‡å°†æ¢è®¨å¦‚ä½•åˆ©ç”¨ K8S çš„è®¾è®¡å‚æ•°å’ŒæœåŠ¡ç¼–æ’åŠŸèƒ½ï¼Œå¹¶å°†å®ƒä»¬ä¸æ— æœåŠ¡å™¨æ¡†æ¶å’Œå‡½æ•°å³æœåŠ¡ï¼ˆFaaSï¼‰ç»“åˆèµ·æ¥ã€‚ç‰¹åˆ«æ˜¯ï¼Œæˆ‘ä»¬å°†æ·±å…¥ç ”ç©¶å…¶ç‰¹æ€§å’ŒåŠŸèƒ½ï¼Œåˆ†æåœ¨ K8s æ¶æ„ä¸Šæ„å»ºçš„ä¸‰ä¸ªæ— æœåŠ¡å™¨æ¡†æ¶çš„è¿è¡Œæ€§èƒ½å’Œæ•ˆç‡ï¼šï¼ˆiï¼‰Fission; ï¼ˆiiï¼‰OpenFaaS; ï¼ˆiiiï¼‰Kubelessã€‚&lt;/p&gt;
&lt;h2 id=&#34;a-ä¸ºä»€ä¹ˆ-kubernetes-æ˜¯æ— æœåŠ¡å™¨çš„ä¼˜ç§€ç¼–æ’ç³»ç»Ÿ&#34;&gt;A. ä¸ºä»€ä¹ˆ Kubernetes æ˜¯æ— æœåŠ¡å™¨çš„ä¼˜ç§€ç¼–æ’ç³»ç»Ÿï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æ— æœåŠ¡å™¨ä½“ç³»ç»“æ„æŒ‡çš„æ˜¯ä»å¼€å‘äººå‘˜ä¸­æŠ½è±¡å‡ºæœåŠ¡å™¨ç®¡ç†ä»»åŠ¡çš„åº”ç”¨ç¨‹åºä½“ç³»ç»“æ„ï¼Œå¹¶é€šè¿‡åŠ¨æ€åˆ†é…å’Œç®¡ç†è®¡ç®—èµ„æºæ¥æé«˜å¼€å‘é€Ÿåº¦å’Œæ•ˆç‡ã€‚å‡½æ•°å³æœåŠ¡ï¼ˆFaaSï¼‰æ˜¯ä¸€ä¸ªè¿è¡Œæ—¶è¢«æ„å»ºçš„æ— æœåŠ¡æ¶æ„ï¼Œå¯ä»¥åœ¨å…¶ä¸Šæ„å»ºæ— æœåŠ¡å™¨ä½“ç³»ç»“æ„ã€‚FaaS æ¡†æ¶ä½œä¸ºçŸ­æš‚çš„å®¹å™¨è¿è¡Œï¼Œå®ƒä»¬å·²ç»å®‰è£…äº†å…¬å…±è¯­è¨€è¿è¡Œæ—¶ï¼Œå¹¶å…è®¸åœ¨è¿™äº›è¿è¡Œæ—¶å†…æ‰§è¡Œä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;FaaS æ¡†æ¶åº”è¯¥èƒ½å¤Ÿåœ¨å„ç§åŸºç¡€æ¶æ„ä¸Šè¿è¡Œï¼Œä»¥å®ç°çœŸæ­£æœ‰ç”¨ï¼ŒåŒ…æ‹¬å…¬å…±äº‘ï¼Œæ··åˆäº‘å’Œå†…éƒ¨éƒ¨ç½²ç¯å¢ƒã€‚åœ¨çœŸå®ç”Ÿäº§ç¯å¢ƒä¸­åŸºäº FaaS è¿è¡Œæ—¶æ„å»ºçš„æ— æœåŠ¡å™¨æ¡†æ¶åº”è¯¥èƒ½å¤Ÿä¾é ç»è¿‡éªŒè¯å’Œæµ‹è¯•çš„ç¼–æ’å’Œç®¡ç†åŠŸèƒ½æ¥å¤§è§„æ¨¡éƒ¨ç½²å®¹å™¨å’Œåˆ†å¸ƒå¼å·¥ä½œè´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¼–æ’å’Œç®¡ç†ï¼Œæ— æœåŠ¡å™¨ FaaS æ¡†æ¶ä¾èµ– Kubernetesï¼Œå› ä¸ºå®ƒèƒ½å¤Ÿï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è·¨ä¸»æœºç¾¤é›†ç¼–æ’å®¹å™¨ã€‚&lt;/li&gt;
&lt;li&gt;æœ€å¤§åŒ–ç¨‹åº¦çš„åˆ©ç”¨ä¼ä¸šåº”ç”¨ç¨‹åºæ‰€éœ€çš„ç¡¬ä»¶èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;ç®¡ç†å’Œè‡ªåŠ¨åŒ–åº”ç”¨ç¨‹åºéƒ¨ç½²å¹¶æä¾›å£°æ˜å¼æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡æŒ‚è½½å­˜å‚¨è¿è¡Œæœ‰çŠ¶æ€åº”ç”¨ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;ç§’çº§æ‰©å®¹å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå¹¶æä¾›æ”¯æŒå®ƒä»¬çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å£°æ˜å¼åœ°ç®¡ç†æœåŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›ä¸€ä¸ªå¤§ç›˜ï¼Œæ¥æ£€æŸ¥åº”ç”¨çš„å¥åº·æƒ…å†µï¼Œå¹¶é€šè¿‡è‡ªåŠ¨é‡å¯ï¼Œè‡ªåŠ¨å¤åˆ¶å’Œè‡ªåŠ¨ç¼©æ”¾æ¥è¿›è¡Œåº”ç”¨ç¨‹åºçš„è‡ªæˆ‘ä¿®å¤ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn1842j20ao07idgj_hu_bb6f6fcbaefbb0b5.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn1842j20ao07idgj_hu_2de61cd76599be18.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn1842j20ao07idgj_hu_c4b9ce8d25fda75d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn1842j20ao07idgj_hu_bb6f6fcbaefbb0b5.webp&#34;
               width=&#34;384&#34;
               height=&#34;270&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 id=&#34;æ— æœåŠ¡å™¨ç³»ç»Ÿå¯ä»¥åŒ…æ‹¬é€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚è§¦å‘çš„åŠŸèƒ½æˆ–ä½œä¸ºä¸šåŠ¡æœåŠ¡çš„ä¸€éƒ¨åˆ†æ‰§è¡Œçš„åŠŸèƒ½è¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½å¯ä»¥ä½¿ç”¨å®¹å™¨é›†ç¾¤ç®¡ç†å™¨å¦‚-kubernetesè¿›è¡Œç¼–æ’èµ„æ–™æ¥æºdzonecom&#34;&gt;æ— æœåŠ¡å™¨ç³»ç»Ÿå¯ä»¥åŒ…æ‹¬é€šè¿‡å®¢æˆ·ç«¯è¯·æ±‚è§¦å‘çš„åŠŸèƒ½æˆ–ä½œä¸ºä¸šåŠ¡æœåŠ¡çš„ä¸€éƒ¨åˆ†æ‰§è¡Œçš„åŠŸèƒ½ã€‚è¿™ä¸¤ä¸ªè¿‡ç¨‹éƒ½å¯ä»¥ä½¿ç”¨å®¹å™¨é›†ç¾¤ç®¡ç†å™¨ï¼ˆå¦‚ Kubernetesï¼‰è¿›è¡Œç¼–æ’ã€‚èµ„æ–™æ¥æºï¼šdzone.com&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­ä»‹ç»ä¸‰ä¸ªæ— æœåŠ¡å™¨æ¡†æ¶å„è‡ªçš„ä¼˜ç‚¹å’Œç¼ºç‚¹ã€‚è¿™äº› FaaS æ¡†æ¶ä¹‹é—´çš„å…±åŒç‚¹æ˜¯ï¼Œå®ƒä»¬èƒ½å¤Ÿï¼ˆ1ï¼‰å°†å‡½æ•°è½¬åŒ–ä¸ºæœåŠ¡; ï¼ˆ2ï¼‰åˆ©ç”¨ Kubernetes å¹³å°ç®¡ç†è¿™äº›æœåŠ¡çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿™äº›æ¡†æ¶èƒŒåçš„è®¾è®¡ï¼Œä¼šç”±äºå…¶ç”¨äºå®ç°çš„å…·ä½“æ–¹å¼çš„ä¸åŒè€Œæœ‰å·®å¼‚ï¼Œæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­æ¢è®¨ã€‚æˆ‘ä»¬å°†åœ¨ä»¥ä¸‹éƒ¨åˆ†ä¸­é‡ç‚¹ä»‹ç»è¿™äº›æ¡†æ¶ä¹‹é—´çš„ä¸€äº›å·®å¼‚ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ¡†æ¶æ˜¯åœ¨æºç çº§åˆ«æˆ– Docker é•œåƒçº§åˆ«è¿˜æ˜¯åœ¨ä¸­é—´è¿è¡Œï¼Œä¾‹å¦‚ buildpacksï¼Ÿ&lt;/li&gt;
&lt;li&gt;ç”±äºä½¿ç”¨å…¬å…±è¯­è¨€è¿è¡Œåº“å¯åŠ¨å®¹å™¨ï¼Œå†·å¯åŠ¨æ€§èƒ½çš„å»¶è¿Ÿæˆ–æ‰§è¡Œå‡½æ•°æœŸé—´çš„å»¶è¿Ÿåˆ†åˆ«æ˜¯å¤šå°‘ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å®ƒä»¬å¦‚ä½•ä¸ºæœåŠ¡åˆ†é…å†…å­˜æˆ–èµ„æºï¼Ÿ&lt;/li&gt;
&lt;li&gt;å®ƒä»¬å¦‚ä½•è®¿é—®å’Œéƒ¨ç½² Kubernetes çš„ç¼–æ’å’Œå®¹å™¨ç®¡ç†åŠŸèƒ½ï¼Ÿ&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;b-openfaas-å’Œéƒ¨ç½²-spring-boot-æ¨¡æ¿&#34;&gt;B. OpenFaaS å’Œéƒ¨ç½² Spring Boot æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;OpenFaaS æ˜¯ä¸€ä¸ªæ— æœåŠ¡å™¨å¹³å°ï¼Œå…è®¸ä½¿ç”¨ Docker æˆ– Kubernetes ç®¡ç†å‡½æ•°ï¼Œå› ä¸ºå®ƒæ˜¯åŸºäº OCI æ ¼å¼çš„å®¹å™¨ã€‚OpenFaaS å¯ä»¥æ”¯æŒä¼ä¸šçº§æ‰©å±•çš„åŠŸèƒ½ï¼Œå¦‚ Docker Universal Control Plane ä¼ä¸šçº§é›†ç¾¤ç®¡ç†è§£å†³æ–¹æ¡ˆä¸ Docker Enterprise æˆ– Tectonic for Kubernetesã€‚OpenFaaS ç»§æ‰¿äº†ç°æœ‰çš„å®¹å™¨å®‰å…¨åŠŸèƒ½ï¼Œä¾‹å¦‚ r/o æ–‡ä»¶ç³»ç»Ÿï¼Œæƒé™ä¸‹é™å’Œå†…å®¹ä¿¡ä»»ã€‚å®ƒèƒ½å¤Ÿä½¿ç”¨ Docker æˆ– K8s è°ƒåº¦ç¨‹åº/å®¹å™¨ç¼–æ’çš„ç®¡ç†åŠŸèƒ½ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨å…¶ç›¸å…³çš„ä¸°å¯Œçš„å•†ä¸šå’Œç¤¾åŒºä¾›åº”å•†ç”Ÿæ€ç³»ç»Ÿã€‚åŒæ ·ï¼Œç”±äºå…¶å¤šè¯­è¨€ç‰¹æ€§ï¼Œä»»ä½•å¯æ‰§è¡Œæ–‡ä»¶éƒ½å¯ä»¥æ‰“åŒ…åˆ° OpenFaas ä¸­çš„å‡½æ•°ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;SpringBoot å’Œ Vertx æ˜¯å¼€å‘å¾®æœåŠ¡çš„éå¸¸æµè¡Œçš„æ¡†æ¶ï¼Œå®ƒä»¬çš„æ˜“ç”¨æ€§å·²ç»é€šè¿‡ OpenFaaS æ¨¡æ¿æ‰©å±•åˆ° OpenFaaSã€‚è¿™äº›æ¨¡æ¿å…è®¸åœ¨ OpenFaaS å¹³å°ä¸Šæ— ç¼åœ°å¼€å‘å’Œéƒ¨ç½²æ— æœåŠ¡å™¨å‡½æ•°ã€‚æ¨¡æ¿åœ¨&lt;a href=&#34;https://github.com/tmobile/faas-java-templates&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;çš„ github å­˜å‚¨åº“ä¸­å¯ç”¨ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•åœ¨ OpenFaaS å¹³å°ä¸Šéƒ¨ç½² SpringBoot æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨æœ¬åœ°å®‰è£…-openfaas&#34;&gt;åœ¨æœ¬åœ°å®‰è£… OpenFaaS&lt;/h3&gt;
&lt;h4 id=&#34;åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä¸‹è½½å’Œå®‰è£…æ¨¡æ¿&#34;&gt;åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šä¸‹è½½å’Œå®‰è£…æ¨¡æ¿&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦å®‰è£…å’Œé…ç½® FaaS CLI ä»¥ä¸æœ¬åœ°æˆ–è¿œç¨‹ K8S æˆ– Docker é…åˆä½¿ç”¨ã€‚åœ¨æœ¬ç»ƒä¹ ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ¬åœ° Docker å®¢æˆ·ç«¯ï¼Œå¹¶åœ¨åç»­å·¥ä½œä¸­å°†å…¶æ‰©å±•åˆ°åŸºäºäº‘çš„ GKE é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæœ€æ–°ç‰ˆæœ¬çš„ CLI ç±»å‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ curl -sL https://cli.openfaas.com | sudo sh&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;[æˆ–é€šè¿‡ MacOS ä¸Šçš„ brew install faas-cliã€‚]&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éªŒè¯æœ¬åœ°å®‰è£…çš„æ¨¡æ¿ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;faas-cli new --list&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬åˆ›å»ºæ— æœåŠ¡å™¨å‡½æ•°ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå®‰è£…è¿™äº›æ¨¡æ¿ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; faas-cli template pull https://github.com/tmobile/faas-java-templates.git
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;æŸ¥çœ‹å¸®åŠ©èœå•&#34;&gt;æŸ¥çœ‹å¸®åŠ©èœå•&lt;/h4&gt;
&lt;p&gt;å¯ä»¥ä¸ºæ‰€æœ‰å‘½ä»¤è°ƒç”¨-help æ ‡å¿—ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;$ faas-cli --help&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä»å‘½ä»¤è¡Œç®¡ç†æ‚¨çš„ OpenFaaS åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;ç”¨æ³•ï¼š &lt;code&gt;faas-cli&lt;/code&gt; [flags] &lt;code&gt;faas-cli&lt;/code&gt; [command]&lt;/p&gt;
&lt;p&gt;å¯ç”¨å‘½ä»¤ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;build&lt;/code&gt; æ„å»º OpenFaaS åŠŸèƒ½å®¹å™¨&lt;/p&gt;
&lt;p&gt;&lt;code&gt;deploy&lt;/code&gt; éƒ¨ç½² OpenFaaS åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;code&gt;help&lt;/code&gt; æœ‰å…³ä»»ä½•å‘½ä»¤çš„å¸®åŠ©&lt;/p&gt;
&lt;p&gt;&lt;code&gt;push&lt;/code&gt; å°† OpenFaaS åŠŸèƒ½æ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼ˆDocker Hubï¼‰&lt;/p&gt;
&lt;p&gt;&lt;code&gt;remove&lt;/code&gt; åˆ é™¤å·²éƒ¨ç½²çš„ OpenFaaS åŠŸèƒ½&lt;/p&gt;
&lt;p&gt;&lt;code&gt;version&lt;/code&gt; æ˜¾ç¤ºå®¢æˆ·ç«¯ç‰ˆæœ¬ä¿¡æ¯&lt;/p&gt;
&lt;p&gt;å‚æ•°ï¼š &lt;code&gt;-h&lt;/code&gt;ï¼Œ&lt;code&gt;--help&lt;/code&gt; å¸®åŠ© FAAS-CLI &lt;code&gt;-f&lt;/code&gt;ï¼Œ&lt;code&gt;--yaml string&lt;/code&gt; æè¿°å‡½æ•°çš„ yaml æ–‡ä»¶çš„è·¯å¾„&lt;/p&gt;
&lt;p&gt;æœ‰å…³å‘½ä»¤çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·ä½¿ç”¨ &lt;code&gt;faas-cli&lt;/code&gt; [command] &lt;code&gt;--help&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç”¨å·²å®‰è£…çš„æ¨¡æ¿åˆ›å»ºå‡½æ•°&#34;&gt;ç”¨å·²å®‰è£…çš„æ¨¡æ¿åˆ›å»ºå‡½æ•°&lt;/h4&gt;
&lt;p&gt;ä½¿ç”¨æ¥è‡ªVertx/SpringBootæ¨¡æ¿çš„githubå­˜å‚¨åº“ä¸­æˆ‘ä»¬æ„Ÿå…´è¶£çš„å‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼ˆç”¨æˆ‘ä»¬çš„å‡½æ•°æ›¿æ¢å¤§æ‹¬å·å†…çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬ä½¿ç”¨springbootä½†ä½ å¯ä»¥ç”¨vertxæ¨¡æ¿ä»£æ›¿å®ƒï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;faas-cli new {function of function} --lang springboot&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ mvnwï¼Œå‘½ä»¤æ˜¯&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;faas-cli new mvnw --lang vertx | springboot 
Folder: mvnw created.
Function created in folder: mvnw 
Stack file written: mvnw.yml
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;mvnw.yml çš„å†…å®¹ç°åœ¨å¯ä»¥ä¸ CLI ä¸€èµ·ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœæ‚¨çš„ç¾¤é›†æ˜¯è¿œç¨‹çš„æˆ–æœªåœ¨ 8080 ç«¯å£ä¸Šè¿è¡Œ - è¯·åœ¨ç»§ç»­ä¹‹å‰åœ¨ YAML æ–‡ä»¶ä¸­å¯¹å…¶è¿›è¡Œç¼–è¾‘ã€‚ä¸ºæˆ‘ä»¬çš„å‡½æ•°ç”Ÿæˆäº† handler.java æ–‡ä»¶ã€‚æ‚¨å¯ä»¥ç¼–è¾‘ pom.xml æ–‡ä»¶ï¼Œå¹¶åœ¨â€œbuildâ€æ­¥éª¤ä¸­å®‰è£…æ‰€æœ‰ä¾èµ–é¡¹ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h4 id=&#34;æ„å»ºå‡½æ•°&#34;&gt;æ„å»ºå‡½æ•°&lt;/h4&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»åˆ›å»ºäº†å‡½æ•°é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ faas cli build å‘½ä»¤æ„å»ºå‡½æ•°ã€‚æˆ‘ä»¬å°†ä½¿ç”¨æœ¬åœ° Docker å®¢æˆ·ç«¯å°†è¯¥å‡½æ•°æ„å»ºåˆ° docker é•œåƒä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ faas-cli build -f mvnw.yml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Building: mvnw.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Clearing temporary build folder: ./build/mvnw/
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Preparing ./mvnw/ ./build/mvnw/function
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Building: mvnw with node template. Please wait..
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;docker build -t mvnw .
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Sending build context to Docker daemon  8.704kB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Step 1/19 : FROM node:6.11.2-alpine
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ---&amp;gt; 16566b7ed19e
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Step 19/19 : CMD fwatchdog
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ---&amp;gt; Running in 53d04c1631aa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ---&amp;gt; f5e1266b0d32
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Removing intermediate container 53d04c1631aa
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Successfully built f5e1266b0d32
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Successfully tagged mvnw:latest
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Image: mvnw built.
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;æ¨é€æ‚¨çš„å‡½æ•°å¯é€‰å› ä¸ºæˆ‘ä»¬æ­£åœ¨è¿›è¡Œæœ¬åœ°å®‰è£…&#34;&gt;æ¨é€æ‚¨çš„å‡½æ•°ï¼ˆå¯é€‰ï¼Œå› ä¸ºæˆ‘ä»¬æ­£åœ¨è¿›è¡Œæœ¬åœ°å®‰è£…ï¼‰&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†éƒ¨ç½²æˆ‘ä»¬çš„å‡½æ•°ï¼Œæˆ‘ä»¬å°†ç¼–è¾‘ mvnw.yml æ–‡ä»¶å¹¶å°†â€œimageâ€è¡Œè®¾ç½®ä¸º Docker Hub ä¸Šé€‚ç”¨çš„ç”¨æˆ·åï¼Œä¾‹å¦‚ï¼šhishamhasan/mvnwã€‚ç„¶åæˆ‘ä»¬å°†å†æ¬¡æ„å»ºè¯¥å‡½æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ faas-cli push -f mvnw.yml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Pushing: mvnw to remote repository.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;The push refers to a repository &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;docker.io/hishamhasan/mvnw&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆæ­¤æ“ä½œåï¼Œé•œåƒå°†è¢«æ¨é€åˆ° Docker Hub æˆ–è¿œç¨‹ Docker registryï¼Œæˆ‘ä»¬å¯ä»¥éƒ¨ç½²å¹¶è¿è¡Œè¯¥å‡½æ•°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;éƒ¨ç½²å‡½æ•°&#34;&gt;éƒ¨ç½²å‡½æ•°&lt;/h4&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ faas-cli deploy -f mvnw.yml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Deploying: mvnw.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;No existing service to remove
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Deployed.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;URL: &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;http://localhost:8080/function/mvnw&lt;span class=&#34;o&#34;&gt;](&lt;/span&gt;http://localhost:8080/function/mvnw&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id=&#34;è°ƒç”¨å‡½æ•°&#34;&gt;è°ƒç”¨å‡½æ•°&lt;/h4&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;
$ faas-cli invoke -f mvnw.yml callme
Reading from STDIN - hit (Control + D) to stop.
This is my message

{&amp;#34;status&amp;#34;:&amp;#34;done&amp;#34;}
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥å°†å‘½ä»¤ä¼ é€’ç»™å‡½æ•°ï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ date | faas-cli invoke -f mvnw.yml mvnw
{&amp;#34;status&amp;#34;:&amp;#34;done&amp;#34;}
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;åœ¨-google-cloud-platform-ä¸Šå®‰è£…-openfaas&#34;&gt;åœ¨ Google Cloud Platform ä¸Šå®‰è£… OpenFaaS&lt;/h3&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ OpenFaaS æ—¶ï¼Œæˆ‘ä»¬ä¸é™äºä»»ä½•æœ¬åœ°æˆ–äº‘åŸºç¡€æ¶æ„ã€‚ç°åœ¨æˆ‘ä»¬å·²ç»åœ¨æœ¬åœ° Docker é›†ç¾¤ä¸­éƒ¨ç½²äº†æ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ GCP ä¸­çš„ GKE ä¸Šè®¾ç½®å®ƒæ¥åˆ©ç”¨ OpenFaaS çš„å¤šåŠŸèƒ½æ€§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªåä¸ºçš„ GCP é¡¹ç›®&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://cloud.google.com/sdk/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨æ­¤å¤„&lt;/a&gt; ä¸‹è½½å¹¶å®‰è£… Google Cloud SDKã€‚å®‰è£… SDK åï¼Œè¿è¡Œ gcloud initï¼Œç„¶åå°†é»˜è®¤é¡¹ç›®è®¾ç½®ä¸º openfaasã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ gcloud å®‰è£… kubectlï¼š &lt;code&gt;gcloud components install kubectl&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¯¼èˆªåˆ° API Manager&amp;gt;å‡­æ®&amp;gt;åˆ›å»ºå‡­æ®&amp;gt;æœåŠ¡å¸æˆ·å¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹© JSON ä½œä¸ºå¯†é’¥ç±»å‹ã€‚å°†æ–‡ä»¶é‡å‘½åä¸º json å¹¶å°†å…¶æ”¾åœ¨é¡¹ç›®ä¸­&lt;/li&gt;
&lt;li&gt;æ·»åŠ åˆšåˆšåœ¨ ComputeEngine&amp;gt; Metadata&amp;gt; SSH Keys ä¸‹åˆ›å»ºçš„ SSH å¯†é’¥ï¼Œå¹¶ä½¿ç”¨æ‚¨çš„å…¬å…± SSH å¯†é’¥ä½œä¸ºå€¼åˆ›å»ºåä¸º sshKeys çš„å…ƒæ•°æ®æ¡ç›®ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªä¸‰èŠ‚ç‚¹ Kubernetes é›†ç¾¤ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä½äºä¸åŒçš„åŒºåŸŸä¸­ã€‚åœ¨&lt;a href=&#34;https://kubernetes.io/docs/concepts/cluster-administration/federation/#selecting-the-right-number-of-clusters&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt; é˜…è¯» æœ‰å…³ç¾¤é›†è”åˆçš„ä¿¡æ¯ï¼Œä»¥äº†è§£å¦‚ä½•é€‰æ‹©æ¯ä¸ªç¾¤é›†ä¸­çš„ç¾¤é›†æ•°å’ŒèŠ‚ç‚¹æ•°ï¼Œè¿™äº›ç¾¤é›†å¯èƒ½ä¼šæ ¹æ®è´Ÿè½½æˆ–å¢é•¿é¢‘ç¹æ›´æ”¹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;k8s_version&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;gcloud container get-server-config --format&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;json &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq -r &lt;span class=&#34;s1&#34;&gt;&amp;#39;.validNodeVersions[0]&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;gcloud container clusters create demo &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --cluster-version&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;k8s_version&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --zone&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;us-west1-a &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --additional-zones&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;us-west1-b,us-west1-c &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --num-nodes&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --machine-type&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;n1-standard-2 &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;   --scopes&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;default,storage-rw
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°†é»˜è®¤èŠ‚ç‚¹æ± çš„å¤§å°å¢åŠ åˆ°æ‰€éœ€çš„èŠ‚ç‚¹æ•°ï¼ˆåœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†æŒ‰æ¯”ä¾‹å¢åŠ  3 åˆ° 9 ä¸ªèŠ‚ç‚¹ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gcloud container clusters resize --size=3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥é€šè¿‡è°ƒç”¨æ­¤ &lt;a href=&#34;https://cloud.google.com/sdk/gcloud/reference/container/clusters/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é¡µé¢ä¸­&lt;/a&gt; æ‰€è¿°çš„åˆé€‚çš„ SDK å‘½ä»¤æ¥æ‰§è¡Œé›†ç¾¤ç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚åˆ é™¤é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gcloud container clusters delete demo -z=us-west1-a&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;å®Œæ•´çš„ç®¡ç†è®¾ç½®&#34;&gt;å®Œæ•´çš„ç®¡ç†è®¾ç½®&lt;/h3&gt;
&lt;p&gt;è®¾ç½® kubectl çš„å‡­æ®ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;gcloud container clusters get-credentials demo -z=us-west1-a&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;åˆ›å»ºé›†ç¾¤ç®¡ç†å‘˜ç”¨æˆ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create clusterrolebinding &lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster-admin-&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;whoami&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-admin &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;gcloud config get-value core/account&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆäºˆ kubernetes-dashboard ç®¡ç†å‘˜æƒé™ï¼ˆç¡®ä¿åœ¨éç”Ÿäº§ç¯å¢ƒä¸­å®Œæˆï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl create clusterrolebinding &lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster-admin-&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;whoami&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--clusterrole&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cluster-admin &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--user&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;gcloud config get-value core/account&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨ kubectl åå‘ä»£ç†åœ¨æµè§ˆå™¨ï¼ˆæˆ–åœ¨ &lt;a href=&#34;http://localhost:9099/ui&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http//localhost:9099/ui&lt;/a&gt; ï¼‰ä¸Šè°ƒç”¨ &lt;code&gt;kubectl proxy --port=8080&lt;/code&gt; å’Œå¯¼èˆªåˆ° &lt;a href=&#34;http://localhost:8080/ui&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http//localhost:8080/ui&lt;/a&gt; æ¥è®¿é—® port-8080 ä¸Šçš„ kubernetes-dashboardï¼š&lt;a href=&#34;http://localhost:9099/ui&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost:9099/ui&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl proxy --port=9099 &amp;amp;&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Kubernetes é›†ç¾¤ç”±ä¸»èŠ‚ç‚¹å’ŒèŠ‚ç‚¹èµ„æºç»„æˆ - ä¸»èŠ‚ç‚¹åè°ƒé›†ç¾¤ï¼ŒèŠ‚ç‚¹è¿è¡Œåº”ç”¨ç¨‹åºï¼Œå¹¶é€šè¿‡ Kubernetes API è¿›è¡Œé€šä¿¡ã€‚æˆ‘ä»¬ä½¿ç”¨ OpenFaaS CLI æ„å»ºäº†å®¹å™¨åŒ–åº”ç”¨ç¨‹åºå¹¶ç¼–å†™äº†.yml æ–‡ä»¶æ¥æ„å»ºå’Œéƒ¨ç½²è¯¥å‡½æ•°ã€‚é€šè¿‡åœ¨ Kubernetes é›†ç¾¤ä¸­çš„èŠ‚ç‚¹ä¹‹é—´éƒ¨ç½²è¯¥å‡½æ•°ï¼Œæˆ‘ä»¬å…è®¸ GKE åˆ†å‘å’Œè°ƒåº¦æˆ‘ä»¬çš„èŠ‚ç‚¹èµ„æºã€‚æˆ‘ä»¬çš„èŠ‚ç‚¹å·²ç»é…ç½®äº†å¤„ç†å®¹å™¨æ“ä½œçš„å·¥å…·ï¼Œå¯ä»¥é€šè¿‡ kubectl CLIã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn3annj20d80apmy6_hu_793cc87fb3a4a082.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn3annj20d80apmy6_hu_675559dd3a595cff.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn3annj20d80apmy6_hu_de6715d690ea19fc.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn3annj20d80apmy6_hu_793cc87fb3a4a082.webp&#34;
               width=&#34;476&#34;
               height=&#34;385&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 id=&#34;èµ„æ–™æ¥æºdzonecom&#34;&gt;èµ„æ–™æ¥æºï¼šdzone.com&lt;/h4&gt;
&lt;h3 id=&#34;ä½¿ç”¨åŸºæœ¬èº«ä»½éªŒè¯éƒ¨ç½²-openfaas&#34;&gt;ä½¿ç”¨åŸºæœ¬èº«ä»½éªŒè¯éƒ¨ç½² OpenFaaSã€‚&lt;/h3&gt;
&lt;p&gt;å…‹éš† openfaas-gke å­˜å‚¨åº“ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/tmobile/faas-java-templates.git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; openfaas-gke
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åˆ›å»º openfaas å’Œ openfaas-fn åç§°ç©ºé—´ä»¥åœ¨å¤šç§Ÿæˆ·è®¾ç½®ä¸­éƒ¨ç½² OpenFaaS æœåŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f ./namespaces.yaml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¦åœ¨ openfaas å‘½åç©ºé—´ä¸­éƒ¨ç½² OpenFaaS æœåŠ¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f ./openfaas&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;è¿™å°†ä¸º OpenFaaS ç½‘å…³ï¼ŒFaaS-netesdï¼ˆK8S æ§åˆ¶å™¨ï¼‰ï¼ŒPrometheusï¼Œè­¦æŠ¥ç®¡ç†å™¨ï¼ŒNats å’Œé˜Ÿåˆ—å·¥ä½œè€…æä¾› K8s podsï¼Œéƒ¨ç½²å’ŒæœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åœ¨é€šè¿‡è®¾ç½®èº«ä»½éªŒè¯åœ¨ Internet ä¸Šå…¬å¼€ OpenFaaS ä¹‹å‰ä¿æŠ¤æˆ‘ä»¬çš„ç½‘å…³ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸€ç»„å‡­æ®åˆ›å»ºä¸€ä¸ªé€šç”¨çš„ basic-auth ç§˜å¯†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n openfaas create secret generic basic-auth &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;user&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;admin &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--from-literal&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;password&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;admin
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬å¯ä»¥ä¸ºæˆ‘ä»¬çš„ OpenFaaS ç½‘å…³éƒ¨ç½² Caddyï¼Œå®ƒæ—¢å¯ä»¥ä½œä¸ºåå‘ä»£ç†ï¼Œåˆå¯ä»¥ä½œä¸ºå¼ºå¤§çš„è´Ÿè½½å‡è¡¡å™¨ï¼Œå¹¶æ”¯æŒ WebSocket è¿æ¥ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f ./caddy&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ K8s æœåŠ¡å¯¹è±¡å…¬å¼€çš„å¤–éƒ¨ IP è®¿é—® OpenFaaS ç½‘å…³ UIï¼Œå¹¶ä½¿ç”¨æˆ‘ä»¬çš„å‡­æ®è®¿é—® http://&amp;lt;EXTERNAL-IP&amp;gt;ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œ kubectl get svc æ¥è·å–å¤–éƒ¨ IPã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;get_gateway_ip&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; kubectl -n openfaas describe service caddy-lb &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep Ingress &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk&lt;span class=&#34;s1&#34;&gt;&amp;#39;{ print $NF }&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;until&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;get_gateway_ip&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;]]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; sleep1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; -n &lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;gateway_ip&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;get_gateway_ip&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;OpenFaaS Gateway IP: &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;gateway_ip&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœå¤–éƒ¨ IP åœ°å€æ˜¾ç¤ºä¸º&lt;pending&gt;ï¼Œè¯·ç­‰å¾…ä¸€åˆ†é’Ÿå†æ¬¡è¾“å…¥ç›¸åŒçš„å‘½ä»¤ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæ‚¨å°šæœªæ‰§è¡Œä¸Šä¸€ä¸ªç»ƒä¹ ï¼Œè¯·é€šè¿‡è°ƒç”¨å®‰è£… OpenFaaS CLIã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;curl-sL cli.openfaas.com | sh&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åä½¿ç”¨ CLIï¼Œå‡­æ®å’Œ K8s æœåŠ¡å…¬å¼€çš„å¤–éƒ¨ IP ç™»å½•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;faas-cli login -u admin -p admin --gateway http://&amp;lt;EXTERNAL-IP&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šï¼ˆaï¼‰æ‚¨å¯ä»¥é€šè¿‡åˆ›å»º Ingress èµ„æºï¼Œä½¿ç”¨ Google Cloud L7 HTTPS è´Ÿè½½å‡è¡¡å™¨å…¬å¼€ OpenFaaS ç½‘å…³ã€‚æ‚¨å¯ä»¥åœ¨ &lt;a href=&#34;https://cloud.google.com/kubernetes-engine/docs/tutorials/http-balancer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt; æ‰¾åˆ°æœ‰å…³åˆ›å»ºè´Ÿè½½å‡è¡¡å™¨çš„è¯¦ç»†æŒ‡å—ã€‚ï¼ˆbï¼‰æ‚¨å¯ä»¥ä½¿ç”¨å¯†ç åˆ›å»ºæ–‡æœ¬æ–‡ä»¶ï¼Œå¹¶å°†è¯¥æ–‡ä»¶ä¸-password-stdin æ ‡å¿—ä¸€èµ·ä½¿ç”¨ï¼Œä»¥é¿å…åœ¨ bash å†å²è®°å½•ä¸­è¾“å…¥å¯†ç ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;æ‚¨å¯ä»¥ä½¿ç”¨å…ˆå‰åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­å‘å¸ƒçš„é•œåƒå¹¶éƒ¨ç½²æ— æœåŠ¡å™¨åŠŸèƒ½&#34;&gt;æ‚¨å¯ä»¥ä½¿ç”¨å…ˆå‰åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­å‘å¸ƒçš„é•œåƒå¹¶éƒ¨ç½²æ— æœåŠ¡å™¨åŠŸèƒ½ã€‚&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;$ faas-cli deploy -f mvnw.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;deploy å‘½ä»¤åœ¨å½“å‰ç›®å½•ä¸­æŸ¥æ‰¾ mvnw.yml æ–‡ä»¶ï¼Œå¹¶éƒ¨ç½² openfaas-fn å‘½åç©ºé—´ä¸­çš„æ‰€æœ‰å‡½æ•°ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šï¼ˆaï¼‰æ‚¨å¯ä»¥ä½¿ç”¨ com.openfaas.scale.min æ ‡ç­¾è®¾ç½®æœ€å°è¿è¡Œ pod æ•°ï¼Œå¹¶ä¸º autoscaler com.openfaas.scale.max è®¾ç½®æœ€å°å‰¯æœ¬æ•°ã€‚OpenFaaS çš„é»˜è®¤è®¾ç½®æ˜¯æ¯ä¸ªåŠŸèƒ½è¿è¡Œä¸€ä¸ª podï¼Œå¹¶ä¸”åœ¨è´Ÿè½½ä¸‹æœ€å¤šå¯æ‰©å±•åˆ° 20 ä¸ª pod&lt;/p&gt;&lt;/blockquote&gt;
&lt;h3 id=&#34;è°ƒç”¨æ— æœåŠ¡å™¨åŠŸèƒ½&#34;&gt;è°ƒç”¨æ— æœåŠ¡å™¨åŠŸèƒ½ã€‚&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;faas-cli invoke mvnw--gateway=http://&amp;lt;GATEWAY-IP&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h3 id=&#34;æ‚¨å¯ä»¥éšæ—¶æ³¨é”€&#34;&gt;æ‚¨å¯ä»¥éšæ—¶æ³¨é”€ï¼š&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;faas-cli logout -gateway http://&amp;lt;EXTERNAL-IP&amp;gt;&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;c-fission-å’Œéƒ¨ç½²ç®€å•çš„-http-è¯·æ±‚&#34;&gt;C. Fission å’Œéƒ¨ç½²ç®€å•çš„ HTTP è¯·æ±‚&lt;/h2&gt;
&lt;p&gt;Fission æ˜¯ä¸€ä¸ªæ— æœåŠ¡å™¨æ¡†æ¶ï¼Œå®ƒè¿›ä¸€æ­¥æŠ½è±¡å‡ºå®¹å™¨é•œåƒï¼Œå¹¶å…è®¸ä»…é€šè¿‡å‡½æ•°åœ¨ K8s ä¸Šåˆ›å»º HTTP æœåŠ¡ã€‚Fission ä¸­çš„å®¹å™¨é•œåƒåŒ…å«è¯­è¨€è¿è¡Œæ—¶ï¼Œä¸€ç»„å¸¸ç”¨çš„ä¾èµ–é¡¹å’Œä¸€ä¸ªç”¨äºå‡½æ•°çš„åŠ¨æ€åŠ è½½å™¨ã€‚å¯ä»¥å®šåˆ¶è¿™äº›å›¾åƒï¼Œä¾‹å¦‚æ‰“åŒ…äºŒè¿›åˆ¶ä¾èµ–é¡¹ã€‚Fission èƒ½å¤Ÿé€šè¿‡ç»´æŠ¤ä¸€ä¸ªæ­£åœ¨è¿è¡Œçš„å®¹å™¨æ± æ¥ä¼˜åŒ–å†·å¯åŠ¨å¼€é”€ã€‚å½“æ–°è¯·æ±‚æ¥è‡ªå®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæˆ–ä¸šåŠ¡æœåŠ¡æ—¶ï¼Œå®ƒä¼šå°†è¯¥å‡½æ•°å¤åˆ¶åˆ°å®¹å™¨ä¸­ï¼ŒåŠ¨æ€åŠ è½½å®ƒï¼Œå¹¶å°†è¯·æ±‚è·¯ç”±åˆ°è¯¥å®ä¾‹ã€‚å› æ­¤ï¼Œå¯¹äº NodeJS å’Œ Python å‡½æ•°ï¼Œå®ƒèƒ½å¤Ÿæœ€å°åŒ– 100 æ¯«ç§’çš„å†·å¯åŠ¨å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡åœ¨æºç çº§åˆ«è¿›è¡Œæ“ä½œï¼ŒFission ä½¿ç”¨æˆ·ä¸å¿…å¤„ç†å®¹å™¨çš„é•œåƒæ„å»ºï¼Œå°†é•œåƒæ¨é€åˆ°æ³¨å†Œè¡¨ï¼Œç®¡ç†æ³¨å†Œè¡¨å‡­æ®ï¼Œé•œåƒç‰ˆæœ¬æ§åˆ¶å’Œå…¶ä»–ç®¡ç†ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn7oehj20hs0dcglu_hu_33517577efbfaf27.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn7oehj20hs0dcglu_hu_478d4affa1c34ffa.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn7oehj20hs0dcglu_hu_bf76ceb708c9f724.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn7oehj20hs0dcglu_hu_33517577efbfaf27.webp&#34;
               width=&#34;640&#34;
               height=&#34;480&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 id=&#34;-serverless-functions-as-service-for-kubernetes&#34;&gt;&lt;a href=&#34;https://kubernetes.io/blog/2017/01/fission&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://kubernetes.io/blog/2017/01/fission&lt;/a&gt;-serverless-functions-as-service-for-kubernetes&lt;/h4&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼ŒFission è¢«è®¾è®¡ä¸ºä¸€ç»„å¾®æœåŠ¡ï¼Œä¸»è¦ç»„ä»¶å¦‚ä¸‹æ‰€è¿°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è·Ÿè¸ªåŠŸèƒ½ï¼ŒHTTP è·¯ç”±ï¼Œäº‹ä»¶è§¦å‘å™¨å’Œç¯å¢ƒé•œåƒçš„æ§åˆ¶å™¨;&lt;/li&gt;
&lt;li&gt;ç®¡ç†ç©ºé—²ç¯å¢ƒå®¹å™¨æ± çš„æ± ç®¡ç†å™¨ï¼Œå°†å‡½æ•°åŠ è½½åˆ°è¿™äº›å®¹å™¨ä¸­ï¼Œå¹¶å®šæœŸæ€æ­»å‡½æ•°å®ä¾‹ä»¥ç®¡ç†å®¹å™¨å¼€é”€;&lt;/li&gt;
&lt;li&gt;ä¸€ç§è·¯ç”±å™¨ï¼Œå®ƒæ¥æ”¶ HTTP è¯·æ±‚å¹¶å°†å®ƒä»¬è·¯ç”±åˆ° poolmgr æˆ–å·²åœ¨è¿è¡Œçš„å®ä¾‹ä¸­çš„æ–°é²œå‡½æ•°å®ä¾‹ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­ GCP ä¸Šåˆ›å»ºçš„ K8s ç¾¤é›†åœ¨ Fission ä¸Šéƒ¨ç½² HTTP è¯·æ±‚ã€‚è®©æˆ‘ä»¬èµ°è¿‡è¿™ä¸ªè¿‡ç¨‹å§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£… Helm CLIï¼ŒHelm æ˜¯ä¸€ä¸ª Kubernetes åŒ…ç®¡ç†å™¨ã€‚è®©æˆ‘ä»¬åˆå§‹åŒ– Helmï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ helm init
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ GKE å‘½åç©ºé—´ä¸­å®‰è£… Fission&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ helm install --namespace fission https://github.com/fission/fission/releases/download/0.7.0/fission-all-0.7.0.tgz
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£… Fission CLI&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OSX&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl -Lo fission https://github.com/fission/fission/releases/download/0.7.0/fission-cli-osx&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; chmod +x fission &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; sudo mv fission /usr/local/bin/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Windows&lt;/strong&gt; åœ¨ &lt;a href=&#34;https://github.com/fission/fission/releases&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt; ä¸‹è½½ Windows å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»º HTTP æœåŠ¡æˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡æ¥æ‰“å° Hello Worldã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ cat &amp;gt; hello.py
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;def main&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;context&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    print &lt;span class=&#34;s2&#34;&gt;&amp;#34;Hello, world!&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Fission ä¸Šéƒ¨ç½² HTTP æœåŠ¡&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ fission &lt;span class=&#34;k&#34;&gt;function&lt;/span&gt; create --name hello --env python --code hello.py --route /hello
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl http://&amp;lt;fission router&amp;gt;/hello
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Hello, world!
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;d-kubeless-å’Œéƒ¨ç½²-spring-boot-æ¨¡æ¿&#34;&gt;D. Kubeless å’Œéƒ¨ç½² Spring Boot æ¨¡æ¿&lt;/h2&gt;
&lt;p&gt;Kubeless æ˜¯ä¸€ä¸ª Kubernetes åŸç”Ÿæ— æœåŠ¡å™¨æ¡†æ¶ï¼Œå¯ä»¥å°†åŠŸèƒ½éƒ¨ç½²åœ¨ K8s é›†ç¾¤ä¸Šï¼ŒåŒæ—¶å…è®¸ç”¨æˆ·åˆ©ç”¨ Kubernetes èµ„æºæä¾›è‡ªåŠ¨æ‰©å±•ï¼ŒAPI è·¯ç”±ï¼Œç›‘æ§å’Œæ•…éšœæ’é™¤ã€‚Kubeless ä½¿ç”¨ Kubernetes è‡ªå®šä¹‰èµ„æºå®šä¹‰æ¥åˆ›å»ºè‡ªå®šä¹‰ kubernetes èµ„æºçš„åŠŸèƒ½ã€‚è‡ªå®šä¹‰èµ„æºæ˜¯ &lt;a href=&#34;https://kubernetes.io/docs/reference/api-overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes API&lt;/a&gt; ä¸­çš„ç«¯ç‚¹ï¼Œç”¨äºå­˜å‚¨&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/kubernetes-objects/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;API å¯¹è±¡&lt;/a&gt;çš„é›†åˆæŸç§ç±»å‹çš„ K8s pod å¯¹è±¡ï¼Œå®ƒä»£è¡¨äº†ç‰¹å®š K8s å®‰è£…çš„è‡ªå®šä¹‰ã€‚è‡ªå®šä¹‰èµ„æºéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬å¯ä»¥é€šè¿‡åŠ¨æ€æ³¨å†Œè¿›è¡Œé…ç½®ç„¶ååœ¨æ­£åœ¨è¿è¡Œçš„é›†ç¾¤ä¸­åˆ é™¤ï¼Œé›†ç¾¤ç®¡ç†å‘˜å¯ä»¥ç‹¬ç«‹äºé›†ç¾¤æœ¬èº«æ›´æ–°è‡ªå®šä¹‰èµ„æºã€‚Kubeless åˆ©ç”¨è¿™äº›åŠŸèƒ½å¹¶è¿è¡Œé›†ç¾¤å†…æ§åˆ¶å™¨ï¼Œå¯ä»¥è·Ÿè¸ªè¿™äº›è‡ªå®šä¹‰èµ„æºå¹¶æŒ‰éœ€å¯åŠ¨è¿è¡Œæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åœ¨ä¸Šä¸€ä¸ªç»ƒä¹ ä¸­ GCP ä¸Šåˆ›å»ºçš„ K8s ç¾¤é›†åœ¨ Fission ä¸Šéƒ¨ç½² HTTP è¯·æ±‚ã€‚è®©æˆ‘ä»¬èµ°è¿‡è¿™ä¸ªè¿‡ç¨‹å§ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;è®¿é—® Kubernetes ä»ªè¡¨æ¿&lt;/p&gt;
&lt;p&gt;åœ¨ K8s é›†ç¾¤æ­£åœ¨è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ kubectl åœ¨ 8080 ç«¯å£ä¸Šä½¿ç”¨ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl proxy --port=8080&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsjw13nsj218g0jrq81_hu_382ad6a76d00ad86.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsjw13nsj218g0jrq81_hu_d929cda4a270fea6.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsjw13nsj218g0jrq81_hu_ffacc10de48fe325.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsjw13nsj218g0jrq81_hu_382ad6a76d00ad86.webp&#34;
               width=&#34;760&#34;
               height=&#34;337&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å¯ä»¥é€šè¿‡æµè§ˆå™¨å¯¼èˆªåˆ°&lt;a href=&#34;http://localhost8080/ui&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://localhost8080/i&lt;/a&gt;æ¥è®¿é—®ä»ªè¡¨æ¿&lt;/strong&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£… Kubeless CLI&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;OSX&lt;/strong&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl -L https://github.com/kubeless/kubeless/releases/download/0.0.20/kubeless_darwin-amd64.zip &amp;gt; kubeless.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ unzip kubeless.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo cp bundles/kubeless_darwin-amd64/kubeless /usr/local/bin/
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;Windows&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ &lt;a href=&#34;https://github.com/kubeless/kubeless/releases&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt; ä¸‹è½½ Windows å¯æ‰§è¡Œæ–‡ä»¶ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ K8s ç¾¤é›†ä¸­éƒ¨ç½² Kubeless&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug1ieuj20jr0c3dgl_hu_fc86d34756d14b31.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug1ieuj20jr0c3dgl_hu_a059b9eb07d40ef9.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug1ieuj20jr0c3dgl_hu_67dd85a44ff6239d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug1ieuj20jr0c3dgl_hu_fc86d34756d14b31.webp&#34;
               width=&#34;711&#34;
               height=&#34;435&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨æ­¤&lt;a href=&#34;https://github.com/kubeless/kubeless/releases&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é“¾æ¥ä¸­&lt;/a&gt; çš„æ¸…å•åœ¨ K8s ç¾¤é›†ä¸­éƒ¨ç½² Kublessã€‚æ ¹æ®æ¸…å•åˆ›å»ºä¸€ä¸ª kubeless å‘½åç©ºé—´ï¼Œä¸€ä¸ªå‡½æ•° ThirdPartyResourceï¼Œä¸€ä¸ª kubeless æ§åˆ¶å™¨ï¼Œå¹¶åœ¨è¿›ç¨‹ä¸­è®¾ç½®ä¸€ä¸ª kafkaï¼Œzookeeper StatefulSetã€‚Kubless çš„ä¸€ä¸ªä¸»è¦ä¼˜ç‚¹æ˜¯å®ƒå…·æœ‰é«˜åº¦çš„ Kubernetes åŸç”Ÿç‰¹æ€§ï¼Œå®ƒå¯ä»¥è®¾ç½®é rbac å’Œ rbac ç‰¹å®šç¯å¢ƒã€‚ä¸‹é¢çš„å±å¹•æˆªå›¾æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ kubectl å‘½ä»¤åœ¨é rbac ç¯å¢ƒä¸­éƒ¨ç½² kubelessã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug4tx0j20hr05bwew_hu_ab5e202a725bdb01.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug4tx0j20hr05bwew_hu_524e63aa9ca7ab60.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug4tx0j20hr05bwew_hu_872f59140e12677e.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwx4ug4tx0j20hr05bwew_hu_ab5e202a725bdb01.webp&#34;
               width=&#34;639&#34;
               height=&#34;191&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åˆ›å»ºå‡½æ•°&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªæœåŠ¡å‡½æ•°ï¼Œå¹¶ä»è¯·æ±‚ä¸­æ¥å—æ–¹æ³•ï¼ŒURLï¼Œæ ‡é¢˜å’Œè¯·æ±‚ä½“ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;const &lt;span class=&#34;nv&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; require&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    http.createServer&lt;span class=&#34;o&#34;&gt;((&lt;/span&gt;request, response&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      const &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; headers, method, url &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; request&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nb&#34;&gt;let&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      request.on&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;error&amp;#39;&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;err&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        console.error&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;err&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt;.on&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;data&amp;#39;&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;chunk&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        body.push&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;chunk&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt;.on&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;end&amp;#39;&lt;/span&gt;, &lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&amp;gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;nv&#34;&gt;body&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; Buffer.concat&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;body&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;.toString&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        // æ­¤æ—¶ï¼Œæˆ‘ä»¬æœ‰æ ‡é¢˜ï¼Œæ–¹æ³•ï¼Œç½‘å€å’Œè¯·æ±‚ä½“ï¼Œç°åœ¨å¯ä»¥åšä»»ä½•æˆ‘ä»¬éœ€è¦çš„äº‹æƒ…æ¥å›åº”è¿™ä¸ªè¦æ±‚ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt;.listen&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;8080&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; // æ¿€æ´»æ­¤æœåŠ¡å™¨ï¼Œç›‘å¬ &lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt; ç«¯å£ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Kubeless ç¯å¢ƒä¸­è¿è¡Œå‡½æ•°&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡æä¾›ä»¥ä¸‹ä¿¡æ¯å‘ Kubeless æ³¨å†Œè¯¥å‡½æ•°ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç”¨äºé€šè¿‡ Web è®¿é—®è¯¥å‡½æ•°çš„åç§°&lt;/li&gt;
&lt;li&gt;ç”¨äºè®¿é—®è¯¥å‡½æ•°çš„åè®®&lt;/li&gt;
&lt;li&gt;è¦æ‰§è¡Œä»¥è¿è¡Œä»£ç çš„è¯­è¨€è¿è¡Œæ—¶&lt;/li&gt;
&lt;li&gt;åŒ…å«å‡½æ•°ä»£ç çš„æ–‡ä»¶çš„åç§°&lt;/li&gt;
&lt;li&gt;æ–‡ä»¶å†…éƒ¨å‡½æ•°çš„åç§°&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;é€šè¿‡æ·»åŠ ä¸Šé¢çš„å˜é‡ 1-5ï¼Œæˆ‘ä»¬è°ƒç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ Kubeless ä¸­æ³¨å†Œå’Œéƒ¨ç½²å‡½æ•°ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt; kubeless function deploy serverequest--trigger-http --runtime nodejs6 --handler serverequest.createServer --from-file /tmp/serverequest.js&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&#34;eæ— æœåŠ¡å™¨å¹³å°çš„è¯„ä¼°&#34;&gt;E.æ— æœåŠ¡å™¨å¹³å°çš„è¯„ä¼°&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬è¯„ä¼°çš„æ¯ä¸ªæ— æœåŠ¡å™¨å¹³å°éƒ½æœ‰å…¶ç‹¬ç‰¹çš„ä»·å€¼ä¸»å¼ ã€‚ä½¿ç”¨ OpenFaasï¼Œä»»ä½•è¿›ç¨‹æˆ–å®¹å™¨éƒ½å¯ä»¥æ‰“åŒ…ä¸º Linux æˆ– Windows çš„æ— æœåŠ¡å™¨åŠŸèƒ½ã€‚å¯¹äºä¼ä¸šè€Œè¨€ï¼ŒOpenFaaS ä½¿ç”¨çš„ä½“ç³»ç»“æ„æä¾›äº†æ— ç¼æ’å…¥è®¡åˆ’ç¾¤é›†å’Œç°æœ‰å¾®æœåŠ¡çš„ CI/CD å·¥ä½œæµçš„èƒ½åŠ›ï¼Œå› ä¸º OpenFaaS æ˜¯å›´ç»• Docker æ„å»ºçš„ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½æ‰“åŒ…åˆ° Docker é•œåƒä¸­ã€‚OpenFaaS è¿˜ä¸ºä¼ä¸šæä¾›äº†ä¸€ç§é€šè¿‡å¤–éƒ¨ APIï¼Œç½‘å…³ç®¡ç†å’Œæ‰§è¡Œå‡½æ•°çš„æ— ç¼æ–¹å¼ï¼Œå¹¶ç®¡ç†å‡½æ•°çš„ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬é€šè¿‡æä¾›å•†è¿›è¡Œéƒ¨ç½²ï¼Œæ‰©å±•å’Œ secret ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;Fission å…·æœ‰äº‹ä»¶é©±åŠ¨æ¶æ„ï¼Œä½¿å…¶æˆä¸ºçŸ­æœŸæ— çŠ¶æ€åº”ç”¨ç¨‹åºçš„ç†æƒ³é€‰æ‹©ï¼ŒåŒ…æ‹¬ REST API æˆ– webhook å®ç°ä»¥åŠ DevOps è‡ªåŠ¨åŒ–ã€‚ä½¿ç”¨ Fission çš„ä¸€ä¸ªå¾ˆå¥½çš„ç”¨ä¾‹å¯èƒ½æ˜¯å¼€å‘èŠå¤©æœºå™¨äººçš„åç«¯ï¼Œå› ä¸º Fission å¯ä»¥å®ç°è‰¯å¥½çš„å†·å¯åŠ¨æ€§èƒ½ï¼Œå¹¶åœ¨éœ€è¦æ—¶é€šè¿‡ä¿æŒè¿è¡Œæ—¶çš„å®¹å™¨æ± æ¥æä¾›å¿«é€Ÿå“åº”æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼ŒKubeless æ¶æ„åˆ©ç”¨åŸç”Ÿ Kubernetes æ¦‚å¿µæ¥éƒ¨ç½²å’Œç®¡ç†åŠŸèƒ½ï¼Œä¾‹å¦‚è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼Œç”¨äºå®šä¹‰åŠŸèƒ½å’Œè‡ªå®šä¹‰æ§åˆ¶å™¨æ¥ç®¡ç†å‡½æ•°ï¼Œå°†å…¶éƒ¨ç½²ä¸º Kubernetes éƒ¨ç½²å¹¶é€šè¿‡ Kubernetes æœåŠ¡å…¬å¼€å®ƒã€‚ä¸ Kubernetes åŸç”ŸåŠŸèƒ½çš„ç´§å¯†ç»“åˆå°†å¸å¼•ç°æœ‰çš„ Kubernetes ç”¨æˆ·ï¼Œé™ä½æ‰€éœ€çš„å­¦ä¹ æ›²çº¿å¹¶æ— ç¼æ’å…¥ç°æœ‰çš„ Kubernetes æ¶æ„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºä½œè€…&#34;&gt;å…³äºä½œè€…&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-hisham&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Hisham&#34; srcset=&#34;
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn5g0oj206y06y74m_hu_2a962372ef7d1176.webp 400w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn5g0oj206y06y74m_hu_64d3796c1d069c64.webp 760w,
               /blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn5g0oj206y06y74m_hu_af78bd54b1124d52.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/evaluation-of-serverless-frameworks-for-kbe/61411417ly1fwtsgn5g0oj206y06y74m_hu_2a962372ef7d1176.webp&#34;
               width=&#34;250&#34;
               height=&#34;250&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Hisham
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;Hisham æ˜¯ä¸€ä½å’¨è¯¢ä¼ä¸šè§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆï¼Œåœ¨åˆ©ç”¨å®¹å™¨æŠ€æœ¯è§£å†³åŸºç¡€æ¶æ„é—®é¢˜å’Œæ›´å¿«åœ°éƒ¨ç½²åº”ç”¨ç¨‹åºä»¥åŠæ›´é«˜çº§åˆ«çš„å®‰å…¨æ€§ï¼Œæ€§èƒ½å’Œå¯é æ€§æ–¹é¢æ‹¥æœ‰ä¸°å¯Œçš„ç»éªŒ æœ€è¿‘ï¼ŒHisham ä¸€ç›´åœ¨ä¸ºå„ç§ä¸­é—´ä»¶åº”ç”¨ç¨‹åºåˆ©ç”¨å®¹å™¨å’Œäº‘åŸç”Ÿæ¶æ„ï¼Œä»¥åœ¨æ•´ä¸ªä¼ä¸šä¸­éƒ¨ç½²å¤æ‚çš„å…³é”®ä»»åŠ¡æœåŠ¡ã€‚åœ¨è¿›å…¥å’¨è¯¢é¢†åŸŸä¹‹å‰ï¼ŒHisham æ›¾åœ¨ Aon Hewittï¼ŒLexmark å’Œ ADP ä»äº‹è½¯ä»¶å®æ–½å’ŒæŠ€æœ¯æ”¯æŒå·¥ä½œã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•å°†äº‘åŸç”Ÿå·¥ä½œè´Ÿè½½æ˜ å°„åˆ° Kubernetes ä¸­çš„æ§åˆ¶å™¨</title>
      <link>https://cloudnativecn.com/blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/</link>
      <pubDate>Wed, 31 Oct 2018 20:01:03 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://thenewstack.io/how-to-map-cloud-native-workloads-to-kubernetes-controllers/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes &lt;a href=&#34;https://thenewstack.io/how-kubernetes-is-transforming-into-a-universal-scheduler/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå®¹å™¨ç®¡ç†å·¥å…·&lt;/a&gt;ã€‚å®ƒæ˜¯ä¸€ä¸ªå¹³å°ï¼Œæ—¨åœ¨å¤„ç†åŒ…è£…åœ¨ä»»æ„æ•°é‡çš„å®¹å™¨å’Œç»„åˆä¸­çš„å„ç§å·¥ä½œè´Ÿè½½ã€‚Kubernetes å†…ç½®äº†å¤šä¸ªæ§åˆ¶å™¨ï¼Œå¯æ˜ å°„åˆ°äº‘åŸç”Ÿæ¶æ„çš„å„ä¸ªå±‚ã€‚&lt;/p&gt;
&lt;p&gt;DevOps å·¥ç¨‹å¸ˆå¯ä»¥å°† Kubernetes æ§åˆ¶å™¨è§†ä¸ºæŒ‡ç¤ºå›¢é˜Ÿè¿è¡Œçš„å„ç§å·¥ä½œè´Ÿè½½çš„åŸºç¡€æ¶æ„éœ€æ±‚çš„æ‰‹æ®µã€‚ä»–ä»¬å¯ä»¥é€šè¿‡å£°æ˜æ–¹æ³•å®šä¹‰æ‰€éœ€çš„é…ç½®çŠ¶æ€ã€‚ä¾‹å¦‚ï¼Œå®¹å™¨/pod ä½œä¸º ReplicationController çš„ä¸€éƒ¨åˆ†éƒ¨ç½²ä¿è¯å§‹ç»ˆå¯ç”¨ã€‚æ‰“åŒ…ä¸º DaemonSet çš„å®¹å™¨â€‹ä¿è¯åœ¨é›†ç¾¤çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œã€‚å£°æ˜å¼çš„æ–¹æ³•ä½¿ DevOps å›¢é˜Ÿèƒ½å¤Ÿåˆ©ç”¨ä»£ç æ§åˆ¶åŸºç¡€æ¶æ„ã€‚ä¸‹é¢è®¨è®ºçš„ä¸€äº›éƒ¨ç½²æ¨¡å¼éµå¾ªä¸å¯å˜åŸºç¡€ç»“æ„çš„åŸåˆ™ï¼Œå…¶ä¸­æ¯ä¸ªæ–°çš„éƒ¨ç½²éƒ½ä¼šå¯¼è‡´åŸå­éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/61411417ly1fwrcxotk3xj20r30i2n30_hu_43649730e5e039be.webp 400w,
               /blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/61411417ly1fwrcxotk3xj20r30i2n30_hu_cd4116c1cc9dc5ab.webp 760w,
               /blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/61411417ly1fwrcxotk3xj20r30i2n30_hu_4a05a3367ba672f5.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-map-cloud-native-workloads-to-kubernetes-controllers/61411417ly1fwrcxotk3xj20r30i2n30_hu_43649730e5e039be.webp&#34;
               width=&#34;760&#34;
               height=&#34;507&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;DevOps å·¥ç¨‹å¸ˆå¯ä»¥é€šè¿‡å£°æ˜æ–¹æ³•å®šä¹‰æ‰€éœ€çš„é…ç½®çŠ¶æ€â€”â€”æ¯ä¸ªå·¥ä½œè´Ÿè½½æ˜ å°„åˆ°æ§åˆ¶å™¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº†è§£äº‘åŸç”Ÿç”¨ä¾‹&#34;&gt;äº†è§£äº‘åŸç”Ÿç”¨ä¾‹&lt;/h2&gt;
&lt;p&gt;Kubernetes çš„æ§åˆ¶å¹³é¢ä¸æ–­è·Ÿè¸ªéƒ¨ç½²ï¼Œä»¥ç¡®ä¿å®ƒä»¬ç¬¦åˆ DevOps å®šä¹‰çš„æ‰€éœ€é…ç½®çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes çš„åŸºæœ¬éƒ¨ç½²å•ä½æ˜¯ä¸€ä¸ª podã€‚å®ƒæ˜¯ Kubernetes çš„åŸºæœ¬æ„å»ºå—ï¼Œæ˜¯ Kubernetes å¯¹è±¡æ¨¡å‹ä¸­æœ€å°å’Œæœ€ç®€å•çš„å•å…ƒã€‚pod è¡¨ç¤ºé›†ç¾¤ä¸Šæ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ã€‚æ— è®ºæœåŠ¡æ˜¯æœ‰çŠ¶æ€çš„è¿˜æ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒæ€»æ˜¯æ‰“åŒ…å¹¶éƒ¨ç½²ä¸º podã€‚&lt;/p&gt;
&lt;p&gt;æ§åˆ¶å™¨å¯ä»¥åœ¨é›†ç¾¤ä¸­åˆ›å»ºå’Œç®¡ç†å¤šä¸ª podï¼Œå¤„ç†åœ¨é›†ç¾¤èŒƒå›´å†…æä¾›è‡ªæˆ‘ä¿®å¤åŠŸèƒ½çš„å‰¯æœ¬ã€‚ä¾‹å¦‚ï¼Œå¦‚æœèŠ‚ç‚¹å‘ç”Ÿæ•…éšœï¼Œæ§åˆ¶å™¨å¯èƒ½ä¼šé€šè¿‡åœ¨ä¸åŒèŠ‚ç‚¹ä¸Šå®‰æ’ç›¸åŒçš„ pod ç”¨æ¥è‡ªåŠ¨æ›¿æ¢è¯¥æ•…éšœ podã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes é…æœ‰å¤šä¸ªæ§åˆ¶å™¨ï¼Œå¯ä»¥å¤„ç†æ‰€éœ€çš„ pod çŠ¶æ€ã€‚å¦‚ ReplicationControllerã€Deploymentã€DaemonSet å’Œ StatefulSet æ§åˆ¶å™¨ã€‚Kubernetes æ§åˆ¶å™¨ä½¿ç”¨æä¾›çš„ pod æ¨¡æ¿ï¼Œæ¥åˆ›å»ºå…¶è´Ÿè´£ pod çš„æ‰€éœ€çŠ¶æ€ã€‚ä¸å…¶ä»– Kubernetes å¯¹è±¡ä¸€æ ·ï¼ŒPod åœ¨ YAML æ–‡ä»¶ä¸­å®šä¹‰å¹¶æäº¤ç»™æ§åˆ¶å¹³é¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Kubernetes ä¸­è¿è¡Œäº‘åŸç”Ÿåº”ç”¨ç¨‹åºæ—¶ï¼Œè¿ç»´äººå‘˜éœ€è¦äº†è§£æ§åˆ¶å™¨è§£å†³çš„ç”¨ä¾‹ï¼Œä»¥å……åˆ†åˆ©ç”¨å¹³å°çš„ç‰¹æ€§ã€‚è¿™æœ‰åŠ©äºä»–ä»¬å®šä¹‰å’Œç»´æŠ¤åº”ç”¨ç¨‹åºçš„æ‰€éœ€é…ç½®çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šä¸€èŠ‚ä¸­ä»‹ç»çš„æ¯ç§æ¨¡å¼éƒ½æ˜ å°„åˆ°ç‰¹å®šçš„ Kubernetes æ§åˆ¶å™¨ï¼Œè¿™äº›æ§åˆ¶å™¨å…è®¸å¯¹ Kubernetes çš„å·¥ä½œè´Ÿè½½è¿›è¡Œæ›´ç²¾ç¡®ï¼Œç»†ç²’åº¦çš„æ§åˆ¶ï¼Œä½†æ˜¯é‡‡ç”¨è‡ªåŠ¨åŒ–æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes çš„å£°æ˜å¼é…ç½®é¼“åŠ±ä¸å¯å˜çš„åŸºç¡€æ¶æ„ã€‚æ§åˆ¶å¹³é¢è·Ÿè¸ªå’Œç®¡ç†éƒ¨ç½²ï¼Œä»¥ç¡®ä¿åœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸä¸­ç»´æŠ¤æ‰€éœ€çš„é…ç½®çŠ¶æ€ã€‚ä¸åŸºäºè™šæ‹Ÿæœºçš„ä¼ ç»Ÿéƒ¨ç½²ç›¸æ¯”ï¼ŒDevOps å·¥ç¨‹å¸ˆå°†èŠ±è´¹æ›´å°‘çš„æ—¶é—´æ¥ç»´æŠ¤å·¥ä½œè´Ÿè½½ã€‚åˆ©ç”¨ Kubernetes åŸè¯­å’Œéƒ¨ç½²æ¨¡å¼çš„æœ‰æ•ˆ CI/CD ç­–ç•¥ä½¿è¿è¥å•†æ— éœ€æ‰§è¡Œç¹ççš„ä»»åŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯æ‰©å±•å±‚æ— çŠ¶æ€å·¥ä½œè´Ÿè½½&#34;&gt;å¯æ‰©å±•å±‚ï¼šæ— çŠ¶æ€å·¥ä½œè´Ÿè½½&lt;/h3&gt;
&lt;p&gt;æ— çŠ¶æ€å·¥ä½œè´Ÿè½½åœ¨ Kubernetes ä¸­æ‰“åŒ…å¹¶éƒ¨ç½²ä¸º ReplicaSetã€‚ReplicationController æ„æˆ ReplicaSet çš„åŸºç¡€ï¼Œå¯ç¡®ä¿åœ¨ä»»ä½•ç»™å®šæ—¶é—´å§‹ç»ˆè¿è¡ŒæŒ‡å®šæ•°é‡çš„ pod å‰¯æœ¬ã€‚æ¢å¥è¯è¯´ï¼ŒReplicationController ç¡®ä¿ä¸€ä¸ª pod æˆ–ä¸€ç»„åŒç±» pod æ€»æ˜¯å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæœ‰å¤ªå¤š podï¼ŒReplicationController å¯èƒ½ä¼šç»ˆæ­¢é¢å¤–çš„ podã€‚å¦‚æœå¤ªå°‘ï¼ŒReplicationController å°†ç»§ç»­å¯åŠ¨å…¶ä»– podã€‚ä¸æ‰‹åŠ¨åˆ›å»ºçš„ pod ä¸åŒï¼ŒReplicationController ç»´æŠ¤çš„ pod åœ¨å¤±è´¥ï¼Œåˆ é™¤æˆ–ç»ˆæ­¢æ—¶ä¼šè‡ªåŠ¨æ›¿æ¢ã€‚åœ¨è¯¸å¦‚å†…æ ¸å‡çº§ä¹‹ç±»çš„ç ´åæ€§ç»´æŠ¤ä¹‹åï¼Œåœ¨èŠ‚ç‚¹ä¸Šé‡æ–°åˆ›å»º podã€‚å› æ­¤ï¼Œå³ä½¿åº”ç”¨ç¨‹åºåªéœ€è¦ä¸€ä¸ª podï¼Œä¹Ÿå»ºè®®ä½¿ç”¨ ReplicationControllerã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„ç”¨ä¾‹æ˜¯åˆ›å»ºä¸€ä¸ª ReplicationController å¯¹è±¡ï¼Œä»¥æ— é™æœŸåœ°å¯é åœ°è¿è¡Œ pod çš„ä¸€ä¸ªå®ä¾‹ã€‚æ›´å¤æ‚çš„ç”¨ä¾‹æ˜¯è¿è¡Œæ¨ªå‘æ‰©å±•æœåŠ¡çš„å‡ ä¸ªç›¸åŒå‰¯æœ¬ï¼Œä¾‹å¦‚ Web æœåŠ¡å™¨ã€‚åœ¨ Kubernetes ä¸­éƒ¨ç½²æ—¶ï¼ŒDevOps å›¢é˜Ÿå’Œè¿è¥å•†å°†æ— çŠ¶æ€å·¥ä½œè´Ÿè½½æ‰“åŒ…ä¸º ReplicationControllersã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ€è¿‘çš„ Kubernetes ç‰ˆæœ¬ä¸­ï¼ŒReplicaSets å–ä»£äº† ReplicationControllersã€‚å®ƒä»¬éƒ½é’ˆå¯¹ç›¸åŒçš„åœºæ™¯ï¼Œä½† ReplicaSet ä½¿ç”¨åŸºäº &lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/#set-based-requirement&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†åˆçš„æ ‡ç­¾é€‰æ‹©å™¨&lt;/a&gt; ï¼Œè¿™ä½¿å¾—å¯ä»¥ä½¿ç”¨åŸºäºæ³¨é‡Šçš„å¤æ‚æŸ¥è¯¢ã€‚æ­¤å¤–ï¼ŒKubernetes ä¸­çš„éƒ¨ç½²ä¾èµ–äº ReplicaSetã€‚&lt;/p&gt;
&lt;p&gt;Deployment æ˜¯ ReplicaSet çš„æŠ½è±¡ã€‚åœ¨ Deployment å¯¹è±¡ä¸­å£°æ˜æ‰€éœ€çŠ¶æ€æ—¶ï¼ŒDeployment æ§åˆ¶å™¨ä¼šä»¥å—æ§é€Ÿç‡å°†å®é™…çŠ¶æ€æ›´æ”¹ä¸ºæ‰€éœ€çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;å¼ºçƒˆå»ºè®®éƒ¨ç½²ç®¡ç†äº‘åŸç”Ÿåº”ç”¨ç¨‹åºçš„æ— çŠ¶æ€æœåŠ¡ã€‚è™½ç„¶æœåŠ¡å¯ä»¥éƒ¨ç½²ä¸º pod å’Œ ReplicaSetï¼Œä½†éƒ¨ç½²å¯ä»¥æ›´è½»æ¾åœ°å‡çº§å’Œä¿®è¡¥åº”ç”¨ç¨‹åºã€‚DevOps å›¢é˜Ÿå¯ä»¥ä½¿ç”¨éƒ¨ç½²æ¥å‡çº§ podï¼Œè€Œæ— æ³•ä½¿ç”¨ ReplicaSet å®Œæˆã€‚è¿™æ ·å°±å¯ä»¥åœ¨æœ€çŸ­çš„åœæœºæ—¶é—´å†…æ¨å‡ºæ–°ç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºã€‚éƒ¨ç½²ä¸ºåº”ç”¨ç¨‹åºç®¡ç†å¸¦æ¥äº†ç±»ä¼¼äºæœåŠ¡ï¼ˆPaaSï¼‰çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŒä¹…å±‚æœ‰çŠ¶æ€çš„å·¥ä½œé‡&#34;&gt;æŒä¹…å±‚ï¼šæœ‰çŠ¶æ€çš„å·¥ä½œé‡&lt;/h3&gt;
&lt;p&gt;çŠ¶æ€å·¥ä½œè´Ÿè½½å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šéœ€è¦æŒä¹…å­˜å‚¨çš„æœåŠ¡ï¼ˆå•å®ä¾‹ï¼‰å’Œéœ€è¦ä»¥é«˜å¯é æ€§å’Œå¯ç”¨æ¨¡å¼è¿è¡Œçš„æœåŠ¡ï¼ˆå¤åˆ¶çš„å¤šå®ä¾‹ï¼‰ã€‚éœ€è¦è®¿é—®æŒä¹…å­˜å‚¨åç«¯çš„ pod ä¸ä¸ºå…³ç³»æ•°æ®åº“è¿è¡Œé›†ç¾¤çš„ä¸€ç»„ pod éå¸¸ä¸åŒã€‚è™½ç„¶å‰è€…éœ€è¦é•¿æœŸæŒä¹…çš„æŒä¹…æ€§ï¼Œä½†åè€…éœ€è¦é«˜å¯ç”¨æ€§çš„å·¥ä½œé‡ã€‚Kubernetes è§£å†³äº†è¿™ä¸¤ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥é€šè¿‡å°†åº•å±‚å­˜å‚¨æš´éœ²ç»™æœåŠ¡çš„å·æ¥æ”¯æŒå•ä¸ª podã€‚å¯ä»¥å°†å·æ˜ å°„åˆ°è°ƒåº¦ pod çš„ä»»æ„èŠ‚ç‚¹ã€‚å¦‚æœåœ¨é›†ç¾¤çš„ä¸åŒèŠ‚ç‚¹ä¸Šè°ƒåº¦å¤šä¸ª pod å¹¶éœ€è¦å…±äº«åç«¯ï¼Œåˆ™åœ¨éƒ¨ç½²åº”ç”¨ç¨‹åºä¹‹å‰æ‰‹åŠ¨é…ç½®åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆå¦‚ç½‘ç»œæ–‡ä»¶ç³»ç»Ÿï¼ˆNFSï¼‰æˆ– Glusterï¼‰ã€‚äº‘åŸç”Ÿæ€ç³»ç»Ÿä¸­æä¾›çš„ç°ä»£å­˜å‚¨é©±åŠ¨ç¨‹åºæä¾›å®¹å™¨æœ¬æœºå­˜å‚¨ï¼Œå…¶ä¸­æ–‡ä»¶ç³»ç»Ÿæœ¬èº«é€šè¿‡å®¹å™¨å…¬å¼€ã€‚å½“ pod åªéœ€è¦æŒä¹…æ€§å’ŒæŒä¹…æ€§æ—¶ï¼Œè¯·ä½¿ç”¨æ­¤é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé¢„è®¡å…·æœ‰é«˜å¯ç”¨æ€§çš„åœºæ™¯ï¼ŒKubernetes æä¾› StatefulSets - ä¸€ç»„ä¸“é—¨çš„ podï¼Œå¯ç¡®ä¿ pod çš„æ’åºå’Œå”¯ä¸€æ€§ã€‚è¿™åœ¨è¿è¡Œä¸»è¦/è¾…åŠ©ï¼ˆä»¥å‰ç§°ä¸ºä¸»/ä»ï¼‰æ•°æ®åº“é›†ç¾¤é…ç½®æ—¶å°¤å…¶æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸éƒ¨ç½²ç±»ä¼¼ï¼ŒStatefulSet ç®¡ç†åŸºäºç›¸åŒå®¹å™¨è§„èŒƒçš„ podã€‚ä¸ Deployment ä¸åŒï¼ŒStatefulSet ä¸ºå…¶æ¯ä¸ª pod ä¿ç•™å”¯ä¸€æ ‡è¯†ã€‚è¿™äº› pod æ˜¯æ ¹æ®ç›¸åŒçš„è§„èŒƒåˆ›å»ºçš„ï¼Œä½†ä¸å¯äº’æ¢ï¼šæ¯ä¸ª pod éƒ½æœ‰ä¸€ä¸ªæŒä¹…æ ‡è¯†ç¬¦ï¼Œå®ƒå¯ä»¥åœ¨ä»»ä½•é‡æ–°å®‰æ’æ—¶ä¿ç•™ã€‚&lt;/p&gt;
&lt;p&gt;StatefulSet å¯¹éœ€è¦ä»¥ä¸‹ä¸€é¡¹æˆ–å¤šé¡¹çš„å·¥ä½œè´Ÿè½½éå¸¸æœ‰ç”¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç¨³å®šï¼Œç‹¬ç‰¹çš„ç½‘ç»œæ ‡è¯†ç¬¦ã€‚&lt;/li&gt;
&lt;li&gt;ç¨³å®šï¼ŒæŒä¹…çš„å­˜å‚¨ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åºï¼Œä¼˜é›…çš„éƒ¨ç½²å’Œæ‰©å±•ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åºï¼Œä¼˜é›…çš„åˆ é™¤å’Œç»ˆæ­¢ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰åºçš„è‡ªåŠ¨æ»šåŠ¨æ›´æ–°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Kubernetes å¯¹ StatefulSets çš„å¤„ç†æ–¹å¼ä¸å…¶ä»–æ§åˆ¶å™¨ä¸åŒã€‚å½“æ­£åœ¨ä½¿ç”¨ N ä¸ªå‰¯æœ¬è°ƒåº¦ StatefulSet çš„ pod æ—¶ï¼Œå°†æŒ‰é¡ºåºåˆ›å»ºå®ƒä»¬ï¼Œé¡ºåºä» 0 åˆ° N-1ã€‚å½“åˆ é™¤ StatefulSet çš„ pod æ—¶ï¼Œå®ƒä»¬ä»¥ç›¸åçš„é¡ºåºç»ˆæ­¢ï¼Œä» N-1 åˆ° 0ã€‚åœ¨å°†ä¸€ä¸ªæ‰©å±•æ“ä½œåº”ç”¨äº pod ä¹‹å‰ï¼Œå®ƒçš„æ‰€æœ‰å‰é©±å¿…é¡»æ­£åœ¨è¿è¡Œå¹¶å‡†å¤‡å°±ç»ªã€‚Kubernetes ç¡®ä¿åœ¨ç»ˆæ­¢ pod ä¹‹å‰ï¼Œå…¶æ‰€æœ‰åç»§è€…éƒ½å®Œå…¨å…³é—­ã€‚&lt;/p&gt;
&lt;p&gt;å½“æœåŠ¡éœ€è¦è¿è¡Œ Cassandraã€MongoDBã€MySQLã€PostgreSQL é›†ç¾¤æˆ–ä»»ä½•å…·æœ‰é«˜å¯ç”¨æ€§è¦æ±‚çš„æ•°æ®åº“å·¥ä½œè´Ÿè½½æ—¶ï¼Œå»ºè®®ä½¿ç”¨ StatefulSetã€‚&lt;/p&gt;
&lt;p&gt;å¹¶éæ¯ä¸ªæŒä¹…æ€§å·¥ä½œè´Ÿè½½éƒ½å¿…é¡»æ˜¯ StatefulSetã€‚æŸäº›å®¹å™¨ä¾èµ–äºæŒä¹…å­˜å‚¨åç«¯æ¥å­˜å‚¨æ•°æ®ã€‚ä¸ºäº†å‘è¿™äº›ç±»å‹çš„åº”ç”¨ç¨‹åºæ·»åŠ æŒä¹…æ€§ï¼Œpod å¯èƒ½ä¾èµ–äºç”±åŸºäºä¸»æœºçš„å­˜å‚¨æˆ–å®¹å™¨æœ¬æœºå­˜å‚¨åç«¯æ”¯æŒçš„å·ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯å¹¶è¡ŒåŒ–å±‚æ‰¹å¤„ç†&#34;&gt;å¯å¹¶è¡ŒåŒ–å±‚ï¼šæ‰¹å¤„ç†&lt;/h3&gt;
&lt;p&gt;Kubernetes å…·æœ‰ç”¨äºæ‰¹å¤„ç†çš„å†…ç½®åŸè¯­ï¼Œè¿™å¯¹äºæ‰§è¡Œè¿è¡Œåˆ°å®Œæˆä½œä¸šæˆ–é¢„å®šä½œä¸šå¾ˆæœ‰ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œåˆ°å®Œæˆä½œä¸šé€šå¸¸ç”¨äºè¿è¡Œéœ€è¦æ‰§è¡Œæ“ä½œå’Œé€€å‡ºçš„è¿›ç¨‹ã€‚åœ¨å¤„ç†æ•°æ®ä¹‹å‰è¿è¡Œçš„å¤§æ•°æ®å·¥ä½œè´Ÿè½½å°±æ˜¯è¿™ç§å·¥ä½œçš„ä¸€ä¸ªä¾‹å­ã€‚å¦ä¸€ä¸ªç¤ºä¾‹æ˜¯ä¸€ä¸ªå¤„ç†é˜Ÿåˆ—ä¸­æ¯æ¡æ¶ˆæ¯çš„ä½œä¸šï¼Œç›´åˆ°é˜Ÿåˆ—å˜ç©ºã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸šæ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªæˆ–å¤šä¸ª pod å¹¶ç¡®ä¿æŒ‡å®šæ•°é‡çš„ pod æˆåŠŸç»ˆæ­¢ã€‚å½“ pod æˆåŠŸå®Œæˆåï¼ŒJob ä¼šè·Ÿè¸ªæˆåŠŸçš„å®Œæˆæƒ…å†µã€‚è¾¾åˆ°æŒ‡å®šæ•°é‡çš„æˆåŠŸå®Œæˆåï¼Œä½œä¸šæœ¬èº«å°±å®Œæˆäº†ã€‚åˆ é™¤ä½œä¸šå°†æ¸…ç†å®ƒåˆ›å»ºçš„ podã€‚&lt;/p&gt;
&lt;p&gt;Job è¿˜å¯ä»¥ç”¨äºå¹¶è¡Œè¿è¡Œå¤šä¸ª podï¼Œè¿™ä½¿å…¶æˆä¸ºæœºå™¨å­¦ä¹ åŸ¹è®­å·¥ä½œçš„ç†æƒ³é€‰æ‹©ã€‚Job è¿˜æ”¯æŒå¹¶è¡Œå¤„ç†ä¸€ç»„ç‹¬ç«‹ä½†ç›¸å…³çš„å·¥ä½œé¡¹ã€‚&lt;/p&gt;
&lt;p&gt;å½“ Kubernetes åœ¨å…·æœ‰ GPU çš„ç¡¬ä»¶ä¸Šè¿è¡Œæ—¶ï¼Œæœºå™¨å­¦ä¹ åŸ¹è®­å¯ä»¥åˆ©ç”¨ Jobã€‚è¯¸å¦‚ Kubeflow ä¹‹ç±»çš„æ–°å…´é¡¹ç›® - ä¸€ä¸ªè‡´åŠ›äºåœ¨ Kubernetes ä¸Šéƒ¨ç½²æœºå™¨å­¦ä¹ çš„ç®€å•ï¼Œå¯ç§»æ¤å’Œå¯æ‰©å±•çš„é¡¹ç›® - å°†æŠŠåŸå§‹èµ„æ–™ä½œä¸º job åŒ…è£…åˆ°æœºå™¨å­¦ä¹ åŸ¹è®­ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è¿è¡Œå¹¶è¡ŒåŒ–ä½œä¸šå¤–ï¼Œå¯èƒ½è¿˜éœ€è¦è¿è¡Œé¢„å®šä½œä¸šã€‚Kubernetes å…¬å¼€äº† CronJobsï¼Œå®ƒå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´ç‚¹è¿è¡Œä¸€æ¬¡ï¼Œä¹Ÿå¯ä»¥åœ¨æŒ‡å®šçš„æ—¶é—´ç‚¹å®šæœŸè¿è¡Œã€‚Kubernetes ä¸­çš„ CronJob å¯¹è±¡ç±»ä¼¼äº Unix ä¸­ crontabï¼ˆcron è¡¨ï¼‰æ–‡ä»¶çš„ä¸€è¡Œã€‚å®ƒä»¥ç»™å®šçš„æ—¶é—´è¡¨å®šæœŸè¿è¡Œï¼Œä»¥ cron æ ¼å¼ç¼–å†™ã€‚&lt;/p&gt;
&lt;p&gt;Cron ä½œä¸šå¯¹äºå®‰æ’å®šæœŸä½œä¸šï¼ˆå¦‚æ•°æ®åº“å¤‡ä»½æˆ–å‘é€ç”µå­é‚®ä»¶ï¼‰ç‰¹åˆ«æœ‰ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;äº‹ä»¶é©±åŠ¨å±‚æ— æœåŠ¡å™¨serverless&#34;&gt;äº‹ä»¶é©±åŠ¨å±‚ï¼šæ— æœåŠ¡å™¨ï¼ˆServerlessï¼‰&lt;/h3&gt;
&lt;p&gt;æ— æœåŠ¡å™¨è®¡ç®—ï¼ˆServerlessï¼‰æ˜¯æŒ‡æ„å»ºå’Œè¿è¡Œä¸éœ€è¦æœåŠ¡å™¨ç®¡ç†çš„åº”ç”¨ç¨‹åºçš„æ¦‚å¿µã€‚å®ƒæè¿°äº†ä¸€ç§æ›´ç»†ç²’åº¦çš„éƒ¨ç½²æ¨¡å‹ï¼Œå…¶ä¸­æ†ç»‘ä¸ºä¸€ä¸ªæˆ–å¤šä¸ªåŠŸèƒ½çš„åº”ç”¨ç¨‹åºä¸Šä¼ åˆ°å¹³å°ï¼Œç„¶åæ‰§è¡Œï¼Œç¼©å®¹å’Œè®¡è´¹ä»¥å“åº”å½“å‰æ‰€éœ€çš„ç¡®åˆ‡éœ€æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å‡½æ•°å³æœåŠ¡ï¼ˆFaaSï¼‰åœ¨æ— æœåŠ¡å™¨è®¡ç®—çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œä»¥æä¾›äº‹ä»¶é©±åŠ¨çš„è®¡ç®—ã€‚å¼€å‘äººå‘˜ä½¿ç”¨ç”±äº‹ä»¶æˆ– HTTP è¯·æ±‚è§¦å‘çš„åŠŸèƒ½æ¥è¿è¡Œå’Œç®¡ç†åº”ç”¨ç¨‹åºä»£ç ã€‚å¼€å‘äººå‘˜å°†å°å‹ä»£ç å•å…ƒéƒ¨ç½²åˆ° FaaSï¼Œè¿™äº›ä»£ç æ ¹æ®å®é™…éœ€è¦ä½œä¸ºç‹¬ç«‹ç»„ä»¶æ‰§è¡Œï¼Œæ— éœ€ç®¡ç†æœåŠ¡å™¨æˆ–ä»»ä½•å…¶ä»–åº•å±‚åŸºç¡€æ¶æ„å³å¯è¿›è¡Œæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ Kubernetes æ²¡æœ‰é›†æˆçš„äº‹ä»¶é©±åŠ¨åŸè¯­æ¥å“åº”å…¶ä»–æœåŠ¡å¼•å‘çš„è­¦æŠ¥å’Œäº‹ä»¶ï¼Œä½†ä»æœ‰åŠªåŠ›å¼•å…¥äº‹ä»¶é©±åŠ¨çš„åŠŸèƒ½ã€‚è¯¥&lt;a href=&#34;http://bit.ly/2GBO5Dd&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼š&lt;/a&gt; ï¼ŒKubernetes çš„æ‰˜ç®¡è€…ï¼Œä¸€ç›´ä¸“æ³¨äºè¿™äº›è‡´åŠ›äºæ— æœåŠ¡å™¨çš„å·¥ä½œç»„ã€‚&lt;a href=&#34;https://openwhisk.apache.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache OpenWhisk&lt;/a&gt; ã€&lt;a href=&#34;https://github.com/fission/fission&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fission&lt;/a&gt; ã€&lt;a href=&#34;https://github.com/kubeless/kubeless&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubeless&lt;/a&gt; ã€&lt;a href=&#34;https://github.com/openfaas/faas&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenFaaS&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/fnproject/fn&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Oracle çš„ Fn&lt;/a&gt; ç­‰å¼€æºé¡¹ç›®å¯ä»¥åœ¨ Kubernetes é›†ç¾¤ä¸­ä½œä¸ºäº‹ä»¶é©±åŠ¨çš„æ— æœåŠ¡å™¨å±‚è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ— æœåŠ¡å™¨ç¯å¢ƒä¸­éƒ¨ç½²çš„ä»£ç ä¸æ‰“åŒ…ä¸º pod çš„ä»£ç æ ¹æœ¬ä¸åŒã€‚å®ƒç”±è‡ªæ²»å‡½æ•°ç»„æˆï¼Œå¯ä»¥è¿æ¥åˆ°å¯èƒ½è§¦å‘ä»£ç çš„ä¸€ä¸ªæˆ–å¤šä¸ªäº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;å½“äº‹ä»¶é©±åŠ¨è®¡ç®—â€”â€”æ— æœåŠ¡å™¨è®¡ç®—æˆä¸º Kubernetes ä¸å¯æˆ–ç¼ºçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œå¼€å‘äººå‘˜å°†èƒ½å¤Ÿéƒ¨ç½²å“åº” Kubernetes æ§åˆ¶å¹³é¢ç”Ÿæˆçš„å†…éƒ¨äº‹ä»¶ä»¥åŠåº”ç”¨ç¨‹åºæœåŠ¡å¼•å‘çš„è‡ªå®šä¹‰äº‹ä»¶çš„å‡½æ•°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é—ç•™å±‚headless-service&#34;&gt;é—ç•™å±‚ï¼šHeadless Service&lt;/h3&gt;
&lt;p&gt;å³ä½¿æ‚¨çš„ç»„ç»‡ç»å¸¸ä½¿ç”¨å¾®æœåŠ¡æ¶æ„æ„å»ºå’Œéƒ¨ç½²åº”ç”¨ç¨‹åºåˆ°äº‘ä¸Šçš„å®¹å™¨ä¸­ï¼Œä¹Ÿå¯èƒ½æœ‰ä¸€äº›åº”ç”¨ç¨‹åºç»§ç»­å­˜åœ¨äº Kubernetes ä¹‹å¤–ã€‚äº‘åŸç”Ÿåº”ç”¨ç¨‹åºå’ŒæœåŠ¡å¿…é¡»ä¸é‚£äº›ä¼ ç»Ÿçš„å•ä¸€åº”ç”¨ç¨‹åºè¿›è¡Œäº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;é—ç•™å±‚çš„å­˜åœ¨æ˜¯ä¸ºäº†å®ç°äº’æ“ä½œæ€§ï¼Œä»¥æš´éœ²ä¸€ç»„æŒ‡å‘å•ä½“åº”ç”¨ç¨‹åºçš„ Headless Serviceã€‚Headless Service å…è®¸å¼€å‘äººå‘˜é€šè‡ªç”±åœ°ä»¥è‡ªå·±çš„æ–¹å¼è¿›è¡ŒæœåŠ¡å‘ç°æ¥å‡å°‘ä¸ Kubernetes ç³»ç»Ÿçš„è€¦åˆã€‚Kubernetes ä¸­çš„ Headless Services ä¸ ClusterIPã€NodePort å’Œ LoadBalancer ç±»å‹çš„æœåŠ¡ä¸åŒã€‚å®ƒä»¬æ²¡æœ‰åˆ†é…ç»™å®ƒä»¬çš„ Internet åè®®ï¼ˆIPï¼‰åœ°å€ï¼Œä½†å…·æœ‰æŒ‡å‘å¤–éƒ¨ç«¯ç‚¹ï¼ˆå¦‚ API Serverã€Web æœåŠ¡å™¨å’Œæ•°æ®åº“ï¼‰çš„åŸŸåç³»ç»Ÿï¼ˆDNSï¼‰æ¡ç›®ã€‚é—ç•™å±‚æ˜¯ä¸€ä¸ªé€»è¾‘äº’æ“ä½œæ€§å±‚ï¼Œå®ƒå°† DNS è®°å½•ç»´æŠ¤åˆ°ä¼—æ‰€å‘¨çŸ¥çš„å¤–éƒ¨ç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡åº”ç”¨ç¨‹åºçš„æ¯ä¸€å±‚éƒ½å¯ä»¥æ˜ å°„åˆ° Kubernetes çš„ä¸€ä¸ªæ§åˆ¶å™¨ã€‚æ ¹æ®å¸Œæœ›éƒ¨ç½²çš„æ¨¡å¼ï¼ŒDevOps å›¢é˜Ÿå¯ä»¥è¿›è¡Œç›¸åº”çš„é€‰æ‹©ã€‚åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå°†äº‘åŸç”Ÿåº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Kubernetes çš„ä¸€äº›æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºä½œè€…&#34;&gt;å…³äºä½œè€…&lt;/h2&gt;
&lt;p&gt;Janakiram MSV æ˜¯ Janakiramï¼†Associates çš„é¦–å¸­åˆ†æå¸ˆï¼Œä¹Ÿæ˜¯å›½é™…ä¿¡æ¯æŠ€æœ¯å­¦é™¢çš„å…¼èŒæ•™å‘˜ã€‚ä»–è¿˜æ˜¯ Google è®¤è¯äº‘å¼€å‘äººå‘˜ï¼Œäºšé©¬é€Šè®¤è¯è§£å†³æ–¹æ¡ˆæ¶æ„å¸ˆï¼Œäºšé©¬é€Šè®¤è¯å¼€å‘äººå‘˜ï¼Œäºšé©¬é€Šè®¤è¯ SysOps ç®¡ç†å‘˜å’Œ Microsoft è®¤è¯ Azure ä¸“ä¸šäººå‘˜ã€‚Janakiram æ˜¯äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šçš„å¤§ä½¿ï¼Œä¹Ÿæ˜¯æœ€æ—©çš„è®¤è¯ Kubernetes ç®¡ç†å‘˜å’Œè®¤è¯ Kubernetes åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜ä¹‹ä¸€ã€‚ä»–ä¹‹å‰çš„ç»å†åŒ…æ‹¬ Microsoftã€AWSã€Gigaom Research å’Œ Alcatel-Lucentã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>äº‘åŸç”Ÿå¯ç§»æ¤æ€§çš„ç¥è¯</title>
      <link>https://cloudnativecn.com/blog/myth-cloud-native-portability/</link>
      <pubDate>Tue, 30 Oct 2018 17:15:17 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/myth-cloud-native-portability/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://thenewstack.io/myth-cloud-native-portability/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ¬æ–‡æœ€åˆå‘è¡¨äº 2017 å¹´ 5 æœˆ 24 æ—¥ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;éšç€å¤§é‡æ–°å¹³å°å’Œæ”¯æŒå·¥å…·çš„å‡ºç°ï¼Œäº‘åŸç”ŸåŠ¿å¤´æ­£åœ¨å¢é•¿ã€‚è¿™äº›æ–°å¹³å°ä¸ºå¼€å‘äººå‘˜æä¾›äº†è¶Šæ¥è¶Šå¤šçš„åŠŸèƒ½ï¼Œå¯ä»¥ä»¥è‡ªåŠ¨åŒ–çš„æ–¹å¼å¿«é€Ÿå¼€å‘ï¼Œéƒ¨ç½²å’Œç®¡ç†å¤§é‡&lt;a href=&#34;https://thenewstack.io/category/microservices/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½†è¿™ç§äº‘åŸç”Ÿçš„åŠ¿å¤´çš„å¢é•¿åŒæ ·ä¼šä¼´éšç€æˆæœ¬çš„å¢åŠ ï¼Œæœ€å¥½åšå¥½ä¸ºæ­¤ä»˜å‡ºä»£ä»·çš„å‡†å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘æˆ‘å†™äº†ä¸€ç¯‡ç”± Kubernetes ç­‰äº‘åŸç”Ÿå¹³å°æä¾›çš„â€œ&lt;a href=&#34;http://www.ofbizian.com/2017/04/new-distributed-primitives-for.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸ºå¼€å‘è€…å‡†å¤‡çš„æ–°çš„åˆ†å¸ƒå¼åŸè¯­&lt;/a&gt;â€ï¼Œä»¥åŠè¿™äº›åŸè¯­å¦‚ä½•ä¸å¼€å‘åº”ç”¨ç¨‹åºçš„ç¼–ç¨‹åŸè¯­ç›¸ç»“åˆã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çœ‹çœ‹å¼€å‘äººå‘˜å¿…é¡»äº†è§£å’Œä½¿ç”¨å¤šå°‘ &lt;a href=&#34;https://thenewstack.io/category/kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes&lt;/a&gt; æ¦‚å¿µæ‰èƒ½æœ‰æ•ˆåœ°è¿è¡Œå•ä¸ªå®¹å™¨åŒ–åº”ç”¨ç¨‹åºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-åŸºäº-kubernetes-çš„å¾®æœåŠ¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;åŸºäº Kubernetes çš„å¾®æœåŠ¡&#34; srcset=&#34;
               /blog/myth-cloud-native-portability/61411417ly1fwp5js00wxj20sg0m8wnm_hu_b1b9dc3afb57ed19.webp 400w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5js00wxj20sg0m8wnm_hu_d1175519f025f60d.webp 760w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5js00wxj20sg0m8wnm_hu_78faa66ba852a9ca.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/myth-cloud-native-portability/61411417ly1fwp5js00wxj20sg0m8wnm_hu_b1b9dc3afb57ed19.webp&#34;
               width=&#34;760&#34;
               height=&#34;594&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      åŸºäº Kubernetes çš„å¾®æœåŠ¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œæ­¤å›¾è¡¨ä¸åŒ…å« DevOps å›¢é˜Ÿçš„ Ops éƒ¨é—¨å¿…é¡»ç®¡ç†çš„æ”¯æŒ Kubernetes çš„å¯¹è±¡ã€‚åœ¨æ“ä½œä¹‹å‰ä¹Ÿä¸éœ€è¦é¢å¤–çš„åº”ç”¨ç¨‹åºæ”¯æŒå·¥å…·ï¼ˆç”¨äºæ—¥å¿—ç®¡ç†ã€ç›‘æ§ã€è·Ÿè¸ªã€æœåŠ¡ç½‘æ ¼ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ›´æœ‰å¯èƒ½çš„æ˜¯ï¼Œå¼€å‘äººå‘˜å¿…é¡»ç¼–å†™ä¸å®¹å™¨ä¸­çš„åº”ç”¨ç¨‹åºä»£ç ç›¸åŒæ•°é‡çš„ YAML ä»£ç ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåº”ç”¨ç¨‹åºæœ¬èº«å°†ä¾èµ–äºæ¯”ä»¥å¾€æ›´å¤šçš„å¹³å°ã€‚äº‘åŸç”Ÿåº”ç”¨ç¨‹åºæœŸæœ›å¹³å°æ‰§è¡Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥ã€éƒ¨ç½²ã€æ”¾ç½®ã€æœåŠ¡å‘ç°ã€è¿è¡Œå®šæ—¶ä»»åŠ¡ï¼ˆ &lt;strong&gt;cron&lt;/strong&gt; ä½œä¸šï¼‰æˆ–è°ƒåº¦åŸå­å·¥ä½œå•å…ƒï¼ˆä½œä¸šï¼‰ã€è‡ªåŠ¨æ‰©å±•ã€é…ç½®ç®¡ç†ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºå·²æ”¾å¼ƒå¹¶å°†æ‰€æœ‰è¿™äº›èŒè´£å§”æ‰˜ç»™å¹³å°ï¼Œå¹¶æœŸæœ›ä»¥å¯é çš„æ–¹å¼å¤„ç†å®ƒä»¬ã€‚äº‹å®ä¸Šï¼Œç°åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå’Œç›¸å…³å›¢é˜Ÿåœ¨å¾ˆå¤šä¸åŒçš„çº§åˆ«ä¸Šä¾èµ–äºå¹³å°ï¼šä»£ç ã€è®¾è®¡ã€ä½“ç³»ç»“æ„ã€å¼€å‘å®è·µã€éƒ¨ç½²å’Œäº¤ä»˜ç®¡é“ã€æ”¯æŒè¿‡ç¨‹ã€æ¢å¤æ–¹æ¡ˆï¼Œä½ èƒ½æƒ³åˆ°çš„ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åœ¨ç”Ÿæ€ç³»ç»Ÿä¸Šä¸‹æ³¨è€Œä¸æ˜¯åœ¨å¹³å°ä¸Š&#34;&gt;åœ¨ç”Ÿæ€ç³»ç»Ÿä¸Šä¸‹æ³¨è€Œä¸æ˜¯åœ¨å¹³å°ä¸Š&lt;/h2&gt;
&lt;p&gt;ä¸Šå›¾æ˜¾ç¤ºäº†ä»£ç åœ¨ Kubernetes å¾®æœåŠ¡ç¯å¢ƒä¸­çš„å°å·§ç¨‹åº¦ã€‚ä½†æ˜¯ï¼Œå½“æˆ‘ä»¬è°ˆè®ºåŸºäºç”Ÿäº§å°±ç»ªçš„å¾®æœåŠ¡ç³»ç»Ÿæ—¶ï¼Œè¿™ç§æƒ…å†µè¿œæœªå®Œæˆã€‚ä»»ä½•è§„æ¨¡åºå¤§çš„ç³»ç»Ÿéƒ½éœ€è¦é›†ä¸­ç›‘æ§ã€åº¦é‡æ”¶é›†ã€è·Ÿè¸ªã€æœåŠ¡ç½‘æ ¼ã€é›†æˆæ„å»ºå’Œéƒ¨ç½²å·¥å…·ã€ç®¡é“ç­‰å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¾®æœåŠ¡éœ€æ±‚å±‚æ¬¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¾®æœåŠ¡éœ€æ±‚å±‚æ¬¡&#34; srcset=&#34;
               /blog/myth-cloud-native-portability/61411417ly1fwp5jsbrzrj20sg0ltk30_hu_9021027051ed664e.webp 400w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5jsbrzrj20sg0ltk30_hu_3a553deb45bb6f7d.webp 760w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5jsbrzrj20sg0ltk30_hu_28419db994c2f2c7.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/myth-cloud-native-portability/61411417ly1fwp5jsbrzrj20sg0ltk30_hu_9021027051ed664e.webp&#34;
               width=&#34;760&#34;
               height=&#34;583&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¾®æœåŠ¡éœ€æ±‚å±‚æ¬¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://thenewstack.io/introducing-microservices-hierarchy-needs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡éœ€æ±‚å±‚æ¬¡&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¯¥å¹³å°åªæ˜¯å†°å±±ä¸€è§’ï¼Œä¸ºäº†åœ¨äº‘åŸç”Ÿä¸–ç•Œå–å¾—æˆåŠŸï¼Œæ‚¨éœ€è¦æˆä¸ºå®Œå…¨é›†æˆçš„å·¥å…·å’Œå…¬å¸ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å› æ­¤ï¼ŒèµŒæ³¨ç»ä¸æ˜¯å•ä¸€å¹³å°ã€é¡¹ç›®ã€å¾ˆé…·çš„åº“æˆ–ä¸€å®¶å…¬å¸ã€‚å®ƒæ¶‰åŠæ•´ä¸ªååŒå·¥ä½œçš„æ•´ä¸ªé¡¹ç›®ç”Ÿæ€ç³»ç»Ÿï¼Œä»¥åŠåœ¨æœªæ¥åå¹´å·¦å³åˆä½œå¹¶è‡´åŠ›äºè¯¥äº‹ä¸šçš„å…¬å¸ï¼ˆä¾›åº”å•†å’Œå®¢æˆ·ï¼‰çš„æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿã€‚æˆ‘è®¤ä¸ºè¿™ä¸¤ä¸ªæ–¹é¢åŒæ ·é‡è¦ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯&lt;/strong&gt; ï¼šè€ƒè™‘åˆ°å‘äº‘åŸç”Ÿè¿‡æ¸¡æ˜¯ä¸€ä¸ªå¤šå¹´çš„æ—…ç¨‹ï¼Œåªæœ‰é•¿æœŸæˆåŠŸæ‰èƒ½å¸¦æ¥å¥½å¤„ï¼Œé‡è¦çš„æ˜¯æ‰“èµŒæœ‰å¯èƒ½åœ¨æœªæ¥ 5 åˆ° 10 å¹´å†…å‘å±•çš„æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ä»è¿‡å» 5 åˆ° 10 å¹´çš„å†å²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ–‡åŒ–&lt;/strong&gt; ï¼šcloud-native æ˜¯é€šè¿‡å¾®æœåŠ¡ã€å®¹å™¨ã€æŒç»­äº¤ä»˜å’Œ DevOps çš„ç»„åˆå®ç°çš„ã€‚è€Œæˆä¸ºäº‘åŸç”Ÿéœ€è¦çš„ä¸ä»…ä»…æ˜¯ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæ·»åŠ å°‘é‡ä¾èµ–é¡¹/åº“ï¼ˆä¹Ÿä¸æ˜¯åœ¨æŸäº›ä¼šè®®ä¸­å¦‚ä½•æ¨å¹¿å®ƒï¼‰ã€‚æ‚¨å¯èƒ½ä¸å¾—ä¸æ”¹å˜å›¢é˜Ÿç»“æ„å’Œå›ºå®šæµç¨‹ã€å·¥ä½œä¹ æƒ¯å’Œç¼–ç å®è·µï¼Œå¹¶ä¹ æƒ¯äºæ¶ˆè€—ä»ç„¶éå¸¸æ´»è·ƒçš„æŠ€æœ¯ç©ºé—´ã€‚å¦‚æœæ‚¨çš„å…¬å¸æ–‡åŒ–åœ¨æŸç§ç¨‹åº¦ä¸Šæ›´æ¥è¿‘äºå¼€å‘æˆ–ä»…ä½¿ç”¨äº‘åŸç”Ÿå¹³å°å’Œç›¸å…³å·¥å…·çš„å…¬å¸çš„æ–‡åŒ–ï¼Œé‚£å°±æ›´å®¹æ˜“äº†ã€‚è¯¸å¦‚æå‡ºæ‹‰å–è¯·æ±‚ä¸æäº¤é”™è¯¯æŠ¥å‘Šï¼Œæ£€æŸ¥ä¸Šæ¸¸æºä»£ç ä»¥åŠä¸ºå³å°†æ¨å‡ºçš„æ–°åŠŸèƒ½æ‰“å¼€è®¨è®ºä¹‹ç±»çš„å°äº‹æƒ…ã€‚æ–‡åŒ–ä¸€è‡´æ€§å’Œäººæ–‡å› ç´ ä¸æŠ€æœ¯ä¼˜åŠ¿åŒç­‰é‡è¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹å†…å®¹å¹¶ä¸ä»£è¡¨å®Œæ•´çš„æ ¼å±€ï¼Œä½†æˆ‘å°†å°è¯•å°†æˆ‘æƒ³åˆ°çš„ä¸»è¦äº‘åŸç”Ÿç”Ÿæ€ç³»ç»Ÿåˆ†ç»„ï¼š&lt;/p&gt;
&lt;h3 id=&#34;mesosphere-å’Œ-apache-mesos&#34;&gt;Mesosphere å’Œ Apache Mesos&lt;/h3&gt;
&lt;p&gt;ä½œä¸º Apache Software Foundations çš„ä¸€éƒ¨åˆ†ï¼Œ&lt;a href=&#34;http://mesos.apache.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache Mesos&lt;/a&gt; æœ‰ä¼˜åŠ¿ï¼ˆæˆç†Ÿçš„ç¤¾åŒºï¼‰ä¹Ÿæœ‰ç¼ºç‚¹ï¼ˆè¿›åº¦ç¼“æ…¢ï¼‰ã€‚å®ƒè¯ç”Ÿäº 2009 å¹´å·¦å³ï¼Œæ˜¯ä¸€ä¸ªæˆç†Ÿçš„æ¡†æ¶ï¼Œå®ƒæœ€è¿‘å¢åŠ äº†å¯¹å®¹å™¨ï¼ˆæˆ‘çš„æ„æ€æ˜¯ docker æ ¼å¼ï¼‰å’Œç±»ä¼¼æ¦‚å¿µï¼ˆå¦‚ Pod/Task ç»„ï¼‰çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;cloud-foundry-å’Œ-spring-cloud&#34;&gt;Cloud Foundry å’Œ Spring Cloud&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;http://bit.ly/2quBaL4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cloud Foundry&lt;/a&gt;è¯ç”Ÿäº 2009 å¹´å·¦å³ï¼Œæ˜¯äº‘åŸç”Ÿä¸–ç•Œçš„å…ˆé©±ä¹‹ä¸€ã€‚å½“ &lt;a href=&#34;http://cloud.spring.io/spring-cloud-cloudfoundry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Spring Cloud ä¸ Cloud Foundry ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œ&lt;/a&gt; è¯¥å¹³å°ä¸åº”ç”¨ç¨‹åºæœ¬èº«èä¸ºä¸€ä½“ã€‚æœåŠ¡å‘ç°ã€è´Ÿè½½å¹³è¡¡ã€é…ç½®ç®¡ç†ã€é‡è¯•ã€è¶…æ—¶ç­‰ä¸€ç³»åˆ—åŠŸèƒ½åœ¨æœåŠ¡ä¸­æ‰§è¡Œï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸º JVMï¼‰ã€‚è¿™æ˜¯ Kubernetes ç­‰å¹³å°æ‰€é‡‡å–çš„ç›¸åæ–¹æ³•ï¼Œå…¶ä¸­æ‰€æœ‰è¿™äº›èŒè´£éƒ½å§”æ‰˜ç»™å¹³å°æˆ–å…¶ä»–æ”¯æŒå®¹å™¨ï¼ˆä¾‹å¦‚ [envoy](&lt;a href=&#34;https://lyft.github.io/envoy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://lyft.github.io/envoy/&lt;/a&gt;ã€&lt;a href=&#34;https://linkerd.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;linkerd&lt;/a&gt; ã€&lt;a href=&#34;https://traefik.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;traefik&lt;/a&gt; ï¼‰ã€‚æˆ‘åœ¨è¿‡å»æ¯”è¾ƒè¿‡&lt;a href=&#34;http://www.ofbizian.com/2016/12/spring-cloud-compared-kubernetes.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes å’Œ Spring Cloud&lt;/a&gt;ï¼ˆè¯·æ³¨æ„ï¼Œä¸æ˜¯çš„ Cloud Foundryï¼‰ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;aws-ecs-å’Œ-docker-swarm&#34;&gt;AWS ECS å’Œ Docker Swarm&lt;/h3&gt;
&lt;p&gt;åœ¨ Docker å…¬å¸ä»ç„¶éœ€è¦&lt;a href=&#34;https://thenewstack.io/focused-enterprise-docker-doesnt-fear-kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ææ¸…æ¥š&lt;/a&gt;å®ƒæ˜¯è¦å¼€å‘ä»€ä¹ˆï¼Œå–ä»€ä¹ˆï¼Œäºšé©¬é€Šåˆ›é€ äº†ä½¿ç”¨ Docker æŠ€æœ¯ä½œä¸ºä¸€éƒ¨åˆ†ä¸€ä¸ªéå¸¸åšå®çš„äº§å“ &lt;a href=&#34;https://aws.amazon.com/ecs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ECS&lt;/a&gt; ã€‚å¸¦æœ‰&lt;a href=&#34;https://blox.github.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Blox çš„&lt;/a&gt; ECSï¼ˆAWS çš„å¼€æºå®¹å™¨ç¼–æ’è½¯ä»¶ï¼‰æœ¬èº«å¯èƒ½ä¸æ˜¯ä»€ä¹ˆå¤§äº‹ï¼Œä½†å½“ä¸æ‰€æœ‰å…¶ä»– AWS äº§å“ç»“åˆä½¿ç”¨æ—¶ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠŸèƒ½éå¸¸å¼ºå¤§çš„é›†æˆå¹³å°ã€‚&lt;/p&gt;
&lt;p&gt;æ›´ä¸ç”¨è¯´ä»è™šæ‹Ÿæœºæ—¶ä»£èµ·æˆä¸º AWS æ”¯æŒè€…çš„&lt;a href=&#34;https://medium.com/netflix-techblog/the-evolution-of-container-usage-at-netflix-3abfc096781b&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Netflix æ­£åœ¨å‘å®¹å™¨é¢†åŸŸè¿‡æ¸¡&lt;/a&gt; ï¼Œå¹¶æ­£åœ¨æ¨åŠ¨ Amazon ECS çš„åˆ›æ–°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;cncf-å’Œ-kubernetes&#34;&gt;CNCF å’Œ Kubernetes&lt;/h3&gt;
&lt;p&gt;Kubernetes æ˜¯æ­¤ç±»åˆ«ä¸­æœ€æ–°çš„å¹³å°ä¹‹ä¸€ï¼Œä½†åŒæ—¶ä¹Ÿæ˜¯æœ‰å²ä»¥æ¥æœ€æ´»è·ƒï¼Œå‘å±•æœ€å¿«çš„å¼€æºé¡¹ç›®ä¹‹ä¸€ã€‚ä¸æ•´åˆçš„ &lt;a href=&#34;https://www.cncf.io/projects/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šé¡¹ç›®&lt;/a&gt; å’Œæ”¯æŒ&lt;a href=&#34;https://www.cncf.io/about/members/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…¬å¸ç›¸ç»“åˆ&lt;/a&gt; ï¼Œä½¿æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿæˆä¸ºè¿™ä¸€ç±»åˆ«ä¸­éå¸¸æœ‰åŠ›çš„ç«äº‰è€…ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªåæ¥è€…ï¼ˆ2014 å¹´ï¼‰ï¼ŒKuebernetes çš„ä¼˜åŠ¿åœ¨äºä»ä¸€å¼€å§‹å°±ä»¥å®¹å™¨ä¸ºä¸­å¿ƒçš„æ¶æ„å‘å±•ã€‚è€Œä¸”å®ƒåŸºäºä¸€ä¸ªå·²æœ‰åå¹´å†å²çš„ Google Borgï¼Œè¿™æ„å‘³ç€åŸåˆ™ï¼ˆä¸æ˜¯å®æ–½ï¼‰æ˜¯æˆç†Ÿçš„ï¼Œå¹¶åœ¨æœ€é«˜çº§åˆ«æµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-container-orchestrator-è°ƒæŸ¥ç»“æœ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Container Orchestrator è°ƒæŸ¥ç»“æœ&#34; srcset=&#34;
               /blog/myth-cloud-native-portability/61411417ly1fwp5jrxbatj20sg0gejry_hu_87fb76d8e33b61dc.webp 400w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5jrxbatj20sg0gejry_hu_a8848b9585130bac.webp 760w,
               /blog/myth-cloud-native-portability/61411417ly1fwp5jrxbatj20sg0gejry_hu_a89dbb2cfc6cbf5a.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/myth-cloud-native-portability/61411417ly1fwp5jrxbatj20sg0gejry_hu_87fb76d8e33b61dc.webp&#34;
               width=&#34;760&#34;
               height=&#34;438&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Container Orchestrator è°ƒæŸ¥ç»“æœ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Sysdig 2017 å¹´ Docker ä½¿ç”¨æŠ¥å‘Šä¸­çš„å®¹å™¨ç¼–æ’&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æ‚¨å¯ä»¥ ä» Sysdig æœ€è¿‘çš„ &lt;a href=&#34;https://sysdig.com/blog/sysdig-docker-usage-report-2017/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æŠ¥å‘Šä¸­&lt;/a&gt; çœ‹åˆ°çš„ç»“æœï¼Œäº‘åŸç”Ÿç”¨æˆ·ä¼¼ä¹å¾ˆæ¬£èµè¿™ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€‰æ‹©å“ªä¸€ä¸ª&#34;&gt;é€‰æ‹©å“ªä¸€ä¸ªï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¹Ÿè®¸æ‚¨åœ¨æƒ³ï¼Œåªè¦æ‚¨å°†åº”ç”¨ç¨‹åºæ‰“åŒ…åˆ°å®¹å™¨ä¸­ï¼Œå°±å¯ä»¥è½»æ¾åœ°è·¨ä¸åŒçš„äº‘åŸç”Ÿå¹³å°ç§»æ¤ã€‚ä½ é”™äº†ã€‚æ— è®ºæ‚¨æ˜¯ä» Mesosã€Cloud Foundryã€Kubernetesã€Docker Swarm è¿˜æ˜¯ ECS å¼€å§‹ï¼Œæ‚¨éƒ½å¿…é¡»æŠ•å…¥å¤§é‡èµ„é‡‘æ¥å­¦ä¹ å¹³å°å’Œæ”¯æŒå·¥å…·ï¼Œäº†è§£æ–‡åŒ–å’Œå·¥ä½œæ–¹å¼ï¼Œå¹¶ä¸è¿™ä¸ªä»ç„¶å¿«é€Ÿå˜åŒ–çš„ç”Ÿæ€ç³»ç»Ÿçš„æŠ€æœ¯å’Œå…¬å¸è¿›è¡Œäº’åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡çš„ç›®çš„ä¸æ˜¯è¦æ¯”è¾ƒè¿™äº›ç”Ÿæ€ç³»ç»Ÿï¼Œè€Œæ˜¯è¦æ˜¾ç¤ºå®ƒä»¬ä¹‹é—´çš„å·®å¼‚ï¼Œå¹¶è¯æ˜å¦‚æœéœ€è¦ï¼Œå®ƒå°†éœ€è¦å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±æ¥è¾“å…¥ï¼Œæˆ–è½¬ç§»åˆ°å¦ä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-ä½œä¸ºåº”ç”¨ç¨‹åºå¯ç§»æ¤å±‚&#34;&gt;Kubernetes ä½œä¸ºåº”ç”¨ç¨‹åºå¯ç§»æ¤å±‚&lt;/h2&gt;
&lt;p&gt;äº‘åŸç”Ÿæ€ç³»ç»Ÿåœ¨æŠ€æœ¯ã€æµç¨‹å’Œæ–‡åŒ–æ–¹é¢éå¸¸ç‹¬ç‰¹ã€‚ä½†å®ƒä»¬ä¹‹é—´ä¹Ÿæœ‰ä¸€äº›æ•´åˆã€‚è®¸å¤šç”±ä¸€ä¸ªå¹³å°æ¨å¹¿çš„æ¦‚å¿µä¹Ÿåœ¨å‘å…¶ä»–å¹³å°ä¼ æ’­ã€‚ä¾‹å¦‚ï¼Œéƒ¨ç½²å•å…ƒï¼ˆPod in Kubernetesï¼‰çš„æ¦‚å¿µç°åœ¨å‡ºç°åœ¨ Mesos ä¸­ï¼Œå®ƒä¹Ÿä½œä¸ºä»»åŠ¡ç»„å­˜åœ¨äº Amazon ECS ä¸­ã€‚æœåŠ¡å™¨ç«¯è´Ÿè½½å¹³è¡¡ï¼ˆKubernetes ä¸­çš„æœåŠ¡ï¼‰å’Œå¸¦æœ‰ç­–ç•¥çš„è°ƒåº¦/æ”¾ç½®ï¼ˆKubernetes Schedulerï¼‰çš„æ¦‚å¿µä¹Ÿå­˜åœ¨äº Docker Swarmã€AWS ECS ç­‰ä¸­ã€‚ä½†è¿™æ˜¯å®ƒèµ°å¤šè¿œï¼Œä»ä¸€ä¸ªç”Ÿæ€ç³»ç»Ÿè¿‡æ¸¡åˆ°å¦å¤–ï¼Œéœ€è¦ä»˜å‡ºå¾ˆå¤šåŠªåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¦‚ä½•é¿å…ä¸å•ä¸€ä¾›åº”å•†é”å®šï¼Ÿä¸€ç§æ–¹æ³•æ˜¯åšæŒä½¿ç”¨ Kubernetes å¹¶æ¥å—å®ƒä½œä¸ºäº‘å’ŒæœåŠ¡æä¾›å•†ä¹‹é—´çš„å¯ç§»æ¤æ€§å±‚ã€‚Kubernetes å¦‚æ­¤å—æ¬¢è¿çš„åŸå› ä¹‹ä¸€æ˜¯å®ƒä¸æ˜¯å•ä¸€çš„å…¬å¸ç©å…·ï¼Œè€Œæ˜¯ç”±å¤šå®¶å¤§å‹ç§‘æŠ€å…¬å¸æ”¯æŒï¼Œå¦‚è°·æ­Œã€çº¢å¸½ï¼ˆç°è¢« IBM æ”¶è´­ã€è¯‘è€…æ³¨ã€‘ï¼‰ã€Dockerï¼ŒMesosphereã€IBMã€æˆ´å°”ã€æ€ç§‘ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªåŸå› æ˜¯æœ‰è®¸å¤šäº‘å…¬å¸æä¾› Kubernetes ä½œä¸ºæœåŠ¡ã€‚å¦‚æœæ‚¨ä½¿ç”¨ Kubernetesï¼Œé‚£ä¹ˆæ‚¨å¯ä»¥é€šè¿‡ç¬¬ä¸‰æ–¹æœåŠ¡æä¾›å•†ä»¥æœ€å°çš„åŠªåŠ›åœ¨ Google å®¹å™¨å¼•æ“ï¼ŒMicrosoft Azureã€IBM Bluemix å®¹å™¨æœåŠ¡ç­‰äº‘æä¾›å•†ä¹‹é—´ç§»åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºï¼Œç”šè‡³å¯ä»¥åœ¨ AWS ä¸Šç§»åŠ¨æ‚¨çš„åº”ç”¨ç¨‹åºã€‚è¿™æ„å‘³ç€ Kubernetes API æ˜¯äº‘å¹³å°ä¹‹é—´åº”ç”¨ç¨‹åºçš„å¯ç§»æ¤æ€§å±‚ï¼Œè€Œä¸ä»…ä»…æ˜¯å®¹å™¨ã€‚ä¸€ä¸ªå®¹å™¨æœ¬èº«å°±æ˜¯äº‘åŸç”Ÿæµ·æ´‹ä¸­çš„ä¸€æ»´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºä½œè€…&#34;&gt;å…³äºä½œè€…&lt;/h2&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/myth-cloud-native-portability/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_b3c5fefec0a79a17.webp 400w,
               /blog/myth-cloud-native-portability/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_93005e34324f9bbc.webp 760w,
               /blog/myth-cloud-native-portability/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_4a30dfe67c49ae47.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/myth-cloud-native-portability/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_b3c5fefec0a79a17.webp&#34;
               width=&#34;85&#34;
               height=&#34;100&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bilgin Ibryam&lt;/strong&gt;  ï¼ˆ@bibryamï¼‰æ˜¯ Red Hat çš„é¦–å¸­æ¶æ„å¸ˆã€æäº¤è€…å’Œ ASF æˆå‘˜ã€‚ä»–æ˜¯ä¸€åå¼€æºå¸ƒé“å¸ˆï¼Œåšå®¢ä½œè€…ï¼Œã€ŠCamel Design Patternsã€‹å’Œã€ŠKubernetes Patternsã€‹ä¹¦ç±çš„ä½œè€…ã€‚åœ¨ä»–çš„æ—¥å¸¸å·¥ä½œä¸­ï¼ŒBilgin å–œæ¬¢æŒ‡å¯¼ç¼–ç å’Œé¢†å¯¼å¼€å‘äººå‘˜æˆåŠŸæ„å»ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆã€‚ä»–ç›®å‰çš„å·¥ä½œé‡ç‚¹æ˜¯åº”ç”¨ç¨‹åºé›†æˆã€åˆ†å¸ƒå¼ç³»ç»Ÿã€æ¶ˆæ¯ä¼ é€’ã€å¾®æœåŠ¡ã€devops å’Œä¸€èˆ¬çš„äº‘åŸç”ŸæŒ‘æˆ˜ã€‚ä½ å¯ä»¥åœ¨  &lt;a href=&#34;https://twitter.com/bibryam&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Twitter&lt;/a&gt;ã€&lt;a href=&#34;https://uk.linkedin.com/in/bibryam&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkedin&lt;/a&gt;  æˆ–ä»–çš„  &lt;a href=&#34;http://www.ofbizian.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åšå®¢&lt;/a&gt; ä¸Šæ‰¾åˆ°ä»–ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Service Mesh çš„æœªæ¥å°†ä¸ Knative å’Œ Apahce Whisk ç­‰æŠ€æœ¯å’Œè°å…±å­˜â€”â€”é‡‡è®¿ RedHat çš„ Istio äº§å“ç»ç†</title>
      <link>https://cloudnativecn.com/blog/istio-service-mesh-interview-redbear-brian-harrington/</link>
      <pubDate>Mon, 17 Sep 2018 19:19:27 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-service-mesh-interview-redbear-brian-harrington/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://jaxenter.com/istio-service-mesh-interview-harrington-148638.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Istio æ­£åœ¨å¼•å‘å¤§é‡çš„å…³æ³¨ï¼Œç‰¹åˆ«æ˜¯ 1.0 ç‰ˆæœ¬å‘å¸ƒåã€‚ä½†å®ƒæ˜¯å¦æˆä¸º Kubernetes ä¹‹ä¸Šçš„äº‹å®çš„æœåŠ¡ç½‘ç»œæ ‡å‡†å‘¢ï¼Ÿæˆ‘ä»¬é‡‡è®¿äº† Red Hat çš„ Istio äº§å“ç»ç†â€œçº¢èƒ¡å­â€Brian Harringtonï¼Œä»–çš„ç­”æ¡ˆæ˜¯è‚¯å®šçš„ã€‚â€œæœ‰äº† Istioï¼Œéƒ¨ç½²å¾ˆç®€å•ï¼Œä¸ Kubernetes çš„é›†æˆä¹Ÿæ˜¯æµ‘ç„¶ä¸€ä½“çš„ã€‚æ„Ÿè§‰å°±åº”è¯¥æ˜¯è¿™æ ·ã€‚â€œ&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-çº¢èƒ¡å­-brian-harrington&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;çº¢èƒ¡å­ Brian Harrington&#34; srcset=&#34;
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcqw67cllj30lc0qodj9_hu_8487e97290d89b35.webp 400w,
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcqw67cllj30lc0qodj9_hu_f9396262b034f7f7.webp 760w,
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcqw67cllj30lc0qodj9_hu_96c05b41f472bcbb.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcqw67cllj30lc0qodj9_hu_8487e97290d89b35.webp&#34;
               width=&#34;608&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      çº¢èƒ¡å­ Brian Harrington
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ç‰‡ï¼šçº¢èƒ¡å­ Brian Harrington&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Brian Harringtonï¼Œä¹Ÿè¢«ç§°ä¸º Redbeardï¼ˆçº¢èƒ¡å­ï¼‰ï¼Œæ˜¯ CoreOS çš„é¦–å¸­æ¶æ„å¸ˆï¼Œç°åœ¨æ˜¯ Red Hat çš„ Istio çš„äº§å“ç»ç†ã€‚ä»–æ˜¯å¼€æºå¼€å‘å’Œç³»ç»Ÿç®¡ç†é¢†åŸŸçš„å¼€å‘äººå‘˜ï¼Œé»‘å®¢å’ŒæŠ€æœ¯æ’°ç¨¿äººã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;Istio &lt;a href=&#34;https://jaxenter.com/istio-1-0-arrived-core-features-ready-production-use-147459.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;1.0&lt;/a&gt; åœ¨ä»Šå¹´ 8 æœˆåˆå‘å¸ƒï¼Œæ‰€æœ‰&lt;a href=&#34;https://istio.io/about/feature-stages/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ ¸å¿ƒåŠŸèƒ½&lt;/a&gt;ç°åœ¨éƒ½å¯ä»¥ç”¨äºç”Ÿäº§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨å·²ç»ç†Ÿæ‚‰ 0.8 ä¸­æä¾›çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆæ‚¨åº”è¯¥çŸ¥é“ 1.0 ä¸­æä¾›çš„æ–°åŠŸèƒ½åˆ—è¡¨å¹¶ä¸é•¿ï¼›è¯¥å›¢é˜Ÿé€‰æ‹©ä¸“æ³¨äºä¿®å¤é”™è¯¯å¹¶æé«˜æ€§èƒ½ã€‚å¦‚æœæ‚¨æƒ³çœ‹çœ‹ Istio 1.0 ä¸­å¼•å…¥çš„æ‰€æœ‰æ›´æ”¹ï¼Œå¯ä»¥é˜…è¯»&lt;a href=&#34;https://istio.io/zh/about/notes/1.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‘è¡Œè¯´æ˜&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸ Red Hat çš„ Istio äº§å“ç»ç†â€œçº¢èƒ¡å­â€Brian Harrington è®¨è®ºäº†ä»–æœ€å–œæ¬¢çš„åŠŸèƒ½ï¼ŒIstio çš„æœªæ¥ä»¥åŠå®ƒæ˜¯å¦å…·å¤‡æˆä¸º Kubernetes äº‹å®ä¸Šçš„æœåŠ¡ç½‘ç»œæ ‡å‡†çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-æ”¹å˜æ¸¸æˆè§„åˆ™&#34;&gt;Istio æ”¹å˜æ¸¸æˆè§„åˆ™ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šIstio å¯èƒ½ç›¸å¯¹è¾ƒæ–°ï¼Œä½†è¿™ç§ç”¨äºè¿æ¥ã€ç®¡ç†å’Œä¿æŠ¤å¾®æœåŠ¡çš„å·¥å…·æ­£åœ¨è·å¾—å¹¿æ³›çš„æ”¯æŒã€‚å¢é•¿èƒŒåçš„åŸå› æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; æœ€å¤§çš„åŸå› æ˜¯èŒƒå¼çš„è½¬å˜ã€‚åœ¨ &lt;a href=&#34;https://netflix.github.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Netflix çš„ OSS&lt;/a&gt; ï¼ˆå¼€æ”¾æºä»£ç è½¯ä»¶å¥—ä»¶ï¼‰å¸¦æ¥äº†å¾ˆå¤šå¼ºå¤§çš„åŠŸèƒ½ï¼Œä¸ªäººå¼€å‘ä¼ä¸šçº§ Java åº”ç”¨ç¨‹åºï¼Œä½†å®ƒè¦æ±‚ä½ ä¸ºäº†å®ç°æ•´ä¸ªå¥—ä»¶çš„è€Œæ•´åˆå„ç§è½¯ä»¶åº“ã€‚Istio ä»¤äººå…´å¥‹ï¼Œå› ä¸ºå®ƒä¸ºç”¨æˆ·æä¾›äº† A/B æµ‹è¯•ã€æ–­è·¯ã€æœåŠ¡æˆæƒç­‰åŠŸèƒ½ï¼ŒåŒæ—¶æœ€å¤§é™åº¦åœ°å‡å°‘äº†ä»£ç æ›´æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šGoogle æœ€è¿‘å®£å¸ƒçš„&lt;a href=&#34;https://jaxenter.com/google-cloud-interesting-announcements-147230.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘æœåŠ¡å¹³å°&lt;/a&gt;ä»¥ Istioï¼ˆå’Œ Kubernetesï¼‰ä¸ºæ ¸å¿ƒã€‚è¿™å¯¹ Istio çš„æœªæ¥æ„å‘³ç€ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; è¿™è¡¨æ˜è¯¥é¢†åŸŸçš„è€ç‰Œä¼ä¸šå·²ç»è®¤è¯†åˆ°äº†ä¸€é¡¹å“è¶Šçš„æŠ€æœ¯ï¼Œå¹¶ä¸”æ˜ç™½æ—©æœŸåˆä½œå°†ä¸ºå®¢æˆ·å¸¦æ¥æ›´å¤§çš„æˆåŠŸã€‚åè¿‡æ¥ï¼Œå¦‚æœå®¢æˆ·æˆåŠŸï¼Œé‡‡ç”¨çš„ä¾›åº”å•†æä¾›çš„è§£å†³æ–¹æ¡ˆä¹Ÿä¼šå¢åŠ ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šIstio èƒ½å¦æˆä¸º Kubernetes äº‹å®ä¸Šçš„æœåŠ¡ç½‘ç»œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; æˆ‘æ•¢è‚¯å®šä¼šçš„ã€‚å…¶ä»–è§£å†³æ–¹æ¡ˆé€šå¸¸æ˜¯åœ¨æ“ä½œç»„ä»¶ï¼Œè¿™äº›ç»„ä»¶ä¸æ˜¯ä»¥äº‘åŸç”Ÿä¸»ä½“ä¸ºåŸºç¡€æ„å»ºçš„ï¼Œå› æ­¤å¯èƒ½æ€»æ˜¯æ„Ÿè§‰æœ‰ç‚¹ç¬¨æ‹™ã€‚ä½¿ç”¨ Istioï¼Œéƒ¨ç½²éå¸¸ç®€å•ï¼Œä¸ Kubernetes çš„é›†æˆä¹Ÿæµ‘ç„¶ä¸€ä½“ã€‚æ„Ÿè§‰å¥½åƒåº”è¯¥ä¸€ç›´å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šåœ¨ Istio 1.0 ä¸­ä½ æœ€å–œæ¬¢çš„åŠŸèƒ½æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; æˆ‘æœ€å–œæ¬¢çš„åŠŸèƒ½æ˜¯èƒ½å¤Ÿè‡ªç”±æ§åˆ¶æµé‡çš„è·¯ç”±ã€‚è¿‡å»è¿è¡ŒæœåŠ¡æ—¶ï¼Œæ€»æ˜¯éœ€è¦æ˜‚è´µçš„ä¸“ç”¨è´Ÿè½½å‡è¡¡ç¡¬ä»¶çš„ç»„åˆæ‰èƒ½å®ç°è¯¥åŠŸèƒ½ï¼Œè¿˜è¦ä¿®æ”¹åº”ç”¨ç¨‹åºï¼Œæœ‰æ—¶å€™ç”šè‡³éœ€è¦é‡å†™ä¸€ä¸ªæ‰èƒ½è‰¯å¥½è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Istio ä¸­ï¼Œå°† 10ï¼…çš„æµé‡åˆ†é…åˆ°ä¸åŒç‰ˆæœ¬çš„æœåŠ¡å¹¶å°†è¿™äº›è¿æ¥è·¯ç”±åˆ°è¯¥ç‰ˆæœ¬çš„æœåŠ¡ååˆ†ç®€å•ã€‚å›´ç»•è¯¥åŠŸèƒ½çš„æ˜“ç”¨æ€§æ”¹å˜äº†æ¸¸æˆè§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·å‚è§ï¼š&lt;a href=&#34;http://www.servicemesher.com/blog/announcing-istio-1.0/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio 1.0 å‘å¸ƒï¼Œå·²ç”Ÿäº§å°±ç»ªï¼&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šIstio çš„æœªæ¥æ˜¯æ¨¡å—åŒ–çš„å—ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; æ¨¡å—åŒ–æ˜¯ Istio æœªæ¥çš„ä¸€éƒ¨åˆ†ã€‚Istio è§„å®šäº†æŸäº›éœ€è¦æ»¡è¶³çš„æ¥å£ï¼Œç„¶åå…è®¸ç”¨æˆ·ä½¿ç”¨ä»–ä»¬æœ€ç†Ÿæ‚‰çš„è½¯ä»¶æ¥æ»¡è¶³è¿™äº›æ¥å£ã€‚è¿™åœ¨â€œNginmeshâ€é¡¹ç›®ä¸­æœ€ä¸ºæ˜æ˜¾ï¼Œå…¶ä¸­ Envoyï¼ˆIstio çš„ä»£ç†ç»„ä»¶ï¼‰è¢« Nginx å–ä»£ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–ç”¨æˆ·åŒæ ·å¯ä»¥ç”¨ Linkerd å–ä»£äº† Envoyã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šä½¿ç”¨ Istio æœ€å¤§çš„å¥½å¤„æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**â€œçº¢èƒ¡å­â€Brian Harringtonï¼š**Istio æœ€è€€çœ¼çš„ä¸€ä¸ªç‰¹ç‚¹æ˜¯å®ƒä¸“æ³¨äºåº”ç”¨ç¨‹åºçš„å®‰å…¨æ€§ã€‚è®¾ç½®åŒå‘ TLS çš„åŠŸèƒ½å¯è‡ªåŠ¨è§£é”å…¶ä»–é«˜çº§åŠŸèƒ½ï¼Œä¾‹å¦‚æœåŠ¡æˆæƒä»¥åŠæœåŠ¡ä¹‹é—´çš„åŠ å¯†ã€‚Istio è¿˜å…·æœ‰ä¸å…¶ä»– &lt;a href=&#34;https://spiffe.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SPIFFE&lt;/a&gt; ï¼ˆé€‚ç”¨äºæ‰€æœ‰äººçš„å®‰å…¨ç”Ÿäº§èº«ä»½æ¡†æ¶ï¼‰å…¼å®¹ç³»ç»Ÿé›†æˆçš„èƒ½åŠ›ï¼Œè¿™å°†æœ‰åŠ©äºæ¨åŠ¨æœªæ¥é‡‡ç”¨æ›´é«˜åº¦å®‰å…¨çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæˆ‘å¸Œæœ›çœ‹åˆ°å®‰å…¨ç‰¹æ€§è¿›ä¸€æ­¥æ‰©å±•ï¼ŒåŒ…æ‹¬ç±»ä¼¼äº Google çš„&lt;a href=&#34;https://cloud.google.com/iap/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;èº«ä»½è¯†åˆ«ä»£ç†çš„åŠŸèƒ½&lt;/a&gt; ã€‚å…³äºè¿™ä¸€ç‚¹çš„å¥½å¤„æ˜¯ï¼Œé€šè¿‡å¯¹ JSON Web token çš„æ”¯æŒå’Œå¯¹ OpenID Connect çš„æ”¯æŒå¥ å®šäº†ä¸€äº›åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¿˜è¯·å‚è§ï¼š &lt;a href=&#34;https://jaxenter.com/google-cloud-interesting-announcements-147230.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Cloud Next &amp;lsquo;18ï¼šäº‘å¼€å‘äººå‘˜æ‰€å¸Œæœ›çš„ä¸€åˆ‡&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šIstio æœ‰ä»€ä¹ˆ Linkerd èº«ä¸Šä¸å…·å¤‡çš„ä¸œè¥¿å—ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**â€œçº¢èƒ¡å­â€Brian Harringtonï¼š**Istio æ‹¥æœ‰ä¸€ä¸ªè“¬å‹ƒå‘å±•çš„ç¤¾åŒºï¼Œæ­£ä»¥æƒŠäººçš„é€Ÿåº¦å¢é•¿ã€‚é¡ºä¾¿æä¸€ä¸‹ï¼ŒIstio å·²ç»å­˜åœ¨äº†å¤§çº¦ &lt;a href=&#34;https://github.com/istio/istio/commit/0216e811e9da88b867742710f7d166cef2eabfbc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;21 ä¸ªæœˆ&lt;/a&gt; ï¼Œåœ¨ GitHub ä¸Šæœ‰è¶…è¿‡ 200 ä¸ªè´¡çŒ®è€…å’Œä¸€ä¸ªéå¸¸æ´»è·ƒ&lt;a href=&#34;https://github.com/istio/istio/pulse&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;pulse&lt;/a&gt;ï¼ˆå³ä½¿ä½ å¿½ç•¥åƒ Fortio è¿™æ ·çš„å­é¡¹ç›®åªçœ‹ Istio æ ¸å¿ƒé¡¹ç›®ï¼‰ã€‚è€Œ Linkerd å·²ç»å­˜åœ¨äº†è¿‘&lt;a href=&#34;https://github.com/linkerd/linkerd/tree/37e38f2a892d9354eea7305135aa6370612b02f2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;31 ä¸ªæœˆ&lt;/a&gt;ã€‚å³ä½¿ä½ ç»“åˆ&lt;a href=&#34;https://github.com/linkerd/linkerd/pulse&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkerd v1&lt;/a&gt;å’Œ&lt;a href=&#34;https://github.com/linkerd/linkerd2/pulse/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkerd v2&lt;/a&gt; çš„â€œpulseâ€ ï¼Œå®ƒä»¬çš„æ´»è·ƒåº¦æ¯”èµ· Istio ä»ç„¶ç›¸å»ç”šè¿œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;JAXenterï¼šæ‚¨èƒ½å±•æœ›ä¸‹æœåŠ¡ç½‘æ ¼çš„æœªæ¥å—ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;â€œçº¢èƒ¡å­â€Brian Harringtonï¼š&lt;/strong&gt; æˆ‘ç›¸ä¿¡æœåŠ¡ç½‘æ ¼çš„æœªæ¥ä¸æ— æœåŠ¡å™¨è®¡ç®—ï¼ˆServerlessï¼‰æœ‰å…³ã€‚æˆ‘ä»¬æ­£åœ¨èåˆå¼€å‘äººå‘˜æˆåŠŸåœ°å°†ä»£ç åº“åˆ†è§£ä¸ºåŸå­ç»„ä»¶çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§è¶‹åŠ¿ç”šè‡³åæ˜ åœ¨å›´ç»• Istio æ¨¡å—åŒ–çš„é—®é¢˜ä¸Šã€‚æˆ‘è§‰å¾—æœåŠ¡ç½‘æ ¼çš„æœªæ¥æ˜¯ä¸ Knative å’Œ Apache Whisk ç­‰æŠ€æœ¯å…±ç”Ÿçš„ï¼Œå®ƒä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿé‡æ–°é‡‡ç”¨â€œä»…åšä¸€ä»¶äº‹å¹¶æŠŠå®ƒåšå¾—å¥½â€ï¼ˆdo one thing and do it wellï¼‰çš„â€œUNIX å“²å­¦â€ï¼Œä»¥å»ºç«‹åº”ç”¨çš„æœªæ¥ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcr3ya379j30sg0j1grh_hu_ed4c597e3c332584.webp 400w,
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcr3ya379j30sg0j1grh_hu_92c509cab6c92560.webp 760w,
               /blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcr3ya379j30sg0j1grh_hu_43d054f3b3d671c2.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-service-mesh-interview-redbear-brian-harrington/006tNbRwgy1fvcr3ya379j30sg0j1grh_hu_ed4c597e3c332584.webp&#34;
               width=&#34;760&#34;
               height=&#34;508&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Serverless vs Containerâ€”â€”å¼€å‘äººå‘˜å‘å·¦ï¼ŒDevOps å‘å³</title>
      <link>https://cloudnativecn.com/blog/serverless-vs-containers/</link>
      <pubDate>Sun, 16 Sep 2018 16:49:58 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/serverless-vs-containers/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://dzone.com/articles/serverless-vs-containers&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹çœ‹ Serverless ä¸å®¹å™¨çš„é‡‡ç”¨ç‡ã€å·¥å…·æ”¯æŒä»¥åŠå›´ç»• Serverless å’Œå®¹å™¨åŒ–çš„å…¶ä»–äº‰è®ºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Serverless å’Œå®¹å™¨ä¸­ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§ä»¤äººæƒŠå¹çš„æŠ€æœ¯ï¼Œå¯ä»¥ä¸ºå·¥ç¨‹å¸ˆæä¾›é«˜æ•ˆçš„ï¼Œä¸æœºå™¨æ— å…³çš„æŠ½è±¡ã€‚ç„¶è€Œï¼Œä¸¤ä¸ªé˜µè¥ä¹‹é—´ä¼¼ä¹å­˜åœ¨ç€ä¸å¯é€¾è¶Šçš„é¸¿æ²Ÿã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ è¯»è¿‡æˆ‘åœ¨è¿‡å»ä¸¤å¹´å†™çš„ä»»ä½•å†…å®¹ï¼Œä½ å°±ä¼šçŸ¥é“æˆ‘åšå®šåœ°ç«™åœ¨ Serverless é˜µè¥ã€‚ä½†æˆ‘ä¹Ÿæ˜¯å®¹å™¨çš„æ—©æœŸé‡‡ç”¨è€…ã€‚åœ¨ Docker è¾¾åˆ° 1.0 é‡Œç¨‹ç¢‘åä¸ä¹…ï¼Œ2015 å¹´åˆæˆ‘çš„ç¬¬ä¸€ä¸ªå®¹å™¨åŒ–é¡¹ç›®é—®ä¸–ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç¯‡æ–‡ç« ä¸æ˜¯ä¸ºäº†å†æ¬¡å¼•å‘é˜µè¥æˆ˜äº‰æˆ–å®£å¸ƒæŸä¸ªé˜µè¥çš„èƒœåˆ©ã€‚ç›¸åï¼Œæˆ‘å°†å°è¯•å®¢è§‚åœ°çœ‹å¾… Serverless å’Œå®¹å™¨çš„çŠ¶æ€ï¼Œæ ¹æ®å®ƒä»¬æä¾›çš„åˆ©å¼Šæƒè¡¡ï¼Œå¹¶å¯¹æœªæ¥çš„æƒ…å†µç»™å‡ºè¯šå®çš„çœ‹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;é‰´äº Serverless å’Œ FaaS å‡½æ•°å³æœåŠ¡ï¼ˆFAASï¼‰é€šå¸¸å·²ç»å¯ä»¥äº’æ¢ä½¿ç”¨ï¼Œä¸ºäº†æœ¬æ–‡çš„ç›®çš„ï¼Œæˆ‘å°†é™åˆ¶ Serverless çš„å®šä¹‰ä¸º FAAS äº§å“ï¼Œä¾‹å¦‚ AWS Lambdaã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®¹å™¨çŠ¶æ€&#34;&gt;å®¹å™¨çŠ¶æ€&lt;/h2&gt;
&lt;p&gt;è‡ªä» Docker æ—©æœŸå¯ç”¨ä»¥æ¥å·²ç»èµ°è¿‡äº†æ¼«é•¿çš„é“è·¯ã€‚éšç€æˆ‘ä»¬åœ¨å®¹å™¨ä¸Šè¿è¡Œçš„ç³»ç»Ÿè¶Šæ¥è¶Šå¤æ‚ï¼Œæˆ‘ä»¬çš„éœ€æ±‚å·²ç»å‚¬ç”Ÿäº†ä¸°å¯Œçš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/serverless-vs-containers/61411417ly1fv92pcoc59j218c0wwtb6_hu_4f427bfb08c7d4e5.webp 400w,
               /blog/serverless-vs-containers/61411417ly1fv92pcoc59j218c0wwtb6_hu_82d3acc4eed0b147.webp 760w,
               /blog/serverless-vs-containers/61411417ly1fv92pcoc59j218c0wwtb6_hu_1f9d6a45b9016e55.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/serverless-vs-containers/61411417ly1fv92pcoc59j218c0wwtb6_hu_4f427bfb08c7d4e5.webp&#34;
               width=&#34;760&#34;
               height=&#34;564&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;AWS è¿˜æ‹¥æœ‰è‡ªå·±çš„æ‰˜ç®¡å®¹å™¨æœåŠ¡ ECSã€‚è¿™æä¾›äº†ä¸ AWS ç”Ÿæ€ç³»ç»Ÿå…¶ä»–éƒ¨åˆ†æ›´ç´§å¯†çš„é›†æˆã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåŠ¡ç½‘æ ¼ä¹Ÿæ­£åœ¨è·å¾—å¯è§æ€§å’Œè¢«é‡‡ç”¨ã€‚å®ƒä»¬å°†å¸¸è§çš„äº¤å‰é—®é¢˜ï¼ˆä¾‹å¦‚è·Ÿè¸ªå’Œæ–­è·¯å™¨ï¼‰ç§»å‡ºåº”ç”¨å±‚ã€‚é€šè¿‡è§£å†³åŸºç¡€æ¶æ„å±‚ä¸­çš„è¿™äº›é—®é¢˜ï¼Œå®ƒä»¬ä¸ºè¿™äº›æŒ‘æˆ˜æä¾›äº†è¯­è¨€å’Œè¿è¡Œæ—¶æ— å…³çš„è§£å†³æ–¹æ¡ˆã€‚è¿™ä½¿å®ƒä»¬éå¸¸é€‚åˆç°ä»£ IT ç»„ç»‡ï¼Œå³ä½¿ç”¨å„ç§ä¸åŒè¯­è¨€çš„æ„å»ºå¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;serverless-ç°çŠ¶&#34;&gt;Serverless ç°çŠ¶&lt;/h2&gt;
&lt;p&gt;è™½ç„¶å›´ç»• Serverless çš„ç‚’ä½œå¹¶æ²¡æœ‰å’Œå®¹å™¨ä¸€æ ·é•¿ã€‚å€¼å¾—è®°ä½çš„æ˜¯ï¼Œåœ¨ Lamber è¾¾åˆ° 1.0 ä¹‹åä»…ä¸€ä¸ªæœˆï¼ŒAWS Lambda å°±åœ¨ 2014 å¹´å‘å¸ƒäº†ã€‚å®ƒéšé™„äº† CloudWatch çš„åŸºæœ¬æ—¥å¿—è®°å½•å’Œç›‘è§†æ”¯æŒï¼Œå³ä½¿æˆ‘ä»¬ç°åœ¨ä¾èµ–çš„è®¸å¤šäº‹ä»¶æºï¼ˆä¾‹å¦‚ API Gatewayï¼‰éƒ½æ˜¯åœ¨ä¹‹åå¼•å…¥çš„ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è¿™äº›æ‰˜ç®¡æœåŠ¡ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è§£å†³æ–¹æ¡ˆå¯ä»¥è®©æ‚¨åœ¨è‡ªå·±çš„ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œ Serverlessã€‚å…¶ä¸­åŒ…æ‹¬è°·æ­Œå’Œåˆä½œå…¬å¸æœ€è¿‘å®£å¸ƒçš„ Knativeã€‚è™½ç„¶è¿™äº›è§£å†³æ–¹æ¡ˆè¯•å›¾æ»¡è¶³è®¸å¤šå¼€å‘äººå‘˜çš„éœ€æ±‚ï¼Œä½†æˆ‘æ„Ÿåˆ°ä»–ä»¬æ”¾å¼ƒäº† Serverless çš„æœ€ä½³åŠŸèƒ½â€”â€”ä¸å¿…æ‹…å¿ƒæœåŠ¡å™¨ï¼&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/serverless-vs-containers/61411417ly1fv92pv9fp4j20y60pw43y_hu_365a22ad92ab327d.webp 400w,
               /blog/serverless-vs-containers/61411417ly1fv92pv9fp4j20y60pw43y_hu_4a49e2e9be922e04.webp 760w,
               /blog/serverless-vs-containers/61411417ly1fv92pv9fp4j20y60pw43y_hu_6d5d5007c4d2945f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/serverless-vs-containers/61411417ly1fv92pv9fp4j20y60pw43y_hu_365a22ad92ab327d.webp&#34;
               width=&#34;760&#34;
               height=&#34;576&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;é‡‡ç”¨è¶‹åŠ¿&#34;&gt;é‡‡ç”¨è¶‹åŠ¿&lt;/h2&gt;
&lt;p&gt;æ ¹æ®ä¸€äº›è°ƒæŸ¥å’Œç ”ç©¶ï¼ŒServerless å’Œå®¹å™¨çš„é‡‡ç”¨æ­£åœ¨å¿«é€Ÿå¢é•¿ã€‚ä»¥ä¸‹æ˜¯æˆ‘è®¤ä¸ºçš„ä¸€äº›äº®ç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;A Cloudability å‘ç°ï¼Œ2017 å¹´ç¬¬å››å­£åº¦ AWS ç”¨æˆ·çš„å®¹å™¨é‡‡ç”¨é‡å¢é•¿äº† 246ï¼…ï¼Œé«˜äºç¬¬ä¸‰å­£åº¦çš„ 206ï¼…ã€‚åŒæ—¶ï¼ŒåŒä¸€é¡¹ç ”ç©¶å‘ç°ï¼Œ2017 å¹´ç¬¬å››å­£åº¦ AWS ç”¨æˆ· Serverless é‡‡ç”¨é‡å¢é•¿äº† 667ï¼…ï¼Œé«˜äºç¬¬ä¸‰å­£åº¦çš„ 321ï¼…ã€‚&lt;/li&gt;
&lt;li&gt;Serverless å…¬å¸æœ€è¿‘å‘ç°ï¼Œ2018 å¹´æœ‰ 82ï¼…çš„æ¥å—è°ƒæŸ¥çš„äººå‘˜ä½¿ç”¨ Serverlessï¼Œé«˜äº 2017 å¹´çš„ 45ï¼…ã€‚è¶…è¿‡ 53.2ï¼…çš„äººè¡¨ç¤ºä»–ä»¬ä½¿ç”¨ Serverless æŠ€æœ¯å¯¹ä»–ä»¬çš„å·¥ä½œè‡³å…³é‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;Serverless å…¬å¸çš„è°ƒæŸ¥è¿˜æŠ¥å‘Šè¯´ï¼Œåœ¨é‡‡ç”¨ Serverless ä¹‹å‰ï¼Œ24ï¼…çš„æ¥å—è°ƒæŸ¥çš„äººå‘˜å¯¹å…¬å…±äº‘çš„ä½¿ç”¨ç»éªŒæœ‰é™æˆ–ä¸ºé›¶ã€‚20.2ï¼…çš„ä¸ºæ‹¥æœ‰ 1000 å¤šåå‘˜å·¥çš„å¤§å‹ä¼ä¸šå·¥ä½œã€‚&lt;/li&gt;
&lt;li&gt;Logz.io çš„ &lt;a href=&#34;https://logz.io/devops-pulse-insights-2018/#pulse_section_ten&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DevOps Pulse&lt;/a&gt; è°ƒæŸ¥å‘ç°ï¼Œåœ¨ 2018 å¹´ï¼Œ60.71ï¼…çš„æ¥å—è°ƒæŸ¥çš„äººå‘˜é‡‡ç”¨äº†å®¹å™¨ç¼–æ’ï¼Œé«˜äº 2017 å¹´çš„ 42.11ï¼…ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼ŒDevOps Pulse è°ƒæŸ¥æ˜¾ç¤ºï¼ŒServerless é‡‡ç”¨ç‡æ¯”å…¶ä»–æŠ¥å‘Šå°å¾—å¤šã€‚ä» 2018 å¹´çš„ 30.55ï¼…ï¼ˆ2017 å¹´ï¼‰ä¸Šå‡åˆ° 42.58ï¼…ã€‚è¿™å¯èƒ½ä¸å…¶æ¥å—è°ƒæŸ¥çš„äººå‘˜çš„åˆ†å¸ƒæœ‰å…³ã€‚å…¶ä¸­ 28.54ï¼…è®¤ä¸ºè‡ªå·±æ˜¯å¼€å‘è€…ï¼Œè€Œ 44.26ï¼…è®¤å®šä¸º DevOpsã€DevSecOpsã€SysAdmin æˆ– SREã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸æˆ‘åœ¨å®¹å™¨å’Œ Serverless é˜µè¥ä¹‹é—´çš„ä¸Šè¿°é¸¿æ²Ÿçš„ç»éªŒä¸€è‡´ã€‚é‚£äº›è®¤ä¸ºè‡ªå·±æ˜¯å¼€å‘äººå‘˜çš„äººæ›´å€¾å‘äº Serverlessï¼Œè€Œé‚£äº›è¢«è®¤ä¸ºæ˜¯ DevOps çš„äººæ›´æœ‰å¯èƒ½é€‰æ‹©å®¹å™¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ§åˆ¶ä¸è´£ä»»&#34;&gt;æ§åˆ¶ä¸è´£ä»»&lt;/h2&gt;
&lt;p&gt;å…³äº Serverless ä¸å®¹å™¨çš„äº‰è®ºé€šå¸¸å§‹äºæ§åˆ¶ï¼Œæˆ–è€…åœ¨ Serverless çš„æƒ…å†µä¸‹ç¼ºä¹æ§åˆ¶ã€‚è¿™ä¸æ˜¯æ–°çš„ã€‚äº‹å®ä¸Šï¼Œæˆ‘æ¸…æ¥šåœ°è®°å¾—å½“ AWS åœ¨ 2009 å¹´å¼€å§‹è·å¾—ç‰µå¼•åŠ›æ—¶å›´ç»•æ§åˆ¶çš„ç›¸åŒè¾©è®ºã€‚ç°åœ¨ 10 å¹´åï¼Œå°˜åŸƒè½å®šäºåŸå§‹è¾©è®ºï¼Œä½†æˆ‘ä»¬æœªèƒ½å¸å–æ•™è®­ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è¦æ§åˆ¶æ˜¯äººçš„æœ¬æ€§ï¼Œä½†ä½ æ„¿æ„ä¸ºæ­¤ä»˜å‡ºå¤šå°‘é’±ï¼Ÿæ‚¨çŸ¥é“æ‚¨å°†æ‰¿æ‹…çš„æ€»ä½“æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æ§åˆ¶è‡ªå·±çš„åŸºç¡€è®¾æ–½çš„èƒ½åŠ›å¸¦æ¥äº†å¾ˆå¤šè´£ä»»ã€‚è¦æ‰¿æ‹…è¿™äº›è´£ä»»ï¼Œæ‚¨éœ€è¦æ‹¥æœ‰ç»„ç»‡ä¸­çš„ç›¸å…³æŠ€èƒ½ã€‚è¿™æ„å‘³ç€å·¥èµ„ï¼ˆå¾ˆå®¹æ˜“æˆä¸ºå¤§å¤šæ•°ç»„ç»‡çš„æœ€å¤§å¼€æ”¯ï¼‰ï¼Œä»£ç†è´¹ä»¥åŠä»å·¥ç¨‹å¸ˆå’Œç»ç†é‚£é‡ŒæŠ½å‡ºæ—¶é—´è¿›è¡Œæ‹›è˜å’Œå…¥èŒã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°æ‰€æ¶‰åŠçš„ TCOï¼Œå…·æœ‰è¯¥æ§åˆ¶çš„ç›®æ ‡å¿…é¡»æ˜¯é’ˆå¯¹æŸäº›äº‹ç‰©è¿›è¡Œä¼˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œä¸ºä¸šåŠ¡å…³é”®å·¥ä½œæµç¨‹å®ç°å¯é¢„æµ‹çš„æ€§èƒ½ï¼‰ï¼Œå¹¶ä¸”ä¸ä¸ºå…¶è‡ªèº«æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ„å»ºåŸºäºå®¹å™¨çš„é€šç”¨è®¡ç®—å¹³å°éœ€è¦å¤§é‡çš„å·¥ç¨‹ä¸“ä¸šçŸ¥è¯†å’ŒæŠ•èµ„ï¼Œè¯¥å¹³å°ä¸ AWS Lambda ç­‰ Serverless äº§å“ä¸€æ ·é«˜æ•ˆï¼Œå¯æ‰©å±•ä¸”å…·æœ‰å¼¹æ€§ã€‚å¤§å¤šæ•°ç»„ç»‡æ ¹æœ¬æ²¡æœ‰èƒ½åŠ›è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å°½ç®¡æœ‰å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±æŠ•å…¥ï¼Œä½†æˆ‘çŸ¥é“ä¸€äº›å¤§ä¼ä¸šåœ¨ä»–ä»¬çš„å°è¯•ä¸­æƒ¨é­å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/serverless-vs-containers/61411417ly1fv92q5mvy7j20y01061kx_hu_f1440cfcf86dd1a3.webp 400w,
               /blog/serverless-vs-containers/61411417ly1fv92q5mvy7j20y01061kx_hu_1436046cdd85817a.webp 760w,
               /blog/serverless-vs-containers/61411417ly1fv92q5mvy7j20y01061kx_hu_cccdd9f9234436c0.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/serverless-vs-containers/61411417ly1fv92q5mvy7j20y01061kx_hu_f1440cfcf86dd1a3.webp&#34;
               width=&#34;714&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;å·¥å…·æ”¯æŒ&#34;&gt;å·¥å…·æ”¯æŒ&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Serverlessï¼Œæ‚¨å¯ä»¥ä» box-loggingï¼ŒæŒ‡æ ‡å’Œè·Ÿè¸ªä¸­è·å¾—åŸºæœ¬çš„å¯è§‚å¯Ÿæ€§å·¥å…·ã€‚å°½ç®¡æœ‰è¿™äº›è­¦å‘Šï¼Œä½†ä¸€å¼€å§‹å®ƒä»¬é€šå¸¸å°±è¶³å¤Ÿäº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¼ ç»Ÿä¸Šè¿åˆ IAAS æˆ–å®¹å™¨å¸‚åœºçš„ä¾›åº”å•†ä¹Ÿå¼€å§‹ä¸º Serverless åº”ç”¨ç¨‹åºæä¾›æ”¯æŒã€‚ä½†æ˜¯ï¼Œä»–ä»¬éœ€è¦è°ƒæ•´è‡ªå·±çš„æ–¹æ³•ï¼Œå› ä¸º Serverless æ— æ³•å†ä½¿ç”¨åŸºäºä»£ç†çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜æœ‰è¶Šæ¥è¶Šå¤šçš„ä¾›åº”å•†ä¸“æ³¨äºè§£å†³ Serverless åº”ç”¨ç¨‹åºçš„å¯è§‚å¯Ÿæ€§å’Œå®‰å…¨æ€§é—®é¢˜ã€‚ä½†æ˜¯ï¼Œå¤§å¤šæ•°ä»å¤„äºå¼€å‘çš„æ—©æœŸé˜¶æ®µï¼Œå°šæœªå‡†å¤‡å¥½è¿›è¡Œä¸¥è‚ƒçš„ç”Ÿäº§ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ Serverless ç›¸æ¯”ï¼Œå®¹å™¨ç©ºé—´å…·æœ‰æ›´æˆç†Ÿå’Œå¤šæ ·åŒ–çš„å·¥å…·ç”Ÿæ€ç³»ç»Ÿã€‚äº‹å®ä¸Šï¼Œæˆ‘å‘ç°ä½¿ç”¨å®¹å™¨çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯å¤„ç†ç»å¤§å¤šæ•°çš„é€‰æ‹©ï¼&lt;/p&gt;
&lt;p&gt;æœ‰å……è¶³çš„ä¿®è¡¥æœºä¼šï¼Œæˆ‘ä¹Ÿå‘ç°å›¢é˜Ÿå¯èƒ½ä¼šå¿½ç•¥å¥–å“ï¼ˆå³ä¸ºæˆ‘ä»¬çš„å®¢æˆ·å»ºç«‹æ›´å¥½çš„äº§å“ï¼‰ï¼Œå¹¶é™·å…¥è¿‡åº¦å·¥ç¨‹çš„é™·é˜±ã€‚&lt;/p&gt;
&lt;p&gt;Serverless çš„å·¥å…·æ”¯æŒå°†ä¼šè¶Šæ¥è¶Šå¥½ï¼Œä½†è‡³å°‘ç›®å‰ï¼Œä»ç„¶è¿œè¿œè½åäºå®¹å™¨ã€‚åœ¨å®¹å™¨é¢†åŸŸå·¥ä½œçš„äººé¢ä¸´çš„æŒ‘æˆ˜æ˜¯æŠµåˆ¶ä¿®è¡¥å’Œè¿½æ±‚ç®€å•çš„å†²åŠ¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¾›åº”å•†é”å®šé£é™©ä¸å¥–åŠ±&#34;&gt;ä¾›åº”å•†é”å®šï¼šé£é™©ä¸å¥–åŠ±&lt;/h2&gt;
&lt;p&gt;Serverless çš„æ‰¹è¯„è€…é€šå¸¸ä½¿ç”¨ä¾›åº”å•†é”å®šä½œä¸ºä»–ä»¬çš„è®ºæ®ã€‚ä¸æ­¤åŒæ—¶ï¼Œå¤§å¤šæ•° AWS å®¢æˆ·å®é™…ä¸Šéƒ½åœ¨è¦æ±‚æ›´ç´§å¯†çš„é›†æˆï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥ä»å¹³å°ä¸­è·å–æ›´å¤šä»·å€¼ã€‚&lt;/p&gt;
&lt;p&gt;å¯ä»¥è‚¯å®šçš„æ˜¯ï¼Œä¾›åº”å•†é”å®šæ˜¯ä¸€ç§é£é™©ã€‚ä½†æ­£å¦‚ä»»ä½•æŠ•èµ„è€…éƒ½ä¼šå‘Šè¯‰ä½ çš„é‚£æ ·ï¼Œå¦‚æœä½ ä¸æ‰¿æ‹…é£é™©ï¼Œä½ å°±æ°¸è¿œä¸ä¼šèµšé’±ã€‚è¯€çªæ˜¯é‡‡å–èƒ½å¤Ÿå¸¦æ¥æœ€ä½³å›æŠ¥çš„è®¡ç®—é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå®ƒæ‰€è·å¾—çš„æ‰€æœ‰å…³æ³¨ï¼Œä¾›åº”å•†é”å®šå¯¹äºå°‘æ•°äººæ¥è¯´æ˜¯ä¸€ç§å±é™©ã€‚ç›¸åï¼Œæ‚¨æ›´æœ‰å¯èƒ½æ‰¾åˆ°è¿‡åº¦è®¾è®¡çš„è§£å†³æ–¹æ¡ˆæ¥é˜»æ­¢ä¾›åº”å•†é”å®šï¼Œè€Œä¸æ˜¯åˆ›å»ºå…¶ä»–å½¢å¼çš„é”å®šï¼Œæ— è®ºæ˜¯å†…éƒ¨å›¢é˜Ÿè¿˜æ˜¯å…¶ä»–ç§æœ‰äº‘ä¾›åº”å•†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/serverless-vs-containers/61411417ly1fv92qged6ej20y80fijuh_hu_8c29b21aec7635ff.webp 400w,
               /blog/serverless-vs-containers/61411417ly1fv92qged6ej20y80fijuh_hu_95837406178d266b.webp 760w,
               /blog/serverless-vs-containers/61411417ly1fv92qged6ej20y80fijuh_hu_bf0f62ebb27f15f6.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/serverless-vs-containers/61411417ly1fv92qged6ej20y80fijuh_hu_8c29b21aec7635ff.webp&#34;
               width=&#34;760&#34;
               height=&#34;344&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼Œè¿™ä¸æ˜¯æ–°çš„ã€‚å‡ å¹´å‰æˆ‘ä»¬ä¸ ORM è¿›è¡Œäº†åŒæ ·çš„è¾©è®ºã€‚æˆ‘ä»¬åˆ›å»ºäº†æ‰€æœ‰è¿™äº›æŠ½è±¡æ¥é˜²æ­¢ä¾›åº”å•†é”å®šï¼Œé™¤äº†é£é™©ä»æœªå®ç°ä¸ºæˆ‘ä»¬å¤§å¤šæ•°äººçš„é—®é¢˜ã€‚æ‰€å‘ç”Ÿçš„ä¸€åˆ‡éƒ½æ˜¯æˆ‘ä»¬èŠ±è´¹äº†å¤§é‡ç²¾åŠ›å’Œæ—¶é—´ï¼Œå¹¶æ¨è¿Ÿäº†æˆ‘ä»¬çš„äº§å“ä¸Šå¸‚æ—¶é—´ï¼Œå› ä¸ºè¿™äº›äº§å“ä»æœªæˆä¸ºé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æ›´ç³Ÿç³•çš„æ˜¯ï¼ŒORM å¼•å…¥äº†ä»–ä»¬è‡ªå·±çš„é—®é¢˜å’Œå¤æ‚æ€§ï¼Œå¹¶æŒç»­é˜»ç¢äº†å‘å±•ã€‚å®ƒæˆä¸ºå¼€å‘å›¢é˜Ÿçš„ä¸€é¡¹ç¨æ”¶ï¼Œå¹¶åœ¨å¯é¢„è§çš„æœªæ¥å‡ç¼“äº†åŠŸèƒ½äº¤ä»˜ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé‚£äº›å¿…é¡»è¿›è¡Œæ•°æ®åº“è¿ç§»çš„äººæ¥è¯´ï¼ŒORM å¹¶æ²¡æœ‰è®©äº‹æƒ…å˜å¾—æ›´å¥½ã€‚é™¤äº†å…¶ä»–ä¸€åˆ‡ä¹‹å¤–ï¼Œè¿™åªæ˜¯ä½ å¿…é¡»å¤„ç†çš„å¦ä¸€ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;çœ‹åˆ°å†å²é‡æ¼”ï¼Œè¿™æ¬¡ï¼Œç”šè‡³æ›´é«˜çš„å±‚æ¬¡å¯èƒ½ä¼šå½±å“æ•´ä¸ªç»„ç»‡ï¼Œè¿™æ˜¯ç—›è‹¦çš„ï¼&lt;/p&gt;
&lt;p&gt;å…¬å¸å‘ç° Serverless å›¢é˜Ÿçš„å·¥ä½œé‡è¶Šæ¥è¶Šå¤šï¼Œå·¥ç¨‹å¸ˆä¹Ÿè¶Šæ¥è¶Šå¤šã€‚æ‰€ä»¥ï¼Œå°±åƒä¸€ä¸ªæ˜æ™ºçš„æŠ•èµ„è€…ä¸€æ ·ï¼Œæˆ‘ä»¬åº”è¯¥é—®çš„é—®é¢˜æ˜¯ï¼šâ€œé‡è¦çš„ç”Ÿäº§åŠ›å›æŠ¥æ˜¯å¦å€¼å¾—é”å®šé£é™©ï¼Œå®ç°é—®é¢˜çš„å¯èƒ½æ€§å¾ˆå°ï¼Ÿâ€&lt;/p&gt;
&lt;h2 id=&#34;æœªæ¥æ˜¯-serverless-è¿˜æ˜¯å®¹å™¨&#34;&gt;æœªæ¥æ˜¯ Serverless è¿˜æ˜¯å®¹å™¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Serverless ä¸ºæ‚¨æä¾›äº†å¤§é‡çš„ç”Ÿäº§åŠ›æå‡ï¼Œä½†å´ä»¥æ§åˆ¶åŸºç¡€æ¶æ„ä¸ºä»£ä»·ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬çš„è®¸å¤šå·¥ä½œæµç¨‹ - ç½‘ç»œ APIï¼Œæµå¤„ç†ï¼Œcron ä½œä¸šç­‰ - å®é™…ä¸Šæˆ‘ä»¬ä¸éœ€è¦è¿™äº›æ‰€æœ‰çš„æ§åˆ¶ï¼Œæˆ‘ä»¬åº”è¯¥ç¥ç¦ä¸ºæˆ‘ä»¬å¤„ç†ç®¡é“çš„äººã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ€»ä¼šå‡ºç°è¿™æ ·çš„æƒ…å†µï¼šæˆ‘ä»¬éœ€è¦ä¿æŒå¯¹åŸºç¡€æ¶æ„çš„æ§åˆ¶ï¼Œä»¥ä¾¿ä¼˜åŒ–æ€§èƒ½ï¼Œæˆæœ¬æˆ–æ›´é«˜çš„å¯ç”¨æ€§ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬çš„å·¥ä½œé‡å¯èƒ½ä¸åˆ©äº Serverless çš„å½“å‰é™åˆ¶ï¼Œä¾‹å¦‚æœ€é•¿æ‰§è¡Œæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸º Serverless å’Œå®¹å™¨åº”è¯¥æ··åˆä½¿ç”¨ï¼Œè€Œä¸æ˜¯é€‰æ‹©å…¶ä¸­ä¸€ä¸ªã€‚å®é™…ä¸Šï¼Œè®¸å¤šå…¬å¸éƒ½æˆåŠŸçš„é‡‡ç”¨äº†æ··åˆæ–¹æ³•ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯¹ Serverless æ»¡è¶³å…¶éœ€æ±‚çš„å·¥ä½œè´Ÿè½½ä½¿ç”¨ Serverless&lt;/li&gt;
&lt;li&gt;ä¾‹å¦‚ï¼Œå¯¹äºä»¥ä¸‹å·¥ä½œè´Ÿè½½ï¼Œè¯·ä½¿ç”¨å®¹å™¨;
&lt;ul&gt;
&lt;li&gt;é•¿æœŸè¿è¡Œ&lt;/li&gt;
&lt;li&gt;éœ€è¦å¯é¢„æµ‹çš„æ€§èƒ½&lt;/li&gt;
&lt;li&gt;éœ€è¦æ¯” Serverless æ›´å®¹æ˜“å®ç°çš„å¼¹æ€§&lt;/li&gt;
&lt;li&gt;ä¸æ–­åœ°ä»¥å¤§è§„æ¨¡è¿è¡Œï¼Œå¹¶ä¸”æŒ‰æ¬¡ä»˜è´¹å®šä»·æ¨¡å‹å˜å¾—è¿‡äºæ˜‚è´µ&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¹Ÿæ˜¯ Netflix å‰äº‘æ¶æ„å¸ˆå…¼ç°ä»» AWS äº‘è®¡ç®—å‰¯æ€»è£ Adrian Cockcroft çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/serverless-vs-containers/61411417ly1fv92qojnw5j20yc0ue15k_hu_bfd2562ab0a234d8.webp 400w,
               /blog/serverless-vs-containers/61411417ly1fv92qojnw5j20yc0ue15k_hu_1392436aaed89764.webp 760w,
               /blog/serverless-vs-containers/61411417ly1fv92qojnw5j20yc0ue15k_hu_e36a64262c198179.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/serverless-vs-containers/61411417ly1fv92qojnw5j20yc0ue15k_hu_bfd2562ab0a234d8.webp&#34;
               width=&#34;760&#34;
               height=&#34;673&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ç›¸ä¿¡æˆ‘ä»¬æœ€ç»ˆä¼šçœ‹åˆ°è¿™ä¸¤ç§èŒƒå¼çš„è¶‹åŒã€‚å®¹å™¨æŠ€æœ¯æœ€ç»ˆå°†æˆä¸º Serverless - æƒ³æƒ³ Fargateï¼ŒåŠ ä¸Šæ¯æ¬¡è°ƒç”¨å®šä»·æ¨¡å‹å’Œæ¯«ç§’è®¡è´¹ã€‚åŒæ—¶ï¼ŒServerless å¹³å°å°†å¼€æ”¾å¹¶å…è®¸æ‚¨æºå¸¦è‡ªå·±çš„å®¹å™¨ã€‚é«˜çº§ç”¨æˆ·å¯ä»¥é€šè¿‡æä¾›ç¬¦åˆ API çš„å­ç»„ä»¶è¿›è¡Œæ—¥å¿—è®°å½•ç­‰æ¥ä¿ç•™å¯¹å…¶åŸºç¡€æ¶æ„çš„ä¸€äº›æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;éšç€å®¹å™¨å’Œ Serverless ä¹‹é—´çš„ç•Œé™è¢«æ‰“ç ´ï¼Œæˆ‘ä»¬ç»ˆäºå¯ä»¥åºŸé™¤æ´¾ç³»å¹¶åœæ­¢è°ˆè®ºåº•å±‚æŠ€æœ¯ã€‚æˆ‘æƒ³è°ˆçš„æ˜¯å¦‚ä½•æ„å»ºå®¢æˆ·æƒ³è¦ä½¿ç”¨çš„äº§å“ï¼Œä»¥åŠå¦‚ä½•æ›´å¿«åœ°æ„å»ºå®ƒä»¬ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å Kubernetes æ—¶ä»£çš„å¾®æœåŠ¡</title>
      <link>https://cloudnativecn.com/blog/microservices-post-kubernetes/</link>
      <pubDate>Fri, 07 Sep 2018 12:27:58 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/microservices-post-kubernetes/</guid>
      <description>&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/microservices-post-kubernetes/006tNbRwgy1fuxayjq7oej30n30ammzp_hu_ad51960563b70cd9.webp 400w,
               /blog/microservices-post-kubernetes/006tNbRwgy1fuxayjq7oej30n30ammzp_hu_97ca7e954101ea6c.webp 760w,
               /blog/microservices-post-kubernetes/006tNbRwgy1fuxayjq7oej30n30ammzp_hu_67462633f79ed05f.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/microservices-post-kubernetes/006tNbRwgy1fuxayjq7oej30n30ammzp_hu_ad51960563b70cd9.webp&#34;
               width=&#34;760&#34;
               height=&#34;349&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;å…³é”®è¦ç‚¹&#34;&gt;å…³é”®è¦ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å¾®æœåŠ¡æ¶æ„ä»ç„¶æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæœ€æµè¡Œçš„æ¶æ„é£æ ¼ã€‚ä½† Kubernetes å’Œäº‘åŸç”Ÿè¿åŠ¨å·²ç»åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šé‡æ–°å®šä¹‰äº†åº”ç”¨ç¨‹åºçš„è®¾è®¡å’Œå¼€å‘ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨äº‘åŸç”Ÿå¹³å°ä¸Šï¼ŒæœåŠ¡çš„å¯è§‚å¯Ÿæ€§æ˜¯ä¸å¤Ÿçš„ã€‚æ›´åŸºæœ¬çš„å…ˆå†³æ¡ä»¶æ˜¯é€šè¿‡å®æ–½å¥åº·æ£€æŸ¥ï¼Œå¯¹ä¿¡å·åšå‡ºååº”ï¼Œå£°æ˜èµ„æºæ¶ˆè€—ç­‰ï¼Œä½¿å¾®æœåŠ¡è‡ªåŠ¨åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨å Kubernetes æ—¶ä»£ï¼ŒæœåŠ¡ç½‘æ ¼æŠ€æœ¯å°†å®Œå…¨å–ä»£ä½¿ç”¨åº“æ¥å®ç°æ“ä½œç½‘ç»œé—®é¢˜ï¼ˆä¾‹å¦‚ Hystrix æ–­è·¯å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡ç°åœ¨å¿…é¡»é€šè¿‡ä»å¤šä¸ªç»´åº¦å®ç°å¹‚ç­‰æ€§æ¥è®¾è®¡ç”¨äºâ€œæ¢å¤â€ã€‚&lt;/li&gt;
&lt;li&gt;ç°ä»£å¼€å‘äººå‘˜å¿…é¡»ç²¾é€šç¼–ç¨‹è¯­è¨€ä»¥å®ç°ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”åŒæ ·ç²¾é€šäº‘åŸç”ŸæŠ€æœ¯ä»¥æ»¡è¶³éåŠŸèƒ½æ€§åŸºç¡€æ¶æ„çº§åˆ«è¦æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¾®æœåŠ¡ç‚’ä½œå¼€å§‹äºä¸€å †å…³äºç»„ç»‡ç»“æ„ã€å›¢é˜Ÿè§„æ¨¡ã€æœåŠ¡è§„æ¨¡ã€é‡å†™å’ŒæŠ›å‡ºæœåŠ¡è€Œä¸æ˜¯ä¿®å¤ã€é¿å…å•å…ƒæµ‹è¯•ç­‰çš„æç«¯æƒ³æ³•ã€‚æ ¹æ®æˆ‘çš„ç»éªŒï¼Œå¤§å¤šæ•°è¿™äº›æƒ³æ³•è¢«è¯æ˜æ˜¯é”™è¯¯çš„ï¼Œä¸å®ç”¨çš„æˆ–è€…è‡³å°‘ä¸é€šç”¨ã€‚å¦‚ä»Šï¼Œå¤§å¤šæ•°å‰©ä½™çš„åŸåˆ™å’Œå®è·µéƒ½æ˜¯å¦‚æ­¤é€šç”¨å’Œæ¾æ•£åœ°å®šä¹‰ï¼Œä»¥è‡³äºå®ƒä»¬å¯èƒ½åœ¨æœªæ¥è®¸å¤šå¹´å†…éƒ½ä¼šæˆç«‹ï¼Œè€Œåœ¨å®è·µä¸­å´æ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ Kubernetes è¯ç”Ÿçš„å‰å‡ å¹´å¾®æœåŠ¡è¿˜æ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿæœ€æµè¡Œçš„æ¶æ„é£æ ¼ã€‚ä½† Kubernetes å’Œäº‘åŸç”Ÿè¿åŠ¨å·²ç»æ”¹å˜äº†åº”ç”¨ç¨‹åºè®¾è®¡å’Œå¼€å‘çš„æ–¹æ–¹é¢é¢ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘è¦è´¨ç–‘å¾®æœåŠ¡çš„ä¸€äº›ç†å¿µï¼ŒæŒ‡æ˜å®ƒä»¬åœ¨å Kubernetes æ—¶ä»£ä¸ä¼šå†åƒä»¥å‰é‚£æ ·å¼ºå¤§ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;ä¸ä»…å¯è§‚å¯Ÿè€Œä¸”è¿˜æœ‰è‡ªåŠ¨åŒ–æœåŠ¡&#34;&gt;ä¸ä»…å¯è§‚å¯Ÿï¼Œè€Œä¸”è¿˜æœ‰è‡ªåŠ¨åŒ–æœåŠ¡&lt;/h2&gt;
&lt;p&gt;å¯è§‚å¯Ÿæ€§ä»ä¸€å¼€å§‹å°±æ˜¯å¾®æœåŠ¡çš„åŸºæœ¬åŸåˆ™ã€‚è™½ç„¶å¯¹äºä¸€èˆ¬çš„åˆ†å¸ƒå¼ç³»ç»Ÿæ¥è¯´å®ƒæ˜¯æ­£ç¡®çš„ï¼Œä½†ä»Šå¤©ï¼ˆç‰¹åˆ«æ˜¯åœ¨ Kubernetes ä¸Šï¼‰ï¼Œå®ƒçš„å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯å¹³å°çº§åˆ«çš„å¼€ç®±å³ç”¨ï¼ˆä¾‹å¦‚è¿›ç¨‹è¿è¡ŒçŠ¶å†µæ£€æŸ¥ã€CPU å’Œå†…å­˜æ¶ˆè€—ï¼‰ã€‚æœ€ä½è¦æ±‚æ˜¯åº”ç”¨ç¨‹åºä»¥ JSON æ ¼å¼ç™»å½•æ§åˆ¶å°ã€‚ä»é‚£æ—¶èµ·ï¼Œå¹³å°å¯ä»¥è·Ÿè¸ªèµ„æºæ¶ˆè€—ã€è¯·æ±‚è·Ÿè¸ªã€æ”¶é›†æ‰€æœ‰ç±»å‹çš„æŒ‡æ ‡ã€é”™è¯¯ç‡ç­‰ï¼Œè€Œæ— éœ€å¤ªå¤šçš„æœåŠ¡çº§åˆ«å¼€å‘å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨äº‘åŸç”Ÿå¹³å°ä¸Šï¼Œå¯è§‚å¯Ÿæ€§æ˜¯ä¸å¤Ÿçš„ã€‚æ›´åŸºæœ¬çš„å…ˆå†³æ¡ä»¶æ˜¯é€šè¿‡å®æ–½å¥åº·æ£€æŸ¥ï¼Œå¯¹ä¿¡å·åšå‡ºååº”ï¼Œå£°æ˜èµ„æºæ¶ˆè€—ç­‰ä½¿å¾®æœåŠ¡&lt;a href=&#34;https://www.redhat.com/en/resources/cloud-native-container-design-whitepaper&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªåŠ¨åŒ–&lt;/a&gt; ã€‚å¯ä»¥å°†å‡ ä¹ä»»ä½•åº”ç”¨ç¨‹åºæ”¾å…¥å®¹å™¨ä¸­è¿è¡Œã€‚ä½†æ˜¯è¦åˆ›å»ºä¸€ä¸ªå®¹å™¨åŒ–çš„åº”ç”¨ç¨‹åºï¼Œå¯ä»¥é€šè¿‡äº‘åŸç”Ÿå¹³å°è‡ªåŠ¨åŒ–å’Œåè°ƒç¼–æ’ï¼Œéœ€è¦éµå¾ªä¸€å®šçš„è§„åˆ™ã€‚éµå¾ªè¿™äº› &lt;a href=&#34;https://leanpub.com/k8spatterns/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸåˆ™å’Œæ¨¡å¼&lt;/a&gt; ï¼Œå°†ç¡®ä¿ç”Ÿæˆçš„å®¹å™¨åœ¨å¤§å¤šæ•°å®¹å™¨ç¼–æ’å¼•æ“ä¸­è¡¨ç°å¾—åƒä¸€ä¸ªä¼˜ç§€çš„äº‘åŸç”Ÿå…¬æ°‘ï¼Œå…è®¸ä»¥è‡ªåŠ¨æ–¹å¼å¯¹å®ƒä»¬è¿›è¡Œè°ƒåº¦ã€æ‰©å±•å’Œç›‘æ§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¸Œæœ›å¹³å°ä¸å¿…è§‚å¯ŸæœåŠ¡ä¸­å‘ç”Ÿçš„æƒ…å†µï¼Œè€Œæ˜¯å¸Œæœ›å¹³å°æ£€æµ‹å¼‚å¸¸æƒ…å†µå¹¶æŒ‰ç…§å£°æ˜è¿›è¡Œåè°ƒã€‚æ— è®ºæ˜¯é€šè¿‡åœæ­¢å°†æµé‡å¯¼å‘æœåŠ¡å®ä¾‹ã€é‡å¯ã€å‘ä¸Šå’Œå‘ä¸‹æ‰©å±•ï¼Œè¿˜æ˜¯å°†æœåŠ¡è¿ç§»åˆ°å¦ä¸€ä¸ªå¥åº·ä¸»æœºï¼Œé‡è¯•å¤±è´¥çš„è¯·æ±‚æˆ–å…¶ä»–ï¼Œè¿™éƒ½æ— å…³ç´§è¦ã€‚å¦‚æœæœåŠ¡æ˜¯è‡ªåŠ¨åŒ–çš„ï¼Œåˆ™æ‰€æœ‰çº æ­£æªæ–½éƒ½ä¼šè‡ªåŠ¨å‘ç”Ÿï¼Œæˆ‘ä»¬åªéœ€è¦æè¿°æ‰€éœ€çš„çŠ¶æ€ï¼Œè€Œä¸æ˜¯è§‚å¯Ÿå’Œååº”ã€‚æœåŠ¡åº”è¯¥æ˜¯å¯è§‚å¯Ÿçš„ï¼Œä½†ä¹Ÿå¯ä»¥åœ¨æ²¡æœ‰äººä¸ºå¹²é¢„çš„æƒ…å†µä¸‹é€šè¿‡å¹³å°è‡ªåŠ¨è¿›è¡Œæ•´æ”¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ™ºèƒ½å¹³å°å’Œæ™ºèƒ½æœåŠ¡ä½†æœ‰æ­£ç¡®çš„è´£ä»»&#34;&gt;æ™ºèƒ½å¹³å°å’Œæ™ºèƒ½æœåŠ¡ï¼Œä½†æœ‰æ­£ç¡®çš„è´£ä»»&lt;/h2&gt;
&lt;p&gt;åœ¨ä» SOA è½¬å‘å¾®æœåŠ¡ä¸–ç•Œçš„è¿‡ç¨‹ä¸­ï¼Œ &lt;a href=&#34;https://martinfowler.com/articles/microservices.html#SmartEndpointsAndDumbPipes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;â€œæ™ºèƒ½ç«¯ç‚¹å’Œå“‘ç®¡â€&lt;/a&gt;çš„æ¦‚å¿µæ˜¯æœåŠ¡äº¤äº’çš„å¦ä¸€ä¸ªæ ¹æœ¬è½¬å˜ã€‚åœ¨å¾®æœåŠ¡é¢†åŸŸï¼ŒæœåŠ¡ä¸ä¾èµ–äºé›†ä¸­å¼æ™ºèƒ½è·¯ç”±å±‚çš„å­˜åœ¨ï¼Œè€Œæ˜¯ä¾èµ–äºæ‹¥æœ‰æŸäº›å¹³å°çº§åŠŸèƒ½çš„æ™ºèƒ½ç«¯ç‚¹ã€‚è¿™æ˜¯é€šè¿‡åœ¨æ¯ä¸ªå¾®æœåŠ¡ä¸­åµŒå…¥ä¼ ç»Ÿ ESB çš„ä¸€äº›åŠŸèƒ½å¹¶è½¬æ¢åˆ°æ²¡æœ‰ä¸šåŠ¡é€»è¾‘å…ƒç´ çš„è½»é‡çº§åè®®æ¥å®ç°çš„ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶è¿™ä»ç„¶æ˜¯åœ¨ä¸å¯é çš„ç½‘ç»œå±‚ï¼ˆä½¿ç”¨ &lt;a href=&#34;https://github.com/Netflix/Hystrix&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Hystrix&lt;/a&gt; ç­‰åº“ï¼‰å®ç°æœåŠ¡äº¤äº’çš„æµè¡Œæ–¹å¼ï¼Œä½†ç°åœ¨ï¼Œåœ¨å Kubernetes æ—¶ä»£ï¼Œå®ƒå·²ç»å®Œå…¨è¢«&lt;a href=&#34;https://www.cncf.io/blog/2017/04/26/service-mesh-critical-component-cloud-native-stack/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœåŠ¡ç½‘æ ¼&lt;/a&gt;æŠ€æœ¯æ‰€å–ä»£ã€‚æœ‰è¶£çš„æ˜¯ï¼ŒæœåŠ¡ç½‘æ ¼ç”šè‡³æ¯”ä¼ ç»Ÿçš„ ESB æ›´æ™ºèƒ½ã€‚ç½‘æ ¼å¯ä»¥æ‰§è¡ŒåŠ¨æ€è·¯ç”±ã€æœåŠ¡å‘ç°ã€åŸºäºå»¶è¿Ÿçš„è´Ÿè½½å¹³è¡¡ã€å“åº”ç±»å‹ã€æŒ‡æ ‡å’Œåˆ†å¸ƒå¼è·Ÿè¸ªã€é‡è¯•ã€è¶…æ—¶ï¼Œä½ èƒ½æƒ³åˆ°çš„è¿™é‡Œéƒ½æœ‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ ESB çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œä¸æœåŠ¡ç½‘æ ¼ä¸åŒçš„æ˜¯ï¼Œåªæœ‰ä¸€ä¸ªé›†ä¸­è·¯ç”±å±‚ï¼Œæ¯ä¸ªå¾®æœåŠ¡é€šå¸¸éƒ½æœ‰è‡ªå·±çš„è·¯ç”±å™¨â€”â€” ä¸€ä¸ªå¸¦æœ‰é™„åŠ ä¸­å¤®ç®¡ç†å±‚çš„ä»£ç†é€»è¾‘çš„ sidecar å®¹å™¨ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œç®¡é“ï¼ˆå¹³å°å’ŒæœåŠ¡ç½‘æ ¼ï¼‰æ²¡æœ‰ä»»ä½•ä¸šåŠ¡é€»è¾‘ï¼›å®ƒä»¬å®Œå…¨ä¸“æ³¨äºåŸºç¡€æ¶æ„æ–¹é¢ï¼Œä½¿æœåŠ¡ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚å¦‚å›¾æ‰€ç¤ºï¼Œè¿™ä»£è¡¨äº† ESB å’Œå¾®æœåŠ¡å­¦ä¹ çš„æ¼”å˜ï¼Œä»¥é€‚åº”äº‘ç¯å¢ƒçš„åŠ¨æ€å’Œä¸å¯é ç‰¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6pf4fyj30gn057gnd_hu_9a805b588507b909.webp 400w,
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6pf4fyj30gn057gnd_hu_84792754236807eb.webp 760w,
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6pf4fyj30gn057gnd_hu_3329f0504b38d455.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/microservices-post-kubernetes/006tSBxtly1fuwq6pf4fyj30gn057gnd_hu_9a805b588507b909.webp&#34;
               width=&#34;599&#34;
               height=&#34;187&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;SOA vs MSA ä¸ CNA&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æœåŠ¡çš„å…¶ä»–æ–¹é¢ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°äº‘åŸç”Ÿä¸ä»…å½±å“ç«¯ç‚¹å’ŒæœåŠ¡äº¤äº’ã€‚Kubernetes å¹³å°ï¼ˆåŒ…å«æ‰€æœ‰å…¶ä»–æŠ€æœ¯ï¼‰è¿˜è´Ÿè´£èµ„æºç®¡ç†ã€è°ƒåº¦ã€éƒ¨ç½²ã€é…ç½®ç®¡ç†ã€æ‰©å±•ã€æœåŠ¡äº¤äº’ç­‰ã€‚è€Œä¸æ˜¯å†æ¬¡å°†å…¶ç§°ä¸ºâ€œæ™ºèƒ½ä»£ç†å’Œå“‘ç®¡â€ï¼Œæˆ‘è®¤ä¸ºå®ƒæ›´å¥½åœ°æè¿°ä½œä¸ºä¸€ä¸ªå…·æœ‰æ­£ç¡®èŒè´£çš„æ™ºèƒ½å¹³å°å’Œæ™ºèƒ½æœåŠ¡ã€‚è¿™ä¸ä»…ä»…æ˜¯å…³äºç«¯ç‚¹ï¼›å®ƒæ˜¯ä¸€ä¸ªå®Œæ•´çš„å¹³å°ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–ä¸šåŠ¡åŠŸèƒ½æœåŠ¡çš„æ‰€æœ‰åŸºç¡€æ¶æ„æ–¹é¢ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸è¦é¢å‘å¤±è´¥è€Œè®¾è®¡è¦é¢å‘æ¢å¤è®¾è®¡&#34;&gt;ä¸è¦é¢å‘å¤±è´¥è€Œè®¾è®¡ï¼Œè¦é¢å‘æ¢å¤è®¾è®¡&lt;/h2&gt;
&lt;p&gt;åœ¨åŸºç¡€æ¶æ„å’Œç½‘ç»œæœ¬èº«ä¸å¯é çš„äº‘åŸç”Ÿç¯å¢ƒä¸­è¿è¡Œçš„å¾®æœåŠ¡å¿…é¡»é’ˆå¯¹æ•…éšœè¿›è¡Œè®¾è®¡ã€‚è¿™æ¯«æ— ç–‘é—®ã€‚ä½†æ˜¯å¹³å°æ£€æµ‹åˆ°å¹¶å¤„ç†äº†è¶Šæ¥è¶Šå¤šçš„æ•…éšœï¼Œå¹¶ä¸”ä»å¾®æœåŠ¡ä¸­æ•è·æ•…éšœçš„é‡è¾ƒå°‘ã€‚ç›¸åï¼Œè€ƒè™‘é€šè¿‡ä»å¤šä¸ªç»´åº¦å®ç°å¹‚ç­‰æ€§æ¥è®¾è®¡æ‚¨çš„æ¢å¤æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;å®¹å™¨æŠ€æœ¯ã€å®¹å™¨ç¼–æ’å™¨å’ŒæœåŠ¡ç½‘ç»œå¯ä»¥æ£€æµ‹å¹¶ä»è®¸å¤šæ•…éšœä¸­æ¢å¤ï¼šæ— é™å¾ªç¯â€”â€”CPU åˆ†é…ã€å†…å­˜æ³„æ¼å’Œ OOMâ€”â€”è¿è¡ŒçŠ¶å†µæ£€æŸ¥ã€ç£ç›˜å ç”¨â€”â€”é…é¢ã€fork ç‚¸å¼¹â€”â€”è¿›ç¨‹é™åˆ¶ã€æ‰¹é‡å¤„ç†å’Œè¿›ç¨‹éš”ç¦»â€”â€”å†…å­˜é™åˆ¶ã€å»¶è¿Ÿå’ŒåŸºäºå“åº”çš„æœåŠ¡å‘ç°ã€é‡è¯•ã€è¶…æ—¶ã€è‡ªåŠ¨æ‰©å±•ç­‰ç­‰ã€‚æ›´ä¸ç”¨è¯´ï¼Œè¿‡æ¸¡åˆ°æ— æœåŠ¡å™¨æ¨¡å‹ï¼ŒæœåŠ¡åªéœ€è¦åœ¨å‡ æ¯«ç§’å†…å¤„ç†ä¸€ä¸ªè¯·æ±‚ï¼Œè€Œåƒåœ¾æ”¶é›†ã€çº¿ç¨‹æ± ã€èµ„æºæ³„æ¼ä¹Ÿè¶Šæ¥è¶Šä¸éœ€è¦å…³å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡å¹³å°å¤„ç†æ‰€æœ‰è¿™äº›ä»¥åŠæ›´å¤šå†…å®¹ï¼Œå°†æ‚¨çš„æœåŠ¡è§†ä¸ºä¸€ä¸ªå¯†å°çš„é»‘ç›’å­ï¼Œå®ƒå°†å¤šæ¬¡å¯åŠ¨å’Œåœæ­¢ï¼Œä½¿æœåŠ¡èƒ½å¤Ÿé‡æ–°å¯åŠ¨ã€‚æ‚¨çš„æœåŠ¡å°†æŒ‰æ¯”ä¾‹æ”¾å¤§å’Œç¼©å°å€æ•°ï¼Œé€šè¿‡ä½¿å…¶æ— çŠ¶æ€ï¼Œä½¿å…¶å¯ä»¥å®‰å…¨åœ°è¿›è¡Œæ‰©å±•ã€‚å‡è®¾è®¸å¤šä¼ å…¥è¯·æ±‚æœ€ç»ˆä¼šè¶…æ—¶ï¼Œä½¿ç«¯ç‚¹å…·æœ‰å¹‚ç­‰æ€§ã€‚å‡è®¾è®¸å¤šä¼ å‡ºè¯·æ±‚å°†æš‚æ—¶å¤±è´¥ï¼Œå¹³å°å°†ä¸ºæ‚¨é‡è¯•å®ƒä»¬ï¼Œç¡®ä¿æ‚¨ä½¿ç”¨å¹‚ç­‰æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†é€‚åˆäº‘åŸç”Ÿç¯å¢ƒä¸­çš„è‡ªåŠ¨åŒ–ï¼ŒæœåŠ¡å¿…é¡»æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¹‚ç­‰é‡å¯ï¼ˆæœåŠ¡å¯ä»¥è¢«æ€æ­»å¹¶å¤šæ¬¡å¯åŠ¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¹‚ç­‰æ‰©å±•/ç¼©å°ï¼ˆæœåŠ¡å¯ä»¥è‡ªåŠ¨æ‰©å±•åˆ°å¤šä¸ªå®ä¾‹ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¹‚ç­‰æœåŠ¡ç”Ÿäº§è€…ï¼ˆå…¶ä»–æœåŠ¡å¯èƒ½ä¼šé‡è¯•è°ƒç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¹‚ç­‰æœåŠ¡ä½¿ç”¨è€…ï¼ˆæœåŠ¡æˆ–ç½‘çŠ¶ç½‘å¯ä»¥é‡è¯•ä¼ å‡ºè°ƒç”¨ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ‚¨æ‰§è¡Œä¸Šè¿°æ“ä½œä¸€æ¬¡æˆ–å¤šæ¬¡æ—¶æœåŠ¡çš„è¡Œä¸ºå§‹ç»ˆç›¸åŒï¼Œé‚£ä¹ˆå¹³å°å°†èƒ½å¤Ÿåœ¨æ²¡æœ‰äººä¸ºå¹²é¢„çš„æƒ…å†µä¸‹ä»æ•…éšœä¸­æ¢å¤æ‚¨çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œè¯·è®°ä½ï¼Œå¹³å°æä¾›çš„æ‰€æœ‰æ¢å¤åªæ˜¯æœ¬åœ°ä¼˜åŒ–ã€‚&lt;a href=&#34;http://blog.christianposta.com/microservices/application-safety-and-correctness-cannot-be-offloaded-to-istio-or-any-service-mesh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­£å¦‚ Christian Posta æ‰€è¯´çš„é‚£æ ·&lt;/a&gt; ï¼Œåˆ†å¸ƒå¼ç³»ç»Ÿä¸­çš„åº”ç”¨ç¨‹åºå®‰å…¨æ€§å’Œæ­£ç¡®æ€§ä»ç„¶æ˜¯åº”ç”¨ç¨‹åºçš„è´£ä»»ã€‚æ•´ä¸ªä¸šåŠ¡æµç¨‹èŒƒå›´çš„æ€ç»´æ¨¡å¼ï¼ˆå¯èƒ½è·¨è¶Šå¤šä¸ªæœåŠ¡ï¼‰å¯¹äºè®¾è®¡æ•´ä½“ç¨³å®šçš„ç³»ç»Ÿæ˜¯å¿…è¦çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ··åˆå¼€å‘èŒè´£&#34;&gt;æ··åˆå¼€å‘èŒè´£&lt;/h2&gt;
&lt;p&gt;è¶Šæ¥è¶Šå¤šçš„å¾®æœåŠ¡åŸåˆ™è¢« Kubernetes åŠå…¶è¡¥å……é¡¹ç›®å®æ–½å’Œæä¾›ã€‚å› æ­¤ï¼Œå¼€å‘äººå‘˜å¿…é¡»ç²¾é€šç¼–ç¨‹è¯­è¨€ä»¥å®ç°ä¸šåŠ¡åŠŸèƒ½ï¼Œå¹¶ä¸”åŒæ ·ç²¾é€šäº‘åŸç”ŸæŠ€æœ¯ä»¥æ»¡è¶³éåŠŸèƒ½æ€§åŸºç¡€æ¶æ„çº§åˆ«è¦æ±‚ï¼ŒåŒæ—¶å®Œå…¨å®ç°åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸šåŠ¡éœ€æ±‚å’ŒåŸºç¡€æ¶æ„ï¼ˆæ“ä½œæˆ–è·¨åŠŸèƒ½éœ€æ±‚æˆ–ç³»ç»Ÿè´¨é‡å±æ€§ï¼‰ä¹‹é—´çš„ç•Œé™æ€»æ˜¯æ¨¡ç³Šä¸æ¸…ï¼Œå¹¶ä¸”ä¸å¯èƒ½é‡‡å–ä¸€ä¸ªæ–¹é¢å¹¶æœŸæœ›å…¶ä»–äººåšå¦ä¸€ä¸ªæ–¹é¢ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨æœåŠ¡ç½‘æ ¼å±‚ä¸­å®ç°é‡è¯•é€»è¾‘ï¼Œåˆ™å¿…é¡»ä½¿æœåŠ¡ä¸­çš„ä¸šåŠ¡é€»è¾‘æˆ–æ•°æ®åº“å±‚ä½¿ç”¨çš„æœåŠ¡å…·æœ‰å¹‚ç­‰æ€§ã€‚å¦‚æœåœ¨æœåŠ¡ç½‘æ ¼çº§åˆ«ä½¿ç”¨è¶…æ—¶ï¼Œåˆ™å¿…é¡»åŒæ­¥æœåŠ¡ä¸­çš„æœåŠ¡ä½¿ç”¨è€…è¶…æ—¶ã€‚å¦‚æœå¿…é¡»å®ç°æœåŠ¡çš„é‡å¤æ‰§è¡Œï¼Œåˆ™å¿…é¡»é…ç½® Kubernetes ä½œä¸šæ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å±•æœ›æœªæ¥ï¼Œä¸€äº›æœåŠ¡åŠŸèƒ½å°†ä½œä¸ºä¸šåŠ¡é€»è¾‘åœ¨æœåŠ¡ä¸­å®ç°ï¼Œè€Œå…¶ä»–æœåŠ¡åŠŸèƒ½åˆ™ä½œä¸ºå¹³å°åŠŸèƒ½æä¾›ã€‚è™½ç„¶ä½¿ç”¨æ­£ç¡®çš„å·¥å…·æ¥å®Œæˆæ­£ç¡®çš„ä»»åŠ¡æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„è´£ä»»åˆ†ç¦»ï¼Œä½†æŠ€æœ¯çš„æ¿€å¢æå¤§åœ°å¢åŠ äº†æ•´ä½“çš„å¤æ‚æ€§ã€‚åœ¨ä¸šåŠ¡é€»è¾‘æ–¹é¢å®ç°ç®€å•çš„æœåŠ¡éœ€è¦å¾ˆå¥½åœ°ç†è§£åˆ†å¸ƒå¼æŠ€æœ¯å †æ ˆï¼Œå› ä¸ºè´£ä»»åˆ†æ•£åœ¨æ¯ä¸€å±‚ã€‚&lt;/p&gt;
&lt;p&gt;æ® &lt;a href=&#34;https://kubernetes.io/blog/2016/03/1000-nodes-and-beyond-updates-to-kubernetes-performance-and-scalability-in-12/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯å®&lt;/a&gt; Kubernetes æ˜¯å¯ä»¥æ‰©å±•åˆ°æ•°åƒä¸ªèŠ‚ç‚¹ã€æ•°ä¸‡ä¸ª pod å’Œæ•°ç™¾ä¸‡çš„ TPSã€‚æ‚¨çš„åº”ç”¨ç¨‹åºå¤§å°ã€å¤æ‚æ€§ï¼Œæˆ–è€…è¯´æ˜¯å¼•å…¥â€œäº‘åŸç”Ÿâ€å¤æ‚æ€§çš„å…³é”®æ€§å› ç´ ï¼Œæˆ‘è¿˜ä¸æ¸…æ¥šã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œå¾®æœåŠ¡è¿åŠ¨å¦‚ä½•ä¸ºé‡‡ç”¨ Docker å’Œ Kubernetes ç­‰å®¹å™¨æŠ€æœ¯æä¾›äº†å¦‚æ­¤å¤§çš„åŠ¨åŠ›ã€‚è™½ç„¶æœ€åˆæ˜¯æ¨åŠ¨è¿™äº›æŠ€æœ¯å‘å±•çš„å¾®æœåŠ¡å®è·µï¼Œä½†ç°åœ¨ Kubernetes å®šä¹‰äº†å¾®æœåŠ¡æ¶æ„çš„åŸåˆ™å’Œå®è·µã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘çš„ä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è·ç¦»æ¥å—å‡½æ•°æ¨¡å‹ä½œä¸ºæœ‰æ•ˆçš„å¾®æœåŠ¡åŸè¯­å¹¶ä¸è¿œï¼Œè€Œä¸æ˜¯å°†å…¶è§†ä¸ºçº³ç±³æœåŠ¡çš„åæ¨¡å¼ã€‚æˆ‘ä»¬å¹¶æ²¡æœ‰å……åˆ†çš„ç†ç”±è´¨ç–‘äº‘åŸç”ŸæŠ€æœ¯å¯¹äºä¸­å°å‹æ¡ˆä¾‹çš„å®ç”¨æ€§å’Œé€‚ç”¨æ€§ï¼Œè€Œæ˜¯å› ä¸ºå…´å¥‹è€Œæœ‰äº›ä¸ç»æ„åœ°è·³äº†èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes æ‹¥æœ‰ ESB å’Œå¾®æœåŠ¡çš„è®¸å¤šçŸ¥è¯†ï¼Œå› æ­¤ï¼Œå®ƒæ˜¯æœ€ç»ˆçš„åˆ†å¸ƒå¼ç³»ç»Ÿå¹³å°ã€‚å®ƒæ˜¯æ¶æ„é£æ ¼çš„æŠ€æœ¯ï¼Œè€Œä¸æ˜¯ç›¸åçš„æ–¹å¼ã€‚æ— è®ºå¥½åï¼Œæ—¶é—´ä¼šè¯æ˜ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºä½œè€…&#34;&gt;å…³äºä½œè€…&lt;/h2&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_b3c5fefec0a79a17.webp 400w,
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_93005e34324f9bbc.webp 760w,
               /blog/microservices-post-kubernetes/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_4a30dfe67c49ae47.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/microservices-post-kubernetes/006tSBxtly1fuwq6p5tm2j302d02sq2y_hu_b3c5fefec0a79a17.webp&#34;
               width=&#34;85&#34;
               height=&#34;100&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bilgin Ibryam&lt;/strong&gt;  ï¼ˆ@bibryamï¼‰æ˜¯ Red Hat çš„é¦–å¸­æ¶æ„å¸ˆï¼Œæäº¤è€…å’Œ ASF æˆå‘˜ã€‚ä»–æ˜¯ä¸€åå¼€æºä¼ æ’­è€…ï¼Œåšå®¢ä½œè€…ï¼Œã€ŠCamel Design Patternsã€‹å’Œã€ŠKubernetes Patternsã€‹ä¹¦ç±çš„ä½œè€…ã€‚åœ¨ä»–çš„æ—¥å¸¸å·¥ä½œä¸­ï¼ŒBilgin å–œæ¬¢æŒ‡å¯¼ç¼–ç å’Œé¢†å¯¼å¼€å‘äººå‘˜æˆåŠŸæ„å»ºäº‘åŸç”Ÿè§£å†³æ–¹æ¡ˆã€‚ä»–ç›®å‰çš„å·¥ä½œé‡ç‚¹æ˜¯åº”ç”¨ç¨‹åºé›†æˆã€åˆ†å¸ƒå¼ç³»ç»Ÿã€æ¶ˆæ¯ä¼ é€’ã€å¾®æœåŠ¡ã€devops å’Œä¸€èˆ¬çš„äº‘åŸç”ŸæŒ‘æˆ˜ã€‚ä½ å¯ä»¥åœ¨  &lt;a href=&#34;https://twitter.com/bibryam&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Twitter&lt;/a&gt;ã€&lt;a href=&#34;https://uk.linkedin.com/in/bibryam&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkedin&lt;/a&gt;  æˆ–ä»–çš„  &lt;a href=&#34;http://www.ofbizian.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åšå®¢&lt;/a&gt; ä¸Šæ‰¾åˆ°ä»–ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Envoy æœåŠ¡ç½‘æ ¼åœ¨ Lyft çš„å®è·µåŠæœªæ¥è·¯çº¿å›¾</title>
      <link>https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/</link>
      <pubDate>Sun, 02 Sep 2018 13:48:47 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/</guid>
      <description>&lt;p&gt;















&lt;figure  id=&#34;figure-envoy-lyft&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Envoy Lyft&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/006tNbRwgy1fuv5nathu3j318g0ii0uc_hu_28b21a94e666a818.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/006tNbRwgy1fuv5nathu3j318g0ii0uc_hu_292e0824e3435e34.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/006tNbRwgy1fuv5nathu3j318g0ii0uc_hu_d023ad0b6a7ebeac.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/006tNbRwgy1fuv5nathu3j318g0ii0uc_hu_28b21a94e666a818.webp&#34;
               width=&#34;760&#34;
               height=&#34;316&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Envoy Lyft
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://www.infoq.com/articles/envoy-service-mesh-cascading-failure&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³é”®è¦ç‚¹&#34;&gt;å…³é”®è¦ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è¿‡å»çš„å››å¹´ä¸­ï¼ŒLyft å·²ä»å•ä½“æ¶æ„è½¬å˜ä¸ºæ•°ç™¾ä¸ªå¾®æœåŠ¡ã€‚éšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œç”±äºçº§è”æ•…éšœæˆ–æ„å¤–å†…éƒ¨æ‹’ç»æœåŠ¡å¯¼è‡´çš„ä¸­æ–­æ¬¡æ•°ä¹Ÿåœ¨å¢åŠ ã€‚&lt;/li&gt;
&lt;li&gt;ä»Šå¤©ï¼Œè¿™äº›æ•…éšœæƒ…å†µåœ¨ Lyft åŸºç¡€è®¾æ–½ä¸­å·²ç»åŸºæœ¬è§£å†³ã€‚Lyft éƒ¨ç½²çš„æ¯é¡¹æœåŠ¡éƒ½é€šè¿‡ä½¿ç”¨ Envoy ä»£ç†è‡ªåŠ¨è·å¾—ååé‡å’Œå¹¶å‘ä¿æŠ¤ã€‚&lt;/li&gt;
&lt;li&gt;Envoy å¯ä»¥ä½œä¸ºä¸­é—´ä»¶éƒ¨ç½²æˆ–ä»…åœ¨è¯·æ±‚å…¥å£å¤„éƒ¨ç½²ï¼Œä½†æœ€å¤§çš„å¥½å¤„æ¥è‡ªäºåœ¨åº”ç”¨ç¨‹åºæœ¬åœ°çš„å…¥å£å’Œå‡ºå£éƒ¨ç½²å®ƒã€‚åœ¨è¯·æ±‚çš„ä¸¤ç«¯éƒ¨ç½² Envoy å…è®¸å®ƒå……å½“æœåŠ¡å™¨çš„æ™ºèƒ½å®¢æˆ·ç«¯å’Œåå‘ä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆé‡Œï¼ŒLyft å°†ä¸ Netflix çš„å¹¶å‘é™åˆ¶åº“èƒŒåçš„å›¢é˜Ÿåˆä½œï¼Œå°†åŸºäºå…¶åº“çš„ç³»ç»Ÿå¸¦å…¥ Envoy L7 è¿‡æ»¤å™¨ã€‚&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;çº§è”æ•…éšœæ˜¯é«˜ååé‡åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ä¸å¯ç”¨çš„ä¸»è¦åŸå› ä¹‹ä¸€ã€‚åœ¨è¿‡å»çš„å››å¹´ä¸­ï¼ŒLyft å·²ä»å•ä½“æ¶æ„è½¬å˜ä¸ºæ•°ç™¾ç§å¾®æœåŠ¡ã€‚éšç€å¾®æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œç”±äºçº§è”æ•…éšœæˆ–æ„å¤–å†…éƒ¨æ‹’ç»æœåŠ¡å¯¼è‡´çš„ä¸­æ–­æ¬¡æ•°ä¹Ÿåœ¨å¢åŠ ã€‚ä»Šå¤©ï¼Œè¿™äº›æ•…éšœæƒ…å†µåœ¨ Lyft åŸºç¡€è®¾æ–½ä¸­åŸºæœ¬ä¸Šå·²ç»è§£å†³ã€‚Lyft éƒ¨ç½²çš„æ¯é¡¹æœåŠ¡éƒ½ä¼šè‡ªåŠ¨è·å¾—ååé‡å’Œå¹¶å‘ä¿æŠ¤ã€‚é€šè¿‡å¯¹æˆ‘ä»¬æœ€å…³é”®çš„æœåŠ¡è¿›è¡Œä¸€äº›æœ‰é’ˆå¯¹æ€§çš„é…ç½®æ›´æ”¹ï¼ŒåŸºäºè´Ÿè½½çš„äº‹ä»¶å‡å°‘äº† 95ï¼…ï¼Œä»è€Œå½±å“äº†ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬æ£€æŸ¥ç‰¹å®šçš„æ•…éšœæƒ…å†µå’Œç›¸åº”çš„ä¿æŠ¤æœºåˆ¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬é¦–å…ˆäº†è§£å¦‚ä½•åœ¨ Lyft éƒ¨ç½²ç½‘ç»œé˜²å¾¡ã€‚&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; æ˜¯ä¸€ä¸ª &lt;a href=&#34;https://eng.lyft.com/announcing-envoy-c-l7-proxy-and-communication-bus-92520b6c8191&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æºè‡ª Lyft&lt;/a&gt; çš„ä»£ç†ï¼Œåæ¥å¼€æºå¹¶æèµ ç»™ &lt;a href=&#34;https://www.cncf.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cloud Native Computing Foundation&lt;/a&gt; ã€‚Envoy ä¸è®¸å¤šå…¶ä»–è´Ÿè½½å‡è¡¡è§£å†³æ–¹æ¡ˆçš„åŒºåˆ«åœ¨äºå®ƒè¢«è®¾è®¡ä¸ºä»¥â€œç½‘æ ¼â€é…ç½®éƒ¨ç½²ã€‚Envoy å¯ä»¥ä½œä¸ºä¸­é—´ä»¶éƒ¨ç½²æˆ–ä»…åœ¨è¯·æ±‚å…¥å£æ—¶éƒ¨ç½²ï¼Œä½†æœ€å¤§çš„å¥½å¤„æ¥è‡ªäºåœ¨åº”ç”¨ç¨‹åºæœ¬åœ°çš„å…¥å£å’Œå‡ºå£éƒ¨ç½²å®ƒã€‚åœ¨è¯·æ±‚çš„ä¸¤ç«¯éƒ¨ç½² Envoy å…è®¸å®ƒå……å½“æœåŠ¡å™¨çš„æ™ºèƒ½å®¢æˆ·ç«¯å’Œåå‘ä»£ç†ã€‚åœ¨åŒæ–¹ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©é‡‡ç”¨é€Ÿç‡é™åˆ¶å’Œæ–­è·¯æ¥ä¿æŠ¤æœåŠ¡å™¨å…å—å„ç§æƒ…å†µä¸‹çš„è¿‡è½½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ ¸å¿ƒæ¦‚å¿µ&#34;&gt;æ ¸å¿ƒæ¦‚å¿µ&lt;/h2&gt;
&lt;h3 id=&#34;å¹¶å‘å’Œé€Ÿç‡é™åˆ¶&#34;&gt;å¹¶å‘å’Œé€Ÿç‡é™åˆ¶&lt;/h3&gt;
&lt;p&gt;å¹¶å‘å’Œé€Ÿç‡é™åˆ¶æ˜¯ç›¸å…³çš„ï¼Œä½†ä¸åŒçš„æ¦‚å¿µ; åŒä¸€æšç¡¬å¸çš„ä¸¤é¢ã€‚åœ¨è€ƒè™‘é™åˆ¶ç³»ç»Ÿè´Ÿè½½æ—¶ï¼Œè¿ç»´äººå‘˜ä¼ ç»Ÿä¸Šä¼šè€ƒè™‘æ¯ç§’çš„è¯·æ±‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é€Ÿç‡é™åˆ¶å¯ä»¥é™åˆ¶å‘é€åˆ°ç³»ç»Ÿçš„è¯·æ±‚çš„é€Ÿç‡ã€‚é€šå¸¸è¿›è¡Œå‹åŠ›æµ‹è¯•ä»¥ç¡®å®šæœåŠ¡å°†å˜ä¸ºè¿‡è½½çš„è¯·æ±‚ç‡ï¼Œç„¶åå°†é™åˆ¶è®¾ç½®åœ¨ä½äºè¯¥ç‚¹çš„æŸå¤„ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸šåŠ¡é€»è¾‘å†³å®šäº†é€Ÿç‡é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¡¬å¸çš„å¦ä¸€é¢ï¼Œæˆ‘ä»¬æœ‰å¹¶å‘æ€§ï¼Œå³åŒæ—¶ä½¿ç”¨å¤šå°‘ä¸ªå•å…ƒã€‚è¿™äº›å•ä½å¯ä»¥æ˜¯è¯·æ±‚ã€è¿æ¥ç­‰ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘æŸä¸ªæ—¶é—´ç‚¹çš„å¹¶å‘è¯·æ±‚æ•°ï¼Œè€Œä¸æ˜¯è€ƒè™‘è¯·æ±‚ç‡ã€‚å½“æˆ‘ä»¬è€ƒè™‘å¹¶å‘è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨æ’é˜Ÿç†è®ºæ¥ç¡®å®šæœåŠ¡åœ¨é˜Ÿåˆ—å¼€å§‹æ„å»ºä¹‹å‰å¯ä»¥å¤„ç†çš„å¹¶å‘è¯·æ±‚æ•°ã€è¯·æ±‚å»¶è¿Ÿå¢åŠ ä»¥åŠæœåŠ¡å› èµ„æºè€—å°½è€Œå¤±è´¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å…¨å±€ä¸æœ¬åœ°å†³ç­–&#34;&gt;å…¨å±€ä¸æœ¬åœ°å†³ç­–&lt;/h3&gt;
&lt;p&gt;Envoy ä¸­çš„æ–­è·¯å™¨æ˜¯æ ¹æ®æœ¬æœºä¿¡æ¯è®¡ç®—çš„ã€‚æ¯ä¸ª Envoy å®ä¾‹éƒ½ä¼šè·Ÿè¸ªè‡ªå·±çš„ç»Ÿè®¡æ•°æ®å¹¶åˆ¶å®šè‡ªå·±çš„æ–­è·¯å†³ç­–ã€‚ä¸å…¨å±€ç³»ç»Ÿç›¸æ¯”ï¼Œè¯¥æ¨¡å‹å…·æœ‰ä¸€äº›ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªä¼˜åŠ¿æ˜¯å¯ä»¥åœ¨å†…å­˜ä¸­è®¡ç®—é™åˆ¶ï¼Œè€Œæ— éœ€å¯¹ä¸­å¤®ç³»ç»Ÿè¿›è¡Œç½‘ç»œè°ƒç”¨ã€‚ç¬¬äºŒä¸ªæ˜¯é™åˆ¶ä¼šéšç€é›†ç¾¤çš„å¤§å°è€Œæ‰©å±•ã€‚ç¬¬ä¸‰ï¼Œé™åˆ¶è€ƒè™‘äº†æœºå™¨ä¹‹é—´çš„å·®å¼‚ï¼Œæ— è®ºå®ƒä»¬æ˜¯å¦æ”¶åˆ°ä¸åŒçš„æŸ¥è¯¢ç»„åˆæˆ–è€…åœ¨æ€§èƒ½ä¸Šçš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¸¸è§çš„æ•…éšœæƒ…å†µ&#34;&gt;å¸¸è§çš„æ•…éšœæƒ…å†µ&lt;/h3&gt;
&lt;p&gt;åœ¨å¼•å…¥é˜²å¾¡æœºåˆ¶ä¹‹å‰ï¼Œäº†è§£ä¸€äº›å¸¸è§çš„æ•…éšœæ¨¡å¼æ˜¯æœ‰å¸®åŠ©çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;é‡è¯•æ”¾å¤§&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾èµ–å¼€å§‹å¤±è´¥ã€‚å¦‚æœæœåŠ¡æ‰§è¡Œä¸€æ¬¡é‡è¯•æ‰€æœ‰å¯¹è¯¥ä¾èµ–é¡¹çš„è¯·æ±‚ï¼Œåˆ™æ•´ä¸ªè°ƒç”¨é‡å°†åŠ å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;èµ„æºåŒ®ä¹&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªæœåŠ¡éƒ½å—æŸäº›èµ„æºçº¦æŸï¼Œé€šå¸¸æ˜¯ CPUã€ç½‘ç»œæˆ–å†…å­˜ã€‚å¹¶å‘è¯·æ±‚é€šå¸¸ä¸æ¶ˆè€—çš„èµ„æºé‡ç›´æ¥ç›¸å…³ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä»èµ„æºåŒ®ä¹ä¸­æ¢å¤è¿‡æ¥&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å³ä½¿èµ„æºæ¶ˆè€—å¢åŠ çš„åŸå› é™ä½åˆ°æ­£å¸¸æ°´å¹³ï¼ŒæœåŠ¡ä¹Ÿå¯èƒ½å› èµ„æºäº‰ç”¨è€Œæ— æ³•æ¢å¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;åç«¯å‡é€Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä¾èµ–é¡¹ï¼ˆæ•°æ®åº“æˆ–å…¶ä»–æœåŠ¡ï¼‰é€Ÿåº¦å˜æ…¢ï¼Œå¯¼è‡´æœåŠ¡èŠ±è´¹æ›´é•¿æ—¶é—´æ¥å®Œæˆè¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;çˆ†å‘å’Œæ¬ é‡‡æ ·&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿›è¡Œé«˜çº§å®¹é‡è§„åˆ’æˆ–å¼¹æ€§æ‰©å±•æœåŠ¡æ—¶ï¼Œé€šå¸¸çš„åšæ³•æ˜¯è€ƒè™‘æ•´ä¸ªé›†ç¾¤ä¸­æ¶ˆè€—çš„å¹³å‡èµ„æºã€‚ä½†æ˜¯ï¼ŒæœåŠ¡çš„è°ƒç”¨è€…å¯ä»¥é€‰æ‹©åŒæ—¶å‘é€å¤§é‡è¯·æ±‚ã€‚è¿™å¯èƒ½ä¼šæš‚æ—¶ä½¿å•ä¸ªæœåŠ¡å™¨é¥±å’Œã€‚æ”¶é›†æŒ‡æ ‡æ—¶ï¼Œæ¯åˆ†é’Ÿæˆ–æ›´é«˜çš„æ•°æ®å‡ ä¹è‚¯å®šä¼šæ©ç›–è¿™äº›çˆ†å‘ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç°åœ¨-lyft-çš„ä¸€å¤©&#34;&gt;ç°åœ¨ Lyft çš„ä¸€å¤©&lt;/h2&gt;
&lt;h3 id=&#34;æˆ‘ä»¬å¦‚ä½•é™åˆ¶é€Ÿç‡&#34;&gt;æˆ‘ä»¬å¦‚ä½•é™åˆ¶é€Ÿç‡ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/lyft/ratelimit&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;lyft/ratelimit&lt;/a&gt; Â æ˜¯ä¸€ç§å¼€æº Go/gRPC æœåŠ¡ï¼Œæ—¨åœ¨ä¸ºå„ç§åº”ç”¨ç¨‹åºå¯ç”¨é€šç”¨é€Ÿç‡é™åˆ¶æ–¹æ¡ˆã€‚
é€Ÿç‡é™åˆ¶é€‚ç”¨äºåŸŸã€‚åŸŸçš„ç¤ºä¾‹å¯ä»¥æ˜¯æ¯ IP é€Ÿç‡é™åˆ¶ï¼Œæˆ–æ¯ç§’å¯¹æ•°æ®åº“çš„è¿æ¥æ•°ã€‚Ratelimit åœ¨ Lyft æŠ•å…¥ç”Ÿäº§ï¼Œæ¯ç§’å¤„ç†æ•°åä¸‡ä¸ªé€Ÿç‡é™åˆ¶è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨è¾¹ç¼˜ä»£ç†å’Œå†…éƒ¨æœåŠ¡ç½‘æ ¼ä¸­ä½¿ç”¨ Ratelimitã€‚&lt;/p&gt;
&lt;p&gt;å¼€æºæœåŠ¡æ˜¯ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/global_rate_limiting#arch-overview-rate-limit&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy é€Ÿç‡é™åˆ¶ API&lt;/a&gt; çš„å‚è€ƒå®ç°ã€‚Envoy æä¾›ä»¥ä¸‹é›†æˆï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œçº§åˆ«é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&lt;/strong&gt; ï¼šEnvoy å¯ä»¥ä¸ºå®‰è£…è¿‡æ»¤å™¨çš„ä¾¦å¬å™¨ä¸Šçš„æ¯ä¸ªæ–°è¿æ¥è°ƒç”¨é€Ÿç‡é™åˆ¶æœåŠ¡ã€‚é…ç½®æŒ‡å®šç‰¹å®šåŸŸå’Œæè¿°ç¬¦è®¾ç½®ä¸ºé€Ÿç‡é™åˆ¶ã€‚è¿™å…·æœ‰é™åˆ¶æ¯ç§’é€šè¿‡æ”¶å¬è€…çš„è¿æ¥çš„é€Ÿç‡çš„æœ€ç»ˆæ•ˆæœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;HTTP çº§åˆ«é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&lt;/strong&gt; ï¼šEnvoy å¯ä»¥ä¸ºå®‰è£…è¿‡æ»¤å™¨çš„ä¾¦å¬å™¨ä¸Šçš„æ¯ä¸ªæ–°è¯·æ±‚è°ƒç”¨é€Ÿç‡é™åˆ¶æœåŠ¡ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨ Lyftï¼Œæˆ‘ä»¬ä¸»è¦ä½¿ç”¨é€Ÿç‡é™åˆ¶æ¥æŠµå¾¡åŸºç¡€è®¾æ–½è¾¹ç¼˜çš„è´Ÿè½½ã€‚ä¾‹å¦‚ï¼Œæ¯ä¸ªç”¨æˆ· ID å…è®¸çš„è¯·æ±‚ç‡ã€‚è¿™æ ·å¯ä»¥ä¿æŠ¤ Lyft çš„æœåŠ¡ å…å—å¤–éƒ¨å®¢æˆ·ç«¯æ„å¤–æˆ–æ¶æ„è´Ÿè½½é€ æˆçš„ èµ„æºåŒ®ä¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›‘æ§&#34;&gt;ç›‘æ§&lt;/h3&gt;
&lt;p&gt;Lyft çš„ç½‘ç»œå›¢é˜Ÿä¸ºæ‰€æœ‰é…ç½®çš„é€Ÿç‡é™åˆ¶æä¾›æŒ‡æ ‡ã€‚å½“æœåŠ¡æ‰€æœ‰è€…åˆ›å»ºæ–°çš„é€Ÿç‡é™åˆ¶ä»¥åœ¨è¾¹ç¼˜ã€æœåŠ¡ä¹‹é—´æˆ–æ•°æ®åº“ä¸­å¼ºåˆ¶æ‰§è¡Œæ—¶ï¼Œå¯ä»¥ç«‹å³æ”¶é›†ä¸é˜²å¾¡æœºåˆ¶æœ‰å…³çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zvymaj20h4029wf0_hu_de693e27194416c2.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zvymaj20h4029wf0_hu_793f10b78f0aa27.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zvymaj20h4029wf0_hu_55f0346e10435307.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zvymaj20h4029wf0_hu_de693e27194416c2.webp&#34;
               width=&#34;616&#34;
               height=&#34;81&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯ ratelimit æœåŠ¡ä»ªè¡¨æ¿çš„ä¸€ä¸ªç‰‡æ®µï¼Œå…¶ä¸­æ˜¾ç¤ºäº†ä¸‰ä¸ªé¢æ¿ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æ¯åˆ†é’Ÿæ€»å‘½ä¸­æ•°&lt;/strong&gt; ï¼šæ­¤é¢æ¿æ˜¾ç¤ºæ—¶é—´åºåˆ—ï¼Œå…¶ä¸­é…ç½®äº†æ¯ä¸ªé€Ÿç‡é™åˆ¶çš„æ€»å‘½ä¸­æ•°ã€‚åœ¨æ­¤é¢æ¿ä¸­ï¼ŒæœåŠ¡æ‰€æœ‰è€…å¯ä»¥éšæ—¶æŸ¥çœ‹è¶‹åŠ¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯åˆ†é’Ÿè¶…é™&lt;/strong&gt; ï¼šæ­¤é¢æ¿æ˜¾ç¤ºè¶…å‡ºé…ç½®é™åˆ¶çš„æŒ‡æ ‡ã€‚è¯¥é¢æ¿å…è®¸æœåŠ¡æ‰€æœ‰è€…æ‹¥æœ‰å¯é‡åŒ–çš„æ•°æ®ï¼Œç”¨äºè¿”å›å…¶æœåŠ¡å¹¶è¯„ä¼°è°ƒç”¨æ¨¡å¼ï¼Œå¹¶ä¸ºé«˜è´Ÿè½½äº‹ä»¶è¿›è¡Œå®¹é‡è§„åˆ’ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ¯åˆ†é’Ÿæ¥è¿‘é™åˆ¶&lt;/strong&gt; ï¼šæ­¤é¢æ¿æ˜¾ç¤ºæŒ‡æ ‡ä½•æ—¶è¾¾åˆ°é…ç½®é™åˆ¶çš„ 80ï¼…ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æˆ‘ä»¬å¦‚ä½•ç®¡ç†å¹¶å‘&#34;&gt;æˆ‘ä»¬å¦‚ä½•ç®¡ç†å¹¶å‘ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Envoy çš„ä¸»è¦ä¼˜ç‚¹ä¹‹ä¸€æ˜¯å®ƒé€šè¿‡&lt;strong&gt;ç½‘ç»œçº§åˆ«&lt;/strong&gt;çš„æ–­è·¯ç³»ç»Ÿå¼ºåˆ¶æ‰§è¡Œå¹¶å‘é™åˆ¶ï¼Œè€Œä¸å¿…ç‹¬ç«‹åœ°åœ¨æ¯ä¸ªåº”ç”¨ç¨‹åºä¸­é…ç½®å’Œå®ç°è¿™äº›æ¨¡å¼ã€‚Envoy æ”¯æŒå„ç§ç±»å‹çš„å…¨åˆ†å¸ƒå¼æ–­è·¯å™¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;æœ€å¤§è¿æ¥&lt;/strong&gt; æ•°ï¼šEnvoy å°†ä¸ºä¸Šæ¸¸é›†ç¾¤ä¸­çš„æ‰€æœ‰ä¸»æœºå»ºç«‹çš„&lt;strong&gt;æœ€å¤§è¿æ¥&lt;/strong&gt; æ•°ã€‚å®é™…ä¸Šï¼Œè¿™é€šå¸¸ç”¨äºä¿æŠ¤ HTTP/1 é›†ç¾¤ï¼Œå› ä¸º HTTP/2 å¯ä»¥é€šè¿‡å•ä¸ªè¿æ¥å¤ç”¨è¯·æ±‚ï¼Œå› æ­¤é™åˆ¶äº†å‡é€ŸæœŸé—´çš„è¿æ¥å¢é•¿ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å¤§æŒ‚èµ·è¯·æ±‚æ•°&lt;/strong&gt; ï¼šç­‰å¾…æ± ä¸­å¯ç”¨è¿æ¥æ—¶å°†æ’é˜Ÿçš„æœ€å¤§è¯·æ±‚æ•°ã€‚å®é™…ä¸Šï¼Œè¿™ä»…é€‚ç”¨äº HTTP/1é›†ç¾¤ï¼Œå› ä¸º HTTP/2 è¿æ¥æ± ä»ä¸å¯¹è¯·æ±‚è¿›è¡Œæ’é˜Ÿã€‚HTTP/2 è¯·æ±‚ç«‹å³è¢«å¤šè·¯å¤ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å¤§è¯·æ±‚æ•°&lt;/strong&gt; ï¼šåœ¨ä»»ä½•ç»™å®šæ—¶é—´ï¼Œé›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºå¯èƒ½æœªå®Œæˆçš„&lt;strong&gt;æœ€å¤§è¯·æ±‚&lt;/strong&gt; æ•°ã€‚å®é™…ä¸Šï¼Œè¿™ä¸»è¦ç”¨äº HTTP/2ï¼Œå› ä¸º HTTP/1 é€šå¸¸æ¯ä¸ªè¿æ¥æœ‰ä¸€ä¸ªè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æœ€å¤§æ´»åŠ¨é‡è¯•æ¬¡æ•°&lt;/strong&gt; ï¼šåœ¨ä»»ä½•ç»™å®šæ—¶é—´ï¼Œé›†ç¾¤ä¸­æ‰€æœ‰ä¸»æœºå¯ä»¥æ‰§è¡Œçš„æœ€å¤§é‡è¯•æ¬¡æ•°ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å»ºè®®ç§¯æåœ°è¿›è¡Œæ–­è·¯é‡è¯•ï¼Œä»¥ä¾¿å…è®¸é‡è¯•æ•…éšœï¼Œä½†æ•´ä½“é‡è¯•é‡ä¸ä¼šçˆ†ç‚¸å¹¶å¯¼è‡´å¤§è§„æ¨¡çº§è”æ•…éšœã€‚æ­¤è®¾ç½®å¯é˜²æ­¢é‡è¯•æ”¾å¤§ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åœ¨ Lyftï¼Œæˆ‘ä»¬ä¸“æ³¨äºä¸¤ç§ç®¡ç†æœåŠ¡ç½‘æ ¼ä¸­å¹¶å‘æ€§çš„æœºåˆ¶ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é™åˆ¶å…¥å£å±‚çš„å¹¶å‘è¿æ¥æ•°&lt;/strong&gt; ã€‚é‰´äº Lyft çš„æ¯é¡¹æœåŠ¡éƒ½è¿è¡Œä¸€ä¸ª Envoy sidecar æ¥ç®¡ç†è¿›å…¥æœåŠ¡çš„å…¥å£è¯·æ±‚ï¼ˆå…¥å£ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥é…ç½® sidecar å¯¹åº”ç”¨ç¨‹åºçš„å¹¶å‘è¿æ¥æ•°ï¼Œä»è€Œé™åˆ¶å…¥å£å¹¶å‘è¿›å…¥åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬æä¾›åˆç†çš„å€¼ä½œä¸ºé»˜è®¤å€¼ï¼Œä½†é¼“åŠ±æœåŠ¡æ‰€æœ‰è€…åˆ†æå…¶å¹¶å‘æ¨¡å¼å¹¶æ”¶ç´§è®¾ç½®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é™åˆ¶å‡ºå£å±‚çš„å¹¶å‘è¯·æ±‚æ•°&lt;/strong&gt; ã€‚è¿è¡Œ sidecar æ¥ç®¡ç†æ¥è‡ªæœåŠ¡çš„å‡ºå£æµé‡çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥ç®¡ç†ä»æœåŠ¡ï¼ˆå‡ºå£ï¼‰åˆ° Lyft çš„ä»»ä½•å…¶ä»–æœåŠ¡çš„ä¼ å‡ºå¹¶å‘è¯·æ±‚ã€‚è¿™æ„å‘³ç€â€œä½ç½®â€æœåŠ¡çš„æ‰€æœ‰è€…å¯ä»¥æœ‰é€‰æ‹©åœ°é…ç½®ä»–ä»¬æƒ³è¦æ”¯æŒ Lyft çš„æ¯ä¸ªå…¶ä»–æœåŠ¡çš„å¹¶å‘çº§åˆ«ï¼Œä¾‹å¦‚ï¼Œä»–ä»¬å¯ä»¥å†³å®šå¹¶é…ç½®â€œæ¸¸ä¹è®¾æ–½â€æœåŠ¡å¯ä»¥å‘â€œä½ç½®â€å‘å‡º 100 ä¸ªå¹¶å‘è¯·æ±‚â€œï¼Œä½†â€ç”¨æˆ·â€œæœåŠ¡åªèƒ½å‘â€ä½ç½®â€œå‘å‡º 50 ä¸ªå¹¶å‘è¯·æ±‚ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹ Lyft çš„æ¯ä¸ªæœåŠ¡çš„å‡ºå£å’Œå…¥å£è¿è¡Œå¹¶å‘é™åˆ¶çš„ä¸€ä¸ªæœ‰è¶£ç»“æœæ˜¯ï¼Œæ›´å®¹æ˜“è·Ÿè¸ªä¸éœ€è¦çš„è¡Œä¸ºã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæ‰€è§çš„å¸¸è§æ•…éšœæƒ…å½¢æ˜¯çªå‘æ€§ï¼Œ Â ç”±äºåº¦é‡åˆ†è¾¨ç‡è€Œå¯èƒ½ &lt;a href=&#34;https://docs.google.com/document/d/1qeHbXa5DULJMeSwMZIddrM0It3xVI5MwdyoH-8kU9K8/edit?disco=AAAACERmNZQ&amp;amp;ts=5b4fd7d3#heading=h.kctltbvispjy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;éš¾ä»¥è¯Šæ–­&lt;/a&gt; ã€‚å‡ºå£å’Œå…¥å£çš„å¹¶å‘é™åˆ¶å¯ä»¥é€šè¿‡æŸ¥çœ‹è¯·æ±‚è·¯å¾„ä¸­å¹¶å‘æº¢å‡ºçš„ä½ç½®ï¼Œå¯ä»¥è½»æ¾æŸ¥æ˜æ•´ä¸ªç³»ç»Ÿçš„çªå‘è¡Œä¸ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›‘æ§-1&#34;&gt;ç›‘æ§&lt;/h3&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä»¬æ‰€æåˆ°çš„ï¼Œå¹¶å‘å¹¶ä¸æ€»æ˜¯ä¸€ä¸ªç›´è§‚çš„æ¦‚å¿µã€‚ä¸ºäº†å¢å¼ºå¯è§‚å¯Ÿæ€§ï¼Œç½‘ç»œå›¢é˜Ÿæä¾›äº†ä¸åŒçš„å¯è§†åŒ–ï¼Œä»¥ä¾¿æœåŠ¡æ‰€æœ‰è€…å¯ä»¥é…ç½®å…¶å¹¶å‘é™åˆ¶ï¼Œç„¶åç›‘æ§è¿™äº›é™åˆ¶å¦‚ä½•å½±å“ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;h4 id=&#34;è®¾ç½®é™åˆ¶&#34;&gt;&lt;strong&gt;è®¾ç½®é™åˆ¶&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr903c8uj20go03l764_hu_545ec8b31430f619.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr903c8uj20go03l764_hu_aead33dbf95ce4a5.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr903c8uj20go03l764_hu_bbef0b30e6912543.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furr903c8uj20go03l764_hu_545ec8b31430f619.webp&#34;
               width=&#34;600&#34;
               height=&#34;129&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„ä»ªè¡¨æ¿æ˜¯ä¸€ä¸ªäº¤äº’å¼ä»ªè¡¨æ¿ï¼ŒæœåŠ¡æ‰€æœ‰è€…å¯ä»¥å¯¹ Lyft çš„æ‰€æœ‰æœåŠ¡å…è®¸çš„æœ€å¤§å¹¶å‘è¯·æ±‚æ•°é‡è¿›è¡Œè¯•éªŒï¼Œä»¥æ»¡è¶³å…¶ç‰¹å®šæœåŠ¡ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œâ€œä½ç½®â€æœåŠ¡çš„æ‰€æœ‰è€…å¯ä»¥çœ‹åˆ°ï¼Œé™¤â€œviewportâ€æœåŠ¡ä¹‹å¤–ï¼Œå¤§å¤šæ•°è°ƒç”¨æœåŠ¡çš„ 60 ä¸ªå¹¶å‘è¯·æ±‚çš„é™åˆ¶å°±è¶³å¤Ÿäº†ã€‚ä½¿ç”¨æ­¤ä»ªè¡¨æ¿ï¼ŒæœåŠ¡æ‰€æœ‰è€…å¯ä»¥æŸ¥çœ‹å¹¶å‘é…ç½®ä¸­çš„é€‰æ‹©æ€§æ›´æ”¹åœ¨å½“å‰ç½‘ç»œæ‹“æ‰‘ä¸­çš„å¤–è§‚ï¼Œå¹¶å¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œè¿™äº›æ›´æ”¹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç›‘æ§é™åˆ¶&#34;&gt;&lt;strong&gt;ç›‘æ§é™åˆ¶&lt;/strong&gt;&lt;/h4&gt;
&lt;p&gt;å¦‚ä¸Šæ‰€è¿°ï¼Œè®© Envoy ä½œä¸ºä¸€ä¸ª sidecar è¿è¡Œï¼Œå¤„ç†æ¥è‡ªæ¯ä¸ªæœåŠ¡çš„å…¥å£å’Œå‡ºå£æµé‡ï¼Œå…è®¸æœåŠ¡æ‰€æœ‰è€…ä¿æŠ¤ä»–ä»¬çš„æœåŠ¡å…å—å…¥å£å¹¶å‘å’Œå‡ºå£å¹¶å‘ã€‚ç½‘ç»œå›¢é˜Ÿè‡ªåŠ¨åˆ›å»ºå¦‚ä¸‹æ‰€ç¤ºçš„ä»ªè¡¨æ¿ï¼Œä»¥å¸®åŠ©æœåŠ¡æ‰€æœ‰è€…å¯è§†åŒ–å¹¶å‘ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å…¥å£å¹¶å‘&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr901sd6j20h103hjrw_hu_8d493809c7a79144.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr901sd6j20h103hjrw_hu_43dd0de81f2c44b4.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr901sd6j20h103hjrw_hu_35ad47210131e97.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furr901sd6j20h103hjrw_hu_8d493809c7a79144.webp&#34;
               width=&#34;613&#34;
               height=&#34;125&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸Šé¢çš„ä¸¤ä¸ªé¢æ¿ï¼ŒæœåŠ¡æ‰€æœ‰è€…å¯ä»¥çœ‹åˆ°ä»ä»–ä»¬çš„ sidecar Envoy åˆ°ä»–ä»¬çš„æœåŠ¡çš„å¹¶å‘è¿æ¥æ•°ï¼ˆä½¿ç”¨å·¦è¾¹çš„é¢æ¿ï¼‰ï¼Œå¹¶æŸ¥çœ‹æ˜¯å¦æ­£è§¦å‘å¹¶å‘é™åˆ¶ï¼ˆä½¿ç”¨å³ä¾§çš„é¢æ¿ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å‡ºå£å¹¶å‘&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furrb4gp54j20go03g0tc_hu_2f9c9a25b3c6d647.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furrb4gp54j20go03g0tc_hu_94a3730cba76ef87.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furrb4gp54j20go03g0tc_hu_66962f8bf84b2749.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furrb4gp54j20go03g0tc_hu_2f9c9a25b3c6d647.webp&#34;
               width=&#34;600&#34;
               height=&#34;124&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ä¸Šé¢çš„ä¸¤ä¸ªé¢æ¿ï¼ŒæœåŠ¡æ‰€æœ‰è€…å¯ä»¥åœ¨ä»»ä½•æ—¶é—´ç‚¹ï¼ˆä»å·¦ä¾§çš„é¢æ¿ï¼‰å¯è§†åŒ–ä»ä»»ä½•æœåŠ¡åˆ°å…¶æœåŠ¡çš„å¹¶å‘è¯·æ±‚æ•°ã€‚æ­¤å¤–ï¼Œä»–ä»¬å¯ä»¥å¯è§†åŒ–è¶…å‡ºé…ç½®é™åˆ¶çš„æœåŠ¡ï¼ˆä½¿ç”¨å³ä¾§é¢æ¿ï¼‰ï¼Œç„¶åç»§ç»­ä½¿ç”¨å…·ä½“æ•°æ®è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœ‰ä»€ä¹ˆç¼ºç‚¹&#34;&gt;æœ‰ä»€ä¹ˆç¼ºç‚¹ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œä¸ä»»ä½•é™æ€å€¼ä¸€æ ·ï¼Œå¾ˆéš¾é€‰æ‹©åä¹‰ä¸Šçš„é™åˆ¶ã€‚å¯¹äºé€Ÿç‡é™åˆ¶æ¥è¯´æ˜¯è¿™æ ·çš„ï¼Œä½†å¯¹äºå¹¶å‘é™åˆ¶å°¤å…¶å¦‚æ­¤ã€‚å¿…é¡»è€ƒè™‘å‡ ä¸ªé‡è¦å› ç´ ã€‚å¹¶å‘é™åˆ¶æ˜¯æœ¬åœ°çš„ï¼Œå¿…é¡»è€ƒè™‘æœ€å¤§å¯èƒ½çš„å¹¶å‘æ€§è€Œä¸æ˜¯å¹³å‡å€¼ã€‚å·¥ç¨‹å¸ˆä¹Ÿä¸ä¹ æƒ¯åœ¨æœ¬åœ°æ€è€ƒï¼Œä¸»è¦è€ƒè™‘è¯·æ±‚ç‡è€Œä¸æ˜¯å¹¶å‘æ€§ã€‚å€ŸåŠ©ä¸€äº›å¯è§†åŒ–å’Œç»Ÿè®¡æ•°æ®ï¼ŒæœåŠ¡æ‰€æœ‰è€…é€šå¸¸å¯ä»¥æŒæ¡å¹¶å‘æ€§å¹¶é€‰æ‹©åä¹‰å€¼ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†éš¾ä»¥æ¨æ–­å–å€¼ä¹‹å¤–ï¼ŒLyft çš„ä¸€ä¸ªå¸¸è§ç°è±¡å°±æ˜¯å˜åŒ–ã€‚æ•´ä¸ªæœåŠ¡ç½‘ç»œä¸­æ¯å¤©æœ‰æ•°ç™¾ä¸ªéƒ¨ç½²ã€‚å¯¹æœåŠ¡åŠå…¶ä¾èµ–é¡¹çš„ä»»ä½•æ›´æ”¹éƒ½å¯ä»¥æ›´æ”¹èµ„æºå’Œè´Ÿè½½é…ç½®æ–‡ä»¶ã€‚ä¸€æ—¦é€‰æ‹©äº†å€¼ï¼Œç”±äºè¿™äº›å˜åŒ–ï¼Œå®ƒå¯èƒ½è¿‡æ—¶ã€‚ä¾‹å¦‚ï¼ŒLyft çš„å‡ ä¹æ‰€æœ‰æœåŠ¡éƒ½å— CPU é™åˆ¶ã€‚å¦‚æœ CPU ç»‘å®šæœåŠ¡çš„ç›´æ¥ä¾èµ–æ€§å‡æ…¢ 25ï¼…ï¼Œåˆ™è¯¥æœåŠ¡å¯ä»¥å¤„ç†é¢å¤–çš„å¹¶å‘æ€§ï¼Œå› ä¸ºä¹‹å‰ä½¿ç”¨ CPU çš„ç©ºé—²è¯·æ±‚ç°åœ¨ç­‰å¾…ç½‘ç»œ I/O å®Œæˆå°†ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚å› æ­¤ï¼Œå»ºè®®æ¯”æ ‡ç§°å€¼å¢åŠ  25% è‡³ 50ï¼…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è·¯çº¿å›¾&#34;&gt;è·¯çº¿å›¾&lt;/h2&gt;
&lt;h3 id=&#34;çŸ­æœŸ&#34;&gt;çŸ­æœŸ&lt;/h3&gt;
&lt;p&gt;Lyft çš„ç½‘ç»œå›¢é˜Ÿä¸“æ³¨äºä¸ºæœåŠ¡å¼€å‘äººå‘˜æ„å»ºæ˜“äºä½¿ç”¨çš„ç³»ç»Ÿï¼Œä»¥æˆåŠŸé…ç½®ã€æ“ä½œå’Œè°ƒè¯• Envoy åŠç›¸å…³ç³»ç»Ÿã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ç« ç¨‹ä¸­ä¸ä»…è¦è®¾è®¡ã€å®æ–½å’Œéƒ¨ç½²ä¸Šé¢å±•ç¤ºçš„ç³»ç»Ÿï¼Œè¿˜è¦ä¸ºæˆ‘ä»¬çš„ç”¨æˆ·æä¾›æŒç»­çš„æ”¯æŒã€‚åœ¨ Lyftï¼ŒåŸºç¡€è®¾æ–½ç»„ç»‡çš„ä¸€ä¸ªä¸»è¦åŸåˆ™æ˜¯æˆ‘ä»¬ä¸ºæœåŠ¡æ‰€æœ‰è€…æä¾›çš„æŠ½è±¡åº”è¯¥æ˜¯è‡ªåŠ©æœåŠ¡ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨è®°å½•ç”¨ä¾‹ã€æä¾›è°ƒè¯•å·¥å…·å’Œæä¾›æ”¯æŒæ¸ é“æ–¹é¢æŠ•å…¥å·¨èµ„ã€‚&lt;/p&gt;
&lt;p&gt;é‰´äºéç›´è§‚å¹¶å‘æ€§ï¼Œç½‘ç»œå›¢é˜Ÿå°†åœ¨çŸ­æœŸå†…å›´ç»•æ­¤æ–¹é¢æŠ•å…¥é¢å¤–çš„æ–‡æ¡£å’Œå·¥ç¨‹æ•™è‚²ã€‚åœ¨è¿‡å»ï¼Œé€šè¿‡ç›¸å…³ç³»ç»Ÿï¼Œæˆ‘ä»¬çœ‹åˆ°äº†ä»¥ä¸‹æ–¹å¼çš„æˆåŠŸï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;å¸¸è§é—®é¢˜è§£ç­”ï¼šå¸¸è§é—®é¢˜åˆ—è¡¨å¯¹äºå®¢æˆ·æ¥è¯´æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚æ­¤å¤–ï¼Œå®ƒå‡å°‘äº†ç›´æ¥å›ç­”é—®é¢˜çš„æ”¯æŒè´Ÿæ‹…ï¼ˆä¾‹å¦‚ï¼Œåœ¨ Slack ä¸Šï¼Œé€šè¿‡ç”µå­é‚®ä»¶ï¼Œç”šè‡³æ˜¯äº²è‡ªå›ç­”ï¼ï¼‰ã€‚å®ƒå…è®¸æ‚¨è½»æ¾åœ°å°†æŸäººæŒ‡å‘æŸä¸ªé“¾æ¥ï¼›è¿™ç§åšæ³•æ¯”äººä»¬åå¤å›ç­”ç›¸åŒçš„é—®é¢˜è¦å¥½å¾—å¤šã€‚ä¸è¿‡è¿™é‡Œå¯èƒ½æœ‰ä¸ªå¼Šç«¯æ˜¯è¿™äº›åˆ—è¡¨å¯èƒ½ä¼šå˜å¾—å†—é•¿è€Œéš¾ä»¥è§£æã€‚è¿™å¯ä»¥é€šè¿‡å°†å†…å®¹åˆ†æˆåˆ†ç±»å¸¸è§é—®é¢˜è§£ç­”æ¥è§£å†³ã€‚&lt;/li&gt;
&lt;li&gt;é€‰æ‹©è‡ªå·±çš„å†’é™©ï¼šæœåŠ¡æ‰€æœ‰è€…æ˜¯ä¸»è§’ï¼Œä»–ä»¬å¯ä»¥é€‰æ‹©å†’é™©çš„ç»“æœã€‚åœ¨ä¸Šé¢æè¿°çš„å¹¶å‘ç©ºé—´ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å‡ ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ä¿®æ”¹å‡ ä¸ªå¯ä»¥è§£å†³é—®é¢˜çš„è®¾ç½®ã€‚è¿™æ„å‘³ç€è¿™ç§æ”¯æŒè´Ÿæ‹…éå¸¸é€‚åˆæœåŠ¡æ‰€æœ‰è€…å¯ä»¥ä»ä»–ä»¬é‡åˆ°çš„é—®é¢˜å¼€å§‹çš„æ ¼å¼ï¼Œå¹¶å¯¼èˆªæµç¨‹å›¾ä»¥è·å¾—ä»–ä»¬éœ€è¦åˆ†æçš„æŒ‡æ ‡ä»¥è·å¾—æ­£ç¡®çš„è®¾ç½®ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æ–‡æ¡£å’Œå·¥ç¨‹æ•™è‚²çš„è¿‘æœŸæŠ•èµ„ç¼“è§£äº†å½“å‰å¹¶å‘é—®é¢˜çš„ä¸€ä¸ªæ–¹é¢ï¼šç³»ç»Ÿçš„éç›´è§‚æ€§ã€‚ä½†æ˜¯ï¼Œä»–ä»¬æ²¡æœ‰è§£å†³å…¶ä»–é—®é¢˜ï¼šé™ˆæ—§æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ›´é•¿æœŸ&#34;&gt;æ›´é•¿æœŸ&lt;/h3&gt;
&lt;p&gt;å¹¶å‘é™åˆ¶å¾ˆå®¹æ˜“å®æ–½ï¼Œå› ä¸º Envoy å­˜åœ¨äºç½‘ç»œçš„æ¯ä¸€è·³ã€‚ä½†æ˜¯ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œé™åˆ¶å¾ˆéš¾ç¡®å®šï¼Œå› ä¸ºå®ƒéœ€è¦æœåŠ¡æ‰€æœ‰è€…å®Œå…¨ç†è§£ç³»ç»Ÿçš„æ‰€æœ‰çº¦æŸã€‚æ­¤å¤–ï¼Œç”±äºç½‘ç»œæ‹“æ‰‘ç»“æ„çš„ä¸æ–­å‘å±•å’Œå¼¹æ€§ï¼Œå½“ä»Šçš„äº’è”ç½‘è§„æ¨¡å…¬å¸ï¼Œå°¤å…¶æ˜¯é‚£äº›å¤„äºæˆé•¿é˜¶æ®µçš„å…¬å¸ï¼Œé™æ€é™åˆ¶è¿…é€Ÿå¢é•¿ã€‚&lt;/p&gt;
&lt;p&gt;Netflix åœ¨è¿™ä¸ªé—®é¢˜ä¸ŠæŠ•å…¥äº†å¤§é‡èµ„é‡‘ï¼Œæœ€è¿‘ &lt;a href=&#34;https://github.com/Netflix/concurrency-limits&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€æºäº†ä¸€ä¸ªåº“ï¼Œ&lt;/a&gt; Â ç”¨äºè¡¡é‡æˆ–ä¼°ç®—ç½‘ç»œä¸­æ¯ä¸ªç‚¹çš„å¹¶å‘é™åˆ¶ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œéšç€ç³»ç»Ÿè§„æ¨¡å’Œå‘½ä¸­é™åˆ¶ï¼Œç³»ç»Ÿä¸­æ¯ä¸ªèŠ‚ç‚¹å°†è°ƒæ•´å¹¶å¼ºåˆ¶æ‰§è¡Œå…¶å±€éƒ¨æé™è§†å›¾ã€‚ä»–ä»¬é€šè¿‡å°†ç³»ç»Ÿçš„å¹¶å‘çº¦æŸç­‰åŒäº TCP æ‹¥å¡çª—å£ï¼Œå€Ÿç”¨äº†å¸¸è§çš„ TCP æ‹¥å¡æ§åˆ¶ç®—æ³•ã€‚&lt;/p&gt;
&lt;p&gt;Envoy çš„è®¾è®¡åŸåˆ™ä¹‹ä¸€åŒ…æ‹¬ä¸°å¯Œä¸”åŠŸèƒ½å¼ºå¤§çš„è¿‡æ»¤å™¨å †æ ˆï¼Œä»¥æä¾›å¯æ‰©å±•æ€§ã€‚Envoy å…·æœ‰ L3/L4ï¼ˆTCP çº§åˆ«ï¼‰å’Œ L7ï¼ˆHTTP çº§åˆ«ï¼‰è¿‡æ»¤å™¨å †æ ˆã€‚å¯ä»¥ç¼–å†™ HTTP è¿‡æ»¤å™¨ä»¥å¯¹ HTTP çº§åˆ«æ¶ˆæ¯è¿›è¡Œæ“ä½œã€‚HTTP è¿‡æ»¤å™¨å¯ä»¥åœæ­¢å¹¶ç»§ç»­è¿­ä»£åˆ°åç»­è¿‡æ»¤å™¨ã€‚è¿™ç§ä¸°å¯Œçš„è¿‡æ»¤å™¨æ¶æ„å…è®¸å¤æ‚çš„åœºæ™¯ï¼Œä¾‹å¦‚è¿è¡ŒçŠ¶å†µæ£€æŸ¥å¤„ç†ã€è°ƒç”¨é€Ÿç‡é™åˆ¶æœåŠ¡ã€ç¼“å†²ã€è·¯ç”±ã€ç”Ÿæˆåº”ç”¨ç¨‹åºæµé‡ç»Ÿè®¡æ•°æ®ï¼Œå¦‚ DynamoDB ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªæœˆé‡Œï¼ŒLyft å°†ä¸ Netflix çš„å¹¶å‘é™åˆ¶åº“èƒŒåçš„å›¢é˜Ÿåˆä½œï¼Œå°†åŸºäºå…¶åº“çš„ç³»ç»Ÿå¸¦å…¥ Envoy L7 è¿‡æ»¤å™¨ã€‚è¿™æ„å‘³ç€åœ¨ Lyft ä»¥åŠä½¿ç”¨ Envoy çš„ä»»ä½•å…¶ä»–å…¬å¸æˆ‘ä»¬å°†è¿ç§»åˆ°è‡ªåŠ¨åŒ–ç³»ç»Ÿï¼Œæˆ‘ä»¬çš„æœåŠ¡å·¥ç¨‹å¸ˆä¸å¿…é™æ€é…ç½®å¹¶å‘é™åˆ¶ã€‚è¿™æ„å‘³ç€ï¼Œä¾‹å¦‚ï¼Œå¦‚æœç”±äºæ„å¤–æƒ…å†µå¯¼è‡´æœåŠ¡å‡é€Ÿï¼Œåˆ™è‡ªé€‚åº”é™åˆ¶ç³»ç»Ÿå¯ä»¥è‡ªåŠ¨æŠ‘åˆ¶æ£€æµ‹åˆ°çš„é™åˆ¶ï¼Œä»è€Œé˜²æ­¢ç”±äºä¸å¯é¢„è§çš„å‡é€Ÿè€Œå¯¼è‡´çš„æ•…éšœã€‚ä¸€èˆ¬è€Œè¨€ï¼Œè‡ªé€‚åº”ç³»ç»Ÿæ¶ˆé™¤äº†æˆ‘ä»¬è¿‡å»é‡åˆ°çš„ä¸¤ä¸ªé—®é¢˜ï¼šç¡®å®šé€‚å½“çš„é™åˆ¶æ˜¯éç›´è§‚çš„ï¼Œå¹¶ä¸”é™æ€é™åˆ¶åœ¨å¼¹æ€§åˆ†å¸ƒå¼ç³»ç»Ÿä¸­å¿«é€Ÿå¢é•¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœ€åçš„æƒ³æ³•&#34;&gt;æœ€åçš„æƒ³æ³•&lt;/h2&gt;
&lt;p&gt;è¦äº†è§£æœ‰å…³ Envoy æ–­è·¯å™¨å®ç°çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… Â Envoy æ–‡æ¡£ä¸­çš„æ–­è·¯å™¨ &lt;a href=&#34;http://www.servicemesher.com/envoy/intro/arch_overview/circuit_breaking.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¶æ„æ¦‚è¿°&lt;/a&gt;ã€‚ä½œä¸ºä¸€ä¸ªå¼€æºé¡¹ç›®ï¼ŒEnvoy å¯¹ä»£ç è´¡çŒ®æŒå¼€æ”¾æ€åº¦ã€‚æˆ‘ä»¬ä¹Ÿæ¬¢è¿æ–°çš„æƒ³æ³•ã€‚å³ä½¿ä»£ç æ²¡æœ‰åˆ°ä½ï¼Œä¹Ÿå¯ä»¥éšæ„æ‰“å¼€ä¸€ä¸ªå»ºè®®çš„æ–­è·¯å™¨æ”¹è¿› issueã€‚åœ¨å†™ä½œæœ¬æ–‡æ—¶å°šæœªå®ç°çš„èƒ½åŠ›çš„ä¸€ä¸ªç¤ºä¾‹æ˜¯ &lt;a href=&#34;https://github.com/envoyproxy/envoy/issues/3332&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäºç³»ç»Ÿèµ„æºçš„æ–­è·¯&lt;/a&gt; ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å¤„ç†å…¥å£æµé‡æ—¶ç›´æ¥æ–­è·¯ï¼Œè€Œä¸æ˜¯æ ¹æ® CPU é…ç½®æ–‡ä»¶é€¼è¿‘å¹¶å‘è¯·æ±‚é˜ˆå€¼ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶æ–­è·¯å™¨å¯ä»¥æ”¹å–„ç³»ç»Ÿåœ¨è´Ÿè½½ä¸‹çš„è¡Œä¸ºï¼Œä½†é‡è¦çš„æ˜¯ä¸è¦å¿˜è®°å¯ä»¥åœ¨ç³»ç»Ÿæœ¬èº«ä¸­è¿›è¡Œçš„æ”¹è¿›ã€‚æ–­è·¯å™¨åº”è¢«è§†ä¸ºæ•…éšœä¿æŠ¤ï¼Œè€Œä¸æ˜¯ä¸»è¦çš„çº¦æŸæ‰‹æ®µã€‚æœåŠ¡æ‰€æœ‰è€…åº”è¯¥ä½¿ç”¨æ–­è·¯å™¨çŸ¥è¯†æ¥æ”¹è¿›è‡ªå·±çš„ä»£ç åº“ã€‚é™åˆ¶æœ‰é™æ± çš„å¹¶å‘æ€§æ˜¯è§£å†³å¹¶å‘é—®é¢˜çš„æœ€å¸¸ç”¨æ–¹æ³•ã€‚å¦‚æœä»åŒä¸€ä¸Šä¸‹æ–‡ç”Ÿæˆå¤§é‡è¯·æ±‚ï¼Œåˆ™è°ƒç”¨è€…å¯ä»¥é€‰æ‹©ä½¿ç”¨æ‰¹å¤„ç† APIã€‚å¦‚æœæ‰¹å¤„ç† API ä¸å­˜åœ¨ï¼Œåˆ™å¯èƒ½ç¬¦åˆæ¥æ”¶è°ƒç”¨çš„æœåŠ¡çš„æœ€ä½³åˆ©ç›Šã€‚è¿™äº›æ¨¡å¼å¾€å¾€æ˜¯æ•™è‚²è¿‡ç¨‹çš„è¿›ä¸€æ­¥å»¶ä¼¸ã€‚åœ¨ Lyftï¼Œç½‘ç»œå›¢é˜Ÿä¸å…¶ä»–å›¢é˜Ÿåˆä½œï¼Œå¯¹æ‰€æœ‰æœåŠ¡è¿›è¡Œæ•™è‚²å’Œæ”¹è¿›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³äºä½œè€…&#34;&gt;å…³äºä½œè€…&lt;/h2&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8ztt97j202d02sweb_hu_b592bf6bef89ff12.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8ztt97j202d02sweb_hu_f5e8be96757b5058.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8ztt97j202d02sweb_hu_31adebcd33d1b2a5.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furr8ztt97j202d02sweb_hu_b592bf6bef89ff12.webp&#34;
               width=&#34;85&#34;
               height=&#34;100&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jose Nino&lt;/strong&gt; æ˜¯ Lyft ç½‘ç»œå›¢é˜Ÿå¼€å‘å·¥å…·å’Œé…ç½®çš„è´Ÿè´£äººã€‚åœ¨è¿‘ä¸¤å¹´çš„æ—¶é—´é‡Œï¼Œä»–ä¸€ç›´åœ¨ Lyft å·¥ä½œï¼ŒJose ä¸€ç›´åœ¨åˆ›å»ºç³»ç»Ÿæ¥æ‰©å±• Lyft Envoy ç”Ÿäº§ç¯å¢ƒçš„é…ç½®ï¼Œä»¥é€‚åº”æ—¥ç›Šåºå¤§çš„éƒ¨ç½²å’Œå·¥ç¨‹ç»„ç»‡ã€‚ä»–æ›¾æ‹…ä»»å¼€æº Envoy ç»´æŠ¤äººå‘˜ï¼Œå¹¶åŸ¹å…»äº† Envoy ä¸æ–­å‘å±•çš„ç¤¾åŒºã€‚æœ€è¿‘ï¼ŒJose ç»§ç»­æ‰©å±• Lyft çš„ç½‘ç»œè´Ÿè½½å®¹å¿ç³»ç»Ÿã€‚ä½•å¡åœ¨å‡ ä¸ªåœºåœ°è°ˆåˆ°äº† Envoy å’Œå…¶ä»–ç›¸å…³è¯é¢˜ï¼Œæœ€è¿‘ä¸€æ¬¡æ˜¯åœ¨ Kubecon EU 2018ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zquv6j202d02sdfo_hu_504484661930b166.webp 400w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zquv6j202d02sdfo_hu_760bfba73317468.webp 760w,
               /blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zquv6j202d02sdfo_hu_5fff9c107473386d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/envoy-service-mesh-cascading-failure/61411417ly1furr8zquv6j202d02sdfo_hu_504484661930b166.webp&#34;
               width=&#34;85&#34;
               height=&#34;100&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Daniel Hochman&lt;/strong&gt; æ˜¯ Lyft çš„é«˜çº§åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆã€‚ä»–çƒ­è¡·äºæ‰©å±•åˆ›æ–°äº§å“å’Œæµç¨‹ï¼Œä»¥æ”¹å–„å…¬å¸å†…å¤–çš„ç”Ÿæ´»è´¨é‡ã€‚åœ¨ Lyft å·¥ä½œæœŸé—´ï¼Œä»–æˆåŠŸåœ°æŒ‡å¯¼äº†å¹³å°äº§å“å’Œç»„ç»‡å‘å±•çš„çˆ†ç‚¸å¼å¢é•¿ã€‚ä»–ç¼–å†™äº†ååé‡æœ€é«˜çš„å¾®æœåŠ¡ä¹‹ä¸€ï¼Œå¹¶ä»‹ç»äº†å‡ ç§å…³é”®å­˜å‚¨æŠ€æœ¯ã€‚Daniel ç›®å‰è´Ÿè´£ Lyft çš„äº¤é€šç½‘ç»œï¼Œå¹¶è´Ÿè´£åœ¨å†…éƒ¨å’Œè¾¹ç¼˜æ‰©å±• Lyft çš„ç½‘ç»œåŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>é‡‡çº³è¿è¡Œåœ¨ Kubernetes ä¸Šçš„ Istio æœåŠ¡ç½‘æ ¼çš„åˆ©å¼Šåˆ†æ</title>
      <link>https://cloudnativecn.com/blog/istio-service-mesh-tech-boosts-kubernetes-work-with-trade-offs/</link>
      <pubDate>Sun, 05 Aug 2018 15:47:05 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-service-mesh-tech-boosts-kubernetes-work-with-trade-offs/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://searchitoperations.techtarget.com/tip/Istio-service-mesh-tech-boosts-Kubernetes-work-with-trade-offs&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;IT å›¢é˜Ÿèƒ½å¦åªä½¿ç”¨ä¸€ç§å·¥å…·ï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿä¸“æ³¨äºç¼–å†™åº”ç”¨ç¨‹åºä»£ç ï¼Œä½¿ç®¡ç†å‘˜åªä¸“æ³¨äº IT èµ„æºçš„ç®¡ç†ï¼Ÿä½¿ç”¨ Istio å¯ä»¥å®ç°ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œé‡‡çº³ Istio å‰ç¡®å®éœ€è¦ç ”ç©¶ä¸‹å®ƒçš„åˆ©å¼Šã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes æ˜¯ä¸€ä¸ªå¼€æºå®¹å™¨ç¼–æ’ç³»ç»Ÿï¼Œå®ƒæä¾›äº†ç®¡ç†å’Œæ‰©å±•å®¹å™¨åŒ–åº”ç”¨ç¨‹åºçš„å¼ºå¤§åŠŸèƒ½ï¼Œä½†æœ‰äº›äº‹æƒ…å®ƒä¸èƒ½å¾ˆå¥½åœ°å®Œæˆã€‚è€Œ Istio å¢åŠ äº†é¢å¤–çš„æ”¯æŒï¼Œå®ƒå¯ä»¥ç®¡ç†å¾®æœåŠ¡ä¹‹é—´çš„æµé‡ã€‚&lt;/p&gt;
&lt;p&gt;Istio æœåŠ¡ç½‘æ ¼é¡¹ç›®æ˜¯å¹³å°æ— å…³çš„ï¼Œåä½œå’Œå¼€æºçš„ï¼Œç”± IBMã€Google å’Œ Lyftï¼ˆåŸºäºåº”ç”¨ç¨‹åºçš„ä¼ è¾“æœåŠ¡ï¼‰å¼€å‘ã€‚&lt;a href=&#34;https://searchmicroservices.techtarget.com/news/450419875/IBM-Google-Lyft-launch-Istio-open-source-microservices-platform&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®ƒä½¿ç”¨ä»£ç† sidercar æ¨¡å‹&lt;/a&gt;åœ¨äº‘å¹³å°ä¸Šè¿æ¥ã€ä¿æŠ¤ã€ç®¡ç†å’Œç›‘æ§å¾®æœåŠ¡ç½‘ç»œã€‚Istio æ˜ç¡®&lt;a href=&#34;https://searchitoperations.techtarget.com/feature/Service-mesh-architecture-radicalizes-container-networking&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®šä¹‰äº†åŸºç¡€æ¶æ„çš„ä½œç”¨&lt;/a&gt;ï¼Œä¸è¿è¡Œåœ¨å…¶ä¸Šçš„è½¯ä»¶åˆ†ç¦»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é›†æˆ-istio-çš„åˆ©å¼Š&#34;&gt;é›†æˆ Istio çš„åˆ©å¼Š&lt;/h2&gt;
&lt;p&gt;ç¼–æ’å·¥å…· &lt;a href=&#34;https://searchitoperations.techtarget.com/definition/Google-Kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes&lt;/a&gt; ä¸ Istio çš„æ•´åˆï¼Œå¯ä»¥è®©å¼€å‘äººå‘˜å’Œ IT ç®¡ç†å‘˜åœ¨åº”ç”¨ç¨‹åºå®¹å™¨åŒ–è¿™ä¸€å…±åŒç›®æ ‡ä¸Šä¸€èµ·åŠªåŠ›ï¼ŒIT ç®¡ç†è½¯ä»¶æä¾›å•† SolarWinds çš„é¦–å¸­è½¯ä»¶æ¶æ„å¸ˆ Karlo Zatylny è¡¨ç¤ºï¼šâ€œè½¯ä»¶å¼€å‘äººå‘˜å°†æ³¨æ„åŠ›é›†ä¸­åœ¨ç¼–å†™èƒ½å¤Ÿåˆ›é€ æœ€å¤§å•†ä¸šä»·å€¼çš„ä»£ç ä¸Šâ€ã€‚ä»–ä»¬ä¸éœ€è¦è€ƒè™‘&lt;a href=&#34;https://searchitoperations.techtarget.com/ehandbook/How-container-deployment-changes-the-capacity-management-equation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;éƒ¨ç½²å› ç´ &lt;/a&gt;ï¼Œä¾‹å¦‚æ”¯æŒå®¹å™¨çš„ VM å’Œç‰©ç†ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;Zatylny è¯´ï¼šé€šè¿‡ Istioï¼ŒIT ç®¡ç†å‘˜å¯ä»¥ä¸“æ³¨äºè®¡ç®—èµ„æºå’Œç½‘ç»œèµ„æºï¼Œè€Œä¸æ˜¯å¤„ç†ç‰¹å®šçš„ç¡¬ä»¶å’Œè™šæ‹Ÿåˆ†é…ã€‚éƒ¨ç½²çš„åŸºäºå¾®æœåŠ¡çš„åº”ç”¨ç¨‹åºåœ¨æ¶ˆè€—å¯ç”¨èµ„æºæ–¹é¢å˜å¾—æ›´æœ‰æ•ˆç‡ï¼Œè€Œä¸æ˜¯åœ¨è¿‡åº¦ä½¿ç”¨æœªå……åˆ†åˆ©ç”¨åŸºç¡€æ¶æ„çš„æŸäº›éƒ¨åˆ†ã€‚Istio è¿˜ä½¿ç”¨é…ç½®é©±åŠ¨çš„é€šä¿¡æ¶æ„ï¼Œè¿™æé«˜é€Ÿåº¦ç¼©çŸ­äº†å¼€å‘å‘¨æœŸï¼Œå› æ­¤å¼€å‘äººå‘˜å¯ä»¥åœ¨ä¸šåŠ¡éœ€æ±‚å˜åŒ–æ—¶è½»æ¾åœ°å¯¹è½¯ä»¶é‡æ„ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡ä»£ç å¤ç”¨å’Œå…¶ä»–è®¾è®¡éƒ½æå¤§çš„é™ä½äº†å¤æ‚åº¦ï¼Œä½† Istio æœåŠ¡ç½‘æ ¼è®¾è®¡å¸¦æ¥äº†å¤æ‚æ€§å’Œé¢å¤–çš„ç®¡ç†å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;Istio åœ¨ä¸Šè¡Œå’Œä¸‹æ¸¸æä¾›è´Ÿè½½å‡è¡¡ã€é‰´æƒã€å¯è§æ€§å’Œè¿è¡ŒçŠ¶å†µæ£€æŸ¥ï¼Œä½¿ç®¡ç†å‘˜èƒ½å¤ŸæŸ¥æ‰¾ã€è¿æ¥å’Œè·¯ç”±å„ä¸ªéƒ¨ç½²éƒ¨åˆ†ã€‚IDC åˆ†æå¸ˆ Brad Casemore è¡¨ç¤ºï¼Œå®ƒå°†ç½‘ç»œåº”ç”¨äº&lt;a href=&#34;https://searchnetworking.techtarget.com/definition/OSI&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€æ”¾ç³»ç»Ÿäº’è¿æ¨¡å‹ï¼ˆOSIï¼‰&lt;/a&gt;ç¬¬ 7 å±‚çš„å¾®æœåŠ¡äº¤ä»˜ç¯å¢ƒï¼Œè€Œä¸æ˜¯ IP çš„ç¬¬ 3 å±‚æˆ–ç¬¬ 2 å±‚çš„ä»¥å¤ªç½‘ã€‚&lt;/p&gt;
&lt;p&gt;Red Hat äº§å“ç®¡ç†é«˜çº§ä¸»ç®¡ Rich Sharples è¯´ï¼Œåœ¨ Istio æœåŠ¡ç½‘æ ¼ä¸­æ§åˆ¶å’Œæ•°æ®å¹³é¢ä¹‹é—´çš„åˆ†å‰²æ¦‚å¿µå¯èƒ½ä¼šä½¿ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œä½†å®é™…ä¸Šç›¸å½“ç®€å•ã€‚æ•°æ®å¹³é¢ä½¿ç”¨ç®€å•çš„ä»£ç†æ¶æ„æ¥è°ƒè§£æœåŠ¡ç½‘æ ¼ä¸­æ¯ä¸ªæœåŠ¡çš„æ‰€æœ‰å…¥ç«™å’Œå‡ºç«™æµé‡ã€‚æ§åˆ¶å¹³é¢å¤„ç†æœåŠ¡æ³¨å†Œå’Œå‘ç°ã€è®¤è¯ã€è®¿é—®æ§åˆ¶ã€è¯ä¹¦ç®¡ç†ï¼ˆå³ç­¾åã€å‘å¸ƒå’Œæ’¤é”€ï¼‰å’ŒæœåŠ¡ç½‘æ ¼é…ç½®ï¼Œä»¥åŠæ¥è‡ªæœåŠ¡å’ŒæœåŠ¡ä»£ç†çš„é¥æµ‹æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç½‘ç»œå¯åœ¨ &lt;a href=&#34;https://searchmicroservices.techtarget.com/definition/application-program-interface-API&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;API&lt;/a&gt; åé¢å®ç°å®‰å…¨ã€å¯é çš„æœåŠ¡å™¨åˆ°æœåŠ¡å™¨é€šä¿¡ã€‚â€œå½“ä½ æ„å»ºå¾®æœåŠ¡æ—¶ï¼Œä½ é€šå¸¸ä¼šå…¬å¼€ä¸€ä¸ª APIï¼Œå®ƒä¼šå…¬å¼€åŠŸèƒ½ï¼Œç„¶åé€šè¿‡ä¸€ç³»åˆ—æœåŠ¡æ¥å®ç°â€ï¼ŒGartner åˆ†æå¸ˆ Anne Thomas è¡¨ç¤ºã€‚å› ä¸ºå®¹å™¨æ˜¯çŸ­æš‚çš„ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ä¸ä¼šä¿ç•™ä¼šè¯ä¿¡æ¯ï¼Œç®¡ç†å‘˜å¿…é¡»å®šæœŸé‡æ–°è¿æ¥å®ƒä»¬ï¼Œå¹¶ä¸”å®ƒä»¬éœ€è¦å®‰å…¨æˆæƒåŠŸèƒ½ï¼Œä»¥ç¡®ä¿éƒ¨ç½²çš„æœåŠ¡å™¨åˆ°æœåŠ¡å™¨é€šä¿¡å—åˆ°ä¿æŠ¤å’Œè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;Istio çš„æœåŠ¡ç½‘æ ¼å®šä½æœåŠ¡ï¼Œç¡®ä¿é€šä¿¡çš„å¥å£®æ€§ï¼Œå¹¶åœ¨è¿æ¥å¤±è´¥æ—¶æ‰§è¡Œé‡è¯•æˆ–æ‰¾åˆ°å¿…è¦æœåŠ¡çš„å¦ä¸€ä¸ªå®ä¾‹å¹¶å»ºç«‹è¿æ¥ã€‚Thomas è¯´ï¼šæœåŠ¡ç½‘æ ¼è¿˜å¯ä»¥å®ç°éš”æ¿å’Œæ–­è·¯å™¨ã€‚éš”æ¿éš”ç¦»åº”ç”¨ç¨‹åºçš„å„ä¸ªéƒ¨åˆ†ï¼Œä»¥ç¡®ä¿ä»»ä½•ç»™å®šçš„æœåŠ¡æ•…éšœä¸ä¼šå½±å“ä»»ä½•å…¶ä»–æœåŠ¡ã€‚æ–­è·¯å™¨æ˜¯ä¸€ç§ç›‘æ§ç»„ä»¶ï¼Œå…·æœ‰ç”¨äº&lt;a href=&#34;https://medium.com/microservices-in-practice/microservices-in-practice-7a3e85b6624c&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¤–éƒ¨å¾®æœåŠ¡é€šä¿¡&lt;/a&gt;çš„ç¼–ç¨‹æ•…éšœé˜ˆå€¼ï¼›æ–­è·¯å™¨æ€æ­»æ•…éšœæœåŠ¡ä»¥è°ƒèŠ‚èµ„æºæ¶ˆè€—å¹¶è¯·æ±‚å“åº”æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://searchsdn.techtarget.com/definition/east-west-traffic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸œè¥¿å‘é€šä¿¡èƒ½åŠ›&lt;/a&gt;æ˜¯å¾®æœåŠ¡çš„å¦ä¸€ä¸ªå…³é”®éœ€æ±‚ã€‚å°†å®¢æˆ·ç«¯è¿æ¥åˆ°æœåŠ¡çš„ API ç½‘å…³æ˜¯å—åŒ—å‘é€šä¿¡; è¿™é€šå¸¸æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯ä¸ºäº†å®ç°å…¶èƒŒåå…·æœ‰é™„åŠ æœåŠ¡çš„å¾®æœåŠ¡ï¼ŒæœåŠ¡ç½‘ç»œåˆ›å»ºä¸œè¥¿å‘é€šä¿¡ï¼Œå³ IT ç¯å¢ƒå†…çš„é€šä¿¡ã€‚Istio æ˜¯ä¸ºè¿™ç§é€šä¿¡é€”å¾„è€Œæ„å»ºçš„ã€‚&lt;/p&gt;
&lt;p&gt;Istio æœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå› ä¸ºå®ƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„å¤šè¯­è¨€è¿è¡Œæ—¶æœåŠ¡ç½‘æ ¼ï¼Œå¯ä»¥åœ¨ç»™å®šçš„äº‘å¹³å°ä¸Šè¿è¡Œï¼Œä½†ä¸€å¦‚æ—¢å¾€ï¼Œæˆ‘ä»¬éœ€è¦æƒè¡¡åˆ©å¼Šã€‚è™½ç„¶ Istio ä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨ä¸æ¨¡ç³Šåº”ç”¨é€»è¾‘çš„æƒ…å†µä¸‹ç”Ÿæˆæ™ºèƒ½å¾®æœåŠ¡è®¾è®¡æ¨¡å¼å’Œæœ€ä½³å®è·µï¼Œä½†è¯¥åŠŸèƒ½å…·æœ‰æ€§èƒ½å’Œå»¶è¿Ÿå½±å“ï¼ŒSharples è¯´ã€‚Sharples è¡¨ç¤ºï¼ŒIstio çš„ä»£ç† sidecar æ¨¡å‹ï¼ˆç”¨äºè°ƒè§£æµé‡çš„å¼€æº Envoy è¾¹ç¼˜ä»£ç†ï¼‰â€”â€”å¼•å…¥äº†é¢å¤–çš„ç½‘ç»œè°ƒç”¨ï¼Œå¯èƒ½ä¼šä¸ºé«˜æ€§èƒ½å®æ—¶åº”ç”¨äº§ç”Ÿ&lt;a href=&#34;https://searchmicroservices.techtarget.com/tip/Microservices-challenges-include-latency-but-it-can-be-beat&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸å¯æ¥å—çš„å»¶è¿Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•é‡‡ç”¨-istio-æœåŠ¡ç½‘æ ¼&#34;&gt;å¦‚ä½•é‡‡ç”¨ Istio æœåŠ¡ç½‘æ ¼&lt;/h2&gt;
&lt;p&gt;Istio åœ¨æµ‹è¯•ç‰ˆä¸­ï¼Œåœ¨å‘å¸ƒæ—¶æ²¡æœ‰æä¾›å•†ä¸šæ”¯æŒã€‚Casemore è¯´ï¼Œå¯¹äºå¤§å¤šæ•°ç»„ç»‡æ¥è¯´ï¼Œè¿™ä»…æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„ POC é¡¹ç›®ï¼Œè€Œä¸”æ˜¯é‚£äº›å…·æœ‰å†’é™©ç²¾ç¥çš„äººå°†å®ƒè¿è¡Œåœ¨éå…³é”®ä¸šåŠ¡åº”ç”¨ç¨‹åºæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;IDC çš„åˆ†æå¸ˆ Gary Chen è¯´ï¼šâ€œè¿™é¡¹æŠ€æœ¯é€‚ç”¨äºé‚£äº›å¤„äºæŠ€æœ¯å‰æ²¿çš„å›¢é˜Ÿï¼Œä½†æ˜¯ä»–ä»¬å¿…é¡»éå¸¸è‡ªä¿¡æ‰ä¼šé‡‡çº³è¯¥æŠ€æœ¯â€ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æœåŠ¡ç½‘æ ¼æ¶æ„æ¿€æ´»äº†å®¹å™¨ç½‘ç»œç®¡ç†â€”æ¥è‡ªäºæœåŠ¡ç½‘æ ¼åˆ›å»ºè€…ä»¬çš„è§è§£ä¸å±•æœ›</title>
      <link>https://cloudnativecn.com/blog/service-mesh-architecture-radicalizes-container-networking/</link>
      <pubDate>Thu, 26 Jul 2018 21:12:31 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/service-mesh-architecture-radicalizes-container-networking/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://searchitoperations.techtarget.com/feature/Service-mesh-architecture-radicalizes-container-networking&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å®¹å™¨æ˜¯ IT è¡Œä¸šçš„è¶…çº§è‹±é›„ï¼Œå®ƒä¸æœåŠ¡ç½‘æ ¼æ˜¯æœ€ä½³ç»„åˆã€‚å®ƒä»¬è”æ‰‹å¯¹æŠ—æ··ä¹±çš„ç½‘ç»œç®¡ç†ã€‚&lt;/strong&gt;&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å®¹å™¨å’Œå¾®æœåŠ¡å‡ºç°å‚¬ç”Ÿäº†ä¸€ç§ç§°ä¸ºæœåŠ¡ç½‘æ ¼çš„æ–°å‹ç½‘ç»œæ¶æ„èŒƒä¾‹ï¼Œä½† IT è§‚å¯Ÿå®¶ä»¬å¯¹å®ƒæ˜¯å¦èƒ½å¤Ÿå¹¿æ³›åº”ç”¨åˆ°ç”Ÿäº§ä¸ŠæŒæœ‰ä¸åŒæ„è§ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼ä½¿ç”¨ä¸€ä¸ªç§°ä¸º sidecar çš„ä»£ç†ï¼Œå®ƒæ˜¯é™„åŠ åœ¨åº”ç”¨ç¨‹åºæ—ã€è™šæ‹Ÿæœºæˆ–è¿è¡Œåœ¨ Kubernetes çš„ pod ä¸­çš„å®¹å™¨ï¼Œå…·ä½“è¿è¡Œåœ¨å“ªé‡Œå–å†³äºæ‰€ä½¿ç”¨çš„æœåŠ¡ç½‘æ ¼çš„ç±»å‹ã€‚ç„¶åï¼Œè¯¥ä»£ç†å¯ä»¥è¿æ¥åˆ°é›†ä¸­å¼çš„æ§åˆ¶å¹³é¢è½¯ä»¶ï¼Œè¿™äº›è½¯ä»¶æ”¶é›†ç»†ç²’åº¦çš„ç½‘ç»œé¥æµ‹æ•°æ®ï¼Œåº”ç”¨ç½‘ç»œç®¡ç†ç­–ç•¥æˆ–æ›´æ”¹ä»£ç†é…ç½®ï¼Œå»ºç«‹å¹¶æ‰§è¡Œç½‘ç»œå®‰å…¨ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;IT ç³»ç»Ÿä¸­çš„æœåŠ¡ç½‘æ ¼æ¶æ„è¿˜å¤„äºåˆæœŸé˜¶æ®µï¼Œä½†ä¸å®¹å™¨ä¸€æ ·å®ƒä¸Šå‡çš„å¾ˆå¿«ã€‚åœ¨ 2017 å¹´ 12 æœˆäº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰ä¸¾åŠçš„ KubeCon å’Œ CloudNativeCon ä¸Šï¼ŒæœåŠ¡ç½‘æ ¼å·²ç»å–ä»£å®¹å™¨æˆä¸º&lt;a href=&#34;https://searchitoperations.techtarget.com/essentialguide/Use-these-DevOps-examples-to-reimagine-an-IT-organization&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt; DevOps å‰æ²¿&lt;/a&gt;æœ€çƒ­é—¨çš„è¯é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;â€œæˆ‘ä»¬ç»å¸¸å‘ç°è‡ªå·±åœ¨æ„å»ºåº”ç”¨è½¯ä»¶æ—¶ï¼Œæˆ‘ä»¬å®é™…ä¸Šåœ¨åšçš„æ˜¯ä¸€éåˆä¸€éåœ°ç¼–å†™ç›¸åŒçš„ä»£ç æ¥è§£å†³æŸäº›å®é™…ä¸Šéå¸¸å›°éš¾çš„è®¡ç®—æœºç§‘å­¦é—®é¢˜ï¼Œè¿™äº›é—®é¢˜åº”è¯¥è¢«è€ƒè™‘åˆ°æŸç§é€šç”¨æ¥å£ä¸­â€ï¼Œå¾®æœåŠ¡ç›‘æ§åˆ›ä¸šå…¬å¸ LightStep é¦–å¸­æ‰§è¡Œå®˜ Ben Sigelman åœ¨ KubeCon çš„æœåŠ¡ç½‘æ ¼ä¸»é¢˜æ¼”è®²ä¸­è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;â€œæœåŠ¡ç½‘æ ¼å¯ä»¥ç”¨æ¥åšå‘ç°æœåŠ¡ã€æœåŠ¡è¿æ¥ã€æ–­è·¯ã€è´Ÿè½½å‡è¡¡&amp;hellip;&amp;hellip;å®‰å…¨å’Œèº«ä»½éªŒè¯â€ , Sigelman è¯´ï¼Œä»–æ˜¯å‰è°·æ­Œå·¥ç¨‹å¸ˆï¼ŒOpenTracing çš„åˆ›å»ºè€…ï¼ŒOpenTracing æ˜¯å¼€æºçš„ï¼Œæä¾›ä¾›åº”å•†æ— å…³çš„ APIã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœåŠ¡ç½‘æ ¼ç®€å²&#34;&gt;æœåŠ¡ç½‘æ ¼ç®€å²&lt;/h3&gt;
&lt;p&gt;æœ€æ—©ç‰ˆæœ¬çš„ sidecar ä»£ç†æŠ€æœ¯åœ¨ 2016 å¹´åˆå¼€å§‹å‡ºç°åœ¨å¦‚è°·æ­Œå’Œæ¨ç‰¹çš„ç½‘ç»œå•†åº—ï¼Œå¾®æœåŠ¡ç®¡ç†éœ€è¦å¯¹ç½‘ç»œè¿›è¡Œæ–°çš„æ€è€ƒã€‚ä¸ä¼ ç»Ÿçš„å•ä½“åº”ç”¨ç¨‹åºä¸åŒï¼Œ&lt;a href=&#34;https://searchmicroservices.techtarget.com/definition/microservices&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡&lt;/a&gt;ä¾é å¤–éƒ¨ç½‘ç»œæ¥æ²Ÿé€šå’Œåè°ƒåº”ç”¨ç¨‹åºåŠŸèƒ½ã€‚è¿™äº›å¾®æœåŠ¡é€šä¿¡éœ€è¦å¯†åˆ‡ç›‘æ§ï¼Œæœ‰æ—¶éœ€è¦å¤§è§„æ¨¡é‡æ–°é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç”¨äºå¾®æœåŠ¡ç½‘ç»œç®¡ç†è‡ªåŠ¨åŒ–æœ€æ—©çš„æŠ€æœ¯ä¾èµ–äºåº“ï¼Œä½œä¸ºåº”ç”¨ç¨‹åºä»£ç çš„ä¸€éƒ¨åˆ†è¿›è¡Œéƒ¨ç½²ï¼Œ&lt;a href=&#34;https://github.com/Netflix/Hystrix&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¦‚ Netflix çš„ Hystrix&lt;/a&gt;ã€‚å› æ­¤ï¼Œå¼€å‘äººå‘˜éœ€è¦è¿›è¡Œç½‘ç»œç®¡ç†ã€‚è¿™äº›åº“ä¹Ÿå¿…é¡»ç”¨ç‰¹å®šç¯å¢ƒä¸­ä½¿ç”¨çš„æ¯ç§åº”ç”¨ç¨‹åºè¯­è¨€ç¼–å†™ã€‚è¿™æå‡ºäº†ä¸€ä¸ªéš¾é¢˜ï¼Œå› ä¸º&lt;a href=&#34;https://searchmicroservices.techtarget.com/answer/How-will-microservices-development-benefit-enterprise-architecture&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡ç²¾ç¥&lt;/a&gt;çš„ä¸€ä¸ªä¸»è¦åŸåˆ™æ˜¯å°å›¢é˜Ÿå¯ä»¥è‡ªç”±åœ°ä½¿ç”¨ä»»ä½•è¯­è¨€è¿›è¡Œç‹¬ç«‹çš„æœåŠ¡ç®¡ç†ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¤§å¤šæ•°è®¤ä¸ºè‡ªå·±æ­£åœ¨ä½¿ç”¨å¾®æœåŠ¡çš„ç»„ç»‡å¹¶æ²¡æœ‰çœŸæ­£åšåˆ°å¾®æœåŠ¡ã€‚â€”â€”&lt;em&gt;Anne Thomas&lt;/em&gt;ï¼ŒGartner åˆ†æå¸ˆ&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;åœ¨ 2016 å¹´åˆï¼Œç¬¬ä¸€æ‰¹åœ¨ Twitter ä¸Šå®æ–½å¾®æœåŠ¡çš„å·¥ç¨‹å¸ˆæˆç«‹äº† Buoyant å…¬å¸ï¼Œè¯¥å…¬å¸é‡‡ç”¨ sidecar ä»£ç†æ–¹æ³•æ›¿ä»£åº”ç”¨ç¨‹åºåº“ã€‚Buoyant åœ¨ 2016 å¹´å¹´ä¸­åˆ›é€ äº†&lt;em&gt;Service Mesh&lt;/em&gt;è¿™ä¸ªæœ¯è¯­ï¼Œå…¶æœ€åˆçš„æœåŠ¡ç½‘æ ¼äº§å“ Linkerd ä½¿ç”¨ Java è™šæ‹Ÿæœºï¼ˆJVMï¼‰ä½œä¸º sidecarï¼Œè¿™ç§è®¾è®¡å°†ç½‘ç»œç®¡ç†è´Ÿæ‹…ä»åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜è½¬ç§»å‡ºæ¥ï¼Œå¹¶æ”¯æŒå¯¹å¤šè¯­è¨€çš„é›†ä¸­ç®¡ç†åº”ç”¨ç½‘ç»œã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒLinkerd æ˜¯ä¸»æµä¼ä¸šçº§ IT å•†åº—ä¸­å”¯ä¸€ä¸Šç”Ÿäº§ç¯å¢ƒçš„æœåŠ¡ç½‘æ ¼æ¶æ„ã€‚ä½¿ç”¨çš„å®¢æˆ·åŒ…æ‹¬ Salesforceã€PayPalã€Credit Karmaã€Expedia å’Œ AOLã€‚&lt;/p&gt;
&lt;p&gt;Linkerd åˆšåˆšç«™ç¨³äº†è„šè·Ÿï¼Œ&lt;a href=&#34;https://searchitoperations.techtarget.com/definition/Docker&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker å®¹å™¨&lt;/a&gt;å’Œ &lt;a href=&#34;https://searchitoperations.techtarget.com/definition/Google-Kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes å®¹å™¨ç¼–æ’&lt;/a&gt;åˆå°† &lt;a href=&#34;https://searchitoperations.techtarget.com/definition/Google-Kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Buoyant&lt;/a&gt; å·¥ç¨‹å¸ˆé€å›äº†åŸç‚¹ã€‚ç»ˆäºåœ¨ 2017 å¹´ 12 æœˆï¼Œè¯¥å…¬å¸å‘å¸ƒäº† Conduitï¼Œä¸€ç§åŸºäºè½»é‡çº§å®¹å™¨ä»£ç†çš„æœåŠ¡ç½‘æ ¼æ¶æ„ï¼Œè€Œä¸æ˜¯ Linkerd ä¸­ä½¿ç”¨çš„è€—èµ„æºçš„ JVMã€‚å®ƒä¸“é—¨ç”¨äºä¸ &lt;a href=&#34;https://searchitoperations.techtarget.com/tip/Googles-Go-language-seeks-DevOps-middle-ground&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Go&lt;/a&gt; å’Œ &lt;a href=&#34;https://research.mozilla.org/rust/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Rust&lt;/a&gt; åº”ç”¨ç¨‹åºè¯­è¨€ç»„åˆä½¿ç”¨çš„ Kubernetesã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes ç¤¾åŒºæ­£åœ¨ä¸º Go ç¼–å†™è½»é‡çº§æœåŠ¡ï¼Œå¯èƒ½éœ€è¦ 20 MB æˆ– 50 MB çš„å†…å­˜æ‰èƒ½è¿è¡Œï¼Œè€Œ Linkerd çš„  JVM å¯èƒ½ä¼šå ç”¨ 200 MB çš„å†…å­˜ï¼Œå¯¹äº Kubernetes çˆ±å¥½è€…æ¥è¯´è¿™æ˜¯ä¸€ä¸ªçŸ›ç›¾ç‚¹ï¼ŒWilliam Morganâ€”â€”Buoyant çš„è”åˆåˆ›å§‹äººå…¼é¦–å¸­æ‰§è¡Œå®˜è¿™æ ·è¯´ã€‚&lt;/p&gt;
&lt;p&gt;Morgan è¯´ï¼šâ€œä¸ºæ­¤æ¶ˆè€—å¤§é‡å†…å­˜æ˜¯ä¸æœ€ç†æƒ³çš„ï¼Œç‰¹åˆ«æ˜¯å…¶ä»·å€¼ä¸»å¼ æ˜¯æˆä¸ºå¼€å‘äººå‘˜ä¸å¿…æ‹…å¿ƒçš„åº•å±‚åŸºç¡€æ¶æ„çš„ä¸€éƒ¨åˆ†æ—¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†å°±åœ¨ 2017 å¹´åˆ Buoyant å·¥ç¨‹å¸ˆå¼€å§‹é‡æ–°è€ƒè™‘å…¶æœåŠ¡ç½‘æ ¼æ¶æ„æ—¶ï¼ŒKubernetes çš„åˆ›é€ è€…è°·æ­Œå’Œé‡é‡çº§æŠ€æœ¯å…¬å¸ IBM è”æ‰‹  Lyft å…¬å¸çš„ Envory åˆ›å»ºäº†  &lt;a href=&#34;https://searchmicroservices.techtarget.com/news/450419875/IBM-Google-Lyft-launch-Istio-open-source-microservices-platform&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt;ã€‚é‰´äºå…¶æ”¯æŒè€…çš„å£°èª‰å’Œè°·æ­Œå†…éƒ¨ç®¡ç†å¤§è§„æ¨¡åŸºäºå®¹å™¨çš„å¾®æœåŠ¡çš„ç»éªŒï¼Œè¿™ç§åŸºäºå®¹å™¨çš„æœåŠ¡ç½‘æ ¼å¼•èµ·äº†ä¸šç•Œçš„å¹¿æ³›å…³æ³¨ã€‚Google åŸºäºå…¶å†…éƒ¨çš„æœåŠ¡æ§åˆ¶å·¥å…·å‘ Istio æä¾›æ§åˆ¶å¹³é¢è½¯ä»¶ï¼Œè€Œ IBM åˆ™æ·»åŠ äº†æ§åˆ¶å¹³é¢å·¥å…· Amalgam8ã€‚Istio æ˜¯åŸºäº Lyft çš„ Envoy sidecar ä»£ç†ï¼Œè¯¥å…¬å¸æ˜¯ä¸ºäº†æ§åˆ¶å¹³é¢æ¥æ”¶å‘½ä»¤è€Œå»ºç«‹çš„ã€‚å®ƒå¯ä»¥åŠ¨æ€è¯»å–åˆ° sidecar çš„é…ç½®æ›´æ–°ï¼Œè€Œæ— éœ€é‡å¯ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-architecture-radicalizes-container-networking/61411417ly1fsz4wgsjvkj20m80oomy3_hu_61f9462a300faac2.webp 400w,
               /blog/service-mesh-architecture-radicalizes-container-networking/61411417ly1fsz4wgsjvkj20m80oomy3_hu_26838e6b37eb4bc5.webp 760w,
               /blog/service-mesh-architecture-radicalizes-container-networking/61411417ly1fsz4wgsjvkj20m80oomy3_hu_87df97a2e515217.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-architecture-radicalizes-container-networking/61411417ly1fsz4wgsjvkj20m80oomy3_hu_61f9462a300faac2.webp&#34;
               width=&#34;685&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Istio çš„æ”¯æŒè€…æ­£åœ¨ä¸ Kubernetes æ‰€åœ¨çš„ CNCF è¿›è¡Œé•¿æœŸç®¡ç†è°ˆåˆ¤ã€‚ä»–ä»¬è®¡åˆ’åœ¨ 2018 å¹´ç¬¬ä¸‰å­£åº¦å‘å¸ƒ 1.0 ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒLinkerd å’Œ Istio å·²ç»æˆä¸ºè¿™ä¸ªæ–°å…´å¸‚åœºä¸­æœ€å…·å½±å“åŠ›çš„é¡¹ç›®ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šæœåŠ¡ç½‘æ ¼æ¶æ„é¡¹ç›®æ­£åœ¨è¿›è¡Œä¸­ï¼ŒåŒ…æ‹¬å¼€æºå’Œä¸“æœ‰é€‰é¡¹ã€‚è¿™äº›é¡¹ç›®ä¸­æœ‰è®¸å¤šæ˜¯åŸºäº Envoy sidecarã€‚Nginx åŸºäºå…¶ Nginx Plus ä»£ç†å¼•å…¥äº†&lt;a href=&#34;https://itknowledgeexchange.techtarget.com/open-source-insider/nginx-gets-granular-on-managed-microservices/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªå·±çš„é›†ä¸­å¼ç®¡ç†æ§åˆ¶å¹³é¢&lt;/a&gt;ã€‚å…¶ä»–æ—©æœŸçš„æœåŠ¡ç½‘æ ¼å¸Œæœ›åŒ…æ‹¬ Turbine Labs çš„ Houstonã€Datawire çš„ Ambassadorã€Heptio çš„ Contourã€Solo.io çš„ Gloo å’Œ Tigera çš„ CNXã€‚&lt;/p&gt;
&lt;h3 id=&#34;è°éœ€è¦æœåŠ¡ç½‘æ ¼&#34;&gt;è°éœ€è¦æœåŠ¡ç½‘æ ¼ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ç°åœ¨åˆ¤æ–­æœåŠ¡ç½‘ç»œæ¶æ„åœ¨ä¸»æµä¼ä¸š IT å•†åº—ä¸­çš„æ™®åŠåº¦è¿˜ä¸ºæ—¶è¿‡æ—©ï¼Œè¿™äº› IT å•†åº—ä¸é€‚ç”¨äº Twitter æˆ– Googleã€‚&lt;/p&gt;
&lt;p&gt;Gartner åˆ†æå¸ˆ Anne Thomas è¡¨ç¤ºï¼Œå¯¹äºä»¥æœ‰é™æ–¹å¼ä½¿ç”¨å®¹å™¨çš„ç»„ç»‡ï¼Œç°æœ‰çš„ API ç½‘å…³ã€Kubernetes æˆ– PaaS è½¯ä»¶ï¼ˆå¦‚ Docker Enterprise Edition æˆ– Cloud Foundryï¼‰çš„æœåŠ¡å‘ç°å’Œç½‘ç»œç®¡ç†åŠŸèƒ½å¯èƒ½å·²ç»è¶³ä»¥æä¾›å¾®æœåŠ¡æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;â€œå¤§å¤šæ•°è®¤ä¸ºè‡ªå·±æ­£åœ¨å®æ–½å¾®æœåŠ¡çš„ç»„ç»‡å¹¶æ²¡æœ‰çœŸæ­£åšåˆ°çœŸæ­£çš„å¾®æœåŠ¡â€œï¼ŒThomas è¯´ã€‚â€œæˆ‘ä¸ç›¸ä¿¡çœŸæ­£çš„å¾®æœåŠ¡å°†æˆä¸ºä¼ ç»Ÿä¼ä¸šä¸­çš„ä¸»æµã€‚â€&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼å…è®¸æ‚¨ä»¥é›†ä¸­çš„æ–¹å¼ç®¡ç†æµé‡ï¼Œè¿™ç§æ–¹å¼å¯ä»¥è®©å±è”½ç¯å¢ƒå¯¹æŠ€æœ¯çš„å½±å“ï¼Œæˆ‘è§‰å¾—è¿™åœ¨ä»»ä½•è§„æ¨¡ä¸Šéƒ½å¾ˆæœ‰ç”¨ã€‚â€”â€”&lt;strong&gt;Zack Angelo&lt;/strong&gt; BigCommerce å¹³å°å·¥ç¨‹æ€»ç›‘&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¯¹ Thomas æ¥è¯´ï¼ŒçœŸæ­£çš„å¾®æœåŠ¡æ˜¯å°½å¯èƒ½ç‹¬ç«‹çš„ã€‚æ¯ä¸ªæœåŠ¡å¤„ç†ä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•æˆ–é¢†åŸŸåŠŸèƒ½ï¼›ä½¿ç”¨è‡ªå·±çš„ç‹¬ç«‹æ•°æ®å­˜å‚¨ï¼›ä¸å…¶ä»–å¾®æœåŠ¡ä¾é åŸºäºå¼‚æ­¥äº‹ä»¶çš„é€šä¿¡ï¼›å¹¶å…è®¸å¼€å‘äººå‘˜è®¾è®¡ã€å¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²å’Œæ›¿æ¢è¿™ä¸ªå•ç‹¬çš„åŠŸèƒ½ï¼Œè€Œæ— éœ€é‡æ–°éƒ¨ç½²åº”ç”¨ç¨‹åºçš„ä»»ä½•å…¶ä»–éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;â€œå¾ˆå¤šä¸»æµå…¬å¸å¹¶ä¸ä¸€å®šæ„¿æ„èŠ±å°†å¤§é‡çš„æ—¶é—´å’Œé‡‘é’±æŠ•å…¥åˆ°åº”ç”¨æ¶æ„ä¸Šâ€ï¼ŒThomas äº‰è¾©é“ã€‚â€œä»–ä»¬ä»ç„¶åœ¨ä»¥æ›´ç²—ç²’åº¦çš„æ–¹å¼åšäº‹ä¸”ä¸ä¼šä½¿ç”¨æœåŠ¡ç½‘æ ¼ï¼Œè‡³å°‘åœ¨ç½‘æ ¼ä»¥æœåŠ¡çš„æ–¹å¼æ·»åŠ åˆ°å¹³å°ï¼Œæˆ–è€…åœ¨å‡ºç°æ–°å‹å¼€å‘æ¡†æ¶ä¹‹å‰â€œã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå¤šæœåŠ¡ç½‘æ ¼çš„æ—©æœŸç”¨æˆ·è®¤ä¸ºå¹¶ä¸ä¸€å®šéœ€è¦æœ‰å¤§é‡çš„å¾®æœåŠ¡æ‰èƒ½ä»è¯¥æŠ€æœ¯ä¸­å—ç›Šã€‚&lt;/p&gt;
&lt;p&gt;â€œå®ƒå¯ä»¥è®©ä½ ä»¥é›†ä¸­çš„æ–¹å¼ç®¡ç†æµé‡ï¼Œæµé‡åœ¨ä¸åŒçš„ç¯å¢ƒå’ŒæŠ€æœ¯ä¸­æ˜¯ä¸€è‡´çš„ï¼Œæˆ‘è§‰å¾—è¿™åœ¨ä»»ä½•è§„æ¨¡ä¸Šéƒ½å¾ˆæœ‰ç”¨â€ï¼Œä½äºå¾·å…‹è¨æ–¯å·å¥¥æ–¯æ±€çš„ç”µå­å•†åŠ¡å…¬å¸ BigCommerce çš„å¹³å°å·¥ç¨‹ä¸»ç®¡ Zack Angelo è¿™æ ·è¯´ï¼Œä»–ä»¬ä½¿ç”¨ Linkerd æœåŠ¡ç½‘æ ¼ã€‚â€œå³ä½¿ä½ åªæœ‰åå‡ ä¸ªæœåŠ¡ï¼Œè¿™ä¹Ÿæ˜¯éå¸¸æœ‰ç”¨çš„åŠŸèƒ½â€ã€‚&lt;/p&gt;
&lt;p&gt;Angelo è¯´ï¼Œä¼ ç»Ÿçš„ç½‘ç»œç®¡ç†æ¦‚å¿µï¼Œä¾‹å¦‚è´Ÿè½½å‡è¡¡å™¨ï¼Œæ— æ³•æŒ‰å¾®å°çš„ç™¾åˆ†æ¯”æŠŠæµé‡è·¯ç”±åˆ°æŸäº›èŠ‚ç‚¹ï¼Œä»¥ä¾¿è¿›è¡Œ&lt;a href=&#34;https://searchitoperations.techtarget.com/tip/Improve-application-rollout-planning-with-advanced-options&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é‡‘ä¸é›€æˆ–è“/ç»¿å‘å¸ƒ&lt;/a&gt;ã€‚ä¼ ç»Ÿçš„ç½‘ç»œç›‘æ§å·¥å…·ä¹Ÿä¸æä¾›æœåŠ¡ç½‘æ ¼æ‰€æä¾›çš„é‚£ç§ç»†ç²’åº¦çš„é¥æµ‹æ•°æ®ï¼Œèƒ½å¤Ÿè·Ÿè¸ª 99% çš„åº”ç”¨ç¨‹åºå»¶è¿Ÿä¸­çš„å¾®å°å¼‚å¸¸ï¼Œå…¶é‡è¦æ€§åœ¨å¾®æœåŠ¡ç½‘ç»œä¸­è¢«æ”¾å¤§ã€‚&lt;/p&gt;
&lt;p&gt;Linkerd çš„è´Ÿè½½å‡è¡¡æ¨¡å¼ä½¿ç”¨äº†ä¸€ç§ç§°ä¸º&lt;em&gt;æŒ‡æ•°åŠ æƒç§»åŠ¨å¹³å‡&lt;/em&gt;çš„æŠ€æœ¯ï¼Œä»¥ä¾¿å½“æœåŠ¡ç½‘æ ¼è·¨ä¸»æœºåˆ†é…ç½‘ç»œæµé‡æ—¶ï¼Œå®ƒä¼šè€ƒè™‘ä¸‹æ¸¸æœåŠ¡å“åº”çš„é€Ÿåº¦ï¼Œç„¶åå°†æµé‡è·¯ç”±åˆ°æœåŠ¡æ€§èƒ½æœ€ä½³çš„åœ°æ–¹ï¼Œè€Œä¸æ˜¯ä¼ ç»Ÿå¾ªç¯è´Ÿè½½å‡è¡¡æŠ€æœ¯ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è·å–å®æ—¶æ•°æ®å¹¶ä¸ºæ¯ä½ç”¨æˆ·æä¾›ä¸ªæ€§åŒ–ä½“éªŒè¿™å¾ˆé‡è¦ã€‚ &lt;strong&gt;Jennifer Lin&lt;/strong&gt;â€”â€”Google çš„ Istio äº§å“æ€»ç›‘&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;â€œæˆ‘ä»¬çš„åº”ç”¨åˆ†å¸ƒåœ¨å¤šä¸ªæ•°æ®ä¸­å¿ƒï¼Œå¾ˆé«˜å…´èƒ½å¤Ÿå°†è¯¥æŠ€æœ¯å†…ç½®åˆ°æˆ‘ä»¬çš„è´Ÿè½½å‡è¡¡å™¨ä¸­ï¼Œå®ƒèƒ½è‡ªåŠ¨æ„ŸçŸ¥å¹¶é€‰æ‹©æœ€å¿«çš„ç½‘ç»œè·¯å¾„â€ã€‚Angelo è¯´ã€‚â€œä»æ•…éšœè½¬ç§»çš„è§’åº¦æ¥çœ‹ï¼Œè¿™å¯¹æˆ‘ä»¬ä¹Ÿå¾ˆé‡è¦â€ã€‚&lt;/p&gt;
&lt;p&gt;å¹¶ä¸æ˜¯è¯´ä½¿ç”¨æœåŠ¡ç½‘ç»œæ—¶ä¸éœ€è¦æƒè¡¡ï¼Œç‰¹åˆ«æ˜¯å½“æ¶‰åŠåˆ° IT è¿ç»´äººå‘˜ä¸ç†Ÿæ‚‰é«˜çº§ç½‘ç»œæ¦‚å¿µç®¡ç†çš„å¤æ‚æ€§æ—¶ã€‚Angelo è¡¨ç¤ºï¼Œå¦‚æœç®¡ç†ä¸å½“ï¼Œé›†ä¸­å¼æ§åˆ¶å¹³é¢å¯èƒ½ä¼šæˆä¸ºå•ç‚¹æ•…éšœï¼Œå°½ç®¡ä¼ä¸šå¯ä»¥é€šè¿‡åœ¨å…¶æœåŠ¡ç½‘æ ¼è®¾è®¡ä¸­å¢åŠ å¼¹æ€§æ¥é™ä½è¿™ç§é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;â€œå¦‚æœåœ¨æœåŠ¡å‘ç°ä¸­å‘ç”Ÿäº†æŸäº›ä¸å¥½çš„äº‹æƒ…ï¼Œå‘ Linkerd èŠ‚ç‚¹æä¾›é™ˆæ—§çš„æ•°æ®æˆ–å…¶ä»–å†…å®¹ï¼Œè´Ÿè½½å‡è¡¡æ± ä¸­å­˜åœ¨é”™è¯¯çš„ä¸»æœºï¼Œåˆ™å³ä½¿æœåŠ¡å‘ç°ä¿¡æ¯ä¸æ­£ç¡®ï¼ŒLinkerd å¤±è´¥ç®—æ³•ä¹Ÿä¼šå°†å…¶ä»æ± ä¸­å–å‡ºï¼Œè¿™çœŸæ˜¯å¤ªæ£’äº†â€œï¼ŒAngelo è¯´ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä»–å…¬å¸çœ‹å¥½ Istio çš„é›†ä¸­åŒ–ç½‘ç»œç›‘æ§åŠŸèƒ½ï¼Œè®¡åˆ’åœ¨ Istio è¿›å…¥ GA çŠ¶æ€åè·Ÿè¿›ã€‚&lt;/p&gt;
&lt;p&gt;â€œæˆ‘ä»¬ä»ç„¶æœ‰ PHPã€Node å’Œ Go ä¸­ç¨‹åºä»£ç ï¼Œä»¥åŠä¸‰ç§ä¸åŒçš„æ–¹å¼æ¥æ”¶é›†æ—¥å¿—ï¼Œç›‘æ§æœåŠ¡å’Œè¿è¡ŒçŠ¶æ€â€ï¼ŒHarrison Harnisch è¯´é“ï¼Œä»–æ˜¯ä¸€åä½äºèŠåŠ å“¥çš„ Buffer å…¬å¸å‘˜å·¥ï¼Œè¯¥å…¬å¸æä¾›ä¸€ä¸ªç¾å›½çš„åˆ†å¸ƒå¼ç¤¾äº¤åª’ä½“ç®¡ç†å¹³å°ã€‚â€ä½†å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿé€šè¿‡æœåŠ¡ç½‘ç»œè·å¾—æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ç›¸åŒçš„æ¨¡å¼è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œå¹¶æ„å»ºæ¨¡æ¿ dashboard ä»¥ä¾¿è·¨å›¢é˜Ÿå…±äº«ï¼Œè¿™åœ¨ç°åœ¨å¾ˆéš¾åšåˆ°â€ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;istio-åˆ›é€ è€…å¯¹æœåŠ¡ç½‘æ ¼æœªæ¥çš„å±•æœ›&#34;&gt;Istio åˆ›é€ è€…å¯¹æœåŠ¡ç½‘æ ¼æœªæ¥çš„å±•æœ›&lt;/h3&gt;
&lt;p&gt;å³ä½¿åœ¨é“¶è¡Œä¸šç­‰ä¼ ç»Ÿè¡Œä¸šä¸­ï¼Œå¼€å‘äººå‘˜ä¹Ÿåœ¨åˆ›å»ºå¤æ‚çš„é¢å‘æ¶ˆè´¹è€…çš„åº”ç”¨ç¨‹åºï¼Œè¿™äº›åº”ç”¨ç¨‹åºçœ‹èµ·æ¥æ›´åƒæ˜¯ Google è¿™æ ·çš„å¤§è§„æ¨¡çš„ç½‘ç»œåº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;â€œé‡è¦çš„æ˜¯ï¼Œä»–ä»¬æœ‰å®æ—¶æ•°æ®ï¼Œå¹¶ä¸”ä»–ä»¬ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ä¸ªæ€§åŒ–ä½“éªŒâ€ï¼Œè°·æ­Œ Istio äº§å“ç®¡ç†æ€»ç›‘ Jennifer Lin è¯´ã€‚â€œè¿™éœ€è¦ä¸€ä¸ªæ›´ç»†ç²’åº¦çš„æœåŠ¡é›†ï¼Œå…è®¸è¿™äº›åˆ›æ–°çš„åº”ç”¨ç¨‹åºä»¥å®‰å…¨çš„æ–¹å¼ä»¥æä½çš„å»¶è¿Ÿå¤„ç†å¤§è§„æ¨¡çš„æµé‡â€ ã€‚&lt;/p&gt;
&lt;p&gt;IBM å·¥ç¨‹å¸ˆ Daniel Berg è¯´ï¼Œç²¾ç»†çš„æµé‡è·¯ç”±å’Œå®‰å…¨ç­–ç•¥ä¹Ÿå°†æˆä¸º IBM æ¨å‡ºçš„åŸºäº Istio çš„æ··åˆäº‘æ¦‚å¿µçš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼Œå¹¶å°†ç”¨äºç®¡ç†ç§æœ‰äº‘å’Œå…¬æœ‰äº‘ä¸­çš„å¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;â€œå®¢æˆ·å°†éœ€è¦ä¸€ä¸ªç½‘æ ¼æ¥å¸®åŠ©ç»„ç»‡å’Œç®¡ç†ä¼ ç»Ÿåº”ç”¨å‘äº‘åŸç”Ÿåº”ç”¨ç¨‹åºä¹‹é—´è½¬æ¢æ‰€å¸¦æ¥çš„å¤æ‚æ€§â€ï¼ŒBerg è¯´ã€‚â€œå¦‚æœæ‚¨å¼€å§‹ä¸€å°†ç½‘æ ¼ä½œä¸ºåº”ç”¨ç¨‹åºçš„ä¸€éƒ¨åˆ†ï¼Œå½“æ‚¨å°†å…¶ç§»æ¤åˆ°å¦ä¸€ä¸ªæœªä½¿ç”¨è¯¥ç½‘æ ¼çš„ä¾›åº”å•†ä¸­æ—¶ï¼Œå°½ç®¡å®ƒä»å¯ä»¥è¿è¡Œï¼Œä½†ä¼šå¾—åˆ°å®Œå…¨æ— æ³•é¢„æœŸçš„ç»“æœï¼Œè¿™ç§åšæ³•æ˜¯ä¸å¯å–çš„â€œã€‚&lt;/p&gt;
&lt;p&gt;ä½† Envoy çš„é«˜çº§è½¯ä»¶å·¥ç¨‹å¸ˆ Matt Klein è¡¨ç¤ºï¼Œä¸»æµä¼ä¸šæœ€æœ‰å¯èƒ½ç­‰åˆ°æœåŠ¡ç½‘æ ¼æˆä¸º&lt;a href=&#34;https://searchitoperations.techtarget.com/tip/Container-as-a-service-providers-compete-with-distinct-strategies&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…¬æœ‰äº‘å®¹å™¨æœåŠ¡å’Œ PaaS äº§å“çš„ä¸€éƒ¨åˆ†&lt;/a&gt;æ—¶æ‰å¼€å§‹çœŸæ­£ä½¿ç”¨å®ƒï¼Œè¿™ä¸ Gartner çš„ Thomas çš„é¢„æµ‹ç›¸å‘¼åº”ã€‚&lt;/p&gt;
&lt;p&gt;â€œä½ å¯ä»¥æƒ³è±¡å®ƒå¯ä»¥åƒ AWS Fargate é‚£æ ·å·¥ä½œï¼Œä¸ºæ¯ä¸ªç”¨æˆ·å‡½æ•°æˆ–å®¹å™¨æ—è‡ªåŠ¨æ³¨å…¥ä¸€ä¸ªå¦‚ Envoy è¿™æ ·çš„ä»£ç†ï¼Œè€Œä¸”ç”¨æˆ·åªéœ€è¦äº†è§£è¿™äº›åŠŸèƒ½è€Œæ— éœ€å…³å¿ƒå®ƒä»¬æ˜¯å¦‚ä½•å®ç°çš„â€œ ï¼ŒKlein è¯´ã€‚â€œå®ƒä»¬å¯ä»¥è·å¾—æœåŠ¡ç½‘æ ¼æä¾›åŠŸèƒ½ï¼Œä½†å¯¹é‚£åˆ°åº•æ˜¯ä¸æ˜¯æœåŠ¡ç½‘æ ¼å¹¶ä¸é‡è¦â€ã€‚&lt;/p&gt;
&lt;p&gt;Klein è¯´ï¼Œä¹Ÿæœ‰äººçŒœæµ‹è¿‡åº¦åˆ°è¿™ç§çŠ¶æ€æœåŠ¡éœ€è¦å¤šé•¿æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;Klein è¯´ï¼šâ€œåœ¨å…¬å…±äº‘ä¸­æŸç§æŠ€æœ¯æˆç†Ÿå¤§çº¦éœ€è¦ 10 åˆ° 20 å¹´çš„æ—¶é—´ï¼Œå¯¹äºåƒå¾®è½¯ Azureã€Google äº‘å¹³å°å’Œäºšé©¬é€Šè¿™æ ·ç™¾å¹´ä¼ä¸šï¼Œæˆ‘ä»¬æ­£å¤„äºè¯¥è¿‡ç¨‹çš„åˆçº§é˜¶æ®µâ€ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kubernetes å’Œ Istio å¯¹åŸºäºå®¹å™¨åŸºç¡€è®¾æ–½çš„å…¨é¢æœåŠ¡ç›‘æ§</title>
      <link>https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/</link>
      <pubDate>Wed, 04 Jul 2018 17:54:13 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://www.circonus.com/2018/06/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿è¥å®¹å™¨åŒ–åŸºç¡€è®¾æ–½ç»™æˆ‘ä»¬å¸¦æ¥äº†ä¸€ç³»åˆ—æ–°çš„æŒ‘æˆ˜ã€‚æ‚¨éœ€è¦å¯¹å®¹å™¨è¿›è¡Œæµ‹è¯•ï¼Œè¯„ä¼°æ‚¨çš„ API ç«¯ç‚¹æ€§èƒ½ï¼Œå¹¶ç¡®å®šæ‚¨çš„åŸºç¡€æ¶æ„ä¸­çš„ä¸è‰¯çš„ç»„ä»¶ã€‚Istio æœåŠ¡ç½‘æ ¼å¯åœ¨ä¸æ›´æ”¹ä»£ç çš„æƒ…å†µä¸‹å®ç° API çš„æ£€æµ‹ï¼Œå¹¶ä¸”å¯ä»¥è‡ªç”±çš„è®¾ç½®æœåŠ¡å»¶è¿Ÿã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•ç†è§£æ‰€æœ‰è¿™äº›æ•°æ®ï¼Ÿç”¨æ•°å­¦çš„æ–¹å¼ï¼Œå¯¹ï¼Œå°±æ˜¯è¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;Circonus æ˜¯ Istio çš„ç¬¬ä¸€ä¸ªç¬¬ä¸‰æ–¹é€‚é…å™¨ã€‚åœ¨ &lt;a href=&#34;https://www.circonus.com/2017/12/circonus-istio-mixer-adapter/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¹‹å‰çš„æ–‡ç« ä¸­&lt;/a&gt;ï¼Œæˆ‘ä»¬è®¨è®ºäº†ç¬¬ä¸€ä¸ªç”¨äºç›‘è§†åŸºäº Istio çš„æœåŠ¡çš„ Istio ç¤¾åŒºé€‚é…å™¨ã€‚è¿™ç¯‡æ–‡ç« å°†å¯¹æ­¤è¿›è¡Œæ‰©å±•ã€‚æˆ‘ä»¬å°†è§£é‡Šå¦‚ä½•å…¨é¢äº†è§£æ‚¨çš„ Kubernetes åŸºç¡€è®¾æ–½ã€‚æˆ‘ä»¬è¿˜å°†è§£é‡Šå¦‚ä½•ä¸ºåŸºäºå®¹å™¨çš„åŸºç¡€æ¶æ„å¢åŠ  Istio æœåŠ¡ç½‘æ ¼å®ç°ã€‚&lt;/p&gt;
&lt;h1 id=&#34;istio-æ¦‚è¿°&#34;&gt;Istio æ¦‚è¿°&lt;/h1&gt;
&lt;p&gt;Istio æ˜¯ Kubernetes çš„æœåŠ¡ç½‘æ ¼ï¼Œè¿™æ„å‘³ç€å®ƒè´Ÿè´£æ‰€æœ‰æœåŠ¡ä¹‹é—´çš„é€šä¿¡å’Œåè°ƒï¼Œå°±åƒç½‘ç»œè·¯ç”±è½¯ä»¶ä¸º TCP/IP æµé‡æ‰€åšçš„ä¸€æ ·ã€‚é™¤äº† Kubernetes ä¹‹å¤–ï¼ŒIstio è¿˜å¯ä»¥ä¸åŸºäº Docker å’Œ Consul çš„æœåŠ¡è¿›è¡Œäº¤äº’ã€‚ä¸ &lt;a href=&#34;https://linkerd.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LinkerD&lt;/a&gt; ç›¸ä¼¼ï¼ŒIstio å·²ç»çš„å‡ºç°å·²ç»æœ‰å¾ˆé•¿æ—¶é—´äº†ã€‚&lt;/p&gt;
&lt;p&gt;Istio æ˜¯ç”± Googleã€IBMã€æ€ç§‘å’Œ Lyft çš„ &lt;a href=&#34;https://www.circonus.com/2018/06/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/envoy.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt; å¼€å‘çš„å¼€æºé¡¹ç›®ã€‚è¯¥é¡¹ç›®å·²ç»æœ‰ä¸€å¹´å¤šçš„å†å²äº†ï¼Œè€Œ Istio å·²ç»è¿›å…¥äº†å¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒï¼ˆæœ‰æ¡ˆä¾‹å—ï¼Ÿè¯‘è€…æ³¨ï¼‰ã€‚åœ¨è¿™ç¯‡æ–‡ç« å‘å¸ƒæ—¶ï¼Œ&lt;a href=&#34;https://istio.io/about/notes/0.8/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å½“å‰ç‰ˆæœ¬ä¸º 0.8&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼ŒIstio æ˜¯å¦‚ä½•èå…¥ Kubernetes ç”Ÿæ€ç³»ç»Ÿçš„ï¼ŸKubernetes å……å½“æ•°æ®å±‚ï¼ŒIstio å……å½“&lt;a href=&#34;https://istio.io/docs/concepts/what-is-istio/overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ§åˆ¶å±‚&lt;/a&gt;ã€‚Kubernetes   æ‰¿è½½åº”ç”¨ç¨‹åºæµé‡ã€å¤„ç†å®¹å™¨ç¼–æ’ã€éƒ¨ç½²å’Œæ‰©å±•ã€‚Istio è·¯ç”±åº”ç”¨ç¨‹åºæµé‡ï¼Œå¤„ç†ç­–ç•¥æ‰§è¡Œï¼Œæµé‡ç®¡ç†å’Œè´Ÿè½½å‡è¡¡ã€‚å®ƒè¿˜å¤„ç†é¥æµ‹ï¼Œå¦‚æŒ‡æ ‡ã€æ—¥å¿—å’Œè·Ÿè¸ªã€‚Istio æ˜¯åŸºäºå®¹å™¨çš„åŸºç¡€è®¾æ–½ä¸­è´Ÿè´£ä¿æŠ¤å¾®æœåŠ¡å’ŒæŠ¥å‘Šçš„éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugpbmcj20go0bc0t7_hu_315fa9a3764cf8af.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugpbmcj20go0bc0t7_hu_ae402aa3dd0f4be5.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugpbmcj20go0bc0t7_hu_c38b1e17f2d729c9.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugpbmcj20go0bc0t7_hu_315fa9a3764cf8af.webp&#34;
               width=&#34;600&#34;
               height=&#34;408&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¾ç¤ºäº†æœåŠ¡ç½‘æ ¼æ¶æ„ã€‚Istio ä¸ºæ¯é¡¹æœåŠ¡éƒ¨ç½²äº†ä¸€ä¸ª &lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;envoy sidecar proxy&lt;/a&gt;ã€‚Envoy é€šè¿‡ gRPC è°ƒç”¨ä»£ç†åˆ° Istio Mixer æœåŠ¡çš„å…¥ç«™è¯·æ±‚ã€‚ç„¶åï¼ŒMixer åº”ç”¨æµé‡ç®¡ç†è§„åˆ™ï¼Œå¹¶è”åˆè¯·æ±‚é¥æµ‹ã€‚Mixer æ˜¯ Istio çš„å¤§è„‘ã€‚è¿ç»´äººå‘˜å¯ä»¥ç¼–å†™ YAML æ–‡ä»¶æ¥æ§åˆ¶ Envoy å¦‚ä½•é‡å®šå‘æµé‡ã€‚ä»–ä»¬è¿˜å¯ä»¥æŒ‡å®šç›‘æµ‹ä¿¡æ¯æ¨é€å’Œå¯è§‚æµ‹æ€§ç³»ç»Ÿçš„é¥æµ‹æŠ€æœ¯ã€‚å¯ä»¥åœ¨è¿è¡Œæ—¶æ ¹æ®éœ€è¦åº”ç”¨è§„åˆ™ï¼Œè€Œæ— éœ€é‡æ–°å¯åŠ¨ä»»ä½• Istio ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;Istio æ”¯æŒå¤šç§é€‚é…å™¨å°†æ•°æ®å‘é€åˆ°å„ç§ç›‘æ§å·¥å…·ã€‚åŒ…æ‹¬ Prometheusã€Circonus æˆ– Statsdã€‚æ‚¨ä¹Ÿå¯ä»¥åŒæ—¶å¯ç”¨ Zipkin å’Œ Jaeger è¿½è¸ªã€‚è€Œä¸”ï¼Œæ‚¨å¯ä»¥æŠŠå¯è§†åŒ–æ‰€æ¶‰åŠçš„æœåŠ¡ç”Ÿæˆå›¾å½¢ã€‚&lt;/p&gt;
&lt;p&gt;Istio æ˜“äºéƒ¨ç½²ã€‚&lt;a href=&#34;https://istio.io/docs/setup/kubernetes/quick-start/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å›æƒ³èµ·æ¥&lt;/a&gt;ï¼Œå¤§çº¦ 7 åˆ° 8 ä¸ªæœˆä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»é€šè¿‡ä¸€ç³»åˆ— kubectl å‘½ä»¤æ‰èƒ½å°† Istio å®‰è£…åˆ° Kubernetes é›†ç¾¤ä¸Šã€‚è™½ç„¶ä½ ä»ç„¶å¯ä»¥è¿™æ ·åšï¼Œä½†æ˜¯ç°åœ¨æˆ‘ä»¬è¿˜å¯ä»¥åœ¨ Google Cloud platformï¼Œåªéœ€ç‚¹å‡»å‡ ä¸‹é¼ æ ‡å³å¯éƒ¨ç½²å¯ç”¨äº† Istio çš„ Kubernetes é›†ç¾¤ï¼Œå…¶ä¸­åŒ…æ‹¬ç›‘æ§ã€è·Ÿè¸ªå’Œç¤ºä¾‹åº”ç”¨ç¨‹åºã€‚æ‚¨å¯ä»¥å¿«é€Ÿçš„éƒ¨ç½² Istioï¼Œç„¶åä½¿ç”¨ istioctl å‘½ä»¤æ¥æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªå¥½å¤„æ˜¯æˆ‘ä»¬å¯ä»¥ä»æœåŠ¡ä¸­æ”¶é›†æ•°æ®ï¼Œè€Œä¸éœ€è¦å¼€å‘äººå‘˜å¯¹æœåŠ¡è¿›è¡Œæµ‹è¯•æ‰èƒ½æä¾›æ•°æ®ã€‚è¿™æœ‰å¾ˆå¤šå¥½å¤„ã€‚è¿™å‡å°‘äº†ç»´æŠ¤çš„å·¥ä½œé‡ï¼Œæ¶ˆé™¤äº†ä»£ç ä¸­çš„å¤±è´¥ç‚¹ã€‚è¿™æ ·å¯ä»¥æä¾›äº†ä¾›åº”å•†ä¸å¯çŸ¥çš„æ¥å£ï¼Œå‡å°‘äº†ä¸ä¾›åº”å•†ç»‘å®šçš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;å€ŸåŠ© Istioï¼Œæˆ‘ä»¬å¯ä»¥éƒ¨ç½²ä¸åŒç‰ˆæœ¬çš„æœåŠ¡å¹¶åŠ æƒå®ƒä»¬ä¹‹é—´çš„æµé‡ã€‚Istio æœ¬èº«ä½¿ç”¨å¤šä¸ªä¸åŒçš„ pod æ¥æ“ä½œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; kubectl get pods -n istio-system
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;NAME                     READY STATUS  RESTARTS AGE
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-ca-797dfb66c5      1/1   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-ingress-84f75844c4 1/1   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-egress-29a16321d3  1/1   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-mixer-9bf85fc68    3/3   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-pilot-575679c565   2/2   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;grafana-182346ba12       2/2   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;prometheus-837521fe34    2/2   Running  &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;       2m
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;Istio ä¸å®Œå…¨æ˜¯è½»é‡çº§çš„ã€‚Istio çš„å¼ºå¤§åŠŸèƒ½å’Œçµæ´»æ€§æ¥æºäºä¸€äº›è¿ç»´æˆæœ¬ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºä¸­åŒ…å«å¤šä¸ªå¾®æœåŠ¡ï¼Œé‚£ä¹ˆæ‚¨çš„åº”ç”¨ç¨‹åºå®¹å™¨å°†å¾ˆå¿«è¶…è¿‡ç³»ç»Ÿé…ç½®çš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æœåŠ¡çº§åˆ«ç›®æ ‡slo&#34;&gt;æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰&lt;/h1&gt;
&lt;p&gt;æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰çš„ç®€è¦æ¦‚è¿°å°†ä¸ºæˆ‘ä»¬è¡¡é‡æœåŠ¡çš„å¥åº·çŠ¶å†µå¥ å®šåŸºç¡€ã€‚æœåŠ¡çº§åˆ«åè®®ï¼ˆSLAï¼‰çš„æ¦‚å¿µå·²ç»å­˜åœ¨äº†è‡³å°‘åå¹´äº†ã€‚ä½†ç›´åˆ°æœ€è¿‘ç½‘ä¸Šå…³äºæœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰å’ŒæœåŠ¡çº§åˆ«æŒ‡æ ‡ï¼ˆSLIï¼‰ç›¸å…³çš„å†…å®¹æ•°é‡æ‰è¿…é€Ÿå¢åŠ ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è‘—åçš„ &lt;a href=&#34;https://landing.google.com/sre/book.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google SRE ä¹¦ä»¥å¤–&lt;/a&gt;ï¼Œä¸¤æœ¬å…³äº SLO çš„æ–°ä¹¦å³å°†å‘å¸ƒã€‚&lt;a href=&#34;https://www.amazon.com/Site-Reliability-Workbook-Practical-Implement/dp/1492029505&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;â€œç«™ç‚¹å¯é æ€§å·¥ä½œæ‰‹å†Œâ€&lt;/a&gt;æœ‰å…³äº SLO çš„ä¸“é—¨ç« èŠ‚ï¼Œ&lt;a href=&#34;http://shop.oreilly.com/product/0636920063964.do&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Seeking SRE&lt;/a&gt; ä¸­æœ‰å…³äºç”± Circonus åˆ›å§‹äººå…¼é¦–å¸­æ‰§è¡Œå®˜ Theo Schlossnagle å®šä¹‰ SLO ç›®æ ‡çš„ç« èŠ‚ã€‚æˆ‘ä»¬è¿˜å»ºè®®è§‚çœ‹&lt;a href=&#34;https://twitter.com/sethvargo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Seth Vargo&lt;/a&gt; å’Œ &lt;a href=&#34;https://twitter.com/lizthegrey&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Liz Fong Jones&lt;/a&gt; çš„ YouTube è§†é¢‘ &lt;a href=&#34;https://youtu.be/tEylFyxbDLE&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;â€œSLIã€SLOã€SLAï¼Œæˆ‘çš„å¤©å‘ï¼â€&lt;/a&gt;ï¼Œä»¥æ·±å…¥äº†è§£ SLIã€SLO å’Œ SLA ä¹‹é—´çš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼š&lt;strong&gt;SLI é©±åŠ¨ SLOï¼Œé€šçŸ¥ SLA&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡çº§åˆ«æŒ‡æ ‡ï¼ˆSLIï¼‰æ˜¯è¡¡é‡æœåŠ¡å¥åº·çŠ¶å†µçš„æŒ‡æ ‡ã€‚ä¾‹å¦‚ï¼Œæˆ‘å¯ä»¥æœ‰ä¸€ä¸ª SLIï¼Œå®ƒè¡¨ç¤ºåœ¨è¿‡å» 5 åˆ†é’Ÿå†…ï¼Œæˆ‘çš„ 95% ä¸»é¡µè¯·æ±‚å»¶è¿Ÿåº”å°äº 300 æ¯«ç§’ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡çº§åˆ«ç›®æ ‡ï¼ˆSLOï¼‰æ˜¯ SLI çš„ç›®æ ‡æˆ–æŒ‡æ ‡ã€‚æˆ‘ä»¬é‡‡ç”¨ SLIï¼Œå¹¶æ‰©å±•å…¶èŒƒå›´ä»¥é‡åŒ–æˆ‘ä»¬æœŸæœ›çš„æœåŠ¡åœ¨æˆ˜ç•¥æ—¶é—´é—´éš”å†…æ‰§è¡Œçš„æƒ…å†µã€‚ä½¿ç”¨å‰é¢ä¾‹å­ä¸­çš„ SLIï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼Œæˆ‘ä»¬å¸Œæœ›æ»¡è¶³ SLI ä¸ºåç»­å¹´ä»½çª—å£è®¾ç½®çš„æ ‡å‡†çš„ 99.9ï¼…ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡çº§åˆ«åè®®ï¼ˆSLAï¼‰æ˜¯ä¼ä¸šä¸å®¢æˆ·ä¹‹é—´çš„åè®®ï¼Œå®šä¹‰äº†æœªèƒ½æ»¡è¶³ SLO çš„åæœã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ‚¨çš„ SLA æ‰€ä¾æ®çš„ SLO å°†æ¯”æ‚¨çš„å†…éƒ¨ SLO æ›´å®½æ¾ï¼Œå› ä¸ºæˆ‘ä»¬å¸Œæœ›å†…éƒ¨é¢å‘çš„ç›®æ ‡æ¯”æˆ‘ä»¬çš„å¤–éƒ¨ç›®æ ‡æ›´ä¸ºä¸¥æ ¼ã€‚&lt;/p&gt;
&lt;h1 id=&#34;red-ä»ªè¡¨æ¿&#34;&gt;RED ä»ªè¡¨æ¿&lt;/h1&gt;
&lt;p&gt;SLI çš„å“ªäº›ç»„åˆæœ€é€‚åˆé‡åŒ–ä¸»æœºå’ŒæœåŠ¡å¥åº·çŠ¶æ€ï¼Ÿåœ¨è¿‡å»å‡ å¹´ä¸­ï¼Œå‡ºç°äº†ä¸€äº›æ–°å…´çš„æ ‡å‡†ã€‚æœ€é«˜æ ‡å‡†æ˜¯ USE æ–¹æ³•ï¼ŒRED æ–¹æ³•å’Œ Google SRE æ‰‹å†Œä¸­è®¨è®ºçš„â€œå››ä¸ªé»„é‡‘ä¿¡å·â€ã€‚&lt;/p&gt;
&lt;p&gt;Brendan Gregg ä»‹ç»äº† &lt;a href=&#34;http://www.brendangregg.com/usemethod.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;USE æ–¹æ³•&lt;/a&gt;ï¼Œè¯¥&lt;a href=&#34;http://www.brendangregg.com/usemethod.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ–¹æ³•&lt;/a&gt;æ—¨åœ¨æ ¹æ®åˆ©ç”¨ç‡ã€é¥±å’Œåº¦å’Œé”™è¯¯æŒ‡æ ‡é‡åŒ–ç³»ç»Ÿä¸»æœºçš„å¥åº·çŠ¶å†µã€‚å¯¹äºåƒ CPU è¿™æ ·çš„äº§å“ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç”¨æˆ·ã€ç³»ç»Ÿå’Œé—²ç½®ç™¾åˆ†æ¯”ä½œä¸ºå¸¸è§çš„åˆ©ç”¨ç‡æŒ‡æ ‡ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¹³å‡è´Ÿè½½é‡å’Œè¿è¡Œé˜Ÿåˆ—è¿›è¡Œé¥±å’Œåº¦çš„åˆ¤å®šã€‚UNIX perf åˆ†æå™¨æ˜¯æµ‹é‡ CPU é”™è¯¯äº‹ä»¶çš„å¥½å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;Tom Wilkie å‡ å¹´å‰ä»‹ç»äº† &lt;a href=&#34;https://www.weave.works/blog/the-red-method-key-metrics-for-microservices-architecture/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RED æ–¹æ³•&lt;/a&gt;ã€‚æˆ‘ä»¬ä½¿ç”¨ RED æ–¹æ³•ç›‘æ§è¯·æ±‚ç‡ã€è¯·æ±‚é”™è¯¯å’Œè¯·æ±‚æŒç»­æ—¶é—´ã€‚Google SRE æ‰‹å†Œè®¨è®ºäº†å¦‚ä½•ä½¿ç”¨å»¶è¿Ÿã€æµé‡ã€é”™è¯¯å’Œé¥±å’Œåº¦æŒ‡æ ‡ã€‚è¿™äº›â€œ &lt;a href=&#34;https://landing.google.com/sre/book/chapters/monitoring-distributed-systems.html#xref_monitoring_golden-signals&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å››ä¸ªé»„é‡‘ä¿¡å·&lt;/a&gt; â€ä»¥æœåŠ¡å¥åº·ä¸ºç›®æ ‡ï¼Œä¸ RED æ–¹æ³•ç±»ä¼¼ï¼Œä½†å®ƒæ·»åŠ äº†é¥±å’Œåº¦æŒ‡æ ‡ã€‚åœ¨å®è·µä¸­ï¼Œå¯èƒ½éš¾ä»¥é‡åŒ–æœåŠ¡é¥±å’Œåº¦ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œå¦‚ä½•ç›‘æ§å®¹å™¨ï¼Ÿå®¹å™¨æ˜¯çŸ­æš‚å®ä½“ã€‚ç›´æ¥ç›‘è§†å®ƒä»¬æ¥è¾¨è¯†æœåŠ¡çš„å¥åº·çŠ¶æ€ä¼šå¸¦æ¥è®¸å¤šå¤æ‚é—®é¢˜ï¼Œä¾‹å¦‚é«˜åŸºæ•°é—®é¢˜ã€‚ç»¼åˆç›‘æ§è¿™äº›å®¹å™¨çš„æœåŠ¡è¾“å‡ºä¼šæ›´å®¹æ˜“å’Œæ›´æœ‰æ•ˆã€‚å¦‚æœæœåŠ¡æ˜¯å¥åº·çš„ï¼Œé‚£ä¹ˆä¸å¿…åœ¨ä¹å•ä¸ªå®¹å™¨æ˜¯å¼‚å¸¸ã€‚æœåŠ¡ç¼–æ’æ¡†æ¶å¯èƒ½å°†è¿™ä¸ªå®¹å™¨é©±é€ï¼Œå¹¶ç”¨æ–°çš„å®¹å™¨å–è€Œä»£ä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ€è€ƒä¸‹å¦‚ä½•æŠŠ Istio çš„ SLI é›†æˆåˆ° RED ä»ªè¡¨æ¿ã€‚ä¸ºäº†ç»„æˆæˆ‘ä»¬çš„ RED ä»ªè¡¨æ¿ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Istio æä¾›çš„é¥æµ‹è®°å½•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯·æ±‚æŒ‰å“åº”ä»£ç è®¡æ•°&lt;/li&gt;
&lt;li&gt;è¯·æ±‚æ—¶é•¿&lt;/li&gt;
&lt;li&gt;è¯·æ±‚å¤§å°&lt;/li&gt;
&lt;li&gt;å“åº”å¤§å°&lt;/li&gt;
&lt;li&gt;è¿æ¥æ”¶åˆ°çš„å­—èŠ‚&lt;/li&gt;
&lt;li&gt;è¿æ¥å‘é€å­—èŠ‚&lt;/li&gt;
&lt;li&gt;è¿æ¥æ—¶é—´&lt;/li&gt;
&lt;li&gt;åŸºäºæ¨¡æ¿çš„å…ƒæ•°æ®ï¼ˆåº¦é‡æ ‡ç­¾ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Istio æä¾›äº†æœ‰å…³å®ƒæ”¶åˆ°çš„è¯·æ±‚ï¼Œäº§ç”Ÿå“åº”çš„å»¶è¿Ÿå’Œè¿æ¥çº§åˆ«æ•°æ®çš„å‡ ä¸ªæŒ‡æ ‡ã€‚è¯·æ³¨æ„ä¸Šé¢åˆ—è¡¨ä¸­çš„å‰ä¸¤é¡¹ï¼›æˆ‘ä»¬å¸Œæœ›å°†å®ƒä»¬åŒ…å«åœ¨æˆ‘ä»¬çš„ RED ä»ªè¡¨æ¿ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;Istio è¿˜èµ‹äºˆæˆ‘ä»¬æ·»åŠ åº¦é‡æ ‡ç­¾çš„èƒ½åŠ›ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„å°ºå¯¸ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸»æœºã€é›†ç¾¤ç­‰æ¥åˆ†è§£é¥æµ‹ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è·å–è¯·æ±‚è®¡æ•°çš„ä¸€é˜¶å¯¼æ•°æ¥è·å¾—æ¯ç§’è¯·æ±‚çš„é€Ÿç‡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¯·æ±‚ä¸æˆåŠŸçš„è¯·æ±‚è®¡æ•°çš„å¯¼æ•°æ¥è·å¾—é”™è¯¯ç‡ã€‚Istio è¿˜å‘æˆ‘ä»¬æä¾›æ¯ä¸ªè¯·æ±‚çš„å»¶è¿Ÿï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥è®°å½•æ¯ä¸ªæœåŠ¡è¯·æ±‚å®Œæˆçš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼ŒIstio ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ª Grafana ä»ªè¡¨æ¿ï¼Œå®ƒåŒ…å«æˆ‘ä»¬æƒ³è¦çš„éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh33fcj20go08k77r_hu_5f5b66b8161b81b3.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh33fcj20go08k77r_hu_72aca79bebda94dd.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh33fcj20go08k77r_hu_49dad0504af1e89d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh33fcj20go08k77r_hu_5f5b66b8161b81b3.webp&#34;
               width=&#34;600&#34;
               height=&#34;308&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æƒ³è¦çš„ç»„ä»¶åœ¨ä¸Šé¢çš„å±å¹•æˆªå›¾ä¸­ä»¥çº¢è‰²åœˆèµ·æ¥ã€‚æˆ‘ä»¬åœ¨å·¦ä¸Šè§’çš„æ¯ç§’æ“ä½œè¯·æ±‚ç‡ï¼Œå³ä¸Šè§’çš„æ¯ç§’å¤±è´¥è¯·æ±‚æ•°ï¼Œä»¥åŠåº•éƒ¨çš„å“åº”æ—¶é—´å›¾ã€‚è¿™å¼ å›¾ä¸Šè¿˜æœ‰å…¶ä»–å‡ ä¸ªæŒ‡æ ‡ï¼Œä½†è®©æˆ‘ä»¬ä»”ç»†çœ‹çœ‹æˆ‘ä»¬åœˆå‡ºçš„é‚£äº›æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh936hj20go081778_hu_a992bb08225eda3c.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh936hj20go081778_hu_e30ddc455286609e.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh936hj20go081778_hu_42b811901dadbba9.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh936hj20go081778_hu_a992bb08225eda3c.webp&#34;
               width=&#34;600&#34;
               height=&#34;289&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šå±å¹•æˆªå›¾æ˜¾ç¤ºäº†ä»ªè¡¨æ¿çš„é€Ÿç‡ç»„ä»¶ã€‚è¿™éå¸¸ç®€å•ã€‚æˆ‘ä»¬è®¡ç®—è¿”å› 200 å“åº”ä»£ç çš„è¯·æ±‚æ•°ï¼Œå¹¶ç»˜åˆ¶ä¸€æ®µæ—¶é—´å†…çš„é€Ÿç‡å›¾ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhs1lwj20go089mzq_hu_39627b37fbea958a.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhs1lwj20go089mzq_hu_96c292c9b38c3e67.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhs1lwj20go089mzq_hu_4f83d6c399844bce.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhs1lwj20go089mzq_hu_39627b37fbea958a.webp&#34;
               width=&#34;600&#34;
               height=&#34;297&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Istio ä»ªè¡¨æ¿ä¸ºè¿”å› 5xx é”™è¯¯ä»£ç çš„å“åº”åšäº†ç±»ä¼¼çš„æ“ä½œã€‚åœ¨ä¸Šé¢çš„å±å¹•æˆªå›¾ä¸­ï¼Œæ‚¨å¯ä»¥çœ‹åˆ°å®ƒå¦‚ä½•é€šè¿‡ ingress controller æˆ– productpage é¡µé¢æœ¬èº«çš„é”™è¯¯æ¥åˆ†è§£é”™è¯¯ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhdtxwj20go08ywjw_hu_aede276ca68b6b52.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhdtxwj20go08ywjw_hu_cd31ef1629992ce6.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhdtxwj20go08ywjw_hu_4f296124deb76d0d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhdtxwj20go08ywjw_hu_aede276ca68b6b52.webp&#34;
               width=&#34;600&#34;
               height=&#34;322&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¯¥å±å¹•æˆªå›¾æ˜¾ç¤ºäº†è¯·æ±‚æŒç»­æ—¶é—´å›¾ã€‚æ­¤å›¾æ˜¯å…³äºæˆ‘ä»¬æœåŠ¡çš„å¥åº·çŠ¶å†µçš„æœ€ä¸°å¯Œä¿¡æ¯ã€‚è¿™äº›æ•°æ®ç”± Prometheus ç›‘æµ‹ç³»ç»Ÿæä¾›ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¯·æ±‚æ—¶é—´ç™¾åˆ†ç‚¹ï¼ŒåŒ…æ‹¬ä¸­ä½æ•°ï¼Œç¬¬ 90,95 å’Œç¬¬ 99 ç™¾åˆ†ä½ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›ç™¾åˆ†æ¯”ä¸ºæˆ‘ä»¬æä¾›äº†æœåŠ¡å¦‚ä½•æ‰§è¡Œçš„å…¨é¢æŒ‡ç¤ºã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•å­˜åœ¨ä¸€äº›å€¼å¾—ç ”ç©¶çš„ç¼ºé™·ã€‚åœ¨ä½æ´»åŠ¨æœŸé—´ï¼Œç”±äºæ ·æœ¬æ•°é‡æœ‰é™ï¼Œè¿™äº›ç™¾åˆ†ä½æ•°å¯èƒ½ä¼šå¤§å¹…åç¦»ã€‚è¿™å¯èƒ½ä¼šè¯¯å¯¼æ‚¨å…³äºè¿™äº›æƒ…å†µä¸‹çš„ç³»ç»Ÿæ€§èƒ½ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹è¿™ç§æ–¹æ³•å¯èƒ½å‡ºç°çš„å…¶ä»–é—®é¢˜ï¼š&lt;/p&gt;
&lt;p&gt;æ—¶é—´å‘¨æœŸé—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç™¾åˆ†ä½æ•°æ˜¯å›ºå®šæ—¶é—´çª—å£ä¸Šçš„èšåˆæŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;é›†ç¾¤å¥åº·æ— æ³•é‡æ–°æ±‡æ€»ç™¾åˆ†ä½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;ç™¾åˆ†ä½ä¸èƒ½è¢«å¹³å‡ï¼ˆè¿™æ˜¯ä¸€ä¸ªå¸¸è§çš„é”™è¯¯ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è¿™ç§æ–¹æ³•å­˜å‚¨çš„èšåˆæ˜¯è¾“å‡ºï¼Œè€Œä¸æ˜¯è¾“å…¥ã€‚&lt;/li&gt;
&lt;li&gt;ç”¨è¿™ç§æ–¹æ³•æµ‹é‡é›†ç¾¤ SLI æ˜¯å¾ˆå›°éš¾çš„ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç™¾åˆ†ä½æ•°é€šå¸¸æ¯”å¹³å‡æ•°æä¾›æ›´æ·±çš„æ´å¯ŸåŠ›ï¼Œå› ä¸ºå®ƒä»¬ç”¨å¤šä¸ªæ•°æ®ç‚¹è€Œä¸æ˜¯ä¸€ä¸ªæ•°æ®ç‚¹æ¥è¡¨ç¤ºæ•°å€¼èŒƒå›´ã€‚ä½†æ˜¯åƒå¹³å‡å€¼ä¸€æ ·ï¼Œç™¾åˆ†ä½æ•°æ˜¯ä¸€ä¸ªæ±‡æ€»æŒ‡æ ‡ã€‚å®ƒä»¬æ˜¯é’ˆå¯¹å›ºå®šæ•°æ®é›†åœ¨å›ºå®šæ—¶é—´çª—å£ä¸Šè®¡ç®—çš„ã€‚å¦‚æœæˆ‘ä»¬è®¡ç®—ä¸€ä¸ªé›†ç¾¤æˆå‘˜çš„æŒç»­æ—¶é—´ç™¾åˆ†æ¯”ï¼Œæˆ‘ä»¬ä¸èƒ½å°†å…¶ä¸å¦ä¸€ä¸ªé›†ç¾¤æˆå‘˜åˆå¹¶ï¼Œä»¥è·å¾—æ•´ä¸ªé›†ç¾¤çš„èšåˆæ€§èƒ½æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;æ™®éçš„è¯¯è§£æ˜¯ç™¾åˆ†ä½å¯ä»¥è¢«å¹³å‡ï¼›é™¤éäº§ç”Ÿå®ƒä»¬çš„åˆ†å¸ƒå‡ ä¹ç›¸åŒçš„æå°‘æ•°æƒ…å†µé™¤å¤–ã€‚å¦‚æœä½ åªæœ‰ç™¾åˆ†ä½ï¼Œè€Œä¸æ˜¯æºæ•°æ®ï¼Œä½ ä¸çŸ¥é“å¯èƒ½æ˜¯è¿™ç§æƒ…å†µã€‚è¿™æ˜¯ä¸€ä¸ªé¸¡ç”Ÿè›‹è¿˜æ˜¯è›‹ç”Ÿé¸¡çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¹Ÿæ„å‘³ç€ï¼Œå¦‚æœæ‚¨ä»…é’ˆå¯¹å•ä¸ªé›†ç¾¤æˆå‘˜è¡¡é‡åŸºäºç™¾åˆ†æ¯”çš„æ€§èƒ½ï¼Œåˆ™ç”±äºç¼ºä¹å¯åˆå¹¶æ€§è€Œæ— æ³•ä¸ºæ•´ä¸ªæœåŠ¡è®¾ç½®æœåŠ¡çº§åˆ«æŒ‡ç¤ºç¬¦ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºåœ¨å›ºå®šçš„æ—¶é—´çª—å£å†…åªæœ‰ 4 ä¸ªå»¶è¿Ÿæ•°æ®ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬è®¾ç½®æœ‰æ„ä¹‰çš„ SLIï¼ˆä»¥åŠå› æ­¤ï¼Œæœ‰æ„ä¹‰çš„ SLOï¼‰çš„èƒ½åŠ›åœ¨æ­¤å¤„å—åˆ°é™åˆ¶ã€‚å› æ­¤ï¼Œå½“æ‚¨ä½¿ç”¨åŸºäºç™¾åˆ†ä½çš„æŒç»­æ—¶é—´æŒ‡æ ‡å·¥ä½œæ—¶ï¼Œæ‚¨å¿…é¡»é—®è‡ªå·±ï¼Œæ‚¨çš„ SLI æ˜¯å¦çœŸçš„æœ‰å¾ˆå¥½çš„ SLIã€‚é€šè¿‡ä½¿ç”¨æ•°å­¦æ¨ç®—æ¥ç¡®å®š SLIï¼Œæˆ‘ä»¬å¯ä»¥åšå¾—æ›´å¥½ï¼Œä»è€Œå…¨é¢äº†è§£æœåŠ¡çš„æ€§èƒ½å’Œå¥åº·çŠ¶å†µã€‚&lt;/p&gt;
&lt;h1 id=&#34;ç›´æ–¹å›¾è®¡é‡æ•°æ®&#34;&gt;ç›´æ–¹å›¾è®¡é‡æ•°æ®&lt;/h1&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugb1z9j20go05uaah_hu_bfb7b3e98ebde93.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugb1z9j20go05uaah_hu_cbb37fb1c38da643.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugb1z9j20go05uaah_hu_a8d97e35504bed84.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugb1z9j20go05uaah_hu_bfb7b3e98ebde93.webp&#34;
               width=&#34;600&#34;
               height=&#34;210&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯ä½¿ç”¨ç›´æ–¹å›¾ä»¥å¾®ç§’ä¸ºå•ä½æ˜¾ç¤ºæœåŠ¡å»¶è¿Ÿæ•°æ®çš„å¯è§†åŒ–è¡¨ç¤ºã€‚æ ·æœ¬æ•°é‡ä½äº Y è½´ä¸Šï¼Œæ ·æœ¬å€¼ï¼ˆåœ¨æœ¬ä¾‹ä¸­ä¸ºå¾®ç§’ç­‰å¾…æ—¶é—´ï¼‰ä½äº X è½´ä¸Šã€‚è¿™æ˜¯æˆ‘ä»¬åœ¨ Circonus å¼€å‘çš„å¼€æºç›´æ–¹å›¾ã€‚ï¼ˆè¯·å‚é˜… &lt;a href=&#34;https://github.com/circonus-labs/libcircllhist&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;C è¯­è¨€&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/circonus-labs/circonusllhist&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Golang ä¸­&lt;/a&gt;çš„å¼€æºä»£ç ï¼Œæˆ–è€…&lt;a href=&#34;https://www.circonus.com/2018/05/effective-management-of-high-volume-numeric-data-with-histograms/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨æ­¤å¤„&lt;/a&gt;é˜…è¯»æœ‰å…³ç›´æ–¹å›¾çš„æ›´å¤šä¿¡æ¯ï¼‰è¿˜æœ‰ä¸€äº›å¼€æºçš„ç›´æ–¹å›¾å®ç°ï¼Œå¦‚ &lt;a href=&#34;https://github.com/tdunning/t-digest&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ted Dunning çš„ t-æ¶ˆåŒ–ç›´æ–¹å›¾&lt;/a&gt;å’Œ &lt;a href=&#34;http://hdrhistogram.org&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HDR ç›´æ–¹å›¾&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Envoy é¡¹ç›®æœ€è¿‘é‡‡ç”¨&lt;a href=&#34;https://github.com/circonus-labs/libcircllhist&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº†&lt;/a&gt; Circonus çš„å¯¹æ•°çº¿æ€§ç›´æ–¹å›¾åº“çš„&lt;a href=&#34;https://github.com/circonus-labs/libcircllhist&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt; C è¯­è¨€å®ç°&lt;/a&gt;ã€‚è¿™ä½¿å¾— envoy æ•°æ®å¯ä»¥ä½œä¸ºåˆ†å¸ƒæ¥æ”¶é›†ã€‚ä»–ä»¬åœ¨å®ç°è¿‡ç¨‹ä¸­å‘ç°äº†ä¸€ä¸ªéå¸¸å°çš„é”™è¯¯ï¼ŒCirconus éå¸¸ä¹æ„ä¿®å¤ã€‚è¿™å°±æ˜¯å¼€æºçš„ç¾å¦™ä¹‹å¤„ï¼Œç”±äºæœ‰æ›´å¤šçš„äººå¯ä»¥æŸ¥çœ‹ä»£ç ï¼Œæ›´å¤šçš„äººå¯ä»¥å‘ç°é—®é¢˜ï¼Œå¹¶ä¿®å¤é—®é¢˜ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ä»£ç å°†ä¼šè¶Šæ¥è¶Šå¥½ã€‚&lt;/p&gt;
&lt;p&gt;ç›´æ–¹å›¾å¯åˆå¹¶ã€‚åªè¦è¾¹ç•Œç›¸åŒï¼Œä»»ä½•ä¸¤ä¸ªæˆ–æ›´å¤šçš„ç›´æ–¹å›¾éƒ½å¯ä»¥åˆå¹¶ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å°†æ­¤åˆ†å¸ƒä¸å…¶ä»–åˆ†å¸ƒç»“åˆèµ·æ¥ã€‚å¯åˆå¹¶åº¦é‡å¯¹äºç›‘æ§å’Œå¯è§‚å¯Ÿæ€§éå¸¸æœ‰ç”¨ã€‚è¿™å…è®¸æˆ‘ä»¬åˆå¹¶æ¥è‡ªç±»ä¼¼èµ„æºçš„è¾“å‡ºï¼Œä¾‹å¦‚æœåŠ¡æˆå‘˜ï¼Œå¹¶è·å¾—æ€»ä½“æœåŠ¡æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ­¤å¯¹æ•°çº¿æ€§ç›´æ–¹å›¾ä¸­åŒ…å«æ¯ä¸ªå¹‚ä¸º 10 çš„ 90 ä¸ªé—´éš”ã€‚æ‚¨å¯ä»¥çœ‹åˆ° 10k åˆ° 1M ä¹‹é—´åˆ†å¸ƒçš„ 90 ä¸ªé—´éš”ã€‚åœ¨æ¯ä¸ª 10 çš„å¹‚ä¸‹ï¼Œé—´éš”çš„å¤§å°å¢åŠ  10 å€ã€‚è¿™ä½¿å¾—æˆ‘ä»¬èƒ½å¤Ÿä»¥é«˜ç›¸å¯¹ç²¾åº¦è®°å½•å„ç§å„æ ·çš„å€¼ï¼Œè€Œä¸éœ€è¦æå‰çŸ¥é“æ•°æ®åˆ†å¸ƒã€‚è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬è¦†ç›–ä¸€äº›ç™¾åˆ†ç‚¹æ—¶ï¼Œè¿™çœ‹èµ·æ¥åƒä»€ä¹ˆï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhj1ilj20go0583yl_hu_44f3a64926b9bca8.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhj1ilj20go0583yl_hu_230e68c0ffeaee02.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhj1ilj20go0583yl_hu_1cd6d2cd7d17249e.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhj1ilj20go0583yl_hu_44f3a64926b9bca8.webp&#34;
               width=&#34;600&#34;
               height=&#34;188&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ‚¨å¯ä»¥çœ‹åˆ°æˆ‘ä»¬çš„å¹³å‡æ°´å¹³ï¼Œç¬¬ 50 ç™¾åˆ†ä½ï¼ˆä¹Ÿç§°ä¸ºä¸­ä½æ•°ï¼‰å’Œç¬¬ 90 ç™¾åˆ†ä½ã€‚ç¬¬ 90 ç™¾åˆ†ä½æ˜¯ 90ï¼… æ ·æœ¬ä½äºè¯¥å€¼çš„å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘æˆ‘ä»¬ä¹‹å‰çš„ç¤ºä¾‹ SLIã€‚é€šè¿‡ä»¥æ­¤æ ¼å¼æ˜¾ç¤ºå»¶è¿Ÿæ•°æ®ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å°†ç›´æ–¹å›¾åˆå¹¶ä¸ºä¸€ä¸ª 5 åˆ†é’Ÿçš„æ•°æ®è§†å›¾ï¼Œç„¶åè®¡ç®—è¯¥åˆ†å¸ƒçš„ç¬¬ 90 ç™¾åˆ†ä½æ•°å€¼ï¼Œè½»æ¾è®¡ç®—æœåŠ¡çš„ SLIã€‚å¦‚æœå®ƒå°‘äº 1,000 æ¯«ç§’ï¼Œå°±è¾¾åˆ°äº†æˆ‘ä»¬çš„ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆªå›¾ä¸­çš„ RED ä»ªè¡¨ç›˜æŒç»­æ—¶é—´å›¾æœ‰å››ä¸ªç™¾åˆ†ç‚¹ï¼Œç¬¬ 50ã€90ã€95 å’Œ 99 ç™¾åˆ†ä½ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥è¦†ç›–è¿™äº›åˆ†å¸ƒçš„ç™¾åˆ†ä½æ•°ã€‚å³ä½¿æ²¡æœ‰æ•°æ®ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥çœ‹åˆ°è¯·æ±‚åˆ†å¸ƒçœ‹èµ·æ¥å¾ˆç²—ç•¥çš„è¡¨ç¤ºï¼Œä½†æ˜¯è¿™ä¼šåšå‡ºå¾ˆå¤šå‡è®¾ã€‚æˆ‘ä»¬çœ‹çœ‹ä»…åŸºäºå‡ ä¸ªç™¾åˆ†ç‚¹çš„å‡è®¾å¦‚ä½•è¯¯å¯¼æˆ‘ä»¬ï¼Œè¿™æ˜¯å…¶ä»–æ¨¡å¼çš„åˆ†å¸ƒï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh00flj20go07wjs7_hu_c84a3bb2f572313e.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh00flj20go07wjs7_hu_d0cebb02bafd85ed.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh00flj20go07wjs7_hu_f8afd106f54b43d0.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuh00flj20go07wjs7_hu_c84a3bb2f572313e.webp&#34;
               width=&#34;600&#34;
               height=&#34;284&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¯¥ç›´æ–¹å›¾æ˜¾ç¤ºå…·æœ‰ä¸¤ç§ä¸åŒæ¨¡å¼çš„åˆ†å¸ƒã€‚æœ€å·¦è¾¹çš„æ¨¡å¼å¯èƒ½æ˜¯ç”±äºç¼“å­˜æœåŠ¡è€Œäº§ç”Ÿçš„å¿«é€Ÿå“åº”ï¼Œä»¥åŠæ¥è‡ªç£ç›˜çš„æ­£ç¡®æ¨¡å¼ã€‚ä»…ä»…ä½¿ç”¨å››ä¸ªç™¾åˆ†ç‚¹æ¥è¡¡é‡å»¶è¿Ÿå°±å‡ ä¹ä¸å¯èƒ½è¾¨åˆ«å‡ºè¿™æ ·çš„åˆ†å¸ƒã€‚è¿™ç»™äº†æˆ‘ä»¬ä¸€ä¸ªç™¾åˆ†ç‚¹å¯ä»¥æ©ç›–çš„å¤æ‚æ€§çš„æ„Ÿè§‰ã€‚è€ƒè™‘å…·æœ‰ä¸¤ç§ä»¥ä¸Šæ¨¡å¼çš„åˆ†å¸ƒï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshn01jrnnj20go06hq48_hu_88d5495487023ac0.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshn01jrnnj20go06hq48_hu_e63868f10606c984.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshn01jrnnj20go06hq48_hu_ac95e51a712a4151.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshn01jrnnj20go06hq48_hu_88d5495487023ac0.webp&#34;
               width=&#34;600&#34;
               height=&#34;233&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤åˆ†å¸ƒè‡³å°‘æœ‰å››ç§å¯è§æ¨¡å¼ã€‚å¦‚æœæˆ‘ä»¬å¯¹å…¨åˆ†å¸ƒè¿›è¡Œæ•°å­¦è¿ç®—ï¼Œæˆ‘ä»¬ä¼šåœ¨è¿™é‡Œæ‰¾åˆ° 20 å¤šç§æ¨¡å¼ã€‚æ‚¨éœ€è¦è®°å½•å‡ ä¸ªç™¾åˆ†ä½ä»¥æ¥è¿‘ä¸Šé¢çš„å»¶è¿Ÿåˆ†å¸ƒï¼Ÿå…³äºä¸‹é¢çš„åˆ†å¸ƒä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuge1ksj20go07oabj_hu_3f2616275d1720a0.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuge1ksj20go07oabj_hu_35b2444f56aa4625.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuge1ksj20go07oabj_hu_ca3c05a411d20069.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuge1ksj20go07oabj_hu_3f2616275d1720a0.webp&#34;
               width=&#34;600&#34;
               height=&#34;276&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç”±è®¸å¤šæœåŠ¡ç»„æˆçš„å¤æ‚ç³»ç»Ÿå°†ç”Ÿæˆæ— æ³•ç”¨ç™¾åˆ†ä½å‡†ç¡®è¡¨ç¤ºçš„å»¶è¿Ÿåˆ†å¸ƒã€‚æ‚¨å¿…é¡»è®°å½•æ•´ä¸ªå»¶è¿Ÿåˆ†å¸ƒæ‰èƒ½å……åˆ†è¡¨ç¤ºå®ƒã€‚è¿™æ˜¯å°†æ•°æ®çš„å®Œæ•´åˆ†å¸ƒå­˜å‚¨åœ¨ç›´æ–¹å›¾ä¸­å¹¶æ ¹æ®éœ€è¦è®¡ç®—ç™¾åˆ†ä½æ•°çš„ä¼˜é€‰åŸå› ä¹‹ä¸€ï¼Œè€Œä¸æ˜¯ä»…å­˜å‚¨å‡ ä¸ªç™¾åˆ†ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç›´æ–¹å›¾å¯è§†åŒ–æ˜¾ç¤ºäº†å›ºå®šæ—¶é—´çª—å£ä¸Šçš„åˆ†å¸ƒã€‚æˆ‘ä»¬å¯ä»¥å­˜å‚¨å¤šä¸ªåˆ†å¸ƒï¼Œä»¥äº†è§£å®ƒéšæ—¶é—´å˜åŒ–çš„æƒ…å†µï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugi6lsj20go05rq5j_hu_5248290dd095888a.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugi6lsj20go05rq5j_hu_b9a3d05f4d3ad316.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugi6lsj20go05rq5j_hu_ff9058d8d5cdeb66.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugi6lsj20go05rq5j_hu_5248290dd095888a.webp&#34;
               width=&#34;600&#34;
               height=&#34;207&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ª heapmapï¼Œå®ƒä»£è¡¨ä¸€ç»„éšæ—¶é—´å˜åŒ–çš„ç›´æ–¹å›¾ã€‚æƒ³è±¡ä¸€ä¸‹ï¼Œè¿™ä¸ªçƒ­å›¾ä¸­çš„æ¯ä¸€åˆ—éƒ½æœ‰ä¸€ä¸ªä»ä¸Šé¢çœ‹çš„å•ç‹¬çš„æ¡å½¢å›¾ï¼Œé¢œè‰²ç”¨äºæŒ‡ç¤ºæ¯ä¸ªé—´éš”çš„é«˜åº¦ã€‚è¿™æ˜¯æ¥è‡ª 10 ä¸ªè´Ÿè½½å‡è¡¡å™¨é›†ç¾¤çš„å“åº”å»¶è¿Ÿçš„ grafana å¯è§†åŒ–ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿæ·±å…¥äº†è§£æ•´ä¸ªé›†ç¾¤çš„ç³»ç»Ÿè¡Œä¸ºï¼Œä¸€å‘¨ä¹‹å†…å°±æœ‰è¶…è¿‡ 100 ä¸‡ä¸ªæ•°æ®æ ·æœ¬ã€‚è¿™é‡Œçš„ä¸­ä½æ•°å¤§çº¦åœ¨ 500 å¾®ç§’å·¦å³ï¼Œä»¥çº¢è‰²å¸¦è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmui01hbj20go06t0vy_hu_ca99a408699bc7ce.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmui01hbj20go06t0vy_hu_e9e50c1c1456c98e.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmui01hbj20go06t0vy_hu_a30259f92760e0cc.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmui01hbj20go06t0vy_hu_ca99a408699bc7ce.webp&#34;
               width=&#34;600&#34;
               height=&#34;245&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä»¥ä¸Šæ˜¯å¦ä¸€ç§ç±»å‹çš„çƒ­å›¾ã€‚æ­¤å¤„ï¼Œé¥±å’Œåº¦ç”¨äºæŒ‡ç¤ºæ¯ä¸ªé—´éš”çš„â€œé«˜åº¦â€ï¼ˆé¢œè‰²è¶Šæ·±çš„è‰²å—æ›´â€œé¥±å’Œâ€ï¼‰ã€‚æ­¤å¤–ï¼Œè¿™æ¬¡æˆ‘ä»¬åœ¨ heatmap ä¸Šè¦†ç›–äº†ä¸€æ®µæ—¶é—´å†…çš„ç™¾åˆ†æ¯”è®¡ç®—ã€‚ç™¾åˆ†ä½æ•°æ˜¯å¥å£®çš„æ€§çš„åº¦é‡æ ‡å‡†ï¼Œéå¸¸æœ‰ç”¨ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼Œéšç€å»¶è¿Ÿåˆ†å¸ƒå‘ä¸Šç§»åŠ¨ï¼Œ90ï¼… ä»¥ä¸Šçš„ç™¾åˆ†ä½æ•°æ˜¯æ€æ ·å¢åŠ çš„ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¥çœ‹çœ‹è¿™äº›åŸºäºåˆ†å¸ƒçš„æŒç»­æ—¶é—´å›¾ï¼Œçœ‹çœ‹æˆ‘ä»¬æ˜¯å¦å¯ä»¥ç”Ÿæˆæ¯” Istio ä»ªè¡¨æ¿æ ·æœ¬æ›´å¤šçš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugsu6uj20go09k42b_hu_47ec66fc275c4269.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugsu6uj20go09k42b_hu_e4c34d45a97172a7.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugsu6uj20go09k42b_hu_1210ed407ecf3ef2.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugsu6uj20go09k42b_hu_47ec66fc275c4269.webp&#34;
               width=&#34;600&#34;
               height=&#34;344&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„å±å¹•æˆªå›¾æ˜¯ä¿®æ”¹åçš„ RED ä»ªè¡¨æ¿ï¼Œæ˜¾ç¤ºåŸºäºåˆ†å¸ƒçš„å»¶è¿Ÿæ•°æ®ã€‚åœ¨å·¦ä¸‹è§’ï¼Œæˆ‘ä»¬æ˜¾ç¤ºäº†ä¸€ä¸ªå›ºå®šæ—¶é—´çª—å£ä¸Šçš„å»¶è¿Ÿç›´æ–¹å›¾ã€‚åœ¨å®ƒçš„å³è¾¹ï¼Œæˆ‘ä»¬ä½¿ç”¨çƒ­å›¾å°†åˆ†å¸ƒåˆ†è§£æˆæ›´å°çš„æ—¶é—´çª—å£ã€‚åˆ©ç”¨ RED ä»ªè¡¨æ¿çš„å¸ƒå±€ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å‡ ä¸ªå°ç»„ä¿¡æ¯å…¨é¢äº†è§£æˆ‘ä»¬çš„æœåŠ¡æ˜¯å¦‚ä½•è¿ä½œçš„ã€‚è¿™ä¸ªç‰¹å®šçš„ä»ªè¡¨æ¿æ˜¯ä½¿ç”¨ Grafana å®ç°çš„ï¼Œä½¿ç”¨ IRONdb æ—¶é—´åºåˆ—æ•°æ®åº“æœåŠ¡ï¼Œè¯¥æ•°æ®åº“æœ¬åœ°å­˜å‚¨å»¶è¿Ÿæ—¶é—´æ•°æ®ä½œä¸ºå¯¹æ•°çº¿æ€§ç›´æ–¹å›¾ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æ‰©å±•è¿™ä¸ª RED ä»ªè¡¨æ¿ï¼Œå¹¶å°† SLI è¦†ç›–åˆ°å›¾è¡¨ä¸Šï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugl9wyj20go07p41y_hu_35d2a618439aca94.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugl9wyj20go07p41y_hu_99256a28b5cd3bf0.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugl9wyj20go07p41y_hu_6bcaf8587ba34699.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugl9wyj20go07p41y_hu_35d2a618439aca94.webp&#34;
               width=&#34;600&#34;
               height=&#34;277&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¯¹äºé€Ÿç‡é¢æ¿ï¼Œæˆ‘ä»¬çš„ SLI å¯èƒ½ä¼šä¿æŒæ¯ç§’æœ€ä½æ°´å¹³çš„è¯·æ±‚ã€‚å¯¹äºé€Ÿç‡é¢æ¿ï¼Œæˆ‘ä»¬çš„ SLI å¯èƒ½ä¼šä¿æŒæ¯ç§’ä¸€å®šæ•°é‡çš„é”™è¯¯ã€‚æ­£å¦‚æˆ‘ä»¬ä¹‹å‰ç ”ç©¶è¿‡æŒç»­æ—¶é—´ SLIï¼Œæˆ‘ä»¬å¯èƒ½å¸Œæœ›æ•´ä¸ªæœåŠ¡çš„ç¬¬ 99 ä¸ªç™¾åˆ†ç‚¹ç”±å¤šä¸ªçª—æ ¼ç»„æˆï¼Œä»¥åœ¨å›ºå®šçª—å£å†…ä¿æŒä¸€å®šçš„å»¶è¿Ÿã€‚ä½¿ç”¨å­˜å‚¨ä¸ºç›´æ–¹å›¾çš„ Istio é¥æµ‹æŠ€æœ¯å¯ä»¥è®©æˆ‘ä»¬è®¾ç½®è¿™äº›æœ‰æ„ä¹‰çš„æœåŠ¡èŒƒå›´çš„ SLIã€‚ç°åœ¨æˆ‘ä»¬è¿˜æœ‰å¾ˆå¤šå·¥ä½œè¦åšï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥æ›´å¥½åœ°å®¡é—®æˆ‘ä»¬çš„æ•°æ®ï¼ˆè§ä¸‹æ–‡ï¼‰ã€‚&lt;/p&gt;
&lt;h1 id=&#34;æå‡ºæ­£ç¡®çš„é—®é¢˜&#34;&gt;æå‡ºæ­£ç¡®çš„é—®é¢˜&lt;/h1&gt;
&lt;p&gt;æ‰€ä»¥ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠè¿™äº›éƒ¨åˆ†æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶çœ‹åˆ°äº†å¦‚ä½•ä½¿ç”¨ Istio ä»æˆ‘ä»¬çš„æœåŠ¡ä¸­è·å–æœ‰æ„ä¹‰çš„æ•°æ®ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬å¯ä»¥å›ç­”å“ªäº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éƒ½å–œæ¬¢è§£å†³æŠ€æœ¯é—®é¢˜ï¼Œä½†ä¸æ˜¯æ¯ä¸ªäººéƒ½æœ‰åŒæ ·çš„é‡ç‚¹ã€‚ä¸šåŠ¡äººå‘˜æƒ³å›ç­”å…³äºä¸šåŠ¡çš„é—®é¢˜ã€‚æ‚¨éœ€è¦èƒ½å¤Ÿå›ç­”ä»¥ä¸šåŠ¡ä¸ºä¸­å¿ƒçš„é—®é¢˜ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹æˆ‘ä»¬å·²ç»ç»„è£…çš„å·¥å…·é›†ï¼Œå¹¶å°†è¿™äº›åŠŸèƒ½ä¸ä¸šåŠ¡æå‡º SRE çš„å‡ ä¸ªé—®é¢˜å¯¹é½ï¼š&lt;/p&gt;
&lt;p&gt;ç¤ºä¾‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨å¤§ä¿ƒé”€æ¨å¹¿åï¼Œæœ‰å¤šå°‘ç”¨æˆ·åœ¨å‘¨äºŒçš„é€Ÿåº¦å˜æ…¢æ—¶æ¼æ€’ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬æ˜¯å¦åœ¨ç»“å¸æœåŠ¡ä¸­è¶…é¢é…ç½®æˆ–è€…é…ç½®ä¸è¶³ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€ƒè™‘ç¬¬ä¸€ä¸ªä¾‹å­ã€‚æ¯ä¸ªäººéƒ½ç»å†äº†ä¸€æ¬¡å·¨å¤§çš„é€Ÿåº¦ä¸‹é™ã€‚æ¯”æ–¹è¯´ï¼Œå¸‚åœºæ¨å¹¿åšå¾—å¾ˆå¤§ï¼Œæµé‡å¢åŠ äº†ï¼Œè¿è¡Œé€Ÿåº¦é™ä½äº†ï¼Œç”¨æˆ·æŠ±æ€¨ç½‘ç«™é€Ÿåº¦ç¼“æ…¢ã€‚æˆ‘ä»¬å¦‚ä½•é‡åŒ–æ¯ä¸ªäººçš„é€Ÿåº¦æœ‰å¤šæ…¢ï¼Ÿæœ‰å¤šå°‘ç”¨æˆ·ç”Ÿæ°”äº†ï¼Ÿæ¯”æ–¹è¯´ï¼Œå¸‚åœºè¥é”€éƒ¨é—¨æƒ³çŸ¥é“è¿™ä¸€ç‚¹ï¼Œä»¥ä¾¿ä»–ä»¬å¯ä»¥å‘å—å½±å“çš„ç”¨æˆ·å‘é€ 10ï¼… æŠ˜æ‰£çš„ç”µå­é‚®ä»¶ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›é¿å…åŒæ ·é—®é¢˜çš„å†æ¬¡å‘ç”Ÿã€‚è®©æˆ‘ä»¬åˆ¶ä½œä¸€ä¸ª SLIï¼Œå¹¶å‡è®¾ç”¨æˆ·æ³¨æ„åˆ°é€Ÿåº¦æ”¾ç¼“å¹¶ä¸”åœ¨è¯·æ±‚èŠ±è´¹è¶…è¿‡ 500 æ¯«ç§’æ—¶ç”Ÿæ°”ã€‚æˆ‘ä»¬å¦‚ä½•è®¡ç®—æœ‰å¤šå°‘ç”¨æˆ·å¯¹è¿™ä¸ª 500 æ¯«ç§’çš„ SLI æ„Ÿåˆ°æ„¤æ€’ï¼Ÿ&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†è¯·æ±‚å»¶è¿Ÿè®°å½•ä¸ºåˆ†å‘ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥å°†å®ƒä»¬ç»˜åˆ¶æˆçƒ­å›¾ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åˆ†å¸ƒæ•°æ®æ¥è®¡ç®—è¶…è¿‡ 500ms SLI çš„è¯·æ±‚çš„ç™¾åˆ†æ¯”ï¼Œæ–¹æ³•æ˜¯ä½¿ç”¨é€†ç™¾åˆ†æ¯”ã€‚æˆ‘ä»¬å°†è¿™ä¸ªç­”æ¡ˆä¹˜ä»¥è¯¥æ—¶é—´çª—å£ä¸­çš„è¯·æ±‚æ€»æ•°ï¼Œå¹¶éšæ—¶é—´ç§¯åˆ†ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ç»˜åˆ¶è¦†ç›–åœ¨çƒ­å›¾ä¸Šçš„ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugwviwj20go06jdhf_hu_f8c679ab241d31e6.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugwviwj20go06jdhf_hu_269689a532d4f065.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugwviwj20go06jdhf_hu_4d09a8657728aa37.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmugwviwj20go06jdhf_hu_f8c679ab241d31e6.webp&#34;
               width=&#34;600&#34;
               height=&#34;235&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤å±å¹•æˆªå›¾ä¸­ï¼Œæˆ‘ä»¬å·²ç»åœˆå‡ºäº†å‘ç”Ÿé€Ÿåº¦é™ä½çš„çƒ­å›¾çš„ä¸€éƒ¨åˆ†ã€‚å¢åŠ çš„å»¶è¿Ÿåˆ†å¸ƒæ˜¯ç›¸å½“ç¼“æ…¢çš„æŒ‡ç¤ºã€‚å›¾ä¸­çš„çº¿è¡¨ç¤ºå—åˆ°ä¸€æ®µæ—¶é—´å½±å“çš„è¯·æ±‚æ€»æ•°ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è®¾æ³•é”™è¿‡äº† 400 ä¸‡ä¸ªè¯·æ±‚çš„ SLIã€‚å“å‘¦ã€‚ä¸æ˜æ˜¾çš„æ˜¯å³è¾¹çš„ä¸¤ä¸ªé¢å¤–å‡é€Ÿï¼Œå› ä¸ºå®ƒä»¬å¹…åº¦è¾ƒå°ã€‚æ¯ä¸ªè¿™äº›èŠ±è´¹æˆ‘ä»¬é¢å¤– 200 ä¸‡ SLI è¿è§„ã€‚å“å“Ÿã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›ç±»å‹è¿›è¡Œæ•°å­¦åˆ†æï¼Œå› ä¸ºæˆ‘ä»¬å°†æ•°æ®å­˜å‚¨ä¸ºåˆ†å¸ƒï¼Œè€Œä¸æ˜¯åƒç™¾åˆ†ä½æ•°ä¹‹ç±»çš„èšåˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ¥è€ƒè™‘å¦ä¸€ä¸ªå¸¸è§é—®é¢˜ã€‚æˆ‘çš„æœåŠ¡æ˜¯å¦ç½®å¤‡æˆ–é…ç½®è¿‡åº¦ï¼Ÿ&lt;/p&gt;
&lt;p&gt;ç­”æ¡ˆé€šå¸¸â€œè§†æƒ…å†µè€Œå®šâ€ã€‚æ ¹æ®ä¸€å¤©ä¸­çš„æ—¶é—´å’Œä¸€å‘¨çš„æ—¥å­ï¼Œè´Ÿè½½ä¼šæœ‰æ‰€ä¸åŒï¼Œé™¤äº†å› ç‰¹æ®Šäº‹ä»¶è€Œå˜åŒ–ä¹‹å¤–ã€‚é‚£æ˜¯åœ¨æˆ‘ä»¬ç”šè‡³è€ƒè™‘ç³»ç»Ÿåœ¨è´Ÿè½½ä¸‹çš„è¡Œä¸ºä¹‹å‰ã€‚è®©æˆ‘ä»¬æŠŠä¸€äº›æ•°å­¦å·¥ä½œï¼Œå¹¶ä½¿ç”¨å»¶è¿Ÿå¸¦æ¥å¯è§†åŒ–æˆ‘ä»¬çš„ç³»ç»Ÿå¦‚ä½•æ‰§è¡Œï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhvtnnj20go08p0uv_hu_4c4568967f167436.webp 400w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhvtnnj20go08p0uv_hu_5fd44b44e1dc250e.webp 760w,
               /blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhvtnnj20go08p0uv_hu_5cd666dc420cfcf.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/comprehensive-container-based-service-monitoring-with-kubernetes-and-istio/61411417ly1fshmuhvtnnj20go08p0uv_hu_4c4568967f167436.webp&#34;
               width=&#34;600&#34;
               height=&#34;313&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šé¢çš„å¯è§†åŒ–æ˜¾ç¤ºå»¶è¿Ÿåˆ†å¸ƒéšç€æ—¶é—´çš„æ¨ç§»è¢«å»¶è¿Ÿå¸¦åˆ†è§£ã€‚è¿™é‡Œçš„é¢‘æ®µæ˜¾ç¤º 25ms åˆ° 100msï¼Œ100-250msï¼Œ250-1000 å’Œ 1000ms ä»¥ä¸‹çš„è¯·æ±‚æ•°ã€‚å¿«é€Ÿçš„è¯·æ±‚åˆ†ç»„ä»¥ç»¿è‰²æ˜¾ç¤ºï¼Œè¯·æ±‚é€Ÿåº¦çš„è¯·æ±‚å˜æ…¢ä»¥çº¢è‰²æ˜¾ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§å¯è§†åŒ–å‘Šè¯‰æˆ‘ä»¬ä»€ä¹ˆï¼Ÿå®ƒè¡¨æ˜ï¼Œå¯¹æˆ‘ä»¬çš„æœåŠ¡çš„è¯·æ±‚éå¸¸è¿…é€Ÿåœ°å¼€å§‹ï¼Œç„¶åå‡ åˆ†é’Ÿåå¿«é€Ÿè¯·æ±‚çš„ç™¾åˆ†æ¯”å°±ä¼šä¸‹é™ï¼Œå¤§çº¦ 10 åˆ†é’Ÿåè¯·æ±‚çš„ç¼“æ…¢ç™¾åˆ†æ¯”å°±ä¼šå¢åŠ ã€‚è¿™ç§æ¨¡å¼é‡å¤äº†ä¸¤æ¬¡æµé‡ä¼šè¯ã€‚é‚£å‘Šè¯‰æˆ‘ä»¬å…³äºé…ç½®çš„æ˜¯ä»€ä¹ˆï¼Ÿå®ƒè¡¨æ˜ï¼Œæœ€åˆæœåŠ¡è¿‡åº¦ä¾›åº”ï¼Œä½†éšååœ¨ 10-20 åˆ†é’Ÿçš„è¿‡ç¨‹ä¸­ä¾›åº”ä¸è¶³ã€‚å¬èµ·æ¥åƒæ˜¯åšè‡ªåŠ¨ç¼©æ”¾çš„å¥½æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™ç§ç±»å‹çš„å¯è§†åŒ–æ·»åŠ åˆ°æˆ‘ä»¬çš„ RED ä»ªè¡¨æ¿ã€‚è¿™ç§ç±»å‹çš„æ•°æ®å¯¹ä¸šåŠ¡åˆ©ç›Šç›¸å…³è€…æ¥è¯´éå¸¸å¥½ï¼Œè€Œä¸”å®ƒä¸éœ€è¦å¤§é‡çš„æŠ€æœ¯çŸ¥è¯†ç§¯ç´¯å°±å¯ä»¥ç”¨æ¥äº†è§£å¯¹ä¸šåŠ¡çš„å½±å“ã€‚&lt;/p&gt;
&lt;h1 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h1&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬åº”è¯¥ç›‘æ§æœåŠ¡è€Œä¸æ˜¯å®¹å™¨&lt;/strong&gt;ã€‚æœåŠ¡æ˜¯é•¿æœŸå­˜åœ¨çš„å®ä½“ï¼Œè€Œå®¹å™¨ä¸æ˜¯ã€‚æ‚¨çš„ç”¨æˆ·ä¸å…³å¿ƒæ‚¨çš„å®¹å™¨å¦‚ä½•æ‰§è¡Œï¼Œä»–ä»¬å…³å¿ƒçš„æ˜¯æœåŠ¡è¿è¡Œçš„æ€ä¹ˆæ ·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬åº”è¯¥è®°å½•åˆ†å¸ƒè€Œä¸æ˜¯èšåˆ&lt;/strong&gt;ã€‚æˆ‘ä»¬åº”è¯¥ä»è¿™äº›åˆ†å¸ƒæ¥äº§ç”Ÿèšåˆã€‚èšé›†æ˜¯éå¸¸æœ‰ä»·å€¼çš„ä¿¡æ¯æ¥æºã€‚ä½†å®ƒä»¬æ— æ³•åˆå¹¶ï¼Œå› æ­¤å®ƒä»¬ä¸é€‚åˆè¿›è¡Œç»Ÿè®¡åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;Istio å…è´¹æä¾›äº†å¾ˆå¤šä¸œè¥¿ã€‚æ‚¨ä¸å¿…ä½¿ç”¨ç¼–å†™ä»£ç æ¥å®ç°ã€‚æ‚¨æ— éœ€ä»å¤´å¼€å§‹æ„å»ºé«˜è´¨é‡çš„åº”ç”¨ç¨‹åºæ¡†æ¶ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡æ•°å­¦æå‡ºå¹¶å›ç­”æœ‰å…³æ‚¨çš„æœåŠ¡çš„é—®é¢˜ï¼Œè¿™å¯¹ä¸šåŠ¡å¾ˆé‡è¦ã€‚è¿™å°±æ˜¯å…¨éƒ¨ï¼Œå¯¹å§ï¼Ÿå½“æˆ‘ä»¬å¯ä»¥é€šè¿‡å›ç­”å¯¹ä¸šåŠ¡æœ‰ä»·å€¼çš„é—®é¢˜æ¥ä½¿ç³»ç»Ÿå¯é æ—¶ï¼Œæˆ‘ä»¬å°±èƒ½å®ç°ç»„ç»‡çš„ç›®æ ‡ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Istio æ§åˆ¶ Serverless æ¶æ„ Fn Project ä¸­çš„å‡½æ•°é—´æµé‡è·¯ç”±</title>
      <link>https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/</link>
      <pubDate>Wed, 04 Jul 2018 17:44:01 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://hackernoon.com/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd56607913b8&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†è§£é‡Šå¦‚ä½•åœ¨ &lt;a href=&#34;https://fnproject.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn å‡½æ•°&lt;/a&gt;ä¹‹é—´ä½¿ç”¨ &lt;a href=&#34;http://istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; æœåŠ¡ç½‘æ ¼å®ç°åŸºäºç‰ˆæœ¬çš„æµé‡è·¯ç”±ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å°†é¦–å…ˆè§£é‡Š &lt;a href=&#34;http://istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; è·¯ç”±çš„åŸºç¡€çŸ¥è¯†ä»¥åŠå°† Fn éƒ¨ç½²å’Œè¿è¡Œåœ¨ Kubernetes ä¸Šçš„æ–¹å¼ã€‚æœ€åï¼Œæˆ‘å°†è§£é‡Šæˆ‘æ˜¯å¦‚ä½•åˆ©ç”¨ Istio æœåŠ¡ç½‘æ ¼åŠå…¶è·¯ç”±è§„åˆ™åœ¨ä¸¤ä¸ªä¸åŒçš„ Fn å‡½æ•°ä¹‹é—´è·¯ç”±æµé‡çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œæ¥ä¸‹æ¥çš„è§£é‡Šéå¸¸åŸºæœ¬å’Œç®€å•â€”â€”æˆ‘çš„ç›®çš„ä¸æ˜¯è§£é‡Š Istio æˆ– Fn çš„æ·±å…¥ç»†èŠ‚ï¼Œè€Œæ˜¯è§£é‡Šå¾—è¶³å¤Ÿæ¸…æ¥šï¼Œè®©æ‚¨å¯ä»¥äº†è§£å¦‚ä½•ä½¿è‡ªå·±çš„è·¯ç”±å·¥ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;istio-è·¯ç”±å…¥é—¨&#34;&gt;Istio è·¯ç”±å…¥é—¨&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘èŠ±äº†ä¸€ç‚¹æ—¶é—´æ¥è§£é‡Š &lt;a href=&#34;http://istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; è·¯ç”±å¦‚ä½•å·¥ä½œã€‚Istio ä½¿ç”¨ sidecar å®¹å™¨ï¼ˆ &lt;code&gt;istio-proxy&lt;/code&gt; ï¼‰æ³¨å…¥åˆ°æ‚¨éƒ¨ç½²çš„åº”ç”¨ä¸­ã€‚æ³¨å…¥çš„ä»£ç†ä¼šåŠ«æŒæ‰€æœ‰è¿›å‡ºè¯¥ pod çš„ç½‘ç»œæµé‡ã€‚éƒ¨ç½²ä¸­æ‰€æœ‰è¿™äº›ä»£ç†çš„é›†åˆä¸ Istio ç³»ç»Ÿçš„å…¶ä»–éƒ¨åˆ†è¿›è¡Œé€šä¿¡ï¼Œä»¥ç¡®å®šå¦‚ä½•ä»¥åŠåœ¨ä½•å¤„&lt;a href=&#34;https://istio.io/docs/tasks/traffic-management/request-routing/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è·¯ç”±æµé‡&lt;/a&gt;ï¼ˆä»¥åŠå…¶ä»–ä¸€äº›å¾ˆé…·çš„äº‹æƒ…ï¼Œå¦‚&lt;a href=&#34;https://istio.io/docs/tasks/traffic-management/mirroring/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æµé‡é•œåƒ&lt;/a&gt;ã€&lt;a href=&#34;https://istio.io/docs/tasks/traffic-management/fault-injection/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ•…éšœæ³¨å…¥&lt;/a&gt;å’Œ&lt;a href=&#34;https://istio.io/docs/tasks/traffic-management/circuit-breaking/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ–­è·¯ç”±&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£é‡Šè¿™æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæˆ‘ä»¬å°†å¼€å§‹è¿è¡Œä¸€ä¸ª Kubernetes æœåŠ¡ï¼ˆ&lt;code&gt;myapp&lt;/code&gt;ï¼‰å’Œä¸¤ä¸ªç‰¹å®šç‰ˆæœ¬çš„åº”ç”¨ç¨‹åºéƒ¨ç½²ï¼ˆ&lt;code&gt;v1&lt;/code&gt;å’Œ&lt;code&gt;v2&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyerrbpzj20sa09c74h_hu_5a24f1bfa57f5635.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyerrbpzj20sa09c74h_hu_c22fa8d9c107094.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyerrbpzj20sa09c74h_hu_264bcf818b7d0ccc.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyerrbpzj20sa09c74h_hu_5a24f1bfa57f5635.webp&#34;
               width=&#34;760&#34;
               height=&#34;251&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬æœ‰ &lt;code&gt;myapp&lt;/code&gt; ä¸€ä¸ªé€‰æ‹©å™¨è®¾ç½®ä¸º Kubernetes çš„æœåŠ¡ &lt;code&gt;app=myapp&lt;/code&gt;â€Šï¼Œè¿™æ„å‘³ç€å®ƒå°†æŸ¥æ‰¾å…·æœ‰ &lt;code&gt;app=myapp&lt;/code&gt; æ ‡ç­¾é›†çš„æ‰€æœ‰ Podï¼Œå¹¶å°†æµé‡å‘é€ç»™å®ƒä»¬ã€‚åŸºæœ¬ä¸Šï¼Œå¦‚æœæ‚¨æ‰§è¡Œæ­¤æ“ä½œï¼Œ&lt;code&gt;curl myapp-service&lt;/code&gt; æ‚¨å°†ä»è¿è¡Œ v1 ç‰ˆæœ¬åº”ç”¨ç¨‹åºçš„ pod æˆ–è¿è¡Œ v2 ç‰ˆæœ¬çš„ pod è·å¾—å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜æœ‰ä¸¤ä¸ª Kubernetes éƒ¨ç½²ï¼Œè¿™äº›éƒ¨ç½²&lt;code&gt;myapp&lt;/code&gt;è¿è¡Œäº† v1 å’Œ v2 ä»£ç ã€‚é™¤ &lt;code&gt;app=myapp&lt;/code&gt; æ ‡ç­¾å¤–ï¼Œæ¯ä¸ª pod è¿˜å°†&lt;code&gt;version&lt;/code&gt;æ ‡ç­¾è®¾ç½®ä¸º &lt;code&gt;v1&lt;/code&gt;æˆ– &lt;code&gt;v2&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸Šå›¾ä¸­çš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯å¯ä»¥ä» Kubernetes ä¸­å¼€ç®±å³ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥ Istio ç¯èŠ‚ã€‚ä¸ºäº†èƒ½å¤Ÿåšåˆ°æ›´æ™ºèƒ½åŒ–å’ŒåŸºäºæƒé‡çš„è·¯ç”±ï¼Œæˆ‘ä»¬éœ€è¦å®‰è£… &lt;a href=&#34;http://istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt;ï¼Œç„¶åå°†ä»£ç†æ³¨å…¥åˆ°æˆ‘ä»¬çš„æ¯ä¸ª&lt;a href=&#34;http://istio.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®¹å™¨ä¸­&lt;/a&gt;ï¼Œå¦‚ä¸‹é¢çš„å¦ä¸€ä¸ªå›¾ç‰‡æ‰€ç¤ºã€‚ä¸‹å›¾ä¸­çš„æ¯ä¸ª pod éƒ½æœ‰ä¸€ä¸ªå¸¦æœ‰ Istio ä»£ç†çš„å®¹å™¨ï¼ˆç”¨è“è‰²å›¾æ ‡è¡¨ç¤ºï¼‰å’Œè¿è¡Œåº”ç”¨çš„å®¹å™¨ã€‚åœ¨ä¸Šå›¾ä¸­ï¼Œæˆ‘ä»¬åªæœ‰ä¸€ä¸ªå®¹å™¨åœ¨æ¯ä¸ª pod ä¸­è¿è¡Œâ€”â€”åº”ç”¨ç¨‹åºå®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyg6hkmsj20sa09cglu_hu_959511a05052ab55.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyg6hkmsj20sa09cglu_hu_fffea6f33810d0a4.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyg6hkmsj20sa09cglu_hu_edd7421d2fe2340.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyg6hkmsj20sa09cglu_hu_959511a05052ab55.webp&#34;
               width=&#34;760&#34;
               height=&#34;251&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼ŒIstio æ¯”å›¾ä¸­æ˜¾ç¤ºçš„è¦å¤šå¾—å¤šã€‚æˆ‘æ²¡æœ‰å±•ç¤ºåœ¨ Kubernetes é›†ç¾¤ä¸Šéƒ¨ç½²çš„å…¶ä»– Istio Pod å’ŒæœåŠ¡â€”â€”æ³¨å…¥çš„ Istio ä»£ç†ä¸è¿™äº› Pod å’ŒæœåŠ¡è¿›è¡Œé€šä¿¡ï¼Œä»¥ä¾¿çŸ¥é“å¦‚ä½•æ­£ç¡®è·¯ç”±æµé‡ã€‚æœ‰å…³ Istio ä¸åŒéƒ¨åˆ†çš„æ·±å…¥è§£é‡Šï¼Œè¯·å‚é˜…&lt;a href=&#34;https://istio.io/docs/concepts/traffic-management/overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;çš„æ–‡æ¡£ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬ç°åœ¨å¯ä»¥è°ƒæ•´&lt;code&gt;myapp&lt;/code&gt;æœåŠ¡ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä»ç„¶ä¼šå¾—åˆ°ä¸ç¬¬ä¸€ä¸ªå›¾ä¸­çš„è®¾ç½®å®Œå…¨ç›¸åŒçš„ç»“æœï¼šæ¥è‡ª&lt;code&gt;v1&lt;/code&gt;å’Œ&lt;code&gt;v2&lt;/code&gt; pod çš„éšæœºå“åº”ã€‚å”¯ä¸€çš„åŒºåˆ«åœ¨äºç½‘ç»œæµé‡ä»æœåŠ¡æµå‘ Pod çš„æ–¹å¼ã€‚åœ¨ç¬¬äºŒç§æƒ…å†µä¸‹ï¼Œå¯¹æœåŠ¡çš„ä»»ä½•è°ƒç”¨éƒ½åœ¨ Istio ä»£ç†ä¸­ç»“æŸï¼Œç„¶åä»£ç†æ ¹æ®å®šä¹‰çš„è·¯ç”±è§„åˆ™å†³å®šå°†æµé‡è·¯ç”±åˆ°å“ªé‡Œã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒ Kubernetes ä¸€æ ·ï¼ŒIstio è·¯ç”±è§„åˆ™ä¹Ÿæ˜¯ä½¿ç”¨ YAML å®šä¹‰çš„ï¼Œå®ƒä»¬çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyh7i2qnj20o60hcta2_hu_f6481c04cd1859fe.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyh7i2qnj20o60hcta2_hu_3dbb9972332061de.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyh7i2qnj20o60hcta2_hu_f6e279efd0ff2f3c.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyh7i2qnj20o60hcta2_hu_f6481c04cd1859fe.webp&#34;
               width=&#34;760&#34;
               height=&#34;545&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°è·¯ç”±è§„åˆ™æ¥æ”¶è¯·æ±‚&lt;code&gt;myapp-service&lt;/code&gt;å¹¶å°†å…¶é‡æ–°è·¯ç”±åˆ°æ ‡è®°ä¸º Pod çš„è¯·æ±‚&lt;code&gt;version=v1&lt;/code&gt;Â ã€‚è¿™å°±æ˜¯å…·æœ‰ä¸Šè¿°è·¯ç”±è§„åˆ™çš„å›¾è¡¨çš„æ ·å­ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhoj9ngj20sa0gkaai_hu_595dbaca4404ee39.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhoj9ngj20sa0gkaai_hu_a151fc23869944ef.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhoj9ngj20sa0gkaai_hu_73e1bab8d2951a9d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhoj9ngj20sa0gkaai_hu_595dbaca4404ee39.webp&#34;
               width=&#34;760&#34;
               height=&#34;445&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åº•éƒ¨çš„ Istio å¤§å›¾æ ‡ä»£è¡¨ Istio éƒ¨ç½²/æœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬æ­£åœ¨è¯»å–çš„è·¯ç”±è§„åˆ™ã€‚è¿™äº›è§„åˆ™ç„¶åç”¨äºé‡æ–°é…ç½®åœ¨æ¯ä¸ª pod å†…è¿è¡Œçš„ Istio ä»£ç† sidecarã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™ä¸ªè§„åˆ™ï¼Œå¦‚æœæˆ‘ä»¬ curl æœåŠ¡ï¼Œæˆ‘ä»¬åªèƒ½ä»æ ‡æœ‰æ ‡ç­¾ä¸º &lt;code&gt;version=v1&lt;/code&gt;ï¼ˆå›¾ä¸­çš„è“è‰²è¿æ¥å™¨æè¿°ï¼‰çš„ pod è·å–å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†è·¯ç”±å¦‚ä½•å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥ç ”ç©¶ &lt;a href=&#34;http://fnproject.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn&lt;/a&gt; ï¼Œéƒ¨ç½²å®ƒå¹¶æŸ¥çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œä»¥åŠæˆ‘ä»¬æ˜¯å¦å¯ä»¥ä½¿ç”¨ Istio ä»¥æŸç§æ–¹å¼è®¾ç½®è·¯ç”±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨-kubernetes-ä¸Šçš„-fn-å‡½æ•°&#34;&gt;åœ¨ Kubernetes ä¸Šçš„ Fn å‡½æ•°&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä» Kubernetes ä¸Šçš„ä¸€äº› &lt;a href=&#34;http://fnproject.io&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn&lt;/a&gt; ç‰‡æ®µçš„åŸºæœ¬å›¾è¡¨å¼€å§‹ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ &lt;a href=&#34;http://github.com/fnproject/fn-helm&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Helm chart&lt;/a&gt; å°† Fn éƒ¨ç½²åœ¨æ‚¨çš„ Kubernetes é›†ç¾¤ä¹‹ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhzsbtfj20ca09jq33_hu_3ceab0ce1e5bd29a.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhzsbtfj20ca09jq33_hu_8173c1687828c634.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhzsbtfj20ca09jq33_hu_fca3ce131e00cb3d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyhzsbtfj20ca09jq33_hu_3ceab0ce1e5bd29a.webp&#34;
               width=&#34;442&#34;
               height=&#34;343&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾è¡¨é¡¶éƒ¨çš„ Fn API æœåŠ¡æ˜¯ Fn çš„å…¥å£ç‚¹ï¼Œå®ƒç”¨äºç®¡ç†æ‚¨çš„ Functionï¼ˆåˆ›å»ºï¼Œéƒ¨ç½²ï¼Œè¿è¡Œç­‰ï¼‰â€”â€”è¿™æ˜¯&lt;code&gt;FN_API_URL&lt;/code&gt;åœ¨ Fn é¡¹ç›®ä¸­å¼•ç”¨çš„ URLã€‚&lt;/p&gt;
&lt;p&gt;è¯¥æœåŠ¡åè¿‡æ¥å°†è°ƒç”¨è·¯ç”±åˆ° Fn è´Ÿè½½å‡è¡¡å™¨ï¼ˆå³æ ‡è®°ä¸º  &lt;code&gt;role=fn-lb&lt;/code&gt; çš„ä»»ä½• Podï¼‰ã€‚ç„¶åï¼Œè´Ÿè½½å‡è¡¡å™¨ä¼šå‘æŒ¥ç¥å¥‡çš„ä½œç”¨ï¼Œå¹¶å°†è°ƒç”¨è·¯ç”±åˆ°&lt;code&gt;fn-service&lt;/code&gt; pod çš„å®ä¾‹ã€‚è¿™ä½œä¸º Kubernetes DaemonSet çš„ä¸€éƒ¨åˆ†éƒ¨ç½²ï¼Œå¹¶ä¸”é€šå¸¸æ¯ä¸ª Kubernetes èŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªè¯¥ pod çš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰äº†è¿™äº›ç®€å•çš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬åˆ›å»ºå¹¶éƒ¨ç½²ä¸€äº› Functionï¼Œå¹¶è€ƒè™‘å¦‚ä½•è¿›è¡Œæµé‡è·¯ç”±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºå’Œéƒ¨ç½²å‡½æ•°&#34;&gt;åˆ›å»ºå’Œéƒ¨ç½²å‡½æ•°&lt;/h3&gt;
&lt;p&gt;å¦‚æœæ‚¨æƒ³éµå¾ªä¸‹é¢çš„æ•™ç¨‹ï¼Œè¯·ç¡®ä¿å·²å°† &lt;a href=&#34;https://hackernoon.com/part-ii-fn-load-balancer-585babd90456&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn éƒ¨ç½²åˆ°æ‚¨çš„ Kubernetes ç¾¤é›†&lt;/a&gt;ï¼ˆæˆ‘æ­£åœ¨ä½¿ç”¨ Docker for Macï¼‰å¹¶å®‰è£… &lt;a href=&#34;https://github.com/fnproject/cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn CLI&lt;/a&gt; å¹¶è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºåº”ç”¨ç¨‹åºå’Œä¸€äº›åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºappæ–‡ä»¶å¤¹&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir hello-app &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; hello-app
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;name: hello-app&amp;#34;&lt;/span&gt; &amp;gt; app.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Create a V1 function&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fn init --name v1 --runtime go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ..
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# Create a V2 function&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;mkdir v2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; v2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;fn init --name v2 --runtime go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; ..
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ä¸Šè¿°å‘½ä»¤ï¼Œæ‚¨å·²åˆ›å»ºåº”ç”¨ç¨‹åºçš„æ ¹ç›®å½•ï¼Œåä¸º&lt;code&gt;hello-app&lt;/code&gt;ã€‚åœ¨è¿™ä¸ªç›®å½•ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸¤ä¸ªç›®å½•ï¼Œæ¯ä¸ªç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ª Functionï¼š&lt;strong&gt;v1&lt;/strong&gt;å’Œä¸€ä¸ª**v2ã€‚**Boilerplate Go Function ä½¿ç”¨&lt;code&gt;fn init&lt;/code&gt; æŒ‡å®šä½¿ç”¨ Go ä½œä¸ºè¿è¡Œæ—¶ã€‚è¿™æ˜¯ç›®å½•çš„ç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”œâ”€â”€ app.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”œâ”€â”€ v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚   â”œâ”€â”€ Gopkg.toml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚   â”œâ”€â”€ func.go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚   â”œâ”€â”€ func.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â”‚   â””â”€â”€ test.json
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;â””â”€â”€ v2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    â”œâ”€â”€ Gopkg.toml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    â”œâ”€â”€ func.go
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    â”œâ”€â”€ func.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    â””â”€â”€ test.json
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ‰“å¼€è¿™&lt;code&gt;func.go&lt;/code&gt;ä¸¤ä¸ªç›®å½•å¹¶æ›´æ–°è¿”å›çš„æ¶ˆæ¯ä»¥åŒ…å«ç‰ˆæœ¬å·â€”â€”æˆ‘ä»¬è¿™æ ·åšçš„åŸå› æ˜¯å¯ä»¥å¿«é€ŸåŒºåˆ†å“ªä¸ª Function è¢«è°ƒç”¨ã€‚ä»¥ä¸‹æ˜¯ v1 çš„&lt;code&gt;func.go&lt;/code&gt;çš„æ ·å­ï¼ˆ&lt;code&gt;Hello V1&lt;/code&gt;ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyii51b6j215u0fedhe_hu_1f254c59167fd7b4.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyii51b6j215u0fedhe_hu_1e6fe65a7a3eeb3.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyii51b6j215u0fedhe_hu_35992e194fbef2ed.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyii51b6j215u0fedhe_hu_1f254c59167fd7b4.webp&#34;
               width=&#34;760&#34;
               height=&#34;280&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ›´æ”¹å®Œæˆåå°±å¯ä»¥å°†è¿™äº›åŠŸèƒ½éƒ¨ç½²åˆ°åœ¨ Kubernetes ä¸Šè¿è¡Œçš„ Fn æœåŠ¡ã€‚ä¸ºæ­¤ï¼Œæ‚¨å¿…é¡»å°†&lt;code&gt;FN_REGISTRY&lt;/code&gt;ç¯å¢ƒå˜é‡è®¾ç½®ä¸ºæŒ‡å‘æ‚¨çš„ Docker é•œåƒä»“åº“çš„ç”¨æˆ·åã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å› ä¸ºæˆ‘ä»¬åœ¨ Kubernetes é›†ç¾¤ä¸Šè¿è¡Œ Fnï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨æœ¬åœ°æ„å»ºçš„æ˜ åƒ - å®ƒä»¬éœ€è¦æ¨é€åˆ° Kubernetes é›†ç¾¤å¯ä»¥è®¿é—®çš„ Docker é•œåƒä»“åº“ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;a href=&#34;https://github.com/fnproject/cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fn CLI&lt;/a&gt; æ¥éƒ¨ç½²è¿™äº›å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;FN_API_URL&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;http://localhost:80 fn deploy --all
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢çš„å‘½ä»¤å‡è®¾ Fn API æœåŠ¡æš´éœ²åœ¨ localhost:80 ä¸Šï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨åœ¨ Docker for Mac ä¸­ä½¿ç”¨ Kubernetes æ”¯æŒï¼‰ã€‚å¦‚æœä½¿ç”¨ä¸åŒçš„é›†ç¾¤ï¼Œåˆ™å¯ä»¥å°† FN_API_URL æ›¿æ¢ä¸º fn-api æœåŠ¡çš„å¤–éƒ¨ IP åœ°å€ã€‚&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;åœ¨ Docker æ„å»ºå’Œæ¨é€å®Œæˆä¹‹åï¼Œæˆ‘ä»¬çš„å‡½æ•°å°±è¢«éƒ¨ç½²åˆ° Fn æœåŠ¡ä¸­äº†ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è°ƒç”¨å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;éƒ¨ç½²åˆ° Fn æœåŠ¡çš„ä»»ä½•å‡½æ•°éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ URLï¼Œå…¶ä¸­åŒ…å«åº”ç”¨ç¨‹åºåç§°å’Œè·¯ç”±åç§°ã€‚é€šè¿‡æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåç§°å’Œè·¯ç”±ï¼Œæˆ‘ä»¬å¯ä»¥è®¿é—®å·²éƒ¨ç½²çš„å‡½æ•° &lt;code&gt;http://$(FN_API_URL)/r/hello-app/v1&lt;/code&gt;Â ã€‚æ‰€ä»¥ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è°ƒç”¨&lt;code&gt;v1&lt;/code&gt;è·¯ç”±ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·åšï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl http://localhost/r/hello-app/v1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åŒæ ·ï¼Œè°ƒç”¨&lt;code&gt;v2&lt;/code&gt;è·¯ç”±å°†è¿”å› Hello V2 æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä½†å‡½æ•°åœ¨å“ªé‡Œè¿è¡Œ&#34;&gt;ä½†å‡½æ•°åœ¨å“ªé‡Œè¿è¡Œï¼Ÿ&lt;/h4&gt;
&lt;p&gt;å¦‚æœæ‚¨åœ¨è°ƒç”¨å‡½æ•°æ—¶æŸ¥çœ‹æ­£åœ¨åˆ›å»º/åˆ é™¤çš„ podï¼Œæ‚¨ä¼šæ³¨æ„åˆ°æ²¡æœ‰çœŸæ­£æ”¹å˜â€”â€”å³æ²¡æœ‰ pod åˆ›å»ºæˆ–åˆ é™¤ã€‚åŸå› æ˜¯ Fn ä¸ä¼šåƒ Kubernetes pod ä¸€æ ·åˆ›å»ºå‡½æ•°ï¼Œå› ä¸ºè¿™å¤ªæ…¢äº†ã€‚ç›¸åï¼Œæ‰€æœ‰ Fn å‡½æ•°çš„éƒ¨ç½²å’Œè°ƒç”¨éƒ½å‘ç”Ÿåœ¨ fn-service pod ä¸­ã€‚ç„¶åï¼ŒFn è´Ÿè½½å‡è¡¡å™¨è´Ÿè´£éƒ¨ç½²å’Œè·¯ç”±åˆ°è¿™äº› podï¼Œä»¥æœ€ä¼˜åŒ–çš„æ–¹å¼éƒ¨ç½²/æ‰§è¡Œå‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬æ²¡æœ‰å‡½æ•°çš„ Kubernetes pod/serviceï¼Œä½† Istio è¦æ±‚æˆ‘ä»¬æ‹¥æœ‰å¯ä»¥è·¯ç”±åˆ°çš„æœåŠ¡å’Œ podã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨ Istio å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&#34;æ€è€ƒ&#34;&gt;æ€è€ƒ&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘å°†å‡½æ•°ä»å›¾ç‰‡ä¸­è§£æ”¾å‡ºæ¥ï¼Œå¹¶æ€è€ƒä¸ºäº†èƒ½è®© Istio è·¯ç”±å·¥ä½œæˆ‘ä»¬éœ€è¦åšä»€ä¹ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Kubernetes æœåŠ¡â€”â€” hello åº”ç”¨ç¨‹åºçš„å…¥å£ç‚¹&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ hello-app v1 çš„ Kubernetes deployment&lt;/li&gt;
&lt;li&gt;é’ˆå¯¹ hello-app v2 çš„ Kubernetes deployment&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­£å¦‚ Istio è·¯ç”±å…¥é—¨ä¸€èŠ‚å¼€å¤´éƒ¨åˆ†æ‰€è§£é‡Šçš„ï¼Œæˆ‘ä»¬è¿˜å¿…é¡»åœ¨ä¸¤ä¸ª deployment ä¸­æ·»åŠ ä¸€ä¸ªä»£è¡¨ç‰ˆæœ¬å’Œ &lt;code&gt;app=hello-app&lt;/code&gt; çš„æ ‡ç­¾ã€‚æœåŠ¡ä¸Šçš„é€‰æ‹©å™¨ä¼šé€‰æ‹© &lt;code&gt;app=hello-app&lt;/code&gt; çš„æ ‡ç­¾â€”â€”ç‰¹å®šäºç‰ˆæœ¬çš„æ ‡ç­¾å°†ç”± Istio è·¯ç”±è§„åˆ™æ·»åŠ ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œæ¯ä¸ªç‰¹å®šäºç‰ˆæœ¬çš„éƒ¨ç½²éƒ½éœ€è¦æœ€ç»ˆä»¥æ­£ç¡®çš„è·¯ç”±ï¼ˆä¾‹å¦‚&lt;code&gt;/r/hello-app/v1&lt;/code&gt;ï¼‰è°ƒç”¨ Fn è´Ÿè½½å‡è¡¡å™¨ã€‚ç”±äºä¸€åˆ‡éƒ½åœ¨ Kubernetes ä¸­è¿è¡Œï¼Œæˆ‘ä»¬çŸ¥é“ Fn è´Ÿè½½å‡è¡¡å™¨æœåŠ¡çš„åç§°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªä½äºéƒ¨ç½²ä¸­çš„å®¹å™¨ï¼Œå®ƒåœ¨è°ƒç”¨æ—¶å°†å‘¼å«è½¬å‘åˆ°ç‰¹å®šè·¯å¾„ä¸Šçš„ Fn è´Ÿè½½å‡è¡¡å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯å›¾ä¸­è¡¨ç¤ºçš„ä¸Šè¿°æƒ³æ³•ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyiscib2j20ce0jogm3_hu_715370442b23f76.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyiscib2j20ce0jogm3_hu_9241f09cccda4887.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyiscib2j20ce0jogm3_hu_2da36545470bd3b6.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyiscib2j20ce0jogm3_hu_715370442b23f76.webp&#34;
               width=&#34;446&#34;
               height=&#34;708&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ‰ä¸€ä¸ªæœåŠ¡ä»£è¡¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå’Œä¸¤ä¸ªç‰¹å®šäºç‰ˆæœ¬çš„éƒ¨ç½²ï¼Œå¹¶ç›´æ¥è·¯ç”±åˆ° Fn æœåŠ¡ä¸­è¿è¡Œçš„ Functionã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç®€å•çš„ä»£ç†&#34;&gt;ç®€å•çš„ä»£ç†&lt;/h4&gt;
&lt;p&gt;ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦æŸç§ä»£ç†æœåŠ¡å™¨æ¥æ¥æ”¶æ‰€æœ‰è°ƒç”¨å¹¶å°†å®ƒä»¬è½¬å‘ç»™ Fn æœåŠ¡ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ Nginx é…ç½®ï¼Œå®ƒå®Œå…¨ç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-lua&#34; data-lang=&#34;lua&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;worker_connections&lt;/span&gt;  &lt;span class=&#34;mi&#34;&gt;4096&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;http&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;n&#34;&gt;upstream&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;my&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api.default&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;listen&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;location&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;proxy_pass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;//&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;r&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hello&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Real&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;IP&lt;/span&gt;  &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remote_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;X&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Forwarded&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;For&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;remote_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;            &lt;span class=&#34;n&#34;&gt;proxy_set_header&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Host&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;$&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é…ç½®è§£é‡Šï¼šè°ƒç”¨ &lt;code&gt;/&lt;/code&gt;ï¼Œå°±å°†å…¶è½¬å‘åˆ° &lt;code&gt;http://fn-server/r/hello-app/v1&lt;/code&gt;ï¼ˆ&lt;code&gt;fn-server&lt;/code&gt;å®šä¹‰ä¸ºä¸Šæ¸¸ï¼‰ï¼Œè§£æåˆ°&lt;code&gt;my-fn-api.default&lt;/code&gt;ï¼ˆè¿™æ˜¯ fn-api åœ¨ Kubernetes çš„ &lt;code&gt;default&lt;/code&gt; namespace ä¸­çš„æœåŠ¡åç§°ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ç”¨ä¸€ä¸ªè„šæœ¬åˆ›å»ºäº†ä¸€ä¸ª Docker é•œåƒï¼Œè¯¥è„šæœ¬åŸºäºæ‚¨ä¼ å…¥çš„ä¸Šæ¸¸å’Œè·¯ç”±å€¼ç”Ÿæˆ Nginx é…ç½®ã€‚è¯¥é•œåƒåœ¨ &lt;a href=&#34;https://hub.docker.com/r/pj3677/simple-proxy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker hub ä¸Šæä¾›&lt;/a&gt;ï¼Œæ‚¨å¯ä»¥åœ¨&lt;a href=&#34;https://github.com/peterj/fn-simple-proxy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;æŸ¥çœ‹æºä»£ç ã€‚&lt;/p&gt;
&lt;h4 id=&#34;éƒ¨ç½²åˆ°-kubernetes&#34;&gt;éƒ¨ç½²åˆ° Kubernetes&lt;/h4&gt;
&lt;p&gt;ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»º Kubernetes YAML æ–‡ä»¶ï¼ŒåŒ…æ‹¬ serviceã€deployment ä»¥åŠæˆ‘ä»¬å°†ç”¨äºè®¿é—®å‡½æ•°çš„ ingressã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ deployment æ–‡ä»¶çš„æ‘˜å½•ï¼Œä»¥æ˜¾ç¤ºæˆ‘ä»¬å¦‚ä½•è®¾ç½®&lt;code&gt;UPSTREAM&lt;/code&gt;ã€ &lt;code&gt;ROUTE&lt;/code&gt;  ç¯å¢ƒå˜é‡å’Œè®¾ç½®æ ‡ç­¾ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyjnxkj2j20si0m60uq_hu_466423c7e9dc5249.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyjnxkj2j20si0m60uq_hu_330b8ffd9da7cd59.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyjnxkj2j20si0m60uq_hu_72e5d15279533fc6.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyjnxkj2j20si0m60uq_hu_466423c7e9dc5249.webp&#34;
               width=&#34;760&#34;
               height=&#34;591&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;code&gt;UPSTREAM&lt;/code&gt;å’Œ&lt;code&gt;ROUTE&lt;/code&gt;ç¯å¢ƒå˜é‡ç”± simple-proxy å®¹å™¨è¯»å–ï¼ŒNginx çš„é…ç½®æ–‡ä»¶ä¼šæ ¹æ®è¿™äº›å€¼ç”Ÿæˆã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡çš„ YAML æ–‡ä»¶ä¹Ÿæ²¡ä»€ä¹ˆç‰¹åˆ«ï¼Œæˆ‘ä»¬åªæ˜¯å°†é€‰æ‹©å™¨è®¾ç½®ä¸º&lt;code&gt;app: hello-app&lt;/code&gt;Â ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyk1a1pmj20si0jata9_hu_235818aa53aeb440.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyk1a1pmj20si0jata9_hu_4e8a0cd22945b25a.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyk1a1pmj20si0jata9_hu_5dfa289ddf6834fd.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyk1a1pmj20si0jata9_hu_235818aa53aeb440.webp&#34;
               width=&#34;760&#34;
               height=&#34;514&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ€åä¸€éƒ¨åˆ†æ˜¯ Istio ingressï¼Œæˆ‘ä»¬è®¾ç½®äº†å°†æ‰€æœ‰ä¼ å…¥æµé‡è·¯ç”±åˆ°åç«¯æœåŠ¡çš„è§„åˆ™ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyki4sz2j20si0jagnc_hu_166b0b7858fb6667.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyki4sz2j20si0jagnc_hu_ae752d868a8e99cb.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyki4sz2j20si0jagnc_hu_9c050217eaa93827.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoyki4sz2j20si0jagnc_hu_166b0b7858fb6667.webp&#34;
               width=&#34;760&#34;
               height=&#34;514&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¦éƒ¨ç½²è¿™äº›ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨&lt;code&gt;kubectl&lt;/code&gt;æ¥éƒ¨ç½² ingress å’ŒæœåŠ¡ï¼Œä½¿ç”¨&lt;code&gt;istioctl kube-inject&lt;/code&gt;æ¥æ³¨å…¥ Istio ä»£ç†ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ä¸€åˆ‡éƒ¨ç½²å®Œæ¯•ï¼Œä½ åº”è¯¥ä¼šå¾—åˆ°ä»¥ä¸‹ Kubernetes èµ„æºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;hello-app-deployment-v1ï¼ˆä½¿ç”¨æŒ‡å‘ v1 è·¯ç”±çš„ simple-proxy é•œåƒéƒ¨ç½²ï¼‰&lt;/li&gt;
&lt;li&gt;hello-app-deployment-v2ï¼ˆä½¿ç”¨æŒ‡å‘ v2 è·¯ç”±çš„ simple-proxy é•œåƒéƒ¨ç½²ï¼‰&lt;/li&gt;
&lt;li&gt;hello-app-serviceï¼ˆåœ¨ hello-app éƒ¨ç½²ä¸­é’ˆå¯¹ v1 å’Œ v2 pod çš„æœåŠ¡ï¼‰&lt;/li&gt;
&lt;li&gt;æŒ‡å‘ hello-app-service çš„ ingressï¼Œå¹¶ç»™å¢åŠ æ³¨è§£ï¼Œå°† ingress.class èµ‹å€¼ä¸ºâ€œistioâ€&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç°åœ¨ï¼Œå¦‚æœæˆ‘ä»¬è°ƒç”¨ hello-app-service æˆ–è°ƒç”¨ ingressï¼Œæˆ‘ä»¬åº”è¯¥ä» v1 å’Œ v2  å‡½æ•°ä¸­è·å¾—éšæœºå“åº”ã€‚ä»¥ä¸‹æ˜¯å¯¹ ingress è¿›è¡Œè°ƒç”¨çš„ç¤ºä¾‹è¾“å‡ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; true&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; sleep 1&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; curl http://localhost:8082&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V1&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V1&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V2&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V2&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V2&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V1&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;{â€œmessageâ€:â€Hello V1&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;â€œmessageâ€:â€Hello V2&lt;span class=&#34;s2&#34;&gt;&amp;#34;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ ä¼šæ³¨æ„åˆ°æˆ‘ä»¬éšæœºè·å¾—äº† V1 å’Œ V2 çš„å“åº” - è¿™æ­£æ˜¯æˆ‘ä»¬ç°åœ¨æƒ³è¦çš„ï¼&lt;/p&gt;
&lt;h3 id=&#34;istio-è§„åˆ™&#34;&gt;Istio è§„åˆ™&lt;/h3&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„æœåŠ¡å’Œéƒ¨ç½²å·²å¯åŠ¨å¹¶è¿è¡Œï¼ˆå’Œæ­£åœ¨è¿è¡Œï¼‰çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º Fn å‡½æ•°åˆ›å»º Istio è·¯ç”±è§„åˆ™ã€‚è®©æˆ‘ä»¬ä»¥ä¸€ä¸ªç®€å•çš„ v1 è§„åˆ™å¼€å§‹ï¼Œè¯¥è§„åˆ™å°†æ‰€æœ‰å¯¹ &lt;code&gt;hello-app-service&lt;/code&gt; çš„è°ƒç”¨ï¼ˆ&lt;code&gt;weight: 100&lt;/code&gt;ï¼‰è·¯ç”±åˆ°æ ‡è®°ä¸ºçš„ &lt;code&gt;v1&lt;/code&gt;çš„ pod ä¸Šï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoykynfcsj20si0hcwfx_hu_2ea180c1ae4d0a43.webp 400w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoykynfcsj20si0hcwfx_hu_7530cbdcbfe15238.webp 760w,
               /blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoykynfcsj20si0hcwfx_hu_7c4dffe5b1b684de.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoykynfcsj20si0hcwfx_hu_2ea180c1ae4d0a43.webp&#34;
               width=&#34;760&#34;
               height=&#34;462&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥é€šè¿‡è¿è¡Œåº”ç”¨æ­¤è§„åˆ™&lt;code&gt;kubectl apply -f v1-rule.yaml&lt;/code&gt;ã€‚æŸ¥çœ‹è¿è¡Œä¸­çš„è·¯ç”±çš„æœ€ä½³æ–¹æ³•æ˜¯è¿è¡Œä¸€ä¸ªè¿ç»­è°ƒç”¨ç«¯ç‚¹çš„å¾ªç¯â€”â€”è¿™æ ·æ‚¨å°±å¯ä»¥çœ‹åˆ°æ··åˆï¼ˆv1/v2ï¼‰å’Œå…¨éƒ¨ v1 çš„å“åº”ã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒæˆ‘ä»¬å°† &lt;code&gt;v1&lt;/code&gt; çš„è·¯ç”±è§„åˆ™å®šä¹‰ä¸º 100% çš„æƒé‡é‚£æ ·ï¼Œæˆ‘ä»¬å¯ä»¥ç±»ä¼¼åœ°å®šä¹‰ä¸€æ¡è§„åˆ™å°†æ‰€æœ‰å†…å®¹è·¯ç”±åˆ°&lt;code&gt;v2&lt;/code&gt;ï¼Œæˆ–è€…å°†è§„åˆ™è·¯ç”± 50ï¼… çš„æµé‡ &lt;code&gt;v1&lt;/code&gt; å’Œ 50ï¼… çš„æµé‡&lt;code&gt;v2&lt;/code&gt;ï¼Œå¦‚ä¸‹é¢çš„æ¼”ç¤ºæ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34;
           src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsoysfirnig20f80a0dli.gif&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘è¯æ˜äº†è¿™ä¸€ç‚¹ï¼Œç®€å•çš„ curl å‘½ä»¤ï¼Œå¥½äº†ï¼Œæˆ‘åœä¸‹æ¥ï¼šï¼‰&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œ&lt;a href=&#34;https://medium.com/@carimura/the-importance-of-devops-to-serverless-f671070efb9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chad Arimura&lt;/a&gt; åœ¨ä»–å…³äº DevOps å¯¹æ— æœåŠ¡å™¨çš„é‡è¦æ€§çš„æ–‡ç« ä¸­è¿›ä¸€æ­¥è¯´æ˜äº†è¿™ä¸€ç‚¹ï¼ˆè­¦æŠ¥ï¼šDevOps ä¸ä¼šæ¶ˆå¤±ï¼‰ã€‚ä»–ä½¿ç”¨ Spinnaker å¯¹åœ¨å®é™… Kubernetes é›†ç¾¤ä¸Šè¿è¡Œçš„ Fn å‡½æ•°è¿›è¡ŒåŠ æƒè“ç»¿éƒ¨ç½²ã€‚çœ‹çœ‹ä»–çš„æ¼”ç¤ºè§†é¢‘ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34;
           src=&#34;https://cloudnativecn.com/blog/traffic-routing-between-fn-functions-using-fn-project-and-istio-fd/61411417ly1fsozs9eudag20w00k0kk0.gif&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h3&gt;
&lt;p&gt;æ¯ä¸ªäººå¯èƒ½éƒ½ä¼šè®¤åŒæœåŠ¡ç½‘æ ¼åœ¨æ— æœåŠ¡å‡½æ•°é¢†åŸŸçš„é‡è¦æ€§ã€‚å¦‚æœä½¿ç”¨æœåŠ¡ç½‘æ ¼ï¼ˆå¦‚è·¯ç”±ã€æµé‡é•œåƒã€æ•…éšœæ³¨å…¥å’Œå…¶ä»–ä¸€äº›ä¸œè¥¿ï¼‰ï¼Œå¯ä»¥è·å¾—è®¸å¤šå¥½å¤„ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘çœ‹åˆ°çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ç¼ºä¹ä»¥å¼€å‘äººå‘˜ä¸ºä¸­å¿ƒçš„å·¥å…·ï¼Œè®©å¼€å‘äººå‘˜èƒ½å¤Ÿåˆ©ç”¨æ‰€æœ‰è¿™äº›æ¼‚äº®å’Œé…·ç‚«çš„åŠŸèƒ½ã€‚è®¾ç½®è¿™ä¸ªé¡¹ç›®å’Œæ¼”ç¤ºæ¥è¿è¡Œå‡ æ¬¡å¹¶ä¸å¤ªå¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™æ˜¯ä¸¤ä¸ªå‡½æ•°ï¼Œå®ƒä»¬å°±è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå¹¶æ²¡æœ‰åˆ«çš„ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¼”ç¤ºã€‚è€ƒè™‘è¿è¡Œæ•°ç™¾æˆ–æ•°åƒä¸ªå‡½æ•°å¹¶åœ¨å®ƒä»¬ä¹‹é—´å»ºç«‹ä¸åŒçš„è·¯ç”±è§„åˆ™ã€‚ç„¶åç®¡ç†æ‰€æœ‰è¿™äº›å‡½æ•°ã€‚æˆ–è€…æ¨å‡ºæ–°ç‰ˆæœ¬å¹¶ç›‘æ§æ•…éšœã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸ºåœ¨è¿›è¡Œå‡½æ•°ç®¡ç†ã€æœåŠ¡ç½‘æ ¼ç®¡ç†ã€è·¯ç”±ã€å…¶ä»–é…·ç‚«çš„åŠŸèƒ½æ–¹é¢æœ‰å¾ˆå¤šçš„æœºä¼šï¼ˆå’ŒæŒ‘æˆ˜ï¼‰ï¼Œå› æ­¤å¯¹äºæ¯ä¸ªå‚ä¸è€…éƒ½å¾ˆç›´è§‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è°¢è°¢é˜…è¯»&#34;&gt;è°¢è°¢é˜…è¯»&lt;/h3&gt;
&lt;p&gt;å¯¹è¿™ç¯‡æ–‡ç« çš„ä»»ä½•åé¦ˆæˆ‘éƒ½éå¸¸æ¬¢è¿ï¼ä½ ä¹Ÿå¯ä»¥åœ¨ &lt;a href=&#34;http://twitter.com/pjausovec&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Twitter&lt;/a&gt; å’Œ &lt;a href=&#34;http://github.com/peterj&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt; ä¸Šå…³æ³¨æˆ‘ã€‚å¦‚æœä½ å–œæ¬¢è¿™ä¸€ç‚¹ï¼Œå¹¶å¸Œæœ›åœ¨æˆ‘å†™æ›´å¤šä¸œè¥¿æ—¶å¾—åˆ°é€šçŸ¥ï¼Œä½ åº”è¯¥è®¢é˜…&lt;a href=&#34;https://tinyletter.com/pjausovec&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘çš„é€šè®¯&lt;/a&gt;ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åˆ©ç”¨ Let&#39;s Encrypt ä¸º Istioï¼ˆEnvoyï¼‰æ·»åŠ  TLS æ”¯æŒ</title>
      <link>https://cloudnativecn.com/blog/istio-envoy-cert-manager-lets-encrypt-for-tls/</link>
      <pubDate>Mon, 25 Jun 2018 20:30:52 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-envoy-cert-manager-lets-encrypt-for-tls/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://medium.com/@prune998/istio-envoy-cert-manager-lets-encrypt-for-tls-14b6a098f289&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ„Ÿè°¢ Laurent Demailly çš„è¯„è®ºï¼Œè¿™é‡Œæœ‰ä¸€äº›æ›´æ–°ã€‚è¿™ç¯‡æ–‡ç« å·²ç»å¾—åˆ°äº†æ›´æ–°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç°åœ¨æœ‰ä¸€ä¸ª &lt;a href=&#34;https://github.com/kubernetes/charts/tree/master/stable/cert-manager&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cert-Manager å®˜æ–¹ Helm chart&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Istio Ingress ä¹Ÿæ”¯æŒåŸºäº HTTP/2 çš„ GRPC&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;istio&#34;&gt;Istio&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; æ˜¯ç®¡ç†å¾®æœåŠ¡ä¸–ç•Œä¸­æ•°æ®æµçš„ä¸€ç§æ–°æ–¹å¼ã€‚äº‹å®ä¸Šï¼Œè¿™å¯¹æˆ‘æ¥è¯´æ›´æ˜¯å¦‚æ­¤ã€‚äººä»¬ä¸åœçš„è°ˆè®ºå¾®æœåŠ¡ä¸å•ä½“åº”ç”¨ï¼Œè¯´å¾®æœåŠ¡æ›´å¥½å¼€å‘ï¼Œæ˜“äºç»´æŠ¤ï¼Œéƒ¨ç½²æ›´å¿«ã€‚ã€‚ã€‚å‘ƒï¼Œä»–ä»¬æ˜¯å¯¹çš„ï¼Œä½†å¾®æœåŠ¡ä¸åº”è¯¥ä»…ä»…æ˜¯å°åº”ç”¨ç¨‹åºä¹‹é—´äº’ç›¸é€šä¿¡ã€‚å¾®æœåŠ¡åº”è¯¥è€ƒè™‘æ²‰æ·€ä¸ºä½ çš„åŸºç¡€è®¾æ–½çš„è¿™ç§æ–¹å¼ã€‚è€ƒè™‘å¦‚ä½•å†³å®šæ‚¨çš„â€œç®€å•â€åº”ç”¨ç¨‹åºå…¬å¼€æŒ‡æ ‡å’Œæ—¥å¿—çš„æ–¹å¼ï¼Œè€ƒè™‘æ‚¨å¦‚ä½•è·Ÿè¸ªçŠ¶æ€ï¼Œè€ƒè™‘å¦‚ä½•æ§åˆ¶æœåŠ¡ä¹‹é—´çš„æµç¨‹ä»¥åŠå¦‚ä½•ç®¡ç†é”™è¯¯ï¼Œè¿™äº›é—®é¢˜åº”è¯¥æ˜¯åšå¾®æœåŠ¡åº”è¯¥è€ƒè™‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆ Istio èƒ½å¤Ÿåœ¨è¿™ä¸ªå¾®æœåŠ¡ä¸–ç•Œä¸­å¢åŠ ä»€ä¹ˆï¼Ÿ&lt;/p&gt;
&lt;p&gt;Istio æ˜¯ä¸€ä¸ªæœåŠ¡ç½‘æ ¼çš„å®ç°ï¼&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»€ä¹ˆï¼ŸæœåŠ¡ç½‘æ ¼ï¼Ÿæˆ‘ä»¬å·²ç»æœ‰äº† Kubernetes APIï¼Œæˆ‘ä»¬éœ€è¦â€œç½‘æ ¼â€å—ï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œæ˜¯çš„ï¼Œä½ éœ€è¦æœåŠ¡ç½‘æ ¼ã€‚æˆ‘ä¸ä¼šè§£é‡Šä½¿ç”¨å®ƒçš„æ‰€æœ‰å¥½å¤„ï¼Œä½ ä¼šåœ¨ç½‘ä¸Šæ‰¾åˆ°è¶³å¤Ÿçš„æ–‡æ¡£ã€‚ä½†æ˜¯ç”¨ä¸€å¥è¯æ¥è¯´ï¼ŒæœåŠ¡ç½‘æ ¼å°±æ˜¯å°†æ‚¨æ‰€æœ‰çš„æœåŠ¡æä¾›ç»™å…¶ä»–æœåŠ¡çš„æŠ€æœ¯ã€‚äº‹å®ä¸Šï¼Œå®ƒè¿˜å¼ºåˆ¶æ‰§è¡Œæ‰€æœ‰â€œå¾®æœåŠ¡â€æœ€ä½³å®è·µï¼Œä¾‹å¦‚æ·»åŠ æµé‡å’Œé”™è¯¯æŒ‡æ ‡ï¼Œæ·»åŠ å¯¹ OpenTracingï¼ˆZipkin å’Œ Jaeggerï¼‰çš„æ”¯æŒï¼Œå…è®¸æ§åˆ¶é‡è¯•ï¼Œé‡‘ä¸é›€éƒ¨ç½²ã€‚ã€‚ã€‚é˜…è¯» &lt;a href=&#34;https://istio.io/docs/concepts/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio doc&lt;/a&gt; ï¼&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œå›åˆ°æœ¬è¯é¢˜&amp;hellip;&lt;/p&gt;
&lt;h3 id=&#34;å¿…è¦æ¡ä»¶&#34;&gt;å¿…è¦æ¡ä»¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å»ºè®®è¿è¡Œåœ¨ Kubernetes1.7 åŠä»¥ä¸Šçš„é›†ç¾¤ç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ªæˆ–å¤šä¸ª DNS åŸŸå&lt;/li&gt;
&lt;li&gt;è®© Istio åˆ©ç”¨ Ingress Controller åœ¨ä½ çš„é›†ç¾¤ä¸­å·¥ä½œ&lt;/li&gt;
&lt;li&gt;å°†ä¸Šé¢çš„ DNS åŸŸåé…ç½®ä¸ºæŒ‡å‘ Istio Ingress IP&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ssl&#34;&gt;SSL&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;SSL&lt;/strong&gt; æ˜¯å®‰å…¨çš„ï¼ˆå¾ˆå¥½ï¼‰ï¼Œä½†å®ƒé€šå¸¸æ˜¯è½¯ä»¶ä¸­å®ç°çš„æœ€åä¸€ä»¶äº‹ã€‚ä¸ºä»€ä¹ˆï¼Ÿä¹‹å‰å®ƒå®ç°èµ·æ¥æ˜¯â€œå¾ˆå›°éš¾çš„â€ï¼Œä½†æˆ‘ç°åœ¨çœ‹ä¸å‡ºä»»ä½•ç†ç”±ã€‚&lt;a href=&#34;https://letsencrypt.org/how-it-works/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Let&amp;rsquo;s Encrypt&lt;/a&gt; åˆ›å»ºä¸€ä¸ªæ–°çš„èŒƒä¾‹ï¼Œå®ƒçš„ DAMN å¾ˆå®¹æ˜“ä½¿ç”¨ API è°ƒç”¨åˆ›å»º Valide SSL è¯ä¹¦ï¼ˆåè®®è¢«ç§°ä¸º ACME &amp;hellip;ï¼‰ã€‚å®ƒä¸ºæ‚¨æä¾› 3 ç§éªŒè¯æ‚¨æ˜¯åŸŸåæ‰€æœ‰è€…çš„æ–¹æ³•ã€‚ä½¿ç”¨ DNSï¼Œä½¿ç”¨ HTTP æˆ–ç¬¬ä¸‰ç§è§£å†³æ–¹æ¡ˆçš„â€œç§˜å¯†ä»¤ç‰Œâ€ä¸å†å¯ç”¨ï¼Œå› ä¸ºå®ƒè¯æ˜æ˜¯ä¸å®‰å…¨çš„ã€‚å› æ­¤ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Let&amp;rsquo;s Encrypt æä¾›ç»™æ‚¨çš„ç‰¹æ®Š TXT è®°å½•è®¾ç½®æ‚¨çš„ DNSï¼Œæˆ–è€…å°†å…¶æ”¾å…¥ Web æ ¹è·¯å¾„ï¼ˆå¦‚ &lt;code&gt;/.well-known/acme-challenge/xxx&lt;/code&gt;ï¼‰ä¸­ï¼Œç„¶åè®©æˆ‘ä»¬çš„åŠ å¯†éªŒè¯å®ƒã€‚è¿™çœŸçš„å¾ˆç®€å•ï¼Œä½†å·®ä¸å¤šåªèƒ½è¿™æ ·ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€äº›å¼€å‘è€…å†³å®šç›´æ¥åœ¨åº”ç”¨ç¨‹åºå†…éƒ¨å®ç° ACME åè®®ã€‚è¿™æ˜¯æ¥è‡ª &lt;a href=&#34;https://traefik.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Traefik&lt;/a&gt; çš„äººçš„å†³å®šã€‚&lt;a href=&#34;https://caddyserver.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Caddy&lt;/a&gt; ä¹Ÿåšäº†ä¸€äº›ç±»ä¼¼çš„â€œæ’ä»¶â€ã€‚è¿™å¾ˆé…·ï¼Œå› ä¸ºæ‚¨åªéœ€å®šä¹‰è™šæ‹Ÿä¸»æœºï¼Œåº”ç”¨ç¨‹åºè´Ÿè´£æ”¶é›†å’Œæ›´æ–°è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;å¯æ‚²çš„æ˜¯ï¼ŒIstioï¼ˆå’Œåº•å±‚çš„ Envoy ä»£ç†ï¼‰æ²¡æœ‰ã€‚è¿™å°±æ˜¯è¿™ç¯‡åšæ–‡çš„è¦ç‚¹ï¼&lt;/p&gt;
&lt;h3 id=&#34;cert-manager&#34;&gt;CERT-Manager&lt;/h3&gt;
&lt;p&gt;è®¸å¤šäººè®¤è¯†åˆ°ï¼Œå¦‚æœä¸æ˜¯æ‰€æœ‰è½¯ä»¶éƒ½å¯ä»¥å®ç° ACME åè®®ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€ä¸ªå·¥å…·æ¥ç®¡ç†ï¼ˆå¦‚è¯·æ±‚ï¼Œæ›´æ–°ï¼ŒåºŸå¼ƒï¼‰SSL è¯ä¹¦ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ LEGO æˆç«‹çš„åŸå› ã€‚ç„¶å Kubernetes çš„ Kube-LEGOï¼Œç„¶å&amp;hellip;&amp;hellip;å¹¶ä¸”æœ€ç»ˆï¼Œä»–ä»¬å‡ ä¹éƒ½åŒæ„å°†æ‰€æœ‰å†…å®¹æ”¾å…¥ &lt;a href=&#34;https://github.com/jetstack/cert-manager&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cert-Manager&lt;/a&gt; ï¼&lt;/p&gt;
&lt;p&gt;Cert-Manager é™„å¸¦ helm chartï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“éƒ¨ç½²ï¼Œåªéœ€æŒ‰ç…§æ–‡æ¡£æ‰§è¡Œå‘½ä»¤å³å¯ï¼Œå°±åƒä¸‹é¢ä»‹ç»çš„è¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨æœ‰ä¸€ä¸ª &lt;a href=&#34;https://github.com/kubernetes/charts/tree/master/stable/cert-manager&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cert-Manager&lt;/a&gt; çš„&lt;a href=&#34;https://github.com/kubernetes/charts/tree/master/stable/cert-manager&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹ Helm å›¾è¡¨&lt;/a&gt;ï¼Œä½ ä¸éœ€è¦ &lt;code&gt;git clone&lt;/code&gt;Â ï¼Œåªéœ€è¦åš &lt;code&gt;helm install&lt;/code&gt;Â ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone https://github.com/jetstack/cert-manager
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; cert-manager
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# check out the latest release tag to ensure we use a supported version of cert-manager&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git checkout v0.2.3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm install &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--name cert-manager &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--namespace kube-system &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--set ingressShim.extraArgs&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{--default-issuer-name=letsencrypt-prod,--default-issuer-kind=ClusterIssuer}&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;contrib/charts/cert-manager
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯¥å‘½ä»¤å°†å¯åŠ¨ kube-system å‘½åç©ºé—´ä¸­çš„ Cert-Manager podã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨è¿™ä¸€è¡Œé…ç½®&lt;code&gt;--default-issuer-kind=ClusterIssuer&lt;/code&gt; æ‰€ä»¥æˆ‘åªèƒ½åˆ›å»ºä¸€æ¬¡æˆ‘çš„ Issuerã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»€ä¹ˆæ˜¯ issuerï¼Ÿ&lt;/p&gt;&lt;/blockquote&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å®ƒçš„å·¥ä½œåŸç†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½ åˆ›å»ºä¸€ä¸ª Issuer é…ç½®ï¼Œå®ƒå°†å‘Šè¯‰ Cert-Manager å¦‚ä½•ä½¿ç”¨ ACME APIï¼ˆä½ é€šå¸¸åªæœ‰ 2 ä¸ªï¼Œstaging å’Œ prodï¼‰&lt;/li&gt;
&lt;li&gt;æ‚¨åˆ›å»ºä¸€ä¸ªè¯ä¹¦å®šä¹‰ï¼Œå‘Šè¯‰å“ªäº›åŸŸéœ€è¦ SSL&lt;/li&gt;
&lt;li&gt;Cert-Manager ä¸ºæ‚¨ç”³è¯·è¯ä¹¦&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘ä»¬æ¥åˆ›å»º Issuerã€‚åœ¨åˆ›å»º ClusterIssuers æ—¶ï¼Œæˆ‘ä¸å…³å¿ƒç‰¹å®šçš„å‘½åç©ºé—´ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;certmanager.k8s.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterIssuer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-prod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kube-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;acme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#The ACME server URL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;srver&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://acme-v01.api.letsencrypt.org/directory&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#ç”¨äºæ³¨å†Œ ACME çš„ç”µå­é‚®ä»¶åœ°å€&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;me@domain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#ç”¨äºå­˜å‚¨ ACME å¸æˆ·ç§é’¥çš„ç§˜å¯†åç§°&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;privateKeySecretRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-prod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#å¯ç”¨ HTTP-01 è´¨è¯¢æä¾›ç¨‹åº&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;certmanager.k8s.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterIssuer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt -staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kube-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;acme &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ACME çš„æœåŠ¡å™¨ URL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https://acme-staging.api.letsencrypt.org/directory&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ç”¨äº ACME æ³¨å†Œçš„ç”µå­é‚®ä»¶åœ°å€&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;staging + me@domain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ç”¨äºå­˜å‚¨ ACME å¸æˆ·ç§é’¥çš„å¯†é’¥çš„ åç§°&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;privateKeySecretRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å¯ç”¨ HTTP-01 è´¨è¯¢æä¾›ç¨‹åº&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶å&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f certificate-issuer.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç°åœ¨ä½ åº”è¯¥æœ‰ä¸€ä¸ªæœ‰æ•ˆçš„ Cert-Managerã€‚æ‚¨éœ€è¦ä¸ºæ‚¨çš„åŸŸ/æœåŠ¡åˆ›å»ºé…ç½®ï¼Œä»¥ä¾¿ Istio Ingress å¯ä»¥é€‰æ‹©æ­£ç¡®çš„è¯ä¹¦ã€‚&lt;/p&gt;
&lt;h3 id=&#34;istio-ingress&#34;&gt;Istio Ingress&lt;/h3&gt;
&lt;p&gt;Ingress æ˜¯æ‚¨å…¬å¼€æœåŠ¡çš„å‰ç«¯ Web ä»£ç†ï¼ˆè¿™æ˜¯ä½ çš„ä¼˜åŠ¿&amp;hellip;&amp;hellip;æˆ‘è¯´ WEB ä»£ç†ï¼Œå› ä¸ºå®ƒç°åœ¨åªæ”¯æŒ HTTP/HTTPSï¼‰ã€‚ä½†è®©æˆ‘ä»¬å‡è®¾ä½ çŸ¥é“å…³äº Ingress çš„ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ›´æ–°&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™ä¸æ˜¯ä¸€ä¸ªçœŸæ­£çš„æ›´æ–°ï¼Œè€Œæ˜¯ä¸€ä¸ªæ›´ç²¾ç¡®çš„æè¿°ï¼ŒIngress ä¹Ÿæ”¯æŒ GRPCï¼Œå½“ç„¶è¿™æ˜¯ HTTP/2ã€‚&lt;/p&gt;
&lt;p&gt;Ingress çš„ç¥å¥‡ä¹‹å¤„åœ¨äºå®ƒåœ¨ Kubernetes API ä¸­çš„å®ç°ã€‚æ‚¨åˆ›å»ºä¸€ä¸ª Ingress Manifestï¼Œå¹¶å°†æ‚¨çš„æ‰€æœ‰æµé‡å¼•å¯¼è‡³æ­£ç¡®çš„ Podï¼å‘Šè¯‰ä½ è¿™ç§æ–¹å¼å°±æ˜¯ç¥å¥‡çš„é­”æ³•ï¼ˆå› ä¸ºä½ å¹¶ä¸çŸ¥é“å®ƒå¦‚ä½•å¼•å¯¼çš„æµé‡ï¼‰ ï¼&lt;/p&gt;
&lt;p&gt;å¾ˆå¥½ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™å°±æ˜¯ä»¤äººç¥å¥‡çš„é»‘é­”æ³•ï¼&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼ŒTraefik Ingress ç»‘å®šç«¯å£ 80 å’Œ 443ï¼Œç®¡ç†è¯ä¹¦ï¼Œå› æ­¤æ‚¨ä¸º &lt;a href=&#34;http://www.mydomain.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.mydomain.com&lt;/a&gt; åˆ›å»ºå…¥å£ï¼Œå¹¶ä¸”å®ƒæ­£å¸¸å·¥ä½œï¼Œå› ä¸ºå®ƒæ­£åœ¨åšæ‰€æœ‰äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº Istioï¼Œå½“æ‚¨ä½¿ç”¨ Cert-Manager æ—¶ï¼Œè¿˜æœ‰ä¸€äº›æ­¥éª¤ã€‚è¦å¿«ç‚¹ï¼Œåœ¨è¿™é‡Œä»–ä»¬ï¼ˆæˆªè‡³ 2018/01ï¼Œå®ƒå¯èƒ½å¾ˆå¿«å°±ä¼šæ”¹å˜ï¼‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸ºåŸŸ &lt;a href=&#34;http://www.mydomain.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.mydomain.com&lt;/a&gt; åˆ›å»ºè¯ä¹¦è¯·æ±‚&lt;/li&gt;
&lt;li&gt;Cert-Manager å°†é€‰æ‹©è¿™ä¸ªå®šä¹‰å¹¶åˆ›å»ºä¸€ä¸ª podï¼Œå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¯ä»¥å›ç­” ACME é—®é¢˜çš„ Web æœåŠ¡å™¨ï¼ˆ&lt;a href=&#34;https://github.com/jetstack/cert-manager/blob/master/docs/user-guides/ingress-shim.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ingress-Shim&lt;/a&gt;ï¼‰å®ƒè¿˜å°†åˆ›å»ºä¸€ä¸ªæœåŠ¡å’Œä¸€ä¸ª HTTP Ingressï¼Œä»¥ä¾¿å®ƒå¯ä»¥é€šè¿‡ Lets Encrypt æœåŠ¡å™¨&lt;/li&gt;
&lt;li&gt;ä»¥å‰çš„è§‚ç‚¹ä¸é€‚ç”¨äºæ‚¨ä½¿ç”¨ Istio Ingressï¼Œå› æ­¤æ‚¨å¿…é¡»åˆ é™¤ &lt;code&gt;Service&lt;/code&gt; å’Œ&lt;code&gt;Ingress&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæŒ‡å‘ Pod çš„è‡ªå·±çš„æœåŠ¡&lt;/li&gt;
&lt;li&gt;åˆ›å»ºæ‚¨è‡ªå·±çš„ Istio Ingressï¼Œä»¥ä¾¿å¯ä»¥è®¿é—® pod&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¬èµ·æ¥å¾ˆç–¯ç‹‚ï¼Ÿé‚£ä¹ˆï¼Œç°åœ¨å‘¢ã€‚å®ƒç”šè‡³æ˜¯æ¶æ¢¦ï¼š&lt;/p&gt;
&lt;p&gt;åœ¨ Istio ä¸­ä½¿ç”¨ Cert-Manager æ—¶ï¼Œæ‚¨åªèƒ½æ‹¥æœ‰ä¸€ä¸ªå¤–éƒ¨æœåŠ¡è¯ä¹¦ï¼æ‰€ä»¥ä½ å¿…é¡»æ·»åŠ æ‰€æœ‰å…¬å…± DNS åç§°åˆ°è¿™ä¸ªè¯ä¹¦ï¼&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥æˆ‘ä»¬æ¥å®ç°å®ƒ&amp;hellip;&lt;/p&gt;
&lt;h4 id=&#34;è¯ä¹¦&#34;&gt;è¯ä¹¦&lt;/h4&gt;
&lt;p&gt;æŠŠè¿™ä¸ªæ¸…å•æ”¾åœ¨ä¸€ä¸ªåƒ &lt;em&gt;certificate-istio.yml&lt;/em&gt; è¿™æ ·çš„æ–‡ä»¶ä¸­Â ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;certmanager.k8s.io/v1alpha1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Certificate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;meteadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-certs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secretName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-certs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;issuerRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; 	&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; 	&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterIssuer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;commonName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dnsNames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;acme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http01&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ingressClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;domains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; 	  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°çš„æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬æƒ³è¦ä¸€ä¸ªè¯ä¹¦&lt;/li&gt;
&lt;li&gt;å®ƒå°†æ”¯æŒ 2 ä¸ªåŸŸå &lt;em&gt;&lt;a href=&#34;https://www.mydomain.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.mydomain.com&lt;/a&gt;&lt;/em&gt; å’Œ &lt;em&gt;mobile.mydomain.com&lt;/em&gt;&lt;/li&gt;
&lt;li&gt;æ­¤è¯ä¹¦è¯·æ±‚ä¸ Istio Ingressï¼ˆistio-systemï¼‰ä½äºåŒä¸€ä¸ªå‘½åç©ºé—´ä¸­ï¼Œ&lt;/li&gt;
&lt;li&gt;å®ƒå°†ä½¿ç”¨ HTTP-01 å›ç­” ACME çš„é—®é¢˜&lt;/li&gt;
&lt;li&gt;Istio Ingressï¼ˆEnvoy ä»£ç†ï¼‰æœŸæœ›è¯¥è¯ä¹¦å°†è¢«å¤åˆ¶åˆ°ä¸€ä¸ªåä¸º &lt;em&gt;istio-ingress-certs&lt;/em&gt; çš„  K8s  Secret ä¸­ï¼ˆè¿™æ˜¯è¶…çº§é‡è¦ï¼Œæœ€å¥½ä¸è¦ä¿®æ”¹è¿™ä¸ªåå­—ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶åï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f certificate-istio.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å®Œæˆä¹‹åï¼Œæ‚¨é€šè¿‡ cert-manager pod å°†å¯ä»¥çœ‹åˆ° Istio Ingress çš„æ—¥å¿—æƒ…å†µï¼Œä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-ingress-7f8468bb7b-pxl94 istio-ingress &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-01-23T21:01:53.341Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /.well-known/acme-challenge/xxxxxxx HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;503&lt;/span&gt; UH &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;19&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.20.5.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Go-http-client/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxx&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.domain.com&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istio-ingress-7f8468bb7b-pxl94 istio-ingress &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2018-01-23T21:01:58.287Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /.well-known/acme-challenge/xxxxxx HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;503&lt;/span&gt; UH &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;19&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;10.20.5.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Go-http-client/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxxx&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;mobile.domain.com&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ˜¯å› ä¸º Let&amp;rsquo;s Encrypt æœåŠ¡å™¨æ­£åœ¨è½®è¯¢éªŒè¯ä»¤ç‰Œï¼Œå¹¶ä¸”æ‚¨çš„è®¾ç½®å°šæœªè¿è¡Œã€‚æˆªè‡³ç›®å‰ä½ çš„è®¾ç½®çœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://raw.githubusercontent.com/servicemesher/website/master/content/blog/istio-envoy-cert-manager-lets-encrypt-for-tls/61411417ly1fshj4soh0mj20m80j3mzg.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨æ˜¯åˆ é™¤ç”± Cert-Manager åˆ›å»ºçš„ä¸éœ€è¦çš„ä¸œè¥¿çš„æ—¶å€™äº†ã€‚ä½¿ç”¨æ‚¨æœ€æ“…é•¿çš„ K8s å·¥å…·ï¼Œå¦‚ä»ªè¡¨æ¿æˆ– kubectlï¼Œå¹¶ä» &lt;em&gt;istio-system&lt;/em&gt; å‘½åç©ºé—´ä¸­åˆ é™¤ Service å’Œ Ingressã€‚å®ƒä»¬å°†è¢«å‘½åä¸º &lt;strong&gt;cm-istio-ingress-certs-xxxx&lt;/strong&gt;ã€‚å¦‚æœæ‚¨çš„è¯ä¹¦ç”³è¯·ä¸­æœ‰è®¸å¤šåŸŸåï¼Œä½ åº”è¯¥åˆ é™¤å¤šä½™çš„åŸŸåã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œä¸è¦åˆ  podï¼ï¼ˆå¦‚æœæœ‰é”™è¯¯ï¼Œå®ƒä»¬å°†è¢«é‡æ–°åˆ›å»ºï¼‰&lt;/p&gt;
&lt;p&gt;ï¼ˆä½œä¸ºæé†’ï¼š&lt;code&gt;kubectl -n istio-system delete cm-istio-ingress-certs-xxxx&lt;/code&gt;ï¼‰&lt;/p&gt;
&lt;h4 id=&#34;æœåŠ¡&#34;&gt;æœåŠ¡&lt;/h4&gt;
&lt;p&gt;æ—¢ç„¶æ‚¨çš„è®¾ç½®å¾ˆå¹²å‡€ï¼Œæ‚¨å¯ä»¥ç»§ç»­å¹¶é‡æ–°åˆ›å»ºæ‰€éœ€çš„ Service å’Œ ingressã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨éœ€è¦å°½å¯èƒ½å¤šçš„ Serviceï¼Œå› ä¸ºæ‚¨æ‹¥æœ‰ä¸åŒçš„åŸŸåã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œ2.è¿™æ˜¯æ¸…å•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cert-manager-ingress-www&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;auth.istio.io/8089&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;NONE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8089&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-certingr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certmanager.k8s.io/domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cert-manager-ingress-mobile&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;auth.istio.io/8089&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;NONE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8089&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-certingr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certmanager.k8s.io/domain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶å&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f certificate-services.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;ç„¶åä½ å¯ä»¥æ£€æŸ¥ä½ çš„ Serviceã€‚æ¯ä¸ª Service éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæŒ‡å®šçš„ç›®æ ‡ podã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼ŒService åç§°æ— å…³ç´§è¦ã€‚è¿™å–å†³äºä½ ç»™å‡ºä¸€ä¸ªç‰¹å®šçš„åç§°ï¼Œæ‰€ä»¥ä½ ä¸ä¼šæ··æ·†ä½ æ‰€æœ‰çš„åŸŸåã€‚&lt;/p&gt;
&lt;h4 id=&#34;ingress&#34;&gt;Ingress&lt;/h4&gt;
&lt;p&gt;ç°åœ¨æ˜¯åˆ›å»º Ingress çš„æ—¶å€™äº†ï¼Œå› æ­¤æ‚¨çš„â€œACME Token Podsâ€å¯ä»¥ä»å¤–éƒ¨è®¿é—®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;extensions/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes.io/ingress.class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certmanager.k8s.io/acme-challenge-type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http01&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certmanager.k8s.io/cluster-issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-certs-mgr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.well-known/acme-challenge/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cert-manager-ingress-www&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-certingr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.well-known/acme-challenge/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cert-manager-ingress-mobile&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http-certingr&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å†æ¬¡ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œéœ€è¦æ³¨æ„ä¸€äº›äº‹æƒ…ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;è¯ä¹¦ï¼ŒService å’Œ Ingress éœ€è¦åœ¨åŒä¸€ä¸ªå‘½åç©ºé—´ä¸­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ingress class  æ˜¯ &lt;em&gt;Istio&lt;/em&gt;ï¼ˆæ˜¾ç„¶ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ &lt;em&gt;staging&lt;/em&gt; Issuerï¼ˆè®°ä½æˆ‘ä»¬ç¬¬ä¸€æ­¥åˆ›å»ºçš„ Issuerï¼‰ã€‚
æ‚¨å¿…é¡»æ ¹æ®åˆ›å»ºçš„&lt;code&gt;Issuer&lt;/code&gt;æˆ–&lt;code&gt;ClusterIssuer&lt;/code&gt;ä½¿ç”¨æ­£ç¡®çš„ annotationã€‚æ–‡æ¡£ä½äº &lt;a href=&#34;https://github.com/jetstack/cert-manager/blob/master/docs/user-guides/ingress-shim.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ingress-Shim&lt;/a&gt; é¡¹ç›®ä¸­&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æˆ‘ä»¬å¿…é¡»ä¸ºæ¯ä¸ªåŸŸåˆ›å»ºä¸€ä¸ª HTTP è§„åˆ™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ &lt;em&gt;backend/srvice&lt;/em&gt; å¿…é¡»æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„æœåŠ¡ï¼Œä»¥åŠåŸŸååŒ¹é…ï¼Œæ‰€ä»¥ï¼š&lt;/p&gt;
&lt;p&gt;ç”¨ &lt;em&gt;&lt;a href=&#34;https://www.mydomain.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.mydomain.com&lt;/a&gt;&lt;/em&gt; â†’serviceName cert-manager-ingress-wwwâ†’pod cm-istio-ingress-certs-xxxï¼Œå…¶ä¸­ label &lt;em&gt;certmanager.k8s.io/domain =&lt;/em&gt; &lt;em&gt;&lt;a href=&#34;https://www.mydomain.com&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;www.mydomain.com&lt;/a&gt;&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å†æ¬¡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;kubectl apply -f certificate-ingress.yml&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å°±æ˜¯è¿™æ ·ï¼&lt;/p&gt;
&lt;p&gt;æ£€æŸ¥ Istio-Ingress æ—¥å¿—ï¼Œæ‚¨åº”è¯¥çœ‹åˆ°å‡ ä¸ª*â€œGET /.well-known/acme-challenge/xxx HTTP / 1.1â€200*&lt;/p&gt;
&lt;h3 id=&#34;ç¤ºä¾‹åº”ç”¨ç¨‹åº&#34;&gt;ç¤ºä¾‹åº”ç”¨ç¨‹åº&lt;/h3&gt;
&lt;p&gt;æˆ‘ä½¿ç”¨äº†ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ç¨‹åºæ¥éªŒè¯æˆ‘çš„è®¾ç½®æ­£åœ¨å·¥ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;extensions/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes.io/ingress.class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes.io/ingress.allow-http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;false&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;secretName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-certs&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;extensions/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Ingress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kubernetes.io/ingress.class&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingress-http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;www.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/.*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backend&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servicePort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mobile.mydomain.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ReplicationController&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kelseyhightower/helloworld:v1&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ReplicationController&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld-v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;kelseyhightower/helloworld:v2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;helloworld&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¿…é¡»å†æ¬¡æ„Ÿè°¢ Kelsey Hightower æ˜¯ä»–æä¾›çš„ HelloWorld ç¤ºä¾‹åº”ç”¨ç¨‹åºğŸ™&lt;/p&gt;
&lt;p&gt;ç„¶åï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n default apply -f helloworld.yml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œæ‚¨éœ€è¦ä¸ºæ‰€æœ‰ HTTPS åŸŸåä½¿ç”¨ä¸€ä¸ª Ingressï¼Œè€Œä¸º HTTP ä½¿ç”¨ä¸€ä¸ª Ingress  &amp;hellip;è¿™é‡Œä»…æ˜¾ç¤º HTTPSï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;https://raw.githubusercontent.com/servicemesher/website/master/content/blog/istio-envoy-cert-manager-lets-encrypt-for-tls/61411417ly1fshj4vatnoj20m80j376n.jpg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;éªŒè¯å®Œæˆåï¼ŒCert-Manager åº”è¯¥åˆ é™¤ istio-system å‘½åç©ºé—´ä¸­çš„ Token-Exchange podã€‚æ˜¯çš„ï¼Œä¸€æ—¦ Cert-Manager ä¸ Let&amp;rsquo;s Encrypt æœåŠ¡å™¨è¾¾æˆä¸€è‡´ï¼Œä»–ä»¬å°†äº¤æ¢ç”¨äºç»­è®¢çš„æ°¸ä¹…å¯†é’¥ã€‚æ— éœ€ä½¿ç”¨ podï¼Œç”šè‡³ Services å’Œ Ingressï¼Œè‡³å°‘å¦‚æœä½ ç¡®å®šä½ ä¸éœ€è¦æ·»åŠ æˆ–æ”¹å˜è¯ä¹¦ä¸­çš„æŸäº›ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ›´æ–°è¯ä¹¦&#34;&gt;æ›´æ–°è¯ä¹¦&lt;/h3&gt;
&lt;p&gt;åœ¨æ›´æ–°è¯ä¹¦æ—¶ï¼Œæˆ‘å»ºè®®å…ˆä¸ºå…¶åˆ›å»ºæ­£ç¡®çš„ &lt;code&gt;Service&lt;/code&gt;ã€‚ç„¶åæ›´æ–° &lt;code&gt;Ingress&lt;/code&gt; ä»¥å°†æµé‡å‘é€åˆ°æ­£ç¡®çš„æœåŠ¡ã€‚æœ€åï¼Œæ›´æ–°æ‚¨çš„ &lt;code&gt;Certificate&lt;/code&gt; å®šä¹‰å¹¶æ·»åŠ æ–°çš„åŸŸåã€‚&lt;/p&gt;
&lt;p&gt;è¯ä¹¦ç®¡ç†å™¨å°†åˆ›å»ºä¸€ä¸ªæ–°çš„ &lt;code&gt;ingress&lt;/code&gt; å’Œ &lt;code&gt;service&lt;/code&gt; ä½ å°†ä¸å¾—ä¸åˆ é™¤ã€‚å…¶ä»–ä¸€åˆ‡éƒ½å°†è‡ªè¡Œå‘ç”Ÿã€‚ç­‰å¾…å‡ ç§’é’Ÿ &lt;code&gt;Istio-Ingress&lt;/code&gt; é‡æ–°åŠ è½½å®ƒçš„è¯ä¹¦ï¼Œä½ å¾ˆå¥½ &lt;code&gt;curl&lt;/code&gt;Â ï¼&lt;/p&gt;
&lt;h3 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h3&gt;
&lt;p&gt;å°½ç®¡æˆ‘ç°åœ¨è§‰å¾—å®ƒéå¸¸ä»¤äººç ”å‘ï¼Œä½†å®ƒæœ€èµ·ç å¯ä»¥æ­£å¸¸å·¥ä½œã€‚å¦‚æœæ‚¨éœ€è¦æ›´æ–°è¯ä¹¦æˆ–æ·»åŠ æ–°çš„åŸŸåï¼Œåˆ™å¿…é¡»æ›´æ–°è¯ä¹¦å®šä¹‰ï¼Œæ•´ä¸ªè¿‡ç¨‹å°†è¦é‡æ–°å†æ¥ä¸€éã€‚è¿™å®åœ¨æ˜¯ä¸€ç§ç—›è‹¦ï¼Œå½“ç„¶æ¯”èµ·ä¸ Traefik æˆ– Caddy å®Œå…¨æ•´åˆæ›´åŠ å›°éš¾ã€‚ä¸è¿‡æˆ‘ç›¸ä¿¡è¿™å°†ä¼šå¾ˆå¿«æ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æƒ³æ„Ÿè°¢ &lt;a href=&#34;https://github.com/ldemailly&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Laurent Demailly&lt;/a&gt; åœ¨è¿™æ–¹é¢çš„å·¥ä½œã€‚æœ‰å…³æ›´å¤šè¯¦æƒ…å’Œè®¨è®ºï¼Œè¯·å‚é˜… Istio  &lt;a href=&#34;https://github.com/istio/istio.github.io/issues/868&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;issue #868&lt;/a&gt;ã€‚ä»–æ­£åœ¨ä½¿ç”¨ Istio + TLS å¼€å‘ç¤ºä¾‹åº”ç”¨ç¨‹åºéƒ¨ç½² Fortioï¼Œä»–æ˜¯å¯å‘å¹¶å¸®åŠ©æˆ‘å®Œæˆæ‰€æœ‰å·¥ä½œçš„äººã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Service Mesh æ¥å……åˆ†åˆ©ç”¨å¾®æœåŠ¡</title>
      <link>https://cloudnativecn.com/blog/making-most-out-microservices-service-mesh/</link>
      <pubDate>Tue, 19 Jun 2018 18:04:08 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/making-most-out-microservices-service-mesh/</guid>
      <description>&lt;p&gt;æœ¬æ–‡ä¸ºç¿»è¯‘æ–‡ç« ï¼Œ&lt;a href=&#34;https://www.linux.com/blog/event/kubecon/2018/4/making-most-out-microservices-service-mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‚¹å‡»æŸ¥çœ‹åŸæ–‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Aspen Mesh çš„ Andrew Jenkins è¯´ï¼Œè½¬å‘å¾®æœåŠ¡æœ¬èº«å¹¶ä¸èƒ½æ¶ˆé™¤å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬ä¸ Aspen Mesh çš„é¦–å¸­æ¶æ„å¸ˆ Andrew Jenkins è°ˆè®ºäº†å¦‚ä½•ä»å•ä¸€åº”ç”¨ç¨‹åºè½¬å‘å¾®æœåŠ¡ï¼Œå¹¶é€šè¿‡ä¸€äº›å…³äºæœåŠ¡ç½‘æ ¼çš„å®£ä¼ æ¥ç®¡ç†å¾®æœåŠ¡æ¶æ„ã€‚æœ‰å…³æœåŠ¡ç½‘æ ¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è€ƒè™‘å‚åŠ äº 2018 å¹´ 5 æœˆ 2 æ—¥è‡³ 4 æ—¥åœ¨ä¸¹éº¦å“¥æœ¬å“ˆæ ¹ä¸¾è¡Œçš„&lt;a href=&#34;https://events.linuxfoundation.org/events/kubecon-cloudnativecon-europe-2018/attend/register/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;KubeCon + CloudNativeCon EU&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.å¾®æœåŠ¡è§£å†³äº†è®¸å¤šå…¬å¸é¢ä¸´çš„å•ä½“æ¶æ„é—®é¢˜ã€‚ä½ è®¤ä¸ºå…¶æœ€å¤§çš„ä»·å€¼åœ¨å“ªé‡Œï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Andrew Jenkins&lt;/strong&gt; ï¼šå¯¹æˆ‘æ¥è¯´ï¼Œè¿™æ˜¯å…³äºæœ€å°åŒ–æ—¶é—´å¯¹ç”¨æˆ·çš„å½±å“ã€‚å‘è™šæ‹ŸåŒ–å’Œäº‘è½¬å‹çš„å…³é”®æ˜¯é™ä½ä¸æ”¯æŒåº”ç”¨ç¨‹åºçš„æ‰€æœ‰åŸºç¡€æ¶æ„ç›¸å…³çš„å¤æ‚æ€§ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥çµæ´»åœ°åˆ†é…æœåŠ¡å™¨å’Œå­˜å‚¨ç­‰ã€‚ä½†æ˜¯è¿™ç§è½¬å˜å¹¶ä¸ä¸€å®šä¼šæ”¹å˜æˆ‘ä»¬æ„å»ºçš„åº”ç”¨ç¨‹åºã€‚ç°åœ¨æˆ‘ä»¬æœ‰äº†çµæ´»çš„åŸºç¡€æ¶æ„ï¼Œæˆ‘ä»¬åº”è¯¥æ„å»ºçµæ´»çš„åº”ç”¨ç¨‹åºä»¥å……åˆ†åˆ©ç”¨å®ƒã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡æ˜¯çµæ´»çš„åº”ç”¨ç¨‹åºâ€”â€”æ„å»ºå°å‹ï¼Œå•ä¸€ç”¨é€”çš„æ¨¡å—å¹¶å¿«é€Ÿæ„å»ºå®ƒä»¬ï¼Œä»¥ä¾¿æ‚¨å¯ä»¥å¿«é€Ÿå°†å®ƒä»¬äº¤ä»˜ç»™æœ€ç»ˆç”¨æˆ·ã€‚ç»„ç»‡å¯ä»¥ä½¿ç”¨å®ƒæ¥æ ¹æ®å®é™…ç”¨æˆ·éœ€æ±‚è¿›è¡Œæµ‹è¯•å¹¶è¿­ä»£æ„å»ºã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.éšç€ä¼ä¸šä»å•ä½“åº”ç”¨ç¨‹åºå‘å¾®æœåŠ¡è¿ç§»ï¼Œæ”¶ç›Šæ˜¾è€Œæ˜“è§ï¼Œä½†å…¬å¸åœ¨é‡‡å–è¡ŒåŠ¨æ—¶é‡åˆ°çš„ä¸€äº›æŒ‘æˆ˜æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šè½¬å‘å¾®æœåŠ¡æœ¬èº«å¹¶ä¸èƒ½æ¶ˆé™¤å¤æ‚æ€§ã€‚ä»»ä½•ä¸€ä¸ªå¾®æœåŠ¡çš„å¤æ‚æ€§éƒ½å¾ˆå°ï¼Œä½†æ˜¯æ•´ä¸ªç³»ç»Ÿéƒ½å¾ˆå¤æ‚ã€‚ä»æ ¹æœ¬ä¸Šè¯´ï¼Œå…¬å¸å¸Œæœ›çŸ¥é“å“ªä¸ªæœåŠ¡æ­£åœ¨ä¸å“ªä¸ªæœåŠ¡å¯¹è¯ï¼Œä»£è¡¨å“ªä¸ªæœåŠ¡å¯¹è±¡ï¼Œç„¶åèƒ½å¤Ÿä½¿ç”¨ç­–ç•¥æ¥æ§åˆ¶è¯¥é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/making-most-out-microservices-service-mesh/61411417ly1fsgj488frxj20ed05zgnh_hu_5297d9b82ba3b58d.webp 400w,
               /blog/making-most-out-microservices-service-mesh/61411417ly1fsgj488frxj20ed05zgnh_hu_b63da87496dbd0ec.webp 760w,
               /blog/making-most-out-microservices-service-mesh/61411417ly1fsgj488frxj20ed05zgnh_hu_6291ddcb1002b51a.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/making-most-out-microservices-service-mesh/61411417ly1fsgj488frxj20ed05zgnh_hu_5297d9b82ba3b58d.webp&#34;
               width=&#34;517&#34;
               height=&#34;215&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.ç»„ç»‡å¦‚ä½•å°è¯•åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šä¸€äº›å…¬å¸ä»ç¬¬ä¸€å¤©èµ·å°±å°†è¿™ç§å¯è§æ€§å’Œç­–ç•¥éƒ¨åˆ†æ·»åŠ åˆ°ä»–ä»¬æ„å»ºçš„æ¯ä¸ªåº”ç”¨ç¨‹åºä¸­ã€‚å½“å…¬å¸æŠ•èµ„äºå®šåˆ¶å·¥å…·ã€å·¥ä½œæµç¨‹ã€éƒ¨ç½²ç®¡ç†å’Œ CD ç®¡é“æ—¶ï¼Œè¿™ç§æƒ…å†µå°¤å…¶å¸¸è§ã€‚æˆ‘ä»¬ä¹Ÿå‘ç°è¿™äº›å…¬å¸é€šå¸¸æ˜¯ä»¥å‡ ç§è¯­è¨€ä¸ºå¯¼å‘ï¼Œå¹¶ä¸”å‡ ä¹å†™å‡ºä»–ä»¬è‡ªå·±è¿è¡Œçš„æ‰€æœ‰å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæ‚¨çš„åº”ç”¨ç¨‹åºå †æ ˆæ˜¯å¤šè¾¹å½¢çš„ï¼Œå¹¶ä¸”æ˜¯æ–°å¼€å‘å’Œè¿ç§»ç°æœ‰åº”ç”¨ç¨‹åºçš„ç»„åˆï¼Œåˆ™å¾ˆéš¾è¯æ˜å°†è¿™äº›éƒ¨åˆ†å•ç‹¬æ·»åŠ åˆ°æ¯ä¸ªåº”ç”¨ç¨‹åºæ˜¯åˆç†çš„ã€‚æ¥è‡ªä¸åŒå›¢é˜Ÿå’Œå¤–éƒ¨å¼€å‘çš„åº”ç”¨ç¨‹åºçš„åº”ç”¨ç¨‹åºæ›´å¤šåœ°æé«˜äº†è¿™ä¸€ç‚¹ï¼Œä¸€ç§æ–¹æ³•æ˜¯åˆ†åˆ«å¯¹å¾…é‚£äº›ä¸ç¬¦åˆè¦æ±‚çš„åº”ç”¨ç¨‹åº - å°†å®ƒä»¬ç½®äºç­–ç•¥æ‰§è¡Œä»£ç†ä¹‹åï¼Œæˆ–è€…ä»å¯è§æ€§è§’åº¦å°†å®ƒä»¬è§†ä¸ºæ›´å¤šçš„é»‘ç›’å­ã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ ä¸å¿…åšå‡ºè¿™ç§åˆ†ç¦»ï¼Œé‚£ä¹ˆå¦‚æœæœ‰ä¸€ç§ç®€å•çš„æ–¹æ³•æ¥è·å¾—ä»»ä½•è¯­è¨€çš„ä»»ä½•åº”ç”¨ç¨‹åºçš„åŸç”Ÿå¼ç­–ç•¥å’Œå¯è§æ€§ï¼Œé‚£ä¹ˆä½ å¯ä»¥çœ‹åˆ°å®ƒçš„ä¼˜åŠ¿ã€‚æœåŠ¡ç½‘æ ¼å°±æ˜¯è¿™æ ·çš„ä¸€ç§æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4.ä½œä¸ºç®¡ç†å¾®æœåŠ¡æ¶æ„çš„æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼Œå›´ç»•æœåŠ¡ç½‘æ ¼å­˜åœ¨å¤§é‡å®£ä¼ ã€‚ä½ çš„æƒ³æ³•ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šæ˜¯çš„ï¼Œè¿™ç»å¯¹æ˜¯æ”€ç™»ç‚’ä½œå¾ªç¯æ›²çº¿ã€‚å®ƒä¸ä¼šé€‚åˆæ‰€æœ‰æƒ…å†µã€‚å¦‚æœä½ å·²ç»æœ‰å¾®æœåŠ¡ï¼Œå¹¶ä¸”ä½ è§‰å¾—ä½ æœ‰å¾ˆå¥½çš„æ§åˆ¶èƒ½åŠ›å’Œå¯è§†æ€§ï¼Œé‚£ä¹ˆä½ å·²ç»æœ‰äº†ä¸€ä¸ªå¾ˆå¥½çš„å¼€å‘äººå‘˜å·¥ä½œæµç¨‹ï¼Œé‚£ä¹ˆä½ å°±ä¸éœ€è¦æŠŠæ‰€æœ‰ä¸œè¥¿éƒ½æ’•æ‰ï¼Œå¹¶ä¸”æ˜å¤©åœ¨æœåŠ¡ç½‘æ ¼ä¸­å¡«å……ã€‚æˆ‘å»ºè®®ä½ å¯èƒ½ä»ç„¶æƒ³çŸ¥é“é‡Œé¢çš„å†…å®¹ï¼Œå› ä¸ºå½“ä½ çš„å›¢é˜Ÿå¤„ç†æ–°çš„è¯­è¨€æˆ–ç¯å¢ƒæ—¶å®ƒå¯èƒ½ä¼šæœ‰å¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸ºæˆ‘ä»¬åº”è¯¥äº†è§£æœåŠ¡ç½‘æ ¼å¦‚ä½•å°†åŠŸèƒ½é›†æˆåˆ°ä¸€ä¸ªä¸€è‡´çš„å±‚ä¸­ã€‚æˆ‘ä»¬éƒ½å–œæ¬¢ä¿æŒæˆ‘ä»¬çš„ä»£ç å¹²çˆ½ï¼ˆä¸è¦é‡å¤è‡ªå·±ï¼‰ã€‚æˆ‘ä»¬çŸ¥é“ä¸¤ä¸ªç›¸ä¼¼çš„å®ç°æ°¸è¿œä¸ä¼šå®Œå…¨ç›¸åŒã€‚å¦‚æœæ‚¨å¯ä»¥åˆ©ç”¨æœåŠ¡ç½‘æ ¼æ¥è·å¾—ä¸€ä¸ªå¯ä»¥åœ¨æ•´ä¸ªåŸºç¡€æ¶æ„ä¸­è¿è¡Œçš„é‡è¯•é€»è¾‘çš„å®ç°ï¼Œé‚£ä¹ˆçœŸæ­£ç®€åŒ–äº†å¼€å‘äººå‘˜ï¼Œæ“ä½œäººå‘˜ä»¥åŠä¸è¯¥ç³»ç»Ÿä¸€èµ·å·¥ä½œçš„æ¯ä¸ªäººçš„æ“ä½œã€‚æˆ‘æ•¢æ‰“èµŒï¼Œä½ çš„å›¢é˜Ÿä¸­æ²¡æœ‰äººæƒ³å†å†™ä¸€ä¸ªé‡è¯•å¾ªç¯çš„å‰¯æœ¬ï¼Œç‰¹åˆ«æ˜¯æ²¡æœ‰äººæƒ³è°ƒè¯•ç”¨ go ç¼–å†™çš„æ–‡ä»¶å’Œç”¨ python ç¼–å†™çš„æ–‡ä»¶ä¹‹é—´çš„ç»†å¾®å·®åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5.éšç€è¦ç›‘æ§çš„æœåŠ¡æ•°é‡çš„å¢åŠ ï¼Œè¿™äº›æœåŠ¡ä¸­çš„æ¯ä¸€ä¸ªå¾ˆå¯èƒ½ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- ä½¿ç”¨ä¸åŒçš„æŠ€æœ¯/è¯­è¨€&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- ä½åœ¨ä¸åŒçš„æœºå™¨/å®¹å™¨ä¸Š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;- æ‹¥æœ‰è‡ªå·±çš„ç‰ˆæœ¬æ§åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æœåŠ¡å¦‚ä½•è§£å†³è¿™äº›å·®è·ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šService mesh çš„ç¬¬ä¸€ä¸ªæ‰¿è¯ºæ˜¯ä¸ºä»»ä½•è¯­è¨€ç¼–å†™çš„å¾®æœåŠ¡ï¼ˆå¯¹äºä»»ä½•åº”ç”¨ç¨‹åºå †æ ˆï¼‰æ‰§è¡Œç›¸åŒçš„æ“ä½œï¼ˆå³å¯è§æ€§å’Œæ§åˆ¶éƒ¨åˆ†ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œå½“æ‚¨è€ƒè™‘ä¸åŒçš„å®¹å™¨äº’ç›¸äº¤è°ˆæ—¶ï¼ŒæœåŠ¡ç½‘æ ¼å¯èƒ½ä¼šå¸®åŠ©ä¸è¯¥å±‚ç›¸å…³çš„è®¸å¤šå†…å®¹ã€‚ä¾‹å¦‚ï¼Œä½ æ˜¯å¦ç›¸ä¿¡ä¿æŠ¤æ¯ä¸ªå•ç‹¬è¿è¡Œçš„å®¹å™¨è€Œä¸æ˜¯å¤–å›´ï¼ˆé˜²ç«å¢™ï¼‰å®‰å…¨ï¼Ÿç„¶åä½¿ç”¨æœåŠ¡ç½‘æ ¼æä¾›ä»å®¹å™¨åˆ°å®¹å™¨çš„ mTLSã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿˜çœ‹åˆ°ï¼Œç‰ˆæœ¬æ§åˆ¶å·®å¼‚æ˜¯æ›´æ·±çš„åº”ç”¨ç¨‹åºç”Ÿå‘½å‘¨æœŸå·®å¼‚çš„è¡¨ç°ã€‚æ‰€ä»¥è¿™ä¸ªå›¢é˜Ÿä½¿ç”¨è¿™æ ·çš„ç‰ˆæœ¬æ§åˆ¶ï¼Œå¹¿æ³›çš„èµ„æ ¼è®¤è¯é˜¶æ®µå’Œè°¨æ…çš„å‡çº§ç­–ç•¥ï¼Œå› ä¸ºä»–ä»¬æä¾›äº†æ¯ä¸ªäººéƒ½ä¾èµ–çš„æœ€æ ¸å¿ƒçš„æœåŠ¡ä¹‹ä¸€ã€‚å¦ä¸€ä¸ªä»äº‹å…¨æ–°åŸå‹æœåŠ¡çš„å›¢é˜Ÿæœ‰ä¸€ä¸ªä¸åŒçš„æ”¿ç­–ï¼Œä½†æ‚¨è‚¯å®šå¸Œæœ›ç¡®ä¿ä»–ä»¬ä¸å†™å…¥ç”Ÿäº§æ•°æ®åº“ã€‚å°†ä»–ä»¬çš„â€œæ–¹å½¢æŒ‚é’©å·¥ä½œæµç¨‹â€è£…å…¥ä½ çš„â€œåœ†å­”å·¥è‰ºâ€å¹¶ä¸æ˜¯æ­£ç¡®çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥ä½¿ç”¨æœåŠ¡ç½‘æ ¼ä»¥é€‚åˆä»–ä»¬çš„æ–¹å¼å°†è¿™äº›ä¸åŒçš„åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ç§»æ¤åˆ°ç³»ç»Ÿä¸­ã€‚ç°åœ¨æ˜¾ç„¶ä½ æƒ³è¦ä½¿ç”¨ä¸€äº›åˆ¤æ–­ï¼Œè€Œä¸æ˜¯ä¸ºæ¯ä¸€ä¸ªå°çš„å¾®æœåŠ¡å®šåˆ¶å›ºå®šï¼Œä½†æˆ‘ä»¬å¬åˆ°å¾ˆå¤šå…³äºæœåŠ¡ç½‘æ ¼çš„å…´è¶£ï¼Œä»¥å¸®åŠ©æ¶ˆé™¤è¿™äº›ç”Ÿå‘½å‘¨æœŸå’ŒæœŸæœ›ä¹‹é—´çš„å·®å¼‚ã€‚å†æ¬¡ï¼Œå®ƒçš„å…¨éƒ¨æ˜¯æä¾›å¿«é€Ÿè¿­ä»£ï¼Œä½†ä¸æ”¾å¼ƒå¯è§æ€§å’Œæ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6.æ§åˆ¶å¹³é¢ä¸æ•°æ®å¹³é¢ï¼šæœåŠ¡ç½‘æ ¼ä¸ºæ¯ä¸ªå¹³é¢æä¾›å€¼ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šä»Šå¤©å¼€å§‹åˆ¶ä½œç½‘ç»œæœåŠ¡æ˜¯å¤šä¹ˆå®¹æ˜“ã€‚æ‚¨å¯ä»¥å°†ä»£ç æ”¾å…¥æ¨æ–‡ä¸­ã€‚è™½ç„¶è¿™ä¸æ˜¯çœŸæ­£çš„ Web æœåŠ¡ã€‚ä¸ºäº†ä½¿å…¶å…·æœ‰å¼¹æ€§å’Œå¯æ‰©å±•æ€§ï¼Œæ‚¨éœ€è¦åœ¨åº”ç”¨ç¨‹åºçš„æ•°æ®å¹³é¢æ·»åŠ ä¸€äº›å†…å®¹ã€‚å®ƒéœ€è¦åš TLSï¼Œå®ƒéœ€è¦é‡è¯•å¤±è´¥ï¼Œå®ƒåªéœ€è¦æ¥å—æ¥è‡ªè¿™ä¸ªæœåŠ¡çš„è¯·æ±‚ï¼Œä½†ä¸æ˜¯é‚£ä¸ªï¼Œå¹¶ä¸”å®ƒéœ€è¦æ£€æŸ¥ç”¨æˆ·çš„è®¤è¯ï¼Œç­‰ç­‰ã€‚æœåŠ¡ç½‘æ ¼å¯ä»¥å¸®åŠ©æ‚¨è·å¾—æ•°æ®å¹³é¢åŠŸèƒ½ï¼Œè€Œæ— éœ€å‘åº”ç”¨æ·»åŠ ä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼Œç”±äºç°åœ¨å·²ç»åœ¨æ•°æ®å¹³é¢å±‚ä¸­ï¼Œå› æ­¤å¯ä»¥åœ¨ä¸ä¿®æ”¹åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹å‡çº§å’Œå¢å¼ºè¯¥å±‚ã€‚&lt;/p&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼ä¸ºæ‚¨çš„å¾®æœåŠ¡å¸¦æ¥äº†æ§åˆ¶å¹³é¢çš„ä¸€è‡´æ€§ã€‚åƒ Kubernetes è¿™æ ·çš„å®¹å™¨ç¼–æ’ç³»ç»Ÿæä¾›äº†æè¿°ä½ æƒ³è¦è¿è¡Œå“ªäº›å®¹å™¨çš„å¸¸ç”¨æ–¹æ³•ã€‚è¿™å¹¶ä¸æ˜¯è¯´ä½ ä¸èƒ½åœ¨æ²¡æœ‰å®ƒä»¬çš„æƒ…å†µä¸‹è¿è¡Œå®¹å™¨ï¼Œé‚£æ˜¯å› ä¸ºä¸€æ—¦ä½ è¿è¡Œäº†ä¸€äº›å®¹å™¨ï¼Œä½ å°±éœ€è¦ä¸€ä¸ªä¸€è‡´çš„æ–¹å¼æ¥è¿è¡Œå®ƒä»¬ã€‚æœåŠ¡ç½‘æ ¼å°±æ˜¯è¿™æ ·ï¼Œç”¨äºå®¹å™¨ä¹‹é—´çš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7.æœåŠ¡ç½‘æ ¼çš„æµè¡Œè¯­æ˜¯â€œå¯è§‚å¯Ÿæ€§â€ã€‚ä½ èƒ½åˆ†äº«ä¸€ä¸‹çœŸå®ä¸–ç•Œä¸­çš„å¯è§‚å¯Ÿæ€§æä¾›çš„å¥½å¤„å—ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šæˆ‘ä»¬æ›¾ä¸ä¸€ä¸ªå›¢é˜Ÿè°ˆè¿‡ï¼Œä»–ä»¬å‘Šè¯‰æˆ‘ä»¬ä»–ä»¬èŠ±äº†å‡ ä¸ªå°æ—¶çš„æ—¶é—´åœ¨ç”µè¯ä¸Šè¯•å›¾è§£å†³ä¸€äº›è·¨è¶Šå¾ˆå¤šæœåŠ¡å’Œç»„ä»¶çš„é—®é¢˜ã€‚ä»–ä»¬ä»æ¯é¡¹æœåŠ¡ä¸­æ”¶é›†äº†å¤§é‡æ•°æ®ï¼Œä»–ä»¬çŸ¥é“ç­”æ¡ˆæ˜¯åœ¨æŸå¤„çš„å¤§é‡æ•°æ®ä¸­ã€‚ä½†æ˜¯ä»–ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨ä¿¡æ¯çš„æ¯ä¸ªå¿«ç…§ä¹‹é—´è¿›è¡Œç¿»è¯‘ã€‚ä»–ä»¬ä¸ç›¸ä¿¡ç¿»è¯‘ä¸­çš„æ¯ä¸€æ­¥éƒ½æ˜¯æ­£ç¡®çš„ - æ¯•ç«Ÿï¼Œå¦‚æœä»–ä»¬æ˜ç™½å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…ï¼Œä»–ä»¬é¦–å…ˆä¼šè®¾è®¡å‡ºè¿™ä¸ªé—®é¢˜ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œå“ªé‡Œå¼€å§‹å¯»æ‰¾å¹¶ä¸æ€»æ˜¯å¾ˆæ¸…æ¥šã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬è¦æ±‚çš„æ˜¯ä¸€ç§è§‚ç‚¹ - ä¸€ä¸ªåœ°æ–¹æ”¶é›†çš„æ‰€æœ‰æœåŠ¡ä¿¡æ¯ï¼Œä»¥åŠä»–ä»¬é—®é¢˜æœ€é‡è¦çš„ä¿¡æ¯ã€‚åŒæ ·ï¼ŒæœåŠ¡ç½‘æ ¼ä¸æ˜¯ä¸‡èƒ½çš„ï¼Œæˆ‘ä¸ä¼šä¿è¯ä½ æ°¸è¿œä¸å¿…å†çœ‹æ—¥å¿—æ–‡ä»¶ã€‚ä½†æˆ‘çš„ç›®æ ‡æ˜¯ï¼Œä¸€æ—¦è¿™ä¸ªå›¢é˜Ÿæ‹¥æœ‰ä¸€ä¸ªæœåŠ¡ç½‘æ ¼ï¼Œä»–ä»¬æ€»æ˜¯æœ‰ä¿¡å¿ƒï¼Œä»–ä»¬å·²ç»å¯¹æ¯ä¸€ä¸ªå¾®æœåŠ¡è¿›å‡ºçš„å†…å®¹æœ‰äº†å¾ˆå¥½çš„è§‚å¯Ÿï¼Œå¹¶ä¸”æœåŠ¡ç½‘æ ¼å·²ç»æŒ‡å‡ºä»–ä»¬æ­£ç¡®çš„æ–¹å‘ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æˆ‘è€Œè¨€ï¼Œå¯è§‚å¯Ÿæ€§ä¸ä»…ä»…æ˜¯æ”¶é›†å¤§é‡æ•°æ®ç‚¹ã€‚è¿™æ˜¯ä¸ºäº†å°½å¿«å°†æ™ºèƒ½å¤§è„‘åº”ç”¨äºç³»ç»Ÿä¸­çš„çœŸå®æ•…éšœã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;8.æ‚¨å¯¹æœåŠ¡ç½‘æ ¼çš„æœªæ¥æœ‰ä»€ä¹ˆçœ‹æ³•ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Jenkins&lt;/strong&gt; ï¼šæˆ‘è®¤ä¸ºå„ç§å®ç°éƒ½æä¾›äº†ä¸€ä¸ªå¼•äººæ³¨ç›®çš„ç­–ç•¥å’Œç»„ä»¶å·¥å…·ç®±ã€‚æˆ‘å¾ˆé«˜å…´æˆ‘ä»¬æ­£åœ¨åˆ©ç”¨ä»å¾®æœåŠ¡çš„å…ˆé©±è·å¾—çš„ç»éªŒæ•™è®­æ¥æ„å»ºè¿™ä¸ªé€šç”¨æœåŠ¡ç½‘æ ¼å±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€æ­¥å°†é€‰æ‹©å¦‚ä½•ä½¿ç”¨è¯¥å·¥å…·ç®±æ¥è§£å†³é—®é¢˜ã€‚ç»„ç»‡å¸Œæœ›åœ¨éƒ¨ç½²ç­–ç•¥æ–¹é¢ä¿æŒä¸€å®šçš„ä¸€è‡´æ€§ï¼šé¢ä¸´çš„æŒ‘æˆ˜æ˜¯å°†åº”ç”¨å¼€å‘è€…ï¼Œä¿¡æ¯å®‰å…¨å¹³å°å’Œå¹³å°å›¢é˜Ÿçš„åˆ©ç›Šç»“åˆèµ·æ¥ï¼Œä»¥ä¾¿ä»–ä»¬çš„æ‰€æœ‰ç­–ç•¥éƒ½èåˆåœ¨æœåŠ¡ç½‘æ ¼ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æŠ€æœ¯ç»†å¾®å·®åˆ«ä¸Šï¼Œæˆ‘ä»¬å·²ç»çœ‹åˆ°äº†æœåŠ¡ç½‘æ ¼ï¼Œå®ƒä»¬åˆ©ç”¨æ‰€è°“çš„ Sidecar æ¨¡å‹æ¥é›†æˆå’ŒæœåŠ¡æ²¡æœ‰çš„ç½‘æ ¼ã€‚Sidecar å¯¹äºåº”ç”¨å¢å¼ºå±‚æ„Ÿè§‰å¾ˆè‡ªç„¶ï¼Œä½†æˆ‘ä»¬å¹¶ä¸ä¹ æƒ¯äºé‚£äº›æˆ‘ä»¬è®¤ä¸ºæ˜¯åŸºç¡€è®¾æ–½çš„å±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬ä»ç¬¬ä¸€å¤©å¼€å§‹ä¾èµ–æœåŠ¡ç½‘æ ¼æ¥ç¼–å†™åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°±æœ‰æœºä¼šå¯¹åº”ç”¨ç¨‹åºè¿›è¡Œç»†ç²’åº¦ä½†é«˜çº§åˆ«çš„æ§åˆ¶ã€‚æ¯ä¸€ä¸ªåº”ç”¨ç¨‹åºéƒ½å°†å…·æœ‰å…ˆè¿›çš„é‡è¯•é€»è¾‘ã€å®‰å…¨æ€§ã€å¯è§æ€§ç­‰ï¼Œä»ç¬¬ä¸€å¤©å¼€å§‹ã€‚é¦–å…ˆï¼Œè¿™å°†æ”¹å˜æˆ‘ä»¬å¼€å‘å’Œæµ‹è¯•åº”ç”¨ç¨‹åºçš„æ–¹å¼ã€‚æˆ‘è®¤ä¸ºè¿™ä¹Ÿå°†ä¸ºæˆ‘ä»¬è¿˜æ²¡æœ‰æƒ³åˆ°çš„è·¨åº”ç”¨ç­–ç•¥æ•å¼€å¤§é—¨ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æœåŠ¡ç½‘æ ¼åœ¨ Cookpad ç½‘ç«™ä¸­çš„å®è·µ</title>
      <link>https://cloudnativecn.com/blog/service-mesh-in-cookpad/</link>
      <pubDate>Tue, 19 Jun 2018 15:54:19 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/service-mesh-in-cookpad/</guid>
      <description>&lt;p&gt;è¿™ä¸ªåŸæ–‡æ˜¯ 5 æœˆåˆå‘è¡¨çš„&lt;a href=&#34;http://techlife.cookpad.com/entry/2018/05/08/080000&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ—¥æ–‡åŸæ–‡&lt;/a&gt;çš„ç¿»è¯‘ã€‚è¡¥å……ä¸€ä¸‹è¿™ç¯‡æ–‡ç« çš„èƒŒæ™¯ï¼ŒCookpad æ˜¯ä¸€å®¶æ‹¥æœ‰ 200 å¤šç§äº§å“å¼€å‘çš„ä¸­å‹ç§‘æŠ€å…¬å¸ï¼Œæ‹¥æœ‰ 10 å¤šæ”¯å›¢é˜Ÿï¼Œæ¯æœˆå¹³å‡ç”¨æˆ·æ•°é‡è¾¾åˆ° 9000 ä¸‡ã€‚&lt;a href=&#34;https://www.cookpadteam.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.cookpadteam.com/&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä½ å¥½ï¼Œæˆ‘æ˜¯æ¥è‡ªç”Ÿäº§å›¢é˜Ÿçš„å¼€å‘äººå‘˜&lt;a href=&#34;https://github.com/taiki45/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Taiki&lt;/a&gt;ã€‚ç›®å‰ï¼Œæˆ‘æƒ³ä»‹ç»ä¸€ä¸‹åœ¨ Cookpad ä¸Šæ„å»ºå’Œä½¿ç”¨æœåŠ¡ç½‘æ ¼æ‰€è·å¾—çš„çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæœåŠ¡ç½‘æ ¼æœ¬èº«ï¼Œæˆ‘è®¤ä¸ºæ‚¨å°†å¯¹ä»¥ä¸‹æ–‡ç« ï¼Œå…¬å‘Šå’Œæ•™ç¨‹æœ‰å®Œæ•´çš„äº†è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://speakerdeck.com/taiki45/observability-service-mesh-and-microservices&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://speakerdeck.com/taiki45/observability-service-mesh-and-microservices&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://buoyant.io/2017/04/25/whats-a-service-mesh-and-why-do-i-need-one/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://blog.envoyproxy.io/service-mesh-data-plane-vs-control-plane-2774e720f7fc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://istioio.io/docs/setup/kubernetes/quick-start.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://istioio.io/docs/setup/kubernetes/quick-start.html&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.youtube.com/playlist?list=PLj6h78yzYM2P-3-xqvmWaZbbI1sW-ulZb&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.youtube.com/playlist?list=PLj6h78yzYM2P-3-xqvmWaZbbI1sW-ulZb&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æˆ‘ä»¬çš„ç›®æ ‡&#34;&gt;æˆ‘ä»¬çš„ç›®æ ‡&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªæœåŠ¡ç½‘æ ¼æ¥è§£å†³æ•…éšœæ’é™¤ï¼Œå®¹é‡è§„åˆ’å’Œä¿æŒç³»ç»Ÿå¯é æ€§ç­‰æ“ä½œé—®é¢˜ã€‚å°¤å…¶æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é™ä½æœåŠ¡ç»„çš„ç®¡ç†æˆæœ¬&lt;/li&gt;
&lt;li&gt;å¯è§‚å¯Ÿæ€§çš„æ”¹è¿› (åˆ†åˆ«å‚è€ƒäº† &lt;a href=&#34;https://blog.twitter.com/engineering/en_us/a/2013/observability-at-twitter.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt; Twitter &lt;/a&gt; å’Œ &lt;a href=&#34;https://medium.com/@copyconstruct/monitoring-and-observability-8417d1952e1c&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Medium çš„åšå®¢&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;å»ºç«‹æ›´å¥½çš„æ•…éšœéš”ç¦»æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å°±ç¬¬ä¸€ä¸ªé—®é¢˜è€Œè¨€ï¼Œéšç€è§„æ¨¡çš„æ‰©å¤§ï¼Œå­˜åœ¨éš¾ä»¥æŒæ¡å“ªä¸ªæœåŠ¡å’Œå“ªä¸ªæœåŠ¡æ­£åœ¨è¿›è¡Œé€šä¿¡ï¼ŒæŸä¸ªæœåŠ¡çš„å¤±è´¥æ˜¯å“ªé‡Œä¼ æ’­å¯¼è‡´çš„é—®é¢˜ã€‚æˆ‘è®¤ä¸ºè¿™ä¸ªé—®é¢˜åº”è¯¥é€šè¿‡ç»¼åˆç®¡ç†æœåŠ¡åœ¨å“ªé‡Œå’ŒæœåŠ¡åœ¨å“ªé‡Œè¿æ¥çš„ç›¸å…³ä¿¡æ¯æ¥è§£å†³ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¬¬äºŒä¸ªé—®é¢˜è€Œè¨€ï¼Œæˆ‘ä»¬è¿›ä¸€æ­¥æ·±ç©¶äº†ç¬¬ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å‘ç°æˆ‘ä»¬ä¸çŸ¥é“ä¸€ä¸ªæœåŠ¡ä¸å¦ä¸€ä¸ªæœåŠ¡ä¹‹é—´çš„é€šä¿¡çŠ¶æ€ã€‚ä¾‹å¦‚ï¼ŒRPSã€å“åº”æ—¶é—´ã€æˆåŠŸ/å¤±è´¥çŠ¶æ€çš„æ•°é‡ã€è¶…æ—¶ã€æ–­è·¯å™¨çš„æ¿€æ´»çŠ¶æ€ç­‰ã€‚åœ¨ä¸¤ä¸ªæˆ–æ›´å¤šä¸ªæœåŠ¡å¼•ç”¨æŸä¸ªåç«¯æœåŠ¡çš„æƒ…å†µä¸‹ï¼Œå› ä¸ºå®ƒä»¬æœªè¢«è¯·æ±‚æºæœåŠ¡æ ‡è®°ï¼Œæ‰€ä»¥ä¼šå¯¼è‡´åç«¯æœåŠ¡çš„ä»£ç†è§£ææˆ–è´Ÿè½½å‡è¡¡å™¨çš„åº¦é‡æ ‡å‡†ä¿¡æ¯ä¸è¶³ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºç¬¬ä¸‰ä¸ªé—®é¢˜ï¼Œâ€œæ•…éšœéš”ç¦»å°šæœªæˆåŠŸè®¾ç½®â€ã€‚æ­¤æ—¶ï¼Œåœ¨å„åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨åº“ï¼Œè¶…æ—¶/é‡è¯•Â·æ–­è·¯å™¨çš„è®¾ç½®å®Œæˆäº†ã€‚ä½†æ˜¯éœ€è¦ä»€ä¹ˆæ ·çš„è®¾ç½®ï¼Œå¿…éœ€å•ç‹¬æŸ¥çœ‹åº”ç”¨ç¨‹åºä»£ç ã€‚ç”±äºæ²¡æœ‰é…ç½®æ¸…å•ï¼Œä¼šå¯¼è‡´éš¾ä»¥æŒç»­æ”¹è¿›è¿™äº›è®¾ç½®ã€‚å¦å¤–ï¼Œå› ä¸ºä¸æ•…éšœéš”ç¦»æœ‰å…³çš„è®¾ç½®åº”è¯¥ä¸æ–­æ”¹è¿›ï¼Œæ‰€ä»¥æœ€å¥½æ˜¯å¯æµ‹è¯•çš„ï¼Œå¹¶ä¸”æˆ‘ä»¬éœ€è¦è¿™æ ·ä¸€ä¸ªåŸºç¡€å¹³å°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è§£å†³æ›´é«˜çº§çš„é—®é¢˜ï¼Œæˆ‘ä»¬è¿˜æ„å»ºäº† gRPC åŸºç¡€è®¾æ–½å»ºè®¾ï¼Œé…é€è·Ÿè¸ªå¤„ç†å§”æ‰˜ï¼Œæµé‡æ§åˆ¶éƒ¨ç½²æ–¹å¼å¤šæ ·åŒ–ï¼Œè®¤è¯æˆæƒç½‘å…³ç­‰åŠŸèƒ½ã€‚è¿™éƒ¨åˆ†å°†åœ¨ç¨åè®¨è®ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;å½“å‰çŠ¶æ€&#34;&gt;å½“å‰çŠ¶æ€&lt;/h2&gt;
&lt;p&gt;Cookpad ä¸­çš„æœåŠ¡ç½‘æ ¼ä½¿ç”¨ Envoy ä½œä¸º data-planeï¼Œå¹¶åˆ›å»ºäº†æˆ‘ä»¬è‡ªå·±çš„ control-planeã€‚å°½ç®¡æˆ‘ä»¬æœ€åˆè€ƒè™‘å®‰è£…å·²ç»ä½œä¸ºæœåŠ¡ç½‘æ ¼å®ç°çš„ &lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt;ï¼Œä½† &lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cookpad&lt;/a&gt; ä¸­çš„åº”ç”¨ç¨‹åºå¤§å¤šæ•°éƒ½ä½¿ç”¨åä¸º AWS ECS çš„å®¹å™¨ç®¡ç†æœåŠ¡è¿›è¡Œæ“ä½œï¼Œå› æ­¤ä¸ Kubernetes åˆä½œçš„ä¼˜ç‚¹æ˜¯æœ‰é™çš„ã€‚è€ƒè™‘åˆ°æˆ‘ä»¬æƒ³å®ç°çš„ç›®æ ‡ä»¥åŠ Istio è½¯ä»¶æœ¬èº«çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬é€‰æ‹©äº†æˆ‘ä»¬è‡ªå·±çš„ control-plane çš„è·¯å¾„ï¼Œè¯¥å¹³é¢å¯ä»¥ä»å°å‹èµ·æ­¥ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤æ¬¡å®æ–½çš„æœåŠ¡ç½‘æ ¼çš„ control-plane åˆ†ç”±å‡ ä¸ªç»„ä»¶ç»„æˆã€‚æˆ‘å°†è§£é‡Šæ¯ä¸ªç»„ä»¶çš„è§’è‰²å’Œæ“ä½œæµç¨‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›†ä¸­ç®¡ç†æœåŠ¡ç½‘æ ¼é…ç½®çš„å­˜å‚¨åº“ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨åä¸º &lt;a href=&#34;https://github.com/taiki45/kumonos&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kumonos&lt;/a&gt; çš„ gem ä»ä¸Šé¢çš„è®¾ç½®æ–‡ä»¶ç”Ÿæˆ &lt;a href=&#34;https://github.com/envoyproxy/data-plane-api/blob/5ea10b04a950260e1af0572aa244846b6599a38f/API_OVERVIEW.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy xDS API&lt;/a&gt; å“åº” JSON&lt;/li&gt;
&lt;li&gt;å°†ç”Ÿæˆçš„å“åº” JSON æ”¾ç½®åœ¨ Amazon S3 ä¸Šï¼Œå¹¶å°†å…¶ç”¨ä½œ Envoy çš„ xDS API&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä¸­å¤®å­˜å‚¨åº“ä¸­ç®¡ç†è¯¥è®¾ç½®çš„åŸå› æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬å¸Œæœ›éšæ—¶è·Ÿè¸ªæ›´æ”¹å†å²è®°å½•å¹¶åœ¨ç¨åè·Ÿè¸ªè®°å½•å®ƒ&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿé€šè¿‡è·¨ç»„ç»‡å›¢é˜Ÿï¼ˆå¦‚ SRE å›¢é˜Ÿï¼‰æ¥æŸ¥çœ‹è®¾ç½®æ›´æ”¹&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å…³äºè´Ÿè½½å‡è¡¡ï¼Œæˆ‘æœ€åˆæ˜¯ä¸º Internal ELB è®¾è®¡çš„ï¼Œä½† gRPC åº”ç”¨ç¨‹åºçš„åŸºç¡€æ¶æ„ä¹Ÿç¬¦åˆè¦æ±‚ï¼ˆæˆ‘ä»¬çš„ gRPC åº”ç”¨ç¨‹åºå·²ç»åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨æ­¤æœºåˆ¶ï¼‰ï¼Œæˆ‘ä»¬ä½¿ç”¨ SDSï¼ˆService Discovery Serviceï¼‰APIï¼ˆç®€å•åœ°ä½¿ç”¨å†…éƒ¨ ELBï¼ˆNLB æˆ– TCP æ¨¡å¼ CLBï¼‰çš„ æœåŠ¡ç«¯ä¾§è´Ÿè½½å‡è¡¡ä¸å‡è¡¡è€Œåœ¨æ€§èƒ½æ–¹é¢å…·æœ‰ç¼ºé™·ï¼Œå¹¶ä¸”åœ¨å¯è·å¾—çš„åº¦é‡æ–¹é¢ä¹Ÿæ˜¯ä¸å¤Ÿçš„ï¼‰å‡†å¤‡äº†å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡ã€‚æˆ‘ä»¬åœ¨ ECS ä»»åŠ¡ä¸­éƒ¨ç½²äº†ä¸€ä¸ª sidecar å®¹å™¨ï¼Œç”¨äºå¯¹åº”ç”¨ç¨‹åºå®¹å™¨æ‰§è¡Œå¥åº·æ£€æŸ¥å¹¶åœ¨ SDS API ä¸­æ³¨å†Œè¿æ¥ç›®æ ‡ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pzdtqd9j20n60dq40a_hu_c95ea1f0fd9901ea.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pzdtqd9j20n60dq40a_hu_a9e2a22e9bedd42d.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pzdtqd9j20n60dq40a_hu_b8c97e6f5e1843b.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pzdtqd9j20n60dq40a_hu_c95ea1f0fd9901ea.webp&#34;
               width=&#34;760&#34;
               height=&#34;450&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åº¦é‡æŒ‡æ ‡ï¼ˆmetricï¼‰çš„é…ç½®å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°†æ‰€æœ‰æŒ‡æ ‡å­˜å‚¨åˆ° Prometheus&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.6.0/api-v2/config/metrics/v2/stats.proto#config-metrics-v2-dogstatsdsink&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;dog_statsd&lt;/a&gt; å°†æ ‡è®°çš„åº¦é‡æ ‡å‡†å‘é€åˆ° ECS å®¹å™¨ä¸»æœºå®ä¾‹ä¸Šè¿è¡Œçš„ &lt;a href=&#34;https://github.com/prometheus/statsd_exporter&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;statsd_exporter&lt;/a&gt; ï¼ˆèµ·åˆæˆ‘å°†å®ƒä½œä¸ºæˆ‘ä»¬è‡ªå·±çš„æ‰©å±•å®ç°ï¼Œä½†åæ¥æˆ‘æŠŠè¿™ä¸ªä¿®æ”¹ä½œä¸º&lt;a href=&#34;https://github.com/envoyproxy/envoy/pull/2158&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¡¥ä¸&lt;/a&gt;æäº¤äº†ï¼‰&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰æŒ‡æ ‡éƒ½åŒ…å«é€šè¿‡ &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.6.0/api-v2/config/metrics/v2/stats.proto#config-metrics-v2-statsconfig&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å›ºå®šå­—ç¬¦ä¸²æ ‡ç­¾&lt;/a&gt; çš„åº”ç”¨ç¨‹åº ID æ¥æ ‡è¯†æ¯ä¸ªèŠ‚ç‚¹ (è¿™ä¸ªæ˜¯æˆ‘ä»¬çš„å¦ä¸€ä¸ª&lt;a href=&#34;https://github.com/envoyproxy/envoy/pull/2357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¡¥ä¸&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;Prometheus ä½¿ç”¨ &lt;a href=&#34;https://prometheus.io/docs/prometheus/latest/configuration/configuration/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;EC2 SD&lt;/a&gt; æ¥æå– statsd_exporter æŒ‡æ ‡&lt;/li&gt;
&lt;li&gt;è¦ç®¡ç† Prometheus çš„ç«¯å£ï¼Œæˆ‘ä»¬åœ¨ statsd_exporter å’Œ Prometheus ä¹‹é—´ä½¿ç”¨ &lt;a href=&#34;https://github.com/rrreeeyyy/exporter_proxy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;exporter_proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Grafana å’Œ &lt;a href=&#34;https://medium.com/netflix-techblog/vizceral-open-source-acc0c32113fe&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Vizceral&lt;/a&gt; è¿›è¡Œåº¦é‡æŒ‡æ ‡çš„å¯è§†åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ‚¨åœ¨ä¸ä½¿ç”¨ ECS æˆ– Docker çš„æƒ…å†µä¸‹ç›´æ¥åœ¨ EC2 å®ä¾‹ä¸Šè¿è¡Œåº”ç”¨ç¨‹åºè¿›ç¨‹ï¼Œåˆ™ Envoy è¿›ç¨‹ä½œä¸ºå®ˆæŠ¤è¿›ç¨‹ç›´æ¥åœ¨å®ä¾‹ä¸­è¿è¡Œï¼Œä½†æ¶æ„å‡ ä¹ç›¸åŒã€‚æœ‰ä¸€ä¸ªåŸå› æ˜¯æ²¡æœ‰å°† Prometheus ç›´æ¥è®¾ç½®ä¸º Envoyï¼Œå› ä¸ºæˆ‘ä»¬ä»ç„¶æ— æ³•ä» Envoy çš„ Prometheus å…¼å®¹ç«¯ç‚¹ä¸­æå–&lt;a href=&#34;https://github.com/envoyproxy/envoy/issues/1947&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›´æ–¹å›¾åº¦é‡&lt;/a&gt;ã€‚ç”±äºè¿™å°†åœ¨æœªæ¥å¾—åˆ°æ”¹å–„ï¼Œæˆ‘ä»¬è®¡åˆ’åœ¨å½“æ—¶æ¶ˆé™¤ stasd_exporterã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3rapdj20sg0qvgpb_hu_78682f17c0e4867f.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3rapdj20sg0qvgpb_hu_43712cfa3d7dfdd7.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3rapdj20sg0qvgpb_hu_db7aeb86a55e373a.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv3rapdj20sg0qvgpb_hu_78682f17c0e4867f.webp&#34;
               width=&#34;760&#34;
               height=&#34;717&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ Grafana ä¸Šï¼Œä»ªè¡¨æ¿å’Œ Envoy çš„æ•´ä¸ªä»ªè¡¨æ¿éƒ½ä¸ºæ¯é¡¹æœåŠ¡åšå¥½å‡†å¤‡ï¼Œä¾‹å¦‚ä¸Šæ¸¸ RPS å’Œè¶…æ—¶å‘ç”Ÿã€‚æˆ‘ä»¬è¿˜å°†å‡†å¤‡ä¸€ä¸ªæœåŠ¡å¤§å°å’ŒæœåŠ¡ç²’åº¦çš„ä»ªè¡¨æ¿ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªæœåŠ¡çš„ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4dqikj20sg0mp11e_hu_1f65cc1a8b9fdfce.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4dqikj20sg0mp11e_hu_25b1a782dbd37e55.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4dqikj20sg0mp11e_hu_9fff3e7ae684711a.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv4dqikj20sg0mp11e_hu_1f65cc1a8b9fdfce.webp&#34;
               width=&#34;760&#34;
               height=&#34;606&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä¸Šæ¸¸æ•…éšœæ—¶çš„æ–­è·¯å™¨ç›¸å…³æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4kw6vj20i40d9q41_hu_d2c3499c71230d6f.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4kw6vj20i40d9q41_hu_67e7e068a5c667f6.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4kw6vj20i40d9q41_hu_ea0ff96be0b7870d.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv4kw6vj20i40d9q41_hu_d2c3499c71230d6f.webp&#34;
               width=&#34;652&#34;
               height=&#34;477&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Envoy çš„ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4rqrij20sg0qa49n_hu_57b19fa5c52bfcf4.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4rqrij20sg0qa49n_hu_43b10bd9a96edf2e.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv4rqrij20sg0qa49n_hu_2cc3459c5bb9d326.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv4rqrij20sg0qa49n_hu_57b19fa5c52bfcf4.webp&#34;
               width=&#34;760&#34;
               height=&#34;702&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Netflix å¼€å‘çš„ Vizceral å¯è§†åŒ–æœåŠ¡é…ç½®ã€‚ä¸ºäº†å®ç°ï¼Œæˆ‘ä»¬å¼€å‘äº† &lt;a href=&#34;https://github.com/nghialv/promviz&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;promviz&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/mjhd-devlion/promviz-front&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;promviz-front&lt;/a&gt; çš„ forkï¼ˆä¸ºäº†æ–¹ä¾¿ç”¨ nginx äº¤ä»˜å¹¶ç¬¦åˆ Cookpad ä¸­çš„æœåŠ¡ç»„åˆï¼‰ã€‚ç”±äºæˆ‘ä»¬ä»…åœ¨æŸäº›æœåŠ¡ä¸­å¼•å…¥ï¼Œå› æ­¤å½“å‰æ˜¾ç¤ºçš„èŠ‚ç‚¹æ•°é‡å¾ˆå°‘ï¼Œä½†æˆ‘ä»¬æä¾›äº†ä»¥ä¸‹ä»ªè¡¨æ¿ã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ª region çš„æœåŠ¡é…ç½®å›¾ã€RPSã€é”™è¯¯ç‡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv47xzjj20sg0gxdjd_hu_889040785166798.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv47xzjj20sg0gxdjd_hu_d2e46b21582700f9.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv47xzjj20sg0gxdjd_hu_1504c8e47e86a6e.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv47xzjj20sg0gxdjd_hu_889040785166798.webp&#34;
               width=&#34;760&#34;
               height=&#34;452&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç‰¹å®šæœåŠ¡çš„ downstream/upstreamï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3xymcj20sg0i2acs_hu_c881caaf2023b655.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3xymcj20sg0i2acs_hu_f55f293d3007f790.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv3xymcj20sg0i2acs_hu_fa34afb487ca3207.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv3xymcj20sg0i2acs_hu_c881caaf2023b655.webp&#34;
               width=&#34;760&#34;
               height=&#34;483&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼Œä½œä¸ºæœåŠ¡ç½‘æ ¼çš„ä¸€ä¸ªå­ç³»ç»Ÿï¼Œä½ å¿…é¡»éƒ¨ç½²ç½‘å…³ä»å¼€å‘å•†æ‰‹ä¸­è·å¾— staging ç¯å¢ƒçš„ gRPC æœåŠ¡å™¨åº”ç”¨ç¨‹åºï¼ˆå‡è®¾ä½¿ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡è¿›è¡Œè®¿é—®ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªç»„ä»¶æ¥è§£å†³å®ƒï¼‰ã€‚å®ƒæ˜¯é€šè¿‡å°† SDS API å’Œ Envoy ä¸ç®¡ç†ç§°ä¸º &lt;a href=&#34;http://techlife.cookpad.com/entry/2018/04/02/140846&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;hako-console&lt;/a&gt; çš„å†…éƒ¨åº”ç”¨ç¨‹åºçš„è½¯ä»¶ç›¸ç»“åˆè€Œæ„å»ºçš„ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Gateway appï¼ˆEnvoyï¼‰å‘ gateway controller å‘é€ xDS API è¯·æ±‚&lt;/li&gt;
&lt;li&gt;Gateway controller ä» hako-console è·å– staging ç¯å¢ƒä¸­çš„ gRPC åº”ç”¨ç¨‹åºåˆ—è¡¨ï¼Œå¹¶åŸºäºè¯¥å“åº”è¿”å› Route Discovery Service/Cluster Discovery Service API å“åº”&lt;/li&gt;
&lt;li&gt;Gateway app æ ¹æ®å“åº”ä» SDS API è·å–å®é™…è¿æ¥ç›®çš„åœ°&lt;/li&gt;
&lt;li&gt;ä»å¼€å‘äººå‘˜æ‰‹ä¸­å¼•ç”¨ AWS ELB Network Load Balancerï¼ŒGateway app æ‰§è¡Œè·¯ç”±&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv42jzej20sg0mmtaz_hu_d787cc494cbd1312.webp 400w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv42jzej20sg0mmtaz_hu_df3f4df26cd718f8.webp 760w,
               /blog/service-mesh-in-cookpad/61411417ly1fs7pv42jzej20sg0mmtaz_hu_173dc2451d8eba79.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/service-mesh-in-cookpad/61411417ly1fs7pv42jzej20sg0mmtaz_hu_d787cc494cbd1312.webp&#34;
               width=&#34;760&#34;
               height=&#34;604&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æ•ˆæœ&#34;&gt;æ•ˆæœ&lt;/h2&gt;
&lt;p&gt;å¼•å…¥æœåŠ¡ç½‘æ ¼æœ€æ˜¾ç€çš„æ˜¯å®ƒèƒ½å¤ŸæŠ‘åˆ¶ä¸´æ—¶æ•…éšœçš„å½±å“ã€‚æœ‰è®¸å¤šæµé‡çš„æœåŠ¡ä¹‹å‰æœ‰å¤šä¸ªåä½œéƒ¨åˆ†ï¼Œåˆ°ç°åœ¨ä¸ºæ­¢ï¼Œ200 å¤šä¸ªä¸ç½‘ç»œç›¸å…³çš„çç¢é”™è¯¯ï¼ˆä¸æµé‡ç›¸æ¯”ï¼Œè¿™ä¸ªæ•°å­—éå¸¸å°ï¼‰åœ¨ä¸€å°æ—¶å†…ä¸€ç›´åœ¨ä¸æ–­åœ°å‘ç”Ÿçš„ï¼ˆè¿™æ˜¯å› ä¸ºæœ‰äº›åœ°æ–¹è®¾ç½®äº†é‡è¯•ï¼‰ï¼Œå®ƒä»¬æ˜¯ç”±æœåŠ¡ç½‘æ ¼æ ¹æ®æƒ…å†µé€‚å½“è®¾ç½®çš„çš„é‡è¯•è®¾ç½®ï¼Œä»–å·²ç»ä¸‹é™åˆ°æ¯å‘¨ 1 ä¾‹å·¦å³ã€‚&lt;/p&gt;
&lt;p&gt;ä»ç›‘æµ‹çš„è§’åº¦æ¥çœ‹ï¼Œå„ç§æŒ‡æ ‡å·²ç»å‡ºç°ï¼Œä½†ç”±äºæˆ‘ä»¬åªæ˜¯é’ˆå¯¹æŸäº›æœåŠ¡å¼•å…¥äº†è¿™äº›æŒ‡æ ‡ï¼Œå¹¶ä¸”ç”±äºæ¨å‡ºæ—¥æœŸæˆ‘ä»¬è¿˜æ²¡æœ‰è¾¾åˆ°å…¨é¢ä½¿ç”¨ï¼Œæˆ‘ä»¬é¢„è®¡å°†æ¥ä¼šä½¿ç”¨å®ƒã€‚åœ¨ç®¡ç†æ–¹é¢ï¼Œå› ä¸ºæœåŠ¡ä¹‹é—´çš„è¿æ¥å·²ç»æˆä¸ºä¸€ä¸ªå®¹æ˜“ç†è§£å’Œå¯è§†åŒ–ï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›é€šè¿‡å°†æœåŠ¡ç½‘æ ¼å¼•å…¥æ‰€æœ‰çš„åº”ç”¨æœåŠ¡æ¥é¿å…å¿½è§†å’Œå¿½ç•¥å¯¹è±¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°†æ¥çš„è®¡åˆ’&#34;&gt;å°†æ¥çš„è®¡åˆ’&lt;/h2&gt;
&lt;h4 id=&#34;è¿ç§»åˆ°-v2-apiè½¬æ¢åˆ°-istio&#34;&gt;è¿ç§»åˆ° v2 APIï¼Œè½¬æ¢åˆ° Istio&lt;/h4&gt;
&lt;p&gt;ç”±äº xDS API çš„åˆå§‹è®¾è®¡æƒ…å†µå’Œä½¿ç”¨ S3 ä½œä¸ºåç«¯äº¤ä»˜çš„è¦æ±‚ï¼ŒxDS API ä¸€ç›´åœ¨ä½¿ç”¨ v1ï¼Œä½†ç”±äº v1 API å·²è¢«å¼ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬è®¡åˆ’å°†å…¶ç§»è‡³ v2ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬æ­£åœ¨è€ƒè™‘å°† control-plane ç§»è‡³ Istioã€‚å¦å¤–ï¼Œå¦‚æœæˆ‘ä»¬è¦æ„å»ºæˆ‘ä»¬è‡ªå·±çš„ control-planeï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ &lt;a href=&#34;https://github.com/envoyproxy/go-control-plane&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;go-control-plane&lt;/a&gt; æ¥æ„å»º &lt;a href=&#34;https%ef%bc%9a//github.com/envoyproxy/data-plane-api/blob/5ea10b04a950260e1af0572aa244846b6599a38f/API_OVERVIEW.md#apis&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LDS/RDS/CDS/EDS API&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ›¿æ¢åå‘ä»£ç†&#34;&gt;æ›¿æ¢åå‘ä»£ç†&lt;/h4&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼ŒCookpad ä½¿ç”¨ nginx ä½œä¸ºåå‘ä»£ç†ï¼Œä½†æ˜¯æˆ‘ä»¬è€ƒè™‘åˆ° nginx å’Œ Envoy åœ¨å†…éƒ¨æŠ€æœ¯å®ç°ã€gRPC é€šä¿¡å’Œé‡‡é›†åº¦é‡æ–¹é¢çš„å·®å¼‚ï¼Œæˆ‘ä»¬å°†è€ƒè™‘ç”¨ Envoy æ›¿æ¢ nginx çš„åå‘ä»£ç†å’Œè¾¹ç¼˜ä»£ç†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æµé‡æ§åˆ¶&#34;&gt;æµé‡æ§åˆ¶&lt;/h4&gt;
&lt;p&gt;éšç€æˆ‘ä»¬è½¬å‘å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡å¹¶å–ä»£åå‘ä»£ç†ï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿé€šè¿‡æ“ä½œ Envoy æ›´æ–¹ä¾¿çš„å¤„ç†æµé‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†èƒ½å¤Ÿå®ç°é‡‘ä¸é›€éƒ¨ç½²ã€æµé‡è½¬ç§»å’Œè¯·æ±‚é•œåƒã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ•…éšœæ³¨å…¥&#34;&gt;æ•…éšœæ³¨å…¥&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªæ•…æ„åœ¨æ­£ç¡®ç®¡ç†çš„ç¯å¢ƒä¸­æ³¨å…¥å»¶è¿Ÿå’Œæ•…éšœçš„æœºåˆ¶ï¼Œå¹¶æµ‹è¯•å®é™…æœåŠ¡ç»„æ˜¯å¦å¯ä»¥æ­£å¸¸å·¥ä½œã€‚Envoy æœ‰å„ç§&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/v1.6.0/configuration/http_filters/fault_filter.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŠŸèƒ½&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœ¨-data-plane-å±‚ä¸Šæ‰§è¡Œåˆ†å¸ƒå¼è·Ÿè¸ª&#34;&gt;åœ¨ data-plane å±‚ä¸Šæ‰§è¡Œåˆ†å¸ƒå¼è·Ÿè¸ª&lt;/h4&gt;
&lt;p&gt;åœ¨ Cookpad é‡Œï¼ŒAWS X-Ray è¢«ç”¨ä½œ&lt;a href=&#34;http://techlife.cookpad.com/entry/2017/09/06/115710&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åˆ†å¸ƒå¼è¿½è¸ªç³»ç»Ÿ&lt;/a&gt;ã€‚ç›®å‰ï¼Œæˆ‘ä»¬å°†åˆ†å¸ƒå¼è·Ÿè¸ªåŠŸèƒ½ä½œä¸ºä¸€ä¸ªåº“æ¥å®ç°ï¼Œä½†æˆ‘ä»¬è®¡åˆ’å°†å…¶ç§»è‡³ data-plane å¹¶åœ¨æœåŠ¡ç½‘æ ¼å±‚å®ç°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;èº«ä»½éªŒè¯æˆæƒç½‘å…³&#34;&gt;èº«ä»½éªŒè¯æˆæƒç½‘å…³&lt;/h4&gt;
&lt;p&gt;è¿™æ˜¯ä¸ºäº†ä»…åœ¨æ¥æ”¶ç”¨æˆ·è¯·æ±‚çš„æœ€å‰ç«¯æœåŠ¡å™¨è¿›è¡Œè®¤è¯å’Œæˆæƒå¤„ç†ï¼Œéšåçš„æœåŠ¡å™¨å°†ä½¿ç”¨ç»“æœã€‚ä»¥å‰ï¼Œå®ƒä¸å®Œå…¨æ˜¯ä½œä¸ºä¸€ä¸ªåº“æ¥å®æ–½çš„ï¼Œä½†æ˜¯é€šè¿‡è½¬å‘ data-planeï¼Œæˆ‘ä»¬å¯ä»¥è·å¾—è¿‡ç¨‹æ¨¡å‹çš„ä¼˜ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœ€å&#34;&gt;æœ€å&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»ä»‹ç»äº† Cookpad ä¸­æœåŠ¡ç½‘æ ¼çš„ç°çŠ¶å’Œæœªæ¥è®¡åˆ’ã€‚è®¸å¤šåŠŸèƒ½å·²ç»å¯ä»¥å¾ˆå®¹æ˜“åœ°å®ç°ï¼Œå¹¶ä¸”ç”±äºæœªæ¥æœåŠ¡ç½‘æ ¼å±‚å¯ä»¥å®Œæˆæ›´å¤šçš„å·¥ä½œï¼Œå› æ­¤å¼ºçƒˆå»ºè®®æ¯ä¸ªå¾®æœåŠ¡ç³»ç»Ÿéƒ½é‡‡ç”¨æœåŠ¡ç½‘æ ¼ã€‚&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>
