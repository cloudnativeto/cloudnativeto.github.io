<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>äº‘åŸç”Ÿç¤¾åŒº | äº‘åŸç”Ÿç¤¾åŒºï¼ˆä¸­å›½ï¼‰</title>
    <link>https://cloudnativecn.com/translators/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%A4%BE%E5%8C%BA/</link>
      <atom:link href="https://cloudnativecn.com/translators/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%A4%BE%E5%8C%BA/index.xml" rel="self" type="application/rss+xml" />
    <description>äº‘åŸç”Ÿç¤¾åŒº</description>
    <generator>Wowchemy (https://wowchemy.com)</generator><language>zh</language><lastBuildDate>Mon, 14 Apr 2025 10:37:31 +0800</lastBuildDate>
    <image>
      <url>https://cloudnativecn.com/translators/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%A4%BE%E5%8C%BA/avatar_hu160136486424020243.png</url>
      <title>äº‘åŸç”Ÿç¤¾åŒº</title>
      <link>https://cloudnativecn.com/translators/%E4%BA%91%E5%8E%9F%E7%94%9F%E7%A4%BE%E5%8C%BA/</link>
    </image>
    
    <item>
      <title>MCP åˆ°åº•æ˜¯ä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆæ¯ä¸ªäººéƒ½åœ¨è°ˆè®ºå®ƒï¼Ÿ</title>
      <link>https://cloudnativecn.com/blog/what-the-heck-is-mcp-and-why-is-everyone-talking-about-it/</link>
      <pubDate>Mon, 14 Apr 2025 10:37:31 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/what-the-heck-is-mcp-and-why-is-everyone-talking-about-it/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://github.blog/ai-and-ml/llms/what-the-heck-is-mcp-and-why-is-everyone-talking-about-it/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;What the heck is MCP and why is everyone talking about it?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å¤§æ¨¡å‹ï¼ˆLLMï¼‰ç›¸å…³çš„è®¨è®ºä¸­ï¼Œæœ€è¿‘â€œ&lt;strong&gt;MCPï¼ˆæ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ŒModel Context Protocolï¼‰&lt;/strong&gt;â€è¿™ä¸ªè¯é¢‘é¢‘å‡ºç°ï¼Œå‡ ä¹æˆäº†çƒ­é—¨è¯é¢˜ã€‚ä½†çœŸæ­£è®²æ¸…æ¥šå®ƒæ˜¯ä»€ä¹ˆçš„ï¼Œåè€Œä¸å¤šã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸€å¥è¯æ€»ç»“ï¼šMCP æ˜¯ä¸€ä¸ªå¼€æ”¾æ ‡å‡†ï¼Œç”¨æ¥è¿æ¥å¤§æ¨¡å‹ä¸å¤–éƒ¨çš„æ•°æ®å’Œå·¥å…·ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡å¸¦ä½ å¿«é€Ÿäº†è§£å®ƒçš„æ¥é¾™å»è„‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;llm-çš„ä¸Šä¸‹æ–‡éš¾é¢˜&#34;&gt;LLM çš„ä¸Šä¸‹æ–‡éš¾é¢˜&lt;/h2&gt;
&lt;p&gt;å¤§æ¨¡å‹æ“…é•¿ç”Ÿæˆå†…å®¹ï¼Œä½†ä¸€æ—¦ä½ é—®å®ƒä¸€äº›è®­ç»ƒæ•°æ®ä¹‹å¤–çš„å†…å®¹ï¼Œå®ƒè¦ä¹ˆ&lt;strong&gt;èƒ¡è¯Œ&lt;/strong&gt;ï¼ˆå¹»è§‰ï¼‰ï¼Œè¦ä¹ˆè¯´â€œæˆ‘ä¸çŸ¥é“â€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦åœ¨ Prompt é‡Œæä¾›â€œä¸Šä¸‹æ–‡ä¿¡æ¯â€â€”â€”æ— è®ºæ˜¯ä½ çš„ä»£ç ä»“åº“ã€æ–‡æ¡£ã€æ•°æ®æºè¿˜æ˜¯é…ç½®é¡¹ï¼Œè¿™äº›ä¸Šä¸‹æ–‡å¯¹æ„å»ºçœŸæ­£æœ‰ç”¨çš„ AI agent æ¥è¯´æ˜¯å¿…ä¸å¯å°‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ä¸»æµåšæ³•åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ Prompt ä¸­å°½å¯èƒ½ç²¾ç»†åœ°åµŒå…¥ä¸Šä¸‹æ–‡&lt;/li&gt;
&lt;li&gt;å€ŸåŠ©é¢å¤–å·¥å…·æ³¨å…¥ä¸Šä¸‹æ–‡ï¼Œæ¯”å¦‚ GitHub Copilot çš„ &lt;a href=&#34;https://code.visualstudio.com/docs/copilot/workspace-context&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@workspace&lt;/a&gt;ï¼Œä¼šæŠŠä»£ç åº“ä¸­çš„ä¿¡æ¯ä¼ é€’ç»™ LLM&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ç§æ–¹å¼è™½ç„¶å¾ˆé…·ï¼Œä½†&lt;strong&gt;å®ç°å¤æ‚ã€è·¨ API å’ŒæœåŠ¡é›†æˆæ—¶æ›´æ˜¯å›°éš¾é‡é‡&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆmcpmodel-context-protocol&#34;&gt;è§£å†³æ–¹æ¡ˆï¼šMCPï¼ˆModel Context Protocolï¼‰&lt;/h2&gt;
&lt;p&gt;2023 å¹´ 11 æœˆï¼ŒAnthropic &lt;a href=&#34;https://www.anthropic.com/news/model-context-protocol&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€æºäº† MCP åè®®&lt;/a&gt;ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨äºè¿æ¥å¤§æ¨¡å‹å’Œå·¥å…·çš„æ•°æ®äº¤æ¢æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;MCP å°±åƒâ€œä½ ç¡è§‰çš„æ ·å­â€â€”â€”èµ·åˆæ…¢æ…¢å‘å±•ï¼Œåæ¥çªç„¶çˆ†ç«ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„ç»„ç»‡é‡‡çº³ MCPï¼Œå®ƒçš„ä»·å€¼ä¹Ÿåœ¨è¿…é€Ÿä¸Šå‡ã€‚&lt;/p&gt;
&lt;p&gt;âœ¨ &lt;strong&gt;MCP æ˜¯æ¨¡å‹æ— å…³çš„ï¼ˆmodel-agnosticï¼‰&lt;/strong&gt;ï¼Œæ„å‘³ç€ä»»ä½•å‚å•†ã€å¹³å°æˆ–ä¸ªäººå¼€å‘è€…éƒ½å¯ä»¥å®ç°è‡ªå·±çš„ MCP å…¼å®¹ç³»ç»Ÿã€‚è¿™ç§å¼€æ”¾æ€§è®©å®ƒåœ¨ AI å·¥å…·ç”Ÿæ€ä¸­å¤§å—æ¬¢è¿ã€‚&lt;/p&gt;
&lt;p&gt;ä»äº‘åŸç”Ÿç¤¾åŒºçš„è§’åº¦çœ‹ï¼Œå®ƒç±»ä¼¼äºæˆ‘ä»¬ç†Ÿæ‚‰çš„ &lt;a href=&#34;https://microsoft.github.io/language-server-protocol/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Language Server Protocolï¼ˆLSPï¼‰&lt;/a&gt;ã€‚LSP è¯ç”Ÿäº 2016 å¹´ï¼Œæ ‡å‡†åŒ–äº†ä»£ç ç¼–è¾‘å™¨å’Œè¯­è¨€ä¹‹é—´çš„é€šä¿¡æ–¹å¼ï¼Œä½¿ç¼–è¾‘å™¨å¯¹è¯­è¨€çš„æ”¯æŒå˜å¾—â€œå¼€ç®±å³ç”¨â€ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šï¼Œ&lt;strong&gt;MCP æ­£åœ¨å¤åˆ»è¿™ä¸€æˆåŠŸè·¯å¾„ï¼Œåªä¸è¿‡å¯¹è±¡å˜æˆäº† AI å·¥å…·é“¾ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&#34;mcp-æ„å‘³ç€ä»€ä¹ˆ&#34;&gt;MCP æ„å‘³ç€ä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å®ƒè®©ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤§å‚ ğŸ¢&lt;/li&gt;
&lt;li&gt;åˆåˆ›å›¢é˜Ÿ ğŸš€&lt;/li&gt;
&lt;li&gt;ç‹¬ç«‹å¼€å‘è€… ğŸ‘©â€ğŸ’»&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;éƒ½èƒ½åœ¨è‡ªå·±çš„ç³»ç»Ÿä¸­&lt;strong&gt;å¿«é€Ÿé›†æˆä¸Šä¸‹æ–‡èƒ½åŠ›&lt;/strong&gt;ï¼Œä»è€Œæ„å»ºåŠŸèƒ½æ›´å¼ºå¤§çš„ AI åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®ƒé™ä½äº† AI å·¥å…·é“¾çš„é›†æˆé—¨æ§›ï¼Œæå‡äº†å¼€å‘ä½“éªŒå’Œç”¨æˆ·ä½“éªŒ&lt;/strong&gt;ï¼Œåœ¨å¼€æ”¾æ ‡å‡†é¢†åŸŸï¼ŒMCP æœ‰æœ›æˆä¸ºâ€œæ–°ä¸€ä»£åŸºç¡€è®¾æ–½â€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;github-æ­£åœ¨è¡ŒåŠ¨&#34;&gt;GitHub æ­£åœ¨è¡ŒåŠ¨&lt;/h2&gt;
&lt;p&gt;GitHub ä¸åªæ˜¯èŠ MCPï¼Œæˆ‘ä»¬ä¹Ÿåœ¨è´¡çŒ®ï¼&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœ€è¿‘å‘å¸ƒäº†ä¸€ä¸ªå®˜æ–¹å¼€æºé¡¹ç›®ï¼š&lt;a href=&#34;https://github.com/github/github-mcp-server&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub MCP Server&lt;/a&gt;ï¼Œå®ƒå¯ä»¥ä¸ GitHub API æ— ç¼é›†æˆï¼Œå¼€å‘è€…å¯ä»¥åŸºäºå®ƒæ„å»ºè‡ªåŠ¨åŒ–å’Œä¸Šä¸‹æ–‡å¢å¼ºå·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ“¢ æŸ¥çœ‹ &lt;a href=&#34;https://github.blog/changelog/2025-04-04-github-mcp-server-public-preview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹å…¬å‘Š&lt;/a&gt;ï¼Œæˆ–åŠ å…¥ &lt;a href=&#34;https://github.com/orgs/community/discussions/categories/announcements&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub ç¤¾åŒºè®¨è®º&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å‚ä¸-mcp-ç¤¾åŒº&#34;&gt;å¦‚ä½•å‚ä¸ MCP ç¤¾åŒºï¼Ÿ&lt;/h2&gt;
&lt;p&gt;éå¸¸æ¬¢è¿ä½ åŠ å…¥ MCP ç¤¾åŒºå¹¶è´¡çŒ®åŠ›é‡ï¼Œä¸‹é¢æ˜¯ä¸€äº›æ¨èèµ„æºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://modelcontextprotocol.io/introduction&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MCP å®˜æ–¹æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/modelcontextprotocol/servers&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MCP ç¤ºä¾‹å®ç°ä»“åº“&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://spec.modelcontextprotocol.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MCP åè®®è§„èŒƒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://code.visualstudio.com/api/language-extensions/language-server-extension-guide#why-language-server&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LSP èƒŒæ™¯èµ„æ–™&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å½“ç„¶ï¼Œä¹Ÿåˆ«å¿˜äº†ï¼šMCP å·²å¯ä¸ Agent æ¨¡å¼ç»“åˆä½¿ç”¨ã€‚æ˜¯æ—¶å€™åŠ¨æ‰‹æ‰“é€ ä½ çš„ AI å·¥å…·é“¾äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;-äº‘åŸç”Ÿè§†è§’æ€»ç»“&#34;&gt;ğŸš€ äº‘åŸç”Ÿè§†è§’æ€»ç»“&lt;/h2&gt;
&lt;p&gt;MCP æ˜¯ä¸€ä¸ªç¬¦åˆäº‘åŸç”Ÿä»·å€¼è§‚çš„åè®®æ ‡å‡†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¼€æ”¾&lt;/strong&gt;ï¼šäººäººå¯ç”¨ï¼Œäººäººå¯è´¡çŒ®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç»„åˆ&lt;/strong&gt;ï¼šå¯ä»¥é›†æˆåˆ°ä»»ä½• AI ç³»ç»Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¯ç§»æ¤&lt;/strong&gt;ï¼šä¸ç»‘å®šä»»ä½•å¹³å°æˆ–æ¨¡å‹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæ€é©±åŠ¨&lt;/strong&gt;ï¼šæ ‡å‡†çš„æ™®åŠå¸¦åŠ¨å·¥å…·å’Œå¹³å°å…±åŒè¿›åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®ƒçš„å´›èµ·åƒå½“å¹´çš„ Kubernetesã€gRPCã€LSP â€”â€” æ­£åœ¨ä¸º AI æ—¶ä»£æ„å»ºâ€œå¯æ’æ‹”â€åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istio åœ¨ GKE ä¸Šçš„æ— ç¼ TLS ä½“éªŒï¼šä½¿ç”¨è‡ªå®šä¹‰ Admission Controller è‡ªåŠ¨ç­¾å‘è¯ä¹¦</title>
      <link>https://cloudnativecn.com/blog/seamless-tls-istio-gke-auto-provision-certificates/</link>
      <pubDate>Thu, 10 Apr 2025 20:54:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/seamless-tls-istio-gke-auto-provision-certificates/</guid>
      <description>&lt;p&gt;Istio å·²ç»æˆä¸º Kubernetes ä¸­æœåŠ¡é—´é€šä¿¡ç®¡ç†çš„äº‹å®æ ‡å‡†ï¼Œæä¾›äº†å¼ºå¤§çš„æµé‡æ²»ç†ã€å®‰å…¨é˜²æŠ¤å’Œå¯è§‚æµ‹æ€§èƒ½åŠ›ã€‚ç„¶è€Œï¼Œå½“æˆ‘ä»¬åœ¨ &lt;strong&gt;Google Kubernetes Engine (GKE)&lt;/strong&gt; ä¸Šé€šè¿‡ Istio Gateway æš´éœ²æœåŠ¡æ—¶ï¼ŒTLS è¯ä¹¦çš„ç®¡ç†ä»ç„¶æ˜¯ä¸€é¡¹æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡ &lt;strong&gt;cert-manager&lt;/strong&gt; åœ¨ Kubernetes ä¸­ç®€åŒ–äº†è¯ä¹¦çš„ç­¾å‘è¿‡ç¨‹ï¼Œä½†ç›®å‰å®ƒå¹¶ä¸æ”¯æŒåŸºäºæ³¨è§£è‡ªåŠ¨ä¸º Istio Gateway ç­¾å‘è¯ä¹¦ã€‚è¿™ä½¿å¾—ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åˆ›å»º &lt;code&gt;Certificate&lt;/code&gt; å’Œ &lt;code&gt;Issuer&lt;/code&gt; ç­‰èµ„æºï¼Œä¸ä»…ç¹çï¼Œè¿˜å®¹æ˜“äº§ç”Ÿé…ç½®ä¸ä¸€è‡´ï¼Œå¢åŠ äº†è¿ç»´è´Ÿæ‹…ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¡«è¡¥è¿™ä¸€ç©ºç¼ºï¼Œæœ¬æ–‡æå‡ºäº†ä¸€ç§åŸºäº &lt;strong&gt;Kubernetes Admission Controller&lt;/strong&gt; çš„è‡ªåŠ¨åŒ–æ–¹æ¡ˆï¼Œå®ç°è¯ä¹¦çš„è‡ªåŠ¨ç­¾å‘ä¸æ³¨å…¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;gke-ç”¨æˆ·ä¸ºä½•éœ€è¦å…³æ³¨&#34;&gt;GKE ç”¨æˆ·ä¸ºä½•éœ€è¦å…³æ³¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¯¹äºåœ¨ GKE ä¸Šè¿è¡Œ Istio çš„å›¢é˜Ÿè€Œè¨€ï¼Œå°¤å…¶æ˜¯åœ¨å¤§è§„æ¨¡å¤šå¾®æœåŠ¡åœºæ™¯ä¸‹ï¼Œæ‰‹åŠ¨ç®¡ç†è¯ä¹¦æ•ˆç‡ä½ä¸‹ã€‚è™½ç„¶ GKE æ”¯æŒ Google æ‰˜ç®¡è¯ä¹¦ï¼Œä½†å‡ºäºçµæ´»æ€§å’Œå¯¹å¤šç§ CA æ”¯æŒçš„è€ƒè™‘ï¼Œè®¸å¤šå›¢é˜Ÿä¾ç„¶å€¾å‘äºä½¿ç”¨ &lt;strong&gt;cert-manager&lt;/strong&gt;ã€‚æœ¬æ–‡ä»‹ç»çš„è§£å†³æ–¹æ¡ˆï¼Œæ­£æ˜¯ä¸ºäº†è®© cert-manager èƒ½æ— ç¼ä¸ Istio Gateway é›†æˆï¼Œåœ¨ä¿æŒå®‰å…¨æ€§ä¸å¯é æ€§çš„å‰æä¸‹ï¼Œå®ç°è‡ªåŠ¨åŒ–è¯ä¹¦ç®¡ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æŠ€æœ¯æ ˆ&#34;&gt;æŠ€æœ¯æ ˆ&lt;/h2&gt;
&lt;p&gt;Admission Controller é‡‡ç”¨ä»¥ä¸‹æŠ€æœ¯å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;FastAPI&lt;/strong&gt;ï¼šé«˜æ€§èƒ½ Python Web æ¡†æ¶ï¼Œä½œä¸º Webhook æœåŠ¡çš„ä¸»å¹²ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Uvicorn&lt;/strong&gt;ï¼šè½»é‡çº§ ASGI æœåŠ¡å™¨ï¼Œç”¨äºéƒ¨ç½² FastAPI åº”ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Kubernetes Python SDK&lt;/strong&gt;ï¼šç”¨äºä¸ K8s API äº¤äº’ï¼ŒåŠ¨æ€åˆ›å»ºè¯ä¹¦èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Docker&lt;/strong&gt;ï¼šç”¨äºå®¹å™¨åŒ– webhook æœåŠ¡ï¼Œæ–¹ä¾¿éƒ¨ç½²ä¸äº¤ä»˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Google Kubernetes Engine (GKE)&lt;/strong&gt;ï¼šæ§åˆ¶å™¨çš„è¿è¡Œå¹³å°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é¡¹ç›®åœ°å€ï¼š&lt;a href=&#34;https://github.com/Sayed-Imran/istio-cert-manager-webhook&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio-Cert Admission Controller&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è¿›å…¥å…·ä½“å®ç°å‰ï¼Œæˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹ Kubernetes ä¸­çš„ webhook æœºåˆ¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-admission-webhookéªŒè¯ä¸ä¿®æ”¹&#34;&gt;Kubernetes Admission Webhookï¼šéªŒè¯ä¸ä¿®æ”¹&lt;/h2&gt;
&lt;p&gt;Admission Webhook å¯æ‹¦æˆª Kubernetes API è¯·æ±‚ï¼Œåœ¨èµ„æºè½åº“å‰è¿›è¡Œæ ¡éªŒæˆ–ä¿®æ”¹ï¼Œæ˜¯å®ç°ç­–ç•¥æ§åˆ¶ä¸è‡ªåŠ¨åŒ–çš„å…³é”®æœºåˆ¶ã€‚Kubernetes æ”¯æŒä¸¤ç§ä¸»è¦ç±»å‹çš„ Webhookï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-validating-webhookéªŒè¯å‹&#34;&gt;1. Validating Webhookï¼ˆéªŒè¯å‹ï¼‰&lt;/h3&gt;
&lt;p&gt;ç”¨äºåœ¨èµ„æºåˆ›å»ºæˆ–ä¿®æ”¹å‰è¿›è¡Œæ ¡éªŒï¼Œè‹¥ä¸ç¬¦åˆé¢„æœŸè§„èŒƒå¯ç›´æ¥æ‹’ç»è¯¥è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;ï¼šæ ¡éªŒæ¯ä¸ª Istio Gateway æ˜¯å¦åŒ…å«åˆæ³•çš„ &lt;code&gt;host&lt;/code&gt; å­—æ®µã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-mutating-webhookå˜æ›´å‹&#34;&gt;2. Mutating Webhookï¼ˆå˜æ›´å‹ï¼‰&lt;/h3&gt;
&lt;p&gt;å¯å¯¹èµ„æºè¿›è¡Œä¿®æ”¹ï¼Œå¦‚æ³¨å…¥é»˜è®¤å€¼æˆ–è‡ªåŠ¨æ·»åŠ æ³¨è§£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å…¸å‹åœºæ™¯&lt;/strong&gt;ï¼šä¸º Istio Gateway è‡ªåŠ¨æ·»åŠ  &lt;code&gt;cert-manager.io/issuer&lt;/code&gt; æ³¨è§£ï¼Œè§¦å‘è¯ä¹¦è‡ªåŠ¨ç­¾å‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å®ç°çš„æ˜¯ä¸€ä¸ª &lt;strong&gt;Validating Webhook&lt;/strong&gt;ï¼Œå®ƒä¸ä»…æ ¡éªŒ &lt;code&gt;issuer&lt;/code&gt; æ˜¯å¦å­˜åœ¨ï¼Œè¿˜åœ¨æ¡ä»¶æ»¡è¶³æ—¶è‡ªåŠ¨åˆ›å»ºå¯¹åº”çš„ &lt;code&gt;Certificate&lt;/code&gt; èµ„æºï¼›è‹¥ &lt;code&gt;issuer&lt;/code&gt; ä¸å­˜åœ¨ï¼Œåˆ™ç›´æ¥æ‹’ç»è¯·æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¶æ„è®¾è®¡æ¦‚è§ˆ&#34;&gt;æ¶æ„è®¾è®¡æ¦‚è§ˆ&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ¶æ„è®¾è®¡æ¦‚è§ˆ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ¶æ„è®¾è®¡æ¦‚è§ˆ&#34; srcset=&#34;
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f1_hu16163274552010729362.webp 400w,
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f1_hu12018648231365090295.webp 760w,
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f1_hu10685229775563423765.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/seamless-tls-istio-gke-auto-provision-certificates/f1_hu16163274552010729362.webp&#34;
               width=&#34;760&#34;
               height=&#34;124&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ¶æ„è®¾è®¡æ¦‚è§ˆ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Admission Controller ä¸»è¦åˆ†ä¸ºä¸‰ä¸ªå±‚æ¬¡ï¼š&lt;/p&gt;
&lt;h3 id=&#34;api-å±‚&#34;&gt;&lt;strong&gt;API å±‚&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;è´Ÿè´£æ¥æ”¶æ¥è‡ª K8s API Server çš„ AdmissionReview è¯·æ±‚ï¼Œæå– JSON Payload å¹¶è½¬äº¤ç»™ Handler å±‚è¿›è¡Œå¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;handler-å±‚&#34;&gt;&lt;strong&gt;Handler å±‚&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æ ¸å¿ƒæ ¡éªŒé€»è¾‘æ‰€åœ¨ï¼Œåˆ¤æ–­ Istio Gateway æ˜¯å¦åŒ…å«ä»¥ä¸‹æ³¨è§£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;cert-manager.io/issuer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;cert-manager.io/cluster-issuer&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;åœºæ™¯-1æœªåŒ…å«æ³¨è§£&#34;&gt;åœºæ™¯ 1ï¼šæœªåŒ…å«æ³¨è§£&lt;/h4&gt;
&lt;p&gt;ç›´æ¥è¿”å›å…è®¸å“åº”ï¼ˆ&lt;code&gt;allowed: true&lt;/code&gt;ï¼‰ï¼Œè·³è¿‡è¿›ä¸€æ­¥å¤„ç†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;apiVersion&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;admission.k8s.io/v1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;kind&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;AdmissionReview&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nt&#34;&gt;&amp;#34;response&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;allowed&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;uid&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;xxx-xxx&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;status&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;nt&#34;&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;Validation passed&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šè¿”å›å“åº”çš„ &lt;code&gt;uid&lt;/code&gt; å­—æ®µå¿…é¡»ä¸è¯·æ±‚ä¸­çš„å®Œå…¨ä¸€è‡´ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;åœºæ™¯-2åŒ…å«æ³¨è§£&#34;&gt;åœºæ™¯ 2ï¼šåŒ…å«æ³¨è§£&lt;/h4&gt;
&lt;p&gt;Webhook ä¼šè¿›ä¸€æ­¥æŸ¥è¯¢æŒ‡å®šçš„ &lt;code&gt;Issuer&lt;/code&gt; æˆ– &lt;code&gt;ClusterIssuer&lt;/code&gt; æ˜¯å¦å­˜åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è‹¥å­˜åœ¨ï¼šæ”¾è¡Œè¯·æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;è‹¥ä¸å­˜åœ¨ï¼šè¿”å› &lt;code&gt;allowed: false&lt;/code&gt;ï¼Œå¹¶æç¤ºè¯¥ Issuer ä¸å­˜åœ¨ï¼Œé˜²æ­¢é”™è¯¯å¼•ç”¨å¯¼è‡´è¯ä¹¦æ— æ³•ç”Ÿæˆã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸€æœºåˆ¶ç¡®ä¿äº† Gateway ä¸ä¼šå¼•ç”¨ä¸å­˜åœ¨çš„ CAï¼Œæé«˜é…ç½®å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-å·¥å…·å±‚å®ç°è¯ä¹¦è‡ªåŠ¨åˆ›å»º&#34;&gt;Kubernetes å·¥å…·å±‚ï¼šå®ç°è¯ä¹¦è‡ªåŠ¨åˆ›å»º&lt;/h2&gt;
&lt;p&gt;ä¸åŒäºä¼ ç»Ÿ webhook ä»…éªŒè¯è¯·æ±‚ï¼Œè¯¥å±‚è¿›ä¸€æ­¥å®ç°äº† &lt;strong&gt;èµ„æºåˆ›å»ºåŠŸèƒ½&lt;/strong&gt;ã€‚ä¸€æ—¦æ ¡éªŒé€šè¿‡ï¼Œå°†è‡ªåŠ¨åˆ›å»º &lt;code&gt;Certificate&lt;/code&gt; èµ„æºï¼Œå¹¶é…ç½®ä»¥ä¸‹ç‰¹æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ ¹æ®æ³¨è§£è®¾å®š &lt;code&gt;issuerRef&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ³¨è§£é…ç½®æœ‰æ•ˆæœŸï¼ˆ&lt;code&gt;duration&lt;/code&gt;ï¼‰ã€ç»­æœŸæ—¶é—´ï¼ˆ&lt;code&gt;renewBefore&lt;/code&gt;ï¼‰ç­‰å­—æ®µã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåŠ¨æ³¨å…¥ &lt;code&gt;ownerReference&lt;/code&gt;ï¼Œç»‘å®šåˆ°åŸå§‹ Gateway å¯¹è±¡ä¸Šï¼Œå®ç°ç”Ÿå‘½å‘¨æœŸè”åŠ¨ï¼Œå½“ Gateway åˆ é™¤æ—¶è‡ªåŠ¨æ¸…ç†è¯ä¹¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸€æœºåˆ¶ï¼ŒåŸæœ¬ç¹ççš„è¯ä¹¦é…ç½®è¿‡ç¨‹è¢«è‡ªåŠ¨åŒ–å¤„ç†ï¼Œæå¤§å‡å°‘äººä¸ºé”™è¯¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ— éœ€æ‰‹åŠ¨åˆ›å»º Gateway åå†æ‰‹åŠ¨ç”Ÿæˆè¯ä¹¦ã€‚&lt;/li&gt;
&lt;li&gt;ä¸éœ€æ‰‹åŠ¨å¡«å†™å„ç§å…ƒæ•°æ®æˆ–ç»´æŠ¤å¼•ç”¨å…³ç³»ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;ä¸-kubernetes-å¯¹æ¥æ³¨å†Œ-validatingwebhookconfiguration&#34;&gt;ä¸ Kubernetes å¯¹æ¥ï¼šæ³¨å†Œ ValidatingWebhookConfiguration&lt;/h2&gt;
&lt;p&gt;æœ€åä¸€æ­¥æ˜¯å°† Admission Controller æ³¨å†Œä¸º Kubernetes çš„ Validating Webhookï¼Œé…ç½®æ‹¦æˆªå“ªäº›æ“ä½œã€‚å…·ä½“è®¾ç½®ä¸ºç›‘å¬å¯¹ Istio Gateway çš„ &lt;code&gt;CREATE&lt;/code&gt; ä¸ &lt;code&gt;UPDATE&lt;/code&gt; æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç¤ºæ„é…ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ç¤ºæ„é…ç½®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ç¤ºæ„é…ç½®&#34; srcset=&#34;
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f2_hu9618232604218857826.webp 400w,
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f2_hu3432124741495777229.webp 760w,
               /blog/seamless-tls-istio-gke-auto-provision-certificates/f2_hu7144883279989152317.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/seamless-tls-istio-gke-auto-provision-certificates/f2_hu9618232604218857826.webp&#34;
               width=&#34;523&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ç¤ºæ„é…ç½®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨æ„ï¼šWebhook æœåŠ¡å¿…é¡»é€šè¿‡ HTTPS æä¾›æœåŠ¡ï¼ŒK8s API Server ä»…æ”¯æŒåŠ å¯†é€šä¿¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;é€šè¿‡æ‰©å±•ä¼ ç»Ÿ Admission Controller çš„åŠŸèƒ½ï¼Œå®ç°äº†ä¸ Istio Gateway ç´§å¯†é›†æˆçš„ TLS è‡ªåŠ¨ç­¾å‘æ–¹æ¡ˆã€‚å®ƒå…¼å…·è‡ªåŠ¨åŒ–ä¸ç”Ÿå‘½å‘¨æœŸæ„ŸçŸ¥ï¼Œä¸ä»…æå‡äº†é…ç½®ä¸€è‡´æ€§ï¼Œä¹Ÿå‡å°‘äº†è¯ä¹¦ç®¡ç†çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡æ­¤æ–¹æ¡ˆä¸»è¦é¢å‘ Istio + cert-managerï¼Œä½†è¯¥æ¨¡å¼ä¹Ÿé€‚ç”¨äºå…¶ä»–èµ„æºçš„è‡ªåŠ¨åˆ›å»ºä¸æ²»ç†åœºæ™¯ã€‚åªéœ€ç»“åˆåˆç†çš„æ ¡éªŒé€»è¾‘ã€èµ„æºç»‘å®šç­–ç•¥ä¸å®‰å…¨æœºåˆ¶ï¼ŒAdmission Controller å°±èƒ½æˆä¸º Kubernetes ä¸­å¼ºå¤§çš„è‡ªåŠ¨åŒ–åˆ©å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¯¹äº‘åŸç”Ÿå®‰å…¨æ²»ç†ã€è¯ä¹¦ç”Ÿå‘½å‘¨æœŸç®¡ç†æˆ– Istio Gateway çš„è‡ªåŠ¨åŒ–æ„Ÿå…´è¶£ï¼Œå¯ä»¥è¿›ä¸€æ­¥å‚è€ƒé¡¹ç›®ä»£ç å¹¶è¿›è¡Œå®è·µéƒ¨ç½²ï¼šhttps://github.com/Sayed-Imran/istio-cert-manager-webhook&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istio Egress Gateway ç®€åŒ–æŒ‡å—</title>
      <link>https://cloudnativecn.com/blog/egress-gateway-made-easy/</link>
      <pubDate>Wed, 09 Apr 2025 11:15:24 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/egress-gateway-made-easy/</guid>
      <description>&lt;p&gt;å¤šå¹´æ¥ï¼ŒIstio ä¸€ç›´æä¾›ä¸€ç§å¯é€‰æ–¹æ¡ˆæ¥éƒ¨ç½² â€œ&lt;a href=&#34;https://istio.io/latest/docs/tasks/traffic-management/egress/egress-gateway/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Egress Gateway&lt;/a&gt;â€ï¼Œè¿™æ˜¯ä¸€ç§åŠŸèƒ½å¼ºå¤§çš„æœºåˆ¶ï¼Œå¯å°†å‡ºç«™æµé‡ç»ç”±ä¸€ä¸ª Gateway ç»Ÿä¸€è½¬å‘ï¼Œä»¥ä¾¿å¯¹å…¶å®æ–½å„ç±»ç­–ç•¥ï¼ŒåŒ…æ‹¬æˆæƒã€å®¡è®¡ã€å¯è§‚æµ‹æ€§ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡åŠŸèƒ½å¼ºå¤§ï¼Œä½†é•¿æœŸä»¥æ¥ï¼Œè®¾ç½® egress gateway ä¸€ç›´ç›¸å½“å¤æ‚ã€‚å³ä¾¿åªæ˜¯æœ€åŸºæœ¬çš„åœºæ™¯ï¼šå°†æ¥è‡ªç‰¹å®šåŸŸåçš„æµé‡é€šè¿‡ egress gateway è½¬å‘ï¼Œéƒ½éœ€è¦å…ˆåé…ç½® 5 ä¸ªä¸åŒçš„ Istio å¯¹è±¡ï¼ˆå‚è§ &lt;a href=&#34;https://istio.io/latest/docs/tasks/traffic-management/egress/egress-gateway/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹æ–‡æ¡£&lt;/a&gt;ï¼‰ï¼Œæ›´ä¸ç”¨è¯´åç»­è¿˜è¦ä¸ºæµé‡æ·»åŠ å„ç§é«˜çº§ç­–ç•¥äº†ã€‚&lt;/p&gt;
&lt;p&gt;å‡­å€Ÿ Istio çš„ Ambient æ¨¡å¼ä¸ Gloo Meshï¼Œç°åœ¨é…ç½® egress gateway çš„è¿‡ç¨‹å˜å¾—æ›´åŠ è½»æ¾ï¼ŒåŒæ—¶è¿˜èƒ½ä¸ºç½‘æ ¼ä¸­çš„æµé‡æä¾›æ›´ä¼˜çš„åŠŸèƒ½ä¸ç®¡ç†ã€‚è®©æˆ‘ä»¬åœ¨è¿™ç¯‡åšå®¢ä¸­æ·±å…¥æ¢è®¨ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾ç‰‡-1ä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½®-egress-gateway-æ‰€éœ€çš„å¯¹è±¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ç‰‡ 1ï¼šä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½® Egress Gateway æ‰€éœ€çš„å¯¹è±¡&#34; srcset=&#34;
               /blog/egress-gateway-made-easy/6724f6a4cde1d33ee0765206_Egress-1-2048x548_hu5432630564112716352.webp 400w,
               /blog/egress-gateway-made-easy/6724f6a4cde1d33ee0765206_Egress-1-2048x548_hu16421378355844767972.webp 760w,
               /blog/egress-gateway-made-easy/6724f6a4cde1d33ee0765206_Egress-1-2048x548_hu277357488696707042.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/egress-gateway-made-easy/6724f6a4cde1d33ee0765206_Egress-1-2048x548_hu5432630564112716352.webp&#34;
               width=&#34;760&#34;
               height=&#34;203&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ç‰‡ 1ï¼šä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½® Egress Gateway æ‰€éœ€çš„å¯¹è±¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;istio-ambient-æ¨¡å¼ä¸-gloo-mesh-å¸¦æ¥çš„ç®€åŒ–&#34;&gt;Istio Ambient æ¨¡å¼ä¸ Gloo Mesh å¸¦æ¥çš„ç®€åŒ–&lt;/h2&gt;
&lt;p&gt;å€ŸåŠ© &lt;a href=&#34;https://www.solo.io/blog/istio-ambient-revolution/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient æ¨¡å¼&lt;/a&gt;ï¼Œç®¡ç† egress æµé‡å˜å¾—éå¸¸è½»æ¾ã€‚åœ¨ Ambient æ¨¡å¼ä¸‹ï¼Œä¸å†ä½¿ç”¨ä¼ ç»Ÿçš„ Sidecar ä»£ç†ï¼Œè€Œæ˜¯ä½¿ç”¨ç‹¬ç«‹éƒ¨ç½²çš„ â€œwaypointâ€ ä»£ç†æ¥ä»£ç†æœåŠ¡çš„æµé‡ã€‚æ•´ä½“ç¤ºæ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-wayproxy&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Wayproxy&#34; srcset=&#34;
               /blog/egress-gateway-made-easy/6724f6cb94d57f82bf0548d5_Egress-2_hu8581219460417967625.webp 400w,
               /blog/egress-gateway-made-easy/6724f6cb94d57f82bf0548d5_Egress-2_hu10731026720036508570.webp 760w,
               /blog/egress-gateway-made-easy/6724f6cb94d57f82bf0548d5_Egress-2_hu12409039907464241094.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/egress-gateway-made-easy/6724f6cb94d57f82bf0548d5_Egress-2_hu8581219460417967625.webp&#34;
               width=&#34;760&#34;
               height=&#34;316&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Wayproxy
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å„ä¸ªæœåŠ¡å¯ä»¥ç»‘å®šåˆ°ä¸€ä¸ª waypoint ä¸Šï¼Œç„¶å Istio ä¼šè‡ªåŠ¨å°†è®¿é—®è¿™äº›æœåŠ¡çš„æµé‡éƒ½é€šè¿‡è¯¥ waypointã€‚&lt;/p&gt;
&lt;p&gt;æœ‰è¶£çš„æ˜¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒå¯¹å¾…å†…éƒ¨æœåŠ¡ä¸€æ ·ï¼ŒæŠŠ &lt;em&gt;å¤–éƒ¨åŸŸå&lt;/em&gt;ï¼ˆé€šè¿‡ ServiceEntry å®šä¹‰ï¼‰ç»‘å®šåˆ°æŸä¸ª waypointã€‚åªè¦åƒå¯¹å¾… Service é‚£æ ·ï¼Œå°†è¿™äº›åŸŸåæ˜ å°„åˆ° waypointï¼Œè®¿é—®è¿™äº›åŸŸåçš„æµé‡ä¹Ÿèƒ½è‡ªåŠ¨ç»ç”±è¯¥ waypoint ä»£ç†è½¬å‘ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2åœ¨-istio-ambient-æ¨¡å¼ä¸‹ä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½®-egress-gateway-æ‰€éœ€çš„å¯¹è±¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2ï¼šåœ¨ Istio Ambient æ¨¡å¼ä¸‹ä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½® Egress Gateway æ‰€éœ€çš„å¯¹è±¡&#34; srcset=&#34;
               /blog/egress-gateway-made-easy/6724f6ebe547d443658fd5d1_Egress-3-2048x727_hu18332061680777759998.webp 400w,
               /blog/egress-gateway-made-easy/6724f6ebe547d443658fd5d1_Egress-3-2048x727_hu17764644434172315118.webp 760w,
               /blog/egress-gateway-made-easy/6724f6ebe547d443658fd5d1_Egress-3-2048x727_hu17585896482986667278.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/egress-gateway-made-easy/6724f6ebe547d443658fd5d1_Egress-3-2048x727_hu18332061680777759998.webp&#34;
               width=&#34;760&#34;
               height=&#34;270&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2ï¼šåœ¨ Istio Ambient æ¨¡å¼ä¸‹ä¸ºæ¯ä¸ªç›®çš„åœ°é…ç½® Egress Gateway æ‰€éœ€çš„å¯¹è±¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå³ä½¿ä¿æŒåŒæ ·çš„ä¸°å¯ŒåŠŸèƒ½ï¼Œé…ç½® egress gateway çš„è¿‡ç¨‹ä¹Ÿè¢«æå¤§ç®€åŒ–ã€‚æ­¤åï¼Œæµé‡å¯è§‚æµ‹æ€§è¿˜å¯ä»¥é€šè¿‡ Gloo Mesh è¿›è¡Œå¯è§†åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®è·µä½“éªŒ&#34;&gt;å®è·µä½“éªŒ&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œåœ¨å·²å®‰è£… Istio Ambient æ¨¡å¼çš„é›†ç¾¤ä¸Šï¼Œæˆ‘ä»¬éƒ¨ç½²ä¸€ä¸ªæµ‹è¯•åº”ç”¨å¹¶å°†å…¶æ‰€åœ¨çš„ Namespace åŠ å…¥ Ambient ç½‘æ ¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f shell.yaml
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl label namespace default istio.io/dataplane-mode&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;ambient
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯æµ‹è¯•åº”ç”¨ä¾ç„¶å¯ä»¥æ­£å¸¸å‘é€å‡ºç«™æµé‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl httpbin.org/get
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;headers&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.org&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://httpbin.org/get&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©è¿™éƒ¨åˆ†æµé‡èµ°è¿‡ä¸€ä¸ª egress gatewayï¼Œä»è€Œç»Ÿä¸€å¯¹å…¶è¿›è¡Œç­–ç•¥å’Œè®¿é—®æ§åˆ¶ã€‚åœ¨ Istio Ambient æ¨¡å¼ä¸­ï¼Œè¿™æ¯”åœ¨ Sidecar æ¨¡å¼è¦ç®€å•å¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦éƒ¨ç½²ä¸€ä¸ª waypoint ä»£ç†æ¥å……å½“ egress gatewayã€‚åªéœ€éƒ¨ç½²ä¸€æ¬¡å³å¯ï¼Œåç»­å¯ä»¥å…±äº«ç»™è¦æ•è·æµé‡çš„å…¶ä»–åŸŸåã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl create namespace istio-egress
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ istioctl waypoint apply --enroll-namespace --namespace istio-egress
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥ï¼Œä¸º &lt;strong&gt;httpbin.org&lt;/strong&gt; åˆ›å»ºä¸€ä¸ª &lt;strong&gt;ServiceEntry&lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceEntry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resolution&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DNS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°±æ˜¯å…¨éƒ¨æ‰€éœ€ï¼å› ä¸ºéƒ¨ç½² waypoint æ—¶ä½¿ç”¨äº† &lt;strong&gt;&amp;ndash;enroll-namespace&lt;/strong&gt; å‚æ•°ï¼Œè¯¥å‘½åç©ºé—´ï¼ˆ&lt;code&gt;istio-egress&lt;/code&gt;ï¼‰ä¸­çš„æ‰€æœ‰æœåŠ¡éƒ½ä¼šè‡ªåŠ¨ç»‘å®šåˆ°æ­¤ waypointã€‚å¦‚æœæˆ‘ä»¬åªæƒ³åœ¨å•ä¸ª Service/ServiceEntry çº§åˆ«è¿›è¡Œç»‘å®šï¼Œä¹Ÿå¯ä»¥åœ¨æ¯ä¸ªå¯¹è±¡ä¸Šæ˜¾å¼æ·»åŠ æ ‡ç­¾ &lt;strong&gt;istio.io/use-waypoint: waypoint&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œè¿™ä¸ª ServiceEntry å·²ç»ç»‘å®šåˆ°æˆ‘ä»¬ä¹‹å‰éƒ¨ç½²çš„ waypoint ä»£ç†ä¸Šï¼ŒåŸå…ˆçš„è¯·æ±‚æ— éœ€ä»»ä½•æ”¹åŠ¨å°±ä¼šè‡ªåŠ¨ç©¿è¿‡è¯¥ waypointï¼Œå¹¶ç”± Istio è‡ªåŠ¨è¿›è¡Œ mTLS åŠ å¯†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;$curl&lt;/span&gt; httpbin.org/get -v
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* Request completely sent off
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt; HTTP/1.1 &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; OK
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt; server: istio-envoy
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  ...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥ä» waypoint ä¸­æ”¶é›†æ—¥å¿—ã€è¿½è¸ªä¿¡æ¯ä»¥åŠæŒ‡æ ‡æ¥è§‚å¯Ÿæµé‡ã€‚ä¾‹å¦‚ï¼Œä» waypoint çš„æ—¥å¿—å°±èƒ½çœ‹åˆ°åˆšåˆšå‘å‡ºçš„è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl logs waypoint-6c6b888f4f-wmnr2 --tail&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2024-07-18T16:13:58.198Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;GET /get HTTP/1.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;200&lt;/span&gt; - via_upstream - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;252&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;260&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;259&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;curl/8.7.1&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;8d80cec6-8fc1-40de-8bc7-19716f173bbd&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.org&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;3.234.9.11:80&amp;#34;&lt;/span&gt; inbound-vip&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;80&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;http&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;httpbin.org&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; 10.244.0.24:41160 240.240.0.2:80 10.244.0.18:41548 - default
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç­–ç•¥ç®¡ç†&#34;&gt;ç­–ç•¥ç®¡ç†&lt;/h2&gt;
&lt;p&gt;Egress gateway æœ€å¼ºå¤§çš„ç‰¹æ€§ä¹‹ä¸€å°±æ˜¯èƒ½å¤Ÿå¯¹æ‰€æœ‰å‡ºç«™æµé‡å¼ºåˆ¶æ‰§è¡Œè®¿é—®æ§åˆ¶ç­–ç•¥ã€‚ç­–ç•¥èŒƒå›´å¯ä»¥å¾ˆç®€å•â€”â€”æ¯”å¦‚åŸºäºåŸŸåçš„ç™½åå•ï¼Œä¹Ÿå¯ä»¥éå¸¸å¤æ‚ï¼Œæ¯”å¦‚ &lt;a href=&#34;https://docs.solo.io/gloo-mesh-gateway/main/security/dlp/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ•°æ®ä¸¢å¤±é˜²æŠ¤ï¼ˆDLPï¼‰&lt;/a&gt; ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥é™åˆ¶ä½æƒé™åº”ç”¨åªèƒ½è®¿é—® &lt;code&gt;/get&lt;/code&gt; æ¥å£ï¼Œè€Œé«˜æƒé™åº”ç”¨å¯ä»¥è®¿é—® httpbin.org çš„æ‰€æœ‰æ¥å£ã€‚è¦å®ç°è¿™ä¸€ç‚¹ï¼Œåªéœ€åœ¨æˆ‘ä»¬åˆ›å»ºçš„ ServiceEntry ä¸Šé™„åŠ ä¸€æ¡ AuthorizationPolicy å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AuthorizationPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targetRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceEntry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;group&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;action&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALLOW&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# admin åº”ç”¨å¯ä»¥è®¿é—®ä»»æ„æ¥å£&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;principals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster.local/ns/default/sa/admin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# å…¶ä»–åº”ç”¨åªå…è®¸è®¿é—® /get&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/get&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œä»ä½æƒé™åº”ç”¨å‘å‡ºçš„ POST è¯·æ±‚å°±ä¼šè¢«æ‹’ç»ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl httpbin.org/get
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;headers&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.org&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://httpbin.org/get&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl -X POST httpbin.org/post
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RBAC: access denied
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è€Œåœ¨é«˜æƒé™åº”ç”¨ï¼ˆadminï¼‰ä¸­ï¼ŒPOST è¯·æ±‚å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl httpbin.org/post -X POST
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;headers&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.org&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;http://httpbin.org/post&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;tls-origination&#34;&gt;TLS Origination&lt;/h2&gt;
&lt;p&gt;å¦ä¸€ä¸ªåœ¨ egress gateway ä¸Šç»å¸¸ä½¿ç”¨çš„ç­–ç•¥æ˜¯è¿›è¡Œ TLS Originationã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è™½ç„¶åœ¨ç½‘æ ¼ &lt;em&gt;å†…éƒ¨&lt;/em&gt; ä½¿ç”¨äº† Istio è‡ªåŠ¨åŠ å¯†ï¼Œä½†æµé‡ä¸€æ—¦ç¦»å¼€é›†ç¾¤ï¼Œå°±ä¼šä»¥æ˜æ–‡å½¢å¼é€šè¿‡å…¬å…±ç½‘ç»œä¼ è¾“â€”â€”è¿™æ˜¾ç„¶å­˜åœ¨ä¸¥é‡çš„å®‰å…¨é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ egress waypoint ä¸­ä¸ºè¯·æ±‚å¯ç”¨ TLSï¼Œè®©è¯·æ±‚åœ¨ç¦»å¼€é›†ç¾¤å‰å°±è¢«åŠ å¯†ã€‚è¿™ä¸ªåŠŸèƒ½åœ¨å¯¹éœ€è¦å®¢æˆ·ç«¯èº«ä»½è®¤è¯çš„æœåŠ¡è¿›è¡Œè®¿é—®æ—¶å°¤ä¸ºæœ‰ç”¨ï¼Œå¯ä»¥é›†ä¸­åœ°å¯¹è®¿é—®è¿›è¡Œæ§åˆ¶ï¼›ä½†åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ä»…æ¼”ç¤ºæœ€ç®€å•çš„ TLSã€‚&lt;/p&gt;
&lt;p&gt;å¯¹æ­¤ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ ServiceEntry ä¸­åšä¸€ç‚¹å°æ”¹åŠ¨ï¼Œå¹¶æ·»åŠ ä¸€ä¸ª DestinationRuleï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceEntry&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targetPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ–°å¢ï¼šæŠŠå‘å¾€ 80 ç«¯å£çš„æµé‡è½¬å‘åˆ° 443 ç«¯å£&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resolution&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DNS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ–°å¢ï¼šä¸ºå‘å¾€ `httpbin.org` çš„è¯·æ±‚å¯ç”¨ TLS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DestinationRule&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.org-tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin.org&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SIMPLE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰çš„è¯·æ±‚éƒ½ä¼šè¢«è‡ªåŠ¨å‡çº§ä¸º HTTPSï¼Œè€Œåº”ç”¨è‡ªèº«æ— éœ€åšä»»ä½•æ”¹åŠ¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ curl httpbin.org/get
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;headers&amp;#34;&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;Host&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.org&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;s2&#34;&gt;&amp;#34;url&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://httpbin.org/get&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description>
    </item>
    
    <item>
      <title>kube-scheduler-simulatorï¼šè®©è°ƒåº¦å™¨å¯è§‚å¯Ÿã€å¯è°ƒè¯•ã€å¯æ‰©å±•</title>
      <link>https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/</link>
      <pubDate>Tue, 08 Apr 2025 14:35:56 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/</guid>
      <description>&lt;p&gt;Kubernetes Scheduler æ˜¯æ§åˆ¶é¢ä¸­çš„æ ¸å¿ƒç»„ä»¶ä¹‹ä¸€ï¼Œè´Ÿè´£å†³å®šæ¯ä¸ª Pod è¿è¡Œåœ¨å“ªä¸ªèŠ‚ç‚¹ä¸Šã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰ä½¿ç”¨ Kubernetes çš„ç”¨æˆ·ï¼Œå…¶ Pod çš„å‘½è¿éƒ½æŒæ¡åœ¨è°ƒåº¦å™¨æ‰‹ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;kube-scheduler-simulator&lt;/a&gt; æ˜¯ä¸€ä¸ª Kubernetes è°ƒåº¦å™¨çš„â€œæ¨¡æ‹Ÿå™¨â€ï¼Œæœ€åˆæ˜¯æˆ‘ï¼ˆKensei Nakadaï¼‰åœ¨ &lt;a href=&#34;https://summerofcode.withgoogle.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Google Summer of Code 2021&lt;/a&gt; ä¸­å¯åŠ¨çš„é¡¹ç›®ï¼Œåç»­å¾—åˆ°äº†ä¼—å¤šè´¡çŒ®è€…çš„æ”¯æŒã€‚è¿™ä¸ªå·¥å…·çš„ç›®æ ‡æ˜¯å¸®åŠ©ç”¨æˆ·æ·±å…¥è§‚å¯Ÿè°ƒåº¦å™¨çš„è¡Œä¸ºå’Œå†³ç­–é€»è¾‘ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯ä½¿ç”¨è¯¸å¦‚ &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/assign-pod-node/#affinity-and-anti-affinity&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pod äº²å’Œæ€§&lt;/a&gt; ç­‰è°ƒåº¦çº¦æŸçš„æ™®é€šç”¨æˆ·ï¼Œè¿˜æ˜¯å¼€å‘è‡ªå®šä¹‰è°ƒåº¦æ’ä»¶çš„è°ƒåº¦å™¨ä¸“å®¶ï¼Œè¿™æ¬¾æ¨¡æ‹Ÿå™¨éƒ½å°†æˆä¸ºä½ ç†è§£å’Œæµ‹è¯•è°ƒåº¦ç­–ç•¥çš„é‡è¦åŠ©æ‰‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨&#34;&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªè°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Kubernetes Scheduler æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ’ä»¶é©±åŠ¨çš„â€œé»‘ç›’â€ï¼Œæ¯ä¸ªæ’ä»¶ä»ä¸åŒçš„è§’åº¦å‚ä¸è°ƒåº¦å†³ç­–ï¼Œç†è§£å®ƒçš„è¡Œä¸ºå¹¶ä¸å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;å³ä½¿ä½ åœ¨æµ‹è¯•é›†ç¾¤ä¸­çœ‹åˆ° Pod æ­£å¸¸è°ƒåº¦ï¼Œä¹Ÿä¸èƒ½ä¿è¯å®ƒæ˜¯æŒ‰ä½ é¢„æœŸçš„é€»è¾‘è°ƒåº¦çš„ã€‚è¿™ç§â€œè¡¨é¢æ­£å¸¸ï¼Œå®åˆ™åå·®â€çš„é—®é¢˜ï¼Œå¾€å¾€ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¸¦æ¥æ„æƒ³ä¸åˆ°çš„è°ƒåº¦åæœã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè°ƒåº¦å™¨çš„æµ‹è¯•ä¹Ÿéå¸¸å…·æœ‰æŒ‘æˆ˜æ€§ã€‚çœŸå®é›†ç¾¤ä¸­çš„è°ƒåº¦åœºæ™¯å¤æ‚å¤šæ ·ï¼Œæ— æ³•é€šè¿‡æœ‰é™çš„æµ‹è¯•ç”¨ä¾‹å…¨é¢è¦†ç›–ã€‚å³ä½¿æ˜¯ Kubernetes å®˜æ–¹çš„ upstream è°ƒåº¦å™¨ï¼Œä¹Ÿç»å¸¸æ˜¯åœ¨å‘å¸ƒåæ‰è¢«ç”¨æˆ·å‘ç°é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶å¼€å‘ç¯å¢ƒæˆ–æ²™ç®±é›†ç¾¤æ˜¯å¸¸ç”¨çš„æµ‹è¯•æ‰‹æ®µï¼Œä½†è¿™ç±»ç¯å¢ƒé€šå¸¸è§„æ¨¡è¾ƒå°ã€å·¥ä½œè´Ÿè½½æœ‰é™ï¼Œä¸å®é™…ç”Ÿäº§é›†ç¾¤çš„è¡Œä¸ºå­˜åœ¨å·¨å¤§å·®å¼‚ã€‚å› æ­¤ï¼Œä»…é ä¼ ç»Ÿæ–¹æ³•ï¼Œå¾ˆéš¾é¢„çŸ¥è°ƒåº¦å™¨åœ¨çœŸå®ç¯å¢ƒä¸­çš„è¡¨ç°ã€‚&lt;/p&gt;
&lt;p&gt;kube-scheduler-simulator è¯ç”Ÿæ­£æ˜¯ä¸ºäº†å¡«è¡¥è¿™ä¸€ç©ºç™½ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨æˆ·å¯ä»¥éªŒè¯è°ƒåº¦çº¦æŸã€è°ƒåº¦å™¨é…ç½®ã€è‡ªå®šä¹‰æ’ä»¶çš„è¡Œä¸ºï¼›&lt;/li&gt;
&lt;li&gt;å¯ä»¥åœ¨æ¨¡æ‹Ÿç¯å¢ƒä¸­æµ‹è¯•è°ƒåº¦æ•ˆæœï¼Œè€Œä¸å½±å“å®é™…çš„å·¥ä½œè´Ÿè½½ï¼›&lt;/li&gt;
&lt;li&gt;è¿˜èƒ½è§‚å¯Ÿè°ƒåº¦è¿‡ç¨‹ä¸­çš„æ¯ä¸€ä¸ªå†³ç­–ç»†èŠ‚ï¼ŒçœŸæ­£â€œæŠŠè°ƒåº¦å™¨å˜æˆç™½ç›’â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¨¡æ‹Ÿå™¨å…·æœ‰ä»€ä¹ˆèƒ½åŠ›&#34;&gt;æ¨¡æ‹Ÿå™¨å…·æœ‰ä»€ä¹ˆèƒ½åŠ›ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;kube-scheduler-simulator çš„æ ¸å¿ƒèƒ½åŠ›æ˜¯ï¼š&lt;strong&gt;æ­ç¤ºè°ƒåº¦å™¨å†…éƒ¨çš„å†³ç­–è¿‡ç¨‹&lt;/strong&gt;ã€‚Kubernetes Scheduler æ˜¯åŸºäº &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/scheduling-framework/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ¡†æ¶ï¼ˆScheduling Frameworkï¼‰&lt;/a&gt; å®ç°çš„ï¼Œæ•´ä¸ªè°ƒåº¦æµç¨‹åˆ†ä¸ºå¤šä¸ªæ‰©å±•ç‚¹ï¼Œå¦‚ Filterã€Scoreã€Bind ç­‰ï¼Œæ¯ä¸ªé˜¶æ®µä¼šè°ƒç”¨å¯¹åº”æ’ä»¶è¿›è¡Œåˆ¤æ–­å’Œæ‰“åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;æ¨¡æ‹Ÿå™¨æä¾›äº†å›¾å½¢åŒ–ç•Œé¢ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­åˆ›å»º Podã€Nodeã€Deployment ç­‰ Kubernetes èµ„æºï¼Œå¹¶æ¸…æ™°åœ°çœ‹åˆ°è°ƒåº¦å™¨æ¯ä¸ªæ’ä»¶çš„æ‰§è¡Œç»“æœå’Œå¾—åˆ†æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨-web-ui&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ Web UI&#34; srcset=&#34;
               /blog/introducing-kube-scheduler-simulator/simulator_hu5233630147159151970.webp 400w,
               /blog/introducing-kube-scheduler-simulator/simulator_hu5375461454994946459.webp 760w,
               /blog/introducing-kube-scheduler-simulator/simulator_hu7113445019924134691.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/introducing-kube-scheduler-simulator/simulator_hu5233630147159151970.webp&#34;
               width=&#34;760&#34;
               height=&#34;505&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è°ƒåº¦å™¨æ¨¡æ‹Ÿå™¨ Web UI
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ¨¡æ‹Ÿå™¨ä¸­ï¼Œæˆ‘ä»¬è¿è¡Œçš„æ˜¯ä¸€ä¸ª &lt;strong&gt;å¯è°ƒè¯•ç‰ˆæœ¬çš„è°ƒåº¦å™¨&lt;/strong&gt;ï¼Œå®ƒä¼šå°†å„æ’ä»¶åœ¨ä¸åŒé˜¶æ®µçš„æ‰§è¡Œç»“æœå†™å…¥ Pod çš„æ³¨è§£ä¸­ï¼Œå‰ç«¯ç•Œé¢å†å°†è¿™äº›ä¿¡æ¯è¿›è¡Œå¯è§†åŒ–å±•ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŸ¥çœ‹è°ƒåº¦å™¨åœ¨ Filter é˜¶æ®µå¦‚ä½•åˆ¤æ–­æŸä¸ªèŠ‚ç‚¹æ˜¯å¦å¯ç”¨ï¼Œåœ¨ Score é˜¶æ®µå„æ’ä»¶æ‰“äº†å¤šå°‘åˆ†ï¼Œæœ€ç»ˆé€‰æ‹©äº†å“ªä¸ªèŠ‚ç‚¹ä½œä¸ºç›®æ ‡èŠ‚ç‚¹ã€‚è¿™äº›ä¿¡æ¯éƒ½èƒ½åœ¨ Pod çš„æ³¨è§£ä¸­æŸ¥é˜…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Pod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# The JSONs within these annotations are manually formatted for clarity in the blog post. &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/bind-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;DefaultBinder&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/filter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeName&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeUnschedulable&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;passed&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeName&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeUnschedulable&amp;#34;:&amp;#34;passed&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;passed&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/finalscore-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;52&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;47&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;300&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;76&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;73&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;300&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }       &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/permit-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/permit-result-timeout&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/postfilter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prebind-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;VolumeBinding&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prefilter-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prefilter-result-status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;AzureDiskLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;EBSLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;GCEPDLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;InterPodAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodePorts&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeVolumeLimits&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;PodTopologySpread&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeBinding&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeRestrictions&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;VolumeZone&amp;#34;:&amp;#34;&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/prescore-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;InterPodAffinity&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeAffinity&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;success&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;PodTopologySpread&amp;#34;:&amp;#34;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;TaintToleration&amp;#34;:&amp;#34;success&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/reserve-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;VolumeBinding&amp;#34;:&amp;#34;success&amp;#34;}&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/result-history&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/bind-result&amp;#34;:&amp;#34;{\&amp;#34;DefaultBinder\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/filter-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;NodeName\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeUnschedulable\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;passed\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;NodeName\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;NodeUnschedulable\&amp;#34;:\&amp;#34;passed\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;passed\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/finalscore-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;52\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;47\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;300\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;76\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;73\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;300\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/permit-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/permit-result-timeout&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/postfilter-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prebind-result&amp;#34;:&amp;#34;{\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prefilter-result&amp;#34;:&amp;#34;{}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prefilter-result-status&amp;#34;:&amp;#34;{\&amp;#34;AzureDiskLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;EBSLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;GCEPDLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;InterPodAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodePorts\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeVolumeLimits\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;PodTopologySpread\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeRestrictions\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;VolumeZone\&amp;#34;:\&amp;#34;\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/prescore-result&amp;#34;:&amp;#34;{\&amp;#34;InterPodAffinity\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;success\&amp;#34;,\&amp;#34;PodTopologySpread\&amp;#34;:\&amp;#34;\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/reserve-result&amp;#34;:&amp;#34;{\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;success\&amp;#34;}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/score-result&amp;#34;:&amp;#34;{\&amp;#34;node-jjfg5\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;52\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;47\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;},\&amp;#34;node-mtb5x\&amp;#34;:{\&amp;#34;ImageLocality\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeAffinity\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;NodeResourcesBalancedAllocation\&amp;#34;:\&amp;#34;76\&amp;#34;,\&amp;#34;NodeResourcesFit\&amp;#34;:\&amp;#34;73\&amp;#34;,\&amp;#34;TaintToleration\&amp;#34;:\&amp;#34;0\&amp;#34;,\&amp;#34;VolumeBinding\&amp;#34;:\&amp;#34;0\&amp;#34;}}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;kube-scheduler-simulator.sigs.k8s.io/selected-node&amp;#34;:&amp;#34;node-mtb5x&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      ]      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/score-result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-jjfg5&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;52&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;47&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        &amp;#34;node-mtb5x&amp;#34;:{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;ImageLocality&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeAffinity&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesBalancedAllocation&amp;#34;:&amp;#34;76&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;NodeResourcesFit&amp;#34;:&amp;#34;73&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;TaintToleration&amp;#34;:&amp;#34;0&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;            &amp;#34;VolumeBinding&amp;#34;:&amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      }      &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;      
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kube-scheduler-simulator.sigs.k8s.io/selected-node&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;node-mtb5x&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ä»…å¦‚æ­¤ï¼Œç”¨æˆ·è¿˜å¯ä»¥é›†æˆè‡ªå·±å¼€å‘çš„ &lt;a href=&#34;https://kubernetes.io/zh-cn/docs/concepts/scheduling-eviction/scheduling-framework/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ’ä»¶&lt;/a&gt; æˆ– &lt;a href=&#34;https://github.com/kubernetes/design-proposals-archive/blob/main/scheduling/scheduler_extender.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è°ƒåº¦æ‰©å±•å™¨ï¼ˆExtenderï¼‰&lt;/a&gt;ï¼Œå¹¶åœ¨æ¨¡æ‹Ÿå™¨ä¸­è§‚å¯Ÿå…¶è¡Œä¸ºï¼Œè°ƒè¯•æ•ˆæœæ˜¾è‘—æå‡ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥å¯è°ƒè¯•è°ƒåº¦å™¨è¿˜å¯ä»¥è„±ç¦»æ¨¡æ‹Ÿå™¨ç‹¬ç«‹è¿è¡Œï¼Œç”¨äºé›†æˆæµ‹è¯•ã€è‡ªå®šä¹‰è°ƒåº¦å™¨çš„å¼€å‘æˆ–çœŸå®é›†ç¾¤ä¸­çš„è°ƒè¯•åˆ†æã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¨¡æ‹Ÿå™¨--æ›´å¥½çš„å¼€å‘ç¯å¢ƒ&#34;&gt;æ¨¡æ‹Ÿå™¨ = æ›´å¥½çš„å¼€å‘ç¯å¢ƒï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼ŒçœŸå®è°ƒåº¦åœºæ™¯å¤æ‚å¤šæ ·ï¼Œå•é å¼€å‘é›†ç¾¤æ— æ³•è¦†ç›–å…¨éƒ¨å¯èƒ½æ€§ã€‚æ¨¡æ‹Ÿå™¨æä¾›äº†ä¸€ä¸ªæ›´å¼ºå¤§çš„æ–¹æ¡ˆï¼š&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä½¿ç”¨ &lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator/blob/master/simulator/docs/import-cluster-resources.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†ç¾¤èµ„æºå¯¼å…¥åŠŸèƒ½&lt;/a&gt;ï¼Œç”¨æˆ·å¯ä»¥å°†ç”Ÿäº§é›†ç¾¤çš„èµ„æºåŒæ­¥åˆ°æ¨¡æ‹Ÿå™¨ä¸­ï¼Œ&lt;strong&gt;åœ¨ä¸å½±å“å®é™…ä¸šåŠ¡çš„å‰æä¸‹æµ‹è¯•æ–°ç‰ˆæœ¬è°ƒåº¦å™¨&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨ä¸­éªŒè¯ Pod çš„è°ƒåº¦è¡Œä¸ºæ˜¯å¦ç¬¦åˆé¢„æœŸï¼Œå†å°†è°ƒåº¦å™¨éƒ¨ç½²åˆ°ç”Ÿäº§é›†ç¾¤ï¼Œæå¤§é™ä½äº†è°ƒåº¦ç›¸å…³çš„å˜æ›´é£é™©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨åœºæ™¯æ€»ç»“&#34;&gt;ä½¿ç”¨åœºæ™¯æ€»ç»“&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤ç”¨æˆ·&lt;/strong&gt;ï¼šéªŒè¯è°ƒåº¦çº¦æŸï¼ˆå¦‚ PodAffinityã€TopologySpreadï¼‰æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é›†ç¾¤ç®¡ç†å‘˜&lt;/strong&gt;ï¼šè¯„ä¼°è°ƒåº¦å™¨é…ç½®å˜æ›´å¯¹è°ƒåº¦ç»“æœçš„å½±å“ï¼›&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒåº¦å™¨æ’ä»¶å¼€å‘è€…&lt;/strong&gt;ï¼šåœ¨æ¨¡æ‹Ÿå™¨ä¸­æµ‹è¯•è‡ªå®šä¹‰æ’ä»¶ã€ä½¿ç”¨åŒæ­¥åŠŸèƒ½è¿›è¡Œæ›´çœŸå®çš„éªŒè¯ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;å¦‚ä½•ä¸Šæ‰‹&#34;&gt;å¦‚ä½•ä¸Šæ‰‹ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®æ— éœ€ Kubernetes é›†ç¾¤ï¼Œåªéœ€è¦æœ¬åœ°å®‰è£… Docker å³å¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;git clone git@github.com:kubernetes-sigs/kube-scheduler-simulator.git
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;cd&lt;/span&gt; kube-scheduler-simulator
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;make docker_up
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒWeb ç•Œé¢å°†è¿è¡Œåœ¨ &lt;code&gt;http://localhost:3000&lt;/code&gt;ï¼Œå³å¯å¼€å§‹ä½ çš„è°ƒåº¦å®éªŒï¼&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ é¡¹ç›®åœ°å€ï¼šhttps://github.com/kubernetes-sigs/kube-scheduler-simulator&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•å‚ä¸è´¡çŒ®&#34;&gt;å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¯¥é¡¹ç›®ç”± &lt;a href=&#34;https://github.com/kubernetes/community/blob/master/sig-scheduling/README.md#kube-scheduler-simulator&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes SIG Scheduling&lt;/a&gt; ç»´æŠ¤ã€‚æ¬¢è¿ä½ æå‡º Issuesã€æäº¤ PRï¼Œä¹Ÿæ¬¢è¿åŠ å…¥ç¤¾åŒºå‚ä¸è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;Slack é¢‘é“ï¼š&lt;a href=&#34;https://kubernetes.slack.com/messages/sig-scheduling&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;#sig-scheduling&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;é¸£è°¢&#34;&gt;é¸£è°¢&lt;/h2&gt;
&lt;p&gt;è¿™ä¸ªæ¨¡æ‹Ÿå™¨çš„å‘å±•ç¦»ä¸å¼€ä¼—å¤šå¿—æ„¿è€…å·¥ç¨‹å¸ˆçš„åšæŒå’Œè´¡çŒ®ï¼Œæ„Ÿè°¢æ‰€æœ‰ä¸ºä¹‹ä»˜å‡ºå¿ƒåŠ›çš„ &lt;a href=&#34;https://github.com/kubernetes-sigs/kube-scheduler-simulator/graphs/contributors&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è´¡çŒ®è€…ä»¬&lt;/a&gt;ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Envoy Gateway 1.3 å‘å¸ƒï¼šå¢å¼ºå®‰å…¨æ€§ã€æµé‡ç®¡ç†å’Œè¿ç»´èƒ½åŠ›</title>
      <link>https://cloudnativecn.com/blog/envoy-gateway-1-3-release-highlights/</link>
      <pubDate>Thu, 06 Feb 2025 15:17:32 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/envoy-gateway-1-3-release-highlights/</guid>
      <description>&lt;p&gt;Envoy Gateway 1.3 ç‰ˆæœ¬åœ¨ &lt;strong&gt;å®‰å…¨æ€§ã€æµé‡ç®¡ç†å’Œè¿ç»´èƒ½åŠ›&lt;/strong&gt; æ–¹é¢è¿›è¡Œäº†é‡å¤§å¢å¼ºï¼Œå¹¶å¼•å…¥äº† &lt;strong&gt;API Key è®¤è¯&lt;/strong&gt;ã€&lt;strong&gt;æ”¯æŒ HTTPRoute é‡è¯•&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;æ›´çµæ´»çš„åŸºç¡€è®¾æ–½ç®¡ç†&lt;/strong&gt; ç­‰å…³é”®æ”¹è¿›ã€‚è¯¦è§ &lt;a href=&#34;https://gateway.envoyproxy.io/news/releases/v1.3/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy Gateway 1.3 å‘å¸ƒå…¬å‘Š&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;12-åˆ°-13-ç‰ˆæœ¬çš„æ ¸å¿ƒå˜åŒ–&#34;&gt;1.2 åˆ° 1.3 ç‰ˆæœ¬çš„æ ¸å¿ƒå˜åŒ–&lt;/h2&gt;
&lt;p&gt;æœ¬æ¬¡å‘å¸ƒé‡ç‚¹æ›´æ–°åŒ…æ‹¬ &lt;strong&gt;å®‰å…¨ç‰¹æ€§å¢å¼º&lt;/strong&gt;ã€&lt;strong&gt;æµé‡ç®¡ç†ä¼˜åŒ–&lt;/strong&gt; ä»¥åŠ &lt;strong&gt;è¿ç»´ç®¡æ§æå‡&lt;/strong&gt;ã€‚æ­¤å¤–ï¼Œ1.3 ç‰ˆæœ¬è¿˜å¼•å…¥äº†ä¸€äº› &lt;strong&gt;é‡å¤§å˜æ›´&lt;/strong&gt;ï¼Œä»¥æå‡ç³»ç»Ÿçš„å®‰å…¨æ€§å’Œå¯é æ€§ï¼Œå¢å¼ºèº«ä»½è®¤è¯å’Œæµé‡ç®¡ç†èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ¬¡æ›´æ–°çš„è¯¦ç»†å†…å®¹åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;22 é¡¹æ–°ç‰¹æ€§&lt;/strong&gt;ï¼Œæ¶µç›–å®‰å…¨ã€æµé‡ç®¡ç†å’Œè¿ç»´ä¼˜åŒ–&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;26 é¡¹ Bug ä¿®å¤&lt;/strong&gt;ï¼Œæå‡ç¨³å®šæ€§å’Œå¯é æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æœ¬æ–‡å°†æ€»ç»“ Envoy Gateway 1.3 ç‰ˆæœ¬æœ€é‡è¦çš„æ›´æ–°å†…å®¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸»è¦ç‰¹æ€§äº®ç‚¹&#34;&gt;ä¸»è¦ç‰¹æ€§äº®ç‚¹&lt;/h2&gt;
&lt;h3 id=&#34;1-å®‰å…¨æ€§å¢å¼ºè®¤è¯ä¸è®¿é—®ç®¡ç†&#34;&gt;1. å®‰å…¨æ€§ï¼šå¢å¼ºè®¤è¯ä¸è®¿é—®ç®¡ç†&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;API Key è®¤è¯&lt;/strong&gt;ï¼šSecurityPolicy API ç°æ”¯æŒ API Key è®¿é—®æ§åˆ¶ï¼Œç®€åŒ–ä»å…¶ä»– Gateway è§£å†³æ–¹æ¡ˆçš„è¿ç§»&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®‰å…¨ç­–ç•¥å¢å¼º&lt;/strong&gt;ï¼šæ”¹è¿› &lt;strong&gt;å¤–éƒ¨è®¤è¯ï¼ˆext-authï¼‰&lt;/strong&gt; æœåŠ¡å™¨é›†æˆï¼Œå¹¶æ”¯æŒ JWKS é…ç½®çš„è‡ªå®šä¹‰ TLS è®¾ç½®&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¢æˆ·ç«¯ IP è§£æä¼˜åŒ–&lt;/strong&gt;ï¼šæ”¯æŒä» &lt;code&gt;X-Forwarded-For (XFF)&lt;/code&gt; å¤´éƒ¨æå–çœŸå®å®¢æˆ·ç«¯ IP&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•æœåŠ¡é»˜è®¤ â€œfail-closedâ€ æœºåˆ¶&lt;/strong&gt;ï¼šå½“æ‰©å±•æœåŠ¡å™¨è¿”å›é”™è¯¯æ—¶ï¼Œå°†ç«‹å³ç”¨ &lt;code&gt;Internal Server Error&lt;/code&gt;ï¼ˆ500 çŠ¶æ€ç ï¼‰å“åº”å—å½±å“çš„è¯·æ±‚ï¼Œç¡®ä¿å®‰å…¨æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;2-æµé‡ç®¡ç†æ›´æ™ºèƒ½çš„è·¯ç”±ä¸æ§åˆ¶&#34;&gt;2. æµé‡ç®¡ç†ï¼šæ›´æ™ºèƒ½çš„è·¯ç”±ä¸æ§åˆ¶&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•åè®®æ”¯æŒ&lt;/strong&gt;ï¼šç°åœ¨æ”¯æŒåœ¨ &lt;code&gt;GRPCRoute&lt;/code&gt;ã€&lt;code&gt;TCPRoute&lt;/code&gt; å’Œ &lt;code&gt;UDPRoute&lt;/code&gt; API ä¸­è·¯ç”±è‡³ Backend èµ„æº&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å“åº”å‹ç¼©ï¼ˆResponse Compressionï¼‰&lt;/strong&gt;ï¼šBackendTrafficPolicy API ç°æ”¯æŒå¯¹å“åº”è¿›è¡Œå‹ç¼©ï¼Œå‡å°‘æµé‡å ç”¨&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;GEP-1731 å®æ–½&lt;/strong&gt;ï¼šå®ç°äº† &lt;strong&gt;Kubernetes Gateway API çš„ HTTPRoute é‡è¯•&lt;/strong&gt;ï¼Œæ”¯æŒé€šè¿‡ &lt;strong&gt;Gateway API&lt;/strong&gt;ï¼ˆè€Œé Envoy Gateway APIï¼‰å®šä¹‰è¯·æ±‚é‡è¯•ç­–ç•¥&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºåŠ¨æ€å…ƒæ•°æ®çš„é™æµï¼ˆDynamic Cost-Based Rate Limitingï¼‰&lt;/strong&gt;ï¼šé™æµ API ç°æ”¯æŒä» &lt;strong&gt;åŠ¨æ€å…ƒæ•°æ®ï¼ˆDynamic Metadataï¼‰&lt;/strong&gt; æå–æˆæœ¬å€¼ï¼Œå¯åŸºäºè¯·æ±‚çš„ä¸åŒæ¶ˆè€—é‡å¯¹å®¢æˆ·ç«¯è¿›è¡Œé™æµ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”¨æˆ·å®šä¹‰è·¯ç”±é¡ºåº&lt;/strong&gt;ï¼šEnvoyProxy CRD ç°æ”¯æŒ &lt;strong&gt;ä¿ç•™ç”¨æˆ·è‡ªå®šä¹‰çš„ HTTPRoute åŒ¹é…é¡ºåº&lt;/strong&gt;ï¼Œå¢å¼ºè·¯ç”±æ§åˆ¶çµæ´»æ€§&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-è¿è¥ç®¡ç†åŸºç¡€è®¾æ–½ä¼˜åŒ–&#34;&gt;3. è¿è¥ç®¡ç†ï¼šåŸºç¡€è®¾æ–½ä¼˜åŒ–&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;HPAï¼ˆæ°´å¹³è‡ªåŠ¨æ‰©å±•ï¼‰å¢å¼º&lt;/strong&gt;ï¼šæä¾› &lt;strong&gt;EnvoyProxy HPA&lt;/strong&gt; å’Œ &lt;strong&gt;PDBï¼ˆPod Disruption Budgetï¼‰&lt;/strong&gt; çš„æ›´å¤šé…ç½®é€‰é¡¹&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ”¹è¿› IPv6 æ”¯æŒ&lt;/strong&gt;ï¼šä¼˜åŒ– &lt;strong&gt;åŒæ ˆï¼ˆDual-Stackï¼‰æ”¯æŒ&lt;/strong&gt;ï¼Œä¿®å¤ IPv6 ç›¸å…³é—®é¢˜&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¼˜é›…ç»ˆæ­¢ï¼ˆGraceful Terminationï¼‰&lt;/strong&gt;ï¼šåœ¨ç»ˆæ­¢è¿›ç¨‹æœŸé—´å¢å¼ºç«¯ç‚¹ç®¡ç†ï¼Œç¡®ä¿å¹³æ»‘ä¸‹çº¿&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;4-å¯è§‚æµ‹æ€§ç›‘æ§ä¸æ§åˆ¶èƒ½åŠ›æå‡&#34;&gt;4. å¯è§‚æµ‹æ€§ï¼šç›‘æ§ä¸æ§åˆ¶èƒ½åŠ›æå‡&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Tracing è¿½è¸ªä¼˜åŒ–&lt;/strong&gt;ï¼šæ”¹è¿›è¿½è¸ªé‡‡æ ·æ§åˆ¶ï¼Œæ”¯æŒ &lt;strong&gt;æŒ‰æ¯”ä¾‹ï¼ˆfraction-basedï¼‰å®šä¹‰é‡‡æ ·ç‡&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¢å¼ºæŒ‡æ ‡ï¼ˆMetricsï¼‰&lt;/strong&gt;ï¼šæ–°å¢ç›‘æ§ Envoy Gateway &lt;strong&gt;å´©æºƒï¼ˆPanicï¼‰&lt;/strong&gt; ç›¸å…³çš„æŒ‡æ ‡å’Œä»ªè¡¨ç›˜&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ‰©å±•å¤„ç†ï¼ˆExtension Processingï¼‰&lt;/strong&gt;ï¼šä¼˜åŒ–å¤–éƒ¨å¤„ç†å™¨ï¼ˆExternal Processorï¼‰çš„å±æ€§ç®¡ç†å’Œé…ç½®é€‰é¡¹&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;Envoy Gateway 1.3 ä¸ºå›¢é˜Ÿæä¾›äº†æ›´å¼ºå¤§çš„ &lt;strong&gt;å®‰å…¨æ€§&lt;/strong&gt;ã€&lt;strong&gt;æµé‡ç®¡ç†&lt;/strong&gt; å’Œ &lt;strong&gt;è¿ç»´èƒ½åŠ›&lt;/strong&gt;ï¼Œä¸»è¦æ›´æ–°åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;p&gt;âœ… &lt;strong&gt;å¢å¼ºèº«ä»½è®¤è¯æœºåˆ¶&lt;/strong&gt;ï¼ˆAPI Key è®¤è¯ã€JWKS TLS é…ç½®ç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;âœ… &lt;strong&gt;ä¼˜åŒ–è·¯ç”±ä¸é™æµèƒ½åŠ›&lt;/strong&gt;ï¼ˆæ”¯æŒ GRPCRouteã€HTTPRoute é‡è¯•ã€åŠ¨æ€å…ƒæ•°æ®é™æµç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;âœ… &lt;strong&gt;æé«˜ç”Ÿäº§ç¯å¢ƒè¿ç»´æ•ˆç‡&lt;/strong&gt;ï¼ˆHPA æ”¯æŒã€IPv6 å…¼å®¹ã€æ‰©å±•æœåŠ¡ fail-closed æœºåˆ¶ç­‰ï¼‰&lt;/p&gt;
&lt;p&gt;è¿™äº›æ”¹è¿›ä½¿ Envoy Gateway åœ¨ &lt;strong&gt;ç”Ÿäº§ç¯å¢ƒ&lt;/strong&gt; ä¸‹æ›´å…·å®‰å…¨æ€§ã€å¯æ‰©å±•æ€§å’Œç®¡ç†ä¾¿åˆ©æ€§ï¼Œä¸º Kubernetes ç”Ÿæ€ä¸­çš„æµé‡ç®¡ç†æä¾›æ›´ç¨³å®šã€æ›´å¼ºå¤§çš„è§£å†³æ–¹æ¡ˆã€‚ğŸš€&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istio å¯è§æ€§ä¸æ•…éšœæ’æŸ¥ï¼šç›‘æ§æ§åˆ¶å¹³é¢çš„å…³é”®æŒ‡æ ‡</title>
      <link>https://cloudnativecn.com/blog/istio-visibility-troubleshooting/</link>
      <pubDate>Fri, 10 Jan 2025 11:53:24 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-visibility-troubleshooting/</guid>
      <description>&lt;p&gt;Istio æœåŠ¡ç½‘æ ¼æ‹¥æœ‰ä¸°å¯Œçš„åŠŸèƒ½ï¼Œä¸ºæ•°ç™¾å®¶å…¬å¸çš„ Kubernetes ç¯å¢ƒæä¾›äº†æ›´é«˜çš„å®‰å…¨æ€§ã€æ•æ·æ€§å’Œå¼¹æ€§ã€‚è¿™äº›åŠŸèƒ½éƒ½ç”±ä¸€ä¸ªå¯æ‰©å±•ã€æ— çŠ¶æ€ä¸”æ¾è€¦åˆçš„ç»„ä»¶â€”â€”&lt;strong&gt;Istiod&lt;/strong&gt; æ¥åè°ƒã€‚Istiod æ˜¯ Istio çš„æ ¸å¿ƒè½¯ä»¶ç»„ä»¶ï¼ŒæŒç»­æ¥æ”¶ Kubernetes API çš„æ›´æ–°ï¼Œå°†é…ç½®å’Œæ›´æ–°ä¼ é€’ç»™ sidecarï¼ŒåŒæ—¶è¿˜å……å½“å®ƒä»¬çš„ CA æˆæƒä¸­å¿ƒã€‚æ­¤å¤–ï¼Œå®ƒè¿˜ç”Ÿæˆäº†å¤§é‡çš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡ &lt;strong&gt;Istiod&lt;/strong&gt; åœ¨å¼€ç®±å³ç”¨çš„æƒ…å†µä¸‹è¡¨ç°ä¼˜å¼‚ï¼Œä½†å¦‚æœæ²¡æœ‰é€‚å½“çš„ç»´æŠ¤ï¼Œå…¶æ€§èƒ½å¯èƒ½æ— æ³•é•¿ä¹…ä¿æŒæœ€ä½³çŠ¶æ€ï¼›å°¤å…¶æ˜¯å½“ç½‘æ ¼æ‰©å±•åˆ°ç»„ç»‡å†…çš„å¤šä¸ªå›¢é˜Ÿæ—¶ï¼Œå…¶æ‰¿æ‹…çš„è´£ä»»åŠ é‡ï¼Œæ›´éœ€è¦å°å¿ƒç»´æŠ¤ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼ŒæœåŠ¡ç½‘æ ¼è¿ç»´äººå‘˜å¿…é¡»å¯†åˆ‡å…³æ³¨ &lt;strong&gt;Istiod&lt;/strong&gt; ç”Ÿæˆçš„å…³é”®æŒ‡æ ‡ã€‚è¿™äº›æŒ‡æ ‡ä¸ä»…èƒ½å¸®åŠ©é¢„é˜²é—®é¢˜ï¼Œè¿˜èƒ½åœ¨å‘ç”Ÿé—®é¢˜æ—¶å¿«é€Ÿè¯Šæ–­æ˜¯å¦ä¸ç½‘æ ¼ç›¸å…³ã€‚å› ä¸ºä½œä¸ºä¸€ä¸ªé¢å¤–çš„ç½‘ç»œå±‚ï¼ŒIstio å‚ä¸äº†æ•°æ®è·¯å¾„çš„æ¯ä¸€æ­¥æ“ä½œï¼Œè€Œä½ éœ€è¦å·¥å…·å’Œä¿¡æ¯æ¥å›ç­”è¿™æ ·çš„é—®é¢˜ï¼šâ€œ&lt;strong&gt;æˆ‘é‡åˆ°çš„é—®é¢˜æ˜¯å¦ä¸æœåŠ¡ç½‘æ ¼æœ‰å…³ï¼Ÿ&lt;/strong&gt;â€&lt;/p&gt;
&lt;p&gt;é™¤äº†æ§åˆ¶å¹³é¢ï¼ŒIstio è¿˜åŒ…æ‹¬ä¸€ä¸ªç”±æ³¨å…¥åˆ° Pod å’Œç½‘å…³ä¸­çš„ Envoy sidecar ç»„æˆçš„æ•°æ®å¹³é¢ã€‚æˆ‘å°†åœ¨åç»­æ–‡ç« ä¸­è®¨è®º Istio æ•°æ®å¹³é¢çš„å…³é”®æŒ‡æ ‡ï¼ˆæ•¬è¯·æœŸå¾…ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åº”å…³æ³¨çš„æŒ‡æ ‡istio-é»„é‡‘æŒ‡æ ‡&#34;&gt;åº”å…³æ³¨çš„æŒ‡æ ‡ï¼šIstio é»„é‡‘æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;å¿«é€Ÿç¡®å®šâ€œ&lt;strong&gt;åœ¨ Istiod ä¸­åº”è¯¥è§‚å¯Ÿä»€ä¹ˆï¼Ÿ&lt;/strong&gt;â€è¿™ä¸€é—®é¢˜èŒƒå›´çš„ä¸€ç§æ–¹æ³•æ˜¯è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; -it &lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get po -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;istiod -oname&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt; -- curl localhost:15014/metrics &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; grep -P &lt;span class=&#34;s1&#34;&gt;&amp;#39;^(?!#).*?&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; awk -F&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#39;&lt;/span&gt; &lt;span class=&#34;s1&#34;&gt;&amp;#39;{print $1}&amp;#39;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; sort &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; uniq &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; wc -l
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;m&#34;&gt;87&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªå‘½ä»¤æ˜¾ç¤ºäº†è¶…è¿‡ 87 ä¸ªç‹¬ç‰¹æŒ‡æ ‡â€”â€”è¿˜ä¸åŒ…æ‹¬ä¸€äº›å› æˆ‘çš„é›†ç¾¤ä¸­å€¼ä¸º null è€Œæœªç»Ÿè®¡çš„é¥±å’Œåº¦å’Œå…¶ä»–ç‰¹å®šæŒ‡æ ‡ã€‚å»ºè®®é‡ç‚¹å…³æ³¨ä¸&lt;strong&gt;å»¶è¿Ÿã€æµé‡ã€é”™è¯¯å’Œé¥±å’Œåº¦&lt;/strong&gt;ç›¸å…³çš„æŒ‡æ ‡ã€‚è¿™ç»„æŒ‡æ ‡è¢«ç§°ä¸ºé»„é‡‘æŒ‡æ ‡ï¼ˆGolden Metricsï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-å»¶è¿ŸæŒ‡æ ‡&#34;&gt;Istio å»¶è¿ŸæŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Istiod&lt;/strong&gt; çš„å»¶è¿ŸæŒ‡çš„æ˜¯å°†æ¶ˆæ¯ä¼ é€’ç»™ sidecar å¹¶è¢«å…¶å¤„ç†æ‰€éœ€çš„æ—¶é—´ã€‚è¿™äº›æ¶ˆæ¯åŒ…æ‹¬ Istio è‡ªå®šä¹‰èµ„æºå®šä¹‰ï¼ˆCRDï¼‰é…ç½®ã€æ–° Pod çš„ IP åœ°å€ã€Kubernetes æœåŠ¡çš„åˆ é™¤é€šçŸ¥ï¼Œä»¥åŠä¸ºæ–°åˆ›å»ºçš„ sidecar æä¾›çš„å¯åŠ¨é…ç½®æ‰¹é‡æ•°æ®ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå¿…é¡»å…³æ³¨çš„æŒ‡æ ‡æ˜¯ &lt;code&gt;pilot_proxy_convergence_time_bucket&lt;/code&gt;ï¼Œå®ƒè¡¨æ˜ &lt;strong&gt;Istiod&lt;/strong&gt; é…ç½®åœ¨ sidecar ä¸­ç”Ÿæ•ˆæ‰€éœ€çš„æ—¶é—´ã€‚æ­¤æŒ‡æ ‡å¸®åŠ©æˆ‘ä»¬å®¢æˆ·åœ¨æ§åˆ¶å¹³é¢æ€§èƒ½é—®é¢˜å½±å“åº”ç”¨ä¹‹å‰è¿›è¡Œè°ƒæ•´ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ¨èçš„æŒ‡æ ‡æ˜¯ &lt;code&gt;pilot_xds_push_time_bucket&lt;/code&gt;ï¼Œç‰¹åˆ«æ˜¯é’ˆå¯¹ EDSï¼ˆç«¯ç‚¹å‘ç°æœåŠ¡ï¼‰ç»´åº¦ï¼Œå› ä¸ºæ­¤é…ç½®æµè´Ÿè´£ä¼ é€’ Pod IP çš„å˜æ›´ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ª Pod è¢«åˆ é™¤ï¼Œè€Œå…¶ä»–æ­£åœ¨è¿è¡Œçš„ sidecar æ›´æ–°éœ€è¦ 5 ç§’ï¼Œè¿™å°†å½±å“åˆ°å¯¹æœªç›‘å¬çš„ IP: ç«¯å£å‘é€çš„è¯·æ±‚ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€šè¿‡äº†è§£æ­¤æŒ‡æ ‡ï¼Œå¯ä»¥è§£å†³ç¬æ—¶è¶…æ—¶å’Œå°¾éƒ¨å»¶è¿Ÿå¢åŠ çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-æµé‡æŒ‡æ ‡&#34;&gt;Istio æµé‡æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;æµé‡æŒ‡æ ‡åæ˜ äº† &lt;strong&gt;Istiod&lt;/strong&gt; å¤„ç†çš„æ´»åŠ¨é‡ã€‚å®ƒå¯ä»¥ç”¨æ¥è§‚å¯ŸæœåŠ¡ç½‘æ ¼ç”¨æˆ·æ›´æ”¹é…ç½®çš„é¢‘ç‡ï¼Œä¾‹å¦‚æ·»åŠ æ–°è·¯ç”±ï¼Œä»¥åŠé›†ç¾¤ä¸­å˜æ›´çš„å¼ºåº¦ï¼ˆä¾‹å¦‚ Pod å’Œ Kubernetes æœåŠ¡å˜æ›´ï¼‰ã€‚å®ƒæä¾›äº†ä¸€ä¸ªé›†ä¸­ç‚¹ï¼Œæ¥è¡¡é‡æŸäº›é›†ç¾¤å˜æ›´åœ¨æœåŠ¡å’Œ Istio é…ç½®å±‚é¢çš„å½±å“ï¼Œå¹¶ç»“åˆå…¶ä»–ç›¸å…³æ•°æ®è¿›è¡Œåˆ†æï¼Œä¸ºæœªæ¥è§„åˆ’æä¾›ä¾æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªå…³é”®æŒ‡æ ‡æ˜¯ &lt;code&gt;pilot_xds_pushes&lt;/code&gt;ï¼Œå®ƒé»˜è®¤åŒ…å«ä¸€ä¸ª &lt;code&gt;type&lt;/code&gt; ç»´åº¦ï¼Œæ˜ å°„åˆ° CDSã€LDSã€RDS å’Œ EDSã€‚å‰ä¸‰è€…ä¸ Istio é…ç½®ï¼ˆå¦‚è™šæ‹ŸæœåŠ¡ã€ç½‘å…³æˆ–ç›®æ ‡è§„åˆ™ï¼‰ç›¸å…³ï¼Œè€Œæœ€åä¸€ä¸ªå¯†åˆ‡è·Ÿè¸ª Pod IP æˆ–ç«¯ç‚¹çš„å˜æ›´ã€‚æ­¤æŒ‡æ ‡éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥å¸®åŠ©ä½ äº†è§£ &lt;strong&gt;Istiod&lt;/strong&gt; å¤„ç†çš„å˜æ›´å†…å®¹åŠå…¶å¼ºåº¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-é”™è¯¯æŒ‡æ ‡&#34;&gt;Istio é”™è¯¯æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€ç±»æŒ‡æ ‡è‡³å…³é‡è¦ã€‚&lt;strong&gt;Istiod&lt;/strong&gt; ä¸­çš„ä»»ä½•é”™è¯¯éƒ½éœ€è¦ç«‹å³å¤„ç†ã€‚è™½ç„¶ç”±äºæ¾è€¦åˆæ¶æ„ï¼Œå³ä½¿ sidecar ä¸ Istiod çš„è¿æ¥ä¸¢å¤±ï¼Œåªè¦æ²¡æœ‰ Pod æˆ– CRD çš„å˜æ›´ï¼Œsidecar ä»ç„¶å¯ä»¥æ­£å¸¸å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„æŒ‡æ ‡æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;code&gt;sidecar_injection_failure_total&lt;/code&gt;ï¼šæ­¤æŒ‡æ ‡è·Ÿè¸ª &lt;strong&gt;Istiod&lt;/strong&gt; çš„ä¸€ä¸ªåŠŸèƒ½â€”â€”ä¸€ä¸ªåœ¨ Pod åˆ›å»ºæ—¶æ”¹å˜å…¶è§„èŒƒçš„å˜å¼‚ Webhookï¼Œç”¨äºæ’å…¥ Istio çš„ç»„ä»¶ï¼ˆå¦‚ sidecar å’Œ init å®¹å™¨ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;pilot_xds_write_timeout&lt;/code&gt;ï¼šæ­¤æŒ‡æ ‡è¡¨æ˜ &lt;strong&gt;Istiod&lt;/strong&gt; åˆ° sidecar çš„æ¨é€æœªèƒ½åœ¨åŒæ–¹è§„å®šçš„æ—¶é—´å†…å¤„ç†å®Œæˆã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;istio-é¥±å’Œåº¦æŒ‡æ ‡&#34;&gt;Istio é¥±å’Œåº¦æŒ‡æ ‡&lt;/h2&gt;
&lt;p&gt;æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯ï¼Œè‹¥æœªè¿›è¡Œé€‚å½“çš„ç›‘æ§ï¼Œ&lt;strong&gt;Istiod&lt;/strong&gt; å¯èƒ½å› èµ„æºä¸è¶³è€Œå¼•å‘é—®é¢˜ã€‚CPU å’Œå†…å­˜åˆ†é…ä»¥åŠæ°´å¹³ Pod è‡ªåŠ¨ä¼¸ç¼©ï¼ˆHPAï¼‰åº”æ ¹æ®å†å²æ¨¡å¼ï¼ˆå¦‚æ–°åº”ç”¨ç‰ˆæœ¬å‘å¸ƒã€èŠ‚ç‚¹å‡çº§å¼•å‘çš„å¤§è§„æ¨¡é©±é€ä»¥åŠè¿‡å»å‡ å¹´çš„æµé‡é«˜å³°ï¼‰è¿›è¡Œç›‘æ§å’Œè°ƒæ•´ã€‚&lt;/p&gt;
&lt;p&gt;æ›¾ç»æœ‰ä¸€ä½å®¢æˆ·åœ¨å‘å¸ƒæ–°åº”ç”¨ç‰ˆæœ¬æ—¶æµé‡ä¸­æ–­ï¼Œè¿™åœ¨ä»¥å‰ä»æœªå‘ç”Ÿè¿‡ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¤äººå›°æƒ‘ä¸”æ„å¤–çš„æƒ…å†µã€‚é€šè¿‡æ£€æŸ¥ &lt;code&gt;container_cpu_usage_seconds_total&lt;/code&gt;ï¼Œæˆ‘ä»¬å‘ç°æ§åˆ¶å¹³é¢ CPU ä½¿ç”¨ç‡è¿‡é«˜å¯èƒ½å¯¼è‡´äº†é—®é¢˜ã€‚è¿›ä¸€æ­¥åˆ†æåï¼Œå‘ç° HPA çš„æœŸæœ›å‰¯æœ¬æ•°è¾¾åˆ°äº†å…è®¸çš„æœ€å¤§å€¼ã€‚é€šè¿‡å¿«é€Ÿè°ƒæ•´ï¼Œé›†ç¾¤æ¢å¤åˆ°äº†æ­£å¸¸çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Istiod&lt;/strong&gt; çš„æŒ‡æ ‡å¦‚ &lt;code&gt;process_virtual_memory_bytes&lt;/code&gt; éœ€è¦ä¸ kube-state-metrics ç»“åˆä½¿ç”¨ï¼Œæ‰èƒ½ç›´è§‚åœ°åæ˜ å½“å‰ &lt;strong&gt;Istiod&lt;/strong&gt; çš„å†…å­˜é¥±å’Œæƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ä½ æ‹¥æœ‰é€‚å½“çš„ä»ªè¡¨ç›˜æ¥è§‚å¯Ÿä¸Šè¿°æŒ‡æ ‡ï¼Œå¹¶è®©å›¢é˜Ÿç†è§£å…¶é‡è¦æ€§ï¼Œä½ å°†è·å¾—æ›´é«˜çš„è¯Šæ–­å‡†ç¡®æ€§å’Œé€Ÿåº¦ã€æ›´å¥½çš„å¼¹æ€§ï¼Œä»¥åŠæ›´æ»¡æ„çš„ç»ˆç«¯ç”¨æˆ·ä½“éªŒã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä»æ„å»º WASM åç«¯çœ‹æ–°ç¼–ç¨‹è¯­è¨€ MoonBit </title>
      <link>https://cloudnativecn.com/blog/moonbit-on-golem-cloud/</link>
      <pubDate>Tue, 07 Jan 2025 19:33:16 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/moonbit-on-golem-cloud/</guid>
      <description>&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://www.moonbitlang.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MoonBit&lt;/a&gt; æ˜¯ä¸€é—¨æ–°çš„ç¼–ç¨‹è¯­è¨€ï¼Œå‡ å‘¨å‰åˆšåˆšå¼€æº â€”â€” è¯·å‚è§&lt;a href=&#34;https://www.moonbitlang.com/blog/compiler-opensource&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™ç¯‡åšå®¢æ–‡ç« &lt;/a&gt;ã€‚MoonBit æ˜¯ä¸€é—¨ä»¤äººå…´å¥‹çš„ç°ä»£ç¼–ç¨‹è¯­è¨€ï¼ŒåŸç”Ÿæ”¯æŒ WebAssemblyï¼ŒåŒ…æ‹¬ç»„ä»¶æ¨¡å‹ï¼Œè¿™ä½¿å¾—å®ƒéå¸¸é€‚åˆä¸º Golem Cloud ç¼–å†™åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†æ¢è®¨ MoonBit çš„å½“å‰çŠ¶æ€ï¼Œä»¥åŠå®ƒæ˜¯å¦å·²å‡†å¤‡å¥½ç¼–å†™ Golem ç»„ä»¶ï¼Œé€šè¿‡å®ç°ä¸€ä¸ªæ¯”ç®€å•çš„ &amp;ldquo;Hello World&amp;rdquo; ç¤ºä¾‹æ›´å¤æ‚çš„åº”ç”¨ç¨‹åºæ¥è¿›è¡ŒéªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;è¦å®ç°çš„åº”ç”¨ç¨‹åºæ˜¯ä¸€ä¸ªç®€å•çš„åä½œåˆ—è¡¨ç¼–è¾‘å™¨ â€”â€” åœ¨ &lt;a href=&#34;https://youtu.be/11Cig1iH6S0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Golem 1.0 å‘å¸ƒäº‹ä»¶&lt;/a&gt;ä¸Šï¼Œæˆ‘ä½¿ç”¨ä¸‰ç§ä¸åŒçš„ç¼–ç¨‹è¯­è¨€ï¼ˆTypeScriptã€Rust å’Œ Goï¼‰ä¸ºå…¶å®ç°äº†ä¸‰ä¸ªä¸»è¦æ¨¡å—ã€‚åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨ MoonBit å®ç°è¿™ä¸‰ä¸ªæ¨¡å—ï¼ŒåŒ…æ‹¬ç”±äºæ—¶é—´é™åˆ¶è€Œä»ç°åœºæ¼”ç¤ºä¸­çœç•¥çš„é‚®ä»¶å‘é€åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¯¥åº”ç”¨ç¨‹åºå¯ä»¥å¤„ç†ä»»æ„æ•°é‡çš„åŒæ—¶æ‰“å¼€çš„åˆ—è¡¨ã€‚æ¯ä¸ªåˆ—è¡¨ç”±ä¸€ç»„å­—ç¬¦ä¸²é¡¹ç»„æˆã€‚å¤šä¸ªç”¨æˆ·å¯ä»¥åŒæ—¶æ·»åŠ ã€æ’å…¥å’Œåˆ é™¤è¿™äº›é¡¹ï¼›å½“å‰çš„åˆ—è¡¨çŠ¶æ€å¯ä»¥éšæ—¶æŸ¥è¯¢ï¼Œä»¥åŠæ´»è·ƒè¿æ¥ï¼ˆå¯ä»¥è¿›è¡Œç¼–è¾‘æ“ä½œçš„ç”¨æˆ·ï¼‰ã€‚åªæœ‰å·²è¿æ¥çš„ç¼–è¾‘è€…æ‰èƒ½è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä¸”æä¾›ä¸€ä¸ªè½®è¯¢åŠŸèƒ½ï¼Œè¿”å›è‡ªä¸Šæ¬¡è½®è¯¢ä»¥æ¥çš„æ–°æ›´æ”¹ã€‚åˆ—è¡¨å¯ä»¥å½’æ¡£ï¼Œè¿™æ ·å®ƒä»¬å°†ä¸å†å¯ç¼–è¾‘ï¼Œå…¶å†…å®¹å°†ä¿å­˜åœ¨å•ç‹¬çš„åˆ—è¡¨å½’æ¡£ä¸­ã€‚ç„¶åï¼Œåˆ—è¡¨æœ¬èº«å¯ä»¥è¢«åˆ é™¤ï¼Œå…¶æœ€åçš„çŠ¶æ€ä¼šæ°¸è¿œä¿å­˜åœ¨å½’æ¡£ä¸­ã€‚å¦ä¸€ä¸ªé™„åŠ åŠŸèƒ½æ˜¯ï¼Œå¦‚æœåˆ—è¡¨æœªå½’æ¡£ä¸”åœ¨æŸæ®µæ—¶é—´å†…æ²¡æœ‰æ›´æ”¹ï¼Œåˆ™æ‰€æœ‰è¿æ¥çš„ç¼–è¾‘è€…å°†é€šè¿‡å‘é€ç”µå­é‚®ä»¶çš„æ–¹å¼æ”¶åˆ°é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;golem-æ¶æ„&#34;&gt;Golem æ¶æ„&lt;/h2&gt;
&lt;p&gt;åœ¨ Golem ä¸­ï¼Œè¿è¡Œæ­¤åº”ç”¨ç¨‹åºçš„è‰¯å¥½æ¶æ„æ˜¯æ‹¥æœ‰ä¸‰ä¸ªä¸åŒçš„ Golem ç»„ä»¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ—è¡¨&lt;/li&gt;
&lt;li&gt;å½’æ¡£&lt;/li&gt;
&lt;li&gt;é‚®ä»¶é€šçŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™äº›éƒ½æ˜¯ç¼–è¯‘åçš„ WebAssembly ç»„ä»¶ï¼Œæ¯ä¸ªç»„ä»¶å¯¼å‡ºä¸€ç»„ç‹¬ç‰¹çš„å‡½æ•°ã€‚Golem æä¾› API ç”¨äºä»å¤–éƒ¨ä¸–ç•Œè°ƒç”¨è¿™äº›å‡½æ•°ï¼ˆä¾‹å¦‚å°†å®ƒä»¬æ˜ å°„åˆ° HTTP APIï¼‰ï¼Œå¹¶ä¸”è¿˜å…è®¸å·¥ä½œè€…ï¼ˆè¿™äº›ç»„ä»¶çš„å®ä¾‹ï¼‰ç›¸äº’è°ƒç”¨ã€‚ä¸€ä¸ªç»„ä»¶å¯ä»¥æœ‰ä»»æ„æ•°é‡çš„å®ä¾‹ï¼Œæ¯ä¸ªå·¥ä½œè€…é€šè¿‡å”¯ä¸€çš„åç§°è¿›è¡Œæ ‡è¯†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨è¿™ä¸€ç‰¹æ€§æ¥å®ç°ä¸€ä¸ªéå¸¸ç®€å•ç›´æ¥çš„åˆ—è¡¨ç¼–è¾‘å™¨ â€”â€” æ¯ä¸ªæ–‡æ¡£ï¼ˆå¯ç¼–è¾‘åˆ—è¡¨ï¼‰å°†æ˜ å°„åˆ°å…¶è‡ªå·±çš„å·¥ä½œè€…ï¼Œé€šè¿‡åˆ—è¡¨çš„æ ‡è¯†ç¬¦æ¥æ ‡è¯†ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬çš„åˆ—è¡¨ç»„ä»¶åªéœ€å¤„ç†ä¸€ä¸ªå•ä¸€çš„åˆ—è¡¨ï¼›å°†å…¶æ‰©å±•åˆ°å¤„ç†å¤šä¸ªï¼ˆç”šè‡³æ•°ç™¾ä¸‡ä¸ªï¼‰åˆ—è¡¨ï¼ŒGolem ä¼šè‡ªåŠ¨å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå½’æ¡£åˆ—è¡¨ï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ¯ä¸ªå½’æ¡£çš„åˆ—è¡¨å­˜å‚¨åœ¨ä¸€ä¸ªåœ°æ–¹ â€”â€” æ‰€ä»¥æˆ‘ä»¬å°†åªæ‹¥æœ‰ä¸€ä¸ªå½’æ¡£ç»„ä»¶çš„å®ä¾‹ï¼Œæ‰€æœ‰å½’æ¡£çš„åˆ—è¡¨ä¿¡æ¯éƒ½å°†å‘é€åˆ°è¯¥å®ä¾‹ã€‚è¿™ä¸€å•ä¾‹å·¥ä½œè€…å¯ä»¥æ ¹æ®éœ€è¦å°†å½’æ¡£çš„åˆ—è¡¨å­˜å‚¨åœ¨æ•°æ®åº“ä¸­ â€”â€” ä½†å› ä¸º Golem çš„æŒä¹…æ‰§è¡Œä¿è¯ï¼Œç›´æ¥å°†å®ƒä»¬å­˜å‚¨åœ¨å†…å­˜ä¸­å°±è¶³å¤Ÿäº†ï¼ˆä¸€ä¸ªé‡è¦çš„ä¾‹å¤–æ˜¯å¦‚æœæˆ‘ä»¬å¸Œæœ›å­˜å‚¨å¤§é‡çš„å½’æ¡£åˆ—è¡¨ï¼Œæ— æ³•åœ¨å•ä¸ªå·¥ä½œè€…çš„å†…å­˜ä¸­å­˜å‚¨ï¼‰ã€‚Golem ä¿è¯æ— è®ºä½•æ—¶å‘ç”Ÿæ•…éšœæˆ–é‡æ–°æ‰©å±•äº‹ä»¶ï¼Œå·¥ä½œè€…çš„çŠ¶æ€éƒ½ä¼šæ¢å¤ï¼Œå› æ­¤å½’æ¡£ç»„ä»¶å¯ä»¥ä¿æŒéå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œç”±äº Golem å·¥ä½œè€…æ˜¯å•çº¿ç¨‹çš„ï¼Œå¹¶ä¸”ç›®å‰ä¸æ”¯æŒä¸è°ƒç”¨é‡å çš„å¼‚æ­¥è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦ç¬¬ä¸‰ä¸ªç»„ä»¶æ¥å®ç°å»¶è¿Ÿå‘é€ç”µå­é‚®ä»¶çš„åŠŸèƒ½ã€‚æ¯ä¸ªåˆ—è¡¨å·¥ä½œè€…å°†å¯¹åº”ä¸€ä¸ªé‚®ä»¶å‘é€å·¥ä½œè€…ï¼Œè¯¥å·¥ä½œè€…å°†æš‚åœä¸€æ®µæ—¶é—´ï¼ˆæˆ‘ä»¬å¸Œæœ›åœ¨å‘é€é‚®ä»¶ä¹‹å‰ç­‰å¾…çš„æ—¶é—´ï¼‰ã€‚åŒæ ·ï¼Œç”±äº Golem çš„æŒä¹…æ‰§è¡ŒåŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ­¤ç»„ä»¶ä¸­â€œä¼‘çœ â€ä»»æ„é•¿çš„æ—¶é—´ï¼Œä¸”æ— éœ€æ‹…å¿ƒåœ¨æ­¤é•¿æ—¶é—´æœŸé—´æ‰§è¡Œç¯å¢ƒå¯èƒ½å‘ç”Ÿçš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆæ­¥-moonbit-å®ç°&#34;&gt;åˆæ­¥ MoonBit å®ç°&lt;/h2&gt;
&lt;p&gt;åœ¨æ·±å…¥äº†è§£å¦‚ä½•ä½¿ç”¨ MoonBit å¼€å‘ Golem ç»„ä»¶ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å°è¯•ç”¨è¿™é—¨æ–°è¯­è¨€å®ç°ä¸Šè¿°æè¿°çš„ç»„ä»¶ï¼Œè€Œä¸æ¶‰åŠä»»ä½• Golem æˆ– WebAssembly çš„ç‰¹å®šå†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;moon new&lt;/code&gt; åˆ›å»ºä¸€ä¸ªæ–°çš„ lib é¡¹ç›®ã€‚è¿™å°†åˆ›å»ºä¸€ä¸ªåŒ…å«å•ä¸ªåŒ…çš„æ–°é¡¹ç›®ã€‚ä¸ºäº†åŒ¹é…æˆ‘ä»¬çš„æ¶æ„ï¼Œæˆ‘ä»¬å°†å¼€å§‹åˆ›å»ºå¤šä¸ªåŒ…ï¼Œæ¯ä¸ªåŒ…å¯¹åº”ä¸€ä¸ªè¦å¼€å‘çš„ç»„ä»¶ï¼ˆåˆ—è¡¨ã€å½’æ¡£ã€é‚®ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸ºæ¯ä¸ªåŒ…åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œåœ¨æ¯ä¸ªæ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ª &lt;code&gt;moon.pkg.json&lt;/code&gt; æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;import&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ—è¡¨æ¨¡å‹&#34;&gt;åˆ—è¡¨æ¨¡å‹&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä»å»ºæ¨¡æˆ‘ä»¬çš„åˆ—è¡¨å¼€å§‹ã€‚è¢«ç¼–è¾‘çš„â€œæ–‡æ¡£â€æœ¬èº«åªæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä¸º &lt;code&gt;Document&lt;/code&gt; å®ç°æ–¹æ³•ï¼Œæ”¯æŒæˆ‘ä»¬å¸Œæœ›çš„æ–‡æ¡£ç¼–è¾‘æ“ä½œã€‚åœ¨æ­¤çº§åˆ«ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒåä½œç¼–è¾‘æˆ–è¿æ¥çš„ç”¨æˆ·ï¼Œåªéœ€å°†æ–‡æ¡£å»ºæ¨¡ä¸ºçº¯æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| åˆ›å»ºä¸€ä¸ªç©ºçš„æ–‡æ¡£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;Document&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å‘æ–‡æ¡£æ·»åŠ ä¸€ä¸ªæ–°é¡¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is_empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| ä»æ–‡æ¡£ä¸­åˆ é™¤ä¸€ä¸ªé¡¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;item&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å‘æ–‡æ¡£ä¸­æ’å…¥ä¸€ä¸ªé¡¹ï¼Œå¦‚æœ `after` ä¸åœ¨æ–‡æ¡£ä¸­ï¼Œåˆ™æ–°é¡¹æ’å…¥åˆ°æœ«å°¾ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;search&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;index&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| è·å–æ–‡æ¡£çš„é¡¹è§†å›¾
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;ArrayView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;:&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| éå†æ–‡æ¡£ä¸­çš„é¡¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ MoonBit å†…å»ºçš„æµ‹è¯•åŠŸèƒ½ä¸ºæ­¤ç¼–å†™å•å…ƒæµ‹è¯•ã€‚ä»¥ä¸‹æµ‹è¯•åŒ…å«ä¸€ä¸ªæ–­è¨€ï¼ŒéªŒè¯åˆå§‹æ–‡æ¡£ä¸ºç©ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;new document is empty&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Document&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;assert_eq!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;empty&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;inspect&lt;/code&gt; å‡½æ•°ï¼Œæµ‹è¯•å¯ä»¥ä½¿ç”¨å¿«ç…§å€¼æ¥è¿›è¡Œæ¯”è¾ƒã€‚&lt;code&gt;moon CLI&lt;/code&gt; å·¥å…·å’Œ IDE é›†æˆæä¾›äº†åœ¨éœ€è¦æ—¶è‡ªåŠ¨æ›´æ–°è¿™äº›æµ‹è¯•å‡½æ•°ä¸­çš„å¿«ç…§å€¼ï¼ˆ&lt;code&gt;content=&lt;/code&gt; éƒ¨åˆ†ï¼‰çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;test&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;basic document operations&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Document&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;w&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;a&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;z&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;f&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;inspect!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;doc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;content&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;#&lt;span class=&#34;o&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;y&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;w&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;b&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ—è¡¨ç¼–è¾‘å™¨çŠ¶æ€&#34;&gt;åˆ—è¡¨ç¼–è¾‘å™¨çŠ¶æ€&lt;/h3&gt;
&lt;p&gt;æ¥ä¸‹æ¥çš„æ­¥éª¤æ˜¯å®ç°åŸºäº &lt;code&gt;Document&lt;/code&gt; ç±»å‹çš„ç¼–è¾‘å™¨çŠ¶æ€ç®¡ç†ã€‚æé†’ä¸€ä¸‹ï¼Œæˆ‘ä»¬å†³å®šæ¯ä¸ªåˆ—è¡¨ç»„ä»¶çš„å®ä¾‹ï¼ˆGolem å·¥ä½œè€…ï¼‰åªè´Ÿè´£ç¼–è¾‘ä¸€ä¸ªå•ä¸€çš„åˆ—è¡¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒå­˜å‚¨å’Œç´¢å¼•åˆ—è¡¨ï¼Œæˆ–å°†è¿æ¥è·¯ç”±åˆ°å¯¹åº”çš„èŠ‚ç‚¹ï¼ŒGolem ä¼šè‡ªåŠ¨ç®¡ç†è¿™ä¸€åˆ‡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦åšçš„ï¼Œæ˜¯ç¼–å†™æœ‰çŠ¶æ€çš„ä»£ç æ¥å¤„ç†è¿æ¥å’Œæ–­å¼€ç”¨æˆ·ï¼ˆâ€œç¼–è¾‘è€…â€ï¼‰ï¼Œåœ¨æ–‡æ¡£ç¼–è¾‘ API ä¸Šæ·»åŠ ä¸€äº›éªŒè¯ï¼Œä»¥ç¡®ä¿åªæœ‰è¿æ¥çš„ç¼–è¾‘è€…èƒ½å¤Ÿè¿›è¡Œä¿®æ”¹ï¼Œå¹¶æ”¶é›†å˜æ›´äº‹ä»¶ä»¥ä¾›è½®è¯¢ API ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»å®šä¹‰ä¸€ä¸ªæ–°çš„æ•°æ®ç±»å‹æ¥æŒæœ‰æˆ‘ä»¬çš„æ–‡æ¡£ç¼–è¾‘çŠ¶æ€å¼€å§‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| æ–‡æ¡£çŠ¶æ€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorState&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Bool&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_deadline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTime&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_recipients&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EmailAddress&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é™¤äº†å®é™…çš„æ–‡æ¡£ï¼Œæˆ‘ä»¬å°†å­˜å‚¨ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿æ¥çš„ç¼–è¾‘è€…çš„æ˜ å°„ï¼Œä»¥åŠä¸æ¯ä¸ªç¼–è¾‘è€…ç›¸å…³çš„çŠ¶æ€&lt;/li&gt;
&lt;li&gt;ç”¨äºç”Ÿæˆæ–°è¿æ¥ ID çš„ä¸Šä¸€ä¸ªè¿æ¥ ID&lt;/li&gt;
&lt;li&gt;æ–‡æ¡£æ˜¯å¦å·²å½’æ¡£&lt;/li&gt;
&lt;li&gt;ä½•æ—¶å‘é€ç”µå­é‚®ä»¶é€šçŸ¥ï¼Œå‘é€ç»™å“ªäº›æ”¶ä»¶äºº&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªå®šä¹‰äº† &lt;code&gt;Document&lt;/code&gt; ç±»å‹ï¼Œå› æ­¤è®©æˆ‘ä»¬ç»§ç»­å®šä¹‰ &lt;code&gt;State&lt;/code&gt; å­—æ®µä¸­ä½¿ç”¨çš„å…¶ä»–ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ConnectionId&lt;/code&gt; å°†æ˜¯ä¸€ä¸ªåŒ…è£…æ•´æ•°çš„æ–°ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| è¿æ¥çš„ç¼–è¾‘è€…çš„æ ‡è¯†ç¬¦
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Int&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;derive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| ç”Ÿæˆä¸‹ä¸€ä¸ªå”¯ä¸€çš„è¿æ¥ ID
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¸Œæœ›å°†æ­¤ç±»å‹ä½œä¸º &lt;code&gt;Map&lt;/code&gt; çš„é”®ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸ºå®ƒå®ç° &lt;code&gt;Eq&lt;/code&gt; å’Œ &lt;code&gt;Hash&lt;/code&gt; ç±»å‹ç±»ã€‚MoonBit å¯ä»¥è‡ªåŠ¨ä¸ºæ–°ç±»å‹æ´¾ç”Ÿè¿™äº›ç±»å‹ç±»ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†ä¸€ä¸ªåä¸º &lt;code&gt;next&lt;/code&gt; çš„æ–¹æ³•ï¼Œç”¨äºç”Ÿæˆä¸€ä¸ªé€’å¢çš„è¿æ¥ IDã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;EditorState&lt;/code&gt; ç»“æ„å­˜å‚¨æ¯ä¸ªè¿æ¥çš„ç¼–è¾‘è€…çš„ä¿¡æ¯ã€‚ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œæˆ‘ä»¬åªå­˜å‚¨ç¼–è¾‘è€…çš„ç”µå­é‚®ä»¶åœ°å€å’Œè‡ªä¸Šæ¬¡è½®è¯¢ä»¥æ¥çš„æ›´æ”¹äº‹ä»¶ç¼“å†²åŒºã€‚&lt;/p&gt;
&lt;p&gt;ç”µå­é‚®ä»¶åœ°å€æ˜¯ä¸€ä¸ªæ–°çš„ &lt;code&gt;String&lt;/code&gt; ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| è¿æ¥ç¼–è¾‘è€…çš„ç”µå­é‚®ä»¶åœ°å€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;EmailAddress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Change&lt;/code&gt; æšä¸¾æè¿°äº†å¯¹æ–‡æ¡£æ‰€åšçš„å¯èƒ½æ›´æ”¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| ç¼–è¾‘æ–‡æ¡£æ—¶çš„å¯è§‚å¯Ÿæ›´æ”¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;enum&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Change&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Added&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Inserted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;~&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;derive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡æ´¾ç”Ÿ &lt;code&gt;Show&lt;/code&gt;ï¼ˆæˆ–æ‰‹åŠ¨å®ç°ï¼‰ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;inspect&lt;/code&gt; æµ‹è¯•å‡½æ•°æ¯”è¾ƒæ›´æ”¹æ•°ç»„çš„å­—ç¬¦ä¸²å¿«ç…§ä¸ &lt;code&gt;poll&lt;/code&gt; å‡½æ•°çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸¤ä¸ªæ–°ç±»å‹å®šä¹‰ &lt;code&gt;EditorState&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| æ¯ä¸ªè¿æ¥çš„ç¼–è¾‘è€…çš„çŠ¶æ€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;EditorState&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;EmailAddress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;mut&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;email&lt;/code&gt; å­—æ®µåœ¨è¿æ¥çš„ç¼–è¾‘è€…ä¸­å§‹ç»ˆä¸å˜ï¼Œä½† &lt;code&gt;events&lt;/code&gt; æ•°ç»„ä¼šéšç€æ¯æ¬¡è°ƒç”¨ &lt;code&gt;poll&lt;/code&gt; è¢«é‡ç½®ï¼Œä»¥ä¾¿ä¸‹æ¬¡è½®è¯¢æ—¶ä»…è¿”å›æ–°çš„æ›´æ”¹ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶æ ‡è®°ä¸ºå¯å˜ï¼ˆ&lt;code&gt;mut&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦ä¸º &lt;code&gt;State&lt;/code&gt; å¼•å…¥çš„æœ€åä¸€ä¸ªæ–°ç±»å‹æ˜¯è¡¨ç¤ºæ—¶é—´ç‚¹çš„ä¸œè¥¿ã€‚MoonBit çš„æ ¸å¿ƒæ ‡å‡†åº“ç›®å‰æ²¡æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œä½†å·²ç»æœ‰ä¸€ä¸ªåä¸º &lt;code&gt;mooncakes&lt;/code&gt; çš„åŒ…æ•°æ®åº“ï¼Œé‡Œé¢å‘å¸ƒäº† MoonBit çš„åŒ…ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªå« &lt;code&gt;datetime&lt;/code&gt; çš„åŒ…ã€‚é€šè¿‡ä½¿ç”¨ moon CLI å¯ä»¥å°†å…¶æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;moon add suiyunonghen/datetime
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åé€šè¿‡ä¿®æ”¹ &lt;code&gt;moon.pkg.json&lt;/code&gt; å°†å…¶å¯¼å…¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;import&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;suiyunonghen/datetime&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ &lt;code&gt;@datetime.DateTime&lt;/code&gt; å¼•ç”¨è¯¥åŒ…ä¸­çš„ &lt;code&gt;DateTime&lt;/code&gt; ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¼€å§‹å®ç° &lt;code&gt;State&lt;/code&gt; çš„æ–¹æ³•ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è€ƒè™‘é”™è¯¯å¤„ç†â€”â€”&lt;code&gt;State&lt;/code&gt; ä¸Šçš„æŸäº›æ“ä½œå¯èƒ½ä¼šå¤±è´¥ï¼Œä¾‹å¦‚å¦‚æœä½¿ç”¨äº†é”™è¯¯çš„è¿æ¥ IDï¼Œæˆ–è€…å¦‚æœæ–‡æ¡£å·²å½’æ¡£æ—¶ä»è¿›è¡Œç¼–è¾‘æ“ä½œã€‚MoonBit å†…å»ºäº†é”™è¯¯å¤„ç†æ”¯æŒï¼Œé¦–å…ˆé€šè¿‡ä»¥ä¸‹æ–¹å¼å®šä¹‰æˆ‘ä»¬è‡ªå·±çš„é”™è¯¯ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| ç¼–è¾‘å™¨çŠ¶æ€æ“ä½œçš„é”™è¯¯ç±»å‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å½“ä½¿ç”¨æ— æ•ˆçš„è¿æ¥ ID æ—¶è¿”å›çš„é”™è¯¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InvalidConnection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å°è¯•ä¿®æ”¹å·²å½’æ¡£çš„æ–‡æ¡£æ—¶çš„é”™è¯¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AlreadyArchived&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å‡†å¤‡å¥½å®ç°åä½œåˆ—è¡¨ç¼–è¾‘å™¨äº†ï¼æˆ‘åœ¨è¿™ç¯‡æ–‡ç« ä¸­ä¸ä¼šåˆ—å‡º &lt;code&gt;State&lt;/code&gt; çš„æ‰€æœ‰æ–¹æ³•ï¼Œä½†å®Œæ•´çš„æºä»£ç å¯ä»¥åœ¨ &lt;a href=&#34;https://github.com/vigoo/golem-moonbit-example&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt; ä¸Šæ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;connect&lt;/code&gt; æ–¹æ³•å°†æ–°çš„è¿æ¥ ID ä¸è¿æ¥çš„ç”¨æˆ·å…³è”ï¼Œå¹¶è¿”å›å½“å‰æ–‡æ¡£çŠ¶æ€ã€‚è¿™å¯¹äºä½¿ç”¨ &lt;code&gt;poll&lt;/code&gt; çš„ç»“æœéå¸¸é‡è¦â€”â€”è¿”å›çš„æ›´æ”¹åˆ—è¡¨å¿…é¡»ç²¾ç¡®åº”ç”¨åˆ°å®¢æˆ·ç«¯ä¸Šçš„è¯¥æ–‡æ¡£çŠ¶æ€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| è¿æ¥ä¸€ä¸ªæ–°çš„ç¼–è¾‘è€…
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;EmailAddress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArrayView&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;next&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorState&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¼–è¾‘æ“ä½œæ›´ä¸ºæœ‰è¶£ã€‚å®ƒä»¬æ„å»ºåœ¨æˆ‘ä»¬å·²ç»ä¸º &lt;code&gt;Document&lt;/code&gt; å®šä¹‰çš„ç¼–è¾‘æ“ä½œçš„åŸºç¡€ä¸Šï¼Œä½†é™¤äº†è¿™äº›ï¼Œå®ƒä»¬è¿˜æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;éªŒè¯è¿æ¥ ID&lt;/li&gt;
&lt;li&gt;éªŒè¯æ–‡æ¡£æ˜¯å¦å°šæœªå½’æ¡£&lt;/li&gt;
&lt;li&gt;å‘æ¯ä¸ªè¿æ¥ç¼–è¾‘è€…çš„çŠ¶æ€æ·»åŠ ä¸€ä¸ª &lt;code&gt;Change&lt;/code&gt; äº‹ä»¶&lt;/li&gt;
&lt;li&gt;æ›´æ–° &lt;code&gt;email_deadline&lt;/code&gt; å’Œ &lt;code&gt;email_recipients&lt;/code&gt; å­—æ®µï¼Œå› ä¸ºæ¯æ¬¡ç¼–è¾‘æ“ä½œéƒ½ä¼šé‡ç½®å‘é€ç”µå­é‚®ä»¶çš„è¶…æ—¶æ—¶é—´&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬é€æ­¥å¤„ç†è¿™äº›æ­¥éª¤ã€‚ä¸ºäº†è¿›è¡ŒéªŒè¯ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸¤ä¸ªè¾…åŠ©æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨æ‰€æœ‰ç¼–è¾‘æ–¹æ³•ä¸­é‡å¤ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| å¦‚æœæ–‡æ¡£å·²å½’æ¡£åˆ™å¤±è´¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ensure_not_archived&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;guard&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;not&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AlreadyArchived&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å¦‚æœç»™å®šçš„ `connection_id` ä¸åœ¨è¿æ¥æ˜ å°„ä¸­ï¼Œåˆ™å¤±è´¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ensure_is_connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;guard&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;contains&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InvalidConnection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;Unit!EditorError&lt;/code&gt; è¿”å›ç±»å‹è¡¨ç¤ºè¿™äº›æ–¹æ³•å¯èƒ½ä¼šå¤±è´¥ï¼Œå¹¶è¿”å› &lt;code&gt;EditorError&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜å¯ä»¥ä¸ºå‘æ¯ä¸ªè¿æ¥ç¼–è¾‘è€…çš„çŠ¶æ€æ·»åŠ ä¸€ä¸ªæ›´æ”¹äº‹ä»¶å®šä¹‰ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| å‘æ¯ä¸ªè¿æ¥ç¼–è¾‘è€…çš„çŠ¶æ€æ·»åŠ æ›´æ”¹äº‹ä»¶
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add_event&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;change&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editor_state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editor_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;push&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œä¸ºäº†é‡ç½®ç”µå­é‚®ä»¶å‘é€æˆªæ­¢æ—¶é—´å’Œæ”¶ä»¶äººåˆ—è¡¨ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªè¾…åŠ©æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| åœ¨æ›´æ–°åæ›´æ–° `email_deadline` å’Œ `email_recipients` å­—æ®µ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;update_email_properties&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTime&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;from_unix_mseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TODO
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_at&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inc_hour&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_list&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected_editors&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_deadline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_at&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_recipients&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_list&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œæˆ‘ä»¬å¯¼å…¥çš„ &lt;code&gt;datetime&lt;/code&gt; åº“æ²¡æœ‰è·å–å½“å‰æ—¥æœŸå’Œæ—¶é—´çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªåŠŸèƒ½æ¥ä½¿æ­¤å‡½æ•°æ­£å¸¸å·¥ä½œã€‚æˆ‘ä»¬å°†åœ¨é’ˆå¯¹ WebAssemblyï¼ˆå’Œ Golemï¼‰æ—¶è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå› ä¸ºè·å–å½“å‰ç³»ç»Ÿæ—¶é—´ä¾èµ–äºç›®æ ‡å¹³å°ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™äº›è¾…åŠ©å‡½æ•°ï¼Œå®ç°ç¼–è¾‘å™¨å‡½æ•°ï¼Œä¾‹å¦‚ &lt;code&gt;add&lt;/code&gt;ï¼Œæ˜¯ç›´æˆªäº†å½“çš„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| ä½œä¸ºè¿æ¥çš„ç¼–è¾‘è€…å‘æ–‡æ¡£æ·»åŠ æ–°å…ƒç´ 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;ensure_not_archived!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;ensure_is_connected!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add_event&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Change&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;Added&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;update_email_properties&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®ç° &lt;code&gt;poll&lt;/code&gt; ä¹Ÿå¾ˆç®€å•ï¼Œå› ä¸ºæˆ‘ä»¬å·²ç»ä¸ºæ¯ä¸ªè¿æ¥ç»´æŠ¤äº†æ›´æ”¹åˆ—è¡¨ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨æ¯æ¬¡è°ƒç”¨åé‡ç½®å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| è¿”å›è‡ªä¸Šæ¬¡è°ƒç”¨ `poll` ä»¥æ¥å‘ç”Ÿçš„æ›´æ”¹åˆ—è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Change&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editor_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editor_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editor_state&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;events&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InvalidConnection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ—è¡¨å½’æ¡£&#34;&gt;åˆ—è¡¨å½’æ¡£&lt;/h3&gt;
&lt;p&gt;å¦‚åœ¨ä»‹ç»ä¸­æåˆ°çš„ï¼Œæˆ‘ä»¬å°†æœ‰ä¸€ä¸ªå•ä¾‹ Golem å·¥ä½œå™¨æ¥å­˜å‚¨å·²å½’æ¡£çš„åˆ—è¡¨ã€‚ç›®å‰ï¼Œæˆ‘ä»¬ä»æœªæ¶‰åŠä»»ä½• Golem æˆ– WebAssembly ç‰¹å®šçš„å†…å®¹ï¼Œå¦‚ RPC è°ƒç”¨ï¼Œå› æ­¤æˆ‘ä»¬å…ˆä»¥æœ€ç®€å•çš„æ–¹å¼å®ç°åˆ—è¡¨å½’æ¡£å­˜å‚¨ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æ‰€å†™ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å·²å½’æ¡£çš„åˆ—è¡¨å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œè€Œ Golem ä¼šè´Ÿè´£æŒä¹…åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸å¸Œæœ›é‡ç”¨ç›¸åŒçš„ &lt;code&gt;Document&lt;/code&gt; ç±»å‹ï¼Œå› ä¸ºå®ƒè¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå¯ç¼–è¾‘çš„æ–‡æ¡£ã€‚ç›¸åï¼Œæˆ‘ä»¬åœ¨å½’æ¡£åŒ…ä¸­å®šä¹‰äº†ä¸€äº›æ–°ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| æ–‡æ¡£çš„å”¯ä¸€åç§°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;derive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Eq&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Hash&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| `DocumentName` çš„ `Show` å®ç°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;impl&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Show&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;with&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;output&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logger&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| ä¸€ä¸ªå•ä¸€çš„å·²å½’æ¡£ä¸å¯å˜æ–‡æ¡£ï¼Œå°è£…äº†æ–‡æ¡£çš„åç§°åŠå…¶é¡¹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ArchivedDocument&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;derive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Show&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| å½’æ¡£æ˜¯ä¸€ä¸ªå·²å½’æ¡£æ–‡æ¡£çš„åˆ—è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArchivedDocument&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ª &lt;code&gt;insert&lt;/code&gt; æ–¹æ³•å’Œä¸€ä¸ªè¿­ä»£æ‰€æœ‰å·²å½’æ¡£æ–‡æ¡£çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| å½’æ¡£ä¸€ä¸ªå‘½åæ–‡æ¡£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| è¿­ä»£æ‰€æœ‰å·²å½’æ¡£æ–‡æ¡£
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArchivedDocument&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;documents&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆè¿™éƒ¨åˆ†åï¼Œæˆ‘ä»¬é¦–å…ˆä½¿ç”¨ç®€å•çš„æ–¹æ³•è°ƒç”¨åœ¨åˆ—è¡¨åŒ…ä¸­å®ç°åˆ—è¡¨å½’æ¡£ã€‚ç¨åï¼Œæˆ‘ä»¬å°†ç”¨ Golem çš„ Worker-to-Worker é€šä¿¡æ›¿æ¢å®ƒã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºä¼šæœ‰ä¸€ä¸ªå•ä¾‹å½’æ¡£å·¥ä½œå™¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å½’æ¡£åŒ…ä¸­åˆ›å»ºä¸€ä¸ªé¡¶å±‚çš„ &lt;code&gt;Archive&lt;/code&gt; å®ä¾‹æ¥æ¨¡æ‹Ÿè¿™ä¸€ç‚¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Archive&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¹¶åœ¨ &lt;code&gt;State::archive&lt;/code&gt; æ–¹æ³•ä¸­è°ƒç”¨å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TODO&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åœ¨ &lt;code&gt;State&lt;/code&gt; ä¸­æ²¡æœ‰å­˜å‚¨æ–‡æ¡£çš„åç§°â€”â€”æˆ‘ä»¬å¹¶æ²¡æœ‰æŠŠå®ƒå­˜å‚¨åœ¨ä»»ä½•åœ°æ–¹ã€‚è¿™æ˜¯æ•…æ„çš„ï¼Œæ­£å¦‚æˆ‘ä»¬ä¹‹å‰è®¨è®ºçš„é‚£æ ·ï¼Œå·¥äººçš„åç§°å°†ä½œä¸ºæ–‡æ¡£çš„å”¯ä¸€æ ‡è¯†ç¬¦ã€‚ä¸€æ—¦æˆ‘ä»¬è¿›å…¥ Golem ç‰¹å®šçš„å®ç°é˜¶æ®µï¼Œè·å–å·¥äººçš„åç§°å°†ä»¥ Golem ç‰¹æœ‰çš„æ–¹å¼å®Œæˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‘é€ä¸€å°ç”µå­é‚®ä»¶&#34;&gt;å‘é€ä¸€å°ç”µå­é‚®ä»¶&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»åœ¨ &lt;code&gt;State&lt;/code&gt; ç±»å‹ä¸­å‡†å¤‡å¥½äº†éƒ¨åˆ†ç”µå­é‚®ä»¶å‘é€é€»è¾‘ï¼šå®ƒæœ‰ä¸€ä¸ªæˆªæ­¢æ—¥æœŸå’Œä¸€ä»½æ”¶ä»¶äººåå•ã€‚æˆ‘ä»¬çš„æƒ³æ³•æ˜¯ï¼Œå½“åˆ›å»ºä¸€ä¸ªæ–°çš„åˆ—è¡¨æ—¶ï¼Œæˆ‘ä»¬ä¼šå¯åŠ¨ä¸€ä¸ªç”µå­é‚®ä»¶å‘é€å·¥äººï¼Œå¹¶è®©å®ƒä¸æˆ‘ä»¬çš„ç¼–è¾‘ä¼šè¯å¹¶è¡Œè¿è¡Œï¼Œå½¢æˆä¸€ä¸ªå¾ªç¯ã€‚åœ¨è¿™ä¸ªå¾ªç¯ä¸­ï¼Œé¦–å…ˆæŸ¥è¯¢åˆ—è¡¨ç¼–è¾‘çŠ¶æ€ä¸­çš„æˆªæ­¢æ—¥æœŸå’Œæ”¶ä»¶äººåå•ï¼Œç„¶åå®ƒä¼šä¸€ç›´ä¼‘çœ ç›´åˆ°æŒ‡å®šçš„æˆªæ­¢æ—¥æœŸã€‚å½“å®ƒé†’æ¥æ—¶ï¼ˆ12 å°æ—¶åï¼‰ï¼Œå®ƒå†æ¬¡æŸ¥è¯¢åˆ—è¡¨ï¼Œå¦‚æœå·²ç»è¿‡äº†æˆªæ­¢æ—¥æœŸï¼Œè¯´æ˜åœ¨æ­¤æœŸé—´æ²¡æœ‰è¿›ä¸€æ­¥çš„ç¼–è¾‘æ“ä½œã€‚ç„¶åï¼Œå®ƒä¼šå‘æ”¶ä»¶äººåˆ—è¡¨å‘é€é€šçŸ¥é‚®ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰ï¼Œ&lt;a href=&#34;https://mooncakes.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;mooncakes&lt;/a&gt; ä¸Šè¿˜æ²¡æœ‰ç”¨äºå‘é€ç”µå­é‚®ä»¶æˆ–å‘èµ· HTTP è¯·æ±‚çš„åº“ï¼Œå› æ­¤è¿™éƒ¨åˆ†åŠŸèƒ½æˆ‘ä»¬éœ€è¦è‡ªå·±å®ç°ã€‚æ­¤å¤–ï¼Œåˆ›å»ºå·¥äººå¹¶ä½¿å…¶å¹¶è¡Œè¿è¡Œæ˜¯ Golem ç‰¹æœ‰çš„åŠŸèƒ½ï¼Œå› æ­¤åœ¨ç›®å‰é˜¶æ®µæˆ‘ä»¬ä¸ä¼šä¸ºç”µå­é‚®ä»¶åŒ…å®ç°ä»»ä½•ä¸œè¥¿ã€‚ä¸€æ—¦å…¶ä½™çš„åº”ç”¨ç¨‹åºå·²ä½œä¸º Golem ç»„ä»¶ç¼–è¯‘å®Œæˆï¼Œæˆ‘ä»¬ä¼šå†å›åˆ°è¿™éƒ¨åˆ†å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¼–è¯‘ä¸º-golem-ç»„ä»¶&#34;&gt;ç¼–è¯‘ä¸º Golem ç»„ä»¶&lt;/h3&gt;
&lt;p&gt;ç°åœ¨æ˜¯æ—¶å€™å°è¯•å°†æˆ‘ä»¬çš„ä»£ç ç¼–è¯‘ä¸º Golem ç»„ä»¶äº†â€”â€”è¿™äº›æ˜¯ WebAssembly ç»„ä»¶ï¼ˆä½¿ç”¨&lt;a href=&#34;https://component-model.bytecodealliance.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç»„ä»¶æ¨¡å‹&lt;/a&gt;ï¼‰ï¼Œå¹¶é€šè¿‡ Wasm æ¥å£ç±»å‹ï¼ˆWITï¼‰è¯­è¨€æè¿°çš„ API å¯¼å‡ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç»‘å®š&#34;&gt;ç»‘å®š&lt;/h3&gt;
&lt;p&gt;åœ¨å½“å‰çš„ WASM ç»„ä»¶æ¨¡å‹ä¸­ï¼Œç»„ä»¶æ˜¯æŒ‰ç…§è§„èŒƒä¼˜å…ˆçš„æ–¹å¼å®šä¹‰çš„â€”â€”é¦–å…ˆç¼–å†™æè¿°ç±»å‹å’Œå¯¼å‡ºæ¥å£çš„ WIT æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨ç»‘å®šç”Ÿæˆå™¨ä»ä¸­ç”Ÿæˆç‰¹å®šè¯­è¨€çš„è¿æ¥ä»£ç ã€‚å¹¸è¿çš„æ˜¯ï¼Œ&lt;a href=&#34;https://github.com/bytecodealliance/wit-bindgen&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;wit-bindgen&lt;/code&gt; å·¥å…·&lt;/a&gt;å·²ç»æ”¯æŒ MoonBitï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é¦–å…ˆå®‰è£…æœ€æ–°ç‰ˆæœ¬ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cargo install wit-bindgen-cli
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼ŒGolem çš„æ–‡æ¡£æ¨èä½¿ç”¨ä¸€ä¸ªè¾ƒæ—§çš„ç‰¹å®šç‰ˆæœ¬çš„ &lt;code&gt;wit-bindgen&lt;/code&gt;ï¼Œä½†è¯¥ç‰ˆæœ¬è¿˜ä¸æ”¯æŒ MoonBitã€‚æ–°ç‰ˆæœ¬åº”è¯¥å¯ä»¥å¾ˆå¥½åœ°å·¥ä½œï¼Œä½† Golem çš„ç¤ºä¾‹ä»£ç å¹¶æ²¡æœ‰åœ¨è¿™ä¸ªç‰ˆæœ¬ä¸Šè¿›è¡Œè¿‡æµ‹è¯•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†é‡ç”¨ä¸º Golem 1.0 æ¼”ç¤ºæ‰€åˆ›å»ºçš„ WIT å®šä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºåˆ—è¡¨ç»„ä»¶ï¼Œå®ƒå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;demo&lt;/span&gt;:&lt;span class=&#34;nc&#34;&gt;lst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;record&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;: &lt;span class=&#34;kt&#34;&gt;u64&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;record&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;variant&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;change&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;added&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deleted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;inserted&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;params&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;delete&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;after&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;change&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connect&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;tuple&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;disconnect&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;editors&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;is&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;kt&#34;&gt;bool&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deadline&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;option&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;u64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lst&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// .. imports to be explained later ..
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™ä¸ªæ¥å£å®šä¹‰å¯¼å‡ºäº†ä¸¤ä¸ª APIâ€”â€”ä¸€ä¸ªæ˜¯æˆ‘ä»¬çš„åˆ—è¡¨ç¼–è¾‘å™¨çš„å…¬å…± APIï¼Œéå¸¸ç±»ä¼¼äºæˆ‘ä»¬å·²ç»ä¸º &lt;code&gt;State&lt;/code&gt; ç±»å‹å®ç°çš„æ–¹æ³•ã€‚å¦ä¸€ä¸ªæ˜¯ä¸€ä¸ªå†…éƒ¨ APIï¼Œç”¨äºç”µå­é‚®ä»¶ç»„ä»¶æŸ¥è¯¢æˆªæ­¢æ—¥æœŸå’Œæ”¶ä»¶äººï¼Œå¦‚å‰æ‰€è¿°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬åœ¨å…¬å…± API ä¸­ä½¿ç”¨å­—ç¬¦ä¸²ä½œä¸ºé”™è¯¯ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå½’æ¡£ç»„ä»¶ï¼Œæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªæ›´ç®€å•çš„æ¥å£ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;demo&lt;/span&gt;:&lt;span class=&#34;nc&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;record&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;store&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// .. å¯¼å…¥ç¨åä¼šè§£é‡Š ..
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œå¯¹äºç”µå­é‚®ä»¶ç»„ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;package&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;demo&lt;/span&gt;:&lt;span class=&#34;nc&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;golem&lt;/span&gt;:&lt;span class=&#34;nc&#34;&gt;rpc&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;types&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.1.0.&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;func&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;uri&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// .. å¯¼å…¥ç¨åä¼šè§£é‡Š ..
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† Golem ç‰¹æœ‰çš„ç±»å‹ï¼š&lt;code&gt;uri&lt;/code&gt;ã€‚è¿™æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºç”µå­é‚®ä»¶å·¥äººéœ€è¦è°ƒç”¨å®ƒæ‰€ä»ä¸­ç”Ÿæˆçš„ç‰¹å®šåˆ—è¡¨å·¥äººã€‚å…·ä½“ç»†èŠ‚ç¨åä¼šè§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº› WIT å®šä¹‰éœ€è¦æ”¾åœ¨æ¯ä¸ªåŒ…çš„ &lt;code&gt;wit&lt;/code&gt; ç›®å½•ä¸­ï¼Œä¾èµ–é¡¹æ”¾åœ¨ &lt;code&gt;wit/deps&lt;/code&gt; çš„å­ç›®å½•ä¸­ã€‚å¯ä»¥å‚è€ƒ&lt;a href=&#34;https://github.com/vigoo/golem-moonbit-example&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä»“åº“&lt;/a&gt;ä¸­çš„ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä»å®šä¹‰ä¸€ä¸ªå•ä¸€çš„ MoonBit æ¨¡å—å¼€å§‹ï¼ˆé€šè¿‡æ ¹ç›®å½•ä¸­çš„ &lt;code&gt;moon.mod.json&lt;/code&gt; æ ‡è¯†ï¼‰ï¼Œå¹¶ä»…å°† &lt;code&gt;list&lt;/code&gt;ã€&lt;code&gt;email&lt;/code&gt; å’Œ &lt;code&gt;archive&lt;/code&gt; åˆ›å»ºä¸ºå†…éƒ¨åŒ…ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›æ›´æ”¹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªæˆ‘ä»¬æƒ³è¦ç¼–è¯‘æˆç‹¬ç«‹ Golem ç»„ä»¶çš„ä»£ç å—åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„æ¨¡å—ã€‚é€šè¿‡åœ¨æ¯ä¸ªå­ç›®å½•ä¸­è¿è¡Œ &lt;code&gt;wit-bindgen&lt;/code&gt;ï¼ˆå¦‚ä¸‹æ‰€ç¤ºï¼‰ï¼Œå®ƒå®é™…ä¸Šä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆæ¨¡å—å®šä¹‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç¨å¾®é‡ç»„ä¸€ä¸‹ç›®å½•ç»“æ„ï¼Œå°† &lt;code&gt;src/archive&lt;/code&gt; ç§»åˆ° &lt;code&gt;archive&lt;/code&gt; ç­‰ï¼Œå¹¶å°†ä¹‹å‰ç¼–å†™çš„æºä»£ç ç§»åˆ° &lt;code&gt;archive/src&lt;/code&gt;ã€‚è¿™æ ·ç”Ÿæˆçš„ç»‘å®šå’Œæˆ‘ä»¬æ‰‹å†™çš„å®ç°å°†å¹¶æ’æ”¾ç½®ã€‚æˆ‘ä»¬è¿˜å¯ä»¥åˆ é™¤é¡¶çº§æ¨¡å—å®šä¹‰çš„ JSON æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œåœ¨æ‰€æœ‰ä¸‰ä¸ªç›®å½•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ç”Ÿæˆç»‘å®šï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wit-bindgen moonbit wit
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œä¸€æ—¦æˆ‘ä»¬å¼€å§‹ä¿®æ”¹ç”Ÿæˆçš„ &lt;code&gt;stub.wit&lt;/code&gt; æ–‡ä»¶ï¼Œå†æ¬¡è¿è¡Œæ­¤å‘½ä»¤å°†ä¼šè¦†ç›–æˆ‘ä»¬çš„æ›´æ”¹ã€‚ä¸ºé¿å…è¿™ç§æƒ…å†µï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wit-bindgen moonbit wit --ignore-stub
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆæ­¤æ­¥éª¤åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;moon build --target wasm
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å°†ä¸ºæˆ‘ä»¬ç¼–è¯‘ä¸€ä¸ªä½äº &lt;code&gt;./target/wasm/release/build/gen/gen.wasm&lt;/code&gt; çš„ WASM æ¨¡å—ã€‚è¿™è¿˜ä¸æ˜¯ä¸€ä¸ª WASM ç»„ä»¶â€”â€”å› æ­¤ä¸èƒ½ç›´æ¥åœ¨ Golem ä¸­ä½¿ç”¨ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨å¦ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…· &lt;a href=&#34;https://github.com/bytecodealliance/wasm-tools&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;wasm-tools&lt;/code&gt;&lt;/a&gt;ï¼Œå°†è¯¥æ¨¡å—è½¬æ¢ä¸ºä¸€ä¸ªè‡ªæè¿°å…¶é«˜çº§å¯¼å‡ºæ¥å£çš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;h3 id=&#34;wit-ä¾èµ–é¡¹&#34;&gt;WIT ä¾èµ–é¡¹&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å°†éœ€è¦ä¾èµ–ä¸€äº› WIT åŒ…ï¼Œå…¶ä¸­ä¸€äº›æ¥è‡ª WASIï¼ˆWebAssembly ç³»ç»Ÿæ¥å£ï¼‰ï¼Œç”¨äºè®¿é—®ç¯å¢ƒå˜é‡å’Œå½“å‰çš„æ—¥æœŸ/æ—¶é—´ï¼Œå¦ä¸€äº›æ¥è‡ª Golemï¼Œä¾›å®ç°å·¥äººä¹‹é—´çš„é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;è·å– Golem æä¾›çš„æ‰€æœ‰ä¾èµ–é¡¹çš„é€‚å½“ç‰ˆæœ¬çš„æœ€ç®€å•æ–¹æ³•æ˜¯ä½¿ç”¨ Golem çš„ &amp;ldquo;all&amp;rdquo; æ‰“åŒ…æ¥å£å’Œ &lt;a href=&#34;https://github.com/bytecodealliance/wit-deps&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;wit-deps&lt;/code&gt;&lt;/a&gt; å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å®‰è£… &lt;code&gt;wit-deps&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cargo install wit-deps-cli
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œåœ¨æˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ª &lt;code&gt;wit&lt;/code&gt; ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª &lt;code&gt;deps.toml&lt;/code&gt; æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-toml&#34; data-lang=&#34;toml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;all&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;https://github.com/golemcloud/golem-wit/archive/main.tar.gz&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å¡«å…… &lt;code&gt;wit/deps&lt;/code&gt; ç›®å½•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;wit-deps update
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å®ç°å¯¼å‡ºåŠŸèƒ½&#34;&gt;å®ç°å¯¼å‡ºåŠŸèƒ½&lt;/h3&gt;
&lt;p&gt;åœ¨è®¾ç½®è¿™ä¸ªç¼–è¯‘é“¾ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å°†ç”Ÿæˆçš„ç»‘å®šä¸æˆ‘ä»¬ç°æœ‰çš„ä»£ç è¿æ¥èµ·æ¥ã€‚æˆ‘ä»¬ä»å½’æ¡£ç»„ä»¶å¼€å§‹ï¼Œå› ä¸ºå®ƒæ˜¯æœ€ç®€å•çš„ã€‚&lt;/p&gt;
&lt;p&gt;ç»‘å®šç”Ÿæˆå™¨åœ¨ &lt;code&gt;archive/gen/interface/demo/archive/api/stub.mbt&lt;/code&gt; ä½ç½®ç”Ÿæˆäº†ä¸€ä¸ª &lt;code&gt;stub.mbt&lt;/code&gt; æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«ä¸¤ä¸ªéœ€è¦å®ç°çš„å¯¼å‡ºå‡½æ•°ã€‚æˆ‘ä»¬åœ¨ä½¿ç”¨ä»£ç ç”Ÿæˆå™¨æ—¶é€šå¸¸ä¼šé‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼šæˆ‘ä»¬åœ¨ WIT ä¸­å®šä¹‰äº† &lt;code&gt;archived-list&lt;/code&gt;ï¼Œå¹¶ä¸”ç»‘å®šç”Ÿæˆå™¨æ ¹æ®å®ƒç”Ÿæˆäº†ä»¥ä¸‹ MoonBit å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// Generated by `wit-bindgen` 0.36.0. DO NOT EDIT!
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ArchivedList&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;derive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æˆ‘ä»¬å·²ç»å®šä¹‰äº†ä¸€ä¸ªéå¸¸ç›¸ä¼¼çš„ç»“æ„ä½“ï¼Œå«åš &lt;code&gt;ArchivedDocument&lt;/code&gt;ï¼å”¯ä¸€çš„åŒºåˆ«æ˜¯ä½¿ç”¨äº† &lt;code&gt;DocumentName&lt;/code&gt; æ–°ç±»å‹ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„ç‰ˆæœ¬æ´¾ç”Ÿäº†ä¸€ä¸ª &lt;code&gt;Show&lt;/code&gt; å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥å†³å®šæ”¾å¼ƒä½¿ç”¨è¿™ä¸ªæ–°ç±»å‹ï¼Œå¹¶åœ¨æˆ‘ä»¬çš„ä¸šåŠ¡é€»è¾‘ä¸­ä½¿ç”¨ç”Ÿæˆçš„ç±»å‹ï¼Œæˆ–è€…æˆ‘ä»¬å¯ä»¥ä¿æŒç”Ÿæˆçš„ç±»å‹ä¸æˆ‘ä»¬çš„å®é™…ä»£ç åˆ†ç¦»ã€‚ï¼ˆè¿™å…¶å®å¹¶ä¸ç‰¹å®šäº MoonBit æˆ– WASM å·¥å…·é“¾ï¼Œåœ¨ä»»ä½•åŸºäºä»£ç ç”Ÿæˆå™¨çš„æ–¹æ³•ä¸­éƒ½ä¼šé‡åˆ°è¿™ä¸ªé—®é¢˜ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä¿æŒç”Ÿæˆçš„ä»£ç ä¸æˆ‘ä»¬å·²ç»ç¼–å†™çš„ä¸šåŠ¡é€»è¾‘åˆ†ç¦»ï¼Œå¹¶å±•ç¤ºå¦‚ä½•å®ç°å¿…è¦çš„è½¬æ¢æ¥å®ç° &lt;code&gt;stub.mbt&lt;/code&gt; æ–‡ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªéœ€è¦å®ç°çš„å¯¼å‡ºå‡½æ•°æ˜¯ &lt;code&gt;store&lt;/code&gt;ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ &lt;code&gt;insert&lt;/code&gt; åœ¨æˆ‘ä»¬çš„å•ä¾‹é¡¶çº§ &lt;code&gt;Archive&lt;/code&gt; ä¸­å®ç°å®ƒï¼Œå°±åƒæˆ‘ä»¬ä¹‹å‰ç›´æ¥å°†å½’æ¡£åŒ…è¿æ¥åˆ°åˆ—è¡¨åŒ…æ—¶åšçš„é‚£æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;insert&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DocumentName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œæˆ‘ä»¬éœ€è¦åœ¨ &lt;code&gt;stub&lt;/code&gt; åŒ…çš„ JSON ä¸­å¯¼å…¥æˆ‘ä»¬çš„ä¸»å½’æ¡£æºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;import&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/archive/ffi&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;ffi&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/archive/src&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;src&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¬¬äºŒä¸ªéœ€è¦å®ç°çš„å‡½æ•°éœ€è¦åœ¨ä¸¤ç§å½’æ¡£æ–‡æ¡£è¡¨ç¤ºä¹‹é—´è¿›è¡Œè½¬æ¢ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ArchivedList&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;archived&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;items&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œä¸ºäº†ä½¿å…¶å·¥ä½œï¼Œæˆ‘ä»¬è¿˜å¿…é¡»å°†ä¹‹å‰å®šä¹‰çš„ &lt;code&gt;ArchivedDocument&lt;/code&gt; ç»“æ„ä½“è®¾ç½®ä¸º &lt;code&gt;pub&lt;/code&gt;ï¼Œå¦åˆ™æˆ‘ä»¬æ— æ³•ä» &lt;code&gt;stub&lt;/code&gt; åŒ…è®¿é—®å®ƒçš„ &lt;code&gt;name&lt;/code&gt; å’Œ &lt;code&gt;items&lt;/code&gt; å­—æ®µã€‚&lt;/p&gt;
&lt;p&gt;ï¼ˆæ³¨ï¼šåœ¨æ’°å†™æœ¬æ–‡æ—¶ï¼Œ&lt;a href=&#34;https://github.com/bytecodealliance/wit-bindgen/pull/1100&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/bytecodealliance/wit-bindgen/pull/1100&lt;/a&gt; å°šæœªåˆå¹¶ï¼Œè€Œè¿™ä¸ªè¡¥ä¸å¯¹äºç»‘å®šç”Ÿæˆå™¨ç”Ÿæˆèƒ½å¤Ÿä¸ Golem çš„ wasm-rpc æ­£å¸¸å·¥ä½œçš„ä»£ç æ˜¯å¿…éœ€çš„ï¼›åœ¨å®ƒåˆå¹¶ä¹‹å‰ï¼Œå¯ä»¥ç¼–è¯‘è¿™ä¸ªåˆ†æ”¯å¹¶ç›´æ¥ä½¿ç”¨ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä»¥åŒæ ·çš„æ–¹å¼åœ¨åˆ—è¡¨æ¨¡å—ä¸­å®ç°ä¸¤ä¸ªç”Ÿæˆçš„å­˜æ ¹ï¼ˆåœ¨ &lt;code&gt;list/gen/interface/demo/lst/api/stub.mbt&lt;/code&gt; å’Œ &lt;code&gt;list/gen/interface/demo/lst/emailQuery/stub.mbt&lt;/code&gt; ä¸­ï¼‰ï¼Œä½¿ç”¨æˆ‘ä»¬ç°æœ‰çš„ &lt;code&gt;State&lt;/code&gt; å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæœ‰è¶£çš„ç»†èŠ‚æ˜¯å¦‚ä½•å°† &lt;code&gt;EditorError&lt;/code&gt; çš„å¤±è´¥æ˜ å°„åˆ° WIT å®šä¹‰ä¸­ä½¿ç”¨çš„å­—ç¬¦ä¸²é”™è¯¯ã€‚é¦–å…ˆæˆ‘ä»¬ä¸º &lt;code&gt;EditorError&lt;/code&gt; å®šä¹‰ä¸€ä¸ª &lt;code&gt;to_string&lt;/code&gt; æ–¹æ³•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;EditorError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;InvalidConnection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Invalid connection ID: \{id._}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;AlreadyArchived&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Document is already archived&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶ååœ¨å­˜æ ¹ä¸­ä½¿ç”¨ &lt;code&gt;?&lt;/code&gt; å’Œ &lt;code&gt;map_err&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Connection&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nb&#34;&gt;Result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_connection_id&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;c&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä½¿ç”¨å®¿ä¸»å‡½æ•°&#34;&gt;ä½¿ç”¨å®¿ä¸»å‡½æ•°&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬ä¹‹å‰å®ç° &lt;code&gt;update_email_properties&lt;/code&gt; å‡½æ•°æ—¶ï¼Œæˆ‘ä»¬æ— æ³•æ­£ç¡®æŸ¥è¯¢å½“å‰æ—¶é—´æ¥è®¡ç®—é€‚å½“çš„æˆªæ­¢æ—¥æœŸã€‚ç°åœ¨æˆ‘ä»¬æ­£åœ¨é¢å‘ Golemï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ WebAssembly ç³»ç»Ÿæ¥å£ï¼ˆWASIï¼‰æ¥è®¿é—®è¯¸å¦‚ç³»ç»Ÿæ—¶é—´ä¹‹ç±»çš„åŠŸèƒ½ã€‚ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å·²å‘å¸ƒçš„ &lt;a href=&#34;https://mooncakes.io/docs/#/yamajik/wasi-bindings/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;wasi-bindings&lt;/code&gt; åŒ…&lt;/a&gt;ï¼Œä½†æ—¢ç„¶æˆ‘ä»¬å·²ç»ä» WIT ç”Ÿæˆç»‘å®šï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘ä»¬è‡ªå·±ç”Ÿæˆçš„ç»‘å®šæ¥å¯¼å…¥å®¿ä¸»å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°† WASI çš„å¢™æ—¶é’Ÿæ¥å£å¯¼å…¥åˆ°æˆ‘ä»¬çš„ WIT ä¸–ç•Œä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;n&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;lst&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;export&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;import&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wasi&lt;/span&gt;:&lt;span class=&#34;nc&#34;&gt;clocks&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wall&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;clock&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2.0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åæˆ‘ä»¬é‡æ–°ç”Ÿæˆç»‘å®šï¼ˆç¡®ä¿ä½¿ç”¨ &lt;code&gt;--ignore-stub&lt;/code&gt;ï¼Œä»¥é¿å…è¦†ç›–æˆ‘ä»¬çš„å­˜æ ¹å®ç°ï¼ï¼‰ï¼Œå¹¶å°†å…¶å¯¼å…¥åˆ°æˆ‘ä»¬çš„ä¸»åŒ…ï¼ˆ&lt;code&gt;src&lt;/code&gt;ï¼‰ä¸­ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;import&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;suiyunonghen/datetime&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/lst/interface/wasi/clocks/wallClock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;wallClock&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™äº›ï¼Œæˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ WASI çš„ &lt;code&gt;now&lt;/code&gt; å‡½æ•°æ¥æŸ¥è¯¢å½“å‰çš„ç³»ç»Ÿæ—¶é—´ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸ºæˆ‘ä»¬ä¹‹å‰ä½¿ç”¨çš„ &lt;code&gt;datetime&lt;/code&gt; æ¨¡å—çš„ &lt;code&gt;DateTime&lt;/code&gt; ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| Queries the WASI wall clock and returns it as a @datetime.DateTime
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;/// Note that DateTime has only millisecond precision
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTime&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wasi_now&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wallClock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wasi_now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nano_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wasi_now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nanoseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTime&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;from_unix_mseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;base_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nano_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;golem-åº”ç”¨æ¸…å•&#34;&gt;Golem åº”ç”¨æ¸…å•&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬å®ç°çš„ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬éœ€è¦å°†ç°æœ‰çš„ä¸¤ä¸ªç»„ä»¶â€”â€”åˆ—è¡¨å’Œå½’æ¡£è¿æ¥èµ·æ¥ï¼Œä½¿å¾—åˆ—è¡¨èƒ½å¤Ÿè¿›è¡Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼ˆRPCï¼‰åˆ°å½’æ¡£ã€‚ä½¿ç”¨ç›¸åŒçš„æŠ€æœ¯ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å®ç°ç¬¬ä¸‰ä¸ªç»„ä»¶â€”â€”ç”µå­é‚®ä»¶ç»„ä»¶ï¼Œå®ƒæ—¢éœ€è¦è¢«åˆ—è¡¨è°ƒç”¨ï¼ˆå¯åŠ¨æ—¶ï¼‰ï¼Œä¹Ÿéœ€è¦å›è°ƒï¼ˆè·å–æˆªæ­¢æ—¥æœŸå’Œæ”¶ä»¶äººæ—¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Golem æä¾›äº†æ”¯æŒè¿™ç§åŠŸèƒ½çš„å·¥å…·ï¼Œä½†åœ¨å°è¯•ä½¿ç”¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å°†é¡¹ç›®è½¬æ¢ä¸ºç”±åº”ç”¨æ¸…å•æè¿°çš„ Golem åº”ç”¨ã€‚è¿™å°†ä½¿æˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨ &lt;code&gt;golem-cli&lt;/code&gt; ç”Ÿæˆå¿…è¦çš„æ–‡ä»¶æ¥è¿›è¡Œå·¥ä½œè€…ä¹‹é—´çš„é€šä¿¡ï¼Œå¹¶ä¸”ä¹Ÿæ›´å®¹æ˜“å°†ç¼–è¯‘åçš„ç»„ä»¶éƒ¨ç½²åˆ° Golemã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ„å»ºæ­¥éª¤&#34;&gt;æ„å»ºæ­¥éª¤&lt;/h3&gt;
&lt;p&gt;è¦å°†å•ä¸ª MoonBit æ¨¡å—æ„å»ºä¸ºä¸€ä¸ª Golem ç»„ä»¶ï¼Œè€Œä¸æ¶‰åŠä»»ä½•å·¥ä½œè€…é—´é€šä¿¡ï¼Œæˆ‘ä»¬éœ€è¦æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ï¼ˆå¯é€‰ï¼‰ä½¿ç”¨ &lt;code&gt;wit-bindgen ... --ignore-stub&lt;/code&gt; é‡æ–°ç”Ÿæˆ WIT ç»‘å®šã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;moon build --target wasm&lt;/code&gt; å°† MoonBit æºä»£ç ç¼–è¯‘ä¸º WASM æ¨¡å—ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;wasm-tools component embed&lt;/code&gt; å°† WIT è§„èŒƒåµŒå…¥åˆ°è‡ªå®šä¹‰çš„ WASM éƒ¨åˆ†ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;wasm-tools component new&lt;/code&gt; å°† WASM æ¨¡å—è½¬æ¢ä¸º WASM ç»„ä»¶ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å½“æˆ‘ä»¬å¼€å§‹ä½¿ç”¨å·¥ä½œè€…é—´é€šä¿¡æ—¶ï¼Œè¿™å°†éœ€è¦æ›´å¤šçš„æ­¥éª¤ï¼Œå› ä¸ºæˆ‘ä»¬å°†ç”Ÿæˆå­˜æ ¹ WIT æ¥å£ï¼Œå¹¶ç¼–è¯‘å’Œé“¾æ¥å¤šä¸ª WASM ç»„ä»¶ã€‚è¿™ä¸ªè¿‡ç¨‹çš„æ—©æœŸç‰ˆæœ¬å·²åœ¨å»å¹´çš„&lt;a href=&#34;https://blog.vigoo.dev/posts/w2w-communication-golem/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ã€ŠGolem ä¸­çš„å·¥ä½œè€…é—´é€šä¿¡ã€‹&lt;/a&gt;åšå®¢æ–‡ç« ä¸­æè¿°è¿‡ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ Golem 1.1 çš„å‘å¸ƒï¼ŒGolem åº”ç”¨æ¸…å•å’Œç›¸åº”çš„ CLI å·¥å…·å¯ä»¥ä¸ºæˆ‘ä»¬è‡ªåŠ¨åŒ–æ‰€æœ‰è¿™äº›æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¸…å•æ¨¡æ¿&#34;&gt;æ¸…å•æ¨¡æ¿&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆåœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ ¹åº”ç”¨æ¸…å•æ–‡ä»¶ &lt;code&gt;golem.yaml&lt;/code&gt;ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è®¾ç½®ä¸€ä¸ªä¸´æ—¶ç›®å½•å’Œä¸€ä¸ªå…±äº«ç›®å½•ï¼Œç”¨äºå­˜æ”¾æˆ‘ä»¬ä¹‹å‰é€šè¿‡ &lt;code&gt;wit-deps&lt;/code&gt; è·å–çš„ WIT ä¾èµ–ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# IDEA çš„æ¶æ„ï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# $schema: https://schema.golem.cloud/app/golem/1.1.0/golem.schema.json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# vscode-yaml çš„æ¶æ„&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# yaml-language-server: $schema=https://schema.golem.cloud/app/golem/1.1.0/golem.schema.json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tempDir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;target/golem-temp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;witDeps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;common-wit/deps&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é€šè¿‡å°†æˆ‘ä»¬ä¹‹å‰çš„ &lt;code&gt;deps.toml&lt;/code&gt; ç§»åŠ¨åˆ° &lt;code&gt;common-wit&lt;/code&gt; ç›®å½•ï¼Œå¹¶åœ¨æ ¹ç›®å½•æ‰§è¡Œ &lt;code&gt;wit-deps update&lt;/code&gt;ï¼Œæˆ‘ä»¬å¯ä»¥å°†æ‰€æœ‰éœ€è¦çš„ WASI å’Œ Golem API å¡«å……åˆ°è¿™ä¸ªä¾èµ–ç›®å½•ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç”¨äºé€šè¿‡ Golem CLI æ„å»º MoonBit ç»„ä»¶çš„æ¨¡æ¿ã€‚åœ¨æ¨¡æ¿ä¸­ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸¤ä¸ªé…ç½®ï¼šä¸€ä¸ªç”¨äºå‘å¸ƒæ„å»ºï¼Œå¦ä¸€ä¸ªç”¨äºè°ƒè¯•æ„å»ºã€‚æœ¬æ–‡ä¸­ä»…å±•ç¤ºå‘å¸ƒæ„å»ºçš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒé¦–å…ˆæŒ‡å®šäº†ä¸€äº›ç›®å½•åç§°ï¼Œå¹¶æŒ‡å®šæœ€ç»ˆçš„ WASM æ–‡ä»¶å°†æ”¾ç½®åœ¨å“ªé‡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;moonbit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;profiles&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sourceWit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;generatedWit&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wit-generated&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;componentWasm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;../target/release/{{ componentName }}.wasm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;linkedWasm&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;../target/release/{{ componentName }}-linked.wasm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™äº›ç›®å½•æ˜¯ç›¸å¯¹äºå„ä¸ªç»„ä»¶å­ç›®å½•ï¼ˆä¾‹å¦‚å½’æ¡£ç»„ä»¶ï¼‰çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œæ‰€è¯´çš„æ˜¯ï¼Œä¸€æ—¦æ‰€æœ‰ç»„ä»¶æ„å»ºå®Œæˆï¼Œå®ƒä»¬éƒ½ä¼šæ”¾ç½®åœ¨æ ¹ç›®å½•çš„ &lt;code&gt;target/release&lt;/code&gt; ç›®å½•ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬æŒ‡å®šæ„å»ºæ­¥éª¤ï¼Œæ­¥éª¤ä¸ä¹‹å‰éƒ¨åˆ†ä¸­æè¿°çš„ç›¸åŒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wit-bindgen moonbit wit-generated --ignore-stub --derive-error --derive-show&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;wit-generated&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;ffi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;interface&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;world&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;moon build --target wasm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wasm-tools component embed wit-generated target/wasm/release/build/gen/gen.wasm -o ../target/release/{{ componentName }}.module.wasm --encoding utf16&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mkdirs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;../target/release&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wasm-tools component new ../target/release/{{ componentName }}.module.wasm -o ../target/release/{{ componentName }}.wasm&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰é¢å¤–çš„ç›®å½•ï¼Œè¿™äº›ç›®å½•å°†åœ¨ &lt;code&gt;golem app clean&lt;/code&gt; å‘½ä»¤ä¸­è¢«æ¸…ç†ï¼Œè¿˜å¯ä»¥å®šä¹‰è‡ªå®šä¹‰å‘½ä»¤ä¾› &lt;code&gt;golem app xxx&lt;/code&gt; æ‰§è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;clean&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;wit-generated&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;customCommands&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;update-deps&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wit-deps update&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dir&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;..&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;regenerate-stubs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;command&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wit-bindgen moonbit wit-generated&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å®Œæˆè¿™äº›é…ç½®åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨å…¶ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ª &lt;code&gt;golem.yaml&lt;/code&gt; æ¥å°†æ–°çš„ MoonBit æ¨¡å—æ·»åŠ åˆ°è¿™ä¸ª Golem é¡¹ç›®ä¸­â€”â€”æ¯”å¦‚ &lt;code&gt;archive/golem.yaml&lt;/code&gt; å’Œ &lt;code&gt;list/golem.yaml&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™äº›å­æ¸…å•ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸Šè¿°å®šä¹‰çš„æ¨¡æ¿ï¼Œå‘Šè¯‰ Golem è¿™æ˜¯ä¸€ä¸ª MoonBit æ¨¡å—ã€‚åœ¨ä¸€ä¸ªåº”ç”¨ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥æ··åˆä½¿ç”¨ä¸åŒè¯­è¨€ç¼–å†™çš„ Golem ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå½’æ¡£ç»„ä»¶çš„æ¸…å•å°†å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# IDEA çš„æ¶æ„ï¼š&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# $schema: https://schema.golem.cloud/app/golem/1.1.0/golem.schema.json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# vscode-yaml çš„æ¶æ„&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# yaml-language-server: $schema=https://schema.golem.cloud/app/golem/1.1.0/golem.schema.json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;moonbit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ„å»ºç»„ä»¶&#34;&gt;æ„å»ºç»„ä»¶&lt;/h3&gt;
&lt;p&gt;é€šè¿‡è¿™ä¸€é…ç½®ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºï¼ˆåŒ…æ‹¬ä¸¤ä¸ªå·²ç»ç¼–å†™çš„ç»„ä»¶ï¼‰å¯ä»¥é€šè¿‡ç®€å•åœ°æ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œç¼–è¯‘ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;golem app build
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æ­¤ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€äº›ç»„ç»‡å·¥ä½œï¼Œå› ä¸º &lt;code&gt;golem app build&lt;/code&gt; ä¼šå¯¹ WIT å®šä¹‰è¿›è¡Œä¸€äº›è½¬æ¢ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¹‹å‰ç¼–å†™çš„å­˜æ ¹æ–‡ä»¶ä½ç½®å·²ç»ä¸æ­£ç¡®ã€‚ä¿®å¤è¿™ä¸ªé—®é¢˜æœ€ç®€å•çš„æ–¹æ³•æ˜¯åˆ é™¤æ‰€æœ‰ç”± &lt;code&gt;wit-bindgen&lt;/code&gt; ç”Ÿæˆçš„ç›®å½•ï¼ˆä½†é¦–å…ˆè¦å¤‡ä»½æ‰‹å†™çš„å­˜æ ¹æ–‡ä»¶ï¼ï¼‰ï¼Œç„¶åå°†å­˜æ ¹æ–‡ä»¶å¤åˆ¶å›æ–°åˆ›å»ºçš„ç›®å½•ä¸­ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä¸ä¼šè¿›ä¸€æ­¥è®¨è®ºè¿™ä¸ªé—®é¢˜ã€‚æœ¬æ–‡çš„åšå®¢ä¼šé€æ­¥ä»‹ç»å¦‚ä½•ä½¿ç”¨ MoonBit æ„å»º Golem åº”ç”¨ï¼Œå¹¶ä¸”åœ¨åæœŸä»‹ç»åº”ç”¨æ¸…å•ï¼Œä½†æ¨èçš„æ–¹æ³•æ˜¯ä»ä¸€å¼€å§‹å°±ä½¿ç”¨åº”ç”¨æ¸…å•ï¼Œè¿™æ ·å°±æ— éœ€åšè¿™äº›ä¿®å¤äº†ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆæ¬¡å°è¯•&#34;&gt;åˆæ¬¡å°è¯•&lt;/h3&gt;
&lt;p&gt;è¿è¡Œæ„å»ºå‘½ä»¤åï¼Œç”Ÿæˆçš„ä¸¤ä¸ª WASM æ–‡ä»¶å·²ç»å¯ä»¥ä¸ Golem ä¸€èµ·ä½¿ç”¨äº†ï¼å°½ç®¡å®ƒä»¬å°šæœªèƒ½å¤Ÿç›¸äº’é€šä¿¡ï¼ˆå› æ­¤å½’æ¡£åŠŸèƒ½è¿˜ä¸å¯ç”¨ï¼‰ï¼Œä½†æˆ‘ä»¬å·²ç»å¯ä»¥ä½¿ç”¨ Golem è¿›è¡Œå°è¯•äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„&lt;a href=&#34;https://github.com/golemcloud/golem/releases/tag/v1.1.0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å•ä¸€å¯æ‰§è¡Œæ–‡ä»¶ Golem&lt;/a&gt; æˆ–ä½¿ç”¨æˆ‘ä»¬çš„æ‰˜ç®¡ Golem Cloud æœ¬åœ°å¯åŠ¨ Golem æœåŠ¡ã€‚ä½¿ç”¨ Golem äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨æœ¬åœ°å¯åŠ¨æœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;golem start -vv
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œä»æˆ‘ä»¬é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œå¯ä»¥ä½¿ç”¨ç›¸åŒçš„å‘½ä»¤ä¸Šä¼ è¿™ä¸¤ä¸ªç¼–è¯‘åçš„ç»„ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem component add --component-name archive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Added new component archive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component URN:     urn:component:bde2da89-75a8-4adf-953f-33b360c978d0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component name:    archive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component version: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component size:    9.35 KiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Created at:        2025-01-03 15:09:05.166785 UTC
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Exports:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:archive-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;get-all&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; list&amp;lt;record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; name: string, items: list&amp;lt;string&amp;gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:archive-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;store&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;name: string, items: list&amp;lt;string&amp;gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥åŠ&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem component add --component-name list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Added new component list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component URN:     urn:component:b6420554-62b5-4902-8994-89c692a937f7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component name:    list
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component version: &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component size:    28.46 KiB
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Created at:        2025-01-03 15:09:09.743733 UTC
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Exports:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;add&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;c: record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, value: string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; -&amp;gt; result&amp;lt;_, string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;archive&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;connect&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;email: string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; -&amp;gt; tuple&amp;lt;record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, list&amp;lt;string&amp;gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;connected-editors&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; list&amp;lt;string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;delete&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;c: record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, value: string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; -&amp;gt; result&amp;lt;_, string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;disconnect&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;c: record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt; -&amp;gt; result&amp;lt;_, string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;get&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; list&amp;lt;string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;insert&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;c: record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;, after: string, value: string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; -&amp;gt; result&amp;lt;_, string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;is-archived&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; bool
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/api.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;poll&lt;span class=&#34;o&#34;&gt;}(&lt;/span&gt;c: record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; id: u64 &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt; -&amp;gt; result&amp;lt;list&amp;lt;variant &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; added&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, deleted&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;string&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt;, inserted&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;record &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt; after: string, value: string &lt;span class=&#34;o&#34;&gt;})&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&amp;gt;, string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/email-query.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;deadline&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; option&amp;lt;u64&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  demo:lst-interface/email-query.&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;recipients&lt;span class=&#34;o&#34;&gt;}()&lt;/span&gt; -&amp;gt; list&amp;lt;string&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡é¦–å…ˆè°ƒç”¨ &lt;code&gt;store&lt;/code&gt; å‡½æ•°ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;get-all&lt;/code&gt; å‡½æ•°ï¼Œä½¿ç”¨ CLI çš„ &lt;code&gt;worker invoke-and-await&lt;/code&gt; å‘½ä»¤æ¥å°è¯•å½’æ¡£ç»„ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --worker urn:worker:bde2da89-75a8-4adf-953f-33b360c978d0/archive --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:archive-interface/api.{store}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;list1&amp;#34;&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;[&amp;#34;x&amp;#34;, &amp;#34;y&amp;#34;, &amp;#34;z&amp;#34;]&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Empty result.
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --worker urn:worker:bde2da89-75a8-4adf-953f-33b360c978d0/archive --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:archive-interface/api.{get-all}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Invocation results in WAVE format:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;[{name: &amp;#34;list1&amp;#34;, items: [&amp;#34;x&amp;#34;, &amp;#34;y&amp;#34;, &amp;#34;z&amp;#34;]}]&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡é¦–å…ˆè°ƒç”¨ &lt;code&gt;store&lt;/code&gt; å‡½æ•°ï¼Œç„¶åè°ƒç”¨ &lt;code&gt;get-all&lt;/code&gt; å‡½æ•°ï¼Œä½¿ç”¨ CLI çš„ &lt;code&gt;worker invoke-and-await&lt;/code&gt; å‘½ä»¤æ¥å°è¯•å½’æ¡£ç»„ä»¶ï¼š&lt;/p&gt;
&lt;p&gt;åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°è¯•åˆ—è¡¨ç»„ä»¶ï¼Œè®°ä½å·¥ä½œè€…çš„åç§°å°±æ˜¯åˆ—è¡¨çš„åç§°ï¼š&lt;/p&gt;
&lt;p&gt;å½“æˆ‘ä»¬å°è¯•è¿è¡Œåˆ—è¡¨æ—¶ï¼Œå‡ºç°äº†é”™è¯¯ï¼ˆå¦‚æœæˆ‘ä»¬ä½¿ç”¨è°ƒè¯•é…ç½®æ–‡ä»¶ - ä½¿ç”¨ &lt;code&gt;--build-profile debug&lt;/code&gt;ï¼Œæˆ‘ä»¬è¿˜ä¼šçœ‹åˆ°ä¸€ä¸ªæ¼‚äº®çš„è°ƒç”¨æ ˆï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Failed to create worker b6420554-62b5-4902-8994-89c692a937f7/list6: Failed to instantiate worker -1/b6420554-62b5-4902-8994-89c692a937f7/list6: error &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; executing at wasm backtrace:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    0: 0x19526 - wit-component:shim!indirect-wasi:clocks/wall-clock@0.2.0-now
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    1: 0x414b - &amp;lt;unknown&amp;gt;!demo/lst/interface/wasi/clocks/wallClock.wasmImportNow
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    2: 0x4165 - &amp;lt;unknown&amp;gt;!demo/lst/interface/wasi/clocks/wallClock.now
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    3: 0x42c1 - &amp;lt;unknown&amp;gt;!demo/lst/src.now
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    4: 0x433d - &amp;lt;unknown&amp;gt;!@demo/lst/src.State::update_email_properties
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    5: 0x440e - &amp;lt;unknown&amp;gt;!@demo/lst/src.State::new
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    6: 0x5d81 - &amp;lt;unknown&amp;gt;!*init*/38
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é—®é¢˜å‡ºåœ¨æˆ‘ä»¬æ­£åœ¨åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ &lt;code&gt;State&lt;/code&gt;ï¼Œå¹¶ä¸”åœ¨å®ƒçš„æ„é€ å‡½æ•°ä¸­å°è¯•è°ƒç”¨ä¸€ä¸ª WASI å‡½æ•°ï¼ˆè·å–å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´ï¼‰ã€‚è¿™ä¸ªæ—¶æœºå¤ªæ—©äº†ï¼›æ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¿®æ”¹ &lt;code&gt;State::new&lt;/code&gt; æ–¹æ³•ï¼Œé¿å…åœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä»»ä½•å®¿ä¸»å‡½æ•°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| åˆ›å»ºä¸€ä¸ªæ–°çš„ç©ºæ–‡æ¡£ç¼–è¾‘çŠ¶æ€
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;State&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;State&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Document&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;connected&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Map&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;last_connection_id&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;ConnectionId&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archived&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_deadline&lt;/span&gt;: &lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;datetime&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;DateTime&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;from_unix_mseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// æ³¨æ„ï¼šä¸èƒ½åœ¨è¿™é‡Œä½¿ç”¨ now()ï¼Œå› ä¸ºå®ƒä¼šåœ¨åˆå§‹åŒ–æ—¶è¿è¡Œï¼ˆç”±äºå…¨å±€ `state` å˜é‡ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_recipients&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;state&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±è§£å†³äº†é—®é¢˜ï¼ç°åœ¨æˆ‘ä»¬å¯ä»¥åˆ›å»ºå¹¶ä½¿ç”¨æˆ‘ä»¬å¯ä»¥å…±åŒç¼–è¾‘çš„åˆ—è¡¨äº†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker start --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Added worker list7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Worker URN:    urn:worker:b6420554-62b5-4902-8994-89c692a937f7/list7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Component URN: urn:component:b6420554-62b5-4902-8994-89c692a937f7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Worker name:   list7
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list7 --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:lst-interface/api.{connect}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;demo@vigoo.dev&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Invocation results in WAVE format:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;({id: 1}, [])&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list7 --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:lst-interface/api.{add}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;{ id: 1}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;a&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Invocation results in WAVE format:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- ok
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list7 --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:lst-interface/api.{add}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;{ id: 1}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;b&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Invocation results in WAVE format:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- ok
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ golem worker invoke-and-await --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list7 --function &lt;span class=&#34;s1&#34;&gt;&amp;#39;demo:lst-interface/api.{connect}&amp;#39;&lt;/span&gt; --arg &lt;span class=&#34;s1&#34;&gt;&amp;#39;&amp;#34;demo2@vigoo.dev&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Invocation results in WAVE format:
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;- &lt;span class=&#34;s1&#34;&gt;&amp;#39;({id: 2}, [&amp;#34;a&amp;#34;, &amp;#34;b&amp;#34;])&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;worker-åˆ°-worker-é€šä¿¡&#34;&gt;Worker åˆ° Worker é€šä¿¡&lt;/h3&gt;
&lt;h4 id=&#34;åˆ—è¡¨è°ƒç”¨å½’æ¡£&#34;&gt;åˆ—è¡¨è°ƒç”¨å½’æ¡£&lt;/h4&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆè¦è®¾ç½®çš„ worker åˆ° worker é€šä¿¡æ˜¯åˆ—è¡¨ç»„ä»¶è°ƒç”¨å½’æ¡£ç»„ä»¶â€”â€”åŸºæœ¬ä¸Šï¼Œå½“æˆ‘ä»¬åœ¨åˆ—è¡¨ä¸­è°ƒç”¨ &lt;code&gt;archive()&lt;/code&gt; æ—¶ï¼Œå®ƒéœ€è¦åœ¨ä¸€ä¸ªå•ä¾‹çš„å½’æ¡£ worker ä¸­è°ƒç”¨ &lt;code&gt;store&lt;/code&gt; å‡½æ•°ï¼Œå¹¶å°†æ•°æ®å‘é€è¿‡å»ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥æ˜¯ç®€å•åœ°åœ¨åˆ—è¡¨çš„åº”ç”¨æ¸…å•ä¸­å£°æ˜è¿™ä¸ªä¾èµ–å…³ç³»ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;components&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;moonbit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;dependencies&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;wasm-rpc&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;target&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æ­¤ä¹‹åè¿è¡Œ &lt;code&gt;golem app build&lt;/code&gt; ä¼šè¿›è¡Œè®¸å¤šæ–°çš„æ„å»ºæ­¥éª¤â€”â€”åŒ…æ‹¬ç”Ÿæˆå’Œç¼–è¯‘ä¸€äº› Rust æºä»£ç ï¼Œè¿™äº›ä»£ç åœ¨ Golem çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­å°†ä¸å†éœ€è¦ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ–‡ä¸­è¯¦ç»†è®¨è®ºä¸º worker åˆ° worker é€šä¿¡ç”Ÿæˆçš„å†…å®¹â€”â€”é‡è¦çš„æ˜¯ï¼Œåœ¨åšå‡ºè¿™ä¸ªä¿®æ”¹å¹¶è¿è¡Œä¸€æ¬¡æ„å»ºåï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ—è¡¨ç»„ä»¶çš„ MoonBit åŒ…ä¸­å¯¼å…¥æˆ‘ä»¬å½’æ¡£ç»„ä»¶ç”Ÿæˆçš„ stubï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nt&#34;&gt;&amp;#34;import&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;s2&#34;&gt;&amp;#34;suiyunonghen/datetime&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/lst/interface/wasi/clocks/wallClock&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;wallClock&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/lst/interface/demo/archive_stub/stubArchive&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;stubArchive&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/lst/interface/golem/rpc/types&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;rpcTypes&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°æˆ‘ä»¬çš„å½’æ¡£å‡½æ•°ä¸­ï¼Œç”¨æ¥è°ƒç”¨è¿œç¨‹ workerï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive_component_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;bde2da89-75a8-4adf-953f-33b360c978d0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TODO
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stubArchive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Api&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;urn:worker:\{archive_component_id}/archive&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;TODO&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// TODO
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blocking_store&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;document&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;());&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ç¬¬ 2 è¡Œï¼Œæˆ‘ä»¬é€šè¿‡ä½¿ç”¨ç»„ä»¶ ID å’Œ worker åç§°æ¥æ„å»ºè¿œç¨‹æ¥å£ï¼ˆåœ¨ Golem çš„ä¸‹ä¸€ä¸ªç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨ç»„ä»¶åç§°å°†ä½¿è¿™ä¸ªè¿‡ç¨‹æ›´åŠ ç®€åŒ–ï¼‰ã€‚åœ¨ç¬¬ 5 è¡Œï¼Œæˆ‘ä»¬è°ƒç”¨è¿œç¨‹çš„ &lt;code&gt;store&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œç¼ºå°‘ä¸¤ä»¶äº‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æˆ‘ä»¬ä¸åº”è¯¥ç¡¬ç¼–ç å½’æ¡£ç»„ä»¶çš„ IDï¼Œå› ä¸ºå®ƒæ˜¯åœ¨ç»„ä»¶é¦–æ¬¡ä¸Šä¼ åˆ° Golem æ—¶è‡ªåŠ¨ç”Ÿæˆçš„ï¼›&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬è‡ªå·±çš„ worker åç§°ï¼Œå®ƒå°†ä½œä¸ºåˆ—è¡¨çš„åç§°ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è¿™ä¸¤è€…çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ç¯å¢ƒå˜é‡â€”â€”Golem ä¼šè‡ªåŠ¨å°† &lt;code&gt;GOLEM_WORKER_NAME&lt;/code&gt; ç¯å¢ƒå˜é‡è®¾ç½®ä¸º worker çš„åç§°ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰ç¯å¢ƒå˜é‡æ‰‹åŠ¨æä¾›å€¼ç»™ workerã€‚è¿™ä½¿å¾—æˆ‘ä»¬å¯ä»¥ä»å¤–éƒ¨æ³¨å…¥ç»„ä»¶ IDï¼ˆç›´åˆ° Golem 1.2 ç‰ˆæœ¬æ·»åŠ äº†æ›´å¤æ‚çš„é…ç½®åŠŸèƒ½ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»çœ‹åˆ°å¦‚ä½•ä½¿ç”¨ WASI æŸ¥è¯¢å½“å‰çš„æ—¥æœŸ/æ—¶é—´ï¼›æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ª WASI æ¥å£æ¥è·å–ç¯å¢ƒå˜é‡ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å†æ¬¡å°†ä¸€ä¸ªå¯¼å…¥æ·»åŠ åˆ°æˆ‘ä»¬çš„ WIT æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;err&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;wasi:cli/environment@&lt;/span&gt;&lt;span class=&#34;mf&#34;&gt;0.2&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åè¿è¡Œ &lt;code&gt;golem app build&lt;/code&gt; ä»¥é‡æ–°ç”Ÿæˆç»‘å®šï¼Œå¹¶åœ¨ &lt;code&gt;list/src&lt;/code&gt; çš„ MoonBit åŒ…ä¸­å¯¼å…¥å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/lst/interface/wasi/cli/environment&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;&amp;#34;alias&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;environment&amp;#34;&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ç€ï¼Œæˆ‘ä»¬å®ç°ä¸€ä¸ªå¸®åŠ©å‡½æ•°æ¥è·å–ç‰¹å®šçš„ç¯å¢ƒå˜é‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| ä½¿ç”¨ WASI è·å–ç¯å¢ƒå˜é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find_first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ç”¨è¿™ä¸ªå‡½æ•°æ¥è·å– worker çš„åç§°å’Œå½’æ¡£ç»„ä»¶ IDï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;archive_component_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;ARCHIVE_COMPONENT_ID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;or&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unknown&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GOLEM_WORKER_NAME&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;or&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unknown&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å½“å¯åŠ¨åˆ—è¡¨ worker æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æ˜¾å¼æŒ‡å®š &lt;code&gt;ARCHIVE_COMPONENT_ID&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;golem worker start --component urn:component:b6420554-62b5-4902-8994-89c692a937f7 --worker-name list10 --env &lt;span class=&#34;s2&#34;&gt;&amp;#34;ARCHIVE_COMPONENT_ID=bde2da89-75a8-4adf-953f-33b360c978d0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥å°è¯•è¿æ¥åˆ°åˆ—è¡¨ï¼Œæ·»åŠ ä¸€äº›é¡¹ç›®ï¼Œç„¶åè°ƒç”¨å½’æ¡£ï¼Œå¹¶æœ€ç»ˆåœ¨å½’æ¡£ worker ä¸Šè°ƒç”¨ &lt;code&gt;get-all&lt;/code&gt;â€”â€”æˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¿œç¨‹è¿‡ç¨‹è°ƒç”¨æ˜¯æœ‰æ•ˆçš„ï¼&lt;/p&gt;
&lt;h3 id=&#34;åˆ—è¡¨ä¸ç”µå­é‚®ä»¶ç»„ä»¶é€šä¿¡&#34;&gt;åˆ—è¡¨ä¸ç”µå­é‚®ä»¶ç»„ä»¶é€šä¿¡&lt;/h3&gt;
&lt;p&gt;åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬è¦å®ç°çš„ç¬¬ä¸‰ä¸ªç»„ä»¶æ˜¯è´Ÿè´£åœ¨æŸä¸ªæˆªæ­¢æ—¥æœŸåå‘é€ç”µå­é‚®ä»¶çš„ç»„ä»¶ã€‚è®¾ç½®ç»„ä»¶å’Œ worker-to-worker é€šä¿¡ä¸å‰é¢æ¼”ç¤ºçš„æ–¹å¼å®Œå…¨ç›¸åŒã€‚åº”ç”¨æ¸…å•æ”¯æŒå¾ªç¯ä¾èµ–ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŒ‡å®šåˆ—è¡¨ä¾èµ–äºç”µå­é‚®ä»¶ï¼ˆé€šè¿‡ &lt;code&gt;wasm-rpc&lt;/code&gt;ï¼‰ï¼ŒåŒæ—¶ç”µå­é‚®ä»¶ä¹Ÿä¾èµ–äºåˆ—è¡¨ï¼ˆåŒæ ·é€šè¿‡ &lt;code&gt;wasm-rpc&lt;/code&gt;ï¼‰ã€‚æˆ‘ä»¬éœ€è¦åœ¨ä¸¤ä¸ªæ–¹å‘ä¸Šè¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç­‰å¾…æˆªæ­¢æ—¥æœŸï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ WASI å•è°ƒæ—¶é’Ÿæ¥å£çš„ &lt;code&gt;subscribe-instant&lt;/code&gt; å‡½æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ &lt;code&gt;send-email&lt;/code&gt; å‡½æ•°çš„ MoonBit å®ç°ï¼ˆæˆ‘ä»¬å·²åœ¨ &lt;code&gt;email.wit&lt;/code&gt; æ–‡ä»¶ä¸­å®šä¹‰è¯¥å‡½æ•°ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| å­˜å‚¨ç”µå­é‚®ä»¶å‘é€è€…çš„é…ç½®ä¿¡æ¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list_worker_urn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| æ‰§è¡Œå‘é€ç”µå­é‚®ä»¶çš„å¾ªç¯
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;pub&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_deadline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;epoch_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;wallClock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;seconds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;+&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;nanoseconds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_uint64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;duration_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;epoch_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;now_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_int64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;duration_ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;duration_ms&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;reinterpret_as_uint64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_emails&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;continue&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å†æ¬¡ä½¿ç”¨ &lt;code&gt;wallClock&lt;/code&gt; æ¥å£æ¥æŸ¥è¯¢å½“å‰æ—¶é—´ï¼Œå¹¶æ ¹æ®ä»ç›¸å…³åˆ—è¡¨ worker è·å–çš„æˆªæ­¢æ—¥æœŸè®¡ç®—ç­‰å¾…çš„æ—¶é•¿ã€‚&lt;code&gt;get_deadline&lt;/code&gt; å’Œ &lt;code&gt;get_recipients&lt;/code&gt; æ–¹æ³•åˆ™æ˜¯åˆ©ç”¨ Golem çš„ worker-to-worker é€šä¿¡è¿›è¡Œçš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| è·å–ä¸åˆ—è¡¨ worker å…³è”çš„å½“å‰æˆªæ­¢æ—¥æœŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_deadline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;UInt64&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stubLst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EmailQuery&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;email_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list_worker_urn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blocking_deadline&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| è·å–ä¸åˆ—è¡¨ worker å…³è”çš„å½“å‰æ”¶ä»¶äººåˆ—è¡¨
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;get_recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stubLst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;EmailQuery&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;email_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;list_worker_urn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blocking_recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥æ˜¯ä¼‘çœ ä¸å‘é€ç”µå­é‚®ä»¶çš„éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;h3 id=&#34;1-ä¼‘çœ åŠŸèƒ½&#34;&gt;1. &lt;strong&gt;ä¼‘çœ åŠŸèƒ½&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒç”¨ &lt;code&gt;subscribe-duration&lt;/code&gt; å‡½æ•°æ¥è·å–ä¸€ä¸ªå¯è½®è¯¢å¯¹è±¡ï¼Œå¹¶åœ¨è¯¥å¯¹è±¡ä¸Šè¿›è¡Œè½®è¯¢ï¼Œä»è€Œå®ç°ä¼‘çœ ã€‚ç”±äºæˆ‘ä»¬åªä¼ é€’äº†ä¸€ä¸ªå•ä¸€çš„è½®è¯¢å¯¹è±¡ç»™åˆ—è¡¨ï¼Œå®ƒå°†åœ¨ç›®æ ‡æˆªæ­¢æ—¥æœŸåˆ°è¾¾æ—¶è¿”å›ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| ä¼‘çœ æŒ‡å®šçš„æ¯«ç§’æ•°
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;UInt64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;Unit&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ms&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1000000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pollable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;monotonicClock&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subscribe_duration&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ns&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pollable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-åˆ—è¡¨ä¸­çš„éé˜»å¡è°ƒç”¨&#34;&gt;2. &lt;strong&gt;åˆ—è¡¨ä¸­çš„éé˜»å¡è°ƒç”¨&lt;/strong&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨åˆ—è¡¨çš„ä¸€æ–¹ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›é˜»å¡ï¼Œç›´åˆ°ç”µå­é‚®ä»¶å‘é€å¾ªç¯è¿è¡Œå®Œæˆï¼Œå› ä¸ºè¿™ä¼šé˜»æ­¢åˆ—è¡¨æ¥æ”¶æ–°çš„è¯·æ±‚ã€‚ä¸ºæ­¤ï¼Œç”Ÿæˆçš„ RPC å­˜æ ¹æ”¯æŒè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬åªéœ€ä½¿ç”¨éé˜»å¡ç‰ˆæœ¬çš„ API ç±»å‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;not&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_worker_started&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_component_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;EMAIL_COMPONENT_ID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;or&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unknown&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GOLEM_WORKER_NAME&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;or&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unknown&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;self_component_id&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;GOLEM_COMPONENT_ID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;or&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;unknown&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stubEmail&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Api&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;urn:worker:\{email_component_id}:\{name}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;api&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;({&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;urn:worker:\{self_component_id}:\{name}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_worker_started&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å‘é€ç”µå­é‚®ä»¶&#34;&gt;å‘é€ç”µå­é‚®ä»¶&lt;/h2&gt;
&lt;p&gt;å‘é€å®é™…ç”µå­é‚®ä»¶ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸º MoonBit ç”Ÿæ€ç³»ç»Ÿä¸­ç›®å‰æ²¡æœ‰ HTTP å®¢æˆ·ç«¯åº“ã€‚ä½† Golem å®ç°äº† WASI HTTP æ¥å£ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡ WIT å¯¼å…¥ WASI HTTPï¼Œç”Ÿæˆç»‘å®šï¼Œç„¶åä½¿ç”¨è¿™äº›ç»‘å®šä» MoonBit ä»£ç ä¸­å‘ç¬¬ä¸‰æ–¹æä¾›å•†å‘é€ç”µå­é‚®ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ &lt;a href=&#34;https://sendgrid.com/en-us&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SendGrid&lt;/a&gt; ä½œä¸ºç”µå­é‚®ä»¶æœåŠ¡æä¾›å•†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å‘ &lt;code&gt;https://api.sendgrid.com/v3/mail/send&lt;/code&gt; å‘é€ä¸€ä¸ª HTTP POST è¯·æ±‚ï¼Œå¹¶é™„ä¸Šå·²é…ç½®çš„æˆæƒå¤´å’Œæè¿°ç”µå­é‚®ä»¶å‘é€è¯·æ±‚çš„ JSON æ­£æ–‡ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å®šä¹‰ä¸€äº›å¸¸é‡å’Œå‡½æ•°ï¼Œç”¨äºç»„è£…è¯·æ±‚çš„å„ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;AUTHORITY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;api.sendgrid.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;const&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/v3/mail/send&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;é‚®ä»¶æ­£æ–‡é‡‡ç”¨ JSON æ ¼å¼ï¼Œå¯ä»¥ä½¿ç”¨ MoonBit å†…å»ºçš„ JSON å­—é¢é‡åŠŸèƒ½æ„å»ºã€‚ç„¶è€Œï¼Œåœ¨ WASI HTTP æ¥å£ä¸­ï¼Œæˆ‘ä»¬å¿…é¡»å°†å…¶å†™å‡ºä¸ºå­—èŠ‚æ•°ç»„ã€‚MoonBit å­—ç¬¦ä¸²æ˜¯ UTF-16 ç¼–ç çš„ï¼Œè€Œ SendGrid éœ€è¦ UTF-8 ç¼–ç çš„è´Ÿè½½ã€‚å› æ­¤æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªç®€å•çš„å‡½æ•°ï¼Œå½“å­—ç¬¦ä¸²ä¸­åŒ…å«é ASCII å­—ç¬¦æ—¶ï¼ŒæŠ›å‡ºé”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| å¦‚æœå­—ç¬¦ä¸²ä¸­åŒ…å«é ASCII å­—ç¬¦ï¼Œåˆ™å°†å…¶è½¬æ¢ä¸º ASCII å­—èŠ‚æ•°ç»„ï¼Œå¦åˆ™å¤±è´¥
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;string_to_ascii&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;what&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;FixedArray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;FixedArray&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;makei&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(),&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;sa&#34;&gt;b&lt;/span&gt;&lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;in&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;256&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_int&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;The \{what} contains non-ASCII characters&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;result&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥æ„å»ºè¯·æ±‚è´Ÿè½½ï¼Œå¹¶ä»ç¯å¢ƒå˜é‡ä¸­è¯»å– SendGrid API å¯†é’¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;///| æ„å»º SendGrid å‘é€é‚®ä»¶çš„ JSON æ­£æ–‡ï¼Œå¹¶å°†å…¶è½¬æ¢ä¸º ASCII å­—èŠ‚æ•°ç»„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;payload&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;FixedArray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email_addresses&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;email&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_array&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;email&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;demo@vigoo.dev&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;Daniel Vigovszky&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;personalizations&amp;#34;&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;to&amp;#34;&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;email_addresses&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;cc&amp;#34;&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;bcc&amp;#34;&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;from&amp;#34;&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;subject&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;Collaborative list editor warning&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;content&amp;#34;&lt;/span&gt;: &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;text/html&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;value&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;lt;p&amp;gt;The list opened for editing has not been changed in the last 12 hours&amp;lt;/p&amp;gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;},&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;],&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json_str&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to_string&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;string_to_ascii!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;constructed JSON body&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;json_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;///| è·å– SENDGRID_API_KEY ç¯å¢ƒå˜é‡çš„å€¼ï¼Œå¹¶è½¬æ¢ä¸º ASCII å­—èŠ‚æ•°ç»„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;authorization_header&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;-&amp;gt; &lt;span class=&#34;nc&#34;&gt;FixedArray&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Byte&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key_str&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_environment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;iter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;find_first&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;==&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;SENDGRID_API_KEY&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pair&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unwrap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;string_to_ascii!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;provided authorization header via SENDGRID_API_KEY&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;key_str&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ ·å°±å¯ä»¥æ„å»ºå®Œæ•´çš„ç”µå­é‚®ä»¶è¯·æ±‚ï¼Œå¹¶å‘ SendGrid å‘é€é‚®ä»¶äº†ï¼&lt;/p&gt;
&lt;p&gt;ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºç”¨äºå‘é€ HTTP è¯·æ±‚çš„æ•°æ®ç»“æ„ã€‚åœ¨ WASI HTTP ä¸­ï¼Œå‡ºç«™è¯·æ±‚è¢«å»ºæ¨¡ä¸º WIT èµ„æºï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»é€šè¿‡æ„é€ å‡½æ•°æ„å»ºå®ƒä»¬ï¼Œå¹¶è°ƒç”¨å„ç§æ–¹æ³•æ¥è®¾ç½®è¯·æ±‚çš„å±æ€§ã€‚æ‰€æœ‰è¿™äº›æ–¹æ³•éƒ½æœ‰ä¸€ä¸ª &lt;code&gt;Result&lt;/code&gt; ç±»å‹çš„è¿”å›å€¼ï¼Œå› æ­¤æˆ‘ä»¬çš„ä»£ç å°†ä¼šæ¯”è¾ƒå†—é•¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;httpTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Fields&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;fields&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Authorization&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;authorization_header!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è®¾ç½® Authorization å¤´éƒ¨å¤±è´¥: \{error}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;httpTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;OutgoingRequest&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;outgoing_request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_authority&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;AUTHORITY&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è®¾ç½®è¯·æ±‚ authority å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_method&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;httpTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Method&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;Post&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è®¾ç½®è¯·æ±‚æ–¹æ³•å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_path_with_query&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;PATH&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è®¾ç½®è¯·æ±‚è·¯å¾„å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;set_scheme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;httpTypes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Scheme&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;Https&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è®¾ç½®è¯·æ±‚åè®®å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outgoing_body&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;body&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;è·å–è¯·æ±‚ä½“å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outgoing_body&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;write&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;æ‰“å¼€è¯·æ±‚ä½“æµå¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;stream&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;blocking_write_and_flush&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;payload!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å†™å…¥è¯·æ±‚ä½“å¤±è´¥: \{error}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outgoing_body&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;finish&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å…³é—­è¯·æ±‚ä½“å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤æ—¶ï¼Œæˆ‘ä»¬å·²ç»åˆå§‹åŒ–äº† &lt;code&gt;request&lt;/code&gt; å˜é‡ï¼ŒåŒ…å«äº†å‘é€ HTTP è¯·æ±‚æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è°ƒç”¨ &lt;code&gt;handle&lt;/code&gt; å‡½æ•°æ¥å‘èµ· HTTP è¯·æ±‚ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;future_incoming_response&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;outgoingHandler&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;handle&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;request&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;map_err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å‘é€è¯·æ±‚å¤±è´¥: \{error}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;fm&#34;&gt;unwrap_or_error!&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘é€è¯·æ±‚æ˜¯ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼Œæ‰€å¾—åˆ°çš„ç»“æœåªæ˜¯ä¸€ä¸ªå¤„ç†æœªæ¥å€¼çš„å¥æŸ„ï¼Œæˆ‘ä»¬éœ€è¦ä»¥æŸç§æ–¹å¼ç­‰å¾…è¿™ä¸ªç»“æœã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç”±äºæˆ‘ä»¬ä¸éœ€è¦å¹¶è¡Œæ‰§è¡Œå…¶ä»–ä»»åŠ¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ç¼–å†™äº†ä¸€ä¸ªå¾ªç¯ï¼Œç­‰å¾…ç»“æœå¹¶æ£€æŸ¥é”™è¯¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;while&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;future_incoming_response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;200&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;status&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;300&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;else&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;HTTP è¯·æ±‚è¿”å›çŠ¶æ€ç  \{status}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;code&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;HTTP è¯·æ±‚å¤±è´¥ï¼Œé”™è¯¯ä»£ç : \{code}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Some&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;raise&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;HttpClientError&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;HTTP è¯·æ±‚å¤±è´¥&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;None&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pollable&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;future_incoming_response&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;subscribe&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poll&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;([&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pollable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;])&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨è¿™ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¿½ç•¥äº†å“åº”ä½“ï¼Œä½†åœ¨å…¶ä»–åº”ç”¨ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å“åº”æ¥æ‰“å¼€ä¸€ä¸ªè¾“å…¥æµå¹¶ä»ä¸­è¯»å–æ•°æ®å—ã€‚&lt;/p&gt;
&lt;p&gt;è‡³æ­¤ï¼Œæˆ‘ä»¬å·²ç»å®ç°äº†ä½¿ç”¨ Golem æä¾›çš„ WASI HTTP æœ€ç®€å•çš„æ–¹å¼è°ƒç”¨ SendGrid API å‘é€ç”µå­é‚®ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è°ƒè¯•&#34;&gt;è°ƒè¯•&lt;/h2&gt;
&lt;p&gt;å½“ä»¥è°ƒè¯•æ¨¡å¼ç¼–è¯‘æ—¶ï¼ˆä½¿ç”¨ &lt;code&gt;golem app build --build-profile debug&lt;/code&gt;ï¼‰ï¼ŒGolem ä¼šåœ¨ MoonBit ç»„ä»¶å‡ºç°é—®é¢˜æ—¶æ˜¾ç¤ºè¯¦ç»†çš„å †æ ˆè¿½è¸ªã€‚å¦ä¸€ç§è§‚å¯Ÿ worker çš„æœ‰ç”¨æ–¹æ³•æ˜¯ï¼Œåœ¨å…¶ä¸­å†™å…¥æ—¥å¿—ï¼Œå¯ä»¥é€šè¿‡ &lt;code&gt;golem worker connect&lt;/code&gt; æˆ– Golem æ§åˆ¶å°å®æ—¶æŸ¥çœ‹ï¼ˆæˆ–ç¨åæŸ¥è¯¢ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ MoonBit ä¸­ç¼–å†™æ—¥å¿—çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨ WASI æ—¥å¿—æ¥å£ã€‚æˆ‘ä»¬å¯ä»¥åƒå¾€å¸¸ä¸€æ ·åœ¨ WIT æ–‡ä»¶ä¸­å¯¼å…¥å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;import&lt;/span&gt; &lt;span class=&#34;err&#34;&gt;wasi:logging/logging;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åå°†å…¶æ·»åŠ åˆ°æˆ‘ä»¬çš„ MoonBit åŒ…ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-json&#34; data-lang=&#34;json&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;demo/archive/interface/wasi/logging/logging&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥ä¸‹æ¥å¯ä»¥åœ¨åº”ç”¨é€»è¾‘ä¸­å†™å‡ºä¸åŒçº§åˆ«çš„æ—¥å¿—æ¶ˆæ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;bp&#34;&gt;self&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Level&lt;/span&gt;::&lt;span class=&#34;no&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å‘é€ç”µå­é‚®ä»¶åˆ°ä»¥ä¸‹æ”¶ä»¶äºº: \{recipients}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;send_emails&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;recipients&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Ok&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;_&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Level&lt;/span&gt;::&lt;span class=&#34;no&#34;&gt;INFO&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å‘é€ç”µå­é‚®ä»¶æˆåŠŸ&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;error&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;log&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;@&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;logging&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Level&lt;/span&gt;::&lt;span class=&#34;no&#34;&gt;ERROR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;å‘é€ç”µå­é‚®ä»¶å¤±è´¥: \{error}&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;MoonBit æ˜¯ä¸€ç§éå¸¸å¼ºå¤§ä¸”å¯Œæœ‰è¡¨ç°åŠ›çš„æ–°è¯­è¨€ï¼Œçœ‹èµ·æ¥éå¸¸é€‚åˆç”¨äºä¸º Golem å¼€å‘åº”ç”¨ç¨‹åºã€‚ç”Ÿæˆçš„ WASM äºŒè¿›åˆ¶æ–‡ä»¶éå¸¸å°â€”â€”è¿™ä¸ªåº”ç”¨ç¨‹åºåªæœ‰å‡ å KBï¼ˆä»…ä»…å¢åŠ äº†ç”Ÿæˆçš„ Rust å­˜æ ¹ä»£ç ï¼Œä½†è¿™äº›å¾ˆå¿«å°±ä¼šæ¶ˆå¤±ï¼‰ã€‚è™½ç„¶è¯­è¨€ä¸­æœ‰ä¸€äº›åœ°æ–¹æ„Ÿè§‰æœ‰äº›ä¸ä¾¿â€”â€”ä½†å¯èƒ½åªæ˜¯ä¸ªäººå£å‘³é—®é¢˜â€”â€”ä¸»è¦æ˜¯æè¿° MoonBit åŒ…çš„ JSON æ–‡ä»¶ã€åŒ¿åå‡½æ•°è¯­æ³•å’Œå†…ç½®æ ¼å¼åŒ–å™¨çš„ç»„ç»‡æ–¹å¼ã€‚æˆ‘ç›¸ä¿¡è¿™äº›ï¼Œç‰¹åˆ«æ˜¯å·¥å…·é“¾ï¼Œæœªæ¥ä¼šæœ‰å¾ˆå¤§æ”¹è¿›ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº WASM å’Œç»„ä»¶æ¨¡å‹çš„æ”¯æŒä»å¤„äºåˆæœŸé˜¶æ®µâ€”â€”ä½†å·²ç»å¯ä»¥å·¥ä½œã€‚å®ƒéœ€è¦å¾ˆå¤šæ‰‹åŠ¨æ­¥éª¤ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼ŒGolem çš„åº”ç”¨æ¸…å•åŠŸèƒ½å¯ä»¥ä¸ºæˆ‘ä»¬è‡ªåŠ¨åŒ–å¤§éƒ¨åˆ†å·¥ä½œã€‚å°½ç®¡å¦‚æ­¤ï¼Œ&lt;code&gt;wit-bindgen moonbit&lt;/code&gt; ç”Ÿæˆçš„ç›®å½•ç»“æ„åˆšå¼€å§‹æ—¶ç¡®å®è®©äººæ„Ÿåˆ°æœ‰äº›å‹å€’æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¸Œæœ› MoonBit ç”Ÿæ€ç³»ç»Ÿèƒ½åœ¨ä¸ä¹…çš„å°†æ¥å¾—åˆ°ä¸€äº›æœ‰ç”¨çš„åº“ï¼Œä¾‹å¦‚æ–¹ä¾¿çš„ WASI å’Œ WASI HTTP å°è£…ï¼ˆä»¥åŠ Golem ç‰¹å®šçš„å°è£…ï¼‰ã€å­—ç¬¦ä¸²ç¼–ç å·¥å…·ç­‰ã€‚ç”±äºç›®å‰åº“è¿˜ä¸å¤šï¼Œå› æ­¤å¾ˆå®¹æ˜“æ‰¾åˆ°ä¸€äº›æœ‰ç”¨çš„å·¥ä½œå†…å®¹ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>API ç½‘å…³çš„è‡ªæŸ¥æ¸…å•ï¼šä½ çš„ API å‰é—¨æœ‰å¤šåšå›ºï¼Ÿ</title>
      <link>https://cloudnativecn.com/blog/api-gateway-checklist-strength/</link>
      <pubDate>Tue, 29 Oct 2024 17:43:25 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/api-gateway-checklist-strength/</guid>
      <description>&lt;p&gt;æ¯ä¸ª API éƒ½éœ€è¦ä¸€ä¸ªå‰é—¨ï¼Œä¸€ä¸ªè¿æ¥è¯·æ±‚ä¸å“åº”çš„é—¨æˆ·ã€‚è¿™ä¸ªâ€œé—¨â€ä¸ä»…è¦åšå›ºï¼Œèƒ½æ‰¿å—é«˜æµé‡çš„å‹åŠ›ï¼Œæœ€å¥½è¿˜èƒ½è¿‡æ»¤æ‰â€œèšŠè™«â€â€”â€”ä¹Ÿå°±æ˜¯æ½œåœ¨çš„å¨èƒè¡Œä¸ºè€…å’Œ DDoS æ”»å‡»ã€‚åŒæ—¶ï¼Œä¸€äº›é¢å¤–çš„åŠŸèƒ½å¯ä»¥è®©æ•´ä¸ªä½“éªŒæ›´åŠ æ„‰å¿«ã€‚&lt;/p&gt;
&lt;p&gt;API ç½‘å…³ä¾¿æ˜¯ä½  API çš„å‰é—¨ï¼Œå®ƒä¸ä»…ä»…è´Ÿè´£æµé‡çš„è°ƒåº¦ï¼Œè¿˜åŒ…æ‹¬æ‰§è¡Œå®‰å…¨ç­–ç•¥ã€ä¼˜åŒ–æ€§èƒ½ç­‰ä»»åŠ¡ã€‚ç„¶è€Œï¼Œæ¶‰åŠå¤§è§„æ¨¡åŸºç¡€è®¾æ–½çš„å†³ç­–æ€»æ˜¯éš¾ä»¥æŠŠæ¡ï¼Œç‰¹åˆ«æ˜¯å½“ä½ å·²ç»å¼€å§‹æ„å»ºæ–°çš„ APIï¼Œå¯èƒ½å¾ˆéš¾åˆ¤æ–­æ˜¯å¦åœ¨æ­£ç¡®çš„è½¨é“ä¸Šå‰è¡Œã€‚&lt;/p&gt;
&lt;p&gt;å—äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰çš„ &lt;a href=&#34;https://maturitymodel.cncf.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿæˆç†Ÿåº¦æ¨¡å‹&lt;/a&gt; å¯å‘ï¼Œæˆ‘è¯•å›¾å¸®åŠ©ä½ ä»å…¨å±€è§†è§’å‡ºå‘ï¼Œå®¢è§‚è¯„ä¼° API å‰é—¨çš„å½“å‰çŠ¶æ€ï¼Œå¹¶äº†è§£æ¥ä¸‹æ¥çš„ä¼˜åŒ–æ–¹å‘ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åŸºç¡€é˜¶æ®µæ‰“å¥½åœ°åŸº&#34;&gt;åŸºç¡€é˜¶æ®µï¼šæ‰“å¥½åœ°åŸº&lt;/h4&gt;
&lt;p&gt;åœ¨è¿™ä¸ªé˜¶æ®µï¼Œä½ æ­£å¤„äº API ç½‘å…³çš„ MVP æˆ–é¢„ç”Ÿäº§é˜¶æ®µï¼ŒéªŒè¯å·¥å…·å¹¶åˆ†é…å„é¡¹è´£ä»»ï¼Œä»¥ä¾¿æ­£å¼ä¸Šçº¿ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å†³å®š API ç½‘å…³åŸºç¡€æ¶æ„çš„åŸºæœ¬å½¢æ€ï¼ˆå¦‚äº‘æ‰˜ç®¡æˆ–æœ¬åœ°éƒ¨ç½²ï¼‰ï¼Œé€‰æ‹©ç‹¬ç«‹ä»£ç†æˆ–é€šè¿‡ SDK åµŒå…¥ API ç½‘å…³åŠŸèƒ½ï¼Œæˆ–è€…åˆ©ç”¨ Kubernetes åŸç”Ÿç‰¹æ€§å¦‚ Gateway APIã€‚&lt;/li&gt;
&lt;li&gt;å®æ–½å®‰å…¨åŸºæœ¬ç­–ç•¥ï¼Œä»åŸºæœ¬è®¤è¯å¼€å§‹ï¼Œé€æ­¥å‡çº§åˆ° JSON Web Tokensï¼ˆJWTï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è®¾å®šé€Ÿç‡é™åˆ¶å’Œ IP é™åˆ¶ä»¥é˜²æ»¥ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;å®æ–½è´Ÿè½½å‡è¡¡ï¼Œæ¢ç´¢ DDoS ä¿æŠ¤é€‰é¡¹ã€‚&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨ API ç½‘å…³çš„åŠŸèƒ½æ¥æ ¹æ®æµé‡æ¡ä»¶æ‰§è¡Œç‰¹å®šæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;åˆ¶å®š API ç®¡ç†çš„åŸºç¡€æ”¿ç­–ï¼Œå³ä¾¿å½“å‰è¿˜æœªå…·å¤‡æŠ€æœ¯æ¡ä»¶æˆ–ä¸“ä¸šäººå‘˜æ¥æ‰§è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œè¯·éšæ—¶è®°å½•æ¯é¡¹å†³ç­–å’Œå®æ–½å¦‚ä½•å½±å“å¼€å‘å‘¨æœŸã€‚API å¼€å‘äººå‘˜æ˜¯å¦ä»ç„¶èƒ½è‡ªç”±åœ°æ„å»ºï¼ŸDevOpsã€åŸºç¡€è®¾æ–½å’Œå¹³å°å·¥ç¨‹å¸ˆæ˜¯å¦æ‹¥æœ‰é€‚å½“çš„å·¥å…·æ¥ç®¡ç†æ­¤å¹³å°ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å®Œæˆè¿™äº›æ­¥éª¤åï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå…·å¤‡åŸºæœ¬åŠŸèƒ½çš„ API ç½‘å…³ï¼Œèƒ½å¤Ÿé¡ºåˆ©ä»£ç†è¯·æ±‚å¹¶å…·å¤‡åˆæ­¥çš„å®‰å…¨ä¿æŠ¤ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è¿è¡Œé˜¶æ®µæŠ•å…¥ç”Ÿäº§&#34;&gt;è¿è¡Œé˜¶æ®µï¼šæŠ•å…¥ç”Ÿäº§&lt;/h4&gt;
&lt;p&gt;å½“ä½ çš„ MVP å®Œæˆæµ‹è¯•ï¼Œç§»è‡³ç”Ÿäº§ç¯å¢ƒæ—¶ï¼Œé‡ç‚¹æ˜¯é›†æˆã€æ•ˆç‡å’Œä¸ºå®æ—¶ç¯å¢ƒçš„æŒ‘æˆ˜åšå¥½å‡†å¤‡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å°† API ç½‘å…³çš„é…ç½®å’Œéƒ¨ç½²é›†æˆè‡³ CI/CD æµç¨‹ï¼Œè¿›è¡Œå®‰å…¨å’Œæ²»ç†è§„åˆ™çš„é›†æˆæµ‹è¯•ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥ä»£ç å½¢å¼ç®¡ç†æ‰€æœ‰ API ç›¸å…³é…ç½®ï¼Œä»¥ä¾¿è¿›è¡Œç‰ˆæœ¬æ§åˆ¶ã€ä»£ç å®¡æŸ¥å’Œè´¨é‡ä¿è¯ã€‚&lt;/li&gt;
&lt;li&gt;å¼€å§‹åœ¨å¤šåŒºåŸŸã€å¤šäº‘å’Œç§æœ‰äº‘ç¯å¢ƒä¸­æµ‹è¯• API ç½‘å…³ï¼Œä¸ºæœªæ¥æ‰©å±•åšå‡†å¤‡ã€‚&lt;/li&gt;
&lt;li&gt;å°† API ç½‘å…³çš„å®‰å…¨ã€æµ‹è¯•å’Œæ“ä½œä»»åŠ¡æå‰è‡³å¼€å‘å‘¨æœŸä¸­ï¼Œè®© API å¼€å‘äººå‘˜æœ‰æ›´å¤šæ§åˆ¶æƒã€‚&lt;/li&gt;
&lt;li&gt;ä¸º API çš„éƒ¨ç½²å’Œæ“ä½œç¼–å†™è¯¦ç»†çš„æ–‡æ¡£ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ— è®ºä½ å¤„äºæ­¤é˜¶æ®µçš„å“ªä¸€æ­¥ï¼Œéƒ½å°†å—ç›Šäº API ç½‘å…³å¯¹ç”Ÿäº§è´Ÿè½½çš„è‡ªåŠ¨åŒ–ç®¡ç†ï¼Œå¹¶å¯åˆ©ç”¨æ—©æœŸçš„è§‚æµ‹æ•°æ®å¾®è°ƒè¡Œä¸ºã€‚å¦‚æœæ•ˆæœä¸å°½å¦‚äººæ„ï¼Œå¯èƒ½éœ€è¦é‡æ–°è¯„ä¼°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ‰©å±•é˜¶æ®µå‡†å¤‡å¢é•¿&#34;&gt;æ‰©å±•é˜¶æ®µï¼šå‡†å¤‡å¢é•¿&lt;/h4&gt;
&lt;p&gt;æ­¤æ—¶ï¼ŒAPI ç½‘å…³ä¸å†åªæ˜¯ä¸€ä¸ªå…¥å£ï¼Œè€Œæ˜¯ä½ ç®¡ç†æœåŠ¡ã€åŒºåŸŸã€ç”¨æˆ·å’Œé«˜è´Ÿè½½çš„æ ¸å¿ƒå·¥å…·ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ©ç”¨å¤šåŒºåŸŸå’Œå¤šäº‘éƒ¨ç½²çš„ç»éªŒæå‡æ€§èƒ½å’Œå†—ä½™æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ä¸º API ç½‘å…³å’Œ API æœåŠ¡æ„å»ºæˆ–é‡‡ç”¨è‡ªåŠ¨åŒ–æ•…éšœåˆ‡æ¢æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;æ”¶é›†æ›´å¤šå¯è§‚æµ‹æ•°æ®ï¼Œä»¥ä¾¿å°†æµé‡ã€é”™è¯¯ã€è¯·æ±‚å’Œå“åº”çš„è¶‹åŠ¿è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„æ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;åŸºäºå®é™…ä½¿ç”¨æƒ…å†µåˆ¶å®šå’Œå®æ–½é«˜çº§æµé‡ç­–ç•¥ï¼Œå¦‚ç²¾ç»†çš„é€Ÿç‡é™åˆ¶æˆ–ç»†ç²’åº¦è®¿é—®æ§åˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;å®æ–½ç‰ˆæœ¬å’Œå¼ƒç”¨æµç¨‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹ä¸€ä¸ªé˜¶æ®µï¼ŸAPI ç½‘å…³å°†ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œè€Œæ˜¯ä½ å›¢é˜Ÿå¿«é€Ÿã€æ•æ·éƒ¨ç½²çš„æ ¸å¿ƒæ”¯æŸ±ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ”¹å–„é˜¶æ®µå¼ºåŒ–å®‰å…¨ä¸æ²»ç†&#34;&gt;æ”¹å–„é˜¶æ®µï¼šå¼ºåŒ–å®‰å…¨ä¸æ²»ç†&lt;/h4&gt;
&lt;p&gt;è¿™ä¸ªé˜¶æ®µçš„é‡ç‚¹åœ¨äºç²¾ç‚¼ã€‚ä½ çš„ API ç½‘å…³è¶³å¤Ÿçµæ´»å’Œå¯æ‰©å±•ï¼Œä½†è¦ä¿æŒæŒç»­å‘å±•ï¼Œè¿˜éœ€åœ¨ä¸å½±å“å¼€å‘äººå‘˜æ•ˆç‡çš„æƒ…å†µä¸‹å¢åŠ æ§åˆ¶æªæ–½ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é‡‡ç”¨å…è®¸ DevOps å’ŒåŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆé›†ä¸­ç®¡ç†å®‰å…¨çš„å·¥å…·å’Œå·¥ä½œæµï¼ŒåŒæ—¶è®©å¼€å‘äººå‘˜å¯ä»¥é«˜æ•ˆå·¥ä½œã€‚Kubernetes Gateway API æ˜¯ä¸€ä¸ªä¸é”™çš„ä¾‹å­ï¼Œå®ƒåŸºäºè§’è‰²è¿›è¡Œé…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;åˆ†æå¹¶ä¼˜åŒ– API åŸºç¡€è®¾æ–½çš„æ•´ä½“æˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;å®ç°å®æ—¶ç›‘æ§ï¼Œä»¥ä¾¿å‘ API çš„ä¸»è¦ç”¨æˆ·æä¾›æœåŠ¡æ°´å¹³åè®®ï¼ˆSLAï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºå¼€å‘äººå‘˜æä¾›è‡ªåŠ©å¼€å‘ç¯å¢ƒï¼Œä»¥æµ‹è¯• API æˆ–ç½‘å…³çš„å¤æ‚åœºæ™¯æˆ–é‡å¤§å˜æ›´ã€‚&lt;/li&gt;
&lt;li&gt;ç²¾ç®€ API ç½‘å…³çš„å·¥å…·å’Œä¾›åº”å•†ã€‚&lt;/li&gt;
&lt;li&gt;è€ƒè™‘ä½¿ç”¨ GitOps ç­‰æŒç»­éƒ¨ç½²æ–¹å¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å‡ ä¹å·²ç»è¾¾æˆç›®æ ‡ï¼Œä½†ä»éœ€ä¸æ–­åŠªåŠ›ã€‚&lt;/p&gt;
&lt;h4 id=&#34;é€‚åº”é˜¶æ®µå›é¡¾é‡å»ºä¸å†åˆ›æ–°&#34;&gt;é€‚åº”é˜¶æ®µï¼šå›é¡¾ã€é‡å»ºä¸å†åˆ›æ–°&lt;/h4&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œä½ ä¸ä»…è¦åº”å¯¹ API ç½‘å…³çš„ç°çŠ¶ï¼Œè¿˜è¦å‰ç»æ€§åœ°è°ƒæ•´ç­–ç•¥ï¼Œä¿æŒé¢†å…ˆåœ°ä½ã€‚åŸºäºä¸°å¯Œçš„è§‚æµ‹æ•°æ®ä¸æ–­æ”¹è¿›ï¼ŒåŒæ—¶è¿˜æœ‰æ›´å¤šå·¥ä½œè¦åšã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é€šè¿‡ API ç½‘å…³æµ‹è¯•å¥—ä»¶å®ç°è´¨é‡æ§åˆ¶ï¼Œä»¥å‡å°‘ç¼ºé™·å’Œäº‹æ•…ã€‚&lt;/li&gt;
&lt;li&gt;å°†æ‰€æœ‰ API å‘å¸ƒå’Œ API ç½‘å…³é…ç½®æ›´æ”¹è¿ç§»è‡³ GitOps å·¥ä½œæµã€‚&lt;/li&gt;
&lt;li&gt;å¯ç”¨è“ç»¿éƒ¨ç½²æˆ–é‡‘ä¸é›€å‘å¸ƒç­‰é«˜çº§éƒ¨ç½²æŠ€æœ¯ã€‚&lt;/li&gt;
&lt;li&gt;æä¾›å·¥å…·å’ŒåŸ¹è®­ï¼Œè®© API å¼€å‘äººå‘˜ä»å¼€å‘çš„æ—©æœŸé˜¶æ®µä¾¿èƒ½å®ç°å’Œæµ‹è¯•é«˜çº§å®‰å…¨åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºè‡ªåŠ©ç¯å¢ƒï¼Œä½¿å¼€å‘äººå‘˜èƒ½å¤Ÿåœ¨æ—¢å®šçš„å®‰å…¨èŒƒå›´å†…é…ç½®å’Œç®¡ç† API ç½‘å…³ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœä½ å·²å®Œæˆæ¸…å•ä¸­çš„æ‰€æœ‰äº‹é¡¹ï¼Œæ­å–œä½ ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•é€šè¿‡ä¿®å¤ CNCF é¡¹ç›®æ²»ç†é—®é¢˜å®ç°ç¤¾åŒºå…±èµ¢ä¸å•†ä¸šåŒ–</title>
      <link>https://cloudnativecn.com/blog/how-to-fix-cncf-governance-and-create-business/</link>
      <pubDate>Wed, 23 Oct 2024 18:05:24 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/how-to-fix-cncf-governance-and-create-business/</guid>
      <description>&lt;p&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬çš„ OpenEBS é¡¹ç›®è¢«å½’æ¡£äº†ï¼Ÿæˆ‘ä»¬æ˜¯å¦‚ä½•ä¿®å¤å®ƒçš„ï¼Ÿä»¥åŠé€šè¿‡ä¿®å¤å®ƒï¼Œæˆ‘ä»¬å¦‚ä½•åˆ›å»ºäº†ä¸€ä¸ªå¯æŒç»­çš„å•†ä¸šæ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;å½“äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCNCFï¼‰åœ¨ 2024 å¹´ 2 æœˆ&lt;a href=&#34;https://thenewstack.io/openebs-lessons-we-learned-from-open-source/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å½’æ¡£äº†æˆ‘ä»¬çš„ OpenEBS é¡¹ç›®&lt;/a&gt;æ—¶ï¼Œæˆ‘ä»¬é¢ä¸´ä¸¤ä¸ªé€‰æ‹©ï¼šæ”¾å¼ƒé¡¹ç›®ï¼Œæˆ–è€…è§£å†³å‘ç°çš„é—®é¢˜å¹¶é‡æ–°ç”³è¯·è¿›å…¥ CNCF çš„ Sandbox é¡¹ç›®ï¼Œé‡æ–°å¼€å§‹ã€‚é‡æ–°å¼€å§‹æ˜¯æœ€å›°éš¾çš„é€‰æ‹©ï¼Œä½†å¯¹äºæ¯æœˆæœ‰ 25,000 åç”¨æˆ·åŠ å…¥çš„ &lt;a href=&#34;https://thenewstack.io/how-openebs-brings-container-attached-storage-to-kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenEBS&lt;/a&gt; æ¥è¯´ï¼Œè¿™æ˜¯æ­£ç¡®çš„åšæ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ CNCF å½’æ¡£æˆ‘ä»¬é¡¹ç›®çš„ä¸»è¦åŸå› ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•ä¿®å¤é—®é¢˜çš„ï¼Œä»¥åŠé€šè¿‡ä¿®å¤é—®é¢˜ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å®ç°ç›ˆåˆ©çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‰€æœ‰æƒå’Œæ§åˆ¶é—®é¢˜&#34;&gt;æ‰€æœ‰æƒå’Œæ§åˆ¶é—®é¢˜&lt;/h2&gt;
&lt;p&gt;é—®é¢˜çš„æ ¸å¿ƒæ˜¯ä¸€ä¸ªå¸¸è§çš„æ²»ç†é—®é¢˜ã€‚å¤§çº¦ 60% çš„ CNCF é¡¹ç›®éƒ½æœ‰ä¸€ä¸ªä¼ä¸šèµåŠ©æ–¹â€”â€”ä¸€ä¸ªä¸ºé¡¹ç›®æä¾›èµ„é‡‘çš„ç›ˆåˆ©å…¬å¸ã€‚å½“å…¬å¸å°†é¡¹ç›®æèµ ç»™ CNCF æ—¶ï¼Œé¡¹ç›®å°±æˆä¸º CNCF çš„è´¢äº§ï¼ŒèµåŠ©å…¬å¸æ”¾å¼ƒäº†å¯¹é¡¹ç›®çš„æ‰€æœ‰æƒå’Œæ§åˆ¶æƒã€‚&lt;/p&gt;
&lt;p&gt;ä½†åœ¨é¡¹ç›®å°šæœªå»ºç«‹ç¤¾åŒºä¹‹å‰ï¼ŒèµåŠ©å…¬å¸çš„å‘˜å·¥é€šå¸¸ä»åœ¨ä¸ºè¯¥é¡¹ç›®å·¥ä½œã€‚è®¸å¤š CEO è®¤ä¸ºä»–ä»¬ä»ç„¶æ‹¥æœ‰é¡¹ç›®çš„æ‰€æœ‰æƒå’Œæ§åˆ¶æƒã€‚â€œå¦‚æœæˆ‘çš„å‘˜å·¥è¿˜åœ¨å·¥ä½œï¼Œé‚£æˆ‘å°±æ‹¥æœ‰å†³ç­–æƒã€‚â€è¿™ç§æ‰€æœ‰æƒå’Œæ§åˆ¶æƒçš„ç´§å¼ å…³ç³»å¯¼è‡´äº†æˆ‘ä»¬é¡¹ç›®è¢«å½’æ¡£ï¼Œé™¤éæˆ‘ä»¬è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¦åˆ™é—®é¢˜å°†ç»§ç»­å­˜åœ¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é€šè¿‡èµåŠ©-cncf-é¡¹ç›®ç›ˆåˆ©&#34;&gt;é€šè¿‡èµåŠ© CNCF é¡¹ç›®ç›ˆåˆ©&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å‘ CNCF è¯¢é—®äº†å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸€ä¸ªæœ‰ç”¨çš„ CNCF èµ„æºæ˜¯æŠ€æœ¯é¡¾é—®ç»„ï¼ˆTAGï¼‰è´¡çŒ®è€…ç­–ç•¥æ²»ç†å·¥ä½œç»„ã€‚è”åˆä¸»å¸­ &lt;a href=&#34;https://github.com/jberkus&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Josh Berkus&lt;/a&gt; å¦‚æ­¤è§£é‡Šè¿™ä¸ªæ›´å¹¿æ³›çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆï¼šâ€œ&lt;a href=&#34;https://thenewstack.io/20-years-in-open-source-resilience-failure-success/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€æº&lt;/a&gt;çš„å‰ææ˜¯ä½ å¯ä»¥è·å¾—å¤§è§„æ¨¡çš„ç”¨æˆ·é‡‡ç”¨ï¼Œç„¶åä»è¿™äº›é‡‡ç”¨è€…ä¸­çš„ä¸€å°éƒ¨åˆ†è·å–æ”¶å…¥ï¼Œè¿™æ ·çš„æ”¶å…¥ç”šè‡³å¯èƒ½ä¸é”€å”®ä¸“æœ‰è½¯ä»¶ç›¸å½“ç”šè‡³æ›´å¤šã€‚â€&lt;/p&gt;
&lt;p&gt;å½“è½¯ä»¶å¤æ‚ä¸”éš¾ä»¥æ”¯æŒæ—¶ï¼ˆæ¯”å¦‚è®¸å¤š Kubernetes å®‰è£…ï¼‰ï¼Œè¿™ç§æ–¹æ³•æ•ˆæœç‰¹åˆ«å¥½ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº &lt;a href=&#34;https://thenewstack.io/kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes&lt;/a&gt; æ¥è¯´ï¼Œä¸€ç§æˆåŠŸçš„å•†ä¸šåŒ–ç­–ç•¥é€šå¸¸æ¥è‡ªä»¥ä¸‹ä¸‰ç§é€”å¾„ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æä¾›æ”¯æŒå’Œä¸“ä¸šæœåŠ¡&lt;/li&gt;
&lt;li&gt;æä¾›å¸¦æœ‰è¡Œä¸šè®¤è¯æˆ–å¹³å°é›†æˆçš„ä¸“ç”¨å‘è¡Œç‰ˆ&lt;/li&gt;
&lt;li&gt;æä¾›é€‚ç”¨äºå¤§è§„æ¨¡ç”Ÿäº§ç¯å¢ƒçš„é™„åŠ äº§å“ï¼ˆä¾‹å¦‚ç®¡ç†å·¥å…·æˆ–æŠ¥å‘Šå·¥å…·ï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¯¹ Kubernetes æ¥è¯´ï¼Œâ€œå¼€æ”¾æ ¸å¿ƒâ€æ¨¡å¼ä¸å¤ªå¸¸è§ï¼Œå› ä¸ºä½ å¿…é¡»ä¸æ–­å†³å®šå“ªäº›åŠŸèƒ½åº”è¯¥å¼€æ”¾æºç ï¼Œå“ªäº›åŠŸèƒ½åº”è¯¥ä¿ç•™ä¸ºä¸“æœ‰ç‰ˆæœ¬ï¼Œè¿™é‡æ–°å¼•å…¥äº†æ‰€æœ‰æƒå’Œæ§åˆ¶æƒçš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾å¤§å¤šæ•°é‡‡ç”¨è€…ä¸ä¼šä¸ºè½¯ä»¶ä»˜è´¹ã€‚å¦‚æœä»–ä»¬å¿…é¡»ä»˜è´¹ï¼Œä»–ä»¬å¯èƒ½ä¸ä¼šä½¿ç”¨ã€‚è¿™äº›é‡‡ç”¨è€…çš„ç”Ÿæ€ç³»ç»Ÿæœ‰åŠ©äºå¢å¼ºè½¯ä»¶çš„ç¨³å®šæ€§ï¼Œå¹¶ä¸ºå¤§è§„æ¨¡é‡‡ç”¨å¸¦æ¥çš„å¯ä¿¡åº¦æä¾›æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä¼ä¸šå’Œå¤§å‹ç»„ç»‡æ¥è¯´ï¼Œæ”¯ä»˜æ”¯æŒè´¹ç”¨æˆ–ä½¿ç”¨ä¸“ç”¨å‘è¡Œç‰ˆé€šå¸¸æ˜¯ä¸€ä¸ªæœ‰å¸å¼•åŠ›çš„é€‰æ‹©ï¼Œå› ä¸ºè¿™å¯ä»¥ç¼©çŸ­ä¸Šå¸‚æ—¶é—´ï¼Œé™ä½é£é™©ï¼Œè€Œè¿™åªæ˜¯ä»–ä»¬æ•´ä¸ªé¡¹ç›®æˆæœ¬ä¸­çš„ä¸€å°éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›ç­–ç•¥è¢«è¯æ˜æ˜¯æœ‰æ•ˆçš„ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œä¹Ÿæä¾›äº†ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆï¼Œè¯æ˜äº†ç»§ç»­èµåŠ©é¡¹ç›®è€Œä¸æ§åˆ¶å®ƒæ˜¯æœ‰åˆ©å¯å›¾çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å°†æ‰€æœ‰æƒå’Œæ§åˆ¶æƒäº¤ç»™ç¤¾åŒº&#34;&gt;å°†æ‰€æœ‰æƒå’Œæ§åˆ¶æƒäº¤ç»™ç¤¾åŒº&lt;/h2&gt;
&lt;p&gt;ä¸ºèµåŠ©å…¬å¸æ‰¾åˆ°ä¸€ç§ä¸éœ€è¦æ§åˆ¶é¡¹ç›®çš„ç›ˆåˆ©æ–¹æ³•è§£å†³äº†ä¸€åŠçš„é—®é¢˜ã€‚ä½†åœ¨èµåŠ©å…¬å¸ç»§ç»­è´Ÿè´£å¤§éƒ¨åˆ†ç»´æŠ¤äººå‘˜å’Œå·¥ç¨‹å›¢é˜Ÿçš„æƒ…å†µä¸‹ï¼Œæ‰€æœ‰æƒå’Œæ§åˆ¶æƒçš„ç´§å¼ å…³ç³»ä»å°†ç»§ç»­å­˜åœ¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ—¶ï¼ŒKubernetes ç¤¾åŒºå‘æŒ¥äº†è‡³å…³é‡è¦çš„ä½œç”¨ã€‚é€šè¿‡ä»é¡¹ç›®çš„é‡‡ç”¨è€…ç”¨æˆ·ç¾¤ä¸­æ‹›å‹Ÿç»´æŠ¤äººå‘˜å’Œå·¥ç¨‹å¸ˆï¼Œé¡¹ç›®è·å¾—äº†é¢å¤–çš„èµ„æºï¼ŒèµåŠ©å…¬å¸èƒ½å¤Ÿæ˜¾è‘—å‡å°‘æ”¯æŒé¡¹ç›®çš„æˆæœ¬ï¼ˆåŒæ—¶å¯ä»¥å°†éƒ¨åˆ†å·¥ç¨‹å¸ˆè½¬ç§»åˆ°å…¶ä»–é™„åŠ äº§å“ä¸Šï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åŸ¹å…»å’Œç»´æŒä¸€ä¸ªç¤¾åŒºéœ€è¦ä»˜å‡ºåŠªåŠ›ï¼›ä»…ä»…å› ä¸ºé¡¹ç›®å¹¿æ³›é‡‡ç”¨å¹¶ä¸æ„å‘³ç€ä½ ä¼šè‡ªåŠ¨æ‹¥æœ‰ä¸€ä¸ªç¤¾åŒºã€‚æˆ‘ä»¬çš„å›¢é˜Ÿå¿…é¡»åŠªåŠ›åšåˆ°åŒ…å®¹å’Œé€æ˜ã€‚æˆ‘ä»¬éœ€è¦èŠ±æ—¶é—´å¼•å¯¼è´¡çŒ®è€…ã€‚æˆ‘ä»¬è¿˜å¿…é¡»å‚ä¸æ›´å¹¿æ³›çš„ Kubernetes ç¤¾åŒºï¼Œå¸®åŠ©å…¶ä»–äººæˆåŠŸå¼€å‘è‡ªå·±çš„é¡¹ç›®ã€‚æˆ‘ä»¬æ‰åˆšåˆšå¼€å§‹ï¼Œä½†å·²ç»çœ‹åˆ°äº†æˆæ•ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“æœ&#34;&gt;ç»“æœ&lt;/h2&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬çš„é¡¹ç›®ï¼Œæˆ‘ä»¬è°ƒæ•´äº†å•†ä¸šåŒ–ç­–ç•¥ï¼Œç°åœ¨æˆ‘ä»¬æœ‰äº†æ”¯ä»˜æ”¯æŒå’Œä¸“ä¸šæœåŠ¡çš„å®¢æˆ·ã€‚æˆ‘ä»¬æ­£åœ¨å¼€å§‹æ‹›å‹Ÿç»´æŠ¤äººå‘˜å’Œå·¥ç¨‹å¸ˆï¼Œå¹¶ä¸”å‘ç°æœ‰ä¸€ä¸ªå·¨å¤§çš„äººæ‰åº“å¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚&lt;/p&gt;
&lt;p&gt;èµåŠ©å…¬å¸å¯ä»¥å‡å°‘æˆæœ¬ï¼ŒåŒæ—¶çœ‹åˆ°é¡¹ç›®çš„å·¥ç¨‹èƒ½åŠ›å¢åŠ ã€‚é€šè¿‡æ”¾å¼ƒæ§åˆ¶æƒå’Œæ‰€æœ‰æƒï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¾ˆå¤šå›æŠ¥ã€‚å½“æˆ‘ä»¬å®Œæˆæ—¶ï¼Œè¿™å°†çœŸæ­£æˆä¸ºä¸€ä¸ªç¤¾åŒºçš„å…±åŒåŠªåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;Kubernetes çš„åˆ›ç«‹åŸºäºè¿™äº›åŸåˆ™â€”â€”æœªæ¥çš„åŸºç¡€è®¾æ–½ä¸åº”è¯¥è¢«ä»»ä½•äººæ‹¥æœ‰æˆ–æ§åˆ¶ã€‚æˆ‘ä»¬å°†å…±åŒåˆ†äº«è¿™ä¸ªæ‰€æœ‰æƒå’Œæ§åˆ¶æƒã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶ï¼Œè¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå°´å°¬æˆ–ç—›è‹¦ã€‚æœ‰æ—¶ï¼Œä½ çš„é¡¹ç›®ä¼šè¢«å½’æ¡£ï¼Œä½ å¿…é¡»é‡æ–°å¼€å§‹å·¥ä½œã€‚è‡ªç”±è½¯ä»¶ä¸æ˜¯å…è´¹çš„â€”â€”æˆ‘ä»¬å¿…é¡»å…±åŒåŠªåŠ›å¼€å‘è½¯ä»¶ï¼Œå»ºç«‹å›´ç»•å®ƒçš„ç¤¾åŒºï¼Œä¿æŠ¤å®ƒï¼Œæœ‰æ—¶æˆ‘ä»¬ç”šè‡³éœ€è¦ä¿æŠ¤å®ƒä¸å—æˆ‘ä»¬è‡ªå·±çš„å½±å“ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>äº‘åŸç”Ÿå¯¹æ¯”ï¼šIstio Ambient æ¨¡å¼ä¸ Cilium çš„æ‰©å±•æ€§èƒ½åˆ†æ</title>
      <link>https://cloudnativecn.com/blog/ambient-vs-cilium/</link>
      <pubDate>Tue, 22 Oct 2024 10:49:22 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/ambient-vs-cilium/</guid>
      <description>&lt;p&gt;æ½œåœ¨çš„ Istio ç”¨æˆ·ç»å¸¸ä¼šé—®ï¼šâ€œIstio ä¸ Cilium ç›¸æ¯”å¦‚ä½•ï¼Ÿâ€è™½ç„¶ Cilium æœ€åˆä»…æä¾› L3/L4 åŠŸèƒ½ï¼ˆå¦‚ç½‘ç»œç­–ç•¥ï¼‰ï¼Œä½†è¿‘æ¥çš„ç‰ˆæœ¬å¢åŠ äº†åŸºäº Envoy çš„æœåŠ¡ç½‘æ ¼åŠŸèƒ½ä»¥åŠ WireGuard åŠ å¯†ã€‚ä¸ Istio ä¸€æ ·ï¼ŒCilium ä¹Ÿæ˜¯ CNCF è®¤è¯çš„æ¯•ä¸šé¡¹ç›®ï¼Œå¹¶åœ¨ç¤¾åŒºä¸­å­˜åœ¨å¤šå¹´ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡è¡¨é¢ä¸Šçœ‹è¿™ä¸¤ä¸ªé¡¹ç›®æä¾›çš„åŠŸèƒ½ç›¸ä¼¼ï¼Œä½†å®ƒä»¬çš„æ¶æ„å´æœ‰ç€æ˜¾è‘—ä¸åŒï¼Œå°¤å…¶æ˜¯ Cilium ä½¿ç”¨ eBPF å’Œ WireGuard åœ¨å†…æ ¸ä¸­å¤„ç†å’ŒåŠ å¯† L4 æµé‡ï¼Œè€Œ Istio åœ¨ç”¨æˆ·ç©ºé—´é€šè¿‡å…¶ ztunnel ç»„ä»¶å¤„ç† L4 æµé‡ã€‚è¿™äº›å·®å¼‚å¯¼è‡´äº†å…³äº Istio ä¸ Cilium åœ¨å¤§è§„æ¨¡ä¸‹æ€§èƒ½çš„å¹¿æ³›è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡å·²æœ‰å…³äºç§Ÿæˆ·æ¨¡å‹ã€å®‰å…¨åè®®å’ŒåŸºæœ¬æ€§èƒ½çš„æ¯”è¾ƒï¼Œä½†å°šæœªæœ‰å…¨é¢çš„ä¼ä¸šçº§è¯„ä¼°æŠ¥å‘Šã€‚ä¸å…¶å¼ºè°ƒç†è®ºæ€§èƒ½ï¼Œæˆ‘ä»¬å¯¹ Istio çš„ Ambient æ¨¡å¼å’Œ Cilium è¿›è¡Œäº†æµ‹è¯•ï¼Œèšç„¦äºå»¶è¿Ÿã€ååé‡å’Œèµ„æºæ¶ˆè€—ç­‰å…³é”®æŒ‡æ ‡ã€‚é€šè¿‡æ¨¡æ‹Ÿä¸€ä¸ªç¹å¿™çš„ Kubernetes ç¯å¢ƒï¼Œæˆ‘ä»¬æ–½åŠ äº†é«˜è´Ÿè½½åœºæ™¯ï¼Œæœ€åå°† AKS é›†ç¾¤çš„è§„æ¨¡æ‰©å±•åˆ° 1000 ä¸ªèŠ‚ç‚¹ã€11000 ä¸ªæ ¸å¿ƒï¼Œä»¥äº†è§£è¿™äº›é¡¹ç›®åœ¨å¤§è§„æ¨¡ä¸‹çš„è¡¨ç°ã€‚ç»“æœæ˜¾ç¤ºï¼Œä¸¤è€…å„æœ‰éœ€è¦æ”¹è¿›çš„åœ°æ–¹ï¼Œä½† Istio æ˜æ˜¾è¡¨ç°æ›´ä½³ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æµ‹è¯•åœºæ™¯&#34;&gt;æµ‹è¯•åœºæ™¯&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å°† Istio å’Œ Cilium æ¨å‘æé™ï¼Œæˆ‘ä»¬åˆ›å»ºäº† 500 ä¸ªä¸åŒçš„æœåŠ¡ï¼Œæ¯ä¸ªæœåŠ¡æ”¯æŒ 100 ä¸ª Podã€‚æ¯ä¸ªæœåŠ¡ä½äºå•ç‹¬çš„å‘½åç©ºé—´ä¸­ï¼Œä¸”åŒ…å«ä¸€ä¸ª&lt;a href=&#34;https://fortio.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fortio&lt;/a&gt;è´Ÿè½½ç”Ÿæˆå®¢æˆ·ç«¯ã€‚æˆ‘ä»¬å°†å®¢æˆ·ç«¯é™åˆ¶åœ¨ä¸€ä¸ªç”± 100 å° 32 æ ¸æœºå™¨ç»„æˆçš„èŠ‚ç‚¹æ± ä¸­ï¼Œä»¥æ¶ˆé™¤å…±åŒå®šä½çš„å®¢æˆ·ç«¯çš„å¹²æ‰°ï¼Œå¹¶ä¸ºæœåŠ¡åˆ†é…äº†å‰©ä½™çš„ 900 å° 8 æ ¸å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æµ‹è¯•åœºæ™¯&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æµ‹è¯•åœºæ™¯&#34; srcset=&#34;
               /blog/ambient-vs-cilium/scale-scenario_hu13804612610986617828.webp 400w,
               /blog/ambient-vs-cilium/scale-scenario_hu2793493080775659769.webp 760w,
               /blog/ambient-vs-cilium/scale-scenario_hu775628029952840790.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/ambient-vs-cilium/scale-scenario_hu13804612610986617828.webp&#34;
               width=&#34;760&#34;
               height=&#34;598&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æµ‹è¯•åœºæ™¯
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ Istio æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Ambient æ¨¡å¼ï¼Œåœ¨æ¯ä¸ªæœåŠ¡å‘½åç©ºé—´ä¸­éƒ¨ç½²äº†&lt;a href=&#34;https://istio.io/latest/docs/ambient/usage/waypoint/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;waypoint ä»£ç†&lt;/a&gt;ï¼Œå¹¶ä½¿ç”¨é»˜è®¤çš„å®‰è£…å‚æ•°ã€‚ä¸ºäº†ä½¿æµ‹è¯•åœºæ™¯å°½å¯èƒ½ç›¸ä¼¼ï¼Œæˆ‘ä»¬åœ¨ Cilium ä¸­å¯ç”¨äº†å‡ ä¸ªéé»˜è®¤åŠŸèƒ½ï¼ŒåŒ…æ‹¬ WireGuard åŠ å¯†ã€L7 ä»£ç†å’ŒèŠ‚ç‚¹åˆå§‹åŒ–ã€‚æˆ‘ä»¬è¿˜åœ¨æ¯ä¸ªå‘½åç©ºé—´ä¸­åˆ›å»ºäº†ä¸€ä¸ª Cilium ç½‘ç»œç­–ç•¥ï¼Œå¸¦æœ‰åŸºäº HTTP è·¯å¾„çš„è§„åˆ™ã€‚åœ¨ä¸¤ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬é€šè¿‡éšæœºåœ°å°†ä¸€ä¸ªæœåŠ¡æ‰©å±•åˆ° 85 è‡³ 115 ä¸ªå®ä¾‹å¹¶æ¯åˆ†é’Ÿé‡æ–°æ ‡è®°ä¸€ä¸ªå‘½åç©ºé—´ï¼Œç”Ÿæˆäº†å˜åŒ–ã€‚è¦æŸ¥çœ‹æˆ‘ä»¬ä½¿ç”¨çš„ç²¾ç¡®è®¾ç½®å¹¶é‡ç°ç»“æœï¼Œè¯·å‚é˜…&lt;a href=&#34;https://github.com/therealmitchconnors/tools/blob/2384dc26f114300687b21f921581a158f27dc9e1/perf/load/many-svc-scenario/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘çš„ç¬”è®°&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯æ‰©å±•æ€§è¯„åˆ†&#34;&gt;å¯æ‰©å±•æ€§è¯„åˆ†&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¯æ‰©å±•æ€§è¯„åˆ†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¯æ‰©å±•æ€§è¯„åˆ†&#34; srcset=&#34;
               /blog/ambient-vs-cilium/scale-scorecard_hu11511869128938331683.webp 400w,
               /blog/ambient-vs-cilium/scale-scorecard_hu7893995119246714117.webp 760w,
               /blog/ambient-vs-cilium/scale-scorecard_hu15779689091891454627.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/ambient-vs-cilium/scale-scorecard_hu11511869128938331683.webp&#34;
               width=&#34;760&#34;
               height=&#34;426&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¯æ‰©å±•æ€§è¯„åˆ†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Istio èƒ½å¤Ÿä»¥ 20% çš„è¾ƒä½å°¾å»¶è¿Ÿæä¾› 56% æ›´å¤šçš„æŸ¥è¯¢ã€‚Cilium çš„ CPU ä½¿ç”¨ç‡ä½ 30%ï¼Œä½†æˆ‘ä»¬çš„æµ‹é‡å¹¶ä¸åŒ…æ‹¬ Cilium ç”¨äºåŠ å¯†çš„å†…æ ¸æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°èµ„æºä½¿ç”¨æƒ…å†µï¼ŒIstio æ¯æ ¸å¿ƒå¤„ç† 2178 ä¸ªæŸ¥è¯¢ï¼Œè€Œ Cilium åˆ™æ˜¯ 1815 ä¸ªï¼Œæå‡äº† 20%ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cilium å‡é€Ÿï¼š&lt;/strong&gt; Cilium åœ¨é»˜è®¤å®‰è£…å‚æ•°ä¸‹å±•ç¤ºäº†ä»¤äººå°è±¡æ·±åˆ»çš„ä½å»¶è¿Ÿï¼Œä½†å½“å¯ç”¨ Istio çš„åŸºå‡†åŠŸèƒ½ï¼ˆå¦‚ L7 ç­–ç•¥å’ŒåŠ å¯†ï¼‰æ—¶ï¼Œå…¶é€Ÿåº¦å¤§å¹…ä¸‹é™ã€‚æ­¤å¤–ï¼Œå³ä½¿ç½‘æ ¼ä¸­æ²¡æœ‰æµé‡æµåŠ¨ï¼ŒCilium çš„å†…å­˜å’Œ CPU åˆ©ç”¨ç‡ä»ç„¶è¾ƒé«˜ï¼Œè¿™å¯èƒ½ä¼šå½±å“é›†ç¾¤çš„æ•´ä½“ç¨³å®šæ€§å’Œå¯é æ€§ï¼Œå°¤å…¶æ˜¯åœ¨æ‰©å±•æ—¶ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio ç¨³å¥è¡¨ç°ï¼š&lt;/strong&gt; ç›¸æ¯”ä¹‹ä¸‹ï¼ŒIstio çš„ Ambient æ¨¡å¼åœ¨ç¨³å®šæ€§æ–¹é¢å±•ç¤ºäº†å…¶ä¼˜åŠ¿ï¼Œå³ä½¿å¢åŠ äº†åŠ å¯†çš„å¼€é”€ï¼Œä¹Ÿèƒ½ä¿æŒä¸é”™çš„ååé‡ã€‚åœ¨æµ‹è¯•ä¸­ï¼ŒIstio ç¡®å®æ¯” Cilium æ¶ˆè€—äº†æ›´å¤šçš„å†…å­˜å’Œ CPUï¼Œä½†åœ¨æ²¡æœ‰è´Ÿè½½æ—¶å…¶ CPU åˆ©ç”¨ç‡ä¸‹é™åˆ° Cilium çš„ä¸€å°éƒ¨åˆ†ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¹•ååŸå› ä¸ºä½•è¡¨ç°å·®å¼‚&#34;&gt;å¹•ååŸå› ï¼šä¸ºä½•è¡¨ç°å·®å¼‚ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;è¦ç†è§£è¿™äº›æ€§èƒ½å·®å¼‚çš„å…³é”®åœ¨äºå„å·¥å…·çš„æ¶æ„å’Œè®¾è®¡ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Cilium çš„æ§åˆ¶å¹³é¢éš¾é¢˜ï¼š&lt;/strong&gt; Cilium åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œä¸€ä¸ªæ§åˆ¶å¹³é¢å®ä¾‹ï¼Œéšç€é›†ç¾¤æ‰©å±•ï¼Œè¿™å¯¼è‡´ API æœåŠ¡å™¨å‹åŠ›å¢åŠ å’Œé…ç½®å¼€é”€å¢åŠ ã€‚è¿™ç»å¸¸å¯¼è‡´æˆ‘ä»¬çš„ API æœåŠ¡å™¨å´©æºƒï¼Œæ¥ç€ Cilium å˜å¾—ä¸å¯ç”¨ï¼Œæ•´ä¸ªé›†ç¾¤é™·å…¥ä¸å“åº”çŠ¶æ€ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Istio çš„æ•ˆç‡ä¼˜åŠ¿ï¼š&lt;/strong&gt; Istio é€šè¿‡é›†ä¸­æ§åˆ¶å¹³é¢å’ŒåŸºäºèº«ä»½çš„æ–¹å¼ç®€åŒ–äº†é…ç½®ï¼Œå‡å°‘äº† API æœåŠ¡å™¨å’ŒèŠ‚ç‚¹çš„è´Ÿæ‹…ï¼Œå°†å…³é”®èµ„æºç”¨äºå¤„ç†å’Œä¿æŠ¤æµé‡ï¼Œè€Œä¸æ˜¯å¤„ç†é…ç½®ã€‚Istio é€šè¿‡è¿è¡Œå°½å¯èƒ½å¤šçš„ Envoy å®ä¾‹æ¥è¿›ä¸€æ­¥åˆ©ç”¨æœªåœ¨æ§åˆ¶å¹³é¢ä¸­ä½¿ç”¨çš„èµ„æºï¼Œè€Œ Cilium åˆ™é™åˆ¶ä¸ºæ¯ä¸ªèŠ‚ç‚¹å…±äº«ä¸€ä¸ª Envoy å®ä¾‹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æ›´æ·±å…¥æ¢è®¨&#34;&gt;æ›´æ·±å…¥æ¢è®¨&lt;/h3&gt;
&lt;p&gt;è™½ç„¶è¿™ä¸ªé¡¹ç›®çš„ç›®æ ‡æ˜¯æ¯”è¾ƒ Istio å’Œ Cilium çš„å¯æ‰©å±•æ€§ï¼Œä½†ä¸€äº›é™åˆ¶ä½¿å¾—ç›´æ¥æ¯”è¾ƒå˜å¾—å›°éš¾ã€‚&lt;/p&gt;
&lt;h3 id=&#34;l4-ä¸æ€»æ˜¯-l4&#34;&gt;L4 ä¸æ€»æ˜¯ L4&lt;/h3&gt;
&lt;p&gt;å°½ç®¡ Istio å’Œ Cilium éƒ½æä¾› L4 ç­–ç•¥å¼ºåˆ¶ï¼Œä½†å®ƒä»¬çš„ API å’Œå®ç°å­˜åœ¨æ˜¾è‘—å·®å¼‚ã€‚Cilium å®ç°äº† Kubernetes NetworkPolicyï¼Œå®ƒä½¿ç”¨æ ‡ç­¾å’Œå‘½åç©ºé—´æ¥é˜»æ­¢æˆ–å…è®¸ IP åœ°å€çš„è®¿é—®ã€‚Istio æä¾›äº†ä¸€ä¸ª AuthorizationPolicy APIï¼Œå¹¶æ ¹æ®ç­¾ç½²æ¯ä¸ªè¯·æ±‚çš„ TLS èº«ä»½åšå‡ºå…è®¸å’Œæ‹’ç»å†³å®šã€‚å¤§å¤šæ•°æ·±åº¦é˜²å¾¡ç­–ç•¥éœ€è¦åŒæ—¶ä½¿ç”¨ NetworkPolicy å’ŒåŸºäº TLS çš„ç­–ç•¥æ¥å®ç°å…¨é¢çš„å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŠ å¯†çš„å·®å¼‚&#34;&gt;åŠ å¯†çš„å·®å¼‚&lt;/h3&gt;
&lt;p&gt;Cilium æä¾›äº†ç”¨äº FIPS å…¼å®¹åŠ å¯†çš„ IPsecï¼Œä½†å¤§å¤šæ•° Cilium åŠŸèƒ½ï¼ˆå¦‚ L7 ç­–ç•¥å’Œè´Ÿè½½å‡è¡¡ï¼‰ä¸ IPsec ä¸å…¼å®¹ã€‚Cilium åœ¨ä½¿ç”¨ WireGuard åŠ å¯†æ—¶å…·æœ‰æ›´å¥½çš„åŠŸèƒ½å…¼å®¹æ€§ï¼Œä½† WireGuard æ— æ³•åœ¨ FIPS åˆè§„çš„ç¯å¢ƒä¸­ä½¿ç”¨ã€‚å¦ä¸€æ–¹é¢ï¼ŒIstio ä¸¥æ ¼éµå®ˆ TLS åè®®æ ‡å‡†ï¼Œé»˜è®¤æƒ…å†µä¸‹å§‹ç»ˆä½¿ç”¨ FIPS å…¼å®¹çš„ mTLSã€‚&lt;/p&gt;
&lt;h3 id=&#34;éšè—çš„æˆæœ¬&#34;&gt;éšè—çš„æˆæœ¬&lt;/h3&gt;
&lt;p&gt;è™½ç„¶ Istio å®Œå…¨åœ¨ç”¨æˆ·ç©ºé—´ä¸­è¿è¡Œï¼Œä½† Cilium çš„ L4 æ•°æ®å¹³é¢åœ¨ Linux å†…æ ¸ä¸­ä½¿ç”¨ eBPFã€‚Prometheus çš„èµ„æºæ¶ˆè€—æŒ‡æ ‡ä»…æµ‹é‡ç”¨æˆ·ç©ºé—´èµ„æºï¼Œè¿™æ„å‘³ç€ Cilium ä½¿ç”¨çš„æ‰€æœ‰å†…æ ¸èµ„æºåœ¨æ­¤æµ‹è¯•ä¸­éƒ½æœªè®¡å…¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å»ºè®®é€‰æ‹©åˆé€‚çš„å·¥å…·&#34;&gt;å»ºè®®ï¼šé€‰æ‹©åˆé€‚çš„å·¥å…·&lt;/h2&gt;
&lt;p&gt;é‚£ä¹ˆï¼Œæœ€ç»ˆç»“è®ºæ˜¯ä»€ä¹ˆï¼Ÿè¿™å–å†³äºæ‚¨çš„å…·ä½“éœ€æ±‚å’Œä¼˜å…ˆäº‹é¡¹ã€‚å¯¹äºå°å‹é›†ç¾¤ä»¥åŠçº¯ L3/L4 ç”¨ä¾‹ä¸”æ— éœ€åŠ å¯†çš„æƒ…å†µï¼ŒCilium æä¾›äº†ä¸€ä¸ªç»æµé«˜æ•ˆä¸”æ€§èƒ½è‰¯å¥½çš„è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œå¯¹äºå¤§å‹é›†ç¾¤ï¼Œä»¥åŠæ³¨é‡ç¨³å®šæ€§ã€å¯æ‰©å±•æ€§å’Œé«˜çº§åŠŸèƒ½çš„æƒ…å†µï¼ŒIstio çš„ Ambient æ¨¡å¼é…åˆæ›¿ä»£çš„ NetworkPolicy å®ç°æ‰æ˜¯é¦–é€‰ã€‚è®¸å¤šå®¢æˆ·é€‰æ‹©å°† Cilium çš„ L3/L4 åŠŸèƒ½ä¸ Istio çš„ L4/L7 å’ŒåŠ å¯†åŠŸèƒ½ç»“åˆï¼Œä»¥å®ç°æ·±åº¦é˜²å¾¡ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œäº‘åŸç”Ÿç½‘ç»œçš„ä¸–ç•Œåœ¨ä¸æ–­å‘å±•ã€‚å¯†åˆ‡å…³æ³¨ Istio å’Œ Cilium çš„è¿›å±•ï¼Œå®ƒä»¬å°†ç»§ç»­æ”¹è¿›å’Œåº”å¯¹è¿™äº›æŒ‘æˆ˜ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•å°† Istio ä¸ AWS ç§æœ‰è¯ä¹¦é¢å‘æœºæ„ï¼ˆPrivate CAï¼‰æ— ç¼é›†æˆ</title>
      <link>https://cloudnativecn.com/blog/istio-aws-private-ca/</link>
      <pubDate>Tue, 24 Sep 2024 16:19:19 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-aws-private-ca/</guid>
      <description>&lt;p&gt;å½“ç”¨æˆ·å®‰è£… Istio æ—¶ï¼Œé»˜è®¤ä¼šåˆ›å»ºä¸€ä¸ªè¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰ï¼Œå¹¶ä¸” CA è¯ä¹¦æ˜¯è‡ªç­¾åçš„ã€‚ç„¶åï¼ŒCA è¯ä¹¦ç”¨äºç®¡ç†è¿è¡Œåœ¨ Istio æœåŠ¡ç½‘æ ¼ä¸Šçš„åº”ç”¨ç¨‹åºçš„è¯ä¹¦ç”Ÿå‘½å‘¨æœŸã€‚è¿™ä½¿å¾—åœ¨ Istio æœåŠ¡ç½‘æ ¼ä¸Šè¿è¡Œçš„åº”ç”¨ç¨‹åºä¹‹é—´è½»æ¾è®¾ç½®å¼€ç®±å³ç”¨çš„ mTLS é€šä¿¡æˆä¸ºå¯èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;éšç€æˆ‘ä»¬å‘ç”Ÿäº§ç¯å¢ƒçš„å®æ–½è¿ˆè¿›ï¼ŒIstio è¿˜æä¾›äº†ä¸€ä¸ªé€‰é¡¹ï¼Œå¯ä»¥ä½¿ç”¨ä½ è‡ªå·±çš„ CA è¯ä¹¦ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤çš„è‡ªç­¾å CA è¯ä¹¦ã€‚ä¼ä¸šå€¾å‘äºè‡ªåŠ¨åŒ–å…¶å…¬é’¥/ç§é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰ï¼Œä»¥ç¡®ä¿ã€ç®¡ç†å’Œåˆ›å»ºè¯ä¹¦ã€‚ä½œä¸ºä¸€èˆ¬å®è·µï¼Œä¼ä¸šä¼šä½¿ç”¨ç”±å…¶æ ¹è¯ä¹¦æˆ–å…¶ä»–ä¸­é—´è¯ä¹¦ç­¾åçš„ç§æœ‰ CA è¯ä¹¦æ¥è®¾ç½®å…¶æœåŠ¡ç½‘æ ¼çš„è¯ä¹¦é¢å‘æœºæ„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¼—å¤šå¯ç”¨é€‰é¡¹ä¸­ï¼Œ&lt;a href=&#34;https://aws.amazon.com/private-ca/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS ç§æœ‰ CA&lt;/a&gt; æ˜¯ä¸€ä¸ªæ‰˜ç®¡çš„ CAï¼Œå¸®åŠ©ç»„ç»‡ä½¿ç”¨ AWS ä¸­çš„ç§æœ‰è¯ä¹¦æ¥ä¿æŠ¤å…¶åº”ç”¨ç¨‹åºå’Œè®¾å¤‡ã€‚æ­¤å¤–ï¼Œ&lt;a href=&#34;https://cert-manager.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cert Manager&lt;/a&gt; æ˜¯å¦ä¸€ä¸ªæµè¡Œçš„é€‰æ‹©ï¼Œç”¨äºç®€åŒ–è·å–ã€ç»­è®¢å’Œä½¿ç”¨è¿™äº›è¯ä¹¦çš„è¿‡ç¨‹ã€‚Cert Manager å’Œ &lt;a href=&#34;https://github.com/cert-manager/aws-privateca-issuer&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS Private CA issuer&lt;/a&gt; æ’ä»¶é€šå¸¸ä¸€èµ·ä½¿ç”¨ï¼Œä»¥è®¾ç½® Istio æœåŠ¡ç½‘æ ¼çš„è‡ªå®šä¹‰ CAã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§é›†æˆçš„ä¸€äº›ä¸»è¦ä¼˜åŠ¿åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯ä¹¦ç”Ÿå‘½å‘¨æœŸç®¡ç†çš„è‡ªåŠ¨åŒ–&lt;/strong&gt;ï¼Œç¡®ä¿åœ¨è¯ä¹¦åˆ°æœŸå‰ç»­è®¢ï¼Œä»¥é¿å…ä»»ä½•åœæœºæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç§é’¥åŸºç¡€è®¾æ–½çš„æ˜“å®¡è®¡æ€§&lt;/strong&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;é€šè¿‡ Certificate CRD æä¾›çš„çµæ´»é…ç½®é€‰é¡¹&lt;/strong&gt;ï¼Œä»¥æ»¡è¶³æ›´å¹¿æ³›å—ä¼—çš„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æ¶‰åŠçš„ä¸åŒç»„ä»¶çš„å¯è§†åŒ–è¡¨ç¤º&#34;&gt;æ¶‰åŠçš„ä¸åŒç»„ä»¶çš„å¯è§†åŒ–è¡¨ç¤º&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-aws-ç§æœ‰-ca---é›†ç¾¤---aws-iam&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;AWS ç§æœ‰ CA - é›†ç¾¤ - AWS IAM&#34; srcset=&#34;
               /blog/istio-aws-private-ca/f1_hu4180211730236516355.webp 400w,
               /blog/istio-aws-private-ca/f1_hu7688685132295257169.webp 760w,
               /blog/istio-aws-private-ca/f1_hu17202471345317218244.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-aws-private-ca/f1_hu4180211730236516355.webp&#34;
               width=&#34;760&#34;
               height=&#34;603&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      AWS ç§æœ‰ CA - é›†ç¾¤ - AWS IAM
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ä»¥ä¸‹ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†åˆ†äº«å¦‚ä½•ä¸ºä½ çš„ Istio æœåŠ¡ç½‘æ ¼è®¾ç½®è‡ªå®šä¹‰ CA çš„æ­¥éª¤ï¼Œä½¿ç”¨ AWS ç§æœ‰ CA ä½œä¸ºç§é’¥åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®‰è£…-cert-manager&#34;&gt;å®‰è£… Cert Manager&lt;/h2&gt;
&lt;p&gt;Cert Manager ç®€åŒ–äº†è·å–ã€ç»­è®¢å’Œä½¿ç”¨è¯ä¹¦çš„è¿‡ç¨‹ã€‚å®ƒæ”¯æŒä¸åŒ…æ‹¬ AWS ç§æœ‰ CA åœ¨å†…çš„å¹¿æ³›ç§é’¥åŸºç¡€è®¾æ–½çš„é›†æˆã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Helm å®‰è£… Cert Managerã€‚å…¶ä»–å®‰è£…é€‰é¡¹è¯·å‚è§ &lt;a href=&#34;https://cert-manager.io/docs/installation/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;CERT_MANAGER_VERSION&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v1.11.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm repo add jetstack https://charts.jetstack.io
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm repo update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm install cert-manager jetstack/cert-manager &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --namespace cert-manager &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --create-namespace &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --version &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CERT_MANAGER_VERSION&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --set &lt;span class=&#34;nv&#34;&gt;installCRDs&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;true&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;  --wait&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# éªŒè¯&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n cert-manager rollout status deploy/cert-manager&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n cert-manager rollout status deploy/cert-manager-cainjector&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n cert-manager rollout status deploy/cert-manager-webhook&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åœ¨-aws-ä¸­åˆ›å»º-ca-å±‚çº§ç»“æ„&#34;&gt;åœ¨ AWS ä¸­åˆ›å»º CA å±‚çº§ç»“æ„&lt;/h2&gt;
&lt;p&gt;åœ¨æ­¤æ­¥éª¤ä¸­ï¼Œæˆ‘ä»¬åœ¨ AWS ç§æœ‰ CA ä¸­åˆ›å»ºä¸€ä¸ªæ ¹è¯ä¹¦é¢å‘æœºæ„å’Œä¸€ä¸ªä¸‹çº§è¯ä¹¦é¢å‘æœºæ„ã€‚ç›¸å…³çš„ &lt;a href=&#34;https://docs.aws.amazon.com/privateca/latest/userguide/ca-hierarchy.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS æ–‡æ¡£&lt;/a&gt; è®¨è®ºäº†å¦‚ä½•è®¾è®¡ CA å±‚çº§ç»“æ„ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-aws-ç§æœ‰-ca&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;AWS ç§æœ‰ CA&#34; srcset=&#34;
               /blog/istio-aws-private-ca/f2_hu3793898570490274905.webp 400w,
               /blog/istio-aws-private-ca/f2_hu4899699933765758031.webp 760w,
               /blog/istio-aws-private-ca/f2_hu4024191012142163541.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-aws-private-ca/f2_hu3793898570490274905.webp&#34;
               width=&#34;300&#34;
               height=&#34;297&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      AWS ç§æœ‰ CA
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;è¯·æ³¨æ„ï¼š&lt;/strong&gt; ä»¥ä¸‹è„šæœ¬å°†åœ¨ AWS ç§æœ‰ CA ä¸­åˆ›å»ºä¸€ä¸ªæ ¹ CA å’Œä¸€ä¸ªä¸‹çº§ CAã€‚å¦‚æœä½ å·²ç»åœ¨ AWS ç§æœ‰ CA ä¸­å­˜åœ¨ CA å±‚çº§ç»“æ„ï¼Œå¹¶å¸Œæœ›é‡ç”¨è¯¥å±‚çº§ç»“æ„ï¼Œè€Œä¸æ˜¯ä»æ ¹ CA åˆ›å»ºæ–°çš„ä¸‹çº§ CAï¼Œåˆ™å¯ä»¥è·³è¿‡è¿è¡Œä»¥ä¸‹è„šæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ å¸Œæœ›é‡ç”¨ç°æœ‰çš„ AWS ç§æœ‰ CA å¯¹è±¡ï¼Œè¯·å°†å…¶ ARN ä¿å­˜åœ¨ç¯å¢ƒå˜é‡ &lt;strong&gt;&lt;code&gt;ISTIO_CA_ARN&lt;/code&gt;&lt;/strong&gt; ä¸­ã€‚æˆ‘ä»¬å°†åœ¨åç»­æ­¥éª¤ä¸­ä½¿ç”¨æ­¤å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼Œå¦‚æœä½ å¸Œæœ›ä½¿ç”¨æ­¤è„šæœ¬åˆ›å»ºç§æœ‰ CA å±‚çº§ç»“æ„ï¼Œè¯·æ ¹æ®ä½ çš„éœ€æ±‚ç¼–è¾‘ &lt;code&gt;COUNTRY, ORGANIZATION, ORGANIZATIONAL_UNIT, STATE, LOCALITY&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿è¡Œä¸Šè¿°è„šæœ¬åï¼Œè¯·å°† ARN ä¿å­˜åœ¨ &lt;em&gt;&lt;strong&gt;&lt;code&gt;ISTIO_CA_ARN&lt;/code&gt;&lt;/strong&gt;&lt;/em&gt; ä¸­ä»¥ä¾›åç»­æ­¥éª¤ä½¿ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;ISTIO_CA_ARN&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;arn:aws:acm-pca:[REGION]:[REDACTED]:certificate-authority/[REDACTED]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åˆ›å»º-iam-ç­–ç•¥å’Œè§’è‰²&#34;&gt;åˆ›å»º IAM ç­–ç•¥å’Œè§’è‰²&lt;/h2&gt;
&lt;p&gt;è¦è®¿é—®ä»»ä½• AWS èµ„æºï¼Œæˆ‘ä»¬éœ€è¦å®šä¹‰æ­£ç¡®çº§åˆ«çš„æƒé™ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€ä¸ªæ–°çš„ IAM ç­–ç•¥ï¼Œä»…æˆäºˆæ‰€éœ€çš„è®¿é—®çº§åˆ«ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt;EOF &amp;gt; AWSPCAIssuerPolicy.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;Version&amp;#34;: &amp;#34;2012-10-17&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  &amp;#34;Statement&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      &amp;#34;Sid&amp;#34;: &amp;#34;awspcaissuer&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      &amp;#34;Action&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        &amp;#34;acm-pca:DescribeCertificateAuthority&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        &amp;#34;acm-pca:GetCertificate&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        &amp;#34;acm-pca:IssueCertificate&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      ],
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      &amp;#34;Effect&amp;#34;: &amp;#34;Allow&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;      &amp;#34;Resource&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        &amp;#34;${ISTIO_CA_ARN}&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;        ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;POLICY_ARN&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;aws iam create-policy &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --policy-name AWSPCAIssuerPolicy &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --policy-document file://AWSPCAIssuerPolicy.json &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --output json &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; jq -r &lt;span class=&#34;s1&#34;&gt;&amp;#39;.Policy.Arn&amp;#39;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;echo&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;POLICY_ARN = &lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;POLICY_ARN&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åˆ›å»ºå¸¦æœ‰-iam-oidc-æä¾›å•†çš„-iam-è§’è‰²&#34;&gt;åˆ›å»ºå¸¦æœ‰ IAM OIDC æä¾›å•†çš„ IAM è§’è‰²&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨ â€œaws-privateca-issuerâ€ Cert Manager æ’ä»¶ä¸ AWS ç§æœ‰ CA äº¤äº’ã€‚è¯¥æ’ä»¶éœ€è¦æ­£ç¡®çš„è®¿é—®æƒé™æ¥ä¸ AWS ç§æœ‰ CA äº¤äº’ã€‚å®ƒéœ€è¦ä½¿ç”¨æˆ‘ä»¬åœ¨ä¸Šä¸€æ­¥åˆ›å»ºçš„ IAM ç­–ç•¥ã€‚åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬ä¸º â€œaws-privateca-issuerâ€ æ’ä»¶åˆ›å»ºä¸€ä¸ª ServiceAccountï¼Œå¹¶å°†å…¶ä¸æ–°åˆ›å»ºçš„ IAM è§’è‰²å…³è”ï¼Œè¯¥è§’è‰²å·²é™„åŠ  IAM ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;EKS é›†ç¾¤æœ‰ä¸€ä¸ªä¸ä¹‹å…³è”çš„ &lt;a href=&#34;https://openid.net/connect/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenID Connect&lt;/a&gt; (OIDC) å‘è¡Œè€… URLã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒIAM OIDC æä¾›å•†æœªå¯ç”¨ã€‚è¦ä½¿ç”¨å®ƒï¼Œ&lt;a href=&#34;https://docs.aws.amazon.com/eks/latest/userguide/enable-iam-roles-for-service-accounts.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘ä»¬éœ€è¦å…ˆå¯ç”¨å®ƒ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¯·ç¡®ä¿ IAM ç­–ç•¥ ARN å·²è®¾ç½®åœ¨ &lt;strong&gt;&lt;code&gt;POLICY_ARN&lt;/code&gt;&lt;/strong&gt; ä¸­ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# è¯·åœ¨ä¸‹æ–¹ç¼–è¾‘é›†ç¾¤åç§°&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;CURRENT_CLUSTER&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä¸ºé›†ç¾¤å¯ç”¨ IAM OIDC æä¾›å•†&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;eksctl utils associate-iam-oidc-provider &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --cluster&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CURRENT_CLUSTER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --approve&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# åˆ›å»ºç»‘å®šåˆ°æœåŠ¡è´¦æˆ·çš„ IAM è§’è‰²&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;eksctl create iamserviceaccount --cluster&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CURRENT_CLUSTER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --namespace&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PCA_NAMESPACE&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --attach-policy-arn&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;POLICY_ARN&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --override-existing-serviceaccounts &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;aws-pca-issuer&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --role-name &lt;span class=&#34;s2&#34;&gt;&amp;#34;ServiceAccountRolePrivateCA-&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;CURRENT_CLUSTER&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --approve&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åˆ›å»ºä¸€ä¸ªç»‘å®šåˆ° Kubernetes ServiceAccount çš„ IAM è§’è‰²ï¼šâ€œ&lt;code&gt;aws-pca-issuer&lt;/code&gt;â€œ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;IAM è§’è‰²å°†é™„åŠ  IAM ç­–ç•¥ã€‚&lt;/li&gt;
&lt;li&gt;Service Account &lt;code&gt;aws-pca-issuer&lt;/code&gt; å°†ç”± AWS Private CA Issuer ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å®‰è£…-aws-privateca-issuer-æ’ä»¶å¹¶ä½¿ç”¨-serviceaccount-aws-pca-issuer&#34;&gt;å®‰è£… &lt;code&gt;aws-privateca-issuer&lt;/code&gt; æ’ä»¶å¹¶ä½¿ç”¨ ServiceAccount: &lt;code&gt;aws-pca-issuer&lt;/code&gt;&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Helm å®‰è£…æ’ä»¶ï¼Œå¹¶ä½¿ç”¨ä¸Šä¸€æ­¥ä¸­åˆ›å»ºçš„ Kubernetes ServiceAccountã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-aws-ç§æœ‰-ca---é›†ç¾¤---aws-iam&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;AWS ç§æœ‰ CA - é›†ç¾¤ - AWS IAM&#34; srcset=&#34;
               /blog/istio-aws-private-ca/f3_hu6041826964482516738.webp 400w,
               /blog/istio-aws-private-ca/f3_hu17180577071277555979.webp 760w,
               /blog/istio-aws-private-ca/f3_hu497849224552934878.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-aws-private-ca/f3_hu6041826964482516738.webp&#34;
               width=&#34;760&#34;
               height=&#34;413&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      AWS ç§æœ‰ CA - é›†ç¾¤ - AWS IAM
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;PCA_NAMESPACE&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;cert-manager
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬ https://github.com/cert-manager/aws-privateca-issuer/releases&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;AWSPCA_ISSUER_TAG&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;v1.2.2
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# å®‰è£… AWS ç§æœ‰ CA Issuer æ’ä»¶ &lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# https://github.com/cert-manager/aws-privateca-issuer/#setup&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm repo add awspca https://cert-manager.github.io/aws-privateca-issuer
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm repo update
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;helm upgrade --install aws-pca-issuer awspca/aws-privateca-issuer &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --namespace &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PCA_NAMESPACE&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --set image.tag&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;AWSPCA_ISSUER_TAG&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --set serviceAccount.create&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;false&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --set serviceAccount.name&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;aws-pca-issuer&amp;#34;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    --wait&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# éªŒè¯éƒ¨ç½²çŠ¶æ€&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n &lt;span class=&#34;si&#34;&gt;${&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;PCA_NAMESPACE&lt;/span&gt;&lt;span class=&#34;si&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    rollout status deploy/aws-pca-issuer-aws-privateca-issuer&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åˆ›å»º-issuer&#34;&gt;åˆ›å»º Issuer&lt;/h2&gt;
&lt;p&gt;AWSPCAIssuer æ˜¯ä¸€ä¸ª CRDï¼Œæˆ‘ä»¬åœ¨å…¶ä¸­å®šä¹‰äº†ä¸¤ä¸ªå…³é”®å‚æ•°ã€‚å³æˆ‘ä»¬åœ¨æ­¥éª¤ 2 ä¸­åˆ›å»ºçš„ CA çš„ ARN ä»¥åŠè¯¥ CA æ‰€åœ¨çš„ AWS åŒºåŸŸã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šè¯·åœ¨ **&lt;code&gt;CA_REGION&lt;/code&gt;**ç¯å¢ƒå˜é‡ä¸­è®¾ç½® AWS åŒºåŸŸï¼Œå³ä½ çš„ç§æœ‰ CA æ‰€åˆ›å»ºçš„åŒºåŸŸã€‚ä¾‹å¦‚ï¼š&lt;code&gt;export CA_REGION=us-east-1&lt;/code&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt; EOF | kubectl apply -f -
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;apiVersion: awspca.cert-manager.io/v1beta1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;kind: AWSPCAIssuer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;metadata:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt; name: aws-pca-issuer-istio
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt; namespace: istio-system
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;spec:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  arn: ${ISTIO_CA_ARN}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  region: ${CA_REGION}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¸º-istio-åˆ›å»º-ca-è¯ä¹¦cacerts-å¯†é’¥&#34;&gt;ä¸º Istio åˆ›å»º CA è¯ä¹¦ï¼ˆ&lt;code&gt;cacerts&lt;/code&gt; å¯†é’¥ï¼‰&lt;/h2&gt;
&lt;p&gt;åœ¨æ­¤è‡ªå®šä¹‰èµ„æºä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†æ‰€éœ€çš„ Istio CA è¯ä¹¦è¯¦ç»†ä¿¡æ¯ï¼Œå³ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¯ä¹¦çš„æŒç»­æ—¶é—´ï¼ˆTTLï¼‰ï¼Œ&lt;/li&gt;
&lt;li&gt;è¯ä¹¦åº”è‡ªåŠ¨ç»­è®¢çš„æ—¶é—´ï¼Œ&lt;/li&gt;
&lt;li&gt;ä¸»é¢˜å¤‡ç”¨åç§°ï¼ˆSANï¼‰ï¼Œ&lt;/li&gt;
&lt;li&gt;æ­¤è¯ä¹¦çš„åŸºæœ¬çº¦æŸï¼ˆisCA: trueï¼‰ï¼Œ&lt;/li&gt;
&lt;li&gt;ç”Ÿæˆçš„è¯ä¹¦åº”å­˜å‚¨çš„ Kubernetes å¯†é’¥åç§°ï¼ˆ&lt;strong&gt;cacerts&lt;/strong&gt;ï¼‰ç­‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CRD çš„å‚è€ƒæ–‡æ¡£ &lt;a href=&#34;https://cert-manager.io/docs/reference/api-docs/#cert-manager.io/v1.Certificate&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨æ­¤&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;# ä½¿ç”¨ cert-manager å’Œ aws-pca-issuer æ’ä»¶ä» AWS PCA é¢å‘ CA è¯ä¹¦&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;cat &lt;span class=&#34;s&#34;&gt;&amp;lt;&amp;lt; EOF | kubectl apply -f -
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;apiVersion: cert-manager.io/v1
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;kind: Certificate
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;metadata:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  name: istio-ca
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  namespace: istio-system
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;spec:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  isCA: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  duration: 720h #30å¤©
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  renewBefore: 360h #15å¤©
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  secretName: cacerts
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  commonName: istio-ca
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  dnsNames:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - &amp;#34;*.istiod-${ISTIO_REVISION}&amp;#34; # Istiod èº«ä»½
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  subject:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    organizations:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - cluster.local
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    - cert-manager
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;  issuerRef:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;# ---------------- Istio CA çš„ Issuer ---------------------------
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    group: awspca.cert-manager.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    kind: AWSPCAIssuer
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;    name: aws-pca-issuer-istio
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;# ---------------- Istio CA çš„ Issuer ---------------------------
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s&#34;&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç­‰å¾…å‡ ç§’é’ŸåéªŒè¯è¯ä¹¦åˆ›å»ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n istio-system get certificate istio-ca
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;kubectl -n istio-system get secret cacerts
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;å®‰è£…-istio&#34;&gt;å®‰è£… Istio&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ Kubernetes å¯†é’¥ &lt;strong&gt;cacerts&lt;/strong&gt; è¢«åˆ›å»ºï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ä½¿ç”¨è¯¥è¯ä¹¦ä½œä¸º Istio çš„è‡ªå®šä¹‰ CA è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;Istio å®‰è£…æ–‡æ¡£ &lt;a href=&#34;https://istio.io/latest/docs/setup/install/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨æ­¤&lt;/a&gt;ã€‚å¦‚æœä½ æ˜¯ç°æœ‰çš„ Gloo Mesh ç”¨æˆ·ï¼Œå¯ä»¥æŒ‰ç…§æ­¥éª¤ä½¿ç”¨ &lt;a href=&#34;https://docs.solo.io/gloo-mesh-enterprise/latest/setup/installation/istio/gm_managed_istio/gloo_mesh_managed/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IstioLifeCycleManager å®‰è£… Istio&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²ç¤ºä¾‹åº”ç”¨ç¨‹åº&#34;&gt;éƒ¨ç½²ç¤ºä¾‹åº”ç”¨ç¨‹åº&lt;/h2&gt;
&lt;p&gt;éƒ¨ç½² &lt;a href=&#34;https://istio.io/latest/docs/examples/bookinfo/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio ç¤ºä¾‹ Bookinfo åº”ç”¨ç¨‹åº&lt;/a&gt; å¹¶éªŒè¯æ‰€ä½¿ç”¨çš„å¶å­è¯ä¹¦ç¡®å®æ¥è‡ª AWS ç§æœ‰ CA ä¸­å­˜åœ¨çš„æ ¹ CAã€‚&lt;/p&gt;
&lt;h2 id=&#34;éªŒè¯è¯ä¹¦é“¾å¹¶åŒ¹é…åºåˆ—å·&#34;&gt;éªŒè¯è¯ä¹¦é“¾å¹¶åŒ¹é…åºåˆ—å·&lt;/h2&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl pc secrets -n bookinfo-frontends deploy/productpage-v1
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;















&lt;figure  id=&#34;figure-istio-åºåˆ—å·&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Istio åºåˆ—å·&#34; srcset=&#34;
               /blog/istio-aws-private-ca/f4_hu6388355597216883945.webp 400w,
               /blog/istio-aws-private-ca/f4_hu3942602580071654679.webp 760w,
               /blog/istio-aws-private-ca/f4_hu15167515718783804111.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-aws-private-ca/f4_hu6388355597216883945.webp&#34;
               width=&#34;760&#34;
               height=&#34;54&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Istio åºåˆ—å·
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ AWS ç§æœ‰ CA æ§åˆ¶å°ä¸­ï¼Œæ ¹ CA å°†å…·æœ‰åŒ¹é…çš„åºåˆ—å·ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-aws-ç§æœ‰-ca-æ§åˆ¶å°ä¸åŒ¹é…çš„åºåˆ—å·&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;AWS ç§æœ‰ CA æ§åˆ¶å°ä¸åŒ¹é…çš„åºåˆ—å·&#34; srcset=&#34;
               /blog/istio-aws-private-ca/f5_hu9786055170264878633.webp 400w,
               /blog/istio-aws-private-ca/f5_hu5242007451211661553.webp 760w,
               /blog/istio-aws-private-ca/f5_hu3773921777201832091.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-aws-private-ca/f5_hu9786055170264878633.webp&#34;
               width=&#34;760&#34;
               height=&#34;287&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      AWS ç§æœ‰ CA æ§åˆ¶å°ä¸åŒ¹é…çš„åºåˆ—å·
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½ è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥å¶å­è¯ä¹¦çš„è¯¦ç»†ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;istioctl pc secret &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    -n &lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;NAMESPACE&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; deploy/DEPLOYMENT_NAME -o json &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    jq &lt;span class=&#34;s1&#34;&gt;&amp;#39;[.dynamicActiveSecrets[] | select(.name == &amp;#34;default&amp;#34;)][0].secret.tlsCertificate.certificateChain.inlineBytes&amp;#39;&lt;/span&gt; -r &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    base64 -d &lt;span class=&#34;p&#34;&gt;|&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;    openssl x509 -noout -text
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è°ƒè¯•å»ºè®®&#34;&gt;è°ƒè¯•å»ºè®®&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;åœºæ™¯&lt;/strong&gt;ï¼šå°½ç®¡åˆ›å»ºäº†æ‰€éœ€çš„è‡ªå®šä¹‰èµ„æºï¼Œä½† Kubernetes å¯†é’¥ cacerts æœªè¢«åˆ›å»ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ£€æŸ¥ AWSPCAIssuer å¯¹è±¡çš„çŠ¶æ€åº”è¯¥ä¼šæœ‰æ‰€å¸®åŠ©ã€‚&lt;/li&gt;
&lt;li&gt;å»ºè®®å®¡æŸ¥ AWSPCAIssuer è§„èŒƒã€‚&lt;/li&gt;
&lt;li&gt;å½“æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰ Certificate å¯¹è±¡æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªç›¸å…³çš„ CertificateRequest å¯¹è±¡ã€‚CertificateRequest å¯¹è±¡çš„çŠ¶æ€åŒ…å«æœ‰ç”¨çš„è°ƒè¯•ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;è¿˜å»ºè®®æ£€æŸ¥ cert manager å’Œ AWS PCA Issuer æ’ä»¶çš„æ—¥å¿—ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Pulse è§‚æµ‹ä»£ç†ï¼šä¸ºå¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½æ‰“é€ çš„è§‚æµ‹è§£å†³æ–¹æ¡ˆ</title>
      <link>https://cloudnativecn.com/blog/announcing-pulse-proxy/</link>
      <pubDate>Wed, 04 Sep 2024 10:56:55 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/announcing-pulse-proxy/</guid>
      <description>&lt;blockquote&gt;
&lt;p&gt;ç¼–è€…æŒ‰ï¼šEnvoy ä½œè€… Matt Klein çš„åˆ›ä¸šå…¬å¸ Bitdrift æ–°æ¨å‡ºäº†å¯è§‚æµ‹æ€§ä»£ç†å¼€æºé¡¹ç›® &lt;a href=&#34;https://github.com/bitdriftlabs/pulse&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pulse&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç»§&lt;a href=&#34;https://blog.bitdrift.io/post/announcing-source-available-sdk&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®£å¸ƒ Capture SDK æºä»£ç å¯ç”¨&lt;/a&gt;ä¹‹åï¼Œæˆ‘ä»¬éå¸¸é«˜å…´åœ°å†æ¬¡å®£å¸ƒ&lt;a href=&#34;https://github.com/bitdriftlabs/pulse&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pulse&lt;/a&gt;çš„å¯ç”¨æ€§ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸ºå¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½å»ºé€ çš„è§‚æµ‹ä»£ç†ã€‚è¯·é˜…è¯»ä»¥ä¸‹å†…å®¹ï¼Œäº†è§£ Pulse çš„æ¦‚è¿°ã€å…¶åˆ›å»ºçš„ç®€è¦å†å²ï¼Œä»¥åŠå®ƒå¦‚ä½•é€‚åº”æ›´å¹¿æ³›çš„æœåŠ¡å™¨ç«¯è§‚æµ‹ç”Ÿæ€ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;Pulse æ˜¯ä¸€ä¸ªä¸ºå¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½æ„å»ºçš„è§‚æµ‹ä»£ç†ï¼Œä»åŒ…æ‹¬&lt;a href=&#34;https://github.com/statsite/statsite&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;statsite&lt;/a&gt;å’Œ&lt;a href=&#34;https://github.com/lyft/statsrelay&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;statsrelay&lt;/a&gt;åœ¨å†…çš„å…ˆå‰é¡¹ç›®ä¸­æ±²å–æ€æƒ³ï¼ŒåŒæ—¶æä¾›ç°ä»£ API é©±åŠ¨çš„é…ç½®å’Œç±»ä¼¼äº&lt;a href=&#34;https://github.com/envoyproxy/envoy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt;æ‰€æä¾›çš„æ— æŸé…ç½®é‡è½½ã€‚&lt;/p&gt;
&lt;p&gt;åº¦é‡æŒ‡æ ‡å·²ç»è¿‡æ—¶äº†å—ï¼Ÿè™½ç„¶è¡Œä¸šè¶‹åŠ¿ç¡®å®æ˜¯å‘ç»“æ„åŒ–æ—¥å¿—è½¬å˜ï¼Œä½œä¸ºæ‰€æœ‰æ•°æ®çš„é¦–é€‰æ¥æºï¼Œè¿™ä¸€ç‚¹åœ¨&lt;a href=&#34;https://bitdrift.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Capture&lt;/a&gt;çš„ç§»åŠ¨è§‚æµ‹äº§å“ä¸­ä¹Ÿæœ‰ä½“ç°ï¼Œä½†ä¼ ç»Ÿçš„åº¦é‡æŒ‡æ ‡ä¾ç„¶æ˜¯è®¸å¤šå¤§å‹ç»„ç»‡è§‚æµ‹å®è·µçš„æ ¸å¿ƒã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OTel Collector&lt;/a&gt;ã€&lt;a href=&#34;https://github.com/fluent/fluent-bit]&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fluent Bit&lt;/a&gt;å’Œ&lt;a href=&#34;https://github.com/vectordotdev/vector&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Vector&lt;/a&gt;éƒ½æ˜¯ä¼˜ç§€çš„é¡¹ç›®ï¼Œæä¾›ä¸€å®šç¨‹åº¦çš„åº¦é‡æ”¯æŒï¼Œä½†åœ¨å¤„ç†å¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½æ—¶å°šå­˜åœ¨ä¸è¶³ï¼Œä¸»è¦ä½“ç°åœ¨ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;èšåˆï¼šä¾‹å¦‚ï¼Œå»æ‰ pod æ ‡ç­¾ä»¥è¡ç”Ÿå‡ºæœåŠ¡çº§åˆ«çš„èšåˆåº¦é‡ã€‚å¯¹ Prometheus åº¦é‡çš„èšåˆå°¤å…¶æ£˜æ‰‹ï¼Œå› ä¸ºè·¨å¤šä¸ªæ¥æºèšåˆç»å¯¹è®¡æ•°å™¨ï¼ˆä¸åªæŠ¥å‘Šè‡ªä¸Šæ¬¡æŠ¥å‘Šä»¥æ¥çš„å¢é‡è®¡æ•°å™¨ç›¸æ¯”ï¼Œå•è°ƒå¢åŠ çš„è®¡æ•°å™¨ï¼‰å¹¶éæ˜“äº‹ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;é›†ç¾¤åŒ–ï¼šä¸»è¦ç”¨äºæ›´å¤æ‚çš„èšåˆæ–¹æ³•ï¼Œå¦‚åœ¨èšåˆå±‚è¿›è¡Œä¸€è‡´æ€§å“ˆå¸Œå’Œè·¯ç”±ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è‡ªåŠ¨é˜»å¡/çœç•¥ï¼šåŸºäºæ§åˆ¶å¹³é¢é©±åŠ¨é…ç½®çš„è‡ªåŠ¨é˜»å¡å’Œåº¦é‡ç‚¹çœç•¥æ˜¯è®¸å¤šç»„ç»‡æ§åˆ¶åº¦é‡å¢é•¿å’Œæˆæœ¬çš„é‡è¦ç­–ç•¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¯¥é¡¹ç›®å¡«è¡¥äº†è¿™äº›ç©ºç™½ï¼Œå¹¶æä¾›äº†ä¸€ç³»åˆ—ä¸è„šæœ¬ç¼–å†™ã€åŸºæ•°å‘ç°å’Œé™åˆ¶ã€ç½‘ç»œå¯é æ€§ç­‰ç›¸å…³çš„å¼ºå¤§å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;Pulse ä¹Ÿå·²é’ˆå¯¹æ€§èƒ½è¿›è¡Œäº†å¤§é‡ä¼˜åŒ–ï¼Œå¹¶å·²ç»è¿‡ä¸¥æ ¼æµ‹è¯•ï¼Œå‡†å¤‡å¥½åº”å¯¹è‹›åˆ»çš„å·¥ä½œè´Ÿè½½ã€‚ä»Šå¤©ï¼Œå®ƒå·²åœ¨ç”Ÿäº§ç¯å¢ƒä¸­éƒ¨ç½²ï¼Œåœ¨å¤„ç†æ¯ç§’æ•°äº¿ä¸ªåº¦é‡çš„é›†ç¾¤ä¸­è¿è¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;pulse-çš„ç®€å²&#34;&gt;Pulse çš„ç®€å²&lt;/h2&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œä½ å¯èƒ½ä¼šé—®è‡ªå·±ï¼šâ€œbitdrift ä¸ºä»€ä¹ˆä¼šå‘å¸ƒä¸€ä¸ªæœåŠ¡å™¨ç«¯åº¦é‡ä»£ç†ï¼Ÿæˆ‘ä»¥ä¸º bitdrift æ˜¯ä¸€å®¶ç§»åŠ¨è§‚æµ‹å…¬å¸ï¼Ÿâ€Pulse çš„ç”±æ¥ç®€å²å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä»¬&lt;a href=&#34;https://blog.bitdrift.io/post/honey-i-shrunk-the-telemetry&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨å…¬å¼€å‘å¸ƒæ—¶æ‰€æè¿°&lt;/a&gt;ï¼Œbitdrift æ˜¯ä» Lyft å‰¥ç¦»å‡ºæ¥çš„ã€‚åœ¨å‰¥ç¦»ä¹‹å‰ï¼Œbitdrift å›¢é˜Ÿè´Ÿè´£ Lyft å†…ä¸¤ä¸ªä¸åŒçš„æŠ€æœ¯éƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç°ç§°ä¸º Capture çš„ç§»åŠ¨è§‚æµ‹äº§å“ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ç»„ç®¡ç† Lyft å¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½çš„æŠ€æœ¯ï¼Œä¸“æ³¨äºæ•´ä½“æ€§èƒ½ã€å¯é æ€§å’Œæˆæœ¬æ§åˆ¶ã€‚è¿™ç»„æŠ€æœ¯ç»Ÿç§°ä¸ºâ€œMMEâ€ï¼ˆåº¦é‡ç®¡ç†å¼•æ“ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;MME èƒŒåçš„æ€æƒ³å°†åœ¨ä¸‹æ–‡ä¸­è¿›ä¸€æ­¥æè¿°ï¼Œä½† Pulse ä»£ç†æ˜¯æ‰€æœ‰ Lyft åº¦é‡åœ¨ Kubernetes podã€èšåˆå±‚ï¼Œæœ€ç»ˆåˆ° TSDB ä¼ è¾“è¿‡ç¨‹ä¸­çš„æ•°æ®å¹³é¢ã€‚bitdrift ä»ç„¶æ”¯æŒåœ¨ Lyft è¿è¡Œ Pulse åŠæ›´å¹¿æ³›çš„ MME æ§åˆ¶å¹³é¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®Œæˆä½¿ Capture SDK æºä»£ç å¯ç”¨çš„å·¥ä½œåï¼Œæˆ‘ä»¬è®¤ä¸ºç°åœ¨æ˜¯å‘å¸ƒ Pulse ä»£ç çš„å¥½æ—¶æœºï¼Œå› ä¸ºæˆ‘ä»¬ç›¸ä¿¡è¿™ä¸€é¢†åŸŸå­˜åœ¨æ˜¾è‘—çš„è¡Œä¸šåŠŸèƒ½ç¼ºå£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é©±åŠ¨æ§åˆ¶å¹³é¢çš„åº¦é‡æ–¹æ³•&#34;&gt;é©±åŠ¨æ§åˆ¶å¹³é¢çš„åº¦é‡æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ¶æ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ¶æ„å›¾&#34; srcset=&#34;
               /blog/announcing-pulse-proxy/f1_hu2355259371673588799.webp 400w,
               /blog/announcing-pulse-proxy/f1_hu10614754433877348514.webp 760w,
               /blog/announcing-pulse-proxy/f1_hu8471809447125419552.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/announcing-pulse-proxy/f1_hu2355259371673588799.webp&#34;
               width=&#34;620&#34;
               height=&#34;498&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ¶æ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªä¾‹å­ï¼ŒLyft åº¦é‡åŸºç¡€è®¾æ–½çš„ç®€åŒ–ç‰ˆæœ¬å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€ä¸ªåŸºäº Pulse ä»£ç†çš„ daemonset ä»åº”ç”¨ç¨‹åºæ¥æ”¶åº¦é‡ï¼Œè¿™ä¸€å±‚æ‰§è¡Œåˆæ­¥çš„è½¬æ¢ã€æ‰¹å¤„ç†ã€åŸºæ•°é™åˆ¶ç­‰æ“ä½œï¼Œç„¶åå°†åº¦é‡å‘é€åˆ°èšåˆå±‚ã€‚&lt;/li&gt;
&lt;li&gt;èšåˆå±‚æ¥æ”¶æ‰€æœ‰åº¦é‡ï¼Œå¹¶ä½¿ç”¨ä¸€è‡´æ€§å“ˆå¸Œç¡®ä¿åº¦é‡æœ€ç»ˆè¢«æ­£ç¡®è·¯ç”±åˆ°å¤„ç†èšåˆçš„èŠ‚ç‚¹ã€‚ä¸€æ—¦åœ¨æ­£ç¡®çš„èŠ‚ç‚¹ä¸Šï¼Œä¼šå‘ç”Ÿå‡ ä»¶ä¸åŒçš„äº‹æƒ…ï¼š
&lt;ul&gt;
&lt;li&gt;é«˜çº§èšåˆå‘ç”Ÿï¼ˆä¾‹å¦‚ï¼Œä» pod åº¦é‡åˆ›å»ºæœåŠ¡çº§åº¦é‡ï¼‰&lt;/li&gt;
&lt;li&gt;è§‚æµ‹åˆ°çš„åº¦é‡æ ·æœ¬è¢«å‘é€åˆ°æ§åˆ¶å¹³é¢&lt;/li&gt;
&lt;li&gt;æ§åˆ¶å¹³é¢å‘é€æ˜ç¡®é˜»å¡çš„åº¦é‡åˆ—è¡¨ï¼ˆè¯¦è§ä¸‹æ–‡ï¼‰&lt;/li&gt;
&lt;li&gt;åœ¨æœ€ç»ˆå‘é€æ•°æ®åˆ° TSDB çš„è¿‡ç¨‹ä¸­ï¼Œå„ç§ç¼“å†²å’Œé‡è¯•æœºåˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;è¯»å–ä»£ç†ï¼ˆæœªåŒ…æ‹¬åœ¨ Pulse ä¸­ï¼‰ä½äºæ‰€æœ‰åº¦é‡ç”¨æˆ·ï¼ˆä»ªè¡¨ç›˜å’Œä¸´æ—¶æŸ¥è¯¢ï¼‰å’Œåº¦é‡æŸ¥è¯¢ä¹‹é—´ï¼Œå¹¶æ‹¦æˆªæ‰€æœ‰åº¦é‡æŸ¥è¯¢ã€‚å®ƒå°†æŸ¥è¯¢å‘é€åˆ°æ§åˆ¶å¹³é¢ï¼Œä»¥ä¾¿æ§åˆ¶å¹³é¢äº†è§£å“ªäº›åº¦é‡å®é™…ä¸Šè¢«è¯»å–ï¼Œæ— è®ºæ˜¯æ‰‹åŠ¨è¿˜æ˜¯é€šè¿‡è­¦å‘ŠæŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;li&gt;æ§åˆ¶å¹³é¢ï¼ˆä¹ŸæœªåŒ…æ‹¬åœ¨ Pulse ä¸­ï¼Œä½†é€šè¿‡æ˜ç¡®çš„ APIs è¿›è¡Œé€šä¿¡ï¼‰è·å–æ¥è‡ªèšåˆå±‚çš„å†™å…¥ç«¯æ ·æœ¬ï¼Œå¹¶å°†å…¶ä¸è¯»å–ä»£ç†æ•°æ®åˆå¹¶ï¼Œä»¥ç¡®å®šå“ªäº›åº¦é‡å®é™…è¢«ä½¿ç”¨ã€‚ç„¶åï¼Œæ§åˆ¶å¹³é¢æ ¹æ®æ”¿ç­–åŠ¨æ€åˆ›å»ºåŸºäºè‡ªåŠ¨é˜»å¡æœªè¯»å–ä½†å·²å†™å…¥çš„åº¦é‡çš„é˜»æ­¢åˆ—è¡¨ï¼Œè¿™åœ¨å¤§è§„æ¨¡åº¦é‡åŸºç¡€è®¾æ–½ä¸­é€šå¸¸æ˜¯æ‰€æœ‰åº¦é‡çš„ç»å¤§å¤šæ•°ã€‚é˜»æ­¢åˆ—è¡¨è¢«æä¾›ç»™ Pulse ä»£ç†ï¼Œç„¶åæ‰§è¡Œå†…è”é˜»å¡å’Œçœç•¥åº¦é‡æµï¼Œä»è€Œæ˜¾è‘—å‡å°‘å‘é€åˆ° TSDB çš„æ€»ç‚¹æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Pulse å…è®¸å…¶æ‰€æœ‰é…ç½®æ–¹é¢éƒ½å¯ä»¥åŠ¨æ€æ›´æ–°ï¼Œè¿™ä¸ Envoy å†…çš„å¯èƒ½æ€§ç±»ä¼¼ã€‚è¿™æä¾›äº†åœ¨æœ€ç»ˆå¦‚ä½•ä½¿ç”¨å®ƒæ–¹é¢çš„å¤§é‡çµæ´»æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;pulse-å°†å¦‚ä½•å¸®åŠ©æ‚¨&#34;&gt;Pulse å°†å¦‚ä½•å¸®åŠ©æ‚¨ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ Pulseï¼Œæ‚¨ç°åœ¨å¯ä»¥é€šè¿‡å¤æ‚çš„èšåˆå’Œé€šè¿‡æ˜ç¡®è§„å®šçš„ APIs å®æ—¶æ§åˆ¶é˜»å¡è§„åˆ™å’Œçœç•¥å®ç°&lt;em&gt;éå¸¸&lt;/em&gt;å¤§çš„åº¦é‡èŠ‚çœã€‚Pulse æºä»£ç ä»¥è¿™æ ·çš„æ–¹å¼æˆæƒï¼šå¦‚æœæ‚¨æ˜¯æœ€ç»ˆç”¨æˆ·ï¼Œæˆ‘ä»¬çš„æ„å›¾æ˜¯ä»£ç å¯ç”¨å¹¶å¯ä¿®æ”¹ä»»ä½•ç›®çš„ã€‚æ‹¿å»æ„å»ºä¸€äº›æœ‰è¶£çš„ä¸œè¥¿å§ï¼&lt;/p&gt;
&lt;p&gt;å¯¹äºå•†ä¸šæ”¯æŒæˆ–è®¨è®º bitdrift æä¾›çš„è‡ªåŠ¨åº¦é‡å‘ç°å’Œé˜»å¡å¤„ç†çš„æ‰˜ç®¡æ§åˆ¶å¹³é¢çš„é€‰é¡¹ï¼Œè¯·é€šè¿‡&lt;a href=&#34;mailto:info@bitdrift.io&#34;&gt;info@bitdrift.io&lt;/a&gt;ä¸æˆ‘ä»¬è”ç³»è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éå¸¸æœŸå¾…æ‚¨é€šè¿‡&lt;a href=&#34;https://github.com/bitdriftlabs/pulse&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub issues&lt;/a&gt;æˆ–åœ¨&lt;a href=&#34;https://communityinviter.com/apps/bitdriftpublic/bitdrifters&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;bitdrift slack&lt;/a&gt;çš„#pulse ä¸æˆ‘ä»¬åˆ†äº«é—®é¢˜å’Œä½¿ç”¨æ•…äº‹ã€‚ç¥æ‚¨åº¦é‡èŠ‚çœæ„‰å¿«ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Istio çš„ç¯å¢ƒæ¨¡å¼ â€”â€” ç”¨æ›´å°‘çš„èµ„æºåšæ›´å¤šçš„äº‹ï¼</title>
      <link>https://cloudnativecn.com/blog/istio-more-for-less/</link>
      <pubDate>Wed, 28 Aug 2024 17:35:23 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-more-for-less/</guid>
      <description>&lt;p&gt;éšç€ Istio çš„ç¯å¢ƒæ•°æ®å¹³é¢æ¨¡å¼çš„æ¨å‡ºï¼Œå¹³å°å›¢é˜Ÿå¯ä»¥é«˜æ•ˆåœ°é‡‡ç”¨æœåŠ¡ç½‘æ ¼åŠŸèƒ½ï¼Œå¹¶ä»¥æœ€å°çš„èµ„æºå’Œå¼€é”€å½±å“ä¸ºç»ˆç«¯ç”¨æˆ·æä¾›å¢å¼ºåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯-istio-ç¯å¢ƒæ¨¡å¼&#34;&gt;ä»€ä¹ˆæ˜¯ Istio ç¯å¢ƒæ¨¡å¼ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;Istio çš„&lt;a href=&#34;https://www.solo.io/blog/istio-ambient-mesh-evolution-service-mesh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¯å¢ƒæ¨¡å¼&lt;/a&gt;æœ€åˆäº 2022 å¹´ 9 æœˆå‘å¸ƒã€‚å®ƒæ˜¯ä¸€ç§æ–°çš„æ•°æ®å¹³é¢æ¨¡å¼ â€”â€” æ— éœ€ sidecar â€”â€” æ—¨åœ¨ç®€åŒ–æ“ä½œã€æ‰©å¤§åº”ç”¨å…¼å®¹æ€§å’Œé™ä½åŸºç¡€è®¾æ–½æˆæœ¬ã€‚ç¯å¢ƒæ¨¡å¼å°† Istio çš„åŠŸèƒ½åˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„å±‚ï¼šé›¶ä¿¡ä»»å®‰å…¨è¦†ç›–å±‚ï¼ˆ&lt;em&gt;ztunnel&lt;/em&gt;ï¼‰å’Œå¯é€‰çš„ç¬¬ 7 å±‚å¤„ç†å±‚ï¼ˆ&lt;em&gt;waypoint&lt;/em&gt;ï¼‰ã€‚ä¸ sidecar ç›¸æ¯”ï¼Œåˆ†å±‚æ–¹æ³•å…è®¸ç”¨æˆ·ä»æ— ç½‘æ ¼é€æ¸é‡‡ç”¨åˆ°åŸºäº mTLS çš„é›¶ä¿¡ä»»è¦†ç›–ï¼Œå†åˆ°å®Œæ•´çš„ç¬¬ 7 å±‚å¤„ç†ï¼Œæ ¹æ®éœ€è¦è¿›è¡Œã€‚è¿™ä¸ºæœåŠ¡ç½‘æ ¼ç”¨æˆ·æä¾›äº†æ¥è‡ªåŒä¸€ä¸“ç”¨ç¤¾åŒºçš„ä¸¤ä¸ªå‡ºè‰²é€‰æ‹©ï¼šä¼ ç»Ÿçš„ sidecar æ–¹æ³•çš„ Istio æˆ–æ—  sidecar çš„ç¯å¢ƒæ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-istio-ç¯å¢ƒæ¨¡å¼&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Istio ç¯å¢ƒæ¨¡å¼&#34; srcset=&#34;
               /blog/istio-more-for-less/f1_hu11836929386643823188.webp 400w,
               /blog/istio-more-for-less/f1_hu14368959289602612651.webp 760w,
               /blog/istio-more-for-less/f1_hu13051461677501106522.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f1_hu11836929386643823188.webp&#34;
               width=&#34;760&#34;
               height=&#34;327&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Istio ç¯å¢ƒæ¨¡å¼
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸èµ„æºæˆæœ¬å’Œæ“ä½œæŒ‘æˆ˜ç›¸å…³çš„ä¸€äº›ç¤ºä¾‹åœºæ™¯ï¼Œè¿™äº›åœºæ™¯åœ¨é‡‡ç”¨æœåŠ¡ç½‘æ ¼æ—¶å¸¸å¸¸ä¼šå¼•èµ·ç´§å¼ ã€‚æˆ‘ä»¬è¿˜å°†è®¨è®ºå¦‚ä½•é‡‡ç”¨ç¯å¢ƒæ¨¡å¼æ¥åº”å¯¹è¿™äº›æŒ‘æˆ˜ï¼Œå¹¶æ”¹å–„å¹³å°çš„æ€»æ‹¥æœ‰æˆæœ¬ï¼ˆTCOï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-çš„ç¯å¢ƒæ¨¡å¼é™ä½èµ„æºæˆæœ¬&#34;&gt;Istio çš„ç¯å¢ƒæ¨¡å¼é™ä½èµ„æºæˆæœ¬&lt;/h2&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒIstio å»ºè®®ä¸ºæ¯ä¸ª sidecar åˆ†é… 0.1 CPU æ ¸å¿ƒå’Œ 128MB çš„å†…å­˜ã€‚è™½ç„¶æœåŠ¡ç½‘æ ¼çš„ä¼˜åŠ¿ä¼—æ‰€å‘¨çŸ¥ï¼Œä½†åœ¨çœŸå®ç”Ÿäº§å·¥ä½œè´Ÿè½½ä¸­ï¼Œèµ„æºéœ€æ±‚å¾ˆå¿«å°±ä¼šç´¯ç§¯èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé¢„ç®—ç´§å¼ çš„å›¢é˜Ÿæ¥è¯´ï¼Œéµå®ˆè¿™ä¸€è¦æ±‚å¸¦æ¥äº†æ˜¾è‘—çš„æœºä¼šæˆæœ¬ã€‚ä»–ä»¬é¢ä¸´çš„æŠ‰æ‹©åŒ…æ‹¬åœ¨æ‹›è˜é¢å¤–äººå‘˜æˆ–æŠ•èµ„äºä¸šåŠ¡çš„å…¶ä»–é¢†åŸŸä¸æ‰¿æ‹…åº”ç”¨å¢åŠ çš„èµ„æºæˆæœ¬ä¹‹é—´åšå‡ºå†³å®šï¼Œè¿™æˆä¸ºä¸€ä¸ªå…³é”®è€ƒé‡ã€‚&lt;/p&gt;
&lt;p&gt;åŠ¡ç½‘æ ¼æœ‰ä¸€ç³»åˆ— 7 å±‚ç½‘ç»œåŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é«˜çº§æµé‡ç®¡ç†å’Œè·¯ç”±æ§åˆ¶&lt;/li&gt;
&lt;li&gt;åœ¨åº”ç”¨å±‚çš„ç»†ç²’åº¦å®‰å…¨ç­–ç•¥&lt;/li&gt;
&lt;li&gt;é«˜æ•ˆå¤„ç†æ–­è·¯å™¨å’Œå®¹é”™æœºåˆ¶&lt;/li&gt;
&lt;li&gt;ä¿ƒè¿›æœåŠ¡å‘ç°å’ŒåŠ¨æ€æœåŠ¡è·¯ç”±çš„å®æ–½&lt;/li&gt;
&lt;li&gt;ç®€åŒ– A/B æµ‹è¯•å’Œé‡‘ä¸é›€å‘å¸ƒç­–ç•¥çš„éƒ¨ç½²&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç„¶è€Œï¼Œå¦‚æœä½ è¿‘æœŸä¸éœ€è¦è¿™äº›åŠŸèƒ½ï¼Œæˆ–è€…ä¸æ˜¯æ¯ä¸ªæœåŠ¡éƒ½éœ€è¦ï¼Ÿè¿™äº›åŠŸèƒ½å¯èƒ½è¢«è§†ä¸ºé™„åŠ ä»·å€¼ï¼Œå¹¶å¯èƒ½ä¸ç¬¦åˆä½ çš„ç»„ç»‡éœ€æ±‚æˆ–æˆç†Ÿåº¦æ°´å¹³ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›ä¸å®æ–½æœåŠ¡ç½‘æ ¼æˆæœ¬ç›¸å…³çš„æŒ‘æˆ˜åœºæ™¯ï¼š&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-1-æ§åˆ¶èºæ—‹å‡é«˜çš„-sidecar-æˆæœ¬&#34;&gt;åœºæ™¯ 1: æ§åˆ¶èºæ—‹å‡é«˜çš„ sidecar æˆæœ¬&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œæˆ‘ä»¬çš„å®‰å…¨å›¢é˜Ÿè¦æ±‚æ•´ä¸ªç»„ç»‡é‡‡å–é›¶ä¿¡ä»»å§¿æ€ï¼Œå› æ­¤æˆ‘ä»¬æ­£åœ¨è€ƒè™‘é‡‡ç”¨æœåŠ¡ç½‘æ ¼ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å‘ç°é‡‡ç”¨ sidecar æ–¹æ³•å°†äº§ç”Ÿé¢å¤–çš„æˆæœ¬ï¼ˆåœ¨æ¯ä¸ªåº”ç”¨çš„èµ„æºé¢„ç•™ä¸­ï¼‰ã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºäº†éµå®ˆå®‰å…¨å›¢é˜Ÿçš„é›¶ä¿¡ä»»è¦æ±‚ï¼Œä½¿ç”¨ Istio çš„ç¯å¢ƒæ¨¡å¼ï¼Œä½ æ— éœ€ä¸ºæ¯ä¸ªåº”ç”¨é‡‡ç”¨ä¸€ä¸ª sidecarã€‚ç›¸åï¼Œä½ å¯ä»¥åˆ©ç”¨å…±äº«çš„ã€æ¯èŠ‚ç‚¹ ztunnel ç»„ä»¶ï¼Œå®ƒå¤„ç†é›¶ä¿¡ä»»ç½‘ç»œçš„èŒè´£ã€‚ç„¶åï¼Œå½“ä½ å‡†å¤‡å¥½æ—¶ï¼Œæˆ–åªé’ˆå¯¹éœ€è¦çš„æœåŠ¡ï¼Œå¯ä»¥é€‰æ‹©å®‰å…¨åœ°ã€æŒ‰å‘½åç©ºé—´å¤„ç†ç¬¬ 7 å±‚ç­–ç•¥ã€‚è¿™ç§é€‰æ‹©æ–¹æ³•æ„å‘³ç€ä»é mTLS åˆ°é‡‡ç”¨ mTLS çš„å¢é‡æˆæœ¬ç°åœ¨å¤§å¤§é™ä½äº†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-2-å‡å°‘é‡å¤çš„èµ„æºæˆæœ¬&#34;&gt;åœºæ™¯ 2: å‡å°‘é‡å¤çš„èµ„æºæˆæœ¬&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œæˆ‘ä»¬çš„ç»„ç»‡è¦æ±‚å¼€å‘ã€æµ‹è¯•å’Œåˆ†å±‚ç¯å¢ƒå¤åˆ¶ç”Ÿäº§è®¾ç½®ï¼Œä»¥ä¾¿åŠæ—©å‘ç°é—®é¢˜å¹¶ç»´æŒé«˜è´¨é‡çš„å‘å¸ƒã€‚é‡‡ç”¨æœåŠ¡ç½‘æ ¼æ„å‘³ç€æ¯ä¸ªç¯å¢ƒéƒ½ä¼šäº§ç”Ÿé¢å¤–çš„èµ„æºå’Œæ“ä½œå¼€é”€ï¼Œå¯¼è‡´æ•´ä½“æˆæœ¬æ€¥å‰§ä¸Šå‡ã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç»å¸¸çœ‹åˆ°å®¢æˆ·ç¯å¢ƒå¤åˆ¶å…¶ç”Ÿäº§è®¾ç½®ï¼Œå…¶ä¸­è¾ƒä½çº§åˆ«çš„ç¯å¢ƒåªæ¥æ”¶å°‘é‡çš„åˆæˆæµé‡ â€”â€” æˆ–åœ¨æŸäº›æƒ…å†µä¸‹æ ¹æœ¬æ²¡æœ‰æµé‡ã€‚è¿™å¯¹ç¯å¢ƒæ‰€æœ‰è€…æ¥è¯´æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ï¼Œä»–ä»¬éœ€è¦è¯æ˜åœ¨è¿™äº›æµé‡ä½æˆ–æ— æµé‡çš„ç¯å¢ƒä¸­è¿è¡ŒæœåŠ¡ç½‘æ ¼çš„ä»·å€¼ã€‚åˆ†é…ç»™ sidecar ä»£ç†çš„èµ„æºå¾ˆå¤§ç¨‹åº¦ä¸Šè¢«æµªè´¹ï¼Œå¯¼è‡´åˆ©ç”¨æ•ˆç‡ä½ä¸‹å’Œæ›´é«˜çš„æ”¯å‡ºã€‚é€šè¿‡ç§»é™¤ sidecar çš„è¦æ±‚ï¼Œç¯å¢ƒæ¨¡å¼é™ä½äº†åŸºç¡€èµ„æºéœ€æ±‚ï¼Œä½¿å¾—åœ¨å¤åˆ¶ç”Ÿäº§ç¯å¢ƒçš„æ ‡å‡†ä¸‹å®æ–½é›¶ä¿¡ä»»æ›´å…·æˆæœ¬æ•ˆç›Šã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-3-åœ¨ä¸åŒæ¶æ„ä¸­é©¾é©­å˜åŒ–çš„é€Ÿç‡æ¨¡å¼&#34;&gt;åœºæ™¯ 3: åœ¨ä¸åŒæ¶æ„ä¸­é©¾é©­å˜åŒ–çš„é€Ÿç‡æ¨¡å¼&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤æ‚çš„å¾®æœåŠ¡æ¶æ„ï¼Œä¸åŒçš„æœåŠ¡ç»å†å¹¿æ³›ä¸åŒçš„æµé‡æ¨¡å¼ã€‚ä¸€äº›æœåŠ¡æ¯ç§’å¤„ç†æ•°åƒä¸ªè¯·æ±‚ï¼Œè€Œå…¶ä»–æœåŠ¡åªå¤„ç†å‡ ç™¾ä¸ªã€‚å°½ç®¡å¦‚æ­¤ï¼Œsidecar ä»£ç†é€šå¸¸åœ¨æ‰€æœ‰æœåŠ¡ä¸­åˆ†é…ç›¸åŒçš„èµ„æºï¼Œå¯¼è‡´èµ„æºåˆ©ç‡ä¸é«˜ã€‚é«˜æµé‡æœåŠ¡é­å—æ€§èƒ½ç“¶é¢ˆï¼Œè€Œä½æµé‡æœåŠ¡åˆ™æµªè´¹èµ„æºã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°çš„å¦ä¸€ä¸ªå¸¸è§åœºæ™¯æ˜¯ï¼Œsidecar ä»£ç†é€šå¸¸é‡‡ç”¨ä¸€åˆ€åˆ‡çš„æ–¹æ³•è¿›è¡Œé…ç½®ï¼Œå¯¼è‡´èµ„æºåˆ©ç”¨ä¸æ•ˆç‡ã€‚åœ¨ç¼ºä¹æœºåˆ¶ï¼ˆä¾‹å¦‚ï¼Œåœ¨åº”ç”¨çš„ Helm chartä¸­æš´éœ² Istio pod æ³¨è§£ï¼‰æ¥è¦†ç›–é»˜è®¤ä»£ç†èµ„æºé¢„ç•™è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œä»¥åŠå¼€å‘å›¢é˜Ÿç¼ºä¹ä½¿ç”¨å¯è§‚å¯Ÿæ€§æ•°æ®æ¥é…ç½®å’Œè°ƒæ•´è¿™äº›èµ„æºé¢„ç•™çš„ç»éªŒçš„æƒ…å†µä¸‹ï¼Œåº”ç”¨å¼€å‘å›¢é˜Ÿèƒ½å¦æˆåŠŸå–å†³äºä»–ä»¬çš„åº”ç”¨ç‰¹å¾ã€‚å½»åº•ç§»é™¤ sidecar æ¶ˆé™¤äº†ç”±èµ„æºåˆ©ç”¨ä¸è¶³é€ æˆçš„ä½æ•ˆã€‚æ­¤å¤–ï¼Œç”±äº ztunnel æ˜¯ç”¨ Rust æ„å»ºçš„é«˜æ€§èƒ½ç»„ä»¶ï¼Œå®ƒä»ç„¶å¯ä»¥å¤„ç†é«˜ååé‡çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-4-å®æ–½æœåŠ¡ç½‘æ ¼ä»¥åœ¨è¾¹ç¼˜ç¯å¢ƒä¸­å®ç°é›¶ä¿¡ä»»&#34;&gt;åœºæ™¯ 4: å®æ–½æœåŠ¡ç½‘æ ¼ä»¥åœ¨è¾¹ç¼˜ç¯å¢ƒä¸­å®ç°é›¶ä¿¡ä»»&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œåœ¨èµ„æºæœ‰é™çš„è¾¹ç¼˜ç¯å¢ƒä¸­éƒ¨ç½²æœåŠ¡ç½‘æ ¼å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› ä¸º sidecar å¸¦æ¥é¢å¤–çš„å¼€é”€ã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;è¾¹ç¼˜è®¡ç®—å°†æ•°æ®å¤„ç†æ›´é è¿‘æ•°æ®æºï¼Œé€šå¸¸åœ¨è¾ƒä¸å®‰å…¨æˆ–ä¸å—ä¿¡ä»»çš„ç½‘ç»œä¸­ï¼Œä¸”èµ„æºæœ‰é™ã€‚å®ç°é›¶ä¿¡ä»»ç¡®ä¿æ¯æ¬¡äº’åŠ¨éƒ½ç»è¿‡èº«ä»½éªŒè¯å’Œæˆæƒï¼Œæ˜¾è‘—é™ä½äº†è¿è§„çš„é£é™©ï¼Œä½†åœ¨èµ„æºæœ‰é™çš„ç¯å¢ƒä¸­å¯èƒ½å¾ˆå›°éš¾ã€‚é€šè¿‡åˆ©ç”¨ä¸éœ€è¦ sidecar çš„èµ„æºå¼€é”€çš„ Istio ç¯å¢ƒæ¨¡å¼æœåŠ¡ç½‘æ ¼ï¼ŒIoTã€é›¶å”®å’ŒåŒ»ç–—ä¿å¥ç­‰è¾¹ç¼˜è®¡ç®—ç”¨ä¾‹å¯ä»¥çœŸå®åœ°è€ƒè™‘å®ç°é›¶ä¿¡ä»»åŸåˆ™å¹¶è¾¾æˆåˆè§„ï¼Œä»¥å¢å¼ºå…¶è¾¹ç¼˜ç¯å¢ƒçš„å®‰å…¨ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›åªæ˜¯ Istio çš„ç¯å¢ƒæ¨¡å¼å¯ä»¥å¸®åŠ©è§£å†³çš„ä¸€äº›å¸¸è§ sidecar æŒ‘æˆ˜ã€‚Istio çš„ç¯å¢ƒæ¨¡å¼è¿˜å¯ä»¥å¸®åŠ©é©¾é©­çš„å…¶ä»–èµ„æºéšœç¢åŒ…æ‹¬å‡å°‘ sidecar éƒ¨ç½²ç»å†çš„åº”ç”¨ç¨‹åºåœæœºæ—¶é—´å’Œè§£å†³å‡ºå£é…ç½®çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-çš„ç¯å¢ƒæ¨¡å¼æœ‰åŠ©äºç®€åŒ–åº”ç”¨æ“ä½œ&#34;&gt;Istio çš„ç¯å¢ƒæ¨¡å¼æœ‰åŠ©äºç®€åŒ–åº”ç”¨æ“ä½œ&lt;/h2&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-more-for-less/f2_hu17324861449245618460.webp 400w,
               /blog/istio-more-for-less/f2_hu3044859019090512890.webp 760w,
               /blog/istio-more-for-less/f2_hu3604874795143997432.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f2_hu17324861449245618460.webp&#34;
               width=&#34;760&#34;
               height=&#34;220&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å®‰å…¨åœ°é‡å¯æœåŠ¡ä»¥å‡çº§ sidecar ç‰ˆæœ¬æ¶‰åŠä¸‰ç§ä¸åŒçš„è®¾ç½®ï¼šæ§åˆ¶ Envoy æ’å‡ºå’Œæ‹’ç»æ–°è¿æ¥ï¼Œä¸ºæ´»åŠ¨è¿æ¥å…³é—­æä¾›å®½é™æ—¶é—´ï¼Œä»¥åŠåœ¨æ‰€æœ‰æ´»åŠ¨è¿æ¥å…³é—­æ—¶ç»ˆæ­¢ podã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çœ‹åˆ°çš„æœåŠ¡ç½‘æ ¼é‡‡ç”¨ä¸­æœ€å¸¸è§çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯åº”ç”¨æ‰€æœ‰è€…ç®¡ç† sidecar ç”Ÿå‘½å‘¨æœŸçš„æ“ä½œå¼€é”€å¢åŠ ã€‚ä¾‹å¦‚ï¼Œåœ¨ä» Istio 1.19 å‡çº§åˆ° 1.20 æ—¶ï¼Œé›†ç¾¤ä¸­çš„æ¯ä¸ªåº”ç”¨ pod éƒ½å¿…é¡»é‡æ–°å¯åŠ¨ä»¥åº”ç”¨æ–°çš„ä»£ç†ç‰ˆæœ¬ã€‚ä½ å¿…é¡»è€ƒè™‘ä»å·¥ä½œè´Ÿè½½ä¸­æ’å‡ºæµé‡ã€ç»ˆæ­¢è¿æ¥ä»¥åŠå¦‚æœ pod å› æš‚æ—¶ä¸å¯ç”¨çš„ä¾èµ–è€Œæ— æ³•é‡æ–°å¯åŠ¨ä¼šå‘ç”Ÿä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨æ—  sidecar çš„æœåŠ¡ç½‘æ ¼æ¶æ„æ—¶ï¼Œæ‰€æœ‰è¿™äº›è€ƒè™‘éƒ½æ¶ˆå¤±äº†ï¼ç¯å¢ƒæ¨¡å¼æ˜¾è‘—å‡å°‘äº†æ“ä½œè´Ÿæ‹…ï¼Œä¸ºå¼€å‘äººå‘˜æä¾›äº†æ›´å¤šæ—¶é—´ä¸“æ³¨äºå¼€å‘åº”ç”¨åŠŸèƒ½ï¼Œè€Œä¸æ˜¯ç®¡ç†å¤§è§„æ¨¡ä»£ç†çš„åŸºç¡€è®¾æ–½ç›¸å…³é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¸®åŠ©å…·ä½“åŒ–è¿™ä¸€ç‚¹ï¼Œè®©æˆ‘ä»¬è€ƒè™‘ä¸€äº›ä¸æ“ä½œæœåŠ¡ç½‘æ ¼ç›¸å…³çš„æŒ‘æˆ˜åœºæ™¯ï¼š&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-1-é€šè¿‡å‡çº§-istio-éƒ¨ç½²è§£å†³å¤æ‚æ€§&#34;&gt;åœºæ™¯ 1: é€šè¿‡å‡çº§ Istio éƒ¨ç½²è§£å†³å¤æ‚æ€§&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¤æ‚çš„ Istio éƒ¨ç½²ï¼Œå…¶ä¸­åŒ…å«è®¸å¤šè‡ªå®šä¹‰è®¾ç½®ï¼Œå‡çº§åˆ°æ–°ç‰ˆæœ¬ä¸€ç›´æ˜¯ä¸€ä¸ªä¸»è¦çš„ç—›ç‚¹ã€‚å‡çº§è¿‡ç¨‹ç»å¸¸å¯¼è‡´åœæœºã€é…ç½®åç§»å’Œæ„å¤–é—®é¢˜ï¼Œè¿™äº›éƒ½ä¼šæ‰°ä¹±æˆ‘ä»¬çš„æ“ä½œã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Istio ç¤¾åŒºçš„æ”¯æŒæ—¶é—´è¡¨ç›®å‰éµå¾ª N-1 æ”¯æŒçŠ¶æ€ï¼Œè¿™ç›¸å½“äºå¤§çº¦æ¯ 7-9 ä¸ªæœˆå‡çº§ä¸€æ¬¡ Istioã€‚Istio çš„é¢‘ç¹å‡çº§å¯èƒ½æ¶‰åŠé«˜åº¦å‚ä¸ï¼Œæ¶ˆé™¤ sidecar å¤§å¤§å‡å°‘äº†ä»…å› å°‘æ•°ç»„ä»¶å‡çº§å’Œç®¡ç†è€Œæ‰°ä¹±ä¸šåŠ¡æ“ä½œçš„é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸“æ³¨äºèŠ‚ç‚¹çº§ç®¡ç†è€Œä¸æ˜¯æœåŠ¡çº§ sidecarï¼Œæ“ä½œå›¢é˜Ÿå¯ä»¥æ›´é«˜æ•ˆåœ°æ‰§è¡Œå‡çº§ï¼Œå¹¶ä¸”æ— éœ€ä¾èµ–æˆ–åè°ƒåº”ç”¨å›¢é˜Ÿå°±æ›´æœ‰ä¿¡å¿ƒã€‚å€¼å¾—è€ƒè™‘çš„æ˜¯ï¼Œæ“ä½œæˆæœ¬èŠ‚çœå¯èƒ½çœŸçš„å¾ˆå¯è§‚ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¸¤åå·¥ç¨‹å¸ˆå®Œæˆ Istio å‡çº§æ‰€éœ€çš„æ—¶é—´ä» 16 å°æ—¶å‡å°‘åˆ°ä»… 2 å°æ—¶ï¼Œæ—¶é—´å’Œæˆæœ¬çš„èŠ‚çœå¯èƒ½æ˜¯å®è´¨æ€§çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-2-ç®¡ç†-sidecar-çš„äººæ‰å’Œèµ„æºæœ‰é™&#34;&gt;åœºæ™¯ 2: ç®¡ç† sidecar çš„äººæ‰å’Œèµ„æºæœ‰é™&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œè®©æ–°çš„å¼€å‘å›¢é˜Ÿä½¿ç”¨æœåŠ¡ç½‘æ ¼è€—æ—¶ä¸”éœ€è¦å¹¿æ³›åŸ¹è®­ sidecar ç®¡ç†ã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;å¼€å‘äººå‘˜ç»å¸¸è¡¨è¾¾å¯¹ç®¡ç† sidecar çš„æŒ«è´¥æ„Ÿï¼Œå¤šå¹´æ¥çš„ä¼—å¤šç¤¾åŒºè°ƒæŸ¥å·²è¯æ˜è¿™ä¸€ç‚¹ã€‚Istio çš„ç¯å¢ƒæ¨¡å¼ç›´æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼›é€šè¿‡å®Œå…¨æ¶ˆé™¤ sidecarï¼Œä¸å†éœ€è¦å¯¹ sidecar ç®¡ç†è¿›è¡Œå¹¿æ³›åŸ¹è®­ã€‚ä½¿ç”¨æ—  sidecar çš„æœåŠ¡ç½‘æ ¼çš„ç”¨æˆ·å¯ä»¥ä¿¡ä»»ï¼Œå¦‚æœåº”ç”¨éƒ¨ç½²åœ¨é›†ç¾¤ä¸Šï¼Œå…¶æµé‡é»˜è®¤åŠ å¯†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;åœºæ™¯-3-é›†æˆé—ç•™åº”ç”¨å¯¼è‡´ä¸­æ–­&#34;&gt;åœºæ™¯ 3: é›†æˆé—ç•™åº”ç”¨å¯¼è‡´ä¸­æ–­&lt;/h4&gt;
&lt;p&gt;&lt;em&gt;â€œæˆ‘ä»¬æœ‰å¤§é‡å¯¹ä¸šåŠ¡è¿è¥è‡³å…³é‡è¦çš„é—ç•™åº”ç”¨ã€‚å¼•å…¥åŸºäº sidecar çš„æœåŠ¡ç½‘æ ¼ä¼šæ‰°ä¹±è¿™äº›åº”ç”¨å¹¶éœ€è¦å¹¿æ³›çš„ä¿®æ”¹ã€‚â€&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Istio çš„ç¯å¢ƒæ¨¡å¼ï¼Œå°†æœåŠ¡æ·»åŠ åˆ°ç½‘æ ¼ç°åœ¨åªéœ€è¦åœ¨å‘½åç©ºé—´æˆ– pod ä¸Šåº”ç”¨ä¸€ä¸ªæ ‡ç­¾ã€‚ç„¶åï¼Œztunnel ä¼šæ‹¦æˆªæµé‡ï¼Œè€Œæ— éœ€é‡å¯åº”ç”¨ã€‚è¿™å¤§å¤§ç®€åŒ–äº†å¯¹å®¹å¿ä¸­æ–­æˆ–ä¿®æ”¹ç¨‹åº¦ä½çš„å…³é”®åº”ç”¨çš„å¼•å¯¼ï¼Œè¿™äº›åº”ç”¨æ­¤å‰å¹¶æœªè¢«è§†ä¸ºç½‘æ ¼çš„å¼ºæœ‰åŠ›å€™é€‰è€…ã€‚åº”ç”¨æ‰€æœ‰è€…ä¸å†éœ€è¦å…³å¿ƒå…¶å·¥ä½œè´Ÿè½½ä¸­çš„ sidecar çš„å­˜åœ¨ã€sidecar çš„ç”Ÿå‘½å‘¨æœŸæˆ– sidecar èµ„æºçš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ¯”è¾ƒç¯å¢ƒæ¨¡å¼çš„ä½¿ç”¨æˆæœ¬&#34;&gt;æ¯”è¾ƒç¯å¢ƒæ¨¡å¼çš„ä½¿ç”¨æˆæœ¬&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†è¯„ä¼°æœåŠ¡ç½‘æ ¼çš„èµ„æºä½¿ç”¨æƒ…å†µï¼Œæˆ‘ä»¬å°†åœ¨è§„æ¨¡ä¸Šéƒ¨ç½²ä¸€ä¸ªç¤ºä¾‹åº”ç”¨ã€‚è¿™ä»£è¡¨äº†ç”¨æˆ·åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å®é™…ä½¿ç”¨æœåŠ¡ç½‘æ ¼çš„æ–¹å¼ï¼Œå¹¶åŸºäºæˆ‘ä»¬ä¸å®¢æˆ·å…³äºä»–ä»¬å¦‚ä½•ä½¿ç”¨ Istio å’Œ Gloo Mesh çš„è®¨è®ºã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„æµ‹è¯•å·¥ä½œè´Ÿè½½ä»£è¡¨äº†ä¸€ä¸ªåœ¨ Namespace-Per-Tenant æ¨¡å¼ä¸‹é…ç½®çš„åº”ç”¨ï¼Œå…¶ä¸­æ¯ä¸ªç§Ÿæˆ·åœ¨ä¸€ä¸ªéš”ç¦»çš„å‘½åç©ºé—´ä¸­æ“ä½œï¼Œä»¥ç¡®ä¿èµ„æºå’Œå®‰å…¨åˆ†ç¦»ã€‚è¯¥åº”ç”¨è®¾è®¡ä¸ºç»å…¸çš„ 3 å±‚æ‰‡å‡ºæ¶æ„ï¼Œå…¶ä¸­ä¸€ä¸ªåˆå§‹æœåŠ¡å‘å¤šä¸ªä¸‹æ¸¸æœåŠ¡å‘é€è¯·æ±‚ï¼Œä¸å®¢æˆ·ç«¯é’ˆå¯¹å•ä¸ªæœåŠ¡çš„ç®€å•åŸºå‡†ç›¸æ¯”ï¼Œæä¾›äº†æ›´å…·ä»£è¡¨æ€§çš„é¢„æœŸæ€§èƒ½è¯„ä¼°ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-more-for-less/f3_hu8313275760897035267.webp 400w,
               /blog/istio-more-for-less/f3_hu5652853074685285988.webp 760w,
               /blog/istio-more-for-less/f3_hu15704182144860879846.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f3_hu8313275760897035267.webp&#34;
               width=&#34;760&#34;
               height=&#34;597&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨æ¯ä¸ªç§Ÿæˆ·ä¸­éƒ¨ç½²äº† 8 ä¸ªå®¹å™¨ï¼Œåˆ†ä¸ºä¸¤ä¸ªâ€œåº”ç”¨â€ï¼Œæ¯ä¸ªåº”ç”¨æœ‰å››ä¸ª podï¼Œå®‰æ’åœ¨ä¸‰å±‚ä¸­ã€‚åœ¨é›†ç¾¤ä¸­ï¼Œæˆ‘ä»¬æ€»å…±æœ‰ 200 ä¸ªå¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-more-for-less/f4_hu812153239131258086.webp 400w,
               /blog/istio-more-for-less/f4_hu10141221879140687171.webp 760w,
               /blog/istio-more-for-less/f4_hu10512267036798277917.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f4_hu812153239131258086.webp&#34;
               width=&#34;760&#34;
               height=&#34;596&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿â€œä¿è¯â€çš„æœåŠ¡è´¨é‡ç±»åˆ«ï¼Œæ¯ä¸ªåº”ç”¨éƒ½é…ç½®ä¸ºå…·æœ‰ç›¸åŒçš„ pod è¯·æ±‚å’Œé™åˆ¶ï¼š0.7 CPU æ ¸å¿ƒå’Œ 500MB å†…å­˜ã€‚ï¼ˆæˆ‘ä»¬ä½¿ç”¨çš„åº”ç”¨æ˜¯ &lt;a href=&#34;https://github.com/nicholasjackson/fake-service&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;fake-service&lt;/a&gt;ï¼Œä¸€ä¸ªç”± CNCF TAG Network è”åˆä¸»å¸­ Nic Jackson æ„å»ºçš„ç”¨äºæµ‹è¯•æœåŠ¡ç½‘æ ¼çš„ç¤ºä¾‹åº”ç”¨ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;è€ƒè™‘åˆ°ç”¨æˆ·å€¾å‘äºä»¥ä¸­ç­‰åˆ©ç”¨ç‡è¿è¡Œä»–ä»¬çš„é›†ç¾¤ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬åŸºçº¿åº”ç”¨åœ¨è´Ÿè½½ä¸‹çš„ç›®æ ‡ CPU åˆ©ç”¨ç‡è®¾ä¸º &amp;lt; 30%ï¼Œè¿™ç›¸å½“äºä¸€ä¸ªæ‹¥æœ‰ n2-standard-8 å®ä¾‹çš„ 21 èŠ‚ç‚¹é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç”Ÿæˆåˆæˆè´Ÿè½½ï¼Œæˆ‘ä»¬ä½¿ç”¨ &lt;a href=&#34;https://github.com/tsenart/vegeta&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Vegeta&lt;/a&gt;ï¼Œæ¯ä¸ªåº”ç”¨æœ‰ä¸€ä¸ªå®ä¾‹ï¼ˆæ¯ä¸ªå‘½åç©ºé—´ä¸¤ä¸ªï¼‰ã€‚è¿˜æœ‰å››ä¸ªèŠ‚ç‚¹ç”¨äºè´Ÿè½½ç”Ÿæˆå™¨ï¼Œå‘æ¯ä¸ªç¬¬ 1 å±‚å‰¯æœ¬æ¯ç§’å‘é€ 200 ä¸ªè¯·æ±‚ã€‚è¿™äº›è¯·æ±‚åœ¨æ˜¾ç¤ºçš„è¾¹ç¼˜ç”Ÿæˆåç»­è¯·æ±‚åˆ°ç¬¬ 2 å±‚å’Œç¬¬ 3 å±‚ï¼Œç»™æ¯ä¸ªç§Ÿæˆ·å¸¦æ¥ 2000 RPS çš„è´Ÿè½½ï¼Œæ•´ä¸ªé›†ç¾¤æ€»å…± 50000 RPSã€‚æˆ‘ä»¬ç¡®ä¿æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­çœ‹åˆ°çš„å»¶è¿Ÿç»“æœç¬¦åˆæˆ‘ä»¬å®šä¹‰çš„é¢„æœŸï¼Œæ²¡æœ‰è¯·æ±‚åœ¨ p50 è¶…è¿‡ 10ms æˆ–åœ¨ p95 è¶…è¿‡ 15msã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯¹æˆ‘ä»¬çš„åº”ç”¨è¿›è¡Œäº†åŸºçº¿è¯»æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ä»ç½‘æ ¼æ•°å­—ä¸­å‡å»ï¼Œä»¥äº†è§£æ¯ä¸ªé€‰é¡¹çš„æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬åˆ†åˆ«åœ¨ Istio sidecar å’Œç¯å¢ƒæ¨¡å¼ä¸‹éƒ¨ç½²äº†æˆ‘ä»¬çš„åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/solo-io/doing-more-for-less&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½ å¯ä»¥åœ¨ GitHub ä¸Šæ‰¾åˆ°æˆ‘ä»¬çš„è„šæœ¬å’Œè¾“å‡º&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-çš„ç¯å¢ƒæ¨¡å¼æ¯”-sidecar-èŠ‚çœè¶…è¿‡-70&#34;&gt;Istio çš„ç¯å¢ƒæ¨¡å¼æ¯” Sidecar èŠ‚çœè¶…è¿‡ 70%&lt;/h2&gt;
&lt;p&gt;é™¤äº†æˆ‘ä»¬ä¸Šé¢åˆ—å‡ºçš„æ‰€æœ‰æ“ä½œèŠ‚çœä¹‹å¤–ï¼Œ&lt;strong&gt;åœ¨ç¯å¢ƒæ¨¡å¼ä¸‹è¿è¡Œçš„ Istio æ˜¾è‘—åœ°æ¯”åœ¨ sidecar æ¨¡å¼ä¸‹è¿è¡Œçš„ Istio æ›´ä¾¿å®œ&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-more-for-less/f5_hu1703597395058763853.webp 400w,
               /blog/istio-more-for-less/f5_hu17684752221851402439.webp 760w,
               /blog/istio-more-for-less/f5_hu2994559504061492112.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f5_hu1703597395058763853.webp&#34;
               width=&#34;600&#34;
               height=&#34;371&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å³ä½¿åœ¨ä¸€ä¸ªè´Ÿè½½é‡çš„ã€é…ç½®è‰¯å¥½çš„é›†ç¾¤ä¸­ï¼ŒL4 ä¸‹çš„ç¯å¢ƒæ¨¡å¼ä½¿ç”¨çš„ CPU &lt;strong&gt;æ¯” sidecar æ¨¡å¼å°‘ 73%&lt;/strong&gt;ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹é›†ç¾¤ä¸­ï¼ŒIstio çš„ç¯å¢ƒæ¨¡å¼æ¯ä¸ªå‘½åç©ºé—´å‡å°‘äº† 1.28 ä¸ªæ ¸å¿ƒã€‚é‰´äºæˆ‘ä»¬ 25 ä¸ªå‘½åç©ºé—´çš„ç¯å¢ƒï¼Œè¿™ç›¸å½“äºèŠ‚çœ 32 ä¸ªæ ¸å¿ƒï¼Œæˆ–ç›¸å½“äº 4 å° 8 æ ¸æœºå™¨ã€‚é‚£æ˜¯æ¯ä¸ªæœˆèŠ‚çœ 1100 ç¾å…ƒï¼&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/istio-more-for-less/f6_hu16177736285739299000.webp 400w,
               /blog/istio-more-for-less/f6_hu5603653459885451271.webp 760w,
               /blog/istio-more-for-less/f6_hu17650931593125420850.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-more-for-less/f6_hu16177736285739299000.webp&#34;
               width=&#34;600&#34;
               height=&#34;371&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è€Œä¸”ï¼ŒCPU åˆ©ç”¨ç‡æä½ï¼šä»…å¢åŠ  4.78% çš„ CPU ä»¥åœ¨æˆ‘ä»¬çš„å·¥ä½œè´Ÿè½½ä¸­æ·»åŠ  mTLSï¼Œè€Œæ·»åŠ  sidecar ç›¸æ¯”å¢åŠ äº† 24.3%ã€‚å‡è®¾ä½ çš„é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹éƒ½è‡³å°‘æœ‰ 5% çš„ç©ºé—²å¼€é”€ï¼Œ&lt;strong&gt;ä½ å¯ä»¥åœ¨ä¸å¢åŠ ä»»ä½•é¢å¤–èŠ‚ç‚¹çš„æƒ…å†µä¸‹å®‰è£… Istio çš„ç¯å¢ƒæ¨¡å¼ï¼Œä»è€Œä½¿å…¶å®é™…ä¸Šå…è´¹è¿è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”¨æˆ·å¸Œæœ›åœ¨ Istio çš„ç¯å¢ƒæ¨¡å¼ä¸‹å®æ–½å®Œæ•´çš„ç¬¬ 7 å±‚åŠŸèƒ½å’Œç‰¹æ€§ï¼Œå¯ä»¥æ”¾å¿ƒåœ°è¿›è¡Œã€‚ä½ å¯ä»¥æŒ‰å‘½åç©ºé—´é€‰æ‹©åŠ å…¥ï¼Œä½†å³ä½¿æˆ‘ä»¬ä¸ºæ‰€æœ‰ç§Ÿæˆ·è¿è¡Œäº†ä¸€ä¸ª waypoint â€”â€” ä¸å®Œæ•´çš„ sidecar éƒ¨ç½²çš„ç‰¹æ€§ç›¸å½“ â€”â€” æˆ‘ä»¬ä»ç„¶çœ‹åˆ°äº†å®è´¨æ€§çš„ CPU èŠ‚çœã€‚è¯·ç•™æ„æˆ‘ä»¬å³å°†å‘å¸ƒçš„åšå®¢ï¼Œå®ƒå°†æ›´æ·±å…¥åœ°è®¨è®ºç¬¬ 7 å±‚çš„æˆæœ¬å’Œä»·å€¼ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç ”ç©¶éªŒè¯äº†æ„å»ºç¯å¢ƒæ•°æ®å¹³é¢çš„ç›®æ ‡ï¼šç®€åŒ–æœåŠ¡ç½‘æ ¼çš„æ“ä½œï¼ˆæ—  sidecarï¼‰ï¼Œä»¥åŠé™ä½åŸºç¡€è®¾æ–½æˆæœ¬ï¼ˆä¸ sidecars ç›¸æ¯”çš„æ˜¾è‘—æˆæœ¬èŠ‚çœï¼Œä»åŸºçº¿ä¸Šæ»¡è¶³ mTLS è¦æ±‚çš„é¢å¤–æˆæœ¬å¾ˆå°‘ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœç”¨æˆ·å†³å®šé€šè¿‡é‡‡ç”¨ waypoint ä»£ç†é‡‡ç”¨å®Œæ•´çš„ç¬¬ 7 å±‚åŠŸèƒ½é›†ï¼Œèµ„æºæˆæœ¬å°†è¿œä½äº Istio çš„ä¼ ç»Ÿ sidecar éƒ¨ç½²ï¼Œæ›´ä¸ç”¨è¯´æ›´æ˜“äºç®¡ç†å’Œæ”¹å–„å¼€å‘äººå‘˜çš„ä½“éªŒäº†ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨ Kubernetes ä¸­å®ç° mTLSï¼šé€‰é¡¹ä¸æ¨è</title>
      <link>https://cloudnativecn.com/blog/mtls-kubernetes/</link>
      <pubDate>Wed, 28 Aug 2024 00:00:00 +0000</pubDate>
      <guid>https://cloudnativecn.com/blog/mtls-kubernetes/</guid>
      <description>&lt;p&gt;åœ¨ä¸ Kubernetes ç”¨æˆ·çš„å¯¹è¯ä¸­ï¼Œç»å¸¸ä¼šå¬åˆ°è¿™æ ·ä¸€å¥è¯ï¼šâ€œæˆ‘åªæƒ³è®©æˆ‘çš„æ‰€æœ‰æµé‡åœ¨ Kubernetes ä¸­å®ç° mTLS åŠ å¯†ã€‚â€æœ‰æ—¶ï¼Œè¿™ç§è¦æ±‚è¿˜ä¼šåŠ ä¸Šä¸€äº›é™„åŠ æ¡ä»¶ï¼Œæ¯”å¦‚â€œâ€¦â€¦ä½†ä¸è¦æ¶‰åŠæœåŠ¡ç½‘æ ¼çš„å¤æ‚æ€§ã€‚â€&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªåˆç†çš„éœ€æ±‚ï¼Œå¸‚é¢ä¸Šæœ‰å¾ˆå¤šè§£å†³æ–¹æ¡ˆï¼Œå„è‡ªæœ‰ä¸åŒçš„å–èˆã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä»‹ç»å‡ ç§é€‰æ‹©ï¼Œå¹¶æä¾›ä¸€äº›å»ºè®®ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆè¦æ±‚æ˜¯â€œmTLSâ€ï¼Œè€Œä¸æ˜¯æ›´å¹¿æ³›çš„â€œåŠ å¯†â€ï¼ŸåŸå› æœ‰å¾ˆå¤šã€‚æœ‰äº›äººå¯èƒ½å·²ç»å¯¹å„ç§åŠ å¯†æœºåˆ¶è¿›è¡Œäº†ç ”ç©¶ï¼Œå¹¶å†³å®šä½¿ç”¨ mTLSï¼Œè€Œæœ‰äº›äººå¯èƒ½å¯¹å…¶ä»–é€‰é¡¹ä¸äº†è§£ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†ä¸»è¦å…³æ³¨ mTLSã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;ä¸ºä»€ä¹ˆé€‰æ‹©-mtls&#34;&gt;ä¸ºä»€ä¹ˆé€‰æ‹© mTLS&lt;/h2&gt;
&lt;p&gt;åœ¨æ·±å…¥æ¢è®¨ mTLS çš„æœ€ä½³æ–¹æ¡ˆä¹‹å‰ï¼Œæˆ‘ä»¬æœ‰å¿…è¦å…ˆç†è§£ä¸ºä»€ä¹ˆè¦ä½¿ç”¨å®ƒã€‚&lt;/p&gt;
&lt;p&gt;mTLS ä»£è¡¨åŒå‘ TLSï¼Œè¿™ä¸äº’è”ç½‘ä¸Šå¤§å¤šæ•°ä½¿ç”¨çš„åŠ å¯†ï¼ˆå¦‚ &lt;code&gt;https://&lt;/code&gt;ï¼‰ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯åŒå‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ ‡å‡†çš„äº’è”ç½‘åœºæ™¯ä¸­ï¼Œæµè§ˆå™¨ä¼šéªŒè¯ç›®æ ‡ç½‘ç«™çš„ TLS è¯ä¹¦ï¼Œä»¥ç¡®è®¤ &lt;code&gt;bank.com&lt;/code&gt; ç¡®å®ç”± &lt;code&gt;bank.com&lt;/code&gt; æ“ä½œï¼Œè€Œä¸æ˜¯é­é‡&lt;a href=&#34;https://en.wikipedia.org/wiki/Man-in-the-middle_attack&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸­é—´äººæ”»å‡»ï¼ˆMITMï¼‰&lt;/a&gt;ã€‚ç½‘ç«™ä¹Ÿå¯èƒ½ä¼šéªŒè¯ç”¨æˆ·ï¼Œä½†é€šå¸¸æ˜¯åœ¨åº”ç”¨å±‚è¿›è¡Œï¼Œè€Œä¸æ˜¯é€šè¿‡ TLSã€‚&lt;/p&gt;
&lt;p&gt;åŒå‘ TLS åˆ™æ˜¯ç±»ä¼¼çš„æœºåˆ¶ï¼Œä½†&lt;strong&gt;å®¢æˆ·ç«¯&lt;/strong&gt;ä¹Ÿä¼šæä¾›ä¸€ä¸ªè¯ä¹¦ï¼Œè¯¥è¯ä¹¦éœ€è¦è¢«æœåŠ¡å™¨éªŒè¯ã€‚æµè§ˆå™¨æŠ€æœ¯ä¸Šä¹Ÿæ”¯æŒè¿™ç§æ–¹å¼ï¼Œä½†ç”±äºæ“ä½œä¸Šçš„å¤æ‚æ€§ï¼Œå®é™…åº”ç”¨éå¸¸å°‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Kubernetes é›†ç¾¤ï¼ˆæˆ–å…¶ä»–åŸºç¡€è®¾æ–½ï¼‰å†…éƒ¨ä½¿ç”¨åŒå‘ TLS çš„å¥½å¤„ä¸åœ¨äº’è”ç½‘ä¸Šçš„åº”ç”¨ç±»ä¼¼ã€‚å®ƒæä¾›äº†&lt;strong&gt;èº«ä»½éªŒè¯&lt;/strong&gt;ï¼ˆåŒæ–¹éƒ½èƒ½è¯æ˜è‡ªå·±çš„èº«ä»½ï¼‰ã€&lt;strong&gt;æœºå¯†æ€§&lt;/strong&gt;ï¼ˆçªƒå¬è€…æ— æ³•çœ‹åˆ°äº¤æ¢çš„æ•°æ®ï¼‰ã€ä»¥åŠ&lt;strong&gt;å®Œæ•´æ€§&lt;/strong&gt;ï¼ˆæ•°æ®åœ¨ä¼ è¾“ä¸­ä¸ä¼šè¢«ç¯¡æ”¹ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›å±æ€§æ˜¯å®ç°[é›¶ä¿¡ä»»](&lt;a href=&#34;https://www.cloudflare.com/learning/security/glossary/what-is-zero-trust/#:~:text=Zero&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.cloudflare.com/learning/security/glossary/what-is-zero-trust/#:~:text=Zero&lt;/a&gt; Trust security is an,outside of the network perimeter.)å®‰å…¨ç­–ç•¥çš„é‡è¦ä¸€æ­¥ã€‚æ­¤å¤–ï¼Œå®ƒä»¬ä¹Ÿæ˜¯æ»¡è¶³å„ç§åˆè§„è¦æ±‚ï¼ˆæ— è®ºæ˜¯å…¬å¸å†…éƒ¨æ”¿ç­–è¿˜æ˜¯æ”¿åºœæ ‡å‡†ï¼Œå¦‚&lt;a href=&#34;https://www.nist.gov/standardsgov/compliance-faqs-federal-information-processing-standards-fips&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;FIPS&lt;/a&gt;ï¼‰çš„å¸¸è§è¦æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ç°-mtls-çš„é€‰é¡¹&#34;&gt;å®ç° mTLS çš„é€‰é¡¹&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ä½ å†³å®šè¦ä½¿ç”¨ mTLSï¼Œä½ éœ€è¦é€‰æ‹©å¦‚ä½•å»å®ç°å®ƒã€‚è¿™é‡Œæœ‰å‡ ç§ä¸åŒçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è‡ªè¡Œå®ç°&#34;&gt;è‡ªè¡Œå®ç°&lt;/h3&gt;
&lt;p&gt;ä¼ ç»Ÿçš„æ–¹æ³•æ˜¯ä¸ºæ‰€æœ‰åº”ç”¨ç¨‹åºé…ç½®è¯ä¹¦ï¼Œå¹¶ä¿®æ”¹åº”ç”¨ç¨‹åºä»¥ä½¿ç”¨è¿™äº›è¯ä¹¦ã€‚è¿™åœ¨å°è§„æ¨¡ç¯å¢ƒä¸­å¯èƒ½è¿˜ç®—ç®€å•ï¼Œä½†åœ¨å¤§è§„æ¨¡ç¯å¢ƒä¸­åˆ™æå…·æŒ‘æˆ˜æ€§ã€‚ä¸»è¦é—®é¢˜å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œéœ€è¦ç®¡ç†è¯ä¹¦çš„é…ç½®ã€‚è¿™åŒ…æ‹¬å‘½åæ–¹æ¡ˆçš„åˆ¶å®šã€ä¿¡ä»»æ ¹çš„åˆ†å‘ã€è¯ä¹¦çš„ç­¾å‘ã€ç¡®ä¿è¯ä¹¦çš„è½®æ¢å’Œæ›´æ–°ç­‰ã€‚å·¥å…·å¦‚ &lt;a href=&#34;https://cert-manager.io/docs/usage/csi-driver/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;cert-manager&lt;/code&gt;&lt;/a&gt; å’Œ &lt;a href=&#34;https://spiffe.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;SPIRE&lt;/code&gt;&lt;/a&gt; å¯ä»¥å¸®åŠ©è§£å†³éƒ¨åˆ†é—®é¢˜ã€‚ä½†æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè®¸å¤šç”¨æˆ·åœ¨é‡‡ç”¨è¿™ç§æ–¹æ³•æ—¶ï¼Œå¾€å¾€éœ€è¦ä¿®æ”¹å·²æœ‰çš„è¯ä¹¦åŸºç¡€è®¾æ–½ä»¥é€‚åº” Kubernetesã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç®¡ç†å¥½è¯ä¹¦åï¼Œè¿˜éœ€è¦ä¿®æ”¹åº”ç”¨ç¨‹åºä»¥å¼€å§‹ä½¿ç”¨ TLSï¼Œå¹¶æ­£ç¡®å‘é€å’ŒéªŒè¯å¯¹ç­‰è¯ä¹¦ã€‚å¯¹äºå¤§å‹çš„å¤šè¯­è¨€éƒ¨ç½²æ¥è¯´ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚è™½ç„¶è®©ä¸€ä¸ªåº”ç”¨ç¨‹åºå¼€å§‹ä½¿ç”¨ TLS é€šå¸¸æ˜¯ç›¸å¯¹ç®€å•çš„ï¼Œä½†å¾€å¾€ä¼šé‡åˆ°å„ç§æ£˜æ‰‹çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½ æ— æ³•åŸå­æ€§åœ°æ›´æ”¹æ•´ä¸ªé›†ç¾¤ã€‚åœ¨éƒ¨åˆ†çŠ¶æ€ä¸‹å¦‚ä½•å¤„ç†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•ç¡®ä¿æ‰€æœ‰æµé‡éƒ½åœ¨ä½¿ç”¨ TLSï¼Œè€Œä¸ä»…ä»…æ˜¯æŸäº›å­é›†ï¼Ÿåº”ç”¨ç¨‹åºå¯èƒ½æœ‰å¤šä¸ªå…¥å£å’Œå‡ºå£ç‚¹ï¼Œæ˜¯å¦å…¨éƒ¨è¦†ç›–ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚ä½•éªŒè¯å¯¹ç­‰è¯ä¹¦ï¼Ÿæ˜¯å¦æœ‰è·¨åº”ç”¨ç¨‹åºçš„é€šç”¨é€»è¾‘ï¼Ÿæ˜¯å¦æ”¯æŒæ‰€æœ‰ä½¿ç”¨çš„è¯­è¨€ï¼Ÿæ˜¯å¦åœ¨æ‰€æœ‰åº”ç”¨ä¸­ä¿æŒæ›´æ–°ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æ‰€æœ‰åº”ç”¨ç¨‹åºæ˜¯å¦éƒ½æ”¯æŒ TLSï¼Ÿæ˜¯å¦æ”¯æŒ&lt;strong&gt;åŒå‘&lt;/strong&gt; TLSï¼Ÿæ˜¯å¦æ”¯æŒä½ çš„&lt;a href=&#34;https://spiffe.io/docs/latest/spiffe-about/spiffe-concepts/#spiffe-id&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯ä¹¦æ–¹æ¡ˆ&lt;/a&gt;ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å…¬å¸èŒƒå›´å†…çš„æ¯ä¸ªåº”ç”¨ç¨‹åºä»£ç æ›´æ”¹çš„å¼€å‘å’Œæ¨å‡ºéœ€è¦å¤šé•¿æ—¶é—´ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼Œå¸¸å¸¸ä¼šä½¿ç”¨ä¸€äº›æ›´é«˜å±‚çš„é€‰é¡¹æ¥å¤„ç†è¿™äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºäº-sidecar-çš„æœåŠ¡ç½‘æ ¼&#34;&gt;åŸºäº Sidecar çš„æœåŠ¡ç½‘æ ¼&lt;/h3&gt;
&lt;p&gt;é‡‡ç”¨åŒå‘ TLS çš„æœ€å¸¸è§æ–¹æ³•ä¹‹ä¸€æ˜¯åŸºäº Sidecar çš„æœåŠ¡ç½‘æ ¼æ¶æ„ã€‚&lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; å’Œ &lt;a href=&#34;https://linkerd.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkerd&lt;/a&gt; æ˜¯å…¶ä¸­æœ€å—æ¬¢è¿çš„ä¸¤ä¸ªé€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;ä»é«˜å±‚æ¬¡ä¸Šæ¥è¯´ï¼Œä¸å…¶ä¿®æ”¹åº”ç”¨ç¨‹åºä»¥åœ¨ä»£ç ä¸­å¤„ç† TLSï¼Œä¸å¦‚åœ¨æ¯ä¸ªåº”ç”¨ç¨‹åºæ—è¾¹éƒ¨ç½²ä¸€ä¸ªå°å‹ç½‘ç»œä»£ç†ã€‚è¿™ä¸ªä»£ç†å¯ä»¥åšå¾ˆå¤šäº‹æƒ…ï¼ˆè¯·æŸ¥çœ‹ç›¸å…³é¡¹ç›®çš„æ–‡æ¡£ï¼ï¼‰ï¼Œä½†å¯¹äºæœ¬æ–‡è€Œè¨€ï¼Œé‡è¦çš„æ˜¯å®ƒä»¬å¯ä»¥è‡ªåŠ¨ä¸ºä½ å¤„ç†åŒå‘ TLSã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸æ›´æ”¹åº”ç”¨ç¨‹åºçš„æƒ…å†µä¸‹è‡ªåŠ¨ä¸ºç½‘æ ¼ä¸­çš„æ‰€æœ‰å·¥ä½œè´Ÿè½½ä¹‹é—´çš„æµé‡å¯ç”¨åŒå‘ TLSã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-istio-sidecar-æ¶æ„æ¦‚è¿°&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Istio Sidecar æ¶æ„æ¦‚è¿°&#34;
           src=&#34;https://cloudnativecn.com/blog/mtls-kubernetes/arch.svg&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Istio Sidecar æ¶æ„æ¦‚è¿°
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è‡³å°‘ä»æˆ‘ç†Ÿæ‚‰çš„ Istio å’Œ Linkerd çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›è§£å†³æ–¹æ¡ˆéƒ½èƒ½å¤„ç†ä¸Šé¢åˆ—å‡ºçš„&lt;a href=&#34;https://blog.howardjohn.info/posts/mtls-kubernetes/#do-it-yourself&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ£˜æ‰‹é—®é¢˜&lt;/a&gt;ã€‚ç‰¹åˆ«å€¼å¾—æ³¨æ„çš„æ˜¯è¿ç§»æ¡ˆä¾‹ã€‚è¿™ä¸¤ä¸ªé¡¹ç›®éƒ½ä¼šæ ¹æ®å¯¹ç­‰æ–¹æ˜¯å¦æ”¯æŒ TLSï¼Œè‡ªåŠ¨æ”¯æŒå‘é€å’Œæ¥å—æ˜æ–‡å’Œ TLSã€‚å®Œæˆè¿ç§»ï¼ˆå¦‚æœå¯èƒ½çš„è¯ï¼‰åï¼Œå¯ä»¥ä¸¥æ ¼é™å®šåªä½¿ç”¨åŒå‘ TLSã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•æ˜¯ Kubernetes ä¸­å¹¿æ³›éƒ¨ç½²åŒå‘ TLS çš„æœ€å¸¸è§é€‰æ‹©ï¼›æˆ‘ä¼°è®¡åœ¨ç”Ÿäº§ç¯å¢ƒä¸­çš„ä½¿ç”¨ç‡è¶…è¿‡95%ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡å®ƒæˆåŠŸåœ°è§£å†³äº†å¾ˆå¤šé—®é¢˜ï¼Œä½†ä¹Ÿå­˜åœ¨ä¸€äº›æ‘©æ“¦ç‚¹ã€‚æœ‰æ—¶æœåŠ¡ç½‘æ ¼è¢«è®¤ä¸ºè¿‡äºå¤æ‚æˆ–èµ„æºæ¶ˆè€—è¿‡é«˜ï¼ˆCPU/å†…å­˜æˆ–å»¶è¿Ÿï¼‰ã€‚è®¸å¤šè¿™äº›æ‹…å¿§ä¸æœåŠ¡ç½‘æ ¼çš„åŠŸèƒ½è¶…å‡º mTLS çš„èŒƒå›´æœ‰å…³ï¼›å¦‚æœä½ åªéœ€è¦ mTLSï¼Œè¿™ç§æ–¹æ³•å¯èƒ½ä¼šæ˜¾å¾—å¤§æå°ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºäºèŠ‚ç‚¹çš„-ambient-æ¨¡å¼&#34;&gt;åŸºäºèŠ‚ç‚¹çš„ Ambient æ¨¡å¼&lt;/h3&gt;
&lt;p&gt;Sidecar æ–¹æ³•ä¸ºæä¾›ä¸ mTLS æ— å…³çš„åŠŸèƒ½å¢åŠ äº†é¢å¤–çš„å¤æ‚æ€§ï¼Œè¿™ä¿ƒä½¿äº†æœåŠ¡ç½‘æ ¼æ–°æ¶æ„çš„å¼€å‘ï¼š &lt;a href=&#34;https://istio.io/latest/docs/ambient/overview/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient æ¨¡å¼&lt;/a&gt;ã€‚åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œéƒ¨ç½²äº†ä¸€ä¸ªæ¯èŠ‚ç‚¹ä»£ç†æ¥è‡ªåŠ¨å¤„ç†åŒå‘ TLSã€‚ç›®å‰ï¼Œåªæœ‰ Istio æä¾›è¿™ç§æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘å°†é‡ç‚¹ä»‹ç»å®ƒã€‚&lt;/p&gt;
&lt;p&gt;Istio Ambient ä¸“é—¨è®¾è®¡æ¥æ»¡è¶³â€œæˆ‘åªæƒ³è¦ Kubernetes ä¸Šçš„ mTLSâ€è¿™ä¸€ç”¨ä¾‹ã€‚å‡ ä¹æ¯ä¸€ä¸ªè®¾è®¡å†³ç­–éƒ½æºäºè¿™ä¸€åˆå§‹ç›®æ ‡ã€‚è™½ç„¶æœåŠ¡ç½‘æ ¼çš„å…¨å¥—åŠŸèƒ½ä»ç„¶å­˜åœ¨ï¼Œä½†å®ƒæä¾›äº†ä¸€ä¸ªä»â€œåŸå§‹ Kubernetesâ€åˆ°â€œå…¨å±€ mTLSâ€å†åˆ°â€œå…¨åŠŸèƒ½æœåŠ¡ç½‘æ ¼â€çš„å¹³æ»‘è¿‡æ¸¡ï¼Œè¯¦ç»†å†…å®¹å¯ä»¥å‚é˜…&lt;a href=&#34;https://blog.howardjohn.info/posts/flattening-curve/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘ä¹‹å‰çš„æ–‡ç« &lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äºè¿™ç§æ¨¡å¼é’ˆå¯¹åŒå‘ TLS ç”¨ä¾‹çš„ç‰¹æ®ŠåŒ–è®¾è®¡ï¼ŒAmbient æ¨¡å¼å¾€å¾€æ›´é€‚åˆå¹¶èƒ½å‡è½» Sidecar æ–¹æ³•çš„ä¸€äº›é¡¾è™‘ã€‚ä»…ä½¿ç”¨ Ambient æ¨¡å¼ä¸‹çš„ mTLS åŠŸèƒ½æ—¶ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æˆæœ¬å¤§å¹…é™ä½ï¼šåœ¨æŸäº›éƒ¨ç½²ä¸­ï¼ŒAmbient æ–¹æ³•çš„ CPU å’Œå†…å­˜æ¶ˆè€—å¯èƒ½ä»…ä¸º Sidecar æ–¹æ³•çš„ 1%ã€‚&lt;/li&gt;
&lt;li&gt;æ€§èƒ½æœ‰æ‰€æé«˜ï¼šå°½ç®¡è¿™å–å†³äºåº”ç”¨ç¨‹åºï¼Œä½†åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒæœåŠ¡ç½‘æ ¼çš„å»¶è¿Ÿå¼€é”€å¯èƒ½ä¼š&lt;a href=&#34;https://a-cup-of.coffee/blog/istio/#http-benchmark&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å‡å°‘çº¦ 20 å€&lt;/a&gt;ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™å¹¶ä¸æ„å‘³ç€ä½ çš„åº”ç”¨ç¨‹åºä¼šå¿« 20 å€ï¼Œè€Œåªæ˜¯å‡å°‘äº†å¼€é”€ï¼›è¿™å¯èƒ½æ„å‘³ç€ä½ çš„åº”ç”¨ç¨‹åºä» 1000ms åº”ç”¨å»¶è¿Ÿ + 1ms ç½‘æ ¼å»¶è¿Ÿï¼Œå˜ä¸º 1000ms åº”ç”¨å»¶è¿Ÿ + 0.05ms ç½‘æ ¼å»¶è¿Ÿã€‚å› æ­¤ï¼Œè¿™å¯èƒ½åªåœ¨ä½ çš„åº”ç”¨ç¨‹åºå·²ç»éå¸¸é«˜æ•ˆæ—¶æ‰æ›´ä¸ºé‡è¦ã€‚&lt;/li&gt;
&lt;li&gt;å…¼å®¹æ€§å¢å¼ºï¼šæœåŠ¡ç½‘æ ¼çš„ä¸»è¦ä¼˜åŠ¿ä¹‹ä¸€æ˜¯ &lt;a href=&#34;https://istio.io/latest/blog/2021/zero-config-istio/#traffic-management&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HTTP æµé‡ç®¡ç†&lt;/a&gt;ã€‚è™½ç„¶è¿™é€šå¸¸æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„åŠŸèƒ½ï¼Œä½†å®ƒä¹Ÿä»æ ¹æœ¬ä¸Šæ”¹å˜äº†åŠŸèƒ½ã€‚Ambient æ¨¡å¼é»˜è®¤ä¸æ‰§è¡Œæ­¤æ“ä½œï¼ˆä½†å…è®¸ç”¨æˆ·é€‰æ‹©åŠ å…¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¤æ‚æ€§é™ä½ï¼šç”±äºèŠ‚ç‚¹ä»£ç†æ˜¯ä¸ºæä¾› mTLS è€Œä¸“é—¨è®¾è®¡çš„ï¼Œå› æ­¤ä¸ä¼šæœ‰å…¶ä»–åŠŸèƒ½å¸¦æ¥çš„é™„å¸¦å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ€»ä½“è€Œè¨€ï¼ŒAmbient æ¨¡å¼æä¾›äº†ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥åœ¨ä¸å¸¦æ¥å¤ªå¤šè´Ÿé¢å½±å“çš„æƒ…å†µä¸‹éƒ¨ç½²å…¨å±€ mTLSã€‚å¯¹äºé‚£äº›åªæƒ³è¦ mTLS çš„ç”¨æˆ·æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªæœ€å¥½çš„èµ·ç‚¹ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†&lt;a href=&#34;https://istio.io/latest/docs/ambient/usage/waypoint/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€æ­¥é‡‡ç”¨å…¶ä»–ç½‘æ ¼åŠŸèƒ½&lt;/a&gt;çš„å¯èƒ½æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŸºäº-cni-çš„æ–¹æ³•&#34;&gt;åŸºäº CNI çš„æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;åœ¨è¿™äº›è®¨è®ºä¸­å¶å°”ä¼šæåˆ°çš„ä¸€ç§é€‰é¡¹æ˜¯ä½¿ç”¨åŸºäº CNIï¼ˆå®¹å™¨ç½‘ç»œæ¥å£ï¼‰çš„æ–¹æ³•ã€‚é—®é¢˜æ˜¯ï¼š&lt;strong&gt;ç›®å‰æ²¡æœ‰ CNI æ”¯æŒåŒå‘ TLSï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆä¸ºä»€ä¹ˆä¼šæåˆ°è¿™ç§æ–¹æ³•å‘¢ï¼ŸåŸå› æœ‰ä»¥ä¸‹å‡ ç‚¹ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;CNIï¼ˆé€šå¸¸ï¼‰å®ç°äº† &lt;code&gt;NetworkPolicy&lt;/code&gt;ã€‚è™½ç„¶è¿™ä¸æä¾› TLS çš„å¤§éƒ¨åˆ†ç‰¹æ€§ï¼ˆåŒ…æ‹¬åŠ å¯†ã€èº«ä»½éªŒè¯ã€å®Œæ•´æ€§å’Œæœºå¯†æ€§ï¼‰ï¼Œä½†å®ƒé€šå¸¸æ˜¯é›¶ä¿¡ä»»ç½‘ç»œæ¶æ„çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤ç»å¸¸è¢«æåŠã€‚æˆ‘åœ¨å¦ä¸€ç¯‡æ–‡ç« ä¸­ä¹Ÿå¼ºè°ƒäº†&lt;a href=&#34;https://blog.howardjohn.info/posts/netpol-api/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;NetworkPolicy çš„ä¸€äº›é—®é¢˜&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CNI é€šå¸¸å®ç°å…¶ä»–ç½‘ç»œåŠ å¯†æœºåˆ¶ã€‚ä¾‹å¦‚ï¼Œ&lt;a href=&#34;https://docs.tigera.io/calico/latest/network-policy/encrypt-cluster-pod-traffic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Calico æä¾›äº† WireGuard&lt;/a&gt;ï¼Œè€Œ Cilium æä¾›äº† &lt;a href=&#34;https://docs.cilium.io/en/latest/security/network/encryption-wireguard/#encryption-wg&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;WireGuard&lt;/a&gt; å’Œ &lt;a href=&#34;https://docs.cilium.io/en/latest/security/network/encryption-ipsec/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IPSec&lt;/a&gt;ã€‚è™½ç„¶è¿™äº›ä¸æ˜¯åŒå‘ TLSï¼Œä½†å®ƒä»¬åœ¨åŠŸèƒ½ä¸Šæœ‰ä¸€äº›é‡å ã€‚è™½ç„¶æˆ‘è®¤ä¸ºè¿™äº›å¾€å¾€è¢«è®¤ä¸ºæ¯”å®é™…æ›´ç­‰åŒï¼Œä½†è¿™å·²ç»è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´â€”â€”æˆ–è®¸å¯ä»¥è€ƒè™‘å†™ä¸€ç¯‡æ–‡ç« å¯¹è¿™äº›è¿›è¡Œé€ä¸€æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Cilium æä¾›äº†ä¸€é¡¹åä¸º&lt;a href=&#34;https://docs.cilium.io/en/latest/network/servicemesh/mutual-authentication/mutual-authentication&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŒå‘è®¤è¯&lt;/a&gt;çš„åŠŸèƒ½ã€‚è¿™é€šå¸¸è¢«ç§°ä¸º mTLSï¼Œå› ä¸ºå®ƒå—åˆ°äº† mTLS çš„å¯å‘ï¼Œå¹¶æœ‰ä¸€äº›é‡å çš„æƒ³æ³•ã€‚ç„¶è€Œï¼Œ&lt;strong&gt;è¿™å¹¶ä¸æ˜¯åŒå‘ TLS&lt;/strong&gt;ã€‚è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªè¯­ä¹‰ä¸Šçš„ç»†å¾®å·®åˆ«ï¼šå®ƒæ ¹æœ¬ä¸æä¾› TLSã€‚å› æ­¤ï¼Œå®ƒå±äºä¸Šè¿°é mTLS çš„é€‰é¡¹ï¼Œéœ€è¦è¿›è¡Œè¯„ä¼°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;å¦‚æœä½ çš„éœ€æ±‚æ˜¯â€œMutual TLSâ€ï¼Œè¿™ç§æ–¹æ³•ä¸å¯è¡Œã€‚å¦‚æœä½ çš„éœ€æ±‚æ›´çµæ´»ï¼Œè¿™äº›é€‰é¡¹ä¸­çš„ä¸€äº›å¯èƒ½ä¼šæ»¡è¶³ä½ çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å»ºè®®&#34;&gt;å»ºè®®&lt;/h2&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼šâ€œæˆ‘åªæƒ³åœ¨ Kubernetes ä¸Šå®ç° mTLSâ€ï¼Œæˆ‘è¯¥æ€ä¹ˆåŠï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¯¹äºå¤§å¤šæ•°ç”¨æˆ·ï¼Œ&lt;a href=&#34;https://blog.howardjohn.info/posts/mtls-kubernetes/#node-basedambient-mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient æ¨¡å¼&lt;/a&gt;å¯èƒ½æ˜¯æœ€åˆé€‚çš„ã€‚è¿™æ˜¯ä»¥æœ€å°çš„æˆæœ¬ã€å¤æ‚åº¦å’Œå¼€é”€ï¼Œåœ¨æ•´ä¸ªé›†ç¾¤ä¸Šéƒ¨ç½² mTLS çš„æœ€å¿«æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.howardjohn.info/posts/mtls-kubernetes/#sidecar-based-service-mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäº Sidecar çš„&lt;/a&gt;æ–¹æ³•ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼Œå¹¶ä¸”åœ¨ä¸šç•Œå¾—åˆ°äº†å¹¿æ³›åº”ç”¨ã€‚è¯·è®°ä½ï¼Œè¿™äº›æ–¹æ³•æä¾›äº†å¤§é‡è¶…å‡º mTLS çš„åŠŸèƒ½ï¼Œè¿™å–å†³äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œå¯èƒ½ä¼šæ˜¾å¾—å¤§æå°ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://blog.howardjohn.info/posts/mtls-kubernetes/#do-it-yourself&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªè¡Œå®ç°&lt;/a&gt;æå…·æŒ‘æˆ˜æ€§ã€‚è™½ç„¶è¿™å¯èƒ½é€‚åˆæ‹¥æœ‰éå¸¸ç²¾ç¡®çš„è¦æ±‚å’Œæå…¶å¥å£®çš„æ“ä½œå®è·µçš„ç»„ç»‡ï¼Œä½†è¿™æ˜¯æœ€åçš„é€‰æ‹©ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istio 1.23 å‘å¸ƒï¼šç¯å¢ƒæ¨¡å¼å‡çº§ä¸é‡è¦åŠŸèƒ½æ›´æ–°</title>
      <link>https://cloudnativecn.com/blog/istio-1-23-release/</link>
      <pubDate>Fri, 16 Aug 2024 07:52:21 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-1-23-release/</guid>
      <description>&lt;p&gt;2024 å¹´ 8 æœˆ 16 æ—¥ï¼ŒIstio 1.23 å‘å¸ƒã€‚è¯¥ç‰ˆæœ¬å¸¦æ¥äº†ç¯å¢ƒæ¨¡å¼çš„é‡å¤§æ”¹è¿›ï¼ŒåŒ…æ‹¬æ€§èƒ½æå‡ã€åŠŸèƒ½å¢å¼ºä»¥åŠ DNS è‡ªåŠ¨åˆ†é…å’Œé‡è¯•ç­–ç•¥çš„ä¼˜åŒ–ï¼ŒåŒæ—¶å®£å¸ƒé›†ç¾¤å†… Operator å°†è¢«å¼ƒç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¯å¢ƒæ¨¡å¼&#34;&gt;ç¯å¢ƒæ¨¡å¼&lt;/h2&gt;
&lt;p&gt;ç´§éšæœ€è¿‘å°† &lt;a href=&#34;https://istio.io/latest/blog/2024/ambient-reaches-beta/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¯å¢ƒæ¨¡å¼å‡çº§åˆ° Istio 1.22 çš„ Beta ç‰ˆ&lt;/a&gt;ä¹‹åï¼ŒIstio 1.23 å¸¦æ¥äº†ä¸€ç³»åˆ—é‡å¤§æ”¹è¿›ã€‚åœ¨ä¸ä¼—å¤šé‡‡ç”¨ç¯å¢ƒæ¨¡å¼çš„ç”¨æˆ·ç´§å¯†åˆä½œçš„åŸºç¡€ä¸Šï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨åŠªåŠ›è§£å†³æ”¶åˆ°çš„æ‰€æœ‰åé¦ˆã€‚è¿™äº›æ”¹è¿›åŒ…æ‹¬æ›´å¹¿æ³›çš„å¹³å°æ”¯æŒã€æ–°å¢åŠŸèƒ½ã€é”™è¯¯ä¿®å¤å’Œæ€§èƒ½æ”¹å–„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€å°éƒ¨åˆ†äº®ç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ waypoint ä»£ç†ä¸­æ”¯æŒ &lt;code&gt;DestinationRule&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ waypoint å’Œ ztunnel ä¸­æ”¯æŒ DNS &lt;code&gt;ServiceEntries&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒè·¨å‘½åç©ºé—´å…±äº« waypointã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ–°çš„ &lt;code&gt;Service&lt;/code&gt; å­—æ®µ &lt;code&gt;trafficDistribution&lt;/code&gt;ï¼Œå…è®¸ä¿æŒæµé‡åœ¨æœ¬åœ°åŒºåŸŸ/åœ°åŒºã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒåŒæ ˆå’Œ IPv6 é›†ç¾¤ã€‚&lt;/li&gt;
&lt;li&gt;ä¸º ztunnel æä¾›ä¸€ä¸ªæ–°çš„ Grafana ä»ªè¡¨æ¿ã€‚&lt;/li&gt;
&lt;li&gt;ä¸€ä¸ª Helm chartï¼Œç”¨äºä¸€æ¬¡æ€§å®‰è£…æ‰€æœ‰ç¯å¢ƒæ¨¡å¼ç»„ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ€§èƒ½æ”¹è¿›ï¼šæˆ‘ä»¬çš„æµ‹è¯•æ˜¾ç¤ºä¸ Istio 1.22 ç›¸æ¯”ï¼Œååé‡æé«˜äº†é«˜è¾¾ 50%ã€‚&lt;/li&gt;
&lt;li&gt;å¤§é‡çš„é”™è¯¯ä¿®å¤ï¼šæ”¹å–„ pod å¯åŠ¨ã€æ”¯æŒæ— é€‰æ‹©å™¨çš„ Servicesã€æ”¹å–„æ—¥å¿—è®°å½•ç­‰ï¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;dns-è‡ªåŠ¨åˆ†é…æ”¹è¿›&#34;&gt;DNS è‡ªåŠ¨åˆ†é…æ”¹è¿›&lt;/h3&gt;
&lt;p&gt;å¤šå¹´æ¥ï¼ŒIstio ä¸€ç›´æœ‰ä¸€ä¸ª &lt;a href=&#34;https://istio.io/latest/docs/ops/configuration/traffic-management/dns-proxy/#address-auto-allocation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ°å€åˆ†é…é€‰é¡¹&lt;/a&gt;ç”¨äº DNS ä»£ç†æ¨¡å¼ã€‚è¿™è§£å†³äº†ä¸€äº›æœåŠ¡è·¯ç”±çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Istio 1.23 ä¸­ï¼Œæ–°å¢äº†è¿™ä¸ªåŠŸèƒ½çš„å®ç°æ–¹å¼ã€‚åœ¨æ–°çš„æ–¹æ³•ä¸­ï¼Œåˆ†é…çš„ IP åœ°å€ä¼šæŒä¹…ä¿å­˜åœ¨ &lt;code&gt;ServiceEntry&lt;/code&gt; çš„ &lt;code&gt;status&lt;/code&gt; å­—æ®µä¸­ï¼Œç¡®ä¿å®ƒä»¬ä¸ä¼šæ”¹å˜ã€‚è¿™è§£å†³äº†æ—§æ–¹æ³•çš„é•¿æœŸå¯é æ€§é—®é¢˜ï¼Œå…¶ä¸­åˆ†é…æœ‰æ—¶ä¼šéšæœºæ›´æ¢å¹¶å¯¼è‡´é—®é¢˜ã€‚æ­¤å¤–ï¼Œè¿™ç§æ–¹æ³•æ›´æ ‡å‡†ï¼Œæ›´æ˜“äºè°ƒè¯•ï¼Œå¹¶ä½¿è¯¥åŠŸèƒ½ä¸ç¯å¢ƒæ¨¡å¼å…¼å®¹ï¼&lt;/p&gt;
&lt;p&gt;åœ¨ 1.23 ç‰ˆæœ¬ä¸­ï¼Œæ­¤æ¨¡å¼é»˜è®¤å…³é—­ï¼Œä½†å¯ä»¥é€šè¿‡ &lt;code&gt;PILOT_ENABLE_IP_AUTOALLOCATE=true&lt;/code&gt; å¯ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é‡è¯•æ”¹è¿›é¢„è§ˆ&#34;&gt;é‡è¯•æ”¹è¿›é¢„è§ˆ&lt;/h3&gt;
&lt;p&gt;åœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œå®ç°äº†å¯¹é»˜è®¤é‡è¯•ç­–ç•¥çš„æ”¹è¿›çš„åŠŸèƒ½é¢„è§ˆã€‚å†å²ä¸Šï¼Œé‡è¯•ä»…åœ¨ &lt;em&gt;å‡ºç«™&lt;/em&gt; æµé‡ä¸Šè¿›è¡Œã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè¿™æ˜¯ä½ æƒ³è¦çš„ï¼šè¯·æ±‚å¯ä»¥é‡è¯•åˆ°ä¸åŒçš„ podï¼Œè¿™æœ‰æ›´å¥½çš„æˆåŠŸæœºä¼šã€‚ç„¶è€Œï¼Œè¿™ç•™ä¸‹äº†ä¸€ä¸ªç¼ºå£ï¼šç»å¸¸åœ°ï¼Œä¸€ä¸ªè¯·æ±‚ä¼šå¤±è´¥ï¼Œä»…ä»…å› ä¸ºåº”ç”¨ç¨‹åºå·²ç»å…³é—­äº†æˆ‘ä»¬ä¿æŒæ´»åŠ¨çš„å¹¶å°è¯•é‡ç”¨çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»æ·»åŠ äº†æ£€æµ‹è¿™ç§æƒ…å†µï¼Œå¹¶é‡è¯•çš„åŠŸèƒ½ã€‚è¿™é¢„è®¡ä¼šå‡å°‘ç½‘æ ¼ä¸­å¸¸è§çš„ 503 é”™è¯¯çš„æ¥æºã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¯ä»¥é€šè¿‡ &lt;code&gt;ENABLE_INBOUND_RETRY_POLICY=true&lt;/code&gt; å¯ç”¨ã€‚é¢„è®¡åœ¨æœªæ¥ç‰ˆæœ¬ä¸­é»˜è®¤å¯ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;bookinfo-çš„æ–°æ¶‚è£…&#34;&gt;Bookinfo çš„æ–°æ¶‚è£…&lt;/h3&gt;
&lt;p&gt;1.23 ç‰ˆæœ¬çš„æ”¹è¿›ä¸ä»…é™äº Istio æœ¬èº«ï¼šåœ¨æ­¤ç‰ˆæœ¬ä¸­ï¼Œå¤§å®¶å–œçˆ±çš„ç¤ºä¾‹åº”ç”¨ Bookinfo ä¹Ÿè¿›è¡Œäº†ç¿»æ–°ï¼&lt;/p&gt;
&lt;p&gt;æ–°çš„åº”ç”¨ç‰¹æ€§æ›´ç°ä»£çš„è®¾è®¡ï¼Œå¹¶ä¸”æ€§èƒ½æ”¹è¿›è§£å†³äº† &lt;code&gt;productpage&lt;/code&gt; å’Œ &lt;code&gt;details&lt;/code&gt; æœåŠ¡ä¸­çš„ä¸€äº›æ„å¤–ç¼“æ…¢é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ”¹è¿›åçš„-bookinfo-åº”ç”¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ”¹è¿›åçš„ Bookinfo åº”ç”¨&#34; srcset=&#34;
               /blog/istio-1-23-release/bookinfo-browser_hu6652242973493874701.webp 400w,
               /blog/istio-1-23-release/bookinfo-browser_hu5044646105422680697.webp 760w,
               /blog/istio-1-23-release/bookinfo-browser_hu8938187941511664892.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-1-23-release/bookinfo-browser_hu6652242973493874701.webp&#34;
               width=&#34;760&#34;
               height=&#34;462&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ”¹è¿›åçš„ Bookinfo åº”ç”¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;å…¶ä»–äº®ç‚¹&#34;&gt;å…¶ä»–äº®ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ &lt;a href=&#34;https://github.com/wolfi-dev&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Wolfi&lt;/a&gt; å®¹å™¨åŸºç¡€ OS å‡çº§äº†æ— å‘è¡Œç‰ˆé•œåƒã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;istioctl proxy-status&lt;/code&gt; å‘½ä»¤è¿›è¡Œäº†æ”¹è¿›ï¼ŒåŒ…æ‹¬è‡ªæœ€åæ›´æ”¹ä»¥æ¥çš„æ—¶é—´ï¼Œä»¥åŠæ›´å¤šç›¸å…³çš„çŠ¶æ€å€¼ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¼ƒç”¨é›†ç¾¤å†…-operator&#34;&gt;å¼ƒç”¨é›†ç¾¤å†… Operator&lt;/h2&gt;
&lt;p&gt;ä¸‰å¹´å‰ï¼Œæˆ‘ä»¬ &lt;a href=&#34;https://istio.io/latest/docs/setup/install/operator/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ›´æ–°äº†æˆ‘ä»¬çš„æ–‡æ¡£&lt;/a&gt;ï¼Œä¸é¼“åŠ±åœ¨æ–°çš„ Istio å®‰è£…ä¸­ä½¿ç”¨é›†ç¾¤å†… operatorã€‚æˆ‘ä»¬ç°åœ¨å‡†å¤‡åœ¨ Istio 1.23 ä¸­æ­£å¼æ ‡è®°å®ƒä¸ºå·²å¼ƒç”¨ã€‚åˆ©ç”¨ operator çš„ç”¨æˆ· â€” æˆ‘ä»¬ä¼°è®¡ä¸åˆ°æˆ‘ä»¬ç”¨æˆ·åŸºç¡€çš„ 10% â€” å°†éœ€è¦è¿ç§»åˆ°å…¶ä»–å®‰è£…å’Œå‡çº§æœºåˆ¶ï¼Œä»¥ä¾¿å‡çº§åˆ° Istio 1.24 æˆ–æ›´é«˜ç‰ˆæœ¬ã€‚1.24 ç‰ˆæœ¬çš„é¢„è®¡å‘å¸ƒæ—¥æœŸä¸º 2024 å¹´ 11 æœˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å»ºè®®ç”¨æˆ·è½¬ç§»åˆ° Helm å’Œ istioctlï¼Œè¿™äº›ä»ç„¶å¾—åˆ° Istio é¡¹ç›®çš„æ”¯æŒã€‚è¿ç§»åˆ° istioctl æ˜¯å¾®ä¸è¶³é“çš„ï¼›è¿ç§»åˆ° Helm å°†éœ€è¦å·¥å…·ï¼Œæˆ‘ä»¬å°†åœ¨ 1.24 å‘å¸ƒæ—¶å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;å¸Œæœ›ç»§ç»­ä½¿ç”¨ operator æ¨¡å¼çš„ç”¨æˆ·åœ¨ &lt;a href=&#34;https://github.com/istio-ecosystem/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;istio-ecosystem&lt;/a&gt; ç»„ç»‡ä¸­æœ‰ä¸¤ä¸ªç¬¬ä¸‰æ–¹é€‰é¡¹ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æŸ¥çœ‹ &lt;a href=&#34;https://istio.io/latest/blog/2024/in-cluster-operator-deprecation-announcement/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘ä»¬çš„å¼ƒç”¨å…¬å‘Šåšå®¢æ–‡ç« &lt;/a&gt;ï¼Œä»¥è·å–æ›´å¤šå…³äºå˜æ›´çš„è¯¦æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæœ¬æ¬¡å‘å¸ƒçš„è¯¦æƒ…è¯·è§ &lt;a href=&#34;https://istio.io/latest/news/releases/1.23.x/announcing-1.23/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio åšå®¢&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>æ— éœ€ Kubernetes æµ‹è¯• Kubernetes ç½‘ç»œå®ç°</title>
      <link>https://cloudnativecn.com/blog/ztunnel-testing/</link>
      <pubDate>Mon, 22 Jul 2024 18:46:32 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/ztunnel-testing/</guid>
      <description>&lt;p&gt;ç”±äºåœ¨å¼€å‘è¿‡ç¨‹ä¸­æˆ‘&lt;a href=&#34;https://blog.howardjohn.info/posts/ideal-ci/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;çœŸçš„ä¸å–œæ¬¢ç­‰å¾…&lt;/a&gt;ï¼Œæ‰€ä»¥åœ¨æ„å»º Ztunnelï¼ˆä¸€ä¸ªä¸º Istio çš„æ–°&lt;a href=&#34;https://istio.io/latest/blog/2022/introducing-ambient-mesh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient æ¨¡å¼&lt;/a&gt;è®¾è®¡çš„åº•å±‚ç½‘ç»œä»£ç†ï¼‰æ—¶ï¼Œæˆ‘çš„é¦–è¦ä»»åŠ¡ä¹‹ä¸€ä¾¿æ˜¯ç¡®ä¿æµ‹è¯•çš„å¿«é€Ÿè¿›è¡Œï¼ˆåŒ…æ‹¬è¿è¡Œå’Œç¼–å†™æµ‹è¯•ï¼‰ï¼Œå¹¶ä¸”æ˜“äºè°ƒè¯•ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€ä»»åŠ¡é¢‡ä¸ºæ£˜æ‰‹ï¼Œå› ä¸ºåœ¨å¤§å¤šæ•°çœŸå®åœºæ™¯ä¸­ï¼ŒZtunnel é«˜åº¦ä¾èµ– Kubernetesã€‚è™½ç„¶å®ƒèƒ½å¤Ÿå®Œå…¨ç‹¬ç«‹äº Kubernetes è¿è¡Œï¼Œä½†è®¸å¤šå…³é”®ä»£ç è·¯å¾„çš„è¡Œä¸ºå®Œå…¨ä¸åŒï¼Œä½¿å¾—ä»…é€šè¿‡è¿™ç§æ–¹å¼è¿›è¡Œæµ‹è¯•å˜å¾—ä¸å¯è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸ºå…¸å‹çš„ Ztunnel éƒ¨ç½²æ¶æ„ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ztunnel-æ¶æ„æ¦‚è§ˆ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Ztunnel æ¶æ„æ¦‚è§ˆ&#34;
           src=&#34;https://cloudnativecn.com/blog/ztunnel-testing/ztunnel-architecture.svg&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Ztunnel æ¶æ„æ¦‚è§ˆ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤æ¶æ„ä¸­ï¼Œç”¨æˆ·å°†è¿è¡Œä¸€ä¸ªåŒ…å«å¤šä¸ªèŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤ã€‚æ¯ä¸ªèŠ‚ç‚¹ä¸Šéƒ½è¿è¡Œç€ä¸€ä¸ª Ztunnelï¼Œé…ç½®äº†å®¿ä¸»æœºå’Œæ¯ä¸ª pod çš„ç½‘ç»œæ ˆã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒZtunnel å®é™…ä¸Šè¿›å…¥äº†æ¯ä¸ª pod çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œå¹¶ä»£è¡¨å…¶å‘é€/æ¥æ”¶æµé‡ã€‚è¿™ä¸€ç‚¹éå¸¸å¥‡ç‰¹ä¸”é…·ç‚«ï¼Œä½†ä¹Ÿå¤§å¤§å¢åŠ äº†æµ‹è¯•çš„éš¾åº¦ï¼ï¼ˆ&lt;a href=&#34;https://www.youtube.com/watch?v=cuMeEhpyH5s&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯¦ç»†ä¿¡æ¯&lt;/a&gt;ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;åŠ é€Ÿæµ‹è¯•&#34;&gt;åŠ é€Ÿæµ‹è¯•&lt;/h2&gt;
&lt;p&gt;å¯åŠ¨å®Œæ•´çš„ Kubernetes ç¯å¢ƒã€é‡å»ºé•œåƒã€éƒ¨ç½²åˆ°æ¯ä¸ªèŠ‚ç‚¹çš„è¿‡ç¨‹éå¸¸ç¼“æ…¢ä¸”éš¾ä»¥è°ƒè¯•ã€‚&lt;/p&gt;
&lt;p&gt;é»„é‡‘æ ‡å‡†åº”è¯¥æ˜¯å°†æ‰€æœ‰æ“ä½œè¿è¡Œåœ¨ä¸€ä¸ªç®€å•çš„å•ä¸€äºŒè¿›åˆ¶æ–‡ä»¶ä¸­â€”â€”ä»…éœ€æ‰§è¡Œ &lt;code&gt;cargo test&lt;/code&gt;ã€‚è¿™ç§æ–¹å¼é¿å¼€äº†å¤æ‚çš„è®¾ç½®å’Œç¼“æ…¢çš„é‡å»ºï¼Œå¹¶ä½¿è°ƒè¯•å˜å¾—è½»è€Œæ˜“ä¸¾ï¼ˆå½“ç„¶ï¼Œä½ å¯ä»¥å°†è°ƒè¯•å™¨è¿æ¥åˆ°æ­£åœ¨è¿è¡Œçš„ podï¼Œä½†è¿™å¾ˆéº»çƒ¦ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è®¾ç½®ç½‘ç»œ&#34;&gt;è®¾ç½®ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å»é™¤æ— å°½çš„æŠ½è±¡å±‚ï¼ŒKubernetes pods å®é™…ä¸Šåªæ˜¯å‡ ä¸ª Linux å‘½åç©ºé—´å’ŒæŒ‚è½½çš„ç»„åˆã€‚Docker åœ¨è¿™æ–¹é¢ç®¡ç†å¾—å¾ˆå¥½ï¼Œ&lt;a href=&#34;https://github.com/p8952/bocker&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;bash&lt;/a&gt;ä¹Ÿå¯ä»¥ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç‰¹åˆ«å…³æ³¨çš„æ˜¯&lt;a href=&#34;https://man7.org/linux/man-pages/man7/network_namespaces.7.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç½‘ç»œå‘½åç©ºé—´&lt;/a&gt;ï¼Œå®ƒå¯ä»¥å®ç°ç½‘ç»œæ ˆçš„éš”ç¦»ã€‚æ¯ä¸ª pod éƒ½æœ‰è‡ªå·±çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œé€šè¿‡å„ç§æœºåˆ¶è¿æ¥ï¼Œå…è®¸ä¸åŒä¸€èŠ‚ç‚¹ä¸Šçš„å…¶ä»– podã€å…¶ä»–èŠ‚ç‚¹ä»¥åŠå¤–éƒ¨ç›®çš„åœ°é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;å¥½æ¶ˆæ¯æ˜¯åˆ›å»ºç½‘ç»œå‘½åç©ºé—´éå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ sudo ip netns add testing
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬çš„æœ€ç»ˆç›®æ ‡æ˜¯è®¾ç½®ä¸€ç³»åˆ—çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œå¤–è§‚ä¸æˆ‘ä»¬åœ¨ Kubernetes ä¸Šçš„çœŸå®æ¶æ„ç±»ä¼¼ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ‰€éœ€çš„ç½‘ç»œå‘½åç©ºé—´è®¾ç½®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ‰€éœ€çš„ç½‘ç»œå‘½åç©ºé—´è®¾ç½®&#34;
           src=&#34;https://cloudnativecn.com/blog/ztunnel-testing/ztunnel-network-namespaces.svg&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ‰€éœ€çš„ç½‘ç»œå‘½åç©ºé—´è®¾ç½®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ç½‘ç»œå‘½åç©ºé—´ä¹‹é—´å»ºç«‹è¿æ¥ç¨å¾®å¤æ‚ä¸€äº›ã€‚åƒ &lt;a href=&#34;https://www.cni.dev/docs/cnitool/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;code&gt;cnitool&lt;/code&gt;&lt;/a&gt; è¿™æ ·çš„å·¥å…·å¯ä»¥å¸®åŠ©æˆ‘ä»¬å®Œæˆï¼ˆå®ƒå®é™…ä¸Šæ‰§è¡Œäº†ä¸€äº› Kubernetes ç¯å¢ƒä¸­ç”¨äºè®¾ç½®ç½‘ç»œçš„ç›¸åŒé€»è¾‘ï¼Œä½†ä½œä¸º CLI å·¥å…·ï¼‰ï¼Œä½†ä½ ä¹Ÿå¯ä»¥å®Œå…¨æ‰‹åŠ¨æ“ä½œã€‚æˆ‘ä»¬é€‰æ‹©äº†åè€…ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼Œæˆ‘ä»¬çš„è®¾ç½®å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ¯ä¸ªæµ‹è¯•éƒ½æ‹¥æœ‰è‡ªå·±çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œé€šè¿‡ä¸€ä¸ªæ¡¥æ¥è®¾å¤‡ï¼ˆ&lt;code&gt;br0&lt;/code&gt;ï¼‰æ¥ä¿ƒè¿›èŠ‚ç‚¹ä¹‹é—´çš„æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªèŠ‚ç‚¹é…ç½®äº†ä¸€ä¸ª &lt;code&gt;veth&lt;/code&gt; è®¾å¤‡ã€‚ä¸€ç«¯æˆä¸ºèŠ‚ç‚¹ä¸Šçš„ &lt;code&gt;eth0&lt;/code&gt;ï¼Œå¦ä¸€ç«¯è¿æ¥åˆ°æ ¹å‘½åç©ºé—´ä¸­çš„ &lt;code&gt;br0&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ä¸ª pod éƒ½é…ç½®äº†ä¸€ä¸ª &lt;code&gt;veth&lt;/code&gt; è®¾å¤‡ã€‚ä¸€ç«¯æˆä¸º pod ä¸Šçš„ &lt;code&gt;eth0&lt;/code&gt;ï¼Œå¦ä¸€ç«¯ä½äºèŠ‚ç‚¹ç½‘ç»œå‘½åç©ºé—´ä¸­ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºæ¯ä¸ª pod è®¾ç½®è·¯ç”±ä»¥å°†æµé‡å‘é€åˆ°èŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºæ¯å¯¹èŠ‚ç‚¹è®¾ç½®è·¯ç”±ï¼Œä»¥å®ç°è·¨èŠ‚ç‚¹æµé‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ‰€éœ€çš„ç½‘ç»œè¿æ¥è®¾ç½®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ‰€éœ€çš„ç½‘ç»œè¿æ¥è®¾ç½®&#34;
           src=&#34;https://cloudnativecn.com/blog/ztunnel-testing/ztunnel-network-devices.svg&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ‰€éœ€çš„ç½‘ç»œè¿æ¥è®¾ç½®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;é™¤äº†æ ¹å‘½åç©ºé—´/æ¡¥æ¥è®¾å¤‡å¤–ï¼Œè¿™ä¸è®¸å¤šç°å®ä¸–ç•Œä¸­çš„ Kubernetes é›†ç¾¤çš„è¿è¡Œæ–¹å¼ç›¸åŒï¼ˆåœ¨ç°å®ä¸–ç•Œä¸­ï¼Œæ ¹å‘½åç©ºé—´æ˜¯ä¸¤å°æœºå™¨ä¹‹é—´çš„ç‰©ç†ç½‘ç»œï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥åœ¨&lt;a href=&#34;https://github.com/istio/ztunnel/blob/34fce85a6a2b2a85eb170a04096731e2ea4e0e9f/src/test_helpers/netns.rs#L194&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;æ‰¾åˆ°æ‰€æœ‰ç»†èŠ‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¿è¡Œæµ‹è¯•&#34;&gt;è¿è¡Œæµ‹è¯•&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬æœ‰äº†è¿™äº›å‘½åç©ºé—´ï¼Œæˆ‘ä»¬ä»ç„¶éœ€è¦ä¸€ç§å®é™…ä½¿ç”¨å®ƒä»¬çš„æ–¹æ³•ã€‚å¹¸è¿çš„æ˜¯ï¼ŒLinux å…è®¸åœ¨è¿è¡Œæ—¶æ›´æ”¹å½“å‰å‘½åç©ºé—´çº¿ç¨‹ï¼ˆè¿™æ˜¯æ¥ä¸‹æ¥é‡è¦çš„å†…å®¹ï¼‰ã€‚è¿™è®©æˆ‘ä»¬å»ºç«‹äº†ä¸€ä¸ªåŸºæœ¬çš„å¸®åŠ©å‡½æ•°ï¼ˆçœŸå®çš„ä»£ç ç¨å¾®æ›´å¤æ‚ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;run_in_namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;: &lt;span class=&#34;nb&#34;&gt;Fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;original_namespace&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_current_namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;original_namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™ä¸ªï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°ä»ä»»æ„çš„â€œpodsâ€æˆ–â€œnodesâ€æ‰§è¡Œä»£ç ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œæˆ‘ä»¬ä»ç„¶é¢ä¸´ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬çš„æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨ &lt;a href=&#34;https://tokio.rs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;tokio&lt;/a&gt; å¼‚æ­¥è¿è¡Œæ—¶ä¸­ï¼Œå®ƒä¼šæ ¹æ®éœ€è¦å°†æˆ‘ä»¬çš„å„ç§ä»»åŠ¡å®‰æ’åˆ°ç‰©ç†æ“ä½œç³»ç»Ÿçº¿ç¨‹ä¸Šï¼ˆç±»ä¼¼äº Go è¿è¡Œæ—¶çš„å·¥ä½œæ–¹å¼ï¼‰ã€‚ç”±äºç½‘ç»œå‘½åç©ºé—´æ˜¯çº¿ç¨‹ç›¸å…³çš„ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬çš„ä»»åŠ¡åœ¨çº¿ç¨‹ä¹‹é—´è·³è½¬æ—¶ï¼Œè¿™ä¸€åˆ‡éƒ½ä¼šå´©æºƒã€‚&lt;/p&gt;
&lt;p&gt;å¹¸è¿çš„æ˜¯ï¼ŒRust ç»™äº†æˆ‘ä»¬æ¯” Go æ›´å¤šçš„å…³äºå¼‚æ­¥è¿è¡Œæ—¶çš„çµæ´»æ€§â€”â€”æˆ‘ä»¬å¯ä»¥åŒæ—¶æ‹¥æœ‰å¤šä¸ªï¼å€Ÿæ­¤ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ„å»ºä¸€ä¸ªèƒ½å¤Ÿå¼‚æ­¥æ‰§è¡Œ &lt;code&gt;run_in_namespace&lt;/code&gt;ã€‚å¯¹äºæˆ‘ä»¬æƒ³è¦æ‰§è¡Œçš„æ¯ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæ–°çº¿ç¨‹å¹¶æ„å»ºä¸€ä¸ªä¸“ç”¨çš„å•çº¿ç¨‹å¼‚æ­¥è¿è¡Œæ—¶æ¥å¤„ç†å®ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;async&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;async_run_in_namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;Namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;: &lt;span class=&#34;nc&#34;&gt;async&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;Fn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;thread&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;spawn&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;move&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run_in_namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;||&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;tokio&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;runtime&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;Builder&lt;/span&gt;::&lt;span class=&#34;n&#34;&gt;new_current_thread&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;enable_all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;build&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;rt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;block_on&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;f&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;())&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;});&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä¸ºæ¯ä¸ªå‘½åç©ºé—´è¿è¡Œä¸€æ¬¡è¿™ä¸ªå‡½æ•°ï¼Œå› æ­¤è¿™é‡Œçš„å¼€é”€æ˜¯æœ€å°çš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦è¿è¡Œè®¸å¤šå°å‡½æ•°ï¼Œå¯ä»¥åœ¨é¡¶å±‚æ„å»ºä¸€ä¸ªæŠ½è±¡æ¥å‘é€å·¥ä½œåˆ°çº¿ç¨‹ä»¥æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬éœ€è¦çš„æœ€åä¸€ä»¶äº‹æ˜¯ä¸€ç§åˆç†çš„æ–¹æ³•æ¥è¯†åˆ«å¦‚ä½•è°ƒç”¨æ¯ä¸ªç›®çš„åœ°ã€‚è™½ç„¶å®ƒä»¬éƒ½ä¼šè¢«åˆ†é…ä¸€ä¸ª IPï¼ˆåŸºäºæˆ‘ä»¬ä»£ç ä¸­çš„ç®€å• IPAM ç­–ç•¥ï¼‰ï¼Œä½†æˆ‘ä»¬ä¸å¸Œæœ›æ¯ä¸ªæµ‹è¯•éƒ½å¿…é¡»çŒœæµ‹ IPã€‚ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬æ„å»ºäº†ä¸€ä¸ªç®€å•çš„åç§°è§£æå™¨ã€‚è¿™å°±åƒ DNSï¼Œä½†ç®€å•å¾—å¤šï¼šå¯¹äºæˆ‘ä»¬åˆ›å»ºçš„æ¯ä¸ªâ€œpodâ€ï¼Œæˆ‘ä»¬è®°å½•ä¸€ä¸ª&lt;code&gt;name -&amp;gt; IP&lt;/code&gt;çš„æ˜ å°„ï¼Œå¹¶å…è®¸æŸ¥æ‰¾ IPã€‚&lt;/p&gt;
&lt;p&gt;å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ï¼Œä¸€ä¸ªç®€å•çš„æµ‹è¯•å¯åŠ¨äº†3ä¸ª podsï¼ˆå®¢æˆ·ç«¯ã€æœåŠ¡å™¨å’Œ ztunnelï¼‰åœ¨ä¸€ä¸ªå•ä¸€èŠ‚ç‚¹ä¸Šçœ‹èµ·æ¥åƒè¿™æ ·ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#[tokio::test]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;async&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;k&#34;&gt;fn&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;simple_test&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(){&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ztunnel&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;manager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;deploy_ztunnel&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DEFAULT_NODE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;await&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;manager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;workload_builder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DEFAULT_NODE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;await&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run_tcp_server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;manager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;workload_builder&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;client&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;no&#34;&gt;DEFAULT_NODE&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;register&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;await&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;run_tcp_client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;manager&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;resolve&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;server&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;))&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;?&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// ... some assertions here }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ”¾å¼ƒæƒé™&#34;&gt;æ”¾å¼ƒæƒé™&lt;/h2&gt;
&lt;p&gt;ä¸Šè¿°è®¾ç½®æ•ˆæœå¾ˆå¥½ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;åŸºæœ¬ä¸Šè®¾ç½®çš„æ¯ä¸€æ­¥éƒ½éœ€è¦æå‡çš„ root æƒé™ï¼›è¿™è®©ç®€å•çš„ &lt;code&gt;cargo test&lt;/code&gt; æ¡ˆä¾‹çš„å¼€ç®±å³ç”¨å˜å¾—ä¹å‘³ï¼Œé€šå¸¸ä¹Ÿä¸å¯å–ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿™ä¼šåœ¨ä¸»æœºç¯å¢ƒä¸­æ±¡æŸ“å¤§é‡çš„å‘½åç©ºé—´ã€‚è™½ç„¶æˆ‘ä»¬æœ‰ä¸€äº›æ¸…ç†è¿‡ç¨‹ï¼Œä½†è¿™äº›å¹¶ä¸æ˜¯100%å¯é ï¼Œå¯èƒ½ä¼šå¯¼è‡´æ‚¬æŒ‚çš„å‘½åç©ºé—´é˜»ç¢æœªæ¥çš„æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è§£å†³æ‹¥æœ‰å¤ªå¤šå‘½åç©ºé—´çš„é—®é¢˜çš„æ–¹æ³•ï¼Ÿæ›´å¤šçš„å‘½åç©ºé—´ï¼ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦çš„ä¸ä»…ä»…æ˜¯ç½‘ç»œå‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://man7.org/linux/man-pages/man7/user_namespaces.7.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç”¨æˆ·å‘½åç©ºé—´&lt;/a&gt; å…è®¸æˆ‘ä»¬å®è´¨ä¸Šå‡è£…æ˜¯ UID 0 (root)ï¼ŒåŒæ—¶å®é™…ä¸Šå°†å…¶æ˜ å°„å›æˆ‘ä»¬åŸå§‹çš„ UIDã€‚è¿™é‡Œçš„åŠ›é‡åœ¨äºï¼Œåœ¨è¯¥å‘½åç©ºé—´ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€äº›æœ¬æ¥éœ€è¦ root æƒé™çš„äº‹æƒ…â€”â€”ç‰¹åˆ«æ˜¯åˆ›å»ºæ–°çš„ç½‘ç»œå‘½åç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œæˆ‘ä»¬ä¸èƒ½åšçš„ä¸€ä»¶äº‹æ˜¯ä¿®æ”¹ä¸»æœº-root æ‹¥æœ‰çš„æ–‡ä»¶ï¼ˆè¿™å°†æ˜¯æ˜æ˜¾çš„æƒé™è¿è§„ï¼‰ã€‚å°½ç®¡æˆ‘ä»¬å¯èƒ½å¯ä»¥ç»•è¿‡å®ƒä»¬ï¼Œä½†æˆ‘ä»¬åœ¨æµ‹è¯•ä¸­ä½¿ç”¨çš„å¾ˆå¤šå·¥å…·å–œæ¬¢è§¦æ‘¸ root æ–‡ä»¶ã€‚è¿™å†æ¬¡å¯ä»¥é€šè¿‡ &lt;a href=&#34;https://man7.org/linux/man-pages/man7/mount_namespaces.7.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;mount å‘½åç©ºé—´&lt;/a&gt; è§£å†³ï¼Œå®ƒå…è®¸æˆ‘ä»¬å°†æˆ‘ä»¬æ‹¥æœ‰çš„æ–‡ä»¶ç»‘å®šæŒ‚è½½åˆ°ä¸»æœº-root æ‹¥æœ‰çš„æ–‡ä»¶ä¸Šï¼Œè€Œä¸ä¼šå½±å“å‘½åç©ºé—´å¤–çš„äº‹ç‰©ã€‚&lt;/p&gt;
&lt;p&gt;å°†æ‰€æœ‰è¿™äº›æ”¾åœ¨ä¸€èµ·ï¼Œæˆ‘ä»¬æœ‰è¿™æ ·çš„ä¸œè¥¿ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-rust&#34; data-lang=&#34;rust&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kd&#34;&gt;let&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;original_uid&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;n&#34;&gt;get_uid&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;();&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;// é¦–å…ˆï¼Œè¿›å…¥ä¸€ä¸ªæ–°çš„ç”¨æˆ·å‘½åç©ºé—´ã€‚ unshare(CloneFlags::CLONE_NEWUSER).unwrap(); // å°†ç”¨æˆ·å‘½åç©ºé—´ä¸­çš„ root æ˜ å°„åˆ°æˆ‘ä»¬åŸå§‹çš„ UID File::create(&amp;#34;/proc/self/uid_map&amp;#34;).write(format!(&amp;#34;0 {original_uid} 1&amp;#34;)); // è®¾ç½®ä¸€ä¸ªæ–°çš„ç½‘ç»œå‘½åç©ºé—´ unshare(CloneFlags::CLONE_NEWNET).unwrap(); // è®¾ç½®ä¸€ä¸ªæ–°çš„æŒ‚è½½å‘½åç©ºé—´ unshare(CloneFlags::CLONE_NEWNS).unwrap(); // å°†ä¸€ä¸ªæ–‡ä»¶å¤¹åœ¨æˆ‘ä»¬çš„æ¯ä¸ªæµ‹è¯•ç›®å½•ä¸­æŒ‚è½½åˆ° /var/run/netns mount(tmp_dir.join(&amp;#34;netns&amp;#34;), &amp;#34;/var/run/netns&amp;#34;, MS_BIND); // ä¸€ä¸ªæ–¹ä¾¿æ‰‹åŠ¨è°ƒè¯•çš„å¥½å¸®æ‰‹ä¿¡æ¯ï¼Œå¦‚æœéœ€è¦çš„è¯ã€‚ let pid = get_pid(); eprintln!(&amp;#34;Starting test in {tmp_dir}. Debug with `sudo nsenter --mount --net -t {pid}`&amp;#34;);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚ä¸Šæ‰€è¿°ï¼Œä¸€ä¸ªæŠ€å·§æ˜¯ï¼Œè¿›å…¥å‘½åç©ºé—´æ˜¯æŒ‰çº¿ç¨‹è¿›è¡Œçš„ã€‚æˆ‘ä»¬éœ€è¦åœ¨ç”Ÿæˆä»»ä½•é¢å¤–çº¿ç¨‹ä¹‹å‰è®¾ç½®è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;Rust å®é™…ä¸Šä¸ºæˆ‘ä»¬æä¾›äº†è¿™æ ·åšçš„èƒ½åŠ›ï¼Œä½†è¿™æ„å‘³ç€æˆ‘ä»¬å¤±å»äº† &lt;code&gt;#[tokio::test]&lt;/code&gt; å®å¸®åŠ©ã€‚æˆ‘ä»¬å¯ä»¥å†™è‡ªå·±çš„å®ï¼Œä½†è¿™æœ‰ç‚¹ç—›è‹¦ã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡ &lt;a href=&#34;https://crates.io/crates/ctor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é“¾æ¥å™¨çš„èŠ±æ‹›&lt;/a&gt; æˆ‘ä»¬å¯ä»¥è¿«ä½¿æˆ‘ä»¬çš„ä»£ç åœ¨è¿›ç¨‹æ‰§è¡Œçš„éå¸¸æ—©æœŸè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;Go ä¸­çš„ç±»ä¼¼æ–¹æ³•ä¹Ÿæœ‰æ•ˆï¼ˆè¯·å‚è§ &lt;a href=&#34;https://github.com/howardjohn/unshare-go&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘å†™çš„å¸®åŠ©åº“&lt;/a&gt;ï¼‰ï¼Œå®é™…ä¸Šåœ¨é‚£é‡Œæ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºè®¾ç½®å¿…é¡»åœ¨ Go è¿è¡Œæ—¶å¯åŠ¨ä¹‹å‰å®Œæˆï¼ˆè¿™é€šå¸¸åœ¨ä»»ä½•ç”¨æˆ·ä»£ç è¿è¡Œä¹‹å‰å¾ˆä¹…ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æœ‰äº†æ‰€æœ‰è¿™äº›è®¾å¤‡ï¼Œä¸€ä¸ªå®Œæ•´çš„æµ‹è¯•åªéœ€è¦å¤§çº¦ 200 æ¯«ç§’ã€‚ä¸€åˆ‡éƒ½åœ¨ä¸€ä¸ªå•ä¸€è¿›ç¨‹ä¸­è¿è¡Œï¼Œä½¿è°ƒè¯•å˜å¾—è½»è€Œæ˜“ä¸¾ã€‚æ‰€æœ‰çš„æµ‹è¯•ä¹Ÿéƒ½æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œå› æ­¤å¯ä»¥å®Œå…¨å¹¶è¡Œè¿è¡Œæµ‹è¯•ï¼ˆåŒ…æ‹¬ç›¸åŒçš„æµ‹è¯•ï¼Œç”¨äºå‹åŠ›æµ‹è¯•ä»¥æ¶ˆé™¤æµ‹è¯•ç¼ºé™·ï¼‰ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>SAPwnedï¼šSAP AI æ¼æ´æš´éœ²å®¢æˆ·äº‘ç¯å¢ƒå’Œç§æœ‰ AI å·¥ä»¶</title>
      <link>https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/</link>
      <pubDate>Thu, 18 Jul 2024 19:23:50 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/</guid>
      <description>&lt;h2 id=&#34;ai-æ˜¯å¦å­˜åœ¨éš”ç¦»é—®é¢˜&#34;&gt;AI æ˜¯å¦å­˜åœ¨éš”ç¦»é—®é¢˜ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;åœ¨è¿‡å»çš„å‡ ä¸ªæœˆé‡Œï¼Œæˆ‘ä»¬ Wiz ç ”ç©¶å›¢é˜Ÿå¯¹å¤šä¸ª AI æœåŠ¡æä¾›å•†è¿›è¡Œäº†å¹¿æ³›çš„ç§Ÿæˆ·éš”ç¦»ç ”ç©¶ã€‚æˆ‘ä»¬è®¤ä¸ºè¿™äº›æœåŠ¡æ›´å®¹æ˜“å—åˆ°ç§Ÿæˆ·éš”ç¦»æ¼æ´çš„å½±å“ï¼Œå› ä¸ºå®ƒä»¬å…è®¸ç”¨æˆ·è¿è¡Œ AI æ¨¡å‹å’Œåº”ç”¨ç¨‹åºï¼Œè¿™ç­‰åŒäºæ‰§è¡Œä»»æ„ä»£ç ã€‚éšç€ AI åŸºç¡€è®¾æ–½è¶Šæ¥è¶Šæˆä¸ºè®¸å¤šå•†ä¸šç¯å¢ƒçš„æ ‡é…ï¼Œè¿™äº›æ”»å‡»çš„å½±å“æ­£å˜å¾—è¶Šæ¥è¶Šé‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†åœ¨å³å°†ä¸¾è¡Œçš„ Black Hat ä¼šè®®ä¸Šå±•ç¤ºè¿™ä¸ªç ”ç©¶é¡¹ç›®çš„å‘ç°ï¼Œåœ¨æˆ‘ä»¬çš„ä¼šè®®â€œéš”ç¦»è¿˜æ˜¯å¹»è§‰ï¼Ÿä¸ºä¹è¶£å’Œæƒé‡é»‘å®¢æ”»å‡» AI åŸºç¡€è®¾æ–½æä¾›å•†â€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªé¡¹ç›®çš„æœ€æ–°ä¸€æœŸä¸­ï¼Œæˆ‘ä»¬ç ”ç©¶äº† SAP çš„ AI äº§å“ï¼Œæ°å½“åœ°å‘½åä¸ºâ€œSAP AI Coreâ€ã€‚è¿™æ˜¯æˆ‘ä»¬ç³»åˆ—ä¸­çš„ç¬¬ä¸‰ä»½æŠ¥å‘Šï¼Œç»§æˆ‘ä»¬å¯¹ Hugging Face å’Œ Replicate å¹³å°çš„ç ”ç©¶ä¹‹åã€‚æœ¬åšå®¢å°†æ¢ç´¢æ¼æ´é“¾å¹¶è¯¦ç»†ä»‹ç»æˆ‘ä»¬çš„å‘ç°ï¼Œç§°ä¸ºâ€œSAPwnedâ€ï¼ŒåŒæ—¶ä¹Ÿå°†è§‚å¯Ÿåˆ°ç¡®ä¿ç®¡ç† AI å¹³å°å®‰å…¨çš„æ½œåœ¨å½±å“å’Œæ›´å¹¿æ³›çš„å¯ç¤ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‰§è¡Œæ‘˜è¦&#34;&gt;æ‰§è¡Œæ‘˜è¦&lt;/h2&gt;
&lt;p&gt;AI è®­ç»ƒè¿‡ç¨‹éœ€è¦è®¿é—®å¤§é‡æ•æ„Ÿå®¢æˆ·æ•°æ®ï¼Œè¿™ä½¿ AI è®­ç»ƒæœåŠ¡æˆä¸ºæ”»å‡»è€…çš„è¯±äººç›®æ ‡ã€‚SAP AI Core æä¾›ä¸ HANA åŠå…¶ä»–äº‘æœåŠ¡çš„é›†æˆï¼Œé€šè¿‡äº‘è®¿é—®å¯†é’¥è®¿é—®å®¢æˆ·çš„å†…éƒ¨æ•°æ®ã€‚è¿™äº›å‡­æ®éå¸¸æ•æ„Ÿï¼Œæˆ‘ä»¬çš„ç ”ç©¶ç›®æ ‡æ˜¯ç¡®å®šæ½œåœ¨çš„æ¶æ„è¡Œä¸ºè€…æ˜¯å¦èƒ½å¤Ÿè®¿é—®è¿™äº›å®¢æˆ·ç§˜å¯†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯¹ SAP AI Core çš„ç ”ç©¶å§‹äºä½¿ç”¨ SAP çš„åŸºç¡€è®¾æ–½æ‰§è¡Œåˆæ³•çš„ AI è®­ç»ƒç¨‹åºã€‚é€šè¿‡æ‰§è¡Œä»»æ„ä»£ç ï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¨ªå‘ç§»åŠ¨å¹¶æ¥ç®¡æœåŠ¡â€”â€”è·å–å®¢æˆ·çš„ç§æœ‰æ–‡ä»¶ä»¥åŠå®¢æˆ·äº‘ç¯å¢ƒçš„å‡­æ®ï¼šAWSã€Azureã€SAP HANA Cloud ç­‰ã€‚æˆ‘ä»¬å‘ç°çš„æ¼æ´å¯èƒ½å…è®¸æ”»å‡»è€…è®¿é—®å®¢æˆ·æ•°æ®å¹¶æ±¡æŸ“å†…éƒ¨å·¥ä»¶â€”â€”è”“å»¶åˆ°ç›¸å…³æœåŠ¡å’Œå…¶ä»–å®¢æˆ·ç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬è·å¾—çš„è®¿é—®æƒé™å…è®¸æˆ‘ä»¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ SAP çš„å†…éƒ¨å®¹å™¨æ³¨å†Œè¡¨ä¸Šè¯»å–å’Œä¿®æ”¹ Docker é•œåƒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ Google å®¹å™¨æ³¨å†Œè¡¨ä¸Šè¯»å–å’Œä¿®æ”¹ SAP çš„ Docker é•œåƒ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;åœ¨ SAP çš„å†…éƒ¨ Artifactory æœåŠ¡å™¨ä¸Šè¯»å–å’Œä¿®æ”¹å·¥ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è·å¾— SAP AI Core çš„ Kubernetes é›†ç¾¤çš„é›†ç¾¤ç®¡ç†å‘˜æƒé™&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®¿é—®å®¢æˆ·çš„äº‘å‡­è¯å’Œç§æœ‰ AI å·¥ä»¶&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æˆ‘ä»¬ç ”ç©¶å‘ç°çš„é€æ­¥æ’å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æˆ‘ä»¬ç ”ç©¶å‘ç°çš„é€æ­¥æ’å›¾&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f1_hu18243618901166088127.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f1_hu714737452478308898.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f1_hu7898719421972672962.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f1_hu18243618901166088127.webp&#34;
               width=&#34;760&#34;
               height=&#34;428&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æˆ‘ä»¬ç ”ç©¶å‘ç°çš„é€æ­¥æ’å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å‘ç°è¿™äº›é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯æ”»å‡»è€…å¯ä»¥è¿è¡Œæ¶æ„ AI æ¨¡å‹å’Œè®­ç»ƒç¨‹åºï¼Œè¿™æœ¬è´¨ä¸Šæ˜¯ä»£ç ã€‚åœ¨å®¡æŸ¥äº†å‡ ä¸ªä¸»è¦ AI æœåŠ¡ä¹‹åï¼Œæˆ‘ä»¬è®¤ä¸ºè¡Œä¸šå¿…é¡»æ”¹è¿›å…¶åœ¨è¿è¡Œ AI æ¨¡å‹æ—¶çš„éš”ç¦»å’Œæ²™ç®±æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰æ¼æ´å·²æŠ¥å‘Šç»™ SAP çš„å®‰å…¨å›¢é˜Ÿï¼Œå¹¶ç”± SAP ä¿®å¤ï¼Œå¦‚å…¶ç½‘ç«™æ‰€ç¡®è®¤ã€‚æˆ‘ä»¬æ„Ÿè°¢ä»–ä»¬çš„åˆä½œã€‚æ²¡æœ‰å®¢æˆ·æ•°æ®å—åˆ°æ³„éœ²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»‹ç»ç ”ç©¶å¼€å§‹&#34;&gt;ä»‹ç»ï¼šç ”ç©¶å¼€å§‹&lt;/h2&gt;
&lt;p&gt;SAP AI Core æ˜¯ä¸€é¡¹æœåŠ¡ï¼Œå…è®¸ç”¨æˆ·ä»¥å¯æ‰©å±•å’Œç®¡ç†çš„æ–¹å¼åœ¨ SAP çš„åºå¤§äº‘èµ„æºä¸Šå¼€å‘ã€è®­ç»ƒå’Œè¿è¡Œ AI æœåŠ¡ã€‚ç±»ä¼¼äºå…¶ä»–äº‘æä¾›å•†ï¼ˆå’Œ AI åŸºç¡€è®¾æ–½æä¾›å•†ï¼‰ï¼Œå®¢æˆ·çš„ä»£ç åœ¨ SAP çš„å…±äº«ç¯å¢ƒä¸­è¿è¡Œâ€”â€”æ„æˆè·¨ç§Ÿæˆ·è®¿é—®çš„é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„ç ”ç©¶å§‹äºä½œä¸º SAP å®¢æˆ·ï¼ŒåŸºæœ¬æƒé™å…è®¸æˆ‘ä»¬åˆ›å»º AI é¡¹ç›®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬é¦–å…ˆåœ¨ SAP AI Core ä¸Šåˆ›å»ºäº†ä¸€ä¸ªå¸¸è§„ AI åº”ç”¨ç¨‹åºã€‚SAP çš„å¹³å°å…è®¸æˆ‘ä»¬æä¾›ä¸€ä¸ª Argo Workflow æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åè¿‡æ¥ç”Ÿæˆäº†ä¸€ä¸ªæ ¹æ®æˆ‘ä»¬çš„é…ç½®çš„æ–° Kubernetes Podã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-sap-ai-core-ä¸Šçš„-argo-å·¥ä½œæµé…ç½®ç¤ºä¾‹&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;SAP AI Core ä¸Šçš„ Argo å·¥ä½œæµé…ç½®ç¤ºä¾‹&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f2_hu12895675789476928815.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f2_hu6596618348738739739.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f2_hu6071594457489936310.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f2_hu12895675789476928815.webp&#34;
               width=&#34;760&#34;
               height=&#34;516&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      SAP AI Core ä¸Šçš„ Argo å·¥ä½œæµé…ç½®ç¤ºä¾‹
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™å…è®¸æˆ‘ä»¬åœ¨ Pod ä¸­æŒ‰è®¾è®¡è¿è¡Œæˆ‘ä»¬è‡ªå·±çš„ä»»æ„ä»£ç â€”â€”ä¸éœ€è¦ä»»ä½•æ¼æ´ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬çš„ç¯å¢ƒå—åˆ°äº†ç›¸å½“å¤§çš„é™åˆ¶ã€‚æˆ‘ä»¬å¾ˆå¿«æ„è¯†åˆ°ï¼Œæˆ‘ä»¬çš„ Pod çš„ç½‘ç»œè®¿é—®éå¸¸æœ‰é™ï¼Œè¿™æ˜¯ç”± Istio ä»£ç† sidecar å¼ºåˆ¶æ‰§è¡Œçš„â€”â€”å› æ­¤ï¼Œæ‰«æå†…éƒ¨ç½‘ç»œå¯¹æˆ‘ä»¬æ¥è¯´ä¸æ˜¯ä¸€ä¸ªé€‰é¡¹ã€‚è‡³å°‘ç°åœ¨ä¸æ˜¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bug-1-é€šè¿‡-1337-çš„åŠ›é‡ç»•è¿‡ç½‘ç»œé™åˆ¶&#34;&gt;Bug #1: é€šè¿‡ 1337 çš„åŠ›é‡ç»•è¿‡ç½‘ç»œé™åˆ¶&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆå°è¯•çš„æ˜¯ä¸ºæˆ‘ä»¬çš„ Pod é…ç½®â€œæœ‰è¶£â€çš„æƒé™ã€‚ç„¶è€Œï¼ŒSAP çš„å‡†å…¥æ§åˆ¶å™¨é˜»æ­¢äº†æˆ‘ä»¬å°è¯•çš„æ‰€æœ‰å±é™©å®‰å…¨é€‰é¡¹â€”â€”ä¾‹å¦‚ï¼Œä»¥&lt;code&gt;root&lt;/code&gt;èº«ä»½è¿è¡Œæˆ‘ä»¬çš„å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡å¦‚æ­¤ï¼Œæˆ‘ä»¬å‘ç°å‡†å…¥æ§åˆ¶å™¨æœªèƒ½é˜»æ­¢ä¸¤ç§æœ‰è¶£çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ä¸ªæ˜¯&lt;code&gt;shareProcessNamespace&lt;/code&gt;ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä¸æˆ‘ä»¬çš„ sidecar å®¹å™¨å…±äº«è¿›ç¨‹å‘½åç©ºé—´ã€‚ç”±äºæˆ‘ä»¬çš„ sidecar æ˜¯ Istio ä»£ç†ï¼Œæˆ‘ä»¬è·å¾—äº†å¯¹ Istio çš„é…ç½®çš„è®¿é—®æƒé™ï¼ŒåŒ…æ‹¬å¯¹é›†ç¾¤çš„é›†ä¸­å¼ Istiod æœåŠ¡å™¨çš„è®¿é—®ä»¤ç‰Œã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é€šè¿‡æˆ‘ä»¬çš„-sidecar-å®¹å™¨è®¿é—®-istio-ä»¤ç‰Œ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é€šè¿‡æˆ‘ä»¬çš„ sidecar å®¹å™¨è®¿é—® Istio ä»¤ç‰Œ&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f3_hu14609963526827508083.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f3_hu18061715644222923455.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f3_hu9569186271581430545.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f3_hu14609963526827508083.webp&#34;
               width=&#34;760&#34;
               height=&#34;279&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é€šè¿‡æˆ‘ä»¬çš„ sidecar å®¹å™¨è®¿é—® Istio ä»¤ç‰Œ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªæ˜¯&lt;code&gt;runAsUser&lt;/code&gt;ï¼ˆå’Œ&lt;code&gt;runAsGroup&lt;/code&gt;ï¼‰ã€‚è™½ç„¶æˆ‘ä»¬ä¸èƒ½æˆä¸º rootï¼Œä½†æ‰€æœ‰å…¶ä»– UID éƒ½æ˜¯å…è®¸çš„â€”â€”åŒ…æ‹¬ Istio çš„ UIDï¼Œè®½åˆºçš„æ˜¯ï¼Œè¿™ä¸ª UID æ˜¯&lt;code&gt;1337&lt;/code&gt;ï¼ˆæ˜¯çš„ï¼ŒçœŸçš„ï¼‰ã€‚æˆ‘ä»¬å°†æˆ‘ä»¬çš„ UID è®¾ç½®ä¸º 1337ï¼Œå¹¶æˆåŠŸåœ°ä»¥ Istio ç”¨æˆ·çš„èº«ä»½è¿è¡Œã€‚ç”±äº Istio æœ¬èº«æ˜¯&lt;a href=&#34;https://istio.io/latest/docs/reference/config/analysis/ist0144/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä» Istio çš„ iptables è§„åˆ™ä¸­æ’é™¤çš„&lt;/a&gt;â€”â€”æˆ‘ä»¬ç°åœ¨è¿è¡Œæ—¶æ²¡æœ‰ä»»ä½•æµé‡é™åˆ¶ï¼&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å‘é€è¯·æ±‚åˆ°å†…éƒ¨ç½‘ç»œåœ¨-uid-1337-ä¹‹å‰å’Œä¹‹å&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å‘é€è¯·æ±‚åˆ°å†…éƒ¨ç½‘ç»œâ€”â€”åœ¨ UID 1337 ä¹‹å‰å’Œä¹‹å&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f4_hu7730611824788218361.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f4_hu265332745971002851.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f4_hu4363213494532570107.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f4_hu7730611824788218361.webp&#34;
               width=&#34;760&#34;
               height=&#34;241&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å‘é€è¯·æ±‚åˆ°å†…éƒ¨ç½‘ç»œâ€”â€”åœ¨ UID 1337 ä¹‹å‰å’Œä¹‹å
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ‘†è„±äº†æµé‡æŸç¼šï¼Œå¼€å§‹æ‰«ææˆ‘ä»¬ Pod çš„å†…éƒ¨ç½‘ç»œã€‚ä½¿ç”¨æˆ‘ä»¬çš„ Istio ä»¤ç‰Œï¼Œæˆ‘ä»¬èƒ½å¤Ÿä» Istiod æœåŠ¡å™¨è¯»å–é…ç½®å¹¶äº†è§£å†…éƒ¨ç¯å¢ƒâ€”â€”è¿™å¼•å¯¼æˆ‘ä»¬è¿›è¡Œäº†ä»¥ä¸‹å‘ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bug-2-loki-æ³„éœ²-aws-ä»¤ç‰Œ&#34;&gt;Bug #2: Loki æ³„éœ² AWS ä»¤ç‰Œ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨é›†ç¾¤ä¸­æ‰¾åˆ°äº†ä¸€ä¸ª Grafana Loki çš„å®ä¾‹ï¼Œå› æ­¤æˆ‘ä»¬è¯·æ±‚äº†&lt;code&gt;/config&lt;/code&gt;ç«¯ç‚¹ä»¥æŸ¥çœ‹ Loki çš„é…ç½®ã€‚API å“åº”äº†å®Œæ•´çš„é…ç½®ï¼ŒåŒ…æ‹¬ Loki ç”¨æ¥è®¿é—® S3 çš„ AWS å¯†é’¥ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ¥è‡ª-sap-çš„-loki-æœåŠ¡å™¨çš„é…ç½®æ‘˜å½•&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ¥è‡ª SAP çš„ Loki æœåŠ¡å™¨çš„é…ç½®æ‘˜å½•&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f5_hu10908587585710315639.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f5_hu5210851232726765505.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f5_hu15252043344179883139.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f5_hu10908587585710315639.webp&#34;
               width=&#34;760&#34;
               height=&#34;312&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ¥è‡ª SAP çš„ Loki æœåŠ¡å™¨çš„é…ç½®æ‘˜å½•
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™äº›å¯†é’¥æˆäºˆè®¿é—® Loki çš„ S3 å­˜å‚¨æ¡¶çš„æƒé™ï¼Œå…¶ä¸­åŒ…å« AI Core æœåŠ¡ï¼ˆSAP ç§°å…¶ä¸æ•æ„Ÿï¼‰å’Œå®¢æˆ· Pods çš„å¤§é‡æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-loki-çš„-s3-å­˜å‚¨æ¡¶ä¸­çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Loki çš„ S3 å­˜å‚¨æ¡¶ä¸­çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f6_hu18007388991397704631.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f6_hu16248088741001940480.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f6_hu10462996416810849322.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f6_hu18007388991397704631.webp&#34;
               width=&#34;760&#34;
               height=&#34;379&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Loki çš„ S3 å­˜å‚¨æ¡¶ä¸­çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;bug-3-æœªç»èº«ä»½éªŒè¯çš„-efs-å…±äº«æš´éœ²ç”¨æˆ·æ–‡ä»¶&#34;&gt;Bug #3: æœªç»èº«ä»½éªŒè¯çš„ EFS å…±äº«æš´éœ²ç”¨æˆ·æ–‡ä»¶&lt;/h2&gt;
&lt;p&gt;åœ¨å†…éƒ¨ç½‘ç»œä¸­ï¼Œæˆ‘ä»¬å‘ç°äº† 6 ä¸ª AWS Elastic File Systemï¼ˆEFSï¼‰å®ä¾‹ï¼Œç›‘å¬ç«¯å£ 2049ã€‚EFS å®ä¾‹çš„ä¸€ä¸ª&lt;a href=&#34;https://youtu.be/HcNmkCRXFdE&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¸¸è§é—®é¢˜&lt;/a&gt;æ˜¯å®ƒä»¬é»˜è®¤é…ç½®ä¸ºå…¬å…±çš„â€”â€”è¿™æ„å‘³ç€åªè¦æ‚¨å¯ä»¥è®¿é—®å…¶ NFS ç«¯å£ï¼Œå°±ä¸éœ€è¦å‡­æ®å³å¯æŸ¥çœ‹æˆ–ç¼–è¾‘æ–‡ä»¶ã€‚è¿™äº›å®ä¾‹ä¹Ÿä¸ä¾‹å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨ç®€å•çš„å¼€æº NFS å·¥å…·ï¼Œå¯ä»¥è‡ªç”±è®¿é—®å…±äº«çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;åˆ—å‡ºè¿™äº› EFS å®ä¾‹ä¸Šå­˜å‚¨çš„æ–‡ä»¶ï¼Œæ­ç¤ºäº†å¤§é‡ AI æ•°æ®ï¼ŒåŒ…æ‹¬ä»£ç å’Œè®­ç»ƒæ•°æ®é›†ï¼ŒæŒ‰å®¢æˆ· ID åˆ†ç±»ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f7_hu13828022362543296357.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f7_hu8636987027368623978.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f7_hu15015156208339228283.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f7_hu13828022362543296357.webp&#34;
               width=&#34;760&#34;
               height=&#34;385&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä¸¤ä¸ª-efs-å…±äº«çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨æ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªä¸åŒçš„å®¢æˆ·-id&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä¸¤ä¸ª EFS å…±äº«çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨ï¼›æ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªä¸åŒçš„å®¢æˆ· ID&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f8_hu1009129100692678847.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f8_hu2301761535920762428.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f8_hu17196893872299708137.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f8_hu1009129100692678847.webp&#34;
               width=&#34;760&#34;
               height=&#34;466&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä¸¤ä¸ª EFS å…±äº«çš„éƒ¨åˆ†æ–‡ä»¶åˆ—è¡¨ï¼›æ¯ä¸ªæ–‡ä»¶å¤¹ä»£è¡¨ä¸€ä¸ªä¸åŒçš„å®¢æˆ· ID
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;bug-4-æœªç»èº«ä»½éªŒè¯çš„-helm-æœåŠ¡å™¨å±åŠå†…éƒ¨-docker-æ³¨å†Œè¡¨å’Œ-artifactory&#34;&gt;Bug #4: æœªç»èº«ä»½éªŒè¯çš„ Helm æœåŠ¡å™¨å±åŠå†…éƒ¨ Docker æ³¨å†Œè¡¨å’Œ Artifactory&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç½‘ç»œä¸Šæœ€æœ‰è¶£çš„å‘ç°æ˜¯ä¸€ä¸ªåä¸º Tiller çš„æœåŠ¡ï¼Œè¿™æ˜¯ Helm åŒ…ç®¡ç†å™¨çš„æœåŠ¡å™¨ç»„ä»¶ï¼ˆç‰ˆæœ¬ 2ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ Tiller çš„é€šä¿¡æ˜¯é€šè¿‡å…¶ gRPC æ¥å£åœ¨ç«¯å£ 44134 è¿›è¡Œçš„ï¼Œè¯¥ç«¯å£é»˜è®¤æ˜¯æœªç»èº«ä»½éªŒè¯çš„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„å†…éƒ¨ç½‘ç»œä¸ŠæŸ¥è¯¢è¿™ä¸ªæœåŠ¡å™¨ï¼Œæ­ç¤ºäº†å¯¹ SAP çš„ Docker æ³¨å†Œè¡¨ä»¥åŠå…¶ Artifactory æœåŠ¡å™¨çš„é«˜æƒé™å¯†é’¥ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é€šè¿‡-helm-æœåŠ¡å™¨æŸ¥è¯¢æš´éœ²çš„å®¹å™¨æ³¨å†Œè¡¨å’Œ-artifactory-å‡­æ®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é€šè¿‡ Helm æœåŠ¡å™¨æŸ¥è¯¢æš´éœ²çš„å®¹å™¨æ³¨å†Œè¡¨å’Œ Artifactory å‡­æ®&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f9_hu15154392964960714063.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f9_hu9271754789093555752.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f9_hu10695779122234910877.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f9_hu15154392964960714063.webp&#34;
               width=&#34;760&#34;
               height=&#34;659&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é€šè¿‡ Helm æœåŠ¡å™¨æŸ¥è¯¢æš´éœ²çš„å®¹å™¨æ³¨å†Œè¡¨å’Œ Artifactory å‡­æ®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¿™äº›å¯†é’¥çš„è¯»å–æƒé™ï¼Œæ½œåœ¨çš„æ”»å‡»è€…å¯ä»¥è¯»å–å†…éƒ¨å›¾åƒå’Œæ„å»ºï¼Œæå–å•†ä¸šç§˜å¯†ï¼Œå¯èƒ½è¿˜åŒ…æ‹¬å®¢æˆ·æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¿™äº›å¯†é’¥çš„å†™æƒé™ï¼Œæ”»å‡»è€…å¯ä»¥ç¯¡æ”¹å›¾åƒå’Œæ„å»ºï¼Œå¯¹ SAP AI Core æœåŠ¡è¿›è¡Œä¾›åº”é“¾æ”»å‡»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;bug-5-æœªç»èº«ä»½éªŒè¯çš„-helm-æœåŠ¡å™¨å±åŠ-k8s-é›†ç¾¤æš´éœ²-google-è®¿é—®ä»¤ç‰Œå’Œå®¢æˆ·ç§˜å¯†&#34;&gt;Bug #5: æœªç»èº«ä»½éªŒè¯çš„ Helm æœåŠ¡å™¨å±åŠ K8s é›†ç¾¤ï¼Œæš´éœ² Google è®¿é—®ä»¤ç‰Œå’Œå®¢æˆ·ç§˜å¯†&lt;/h2&gt;
&lt;p&gt;Helm æœåŠ¡å™¨æš´éœ²äº†è¯»å†™æ“ä½œã€‚å°½ç®¡è¯»å–æƒé™æš´éœ²äº†æ•æ„Ÿçš„ç§˜å¯†ï¼ˆå¦‚ä¸Šæ‰€ç¤ºï¼‰ï¼Œä½†æœåŠ¡å™¨çš„å†™æƒé™å…è®¸å®Œå…¨æ¥ç®¡é›†ç¾¤ã€‚&lt;/p&gt;
&lt;p&gt;Tiller çš„&lt;code&gt;install&lt;/code&gt;å‘½ä»¤æ¥å—ä¸€ä¸ª Helm åŒ…å¹¶å°†å…¶éƒ¨ç½²åˆ° K8s é›†ç¾¤ã€‚æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæ¶æ„ Helm åŒ…ï¼Œç”Ÿæˆäº†ä¸€ä¸ªå…·æœ‰&lt;code&gt;cluster-admin&lt;/code&gt;æƒé™çš„æ–° Podï¼Œå¹¶è¿è¡Œäº†å®‰è£…å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬åœ¨é›†ç¾¤ä¸Šè¿è¡Œå…·æœ‰å®Œå…¨æƒé™ï¼&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é€šè¿‡-helm-è·å¾—çš„-k8s-æƒé™çš„éƒ¨åˆ†åˆ—è¡¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é€šè¿‡ Helm è·å¾—çš„ K8s æƒé™çš„éƒ¨åˆ†åˆ—è¡¨&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f10_hu1898260239118641762.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f10_hu2419965957431158519.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f10_hu9324779240786252293.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f10_hu1898260239118641762.webp&#34;
               width=&#34;760&#34;
               height=&#34;429&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é€šè¿‡ Helm è·å¾—çš„ K8s æƒé™çš„éƒ¨åˆ†åˆ—è¡¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨è¿™ç§è®¿é—®çº§åˆ«ï¼Œæ”»å‡»è€…å¯ä»¥ç›´æ¥è®¿é—®å…¶ä»–å®¢æˆ·çš„ Pods å¹¶çªƒå–æ•æ„Ÿæ•°æ®ï¼Œå¦‚æ¨¡å‹ã€æ•°æ®é›†å’Œä»£ç ã€‚è¿™ç§è®¿é—®è¿˜å…è®¸æ”»å‡»è€…å¹²æ‰°å®¢æˆ·çš„ Podsï¼Œæ±¡æŸ“ AI æ•°æ®å¹¶æ“çºµæ¨¡å‹çš„æ¨ç†ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿™ç§è®¿é—®çº§åˆ«è¿˜å°†å…è®¸æˆ‘ä»¬æŸ¥çœ‹å®¢æˆ·è‡ªå·±çš„ç§˜å¯†â€”â€”ç”šè‡³è¶…å‡º SAP AI Core èŒƒå›´çš„ç§˜å¯†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çš„ AI Core è´¦æˆ·åŒ…å«äº†æˆ‘ä»¬çš„ AWS è´¦æˆ·ï¼ˆç”¨äº S3 æ•°æ®è®¿é—®ï¼‰ã€æˆ‘ä»¬çš„ SAP HANA è´¦æˆ·ï¼ˆç”¨äº Data Lake è®¿é—®ï¼‰å’Œæˆ‘ä»¬çš„ Docker Hub è´¦æˆ·ï¼ˆç”¨äºæ‹‰å–æˆ‘ä»¬çš„é•œåƒï¼‰çš„ç§˜å¯†ã€‚ä½¿ç”¨æˆ‘ä»¬æ–°è·å¾—çš„è®¿é—®çº§åˆ«ï¼Œæˆ‘ä»¬æŸ¥è¯¢äº†è¿™äº›ç§˜å¯†ï¼Œå¹¶è®¾æ³•ä»¥çº¯æ–‡æœ¬å½¢å¼è®¿é—®å®ƒä»¬æ‰€æœ‰ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä½¿ç”¨æˆ‘ä»¬çš„-k8s-æƒé™è®¿é—®å®¢æˆ·ç§˜å¯†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä½¿ç”¨æˆ‘ä»¬çš„ K8s æƒé™è®¿é—®å®¢æˆ·ç§˜å¯†&#34; srcset=&#34;
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f11_hu12750870683359847843.webp 400w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f11_hu6128828811066188935.webp 760w,
               /blog/sapwned-sap-ai-vulnerabilities-ai-security/f11_hu7872809955157554974.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/sapwned-sap-ai-vulnerabilities-ai-security/f11_hu12750870683359847843.webp&#34;
               width=&#34;760&#34;
               height=&#34;513&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä½¿ç”¨æˆ‘ä»¬çš„ K8s æƒé™è®¿é—®å®¢æˆ·ç§˜å¯†
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åŒæ ·çš„æŸ¥è¯¢è¿˜æ­ç¤ºäº†ä¸€ä¸ªåä¸º&lt;code&gt;sap-docker-registry-secret&lt;/code&gt;çš„ SAP è®¿é—® Google å®¹å™¨æ³¨å†Œè¡¨çš„å¯†é’¥ã€‚æˆ‘ä»¬å·²ç»ç¡®è®¤è¿™ä¸ªå¯†é’¥æˆäºˆäº†è¯»å†™æƒé™â€”â€”è¿›ä¸€æ­¥æ‰©å¤§äº†æ½œåœ¨ä¾›åº”é“¾æ”»å‡»çš„èŒƒå›´ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯ç¤º&#34;&gt;å¯ç¤º&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å¯¹ SAP AI Core çš„ç ”ç©¶è¡¨æ˜ï¼Œæ·±åº¦é˜²å¾¡çš„é‡è¦æ€§ã€‚æˆ‘ä»¬é¢ä¸´çš„ä¸»è¦å®‰å…¨éšœç¢æ˜¯ Istio é˜»æ­¢æˆ‘ä»¬çš„æµé‡åˆ°è¾¾å†…éƒ¨ç½‘ç»œã€‚ä¸€æ—¦æˆ‘ä»¬èƒ½å¤Ÿç»•è¿‡è¿™ä¸ªéšœç¢ï¼Œæˆ‘ä»¬å°±è·å¾—äº†å¯¹å‡ ä¸ªå†…éƒ¨èµ„äº§çš„è®¿é—®æƒé™ï¼Œè¿™äº›èµ„äº§ä¸éœ€è¦ä»»ä½•å…¶ä»–èº«ä»½éªŒè¯â€”â€”è¿™æ„å‘³ç€å†…éƒ¨ç½‘ç»œè¢«è§†ä¸ºå¯ä¿¡çš„ã€‚åŠ å›ºè¿™äº›å†…éƒ¨æœåŠ¡æœ¬å¯ä»¥å°†è¿™æ¬¡æ”»å‡»çš„å½±å“é™è‡³æœ€ä½ï¼Œå°†å…¶ä»å®Œå…¨æœåŠ¡æ¥ç®¡é™çº§ä¸ºè½»å¾®çš„å®‰å…¨äº‹ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¦åˆæˆ‘ä»¬ä¹‹å‰ä¸ K8s ç›¸å…³çš„æ¼æ´ï¼Œè¿™é¡¹ç ”ç©¶è¿˜å±•ç¤ºäº†åœ¨ç®¡ç†æœåŠ¡ä¸­ä½¿ç”¨ K8s çš„ç§Ÿæˆ·éš”ç¦»é™·é˜±ã€‚æ§åˆ¶å¹³é¢ï¼ˆæœåŠ¡é€»è¾‘ï¼‰å’Œæ•°æ®å¹³é¢ï¼ˆå®¢æˆ·è®¡ç®—ï¼‰ä¹‹é—´çš„å…³é”®åˆ†ç¦»å—åˆ°äº† K8s æ¶æ„çš„å½±å“ï¼Œè¯¥æ¶æ„é€šè¿‡ APIã€èº«ä»½ã€å…±äº«è®¡ç®—å’Œè½¯ä»¶åˆ†æ®µç½‘ç»œå…è®¸å®ƒä»¬ä¹‹é—´çš„é€»è¾‘è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿™é¡¹ç ”ç©¶è¡¨æ˜ï¼ŒAI R&amp;amp;D è¿‡ç¨‹å¼•å…¥çš„ç‹¬ç‰¹æŒ‘æˆ˜ã€‚AI åŸ¹è®­æœ¬è´¨ä¸Šéœ€è¦è¿è¡Œä»»æ„ä»£ç ï¼›å› æ­¤ï¼Œåº”è¯¥æœ‰é€‚å½“çš„ä¿æŠ¤æªæ–½ï¼Œç¡®ä¿ä¸å—ä¿¡ä»»çš„ä»£ç ä¸å†…éƒ¨èµ„äº§å’Œå…¶ä»–ç§Ÿæˆ·æ­£ç¡®åˆ†ç¦»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æŠ«éœ²æ—¶é—´çº¿&#34;&gt;æŠ«éœ²æ—¶é—´çº¿&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 1 æœˆ 25 æ—¥&lt;/strong&gt; â€“ Wiz ç ”ç©¶æŠ¥å‘Šå®‰å…¨å‘ç°ç»™ SAP&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 1 æœˆ 27 æ—¥&lt;/strong&gt; â€“ SAP å›å¤å¹¶åˆ†é…äº†ä¸€ä¸ªæ¡ˆä»¶ç¼–å·&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 2 æœˆ 16 æ—¥&lt;/strong&gt; â€“ SAP ä¿®å¤äº†ç¬¬ä¸€ä¸ªæ¼æ´å¹¶æ—‹è½¬äº†ç›¸å…³çš„ç§˜å¯†&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 2 æœˆ 28 æ—¥&lt;/strong&gt; â€“ Wiz ç ”ç©¶ç»•è¿‡è¡¥ä¸ä½¿ç”¨ 2 ä¸ªæ–°æ¼æ´ï¼ŒæŠ¥å‘Šç»™ SAP&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 5 æœˆ 15 æ—¥&lt;/strong&gt; â€“ SAP éƒ¨ç½²ä¿®å¤äº†æ‰€æœ‰æŠ¥å‘Šçš„æ¼æ´&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;2024 å¹´ 7 æœˆ 17 æ—¥&lt;/strong&gt; â€“ å…¬å¼€æŠ«éœ²&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;ä¿æŒè”ç³»&#34;&gt;ä¿æŒè”ç³»ï¼&lt;/h2&gt;
&lt;p&gt;å—¨ï¼Œæˆ‘ä»¬æ˜¯ Wiz ç ”ç©¶å›¢é˜Ÿçš„ Hillai Ben-Sassonï¼ˆ&lt;a href=&#34;https://twitter.com/hillai&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@hillai&lt;/a&gt;ï¼‰ï¼ŒShir Tamariï¼ˆ&lt;a href=&#34;https://twitter.com/shirtamari&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@shirtamari&lt;/a&gt;ï¼‰ï¼ŒNir Ohfeldï¼ˆ&lt;a href=&#34;https://twitter.com/nirohfeld&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@nirohfeld&lt;/a&gt;ï¼‰ï¼ŒSagi Tzadikï¼ˆ&lt;a href=&#34;https://twitter.com/sagitz_&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@sagitz_&lt;/a&gt;) å’Œ Ronen Shustinï¼ˆ&lt;a href=&#34;https://twitter.com/ronenshh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;@ronenshh&lt;/a&gt;ï¼‰ã€‚æˆ‘ä»¬æ˜¯ä¸€ç¾¤èµ„æ·±ç™½å¸½é»‘å®¢ï¼Œæˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®©äº‘æˆä¸ºæ¯ä¸ªäººæ›´å®‰å…¨çš„åœ°æ–¹ã€‚æˆ‘ä»¬ä¸»è¦å…³æ³¨åœ¨äº‘ä¸­æ‰¾åˆ°æ–°çš„æ”»å‡»å‘é‡å¹¶æ­éœ²äº‘ä¾›åº”å•†çš„éš”ç¦»é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¾ˆæƒ³å¬å¬æ‚¨çš„æ„è§ï¼æ¬¢è¿é€šè¿‡ Twitter æˆ–ç”µå­é‚®ä»¶ä¸æˆ‘ä»¬è”ç³»ï¼š&lt;a href=&#34;mailto:research@wiz.io&#34;&gt;research@wiz.io&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Istio å’Œ Keycloak å®ç°èº«ä»½éªŒè¯å’Œæˆæƒ</title>
      <link>https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/</link>
      <pubDate>Tue, 16 Jul 2024 12:11:10 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/</guid>
      <description>&lt;p&gt;åœ¨æœ¬æŒ‡å—ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å¦‚ä½•åˆ©ç”¨ Istio å’Œ Keycloak å®ç°èº«ä»½éªŒè¯å’Œæˆæƒã€‚ç›®æ ‡æ˜¯ç®€åŒ–å¼€å‘æµç¨‹ï¼Œä½¿å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ ¸å¿ƒä»»åŠ¡ï¼Œè€Œä¸éœ€è¦æ‹…å¿ƒèº«ä»½éªŒè¯å’Œæˆæƒé—®é¢˜ã€‚æˆ‘ä»¬å°†é€šè¿‡å®é™…ç¤ºä¾‹å’Œæœ‰æ•ˆçš„ç¤ºä¾‹ä»£ç ï¼Œé€æ­¥è®²è§£æ­¤è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ç½‘æ ¼&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ç½‘æ ¼&#34; srcset=&#34;
               /blog/istio-keycloak-authentication-authorization/auth_hu17929498164615853919.webp 400w,
               /blog/istio-keycloak-authentication-authorization/auth_hu11336859447603898527.webp 760w,
               /blog/istio-keycloak-authentication-authorization/auth_hu12149373375320323120.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/auth_hu17929498164615853919.webp&#34;
               width=&#34;760&#34;
               height=&#34;340&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ç½‘æ ¼
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;keycloak-ä»‹ç»&#34;&gt;Keycloak ä»‹ç»&lt;/h2&gt;
&lt;p&gt;Keycloak æ˜¯ä¸€ä¸ªå¼€æºçš„èº«ä»½åŠè®¿é—®ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæä¾›å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åŠŸèƒ½ï¼Œå…è®¸ç”¨æˆ·ä¸€æ¬¡è®¤è¯åï¼Œä½¿ç”¨å•ä¸€å‡­è¯è®¿é—®å¤šä¸ªåº”ç”¨ç¨‹åºå’ŒæœåŠ¡ã€‚æˆ‘ç‰¹åˆ«å°è±¡æ·±åˆ»çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ Keycloak çš„å¼€å‘æµç¨‹ç®€åŒ–èƒ½åŠ›ï¼Œå®ƒæ”¯æŒé›†æˆè‡ªå®šä¹‰ä¸»é¢˜ï¼Œä¾‹å¦‚ç™»å½•é¡µé¢ã€‚åœ¨è¿™ä¸ªåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬å·²å°† Keycloak éƒ¨ç½²åœ¨åŒä¸€ä¸ª Kubernetes é›†ç¾¤å†…ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯æˆ‘ä»¬ç”¨äºæ„å»ºè‡ªå®šä¹‰ Keycloak é•œåƒçš„ Dockerfileã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;FROM quay.io/keycloak/keycloak:24.0.3
COPY ./ex-offenders-theme /opt/keycloak/themes/ex-offenders-theme
COPY ./providers/create-account-custom-spi.jar /opt/keycloak/providers/create-account-custom-spi.jar
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹éƒ¨ç½²æ¸…å•æ¥éƒ¨ç½² Keycloakã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceAccountName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;automountServiceAccountToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eocontainerregistry.azurecr.io/keycloak:v1.8.6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# {&amp;#34;$imagepolicy&amp;#34;: &amp;#34;flux-system:keycloak&amp;#34;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;start&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KEYCLOAK_ADMIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KEYCLOAK_ADMIN_PASSWORD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;valueFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secretKeyRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;admin-password&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_HOSTNAME&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;auth.ex-offenders.co.uk&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_PROXY&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;edge&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_DB&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mysql&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_DB_URL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;jdbc:mysql://keycloakdb-keycloakdb-mysql.keycloakdb.svc.cluster.local:3306/keycloakdb&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_DB_USERNAME&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;keycloak-user&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;jgroups.dns.query&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;KC_DB_PASSWORD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;valueFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secretKeyRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;keycloak&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;db-password&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;jgroups&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containerPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;7600&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullSecrets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;acr-secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·æ³¨æ„ï¼Œåœ¨æ¸…å•æ–‡ä»¶ä¸­æåˆ°çš„ FluxCD &lt;code&gt;imagepolicy&lt;/code&gt; å¼•ç”¨ã€‚å€ŸåŠ©æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é•œåƒåº“ä¸­æœ‰æ–°é•œåƒå¯ç”¨æ—¶è‡ªåŠ¨åŒ–éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-ä»‹ç»&#34;&gt;Istio ä»‹ç»&lt;/h2&gt;
&lt;p&gt;Istio æ˜¯ä¸€ä¸ªå¼€æºçš„æœåŠ¡ç½‘æ ¼å¹³å°ï¼Œæ—¨åœ¨ç®¡ç†å¾®æœåŠ¡çš„é€šä¿¡å’Œæ•°æ®å…±äº«ã€‚å®ƒæä¾›äº†å¤šç§åŠŸèƒ½ï¼Œä»¥æå‡å¾®æœåŠ¡åº”ç”¨çš„å¯è§‚å¯Ÿæ€§ã€å®‰å…¨æ€§å’Œç®¡ç†èƒ½åŠ›ã€‚æˆ‘ä»¬å°†å¾ˆå¿«è®¨è®ºå¦‚ä½•é…ç½® Istioã€‚&lt;/p&gt;
&lt;h2 id=&#34;fastapi-ä»‹ç»&#34;&gt;FastAPI ä»‹ç»&lt;/h2&gt;
&lt;p&gt;FastAPI æ˜¯ä¸€ä¸ªç°ä»£çš„ Python æ¡†æ¶ï¼Œè¿…é€Ÿè·å¾—äº†å¹¿æ³›çš„æµè¡Œã€‚å®ƒè®¾è®¡ç”¨äºå¿«é€Ÿå¼€å‘å¹¶æœ€å¤§åŒ–å¼€å‘è€…ä½“éªŒã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸¤ä¸ªç‰ˆæœ¬çš„ job APIï¼ˆ&lt;a href=&#34;https://github.com/ex-offenders/job-service-v1&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;V1&lt;/a&gt;, &lt;a href=&#34;https://github.com/ex-offenders/job-service-v2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;V2&lt;/a&gt;ï¼‰ç¼–å†™äº FastAPIã€‚è¿™ä¸ª API ä½¿ç”¨ SQLModel åº“ä¸åç«¯æ•°æ®åº“è¿›è¡Œäº¤äº’ï¼Œç»“åˆäº† SQLAlchemy å’Œ Pydantic çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;SQLModel æ˜¯ç”±ä¸ FastAPI ç›¸åŒçš„ä½œè€…å¼€å‘çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²æ— è®¤è¯ä¸æˆæƒçš„-job-service-å¾®æœåŠ¡&#34;&gt;éƒ¨ç½²æ— è®¤è¯ä¸æˆæƒçš„ job-service å¾®æœåŠ¡&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬ä»æ›´ç®€å•çš„äº‹æƒ…å¼€å§‹ï¼šä¸€ä¸ªæ²¡æœ‰ä»»ä½•è®¤è¯å’Œæˆæƒçš„jobå¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ job-service v1 å’Œ job-service v2 çš„éƒ¨ç½²æ¸…å•ï¼Œå‡åœ¨â€œjob-serviceâ€å‘½åç©ºé—´è¿è¡Œã€‚æ³¨æ„æ¯ä¸ªéƒ¨ç½²æ¸…å•ä¸­çš„ç‰ˆæœ¬æ ‡ç­¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceAccountName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;automountServiceAccountToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eocontainerregistry.azurecr.io/job-service:v1.0.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# {&amp;#34;$imagepolicy&amp;#34;: &amp;#34;flux-system:job-service-v1&amp;#34;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_HOST&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;keycloakdb-keycloakdb-mysql.keycloakdb.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_PASSWORD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;valueFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secretKeyRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;db-password&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_PORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;3306&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_USER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_NAME&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;64Mi&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;50m&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullSecrets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;acr-secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service-v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;serviceAccountName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;automountServiceAccountToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;eocontainerregistry.azurecr.io/job-service-v2:v1.1.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# {&amp;#34;$imagepolicy&amp;#34;: &amp;#34;flux-system:job-service-v2&amp;#34;}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;env&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_HOST&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;keycloakdb-keycloakdb-mysql.keycloakdb.svc.cluster.local&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_PASSWORD&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;valueFrom&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;secretKeyRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;db-password&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_PORT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;3306&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_USER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DB_NAME&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requests&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;64Mi&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;50m&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;imagePullSecrets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;acr-secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬è¿˜æœ‰ä¸€ä¸ª ClusterIP æœåŠ¡ï¼Œé€‰æ‹©å™¨ä¸ºâ€œapp=job-serviceâ€ã€‚è¿™ä¸ªé…ç½®ç¡®ä¿äº† job-service v1 å’Œ job-service v2 éƒ½è¢«æ·»åŠ ä¸ºè¿™ä¸ªæœåŠ¡çš„ç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kustomize.toolkit.fluxcd.io/name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;flux-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kustomize.toolkit.fluxcd.io/namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;flux-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targetPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterIP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨åŒä¸€ä¸ªæ•°æ®åº“å®ä¾‹ä¸º Keycloak å’Œä¸åŒç‰ˆæœ¬çš„ job-serviceã€‚ç„¶è€Œï¼Œå„è‡ªçš„ç”¨æˆ·è¢«é™åˆ¶ä¸å¾—è®¿é—®å¯¹æ–¹çš„æ•°æ®åº“ã€‚å°½ç®¡å…±äº«åŒä¸€ä¸ªå®ä¾‹ï¼Œè¿™ç§è®¾ç½®æœ‰æ•ˆåœ°æ¨¡æ‹Ÿäº†å¾®æœåŠ¡æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬å¸Œæœ›å°†æ‰€æœ‰æµé‡ç‹¬å è·¯ç”±åˆ° v1 éƒ¨ç½²ã€‚ï¼ˆå¦‚æœä½ æŸ¥çœ‹ job-service v1ï¼Œä½ ä¼šçœ‹åˆ°å®ƒç¼–å†™æ—¶æ²¡æœ‰åŒ…æ‹¬ä»»ä½•è®¤è¯æˆ–æˆæƒä»£ç ã€‚æˆ‘ä»¬è®¡åˆ’åœ¨æ¥ä¸‹æ¥çš„æ­¥éª¤ä¸­ä½¿ç”¨ Istio å®ç°è¿™äº›åŠŸèƒ½ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;ä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆ›å»ºäº†å¦‚ä¸‹çš„è™šæ‹ŸæœåŠ¡å’Œç›®æ ‡è§„åˆ™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.ex-offenders.co.uk&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;ex-offenders.co.uk&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;job-service.job-service.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;istio-system/gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mesh&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobs&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobcategories&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service.job-service.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;100&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service.job-service.svc.cluster.local&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;apiVersion: networking.istio.io/v1alpha3
kind: DestinationRule
metadata:
  name: job-service
  namespace: job-service
spec:
  host: job-service.job-service.svc.cluster.local
  subsets:
  - name: v1
    labels:
      version: v1
  - name: v2
    labels:
      version: v2
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ³¨æ„ï¼Œåœ¨ç½‘å…³éƒ¨åˆ†ä¸‹ï¼Œæˆ‘ä»¬æŒ‡å®šäº†æˆ‘ä»¬çš„å…¥å£ç½‘å…³å’Œâ€œmeshâ€ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬æœŸæœ›æ¥è‡ªå¤–éƒ¨ç½‘å…³å’Œé›†ç¾¤å†…å…¶ä»–å¾®æœåŠ¡çš„æµé‡ã€‚è§‚å¯Ÿæˆ‘ä»¬å¦‚ä½•å°†100%çš„æµé‡å®šå‘åˆ° v1 éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯ Istio ç½‘å…³èµ„æºã€‚å®ƒå¤„ç†ç›®æ ‡ä¸º ex-offenders.co.uk åŸŸçš„æµé‡ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬ä½¿ç”¨ cert-manager å°† Let&amp;rsquo;s Encrypt TLS è¯ä¹¦é™„åŠ åˆ°ç½‘å…³ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SIMPLE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;credentialName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ex-offenders-tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;www.ex-offenders.co.uk&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;ex-offenders.co.uk&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;auth.ex-offenders.co.uk&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Kiali ä»ªè¡¨æ¿æ¥éªŒè¯æˆ‘ä»¬çš„è·¯ç”±é…ç½®ã€‚æ³¨æ„ï¼Œ&lt;code&gt;job-service&lt;/code&gt; è¿æ¥åˆ°åŒä¸€ä¸ª &lt;code&gt;keycloakdb&lt;/code&gt; MySQL å®ä¾‹ã€‚ä½†å®é™…ä¸Šï¼Œ&lt;code&gt;job-service&lt;/code&gt; åªèƒ½è®¿é—®å®ä¾‹å†…çš„ç‰¹å®š &lt;code&gt;job-service&lt;/code&gt; æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è·¯ç”±&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è·¯ç”±&#34; srcset=&#34;
               /blog/istio-keycloak-authentication-authorization/kiali_hu5824793836224391510.webp 400w,
               /blog/istio-keycloak-authentication-authorization/kiali_hu1496897101330461023.webp 760w,
               /blog/istio-keycloak-authentication-authorization/kiali_hu10863074786261528491.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/kiali_hu5824793836224391510.webp&#34;
               width=&#34;760&#34;
               height=&#34;254&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è·¯ç”±
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å‡†å¤‡è¿›è¡Œä¸€äº›æµ‹è¯•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºæ–°çš„jobç±»åˆ«&#34;&gt;åˆ›å»ºæ–°çš„jobç±»åˆ«&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    &amp;#34;name&amp;#34;: &amp;#34;Information Technology&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Information Technology&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:17&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ›å»ºæ–°-job&#34;&gt;åˆ›å»ºæ–° job&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobs/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;title&amp;#34;: &amp;#34;Software Engineer&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;description&amp;#34;: &amp;#34;Software Engineer with 2 years of experience&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;owner_id&amp;#34;: &amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;category_id&amp;#34;: 17
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer with 2 years of experience&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;owner_id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;category_id&amp;#34;&lt;/span&gt;:17,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;f19e68da-e40a-4954-9dbf-6dfaf1f7f4d4&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é€šè¿‡-id-è·å–-job-ç±»åˆ«&#34;&gt;é€šè¿‡ ID è·å– job ç±»åˆ«&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/17&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Information Technology&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:17&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é€šè¿‡-id-è·å–-job&#34;&gt;é€šè¿‡ ID è·å– job&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobs/bff285f6-34f6-4c5f-9619-2e860bec2d87&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer with 2 years of experience&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;owner_id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;category_id&amp;#34;&lt;/span&gt;:17,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;bff285f6-34f6-4c5f-9619-2e860bec2d87&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æ‚¨æ‰€è§ï¼Œè¿™äº›ç«¯ç‚¹æ²¡æœ‰èº«ä»½éªŒè¯æˆ–æˆæƒã€‚ä»»ä½•äººéƒ½å¯ä»¥åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æˆ–æ£€ç´¢jobå’Œjobç±»åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œæˆ‘ä½¿ç”¨ä¸ FastAPI é›†æˆçš„ Swagger ç”Ÿæˆäº†æ ·æœ¬ curl è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;å¦è¯·æ³¨æ„ï¼Œå½“åˆ›å»ºæ–°jobæ—¶ï¼Œæˆ‘ä»¬æ‰‹åŠ¨ä¼ é€’äº† &lt;code&gt;owner_id&lt;/code&gt;ã€‚ç†æƒ³&lt;/p&gt;
&lt;p&gt;æƒ…å†µä¸‹ï¼Œè¿™åº”è¯¥æ˜¯å·²ç™»å½•ç”¨æˆ·çš„ç”¨æˆ· IDã€‚æˆ‘ä»¬å°†åœ¨è®¨è®º job-service v2 æ—¶è¿›ä¸€æ­¥æ·±å…¥æ¢è®¨è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-istio-å®ç°è®¤è¯&#34;&gt;ä½¿ç”¨ Istio å®ç°è®¤è¯&lt;/h2&gt;
&lt;p&gt;è®©æˆ‘ä»¬å¼€å§‹ä¿æŠ¤æˆ‘ä»¬çš„ç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬æ·»åŠ  RequestAuthentication èµ„æºï¼Œå®šä¹‰å¯¹jobè´Ÿè½½æ”¯æŒçš„è¯·æ±‚è®¤è¯ã€‚è¿™ä¸ªé…ç½®ç¡®ä¿ Istio æ‹’ç»ä»»ä½•å…·æœ‰æ— æ•ˆè®¤è¯ä¿¡æ¯çš„è¯·æ±‚ã€‚ä¸‹é¢ï¼Œæˆ‘ä»¬å®šä¹‰äº†æˆ‘ä»¬çš„ Keycloak å‘è¡Œè€… URL å’Œå…¬å¼€è¯ä¹¦ URLï¼Œä»¥ä¾¿ Istio éªŒè¯ä»¤ç‰Œç­¾åã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RequestAuthentication&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jwtRules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://auth.ex-offenders.co.uk/realms/ex-offenders&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jwksUri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://auth.ex-offenders.co.uk/realms/ex-offenders/protocol/openid-connect/certs&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;forwardOriginalToken&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬è®¾å®šäº†â€œforwardOriginalTokenâ€: trueï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦ä»¥â€œAuthorization: Bearerâ€æ ¼å¼å°†ä»¤ç‰Œä¼ é€’ç»™åç«¯æœåŠ¡ã€‚æ‚¨è¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µå°†ä»¤ç‰Œä½œä¸ºâ€œjwt_parsedâ€é”®çš„å€¼ä¼ é€’ç»™åç«¯æœåŠ¡ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jwtRules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://auth.ex-offenders.co.uk/realms/ex-offenders&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;jwksUri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https://auth.ex-offenders.co.uk/realms/ex-offenders/protocol/openid-connect/certs&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;outputPayloadToHeader&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;jwt-parsed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨ï¼ŒRequestAuthentication å°†æ‹’ç»ä»»ä½•å¸¦æœ‰æ— æ•ˆä»¤ç‰Œçš„è¯·æ±‚ã€‚ç„¶è€Œï¼Œæ²¡æœ‰ä»»ä½•è®¤è¯ä¿¡æ¯çš„è¯·æ±‚ä»ç„¶ä¼šè¢«æ¥å—ï¼Œä½†å®ƒä»¬ä¸ä¼šæœ‰ä¸€ä¸ªç»è¿‡è®¤è¯çš„èº«ä»½ã€‚ä¸ºäº†å¤„ç†è¿™äº›æƒ…å†µï¼Œé™¤äº† RequestAuthentication å¤–ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ æˆæƒæ”¿ç­–æ¥æ‹’ç»ç¼ºå°‘è®¤è¯èº«ä»½çš„è¯·æ±‚ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æŒ‰å¦‚ä¸‹æ–¹å¼æ·»åŠ ä¸€ä¸ªæˆæƒç­–ç•¥ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AuthorizationPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestPrincipals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATCH&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobs*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATCH&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobcategories*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼Œä¸Šè¿° AuthorizationPolicy å…è®¸ä»»ä½•äººæ— é™åˆ¶åœ°è®¿é—® GET æ–¹æ³•ã€‚ç„¶è€Œï¼Œå¯¹ job å’Œ jobcategory ç«¯ç‚¹çš„ä»»ä½•å…¶ä»–æ–¹æ³•éƒ½éœ€è¦è®¤è¯ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æµ‹è¯•ä¸€äº›ç«¯ç‚¹ï¼š&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºæ–°job&#34;&gt;åˆ›å»ºæ–°job&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobs/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;title&amp;#34;: &amp;#34;Software Engineer II&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;description&amp;#34;: &amp;#34;Software Engineer with 2 years of experience&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;owner_id&amp;#34;: &amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;category_id&amp;#34;: 17
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RBAC: access denied
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é€šè¿‡-id-è·å–-job-1&#34;&gt;é€šè¿‡ ID è·å– job&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobs/bff285f6-34f6-4c5f-9619-2e860bec2d87&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer with 2 years of experience&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;owner_id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;category_id&amp;#34;&lt;/span&gt;:17,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;bff285f6-34f6-4c5f-9619-2e860bec2d87&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ›å»ºæ–°çš„-job-ç±»åˆ«&#34;&gt;åˆ›å»ºæ–°çš„ job ç±»åˆ«&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    &amp;#34;name&amp;#34;: &amp;#34;Computer Science&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RBAC: access denied
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;é€šè¿‡-id-è·å–-job-ç±»åˆ«-1&#34;&gt;é€šè¿‡ ID è·å– job ç±»åˆ«&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/17&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Information Technology&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:17&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¦‚è§‚å¯Ÿåˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ²¡æœ‰è®¤è¯çš„æƒ…å†µä¸‹æ£€ç´¢ä¿¡æ¯ã€‚ç„¶è€Œï¼Œæ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ¡ç›®éœ€è¦è®¤è¯ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬é€šè¿‡è°ƒç”¨ Keycloak ä»¤ç‰Œ URL ç”Ÿæˆä»¤ç‰Œï¼Œå¹¶ä½¿ç”¨å®ƒæ¥æ‰§è¡Œæ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤æ“ä½œï¼š&lt;/p&gt;
&lt;h3 id=&#34;ç”Ÿæˆä»¤ç‰Œ&#34;&gt;ç”Ÿæˆä»¤ç‰Œ&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://auth.ex-offenders.co.uk/realms/ex-offenders/protocol/openid-connect/token&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/x-www-form-urlencoded&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data-urlencode &lt;span class=&#34;s1&#34;&gt;&amp;#39;grant_type=password&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data-urlencode &lt;span class=&#34;s1&#34;&gt;&amp;#39;client_id=ex-offenders-platform&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data-urlencode &lt;span class=&#34;s1&#34;&gt;&amp;#39;username=&amp;lt;username&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data-urlencode &lt;span class=&#34;s1&#34;&gt;&amp;#39;password=&amp;lt;password&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†è¿”å›ä¸€ä¸ªè®¿é—®ä»¤ç‰Œï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒè¿›è¡Œåç»­è¯·æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºæ–°job-1&#34;&gt;åˆ›å»ºæ–°job&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobs/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Authorization: Bearer &amp;lt;token&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;title&amp;#34;: &amp;#34;Software Engineer II&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;description&amp;#34;: &amp;#34;Software Engineer with 2 years of experience&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;owner_id&amp;#34;: &amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;  &amp;#34;category_id&amp;#34;: 17
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer II&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;Software Engineer with 2 years of experience&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;owner_id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;5690cc29-5008-4a81-8f08-db92e01d6d44&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;category_id&amp;#34;&lt;/span&gt;: 17,
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;: &lt;span class=&#34;s2&#34;&gt;&amp;#34;571c9ce6-566f-4e57-a780-9af5275ce5ef&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æ‰€ç¤ºï¼Œç»è¿‡è®¤è¯çš„ç”¨æˆ·èƒ½å¤ŸæˆåŠŸåœ°æ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤jobå’Œjobç±»åˆ«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-istio-å®ç°æˆæƒ&#34;&gt;ä½¿ç”¨ Istio å®ç°æˆæƒ&lt;/h2&gt;
&lt;p&gt;åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬å·²ç»é…ç½®äº†è®¤è¯ã€‚å°±jobç±»åˆ«è€Œè¨€ï¼Œæˆ‘ä»¬ä¸é¢„æœŸæ•°æ®åº“ä¸­å­˜åœ¨å¤§é‡ç±»åˆ«ã€‚æœ‰ç†ç”±ç»´æŒæœ‰é™æ•°é‡çš„jobç±»åˆ«ï¼Œå¹¶å°†åˆ›å»ºã€ä¿®æ”¹å’Œåˆ é™¤æƒé™é™åˆ¶ç»™ç®¡ç†å‘˜ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;å½“å‰ï¼Œä»»ä½•å…·æœ‰æœ‰æ•ˆè®¤è¯çš„ç”¨æˆ·éƒ½å¯ä»¥ä¿®æ”¹jobç±»åˆ«ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å®ç°æˆæƒã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ä¿®æ”¹æˆæƒæ”¿ç­–ï¼Œä»¥ç¡®ä¿åªæœ‰æ‹¥æœ‰ç®¡ç†å‘˜è§’è‰²çš„ç”¨æˆ·å¯ä»¥ä¿®æ”¹jobç±»åˆ«ã€‚æˆ–è€…ï¼Œå¦‚æœæ‚¨æœ‰æ›´å¤æ‚çš„ç”¨æˆ·å±‚æ¬¡ç»“æ„ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨â€œç»„â€ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AuthorizationPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;GET&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestPrincipals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATCH&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobs*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestPrincipals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;when&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;request.auth.claims[realm_access][roles]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;admin&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;methods&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;POST&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DELETE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATCH&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;paths&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;/api/jobcategories*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¼èˆªåˆ°æˆ‘ä»¬ä½¿ç”¨çš„ Keycloak é¢†åŸŸä¸‹çš„â€œRealm Rolesâ€æ¥åˆ›å»ºç®¡ç†å‘˜è§’è‰²ã€‚ä¹‹åï¼Œæˆ‘ä»¬å‰å¾€è¦åˆ†é…ç®¡ç†å‘˜è§’è‰²çš„ç›¸åº”ç”¨æˆ·ï¼Œç‚¹å‡»â€œRole Mappingâ€æ ‡ç­¾ï¼Œå¹¶å°†ç”¨æˆ·æ·»åŠ åˆ°æ–°åˆ›å»ºçš„â€œadminâ€è§’è‰²ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é¢†åŸŸè§’è‰²&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é¢†åŸŸè§’è‰²&#34; srcset=&#34;
               /blog/istio-keycloak-authentication-authorization/realm-roles_hu10079855809042929199.webp 400w,
               /blog/istio-keycloak-authentication-authorization/realm-roles_hu11230456922180794437.webp 760w,
               /blog/istio-keycloak-authentication-authorization/realm-roles_hu3494206051755110315.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/realm-roles_hu10079855809042929199.webp&#34;
               width=&#34;760&#34;
               height=&#34;132&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é¢†åŸŸè§’è‰²
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è§’è‰²æ˜ å°„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è§’è‰²æ˜ å°„&#34; srcset=&#34;
               /blog/istio-keycloak-authentication-authorization/role-mapping_hu15402382875944840591.webp 400w,
               /blog/istio-keycloak-authentication-authorization/role-mapping_hu15227434424144680305.webp 760w,
               /blog/istio-keycloak-authentication-authorization/role-mapping_hu13692710924866747962.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/role-mapping_hu15402382875944840591.webp&#34;
               width=&#34;760&#34;
               height=&#34;159&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è§’è‰²æ˜ å°„
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;åˆ›å»ºjobç±»åˆ«---æ™®é€šç”¨æˆ·&#34;&gt;åˆ›å»ºjobç±»åˆ« - æ™®é€šç”¨æˆ·&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Authorization: Bearer &amp;lt;token&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    &amp;#34;name&amp;#34;: &amp;#34;Research&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;RBAC: access denied
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;åˆ›å»ºjobç±»åˆ«---ç®¡ç†å‘˜ç”¨æˆ·&#34;&gt;åˆ›å»ºjobç±»åˆ« - ç®¡ç†å‘˜ç”¨æˆ·&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;curl --location &lt;span class=&#34;s1&#34;&gt;&amp;#39;https://ex-offenders.co.uk/api/jobcategories/&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Content-Type: application/json&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--header &lt;span class=&#34;s1&#34;&gt;&amp;#39;Authorization: Bearer &amp;lt;token&amp;gt;&amp;#39;&lt;/span&gt; &lt;span class=&#34;se&#34;&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;se&#34;&gt;&lt;/span&gt;--data &lt;span class=&#34;s1&#34;&gt;&amp;#39;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;    &amp;#34;name&amp;#34;: &amp;#34;Research&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s1&#34;&gt;}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;name&amp;#34;&lt;/span&gt;:&lt;span class=&#34;s2&#34;&gt;&amp;#34;Research&amp;#34;&lt;/span&gt;,&lt;span class=&#34;s2&#34;&gt;&amp;#34;id&amp;#34;&lt;/span&gt;:20&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æˆ‘ä»¬æ‰€è§ï¼Œç°åœ¨åªæœ‰ç®¡ç†å‘˜ç”¨æˆ·å¯ä»¥åˆ›å»º/æ›´æ–°/åˆ é™¤jobç±»åˆ«ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¾®æœåŠ¡é—´çš„æˆæƒå®æ–½&#34;&gt;å¾®æœåŠ¡é—´çš„æˆæƒå®æ–½&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å¢åŠ å¦ä¸€ä¸ªåä¸ºâ€œjob-notification-serviceâ€çš„å¾®æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-jobé€šçŸ¥æœåŠ¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;jobé€šçŸ¥æœåŠ¡&#34; srcset=&#34;
               /blog/istio-keycloak-authentication-authorization/job-notification-service_hu10902911358712445165.webp 400w,
               /blog/istio-keycloak-authentication-authorization/job-notification-service_hu14092145772731100190.webp 760w,
               /blog/istio-keycloak-authentication-authorization/job-notification-service_hu10112119034674638031.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-keycloak-authentication-authorization/job-notification-service_hu10902911358712445165.webp&#34;
               width=&#34;760&#34;
               height=&#34;301&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      jobé€šçŸ¥æœåŠ¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæœåŠ¡ä¸é€šè¿‡ç½‘å…³æš´éœ²ï¼Œå¹¶ä¸”åº”ä»…è¢«â€œjob-serviceâ€è®¿é—®ã€‚ä¸ºå®ç°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ ä»¥ä¸‹æˆæƒæ”¿ç­–ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;security.istio.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AuthorizationPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-notification-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-notification-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;job-notification-service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;source&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;principals&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;cluster.local/ns/job-service/sa/job-service&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æ€»ç»“æ¥è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨ Istio å’Œ Keycloak å®ç°äº†å¯¹æˆ‘ä»¬çš„å¾®æœåŠ¡çš„è®¤è¯å’Œæˆæƒï¼Œç¡®ä¿äº†èµ„æºçš„å®‰å…¨è®¿é—®ã€‚æˆ‘ä»¬é…ç½®äº†åŸºäºè§’è‰²å’Œç”¨æˆ·èº«ä»½çš„è®¿é—®æ§åˆ¶æ”¿ç­–ï¼Œå¢å¼ºäº†æˆ‘ä»¬åº”ç”¨çš„æ•´ä½“å®‰å…¨å§¿æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ¬¢è¿æ‚¨æä¾›ä»»ä½•æ”¹è¿›å»ºè®®ã€å¯èƒ½å¿½ç•¥çš„æ–¹é¢æˆ–å¢å¼ºæœ¬æ–‡æ¡£çš„å»ºè®®ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šæœ¬é¡µé¢æ˜¯ Cloud Agnostic Platform æŒ‡å—çš„ä¸€éƒ¨åˆ†ã€‚ç‚¹å‡»&lt;a href=&#34;https://github.com/ex-offenders/Cloud-Agnostic-Startup-Platform/tree/main&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;è®¿é—®ä¸»é¡µã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½ å¯èƒ½ä¸éœ€è¦å¾®æœåŠ¡</title>
      <link>https://cloudnativecn.com/blog/you-probably-dont-need-microservices/</link>
      <pubDate>Mon, 15 Jul 2024 11:17:49 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/you-probably-dont-need-microservices/</guid>
      <description>&lt;p&gt;æ’°å†™è¿™ç¯‡åšå®¢éå¸¸æœ‰è¶£ï¼Œè™½ç„¶å®ƒå¯èƒ½ä¸å—æŸäº›äººæ¬¢è¿ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¿…é¡»è®¨è®ºçš„è¯é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;äº²çˆ±çš„å¼€å‘è€…æœ‹å‹ä»¬ï¼Œæˆ‘ä»¬éœ€è¦å¼€è¯šå¸ƒå…¬åœ°è®¨è®ºä¸€ä¸‹å¾®æœåŠ¡ä»¥åŠæŸäº›ä¸é€‚å®œçš„ä½¿ç”¨åœºæ™¯ã€‚è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¸ä¼šè½»æ¾ï¼Œä½†æˆ‘ä»¬å¿…é¡»è¿›è¡Œè¿™æ ·çš„æ¢è®¨ï¼Œå¦åˆ™æˆ‘ä»¬æ— æ³•å–å¾—æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;å¦‚ä»Šï¼Œå¾®æœåŠ¡æä¸ºæµè¡Œï¼Œå®ƒæ˜¯ä¸€ç§ä¼˜ç§€çš„æ¶æ„é£æ ¼ï¼Œæœ‰åŠ©äºæ‰©å±•ç³»ç»Ÿå’Œç»„ç»‡æ¶æ„ã€‚è®¸å¤šæˆåŠŸçš„å…¬å¸éƒ½åœ¨ä½¿ç”¨å¾®æœåŠ¡ï¼ˆä¾‹å¦‚ Netflixã€Spotify ç­‰ï¼‰ï¼Œå› æ­¤ï¼Œå¤§å¤šæ•°å…¬å¸æ­£åœ¨ä½¿ç”¨æˆ–è®¡åˆ’ä½¿ç”¨å¾®æœåŠ¡å¹¶ä¸ä»¤äººæ„å¤–ã€‚ç„¶è€Œï¼Œä¸€äº›å…¬å¸å¿½è§†äº†å®ƒå¸¦æ¥çš„é¢å¤–æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ·±å…¥è®¨è®ºä¹‹å‰ï¼Œè®©æˆ‘åˆ†äº«ä¸€ä¸‹æˆ‘ä¸å¾®æœåŠ¡çš„ç»å†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èµ·å§‹---æ˜¯å¾®æœåŠ¡å—&#34;&gt;èµ·å§‹ - æ˜¯å¾®æœåŠ¡å—ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;2012 å¹´ï¼Œåœ¨æˆ‘å½“æ—¶çš„å…¬å¸ï¼Œæˆ‘ä»¬é¢ä¸´ä¸€ä¸ªæŒ‘æˆ˜ï¼šå¦‚ä½•ä½¿å…¬å¸æ‰©å±•åˆ°æ•°åƒåå·¥ç¨‹å¸ˆå’Œå¢åŠ  1000 å€çš„äº¤æ˜“é‡ã€‚è¿™ç¯‡æ–‡ç« ä¸å…³æ³¨æ‹›è˜ã€å…¥èŒç­‰æ–¹é¢ï¼Œè€Œæ˜¯å…³æ³¨æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘åœ¨é˜…è¯»ã€ŠScalability Rules: 50 Principles for Scaling Web Sitesã€‹ï¼Œè¿™æœ¬ä¹¦ä»‹ç»äº† AKF Scale Cubeã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ¥è‡ªscalability-rules-50-principles-for-scaling-web-sitesçš„-akf-scale-cube&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ¥è‡ªã€ŠScalability Rules: 50 Principles for Scaling Web Sitesã€‹çš„ AKF Scale Cube&#34; srcset=&#34;
               /blog/you-probably-dont-need-microservices/f1_hu15241355319813000257.webp 400w,
               /blog/you-probably-dont-need-microservices/f1_hu14673094034761505704.webp 760w,
               /blog/you-probably-dont-need-microservices/f1_hu9161864237866291419.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/you-probably-dont-need-microservices/f1_hu15241355319813000257.webp&#34;
               width=&#34;445&#34;
               height=&#34;305&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ¥è‡ªã€ŠScalability Rules: 50 Principles for Scaling Web Sitesã€‹çš„ AKF Scale Cube
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘å‘ç°è¿™ä¸ªæ¨¡å‹éå¸¸å®¹æ˜“ç†è§£ã€‚å› æ­¤ï¼Œæˆ‘ç”¨å®ƒæ¥å‘å…¶ä»–äººè§£é‡Šä¸ºä»€ä¹ˆæˆ‘ä»¬éœ€è¦åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œä¸åŒçš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚æœç´¢æ¨¡å—çš„æµé‡æ¨¡å¼ä¸è´­ç‰©è½¦æ¨¡å—çš„æµé‡æ¨¡å¼å®Œå…¨ä¸åŒã€‚å°†è¿™äº›ç»„ä»¶åˆ†å¼€æ˜¯æœ‰é“ç†çš„ã€‚æ­¤å¤–ï¼Œè¿™ä¹Ÿå…è®¸æˆ‘ä»¬æ‹¥æœ‰å¤šä¸ªç‹¬ç«‹ã€è‡ªä¸»çš„å›¢é˜Ÿã€‚è¿™å°†æœ‰åŠ©äºæˆ‘ä»¬é¢å¯¹å…¬å¸æ‰©å¤§åˆ°æ•°åƒåå·¥ç¨‹å¸ˆçš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;p&gt;å½“æ—¶æˆ‘ä»¬å¹¶æ²¡æœ‰ç§°ä¹‹ä¸ºå¾®æœåŠ¡ï¼Œåªæ˜¯æœåŠ¡ã€‚&amp;ldquo;å¾®æœåŠ¡&amp;quot;è¿™ä¸ªæœ¯è¯­è¿˜æ²¡æœ‰å‡ºç°åœ¨æˆ‘ä»¬çš„é›·è¾¾ä¸Šã€‚åœ¨è¿™ä¸€è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬çŠ¯äº†å¾ˆå¤šé”™è¯¯ã€‚ä½†ä»é—®é¢˜å‡ºå‘åšå‡ºçš„å†³å®šï¼Œå›é¡¾èµ·æ¥ï¼Œæ˜¯æ­£ç¡®çš„ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œä½ ç°åœ¨çŸ¥é“æˆ‘å¯¹è¿™ä¸ªè¯é¢˜ç›¸å½“ç†Ÿæ‚‰ï¼Œè€Œä¸”åœ¨è¿™ 10 å¤šå¹´ä¸­ï¼Œæˆ‘åœ¨å®æ–½ä¼—å¤šæœåŠ¡å’Œè¿›è¡Œå¤§é‡é‡æ–°æ¶æ„æ–¹é¢æœ‰è¿‡å¾ˆå¤šç»éªŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;é‚£ä¹ˆé—®é¢˜å‡ºåœ¨å“ªé‡Œ&#34;&gt;é‚£ä¹ˆï¼Œé—®é¢˜å‡ºåœ¨å“ªé‡Œï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ä»æœ¬è´¨ä¸Šè¯´ï¼Œå¾®æœåŠ¡æ²¡æœ‰é”™ã€‚å•ä½“æ¶æ„ä¹Ÿæ²¡æœ‰é”™ã€‚ä½†æˆ‘ä»¬çš„è¡Œä¸šä¼¼ä¹å¿˜è®°äº†æ²¡æœ‰é“¶å¼¹ã€‚æœ‰æ—¶å€™ï¼ŒæŸäº›é€‰æ‹©å®é™…ä¸Šå¯èƒ½ä¼šå¸¦æ¥ä¼¤å®³ã€‚ä¸ç›¸ä¿¡ï¼Ÿè®©æˆ‘ç»™ä½ ä¸¾å‡ ä¸ªä¾‹å­ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¤ºä¾‹-1---ä½ å¾—åˆ°ä¸€ä¸ªæœåŠ¡ä»–ä¹Ÿå¾—åˆ°ä¸€ä¸ªæœåŠ¡å¤§å®¶éƒ½å¾—åˆ°ä¸€ä¸ªæœåŠ¡&#34;&gt;ç¤ºä¾‹ 1 - ä½ å¾—åˆ°ä¸€ä¸ªæœåŠ¡ï¼Œä»–ä¹Ÿå¾—åˆ°ä¸€ä¸ªæœåŠ¡ï¼Œå¤§å®¶éƒ½å¾—åˆ°ä¸€ä¸ªæœåŠ¡&lt;/h4&gt;
&lt;p&gt;æˆ‘å–œæ¬¢ä¸è¡Œä¸šä¸­çš„å…¶ä»–äººäº¤æµï¼Œäº†è§£ä»–ä»¬æ­£åœ¨åšä»€ä¹ˆå¹¶åˆ†äº«æˆ‘çš„ç»éªŒã€‚è¿™äº›å¯¹è¯æ˜¯æ‹“å±•äººè„‰å’Œä»èªæ˜äººé‚£é‡Œè·å¾—æ´å¯Ÿçš„å¥½æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®°å¾—ç‰¹åˆ«æ˜¯å’Œä¸€å®¶æ‹¥æœ‰çº¦ 200 äººæŠ€æœ¯éƒ¨é—¨çš„åˆ›ä¸šå…¬å¸çš„ä¸¤ä½å·¥ç¨‹æ€»ç›‘çš„ä¸€æ¬¡å¯¹è¯ã€‚ä»–ä»¬æ˜¯ä»¤äººéš¾ä»¥ç½®ä¿¡çš„äººç‰©ï¼Œéå¸¸èªæ˜ï¼Œä¹Ÿå¾ˆå¥½äº¤æµã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘é€šå¸¸å–œæ¬¢æ·±å…¥äº†è§£æŠ€æœ¯é¢†åŸŸï¼Œäº†è§£å…¬å¸æ­£åœ¨åšä»€ä¹ˆä»¥åŠä¸»è¦çš„æŒ‘æˆ˜æ˜¯ä»€ä¹ˆã€‚å› æ­¤ï¼Œä¸å‡ºæ‰€æ–™ï¼Œæˆ‘è¯¢é—®ä»–ä»¬æ˜¯å¦å¯ä»¥å‘Šè¯‰æˆ‘æ›´å¤šå…³äºæ¶æ„å’Œå›¢é˜Ÿç»„ç»‡æ–¹å¼çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ä¸€ä½è¯´ä»–ä»¬åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨äº†ä¸€ä¸ªå¤æ‚çš„å¾®æœåŠ¡ç³»ç»Ÿã€‚ç„¶åè¯´ä»–ä»¬åœ¨ç”Ÿäº§ä¸­è¿è¡Œäº†å¤§çº¦ 350 ä¸ªå¾®æœåŠ¡ã€‚ä»–ä»¬è¯´çš„æœ€å¤§æŒ‘æˆ˜æ˜¯ç¡®ä¿æ‰€æœ‰è¿™äº›å¾®æœåŠ¡å¾—åˆ°ç»´æŠ¤â€”â€”è¿‡æ—¶çš„ä¾èµ–é¡¹ï¼Œè¿‡æ—¶çš„è¿è¡Œæ—¶ç‰ˆæœ¬ï¼Œå¯¹ä¸€äº›æœåŠ¡çš„å†…éƒ¨äº†è§£ä¸è¶³ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;å…¬å¸çš„å¾®æœåŠ¡æ•°é‡è¶…è¿‡äº†å¼€å‘äººå‘˜æ•°é‡ã€‚åœ¨é‚£äº›ä¸ºå®¢æˆ·æä¾›è®¸å¤šåŠŸèƒ½çš„ä»¥äº§å“ä¸ºä¸­å¿ƒçš„å…¬å¸ä¸­ï¼Œè·Ÿä¸Šæ‰€æœ‰è¿™äº›å¾®æœåŠ¡çš„æ­¥ä¼æ˜¯å¾ˆå›°éš¾çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¤ºä¾‹-2---ä½ å˜æˆ‘ä¹Ÿå˜å¤§å®¶éƒ½å˜&#34;&gt;ç¤ºä¾‹ 2 - ä½ å˜æˆ‘ä¹Ÿå˜ï¼Œå¤§å®¶éƒ½å˜&lt;/h4&gt;
&lt;p&gt;ä½è€¦åˆå’Œé«˜å†…èšå¾ˆéš¾åšåˆ°æ­£ç¡®ã€‚åœ¨å¾®æœåŠ¡æ¶æ„ä¸­åšåˆ°è¿™ä¸€ç‚¹æ›´æ˜¯éš¾ä¸ŠåŠ éš¾ã€‚ä½ å¯èƒ½æœ€ç»ˆä¼šå¾—åˆ°ä¸€äº›éå¸¸å°çš„å¾®æœåŠ¡ï¼ˆä¹Ÿç§°ä¸ºçº³ç±³æœåŠ¡ï¼‰ï¼Œå®ƒä»¬è€¦åˆç´§å¯†ï¼Œå†…èšæ€§ä½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®°å¾—åœ¨ä¹‹å‰çš„å…¬å¸ä¸­ï¼Œä¸€ä¸ªâ€œæœ‰ç•Œä¸Šä¸‹æ–‡â€æœ‰è®¸å¤šå°æœåŠ¡ï¼Œä»»ä½•å˜æ›´éƒ½éœ€è¦è®¸å¤šå›¢é˜Ÿå…±åŒåŠªåŠ›æ‰èƒ½å®ç°ã€‚æ›´ç³Ÿç³•çš„æ˜¯ï¼Œæ€§èƒ½éå¸¸å·®ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªä¾‹å­éå¸¸å¥½ï¼Œå› ä¸ºåœ¨æ­¤åŸºç¡€ä¸Šï¼Œå›¢é˜Ÿå¸Œæœ›å»ºç«‹å¦ä¸€ä¸ªæœåŠ¡æ¥æ•´åˆæ‰€æœ‰ä¿¡æ¯ä»¥æé«˜æ€§èƒ½ã€‚å°†å°æœåŠ¡åˆå¹¶ä»¥å¢åŠ å†…èšåŠ›çš„æƒ³æ³•è¢«è®¤ä¸ºæ˜¯ä¸å¥½çš„ï¼Œå› ä¸ºå®ƒçœ‹èµ·æ¥ï¼Œæˆ‘å¼•ç”¨ä¸€ä¸‹ï¼Œ&amp;ldquo;åƒä¸€ä¸ªå•ä½“&amp;rdquo;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¤ºä¾‹-3---ä¸€åˆ‡éƒ½å¥½ç›´åˆ°ä¸å¥½&#34;&gt;ç¤ºä¾‹ 3 - ä¸€åˆ‡éƒ½å¥½ï¼Œç›´åˆ°ä¸å¥½&lt;/h4&gt;
&lt;p&gt;éšç€æŠ€æœ¯è¡Œä¸šè£å‘˜çš„å¢å¤šï¼Œæˆ‘è¶Šæ¥è¶Šå¤šåœ°å¬åˆ°å…¬å¸åœ¨å¤§å¹…è£å‘˜åè¿˜æ‹¥æœ‰å¤ªå¤šæœåŠ¡çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªå…¬å¹³çš„ä¾‹å­ï¼Œå› ä¸ºè°èƒ½çŒœåˆ°å…¬å¸ä¼šå¼€å§‹è£å‡å…¶æŠ€æœ¯éƒ¨é—¨çš„ 40% æˆ– 60% å‘¢ï¼Ÿé—®é¢˜æ˜¯ï¼Œç®€å•æ˜¯æˆ‘ä»¬è¡Œä¸šä¸­æœ€éš¾çš„äº‹æƒ…ä¹‹ä¸€ã€‚ä½†æˆ‘ä»¬åº”è¯¥åŠ›æ±‚å°†äº‹ç‰©ä¿æŒåœ¨å°½å¯èƒ½ç®€å•çš„çŠ¶æ€ï¼Œä½†åˆä¸èƒ½è¿‡äºç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;æ‹¥æœ‰ç®€å•ç³»ç»Ÿçš„å…¬å¸åœ¨ç”Ÿäº§ä¸­æ‹¥æœ‰æ›´å¤šçš„çµæ´»æ€§ã€‚ä»–ä»¬å¯ä»¥å‰Šå‡æˆæœ¬å’Œå‡å°‘äººå‘˜è€Œä¸å¿…è¿‡å¤šæ‹…å¿ƒè¿è¥è´Ÿæ‹…ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¤ºä¾‹-4---è®©æˆ‘ä»¬ä½¿ç”¨å¾®æœåŠ¡å¼€å§‹æˆ‘ä»¬çš„åˆ›ä¸šé¡¹ç›®&#34;&gt;ç¤ºä¾‹ 4 - è®©æˆ‘ä»¬ä½¿ç”¨å¾®æœåŠ¡å¼€å§‹æˆ‘ä»¬çš„åˆ›ä¸šé¡¹ç›®&lt;/h4&gt;
&lt;p&gt;è¿™å°†æ˜¯æœ€åä¸€ä¸ªä¾‹å­ï¼Œæˆ‘ä¿è¯ã€‚è¿™å®é™…ä¸Šæ¥è‡ªä¸€ä¸ªæˆ‘æ­£åœ¨åŠªåŠ›å¯»æ‰¾çš„è®²åº§â€”â€”å¦‚æœä½ çŸ¥é“æˆ‘æ‰€æŒ‡çš„æ˜¯å“ªä¸ªè®²åº§ï¼Œè¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥ç»™äºˆé€‚å½“çš„è‡´è°¢ã€‚&lt;/p&gt;
&lt;p&gt;ç»¿åœ°é¡¹ç›®å¾ˆæ£’ï¼Œå¯¹å§ï¼Ÿå®ƒå°±åƒä¸€å—ç­‰å¾…åˆ›æ„è‰ºæœ¯å®¶å¼€å§‹ç»˜ç”»çš„ç©ºç™½ç”»å¸ƒã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè‰ºæœ¯å®¶é€‰æ‹©ç»˜åˆ¶ä¸€å¹…å¤šå½©çš„ç”»ä½œã€‚è‰ºæœ¯å®¶æŒ‘é€‰äº†æ‰€æœ‰ä¸»è¦é¢œè‰²ï¼ŒRubyã€Golang å’Œ Javaã€‚ä»–ä»¬å°†è¿™äº›é¢œè‰²ä¸ä¸€äº› Postgresqlã€Elasticsearch å’Œ Cassandra æ··åˆåœ¨ä¸€èµ·ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¹…ç”»ï¼Ÿå¦‚æœä»–ä»¬èƒ½æ‰¾åˆ°æ—¶é—´å®Œæˆçš„è¯ï¼Œå®ƒæœ¬å¯ä»¥æˆä¸ºä¸€å¹…æ¯•åŠ ç´¢ä½œå“ã€‚&lt;/p&gt;
&lt;p&gt;æ˜¯å¦æ€»æ˜¯ä¸å¥½çš„ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æˆ‘å¹¶ä¸æ˜¯è¯´å®ƒä¸å¥½ã€‚æˆ‘ç›¸ä¿¡ Jet.com å®é™…ä¸Šæ˜¯ä»ä½¿ç”¨å¾®æœåŠ¡å¼€å§‹çš„ï¼Œå¹¶ä¸”æˆåŠŸåœ°è¢«æ²ƒå°”ç›æ”¶è´­ã€‚æˆ‘åªæ˜¯è¯´æˆ‘ä»¬ä½œä¸ºå·¥ç¨‹å¸ˆï¼Œéœ€è¦è¿›è¡Œæ‰¹åˆ¤æ€§æ€è€ƒå¹¶é€‰æ‹©æœ€ä½³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¥½çš„ä½†ä¸ºä»€ä¹ˆ&#34;&gt;å¥½çš„ï¼Œä½†ä¸ºä»€ä¹ˆï¼Ÿ&lt;/h2&gt;
&lt;p&gt;æœ‰äº›äººè¯»åˆ°è¿™é‡Œå¯èƒ½ä¼šæƒ³ï¼Œâ€œè¿™æ˜¯æŠ€èƒ½é—®é¢˜â€ã€‚å…¶å®ä¸æ˜¯ã€‚åœ¨å‰ä¸¤ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘è®¤è¯†æ¶‰åŠçš„äººã€‚ä»–ä»¬éƒ½æ˜¯éå¸¸èªæ˜çš„ä¼˜ç§€å·¥ç¨‹å¸ˆã€‚æˆ‘ç›¸ä¿¡å…¶ä»–ä¾‹å­ä¸­çš„äººä¹ŸåŒæ ·èªæ˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å¯èƒ½å·²ç»å†…åŒ–äº†å¾®æœåŠ¡çš„æ€ç»´æ–¹å¼ã€‚è¿™ä¹Ÿè®¸å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬çœ‹åˆ°å¦‚æ­¤å¤šçš„å°å›¢é˜Ÿé‡‡ç”¨å¾®æœåŠ¡çš„åŸå› ã€‚è¿™ç§æ€ç»´æ–¹å¼æ·±æ·±åœ°æ¤å…¥äº†æˆ‘ä»¬çš„å¤§è„‘ã€‚&lt;/p&gt;
&lt;p&gt;é›¶åˆ©ç‡æ”¿ç­– (ZIRP) ä¹Ÿå¯èƒ½æ˜¯ç½ªé­ç¥¸é¦–ã€‚ZIRP å¯èƒ½ç¡®å®ä¿ƒè¿›äº†è¿™ä¸€ç°è±¡ã€‚å…¬å¸å¸Œæœ›å¢é•¿ï¼Œå¹¶ä¸”è˜è¯·å¤§é‡å¼€å‘äººå‘˜æˆä¸ºå¤§å¤šæ•°å…¬å¸çš„æ ‡å‡†é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å ZIRP æ—¶ä»£ï¼Œæˆ‘é¢„æœŸäººä»¬ä¼šæ›´åŠ æ„è¯†åˆ°å¾®æœåŠ¡çš„éšè—æˆæœ¬ã€‚å³ä½¿å¾®æœåŠ¡æ˜¯è§£å†³æ‰‹å¤´é—®é¢˜çš„å¥½æ–¹æ³•ï¼Œç®¡ç†å±‚å¯èƒ½ä¹Ÿä¼šæ›´åŠ ä¸æ„¿é‡‡ç”¨å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½ è¿˜æœ‰æ—¶é—´&#34;&gt;ä½ è¿˜æœ‰æ—¶é—´&lt;/h2&gt;
&lt;p&gt;å¦‚æœä¸Šè¿°ä»»ä½•ä¾‹å­åæ˜ äº†ä½ çš„ç°å®ï¼Œè¯·ä¸è¦æ‹…å¿ƒã€‚è½¯ä»¶çš„å¥½å¤„æ˜¯ä½ å‡ ä¹æ€»æ˜¯å¯ä»¥æ”¹å˜å®ƒã€‚å¦‚æœä½ å°†å…¶è§†ä¸ºä¸€ä¸ªâ€œé—®é¢˜â€ï¼Œè¯•ç€å°†â€œé—®é¢˜â€ä¸€è¯æ›¿æ¢ä¸ºâ€œæœºä¼šâ€â€”â€”å°±åƒç¬‘è¯ä¸­è¯´çš„ï¼Œæˆ‘æœ‰ä¸€ä¸ªå–é…’çš„â€œæœºä¼šâ€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½ æ˜¯å¦å¤„äºæœåŠ¡æ•°é‡å½±å“ä½ åˆ›æ–°èƒ½åŠ›çš„ä½ç½®ï¼Ÿ&lt;/strong&gt; åˆ¶å®šä¸€ä¸ªç­–ç•¥ï¼Œè®©ä½ çš„å…¬å¸å¯ä»¥å‡å°‘è¿è¥å¼€é”€ã€‚ä¹Ÿè®¸ä½ å¯ä»¥æ”¾æ¾å¯¹å¯é æ€§çš„è¦æ±‚ï¼Œæˆ–è€…ä½ å¯ä»¥æŠ•èµ„ç®€åŒ–ç³»ç»Ÿæ¶æ„ï¼Œä»¥ä¾¿åœ¨æœªæ¥æ‹¥æœ‰æ›´å¤šçš„åˆ›æ–°èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒä¸ªä¾‹å­ä¸­çš„å›¢é˜Ÿå°±æ˜¯è¿™æ ·åšçš„ã€‚ä»–ä»¬æå‡ºäº†ä¸€ä¸ªä»¥èŠ‚çº¦æˆæœ¬å’Œæ”¹å–„å®¢æˆ·ä½“éªŒä¸ºé‡ç‚¹çš„åˆå¹¶æœåŠ¡çš„ç­–ç•¥ã€‚åˆ©ç›Šç›¸å…³è€…éå¸¸æ»¡æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä½ æ˜¯å¦æ­£åœ¨åˆ›åŠä¸€å®¶å…¬å¸ï¼Ÿ&lt;/strong&gt; å¦‚æœä½ æ­£åœ¨åˆ›åŠä¸€å®¶å…¬å¸å¹¶è€ƒè™‘ä½¿ç”¨å¾®æœåŠ¡ï¼Œè¯·æ’°å†™ä¸€ä»½è®¾è®¡æ–‡æ¡£ï¼Œè§£é‡Šä»€ä¹ˆæŒ‘æˆ˜ï¼Œä¸ºä»€ä¹ˆé€‰æ‹©å¾®æœåŠ¡ï¼Œä»¥åŠä½ è€ƒè™‘è¿‡çš„æ›¿ä»£æ–¹æ¡ˆã€‚å¦‚æœä½ æœ‰ä¿¡ä»»çš„äººï¼Œåˆ†äº«è¿™ä»½è®¾è®¡æ–‡æ¡£å¹¶å¾æ±‚ä»–ä»¬çš„åé¦ˆâ€”â€”å¦‚æœä½ å¯ä»¥åˆæ³•åœ°è¿™æ ·åšçš„è¯ã€‚è¿™å¯èƒ½æœ‰åŠ©äºæ¾„æ¸…ä½ çš„æ€è·¯å¹¶æ¸…æ™°åœ°äº†è§£å¾®æœåŠ¡æ˜¯å¦é€‚åˆä½ çš„åˆ›ä¸šé¡¹ç›®çš„æ­£ç¡®æ¶æ„é£æ ¼ã€‚&lt;/p&gt;
&lt;p&gt;å¾®æœåŠ¡å¾ˆæ£’ï¼Œä½†å®ƒå¢åŠ äº†ä½ çš„ç³»ç»Ÿå’Œç»„ç»‡çš„å¤æ‚æ€§ã€‚å·¥ä½œæ–¹å¼å‘ç”Ÿå˜åŒ–ï¼Œæ¶æ„å˜å¾—æ›´åŠ å¤æ‚ï¼Œå¦‚æœä½ æ­£ä»å•ä½“æ¶æ„è¿ç§»åˆ°å¾®æœåŠ¡ï¼Œè¦ç†è§£è¿™å°†éœ€è¦å¤šå¹´æ—¶é—´ã€‚ä½ éœ€è¦åœ¨æ€¥äºé‡‡ç”¨å¾®æœåŠ¡ä¹‹å‰åœä¸‹æ¥æ€è€ƒï¼Œå®ƒä»¬å°†å¦‚ä½•å¸®åŠ©ä½ ï¼Œåˆå°†å¦‚ä½•ä¼¤å®³ä½ &amp;hellip;&lt;/p&gt;
&lt;p&gt;è€Œä¸”ç›¸ä¿¡æˆ‘ï¼Œå®ƒä¼šåŒæ—¶å¸¦æ¥ä¼¤å®³å’Œå–œæ‚¦ï¼Œå³ä½¿å®ƒæ˜¯æœ€ä½³çš„æ¶æ„é£æ ¼ã€‚å°±åƒç”Ÿæ´»ä¸­çš„æ¯ä¸€ä»¶å¥½äº‹ä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œäº²çˆ±çš„å¼€å‘è€…ä»¬ï¼Œæˆ‘ä¹‹æ‰€ä»¥å¼€å§‹è¿™åœºå¯¹è¯ï¼Œæ˜¯å› ä¸ºæˆ‘å…³å¿ƒã€‚æˆ‘å…³å¿ƒæˆ‘ä»¬è¡Œä¸šçš„æœªæ¥ã€‚æˆ‘å¸Œæœ›æˆ‘ä»¬çš„è¡Œä¸šèƒ½é•¿ä¹…ã€æŒç»­ã€å¯æŒç»­åœ°å»ºç«‹èƒ½æŠµå¾¡æ—¶é—´è€ƒéªŒçš„è½¯ä»¶ã€‚æˆ‘å¸Œæœ›æˆ‘ä»¬çš„è¡Œä¸šèƒ½åšå‡ºåŠ¡å®çš„å†³ç­–ï¼Œå°†æŠ€æœ¯ä½œä¸ºæ‰‹æ®µï¼Œè€Œä¸æ˜¯ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰æ—¶å€™å¾®æœåŠ¡å¾ˆæ£’â€¦â€¦ä½†ä½ å¯èƒ½å¹¶ä¸éœ€è¦å¾®æœåŠ¡ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>äº†è§£ Llama 3ï¼šè¿„ä»Šæœ€å¼ºå¤§çš„å…è´¹å¼€æºå¤§æ¨¡å‹ä»æ¦‚å¿µåˆ°ä½¿ç”¨</title>
      <link>https://cloudnativecn.com/blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/</link>
      <pubDate>Mon, 01 Jul 2024 09:33:23 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/</guid>
      <description>&lt;p&gt;Meta å…¬å¸æœ€è¿‘å‘å¸ƒäº† &lt;a href=&#34;https://ai.meta.com/blog/meta-llama-3/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Llama 3&lt;/a&gt;ï¼Œè¿™æ˜¯å…¶æœ€æ–°ä¸€ä»£å°–ç«¯å¼€æºå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ã€‚åŸºäºå…¶å‰èº«çš„åŸºç¡€ä¹‹ä¸Šï¼ŒLlama 3 æ—¨åœ¨æå‡ Llama 2 ä½œä¸ºä¸ ChatGPT ç«äº‰çš„é‡è¦å¼€æºäº§å“çš„èƒ½åŠ›ï¼Œå¦‚æ–‡ç«  &lt;a href=&#34;https://www.unite.ai/llama-2-a-deep-dive-into-the-open-source-challenger-to-chatgpt/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Llama 2: æ·±å…¥æ¢ç´¢å¼€æºæŒ‘æˆ˜è€… ChatGPT&lt;/a&gt; ä¸­å…¨é¢å›é¡¾çš„é‚£æ ·ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®º Llama 3 èƒŒåçš„æ ¸å¿ƒæ¦‚å¿µï¼Œæ¢ç´¢å…¶åˆ›æ–°æ¶æ„å’Œè®­ç»ƒè¿‡ç¨‹ï¼Œå¹¶æä¾›å…³äºå¦‚ä½•è´Ÿè´£ä»»åœ°è®¿é—®ã€ä½¿ç”¨å’Œéƒ¨ç½²è¿™ä¸€å¼€åˆ›æ€§æ¨¡å‹çš„å®é™…æŒ‡å¯¼ã€‚æ— è®ºä½ æ˜¯ç ”ç©¶äººå‘˜ã€å¼€å‘è€…è¿˜æ˜¯ AI çˆ±å¥½è€…ï¼Œè¿™ç¯‡æ–‡ç« éƒ½å°†ä¸ºä½ æä¾›åˆ©ç”¨ Llama 3 ä¸ºä½ çš„é¡¹ç›®å’Œåº”ç”¨èµ‹èƒ½çš„çŸ¥è¯†å’Œèµ„æºã€‚&lt;/p&gt;
&lt;h2 id=&#34;llama-çš„æ¼”å˜ä»-llama-2-åˆ°-llama-3&#34;&gt;Llama çš„æ¼”å˜ï¼šä» Llama 2 åˆ° Llama 3&lt;/h2&gt;
&lt;p&gt;Meta çš„ CEOï¼ŒMark Zuckerbergï¼Œåœ¨ &lt;a href=&#34;https://www.threads.net/@zuck/post/C56MFEKxl-x&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Threads.net&lt;/a&gt; ä¸Šå®£å¸ƒäº† Llama 3 çš„é¦–æ¬¡äº®ç›¸ï¼Œè¿™æ˜¯ Meta AI å¼€å‘çš„æœ€æ–° AI æ¨¡å‹ã€‚è¿™ä¸ªå°–ç«¯æ¨¡å‹ç°åœ¨å·²å¼€æºï¼Œæ—¨åœ¨æå‡ Meta çš„å„ç§äº§å“ï¼ŒåŒ…æ‹¬ Messenger å’Œ Instagramã€‚Zuckerberg å¼ºè°ƒï¼ŒLlama 3 ä½¿ Meta AI æˆä¸ºæœ€å…ˆè¿›çš„&lt;a href=&#34;https://about.fb.com/news/2024/04/meta-ai-assistant-built-with-llama-3/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…è´¹å¯ç”¨çš„ AI åŠ©æ‰‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬è®¨è®º Llama 3 çš„å…·ä½“ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬ç®€è¦å›é¡¾ä¸€ä¸‹å®ƒçš„å‰èº«ï¼ŒLlama 2ã€‚Llama 2 äº 2022 å¹´æ¨å‡ºï¼Œæ˜¯å¼€æº LLM é¢†åŸŸçš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼Œæä¾›äº†ä¸€ä¸ªå¼ºå¤§è€Œé«˜æ•ˆçš„æ¨¡å‹ï¼Œå¯ä»¥åœ¨æ¶ˆè´¹è€…ç¡¬ä»¶ä¸Šè¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œå°½ç®¡ Llama 2 å–å¾—äº†æ˜¾è‘—çš„æˆå°±ï¼Œä½†å®ƒä¹Ÿæœ‰å…¶å±€é™æ€§ã€‚ç”¨æˆ·æŠ¥å‘Šäº†ä¸€äº›é—®é¢˜ï¼Œå¦‚é”™è¯¯æ‹’ç»ï¼ˆæ¨¡å‹æ‹’ç»å›ç­”æ— å®³çš„æç¤ºï¼‰ã€æœ‰é™çš„å¸®åŠ©æ€§ï¼Œä»¥åŠåœ¨æ¨ç†å’Œä»£ç ç”Ÿæˆç­‰é¢†åŸŸçš„æ”¹è¿›ç©ºé—´ã€‚&lt;/p&gt;
&lt;p&gt;è¿›å…¥ Llama 3ï¼šMeta å¯¹è¿™äº›æŒ‘æˆ˜å’Œç¤¾åŒºçš„åé¦ˆåšå‡ºäº†å›åº”ã€‚é€šè¿‡ Llama 3ï¼ŒMeta è®¾å®šäº†ä¸å½“ä»Šå¸‚åœºä¸Šé¡¶çº§ä¸“æœ‰æ¨¡å‹ç›¸åª²ç¾çš„æœ€ä½³å¼€æºæ¨¡å‹çš„ç›®æ ‡ï¼ŒåŒæ—¶ä¹Ÿä¼˜å…ˆè€ƒè™‘äº†è´Ÿè´£ä»»çš„å¼€å‘å’Œéƒ¨ç½²å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;llama-3æ¶æ„å’Œè®­ç»ƒ&#34;&gt;Llama 3ï¼šæ¶æ„å’Œè®­ç»ƒ&lt;/h2&gt;
&lt;p&gt;Llama 3 çš„ä¸€é¡¹å…³é”®åˆ›æ–°æ˜¯å…¶åˆ†è¯å™¨ï¼Œç‰¹ç‚¹æ˜¯æ˜¾è‘—æ‰©å±•çš„è¯æ±‡è¡¨ï¼Œ&lt;strong&gt;128,256 ä¸ª token&lt;/strong&gt;ï¼ˆä» Llama 2 çš„ 32,000 ä¸ªå¢åŠ ï¼‰ã€‚è¿™æ›´å¤§çš„è¯æ±‡è¡¨å…è®¸æ›´æœ‰æ•ˆçš„æ–‡æœ¬ç¼–ç ï¼Œæ— è®ºæ˜¯è¾“å…¥è¿˜æ˜¯è¾“å‡ºï¼Œå¯èƒ½å¯¼è‡´æ›´å¼ºçš„å¤šè¯­è¨€èƒ½åŠ›å’Œæ•´ä½“æ€§èƒ½çš„æå‡ã€‚&lt;/p&gt;
&lt;p&gt;Llama 3 è¿˜é‡‡ç”¨äº†&lt;strong&gt;åˆ†ç»„æŸ¥è¯¢æ³¨æ„åŠ›&lt;/strong&gt;ï¼ˆGQAï¼‰ï¼Œè¿™æ˜¯ä¸€ç§æé«˜å¯æ‰©å±•æ€§çš„æœ‰æ•ˆè¡¨ç¤ºæŠ€æœ¯ï¼Œæœ‰åŠ©äºæ¨¡å‹æ›´æœ‰æ•ˆåœ°å¤„ç†æ›´é•¿çš„ä¸Šä¸‹æ–‡ã€‚&lt;strong&gt;8B&lt;/strong&gt; ç‰ˆæœ¬çš„ Llama 3 ä½¿ç”¨äº† GQAï¼Œè€Œ&lt;strong&gt;8B&lt;/strong&gt; å’Œ &lt;strong&gt;70B&lt;/strong&gt; æ¨¡å‹éƒ½å¯ä»¥å¤„ç†é•¿è¾¾ &lt;strong&gt;8,192 ä¸ª token&lt;/strong&gt;çš„åºåˆ—ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è®­ç»ƒæ•°æ®å’Œæ‰©å±•&#34;&gt;è®­ç»ƒæ•°æ®å’Œæ‰©å±•&lt;/h3&gt;
&lt;p&gt;ç”¨äº Llama 3 çš„è®­ç»ƒæ•°æ®æ˜¯å…¶æ€§èƒ½æå‡çš„å…³é”®å› ç´ ã€‚Meta ç²¾å¿ƒç­–åˆ’äº†ä¸€ä¸ªåŒ…å«è¶…è¿‡ &lt;strong&gt;15 ä¸‡äº¿&lt;/strong&gt; token çš„åºå¤§æ•°æ®é›†ï¼Œæ¥è‡ªå…¬å¼€å¯è·å¾—çš„åœ¨çº¿æ¥æºï¼Œæ˜¯ç”¨äº Llama 2 çš„æ•°æ®é›†çš„ä¸ƒå€ã€‚è¿™ä¸ªæ•°æ®é›†è¿˜åŒ…æ‹¬äº†è¶…è¿‡ 5% çš„é«˜è´¨é‡éè‹±è¯­æ•°æ®ï¼Œæ¶µç›–äº† &lt;strong&gt;30 å¤šç§è¯­è¨€&lt;/strong&gt;ï¼Œä¸ºæœªæ¥çš„å¤šè¯­è¨€åº”ç”¨åšå‡†å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ç¡®ä¿æ•°æ®è´¨é‡ï¼ŒMeta é‡‡ç”¨äº†å…ˆè¿›çš„è¿‡æ»¤æŠ€æœ¯ï¼ŒåŒ…æ‹¬å¯å‘å¼è¿‡æ»¤å™¨ã€NSFW è¿‡æ»¤å™¨ã€è¯­ä¹‰å»é‡å’Œè®­ç»ƒåœ¨ Llama 2 ä¸Šé¢„æµ‹æ•°æ®è´¨é‡çš„æ–‡æœ¬åˆ†ç±»å™¨ã€‚å›¢é˜Ÿè¿˜è¿›è¡Œäº†å¹¿æ³›çš„å®éªŒï¼Œä»¥ç¡®å®šé¢„è®­ç»ƒçš„æœ€ä½³æ•°æ®æ¥æºç»„åˆï¼Œç¡®ä¿ Llama 3 åœ¨å¹¿æ³›çš„ç”¨ä¾‹ä¸Šè¡¨ç°è‰¯å¥½ï¼ŒåŒ…æ‹¬çäº‹ã€STEMã€ç¼–ç å’Œå†å²çŸ¥è¯†ã€‚&lt;/p&gt;
&lt;p&gt;æ”¾å¤§é¢„è®­ç»ƒæ˜¯ Llama 3 å¼€å‘çš„å¦ä¸€ä¸ªå…³é”®æ–¹é¢ã€‚Meta å¼€å‘äº†ç¼©æ”¾æ³•åˆ™ï¼Œä½¿ä»–ä»¬èƒ½å¤Ÿåœ¨å®é™…è®­ç»ƒä¹‹å‰é¢„æµ‹å…¶æœ€å¤§æ¨¡å‹åœ¨å…³é”®ä»»åŠ¡ä¸Šçš„æ€§èƒ½ï¼Œå¦‚ä»£ç ç”Ÿæˆã€‚è¿™äº›ä¿¡æ¯æŒ‡å¯¼äº†å…³äºæ•°æ®ç»„åˆå’Œè®¡ç®—åˆ†é…çš„å†³ç­–ï¼Œæœ€ç»ˆå¯¼è‡´äº†æ›´æœ‰æ•ˆå’Œæœ‰æ•ˆçš„åŸ¹è®­ã€‚&lt;/p&gt;
&lt;p&gt;Llama 3 æœ€å¤§çš„æ¨¡å‹æ˜¯åœ¨ä¸¤ä¸ªå®šåˆ¶æ„å»ºçš„ 24,000 GPU é›†ç¾¤ä¸Šè®­ç»ƒçš„ï¼Œåˆ©ç”¨æ•°æ®å¹¶è¡Œã€æ¨¡å‹å¹¶è¡Œå’Œæµæ°´çº¿å¹¶è¡ŒæŠ€æœ¯çš„ç»„åˆã€‚Meta çš„å…ˆè¿›è®­ç»ƒå †æ ˆè‡ªåŠ¨åŒ–äº†é”™è¯¯æ£€æµ‹ã€å¤„ç†å’Œç»´æŠ¤ï¼Œæœ€å¤§åŒ–äº† GPU çš„è¿è¡Œæ—¶é—´ï¼Œä½¿è®­ç»ƒæ•ˆç‡æ¯” Llama 2 æé«˜äº†å¤§çº¦ä¸‰å€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æŒ‡ä»¤å¾®è°ƒå’Œæ€§èƒ½&#34;&gt;æŒ‡ä»¤å¾®è°ƒå’Œæ€§èƒ½&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å……åˆ†å‘æŒ¥ Llama 3 åœ¨èŠå¤©å’Œå¯¹è¯åº”ç”¨ä¸­çš„æ½œåŠ›ï¼ŒMeta åˆ›æ–°äº†å…¶æŒ‡ä»¤å¾®è°ƒæ–¹æ³•ã€‚å…¶æ–¹æ³•ç»“åˆäº†&lt;strong&gt;ç›‘ç£å¾®è°ƒ&lt;/strong&gt;ï¼ˆSFTï¼‰ã€æ‹’ç»æŠ½æ ·ã€&lt;strong&gt;è¿‘ç«¯æ”¿ç­–ä¼˜åŒ–&lt;/strong&gt;ï¼ˆPPOï¼‰å’Œ&lt;strong&gt;ç›´æ¥åå¥½ä¼˜åŒ–&lt;/strong&gt;ï¼ˆDPOï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;SFT ä¸­ä½¿ç”¨çš„æç¤ºè´¨é‡å’Œåœ¨ PPO å’Œ DPO ä¸­ä½¿ç”¨çš„åå¥½æ’ååœ¨å¯¹é½æ¨¡å‹çš„æ€§èƒ½ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚Meta çš„å›¢é˜Ÿç²¾å¿ƒç­–åˆ’äº†è¿™äº›æ•°æ®ï¼Œå¹¶å¯¹ç”±äººç±»æ³¨é‡Šè€…æä¾›çš„æ³¨é‡Šè¿›è¡Œäº†å¤šè½®è´¨é‡ä¿è¯ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡ PPO å’Œ DPO å¯¹åå¥½æ’åè¿›è¡Œè®­ç»ƒè¿˜æ˜¾è‘—æé«˜äº† Llama 3 åœ¨æ¨ç†å’Œç¼–ç ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚Meta å‘ç°ï¼Œå³ä½¿æ¨¡å‹åœ¨ç›´æ¥å›ç­”æ¨ç†é—®é¢˜æ—¶é‡åˆ°å›°éš¾ï¼Œå®ƒä»ç„¶å¯èƒ½äº§ç”Ÿæ­£ç¡®çš„æ¨ç†è¿¹è±¡ã€‚é€šè¿‡åå¥½æ’åçš„è®­ç»ƒï¼Œæ¨¡å‹å­¦ä¼šäº†å¦‚ä½•ä»è¿™äº›è¿¹è±¡ä¸­é€‰æ‹©æ­£ç¡®çš„ç­”æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¯¹æ¯”ç»“æœ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¯¹æ¯”ç»“æœ&#34; srcset=&#34;
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f2_hu1078991893979778142.webp 400w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f2_hu5794619480392154546.webp 760w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f2_hu13233647470042596874.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f2_hu1078991893979778142.webp&#34;
               width=&#34;760&#34;
               height=&#34;617&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¯¹æ¯”ç»“æœ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆæœæ˜¾è€Œæ˜“è§ï¼šLlama 3 åœ¨å¸¸è§çš„è¡Œä¸šåŸºå‡†æµ‹è¯•ä¸­è¡¨ç°ä¼˜äºè®¸å¤šå¯ç”¨çš„å¼€æºèŠå¤©æ¨¡å‹ï¼Œä¸º LLM çš„ 8B å’Œ 70B å‚æ•°çº§åˆ«å»ºç«‹äº†æ–°çš„æœ€ä½³æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f3_hu13002368666571729442.webp 400w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f3_hu10874792885244218593.webp 760w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f3_hu623210716393878442.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f3_hu13002368666571729442.webp&#34;
               width=&#34;760&#34;
               height=&#34;467&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;è´Ÿè´£ä»»çš„å¼€å‘å’Œå®‰å…¨è€ƒè™‘&#34;&gt;è´Ÿè´£ä»»çš„å¼€å‘å’Œå®‰å…¨è€ƒè™‘&lt;/h2&gt;
&lt;p&gt;åœ¨è¿½æ±‚å°–ç«¯æ€§èƒ½çš„åŒæ—¶ï¼ŒMeta ä¹Ÿä¼˜å…ˆè€ƒè™‘äº†è´Ÿè´£ä»»çš„å¼€å‘å’Œéƒ¨ç½²å®è·µï¼Œç”¨äº Llama 3ã€‚è¯¥å…¬å¸é‡‡ç”¨äº†ç³»ç»Ÿçº§æ–¹æ³•ï¼Œå°† Llama 3 æ¨¡å‹è§†ä¸ºæ›´å¹¿æ³›ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿè®¾è®¡å’Œå®šåˆ¶æ¨¡å‹ä»¥æ»¡è¶³å…¶ç‰¹å®šç”¨ä¾‹å’Œå®‰å…¨è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f4_hu7484193510083323431.webp 400w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f4_hu15430403253064485765.webp 760w,
               /blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f4_hu13946329183677072181.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/everything-you-need-to-know-about-llama-3-most-powerful-open-source-model-yet-concepts-to-usage/f4_hu7484193510083323431.webp&#34;
               width=&#34;760&#34;
               height=&#34;300&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Meta è¿›è¡Œäº†å¹¿æ³›çš„çº¢é˜Ÿæ¼”ä¹ ï¼Œæ‰§è¡Œäº†å¯¹æŠ—è¯„ä¼°ï¼Œå¹¶å®æ–½äº†å®‰å…¨ç¼“è§£æŠ€æœ¯ï¼Œä»¥é™ä½å…¶æŒ‡ä»¤è°ƒä¼˜æ¨¡å‹ä¸­çš„æ®‹ä½™é£é™©ã€‚ç„¶è€Œï¼Œè¯¥å…¬å¸æ‰¿è®¤å¯èƒ½ä»ä¼šå­˜åœ¨æ®‹ä½™é£é™©ï¼Œå¹¶å»ºè®®å¼€å‘è€…åœ¨å…¶ç‰¹å®šç”¨ä¾‹çš„èƒŒæ™¯ä¸‹è¯„ä¼°è¿™äº›é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºæ”¯æŒè´Ÿè´£ä»»çš„éƒ¨ç½²ï¼ŒMeta æ›´æ–°äº†å…¶è´Ÿè´£ä»»ä½¿ç”¨æŒ‡å—ï¼Œä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå…¨é¢çš„èµ„æºï¼Œä»¥å®æ–½æ¨¡å‹å’Œç³»ç»Ÿçº§å®‰å…¨æœ€ä½³å®è·µï¼Œç”¨äºä»–ä»¬çš„åº”ç”¨ã€‚è¯¥æŒ‡å—æ¶µç›–äº†å†…å®¹å®¡æŸ¥ã€é£é™©è¯„ä¼°å’Œä½¿ç”¨å®‰å…¨å·¥å…·ï¼ˆå¦‚ Llama Guard 2 å’Œ Code Shieldï¼‰ç­‰ä¸»é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Llama Guard 2ï¼ŒåŸºäº MLCommons åˆ†ç±»æ³•æ„å»ºï¼Œæ—¨åœ¨å¯¹ LLM è¾“å…¥ï¼ˆæç¤ºï¼‰å’Œå“åº”è¿›è¡Œåˆ†ç±»ï¼Œæ£€æµ‹å¯èƒ½è¢«è§†ä¸ºä¸å®‰å…¨æˆ–æœ‰å®³çš„å†…å®¹ã€‚CyberSecEval 2 åœ¨å…¶å‰èº«çš„åŸºç¡€ä¸Šå¢åŠ äº†æªæ–½ï¼Œä»¥é˜²æ­¢æ¨¡å‹çš„ä»£ç è§£é‡Šå™¨è¢«æ»¥ç”¨ã€æ”»å‡»æ€§ç½‘ç»œå®‰å…¨èƒ½åŠ›å’Œå¯¹æç¤ºæ³¨å…¥æ”»å‡»çš„æ˜“æ„Ÿæ€§ã€‚&lt;/p&gt;
&lt;p&gt;Code Shield æ˜¯ Llama 3 æ–°æ¨å‡ºçš„ä¸€ä¸ªä»‹ç»ï¼Œå¢åŠ äº†æ¨æ–­æ—¶é—´çš„ä¸å®‰å…¨ä»£ç è¿‡æ»¤ï¼Œå‡è½»äº†ä¸å®‰å…¨ä»£ç å»ºè®®ã€ä»£ç è§£é‡Šå™¨æ»¥ç”¨å’Œå®‰å…¨å‘½ä»¤æ‰§è¡Œç­‰é£é™©ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è®¿é—®å’Œä½¿ç”¨-llama-3&#34;&gt;è®¿é—®å’Œä½¿ç”¨ Llama 3&lt;/h2&gt;
&lt;p&gt;éšç€ Meta AI çš„ Llama 3 å‘å¸ƒï¼Œå·²æ¨å‡ºäº†å‡ ç§å¼€æºå·¥å…·ï¼Œå¯åœ¨å„ç§æ“ä½œç³»ç»Ÿä¸Šè¿›è¡Œæœ¬åœ°éƒ¨ç½²ï¼ŒåŒ…æ‹¬ Macã€Windows å’Œ Linuxã€‚æœ¬èŠ‚è¯¦ç»†ä»‹ç»äº†ä¸‰ä¸ªå€¼å¾—æ³¨æ„çš„å·¥å…·ï¼šOllamaã€Open WebUI å’Œ LM Studioï¼Œæ¯ä¸ªå·¥å…·éƒ½æä¾›äº†åˆ©ç”¨ Llama 3 åŠŸèƒ½çš„ç‹¬ç‰¹åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Ollama&lt;/strong&gt;ï¼šé€‚ç”¨äº Macã€Linux å’Œ Windowsï¼Œ&lt;a href=&#34;https://ollama.com/download&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ollama&lt;/a&gt; ç®€åŒ–äº†åœ¨ä¸ªäººè®¡ç®—æœºä¸Šæ“ä½œ Llama 3 å’Œå…¶ä»–å¤§å‹è¯­è¨€æ¨¡å‹çš„è¿‡ç¨‹ï¼Œå³ä½¿æ˜¯é‚£äº›ç¡¬ä»¶è¾ƒå¼±çš„è®¾å¤‡ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®ƒåŒ…æ‹¬ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œä¾¿äºæ¨¡å‹ç®¡ç†ï¼Œå¹¶æ”¯æŒè·¨å¹³å°çš„ä¸‹è½½å’Œè¿è¡Œæ¨¡å‹çš„å‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Open WebUI with Docker&lt;/strong&gt;ï¼šè¿™ä¸ªå·¥å…·æä¾›äº†ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ã€åŸºäº &lt;a href=&#34;https://docs.docker.com/desktop/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Docker&lt;/a&gt; çš„ç•Œé¢ï¼Œå…¼å®¹ Macã€Linux å’Œ Windowsã€‚å®ƒä¸ Ollama æ³¨å†Œè¡¨ä¸­çš„æ¨¡å‹æ— ç¼é›†æˆï¼Œå…è®¸ç”¨æˆ·åœ¨æœ¬åœ° Web ç•Œé¢å†…éƒ¨ç½²å’Œäº¤äº’ï¼Œä¾‹å¦‚ Llama 3ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;LM Studio&lt;/strong&gt;ï¼šé¢å‘ Macã€Linux å’Œ Windows çš„ç”¨æˆ·ï¼Œ&lt;a href=&#34;https://lmstudio.ai/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LM Studio&lt;/a&gt; æ”¯æŒä¸€ç³»åˆ—æ¨¡å‹ï¼ŒåŸºäº llama.cpp é¡¹ç›®æ„å»ºã€‚å®ƒæä¾›äº†ä¸€ä¸ªèŠå¤©ç•Œé¢ï¼Œä¾¿äºç›´æ¥ä¸å„ç§æ¨¡å‹è¿›è¡Œäº¤äº’ï¼ŒåŒ…æ‹¬ Llama 3 8B Instruct æ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›å·¥å…·ç¡®ä¿ç”¨æˆ·å¯ä»¥åœ¨ä¸ªäººè®¾å¤‡ä¸Šé«˜æ•ˆåˆ©ç”¨ Llama 3ï¼Œæ»¡è¶³æŠ€æœ¯æŠ€èƒ½å’Œéœ€æ±‚çš„ä¸åŒèŒƒå›´ã€‚æ¯ä¸ªå¹³å°éƒ½æä¾›äº†è®¾ç½®å’Œæ¨¡å‹äº¤äº’çš„åˆ†æ­¥è¿‡ç¨‹ï¼Œä½¿å…ˆè¿›çš„äººå·¥æ™ºèƒ½æ›´åŠ æ˜“äºå¼€å‘è€…å’Œçˆ±å¥½è€…æ¥è§¦ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤§è§„æ¨¡éƒ¨ç½²-llama-3&#34;&gt;å¤§è§„æ¨¡éƒ¨ç½² Llama 3&lt;/h2&gt;
&lt;p&gt;é™¤äº†ç›´æ¥æä¾›æ¨¡å‹æƒé‡å¤–ï¼ŒMeta è¿˜ä¸å„ç§äº‘æä¾›å•†ã€æ¨¡å‹ API æœåŠ¡å’Œç¡¬ä»¶å¹³å°åˆä½œï¼Œå®ç° Llama 3 çš„æ— ç¼éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;Llama 3 çš„ä¸€å¤§ä¼˜åŠ¿æ˜¯å…¶æ”¹è¿›çš„ token æ•ˆç‡ï¼Œè¿™è¦å½’åŠŸäºæ–°çš„åˆ†è¯å™¨ã€‚åŸºå‡†æµ‹è¯•æ˜¾ç¤ºï¼Œä¸ Llama 2 ç›¸æ¯”ï¼ŒLlama 3 éœ€è¦çš„ token å‡å°‘äº† &lt;strong&gt;15%&lt;/strong&gt;ï¼Œä»è€Œå®ç°äº†æ›´å¿«ã€æ›´ç»æµçš„æ¨æ–­ã€‚&lt;/p&gt;
&lt;p&gt;Grouped Query Attention (GQA) çš„æ•´åˆåœ¨ Llama 3 çš„ 8B ç‰ˆæœ¬ä¸­æœ‰åŠ©äºä¿æŒä¸ Llama 2 çš„ 7B ç‰ˆæœ¬ç›¸å½“çš„æ¨æ–­æ•ˆç‡ï¼Œå°½ç®¡å‚æ•°æ•°é‡å¢åŠ äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºç®€åŒ–éƒ¨ç½²æµç¨‹ï¼ŒMeta æä¾›äº† Llama Recipes ä»£ç åº“ï¼Œå…¶ä¸­åŒ…å«å¼€æºä»£ç å’Œå¾®è°ƒã€éƒ¨ç½²ã€æ¨¡å‹è¯„ä¼°ç­‰ç¤ºä¾‹ã€‚è¿™ä¸ªä»£ç åº“ä¸ºå¼€å‘è€…æä¾›äº†ä¸€ä¸ªå®è´µçš„èµ„æºï¼Œå¸®åŠ©ä»–ä»¬åˆ©ç”¨ Llama 3 çš„èƒ½åŠ›æ¥åº”ç”¨åˆ°ä»–ä»¬çš„åº”ç”¨ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºé‚£äº›æœ‰å…´è¶£æ¢ç´¢ Llama 3 æ€§èƒ½çš„äººæ¥è¯´ï¼ŒMeta å·²ç»å°†å…¶æœ€æ–°æ¨¡å‹æ•´åˆåˆ° Meta AI ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªä»¥ Llama 3 æŠ€æœ¯æ„å»ºçš„é¢†å…ˆäººå·¥æ™ºèƒ½åŠ©æ‰‹ã€‚ç”¨æˆ·å¯ä»¥é€šè¿‡å„ç§ Meta åº”ç”¨ç¨‹åºï¼Œå¦‚ Facebookã€Instagramã€WhatsAppã€Messenger å’Œ Web ä¸ Meta AI è¿›è¡Œäº¤äº’ï¼Œä»¥å®Œæˆä»»åŠ¡ã€å­¦ä¹ ã€åˆ›é€ å’Œä¸ä»–ä»¬å…³å¿ƒçš„äº‹ç‰©å»ºç«‹è”ç³»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;llama-3-æ¥ä¸‹æ¥ä¼šæ€æ ·&#34;&gt;Llama 3 æ¥ä¸‹æ¥ä¼šæ€æ ·ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;å°½ç®¡ 8B å’Œ 70B æ¨¡å‹æ ‡å¿—ç€ Llama 3 å‘å¸ƒçš„å¼€å§‹ï¼Œä½† Meta å¯¹è¿™æ¬¾å¼€åˆ›æ€§ LLM çš„æœªæ¥æœ‰é›„å¿ƒå‹ƒå‹ƒçš„è®¡åˆ’ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœªæ¥å‡ ä¸ªæœˆï¼Œæˆ‘ä»¬å¯ä»¥æœŸå¾…çœ‹åˆ°æ–°åŠŸèƒ½çš„å¼•å…¥ï¼ŒåŒ…æ‹¬å¤šæ¨¡æ€ï¼ˆèƒ½å¤Ÿå¤„ç†å’Œç”Ÿæˆä¸åŒæ•°æ®æ¨¡æ€ï¼Œå¦‚å›¾åƒå’Œè§†é¢‘ï¼‰ã€å¤šè¯­è¨€æ”¯æŒï¼ˆæ”¯æŒå¤šç§è¯­è¨€ï¼‰å’Œæ›´é•¿çš„ä¸Šä¸‹æ–‡çª—å£ï¼Œä»¥æé«˜åœ¨éœ€è¦å¹¿æ³›ä¸Šä¸‹æ–‡çš„ä»»åŠ¡ä¸Šçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒMeta è®¡åˆ’å‘å¸ƒæ›´å¤§çš„æ¨¡å‹å¤§å°ï¼ŒåŒ…æ‹¬ç›®å‰æ­£åœ¨è®­ç»ƒä¸­çš„è¶…è¿‡ 4000 äº¿å‚æ•°çš„æ¨¡å‹ï¼Œè¿™äº›æ¨¡å‹åœ¨æ€§èƒ½å’Œèƒ½åŠ›æ–¹é¢å±•ç°å‡ºäº†æœ‰å‰é€”çš„è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è¿›ä¸€æ­¥æ¨è¿›è¯¥é¢†åŸŸçš„å‘å±•ï¼ŒMeta è¿˜å°†å‘å¸ƒå…³äº Llama 3 çš„è¯¦ç»†ç ”ç©¶è®ºæ–‡ï¼Œä¸å¹¿æ³›çš„ AI ç¤¾åŒºåˆ†äº«å…¶å‘ç°å’Œè§è§£ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºå³å°†æ¨å‡ºçš„å†…å®¹çš„é¢„è§ˆï¼ŒMeta åˆ†äº«äº†ä¸€äº›å…¶æœ€å¤§ LLM æ¨¡å‹åœ¨å„ç§åŸºå‡†ä¸Šçš„æ—©æœŸæ€§èƒ½å¿«ç…§ã€‚å°½ç®¡è¿™äº›ç»“æœæ˜¯åŸºäºæ—©æœŸæ£€æŸ¥ç‚¹çš„ï¼Œå¹¶ä¸”å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œä½†å®ƒä»¬æä¾›äº†ä¸€ä¸ªæ¿€åŠ¨äººå¿ƒçš„å±•æœ›ï¼Œå±•ç¤ºäº† Llama 3 çš„æœªæ¥æ½œåŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;Llama 3 ä»£è¡¨äº†å¼€æºå¤§å‹è¯­è¨€æ¨¡å‹æ¼”å˜çš„ä¸€ä¸ªé‡è¦é‡Œç¨‹ç¢‘ï¼Œæ¨åŠ¨äº†æ€§èƒ½ã€èƒ½åŠ›å’Œè´Ÿè´£ä»»å¼€å‘å®è·µçš„è¾¹ç•Œã€‚å‡­å€Ÿå…¶åˆ›æ–°æ¶æ„ã€åºå¤§çš„è®­ç»ƒæ•°æ®é›†å’Œå°–ç«¯çš„å¾®è°ƒæŠ€æœ¯ï¼ŒLlama 3 ä¸º LLM çš„ 8B å’Œ 70B å‚æ•°çº§åˆ«å»ºç«‹äº†æ–°çš„æœ€ä½³æ€§èƒ½åŸºå‡†ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼ŒLlama 3 ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¼ºå¤§çš„è¯­è¨€æ¨¡å‹ï¼›å®ƒè¿˜ä½“ç°äº† Meta è‡´åŠ›äºåŸ¹å…»ä¸€ä¸ªå¼€æ”¾å’Œè´Ÿè´£ä»»çš„ AI ç”Ÿæ€ç³»ç»Ÿçš„æ‰¿è¯ºã€‚é€šè¿‡æä¾›å…¨é¢çš„èµ„æºã€å®‰å…¨å·¥å…·å’Œæœ€ä½³å®è·µï¼ŒMeta æˆæƒå¼€å‘è€…å……åˆ†åˆ©ç”¨ Llama 3 çš„æ½œåŠ›ï¼ŒåŒæ—¶ç¡®ä¿æ ¹æ®å…¶ç‰¹å®šç”¨ä¾‹å’Œå—ä¼—çš„éœ€æ±‚å®ç°è´Ÿè´£ä»»çš„éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ Llama 3 ä¹‹æ—…çš„ç»§ç»­ï¼Œéšç€æ–°çš„èƒ½åŠ›ã€æ¨¡å‹å¤§å°å’Œç ”ç©¶å‘ç°çš„å‡ºç°ï¼ŒAI ç¤¾åŒºçƒ­åˆ‡æœŸå¾…ä»è¿™æ¬¾å¼€åˆ›æ€§ LLM ä¸­æ¶Œç°å‡ºçš„åˆ›æ–°åº”ç”¨å’Œçªç ´ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºä½ æ˜¯ä¸€åæ¨åŠ¨è‡ªç„¶è¯­è¨€å¤„ç†è¾¹ç•Œçš„ç ”ç©¶äººå‘˜ã€ä¸€åæ„å»ºä¸‹ä¸€ä»£æ™ºèƒ½åº”ç”¨çš„å¼€å‘è€…è¿˜æ˜¯å¯¹æœ€æ–°è¿›å±•æ„Ÿåˆ°å¥½å¥‡çš„ AI çˆ±å¥½è€…ï¼ŒLlama 3 éƒ½æ‰¿è¯ºæˆä¸ºä½ å·¥å…·ç®±ä¸­çš„å¼ºå¤§å·¥å…·ï¼Œå¼€å¯æ–°çš„å¤§é—¨å¹¶è§£é”ä¸€ç³»åˆ—å¯èƒ½æ€§ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istiod æ¶æ„è¯¦è§£</title>
      <link>https://cloudnativecn.com/blog/istiod-architecture/</link>
      <pubDate>Fri, 14 Jun 2024 11:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istiod-architecture/</guid>
      <description>&lt;p&gt;æœ¬æ–‡æ¡£æè¿°äº† Istio æ§åˆ¶å¹³é¢â€”â€”Istiod çš„é«˜å±‚æ¶æ„ã€‚Istiod æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„å•ä½“åº”ç”¨ï¼Œæ¶µç›–äº†ä»è¯ä¹¦ç­¾åã€ä»£ç†é…ç½®ï¼ˆXDSï¼‰ã€ä¼ ç»Ÿçš„ Kubernetes æ§åˆ¶å™¨ç­‰å¤šç§åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;proxy-configuration&#34;&gt;ä»£ç†é…ç½®&lt;/h2&gt;
&lt;p&gt;Istiod çš„ä¸»è¦è§’è‰²â€”â€”ä»¥åŠå¤§éƒ¨åˆ†ä»£ç â€”â€”æ˜¯åŠ¨æ€é…ç½®ä»£ç†ï¼ˆEnvoy sidecarã€å…¥å£ã€gRPCã€ztunnel ç­‰ï¼‰ã€‚è¿™å¤§è‡´åŒ…æ‹¬ 3 ä¸ªéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é…ç½®æ‘„å–ï¼ˆç³»ç»Ÿçš„è¾“å…¥ï¼‰&lt;/li&gt;
&lt;li&gt;é…ç½®ç¿»è¯‘&lt;/li&gt;
&lt;li&gt;é…ç½®æœåŠ¡ï¼ˆXDSï¼‰&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;é…ç½®æ‘„å–&#34;&gt;é…ç½®æ‘„å–&lt;/h3&gt;
&lt;p&gt;Istio ä»è¶…è¿‡ 20 ç§ä¸åŒçš„èµ„æºç±»å‹è¯»å–ï¼Œå¹¶å°†å®ƒä»¬èšåˆåœ¨ä¸€èµ·æ„å»ºä»£ç†é…ç½®ã€‚è¿™äº›èµ„æºå¯ä»¥æ¥è‡ª Kubernetesï¼ˆé€šè¿‡è§‚å¯Ÿï¼‰ã€æ–‡ä»¶æˆ–é€šè¿‡ xDSï¼›å°½ç®¡å¦‚æ­¤ï¼ŒKubernetes æ˜¯æœ€å¸¸ç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¸»è¦å‡ºäºå†å²åŸå› ï¼Œæ‘„å–åˆ†ä¸ºå‡ ä¸ªç»„ä»¶ã€‚&lt;/p&gt;
&lt;h4 id=&#34;configstore&#34;&gt;ConfigStore&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;ConfigStore&lt;/code&gt; è¯»å–å¤šç§èµ„æºï¼Œå¹¶é€šè¿‡æ ‡å‡†æ¥å£ï¼ˆGetã€List ç­‰ï¼‰æš´éœ²å®ƒä»¬ã€‚è¿™äº›ç±»å‹è¢«åŒ…è£…åœ¨é€šç”¨çš„ &lt;code&gt;config.Config&lt;/code&gt; ç»“æ„ä¸­ï¼Œä¸é€šå¸¸ä½¿ç”¨æ¯ç§èµ„æºç±»å‹çš„ Kubernetes å®¢æˆ·ç«¯å½¢æˆå¯¹æ¯”ã€‚æœ€å¸¸è§çš„æ˜¯é€šè¿‡ &lt;code&gt;crdclient&lt;/code&gt; åŒ…ä» Kubernetes è¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-1.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 id=&#34;ServiceDiscovery&#34;&gt;æœåŠ¡å‘ç°&lt;/h4&gt;
&lt;p&gt;å¦ä¸€ä¸ªä¸»è¦æ¥å£æ˜¯ ServiceDiscoveryã€‚ç±»ä¼¼äº ConfigStoreï¼Œå®ƒä¹Ÿæ˜¯å¯¹å¤šç§èµ„æºè¿›è¡Œèšåˆã€‚ç„¶è€Œï¼Œå®ƒä¸æä¾›é€šç”¨èµ„æºè®¿é—®ï¼Œè€Œæ˜¯é¢„è®¡ç®—äº†å¤šç§æœåŠ¡å¯¼å‘çš„å†…éƒ¨èµ„æºï¼Œå¦‚ &lt;code&gt;model.Service&lt;/code&gt; å’Œ &lt;code&gt;model.ServiceInstance&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç”±ä¸¤ä¸ªæ§åˆ¶å™¨ç»„æˆâ€”â€”ä¸€ä¸ªç”±æ ¸å¿ƒ Kubernetes ç±»å‹é©±åŠ¨ï¼ˆâ€œKube Controllerâ€ï¼‰ï¼Œä¸€ä¸ªç”± Istio ç±»å‹é©±åŠ¨ï¼ˆâ€œServiceEntry æ§åˆ¶å™¨â€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-2.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¤§éƒ¨åˆ†æƒ…å†µä¸‹è¿™æ˜¯ç›¸å½“ç›´æ¥çš„ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬æ”¯æŒ &lt;code&gt;ServiceEntry&lt;/code&gt; é€‰æ‹© &lt;code&gt;Pod&lt;/code&gt;ï¼Œä»¥åŠ &lt;code&gt;Service&lt;/code&gt; é€‰æ‹© &lt;code&gt;WorkloadEntry&lt;/code&gt;ï¼Œè¿™å¯¼è‡´è·¨æ§åˆ¶å™¨é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;code&gt;Pods&lt;/code&gt; ä¸è´¡çŒ®ç»™ Kube æ§åˆ¶å™¨çš„ &lt;code&gt;ServiceInstances&lt;/code&gt; æ˜¯å› ä¸ºä½¿ç”¨äº† &lt;code&gt;Endpoints&lt;/code&gt;ï¼Œå®ƒæœ¬èº«æ˜¯ä» Kubernetes æ ¸å¿ƒçš„ &lt;code&gt;Pod&lt;/code&gt; æ´¾ç”Ÿçš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;pushcontext&#34;&gt;PushContext&lt;/h4&gt;
&lt;p&gt;&lt;code&gt;PushContext&lt;/code&gt; æ˜¯å½“å‰å…¨å±€çŠ¶æ€ï¼ˆSotWï¼‰çš„ä¸€ä¸ªä¸å¯å˜å¿«ç…§ã€‚å®ƒåœ¨æ¯æ¬¡é…ç½®æ¨é€æ—¶ï¼ˆä¸‹é¢ä¼šè¯¦ç»†è®¨è®ºï¼‰é€šå¸¸æ˜¯éƒ¨åˆ†åœ°é‡æ–°ç”Ÿæˆçš„ã€‚ç”±äºæ˜¯å¿«ç…§ï¼Œå¤§å¤šæ•°æŸ¥æ‰¾éƒ½æ˜¯æ— é”çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;PushContext&lt;/code&gt; æ˜¯é€šè¿‡æŸ¥è¯¢ä¸Šè¿°å±‚æ„å»ºçš„ã€‚å¯¹äºä¸€äº›ç®€å•çš„ç”¨ä¾‹ï¼Œè¿™å’Œå­˜å‚¨ç±»ä¼¼äº &lt;code&gt;configstore.List(SomeType)&lt;/code&gt; çš„ä¸œè¥¿ä¸€æ ·ç®€å•ï¼›åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ç›´æ¥æš´éœ² configstore çš„å”¯ä¸€åŒºåˆ«æ˜¯è¦å¿«ç…§å½“å‰çŠ¶æ€ã€‚åœ¨å…¶ä»–æƒ…å†µä¸‹ï¼Œä¸€äº›é¢„è®¡ç®—å’Œç´¢å¼•è¢«è®¡ç®—å‡ºæ¥ï¼Œä»¥ä¾¿åç»­è®¿é—®æ•ˆç‡ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç«¯ç‚¹&#34;&gt;ç«¯ç‚¹&lt;/h4&gt;
&lt;p&gt;ç«¯ç‚¹æœ‰ä¸€ä¸ªä¼˜åŒ–çš„ä»£ç è·¯å¾„ï¼Œå› ä¸ºå®ƒä»¬æ˜¯è¿„ä»Šä¸ºæ­¢æ›´æ–°æœ€é¢‘ç¹çš„èµ„æºâ€”â€”åœ¨ä¸€ä¸ªç¨³å®šçš„é›†ç¾¤ä¸­ï¼Œè¿™é€šå¸¸æ˜¯&lt;em&gt;å”¯ä¸€&lt;/em&gt;çš„å˜åŒ–ï¼Œç”±æ‰©ç¼©å®¹å¼•èµ·ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå®ƒä»¬ä¸ç»è¿‡ &lt;code&gt;PushContext&lt;/code&gt;ï¼Œå˜åŒ–ä¹Ÿä¸ä¼šè§¦å‘ &lt;code&gt;PushContext&lt;/code&gt; çš„é‡æ–°è®¡ç®—ã€‚ç›¸åï¼Œå½“å‰çŠ¶æ€æ˜¯åŸºäºæ¥è‡ª &lt;code&gt;ServiceDiscovery&lt;/code&gt; çš„äº‹ä»¶å¢é‡è®¡ç®—çš„ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h4&gt;
&lt;p&gt;æ€»ä½“è€Œè¨€ï¼Œé…ç½®æ‘„å–æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-3.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®ç¿»è¯‘&#34;&gt;é…ç½®ç¿»è¯‘&lt;/h3&gt;
&lt;p&gt;é…ç½®ç¿»è¯‘å°†ä¸Šè¿°è¾“å…¥è½¬æ¢ä¸ºè¿æ¥çš„ XDS å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯ Envoyï¼‰æ¶ˆè´¹çš„å®é™…ç±»å‹ã€‚è¿™é€šè¿‡ &lt;code&gt;Generators&lt;/code&gt; å®Œæˆï¼Œè¿™äº›ç”Ÿæˆå™¨æ³¨å†Œä¸€ä¸ªå‡½æ•°æ¥æ„å»ºç»™å®šç±»å‹ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ª &lt;code&gt;RouteGenerator&lt;/code&gt; è´Ÿè´£æ„å»º &lt;code&gt;Routes&lt;/code&gt;ã€‚é™¤äº†æ ¸å¿ƒ Envoy XDS ç±»å‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰çš„ Istio ç±»å‹ï¼Œä¾‹å¦‚æˆ‘ä»¬ç”¨äº DNS çš„ &lt;code&gt;NameTable&lt;/code&gt; ç±»å‹ï¼Œä»¥åŠè°ƒè¯•æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Generators&lt;/code&gt; çš„è¾“å…¥æ˜¯ &lt;code&gt;Proxy&lt;/code&gt;ï¼ˆå½“å‰å®¢æˆ·ç«¯çš„è¡¨ç¤ºï¼‰ã€å½“å‰çš„ &lt;code&gt;PushContext&lt;/code&gt; å¿«ç…§ä»¥åŠå¯¼è‡´æ›´æ”¹çš„é…ç½®æ›´æ–°åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;p&gt;å°† &lt;code&gt;Proxy&lt;/code&gt; ä½œä¸ºè¾“å…¥å‚æ•°æ˜¯é‡è¦çš„ï¼Œå¹¶ä¸”ä¸å…¶ä»–ä¸€äº› XDS å®ç°çš„ä¸»è¦åŒºåˆ«ã€‚æˆ‘ä»¬æ— æ³•åœ¨æ²¡æœ‰æ¯ä¸ªå®¢æˆ·ç«¯ä¿¡æ¯çš„æƒ…å†µä¸‹é™æ€ç¿»è¯‘è¾“å…¥åˆ° XDSã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬ä¾èµ–äºå®¢æˆ·ç«¯çš„æ ‡ç­¾æ¥ç¡®å®šåº”ç”¨çš„æ”¿ç­–é›†ã€‚è™½ç„¶è¿™æ˜¯å®ç° Istio API çš„å¿…è¦æ¡ä»¶ï¼Œä½†å®ƒç¡®å®å¤§å¤§é™åˆ¶äº†æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç¼“å­˜&#34;&gt;ç¼“å­˜&lt;/h4&gt;
&lt;p&gt;é…ç½®ç¿»è¯‘é€šå¸¸å ç”¨äº† Istiod çš„ç»å¤§éƒ¨åˆ†èµ„æºä½¿ç”¨ï¼Œå°¤å…¶æ˜¯ protobuf ç¼–ç ã€‚å› æ­¤ï¼Œå¼•å…¥äº†ç¼“å­˜ï¼Œå­˜å‚¨ç»™å®šèµ„æºçš„å·²ç¼–ç  &lt;code&gt;protobuf.Any&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§ç¼“å­˜ä¾èµ–äºå£°æ˜æ‰€æœ‰è¾“å…¥åˆ°ç»™å®šç”Ÿæˆå™¨ä½œä¸ºç¼“å­˜é”®çš„ä¸€éƒ¨åˆ†ã€‚è¿™æå…¶å®¹æ˜“å‡ºé”™ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•ä¸œè¥¿é˜»æ­¢ç”Ÿæˆå™¨ä½¿ç”¨&lt;em&gt;ä¸&lt;/em&gt;æ˜¯é”®éƒ¨åˆ†çš„è¾“å…¥ã€‚å½“è¿™ç§æƒ…å†µå‘ç”Ÿæ—¶ï¼Œä¸åŒçš„å®¢æˆ·ç«¯å°†ä¸ç¡®å®šåœ°è·å¾—é”™è¯¯çš„é…ç½®ã€‚è¿™ç§ç±»å‹çš„é”™è¯¯åœ¨å†å²ä¸Šå¯¼è‡´äº† CVEã€‚&lt;/p&gt;
&lt;p&gt;æœ‰å‡ ç§æ–¹æ³•å¯ä»¥é˜²æ­¢è¿™äº›é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åªå°†ç¼“å­˜é”®æœ¬èº«ä¼ å…¥åˆ°ç”Ÿæˆé€»è¾‘ä¸­ï¼Œè¿™æ ·å°±ä¸èƒ½ä½¿ç”¨å…¶ä»–æœªè®¡å…¥çš„è¾“å…¥ã€‚ä¸å¹¸çš„æ˜¯ï¼Œä»Šå¤©è¿˜æ²¡æœ‰ä»»ä½•ç”Ÿæˆå™¨è¿™æ ·åšã€‚&lt;/li&gt;
&lt;li&gt;éå¸¸éå¸¸å°å¿ƒã€‚&lt;/li&gt;
&lt;li&gt;ç¼“å­˜æœ‰ä¸€ä¸ªå†…ç½®æµ‹è¯•ï¼Œé€šè¿‡è®¾ç½® &lt;code&gt;UNSAFE_PILOT_ENABLE_RUNTIME_ASSERTIONS=true&lt;/code&gt; å¯ç”¨ï¼Œè¯¥æµ‹è¯•åœ¨ CI ä¸­è¿è¡Œã€‚å¦‚æœä»»ä½•é”®ä»¥ä¸åŒçš„å€¼å†™å…¥ï¼Œè¿™å°†å¼•å‘ panicã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;éƒ¨åˆ†è®¡ç®—&#34;&gt;éƒ¨åˆ†è®¡ç®—&lt;/h4&gt;
&lt;p&gt;ä¸ç¼“å­˜ä¸€æ ·ï¼Œéƒ¨åˆ†è®¡ç®—æ˜¯ç¡®ä¿æˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯æ¬¡æ›´æ”¹æ—¶ä¸ºæ¯ä¸ªä»£ç†æ„å»ºï¼ˆæˆ–å‘é€ï¼‰æ¯ä¸ªèµ„æºçš„å…³é”®æ€§èƒ½ä¼˜åŒ–ã€‚è¿™å°†åœ¨é…ç½®æœåŠ¡éƒ¨åˆ†ä¸­æ›´è¯¦ç»†è®¨è®ºã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®æœåŠ¡&#34;&gt;é…ç½®æœåŠ¡&lt;/h3&gt;
&lt;p&gt;é…ç½®æœåŠ¡æ˜¯å®é™…æ¥å—ä»£ç†å®¢æˆ·ç«¯çš„å±‚ï¼Œè¿™äº›å®¢æˆ·ç«¯é€šè¿‡åŒå‘ gRPC æµè¿æ¥ï¼Œå¹¶ä¸ºå®ƒä»¬æä¾›æ‰€éœ€çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å°†æœ‰ä¸¤ç§è§¦å‘å‘é€é…ç½®çš„æ–¹å¼â€”â€”è¯·æ±‚å’Œæ¨é€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;è¯·æ±‚&#34;&gt;è¯·æ±‚&lt;/h4&gt;
&lt;p&gt;æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ç‰¹åˆ«è¦æ±‚ä¸€ç»„èµ„æºã€‚è¿™å¯èƒ½æ˜¯åœ¨æ–°è¿æ¥ä¸Šè¯·æ±‚åˆå§‹èµ„æºé›†ï¼Œæˆ–è€…æ¥è‡ªæ–°çš„ä¾èµ–ã€‚ä¾‹å¦‚ï¼Œ&lt;code&gt;Cluster X&lt;/code&gt; çš„æ¨é€å¼•ç”¨ &lt;code&gt;Endpoint Y&lt;/code&gt; å¯èƒ½å¯¼è‡´è¯·æ±‚ &lt;code&gt;Endpoint Y&lt;/code&gt;ï¼ˆå¦‚æœå®¢æˆ·ç«¯å°šæœªçŸ¥é“çš„è¯ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„å®¢æˆ·ç«¯å®é™…ä¸Šå¯ä»¥å‘é€ä¸‰ç§ç±»å‹çš„æ¶ˆæ¯â€”â€”è¯·æ±‚ã€å¯¹å…ˆå‰æ¨é€çš„ ACKs å’Œå¯¹å…ˆå‰æ¨é€çš„ NACKsã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™äº›åœ¨ API ä¸­æ²¡æœ‰æ¸…æ™°åœ°åŒºåˆ†ï¼Œå› æ­¤æœ‰ä¸€äº›é€»è¾‘æ¥åˆ†è§£è¿™äº›ï¼ˆ&lt;code&gt;shouldRespond&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h4 id=&#34;æ¨é€&#34;&gt;æ¨é€&lt;/h4&gt;
&lt;p&gt;å½“ Istiod æ£€æµ‹åˆ°éœ€è¦æŸäº›é…ç½®æ›´æ–°æ—¶ï¼Œä¼šå‘ç”Ÿæ¨é€ã€‚è¿™å¤§è‡´ä¸è¯·æ±‚çš„ç»“æœç›¸åŒï¼ˆæ–°é…ç½®æ¨é€åˆ°å®¢æˆ·ç«¯ï¼‰ï¼Œåªæ˜¯ç”±ä¸åŒçš„æ¥æºè§¦å‘ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é…ç½®æ‘„å–ä¸­æè¿°çš„å„ç§ç»„ä»¶å¯ä»¥è§¦å‘é…ç½®æ›´æ–°ã€‚è¿™äº›è¢«æ‰¹é‡å¤„ç†ï¼ˆ&amp;ldquo;debounced&amp;rdquo;ï¼‰ï¼Œä»¥é¿å…åœ¨è¿ç»­å¤šæ¬¡æ›´æ”¹æ—¶æ´»åŠ¨è¿‡åº¦ï¼Œå¹¶æœ€ç»ˆæ’é˜Ÿåœ¨æ¨é€é˜Ÿåˆ—ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ¨é€é˜Ÿåˆ—å¤§éƒ¨åˆ†æ˜¯ä¸€ä¸ªæ­£å¸¸çš„é˜Ÿåˆ—ï¼Œä½†å®ƒæœ‰ä¸€äº›ç‰¹æ®Šé€»è¾‘æ¥åˆå¹¶æ¯ä¸ªç»™å®šä»£ç†çš„æ¨é€è¯·æ±‚ã€‚è¿™å¯¼è‡´æ¯ä¸ªä»£ç†æœ‰ 0 æˆ– 1 ä¸ªæœªå®Œæˆçš„æ¨é€è¯·æ±‚ï¼›å¦‚æœæœ‰æ›´å¤šæ›´æ–°è¿›æ¥ï¼Œç°æœ‰çš„æ¨é€è¯·æ±‚å°±ä¼šæ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªä»»åŠ¡è½®è¯¢è¿™ä¸ªé˜Ÿåˆ—å¹¶è§¦å‘æ¯ä¸ªå®¢æˆ·ç«¯å¼€å§‹æ¨é€ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-4.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œæ¯ä¸ªå®¢æˆ·ç«¯ä»»åŠ¡å°†æ‰¾åˆ°æ­£ç¡®çš„ç”Ÿæˆå™¨æ¥å¤„ç†è¯·æ±‚ï¼Œç”Ÿæˆæ‰€éœ€çš„é…ç½®ï¼Œå¹¶å‘é€ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ä¼˜åŒ–&#34;&gt;ä¼˜åŒ–&lt;/h4&gt;
&lt;p&gt;ä¸€ä¸ªç®€å•çš„å®ç°å°†ç®€å•åœ°é‡æ–°ç”Ÿæˆæ¯ä¸ªå®¢æˆ·ç«¯çš„æ‰€æœ‰è®¢é˜…ç±»å‹çš„æ‰€æœ‰èµ„æºï¼Œæ— è®ºé…ç½®æ˜¯å¦æ›´æ”¹ã€‚ç„¶è€Œï¼Œè¿™ç§æ–¹å¼æ‰©å±•æ€§å¾ˆå·®ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æœ‰è®¸å¤šçº§åˆ«çš„ä¼˜åŒ–ä»¥é¿å…åšè¿™äº›å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª &lt;code&gt;Full&lt;/code&gt; æ¨é€çš„æ¦‚å¿µã€‚åªæœ‰åœ¨æ›´æ”¹æ—¶ &lt;code&gt;Full&lt;/code&gt; æ¨é€ä¼šé‡æ–°è®¡ç®— &lt;code&gt;PushContext&lt;/code&gt;ï¼›å¦åˆ™ï¼Œè¿™å°†è¢«è·³è¿‡ï¼Œé‡ç”¨æœ€åä¸€ä¸ª &lt;code&gt;PushContext&lt;/code&gt;ã€‚æ³¨æ„ï¼šå³ä½¿æ˜¯ &lt;code&gt;Full&lt;/code&gt;ï¼Œæˆ‘ä»¬ä¹Ÿå°½å¯èƒ½ä»ä¸Šä¸€ä¸ª &lt;code&gt;PushContext&lt;/code&gt; å¤åˆ¶ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ª &lt;code&gt;WasmPlugin&lt;/code&gt; å‘ç”Ÿäº†å˜åŒ–ï¼Œæˆ‘ä»¬ä¸ä¼šé‡æ–°è®¡ç®—æœåŠ¡ç´¢å¼•ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;code&gt;Full&lt;/code&gt; åªæ˜¯æŒ‡æ˜¯å¦éœ€è¦é‡æ–°è®¡ç®— &lt;code&gt;PushContext&lt;/code&gt;ã€‚å³ä½¿åœ¨ &lt;code&gt;Full&lt;/code&gt; æ¨é€ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿä¼šè·Ÿè¸ªè§¦å‘æ­¤çš„é…ç½®æ›´æ–°ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æœ‰ &amp;ldquo;Config X çš„å®Œæ•´æ›´æ–°&amp;rdquo; æˆ– &amp;ldquo;æ‰€æœ‰é…ç½®çš„å®Œæ•´æ›´æ–°&amp;rdquo;ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œå¯¹äºå•ä¸ªä»£ç†ï¼Œæˆ‘ä»¬å°†æ£€æŸ¥å®ƒæ˜¯å¦å¯èƒ½å—åˆ°æ›´æ”¹çš„å½±å“ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“ä¸€ä¸ª sidecar ä»ä¸å— &lt;code&gt;Gateway&lt;/code&gt; æ›´æ–°çš„å½±å“ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŸ¥çœ‹é™åˆ¶æ›´æ–°èŒƒå›´çš„åˆ†æµï¼ˆæ¥è‡ª &lt;code&gt;Sidecar.egress.hosts&lt;/code&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬ç¡®å®šä»£ç†å¯èƒ½å—åˆ°å½±å“ï¼Œæˆ‘ä»¬å°†ç¡®å®šå“ªäº›&lt;em&gt;ç±»å‹&lt;/em&gt;å¯èƒ½å—åˆ°å½±å“ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬çŸ¥é“ &lt;code&gt;WasmPlugin&lt;/code&gt; ä¸å½±å“ &lt;code&gt;Cluster&lt;/code&gt; ç±»å‹ï¼Œæ‰€ä»¥åœ¨è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥è·³è¿‡ç”Ÿæˆ &lt;code&gt;Cluster&lt;/code&gt;ã€‚è­¦å‘Šï¼šEnvoy å½“å‰æœ‰ä¸€ä¸ªé”™è¯¯ï¼Œ&lt;em&gt;è¦æ±‚&lt;/em&gt; æ¯å½“æ¨é€å¯¹åº”çš„ &lt;code&gt;Cluster&lt;/code&gt; æ—¶å¿…é¡»æ¨é€ &lt;code&gt;Endpoints&lt;/code&gt;ï¼Œå› æ­¤è¿™ä¸ªä¼˜åŒ–åœ¨è¿™ä¸ªç‰¹å®šæƒ…å†µä¸‹æ•…æ„å…³é—­äº†ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬ç¡®å®šæˆ‘ä»¬éœ€è¦ç”Ÿæˆç±»å‹çš„å“ªä¸ªå­é›†ã€‚XDS æœ‰ä¸¤ç§æ¨¡å¼ - &amp;ldquo;State of the World (SotW)&amp;rdquo; å’Œ &amp;ldquo;Delta&amp;rdquo;ã€‚åœ¨ SotW ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ç”Ÿæˆç±»å‹çš„æ‰€æœ‰èµ„æºï¼Œå³ä½¿åªæœ‰ä¸€ä¸ªå‘ç”Ÿäº†å˜åŒ–ã€‚æ³¨æ„æˆ‘ä»¬å®é™…ä¸Šéœ€è¦&lt;em&gt;ç”Ÿæˆ&lt;/em&gt;æ‰€æœ‰è¿™äº›ï¼Œé€šå¸¸æ˜¯å› ä¸ºæˆ‘ä»¬ä¸å­˜å‚¨å…ˆå‰ç”Ÿæˆçš„èµ„æºï¼ˆä¸»è¦å› ä¸ºå®ƒä»¬æ˜¯æ¯ä¸ªå®¢æˆ·ç«¯ç”Ÿæˆçš„ï¼‰ã€‚è¿™ä¹Ÿæ„å‘³ç€æ¯å½“æˆ‘ä»¬ç¡®å®šæ˜¯å¦éœ€è¦æ›´æ”¹æ—¶ï¼Œæˆ‘ä»¬éƒ½æ˜¯åŸºäºä»”ç»†çš„ä»£ç åˆ†æï¼Œè€Œä¸æ˜¯åœ¨è¿è¡Œæ—¶ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡åœ¨ SotW ä¸­æœ‰è¿™æ ·çš„æœŸæœ›ï¼Œç”±äºåè®®çš„ä¸€ä¸ªç‰¹ç‚¹ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¯ä»¥å¯ç”¨æˆ‘ä»¬æœ€é‡è¦çš„ä¼˜åŒ–ä¹‹ä¸€ã€‚XDS ç±»å‹å½¢æˆä¸€æ£µæ ‘ï¼ŒCDS å’Œ LDS æ˜¯ Envoy çš„æ ‘æ ¹ã€‚å¯¹äºæ ¹ç±»å‹ï¼Œæˆ‘ä»¬&lt;em&gt;å¿…é¡»&lt;/em&gt;æ€»æ˜¯ç”Ÿæˆå®Œæ•´çš„èµ„æºé›†â€”â€”ç¼ºå¤±çš„èµ„æºè¢«è§†ä¸ºåˆ é™¤ã€‚
ç„¶è€Œï¼Œæ‰€æœ‰å…¶ä»–ç±»å‹&lt;em&gt;ä¸èƒ½&lt;/em&gt;æ˜¾å¼åˆ é™¤ï¼Œè€Œæ˜¯åœ¨æ‰€æœ‰å¼•ç”¨è¢«ç§»é™¤æ—¶æ¸…ç†ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¸ºéæ ¹ç±»å‹å‘é€éƒ¨åˆ†æ›´æ–°ï¼Œè€Œä¸åˆ é™¤æœªå‘é€çš„èµ„æºã€‚è¿™æœ‰æ•ˆåœ°å…è®¸åœ¨ SotW ä¸Šè¿›è¡Œ delta æ›´æ–°ã€‚è¿™ä¸ªä¼˜åŒ–å¯¹æˆ‘ä»¬çš„ç«¯ç‚¹ç”Ÿæˆå™¨è‡³å…³é‡è¦ï¼Œç¡®ä¿å½“ä¸€ä¸ª pod æ‰©å±•æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦æ›´æ–°è¯¥ pod å†…çš„ç«¯ç‚¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ§åˆ¶å™¨&#34;&gt;æ§åˆ¶å™¨&lt;/h2&gt;
&lt;p&gt;Istiod ç”±ä¸€ç³»åˆ—æ§åˆ¶å™¨ç»„æˆã€‚æŒ‰ Kubernetes çš„è¯´æ³•ï¼Œ&amp;ldquo;æ§åˆ¶å™¨æ˜¯è§‚å¯Ÿä½ çš„é›†ç¾¤çŠ¶æ€çš„æ§åˆ¶å¾ªç¯ï¼Œç„¶ååœ¨éœ€è¦æ—¶è¿›è¡Œæˆ–è¯·æ±‚æ›´æ”¹ã€‚&amp;rdquo;&lt;/p&gt;
&lt;p&gt;åœ¨ Istio ä¸­ï¼Œæˆ‘ä»¬æ›´è‡ªç”±åœ°ä½¿ç”¨è¿™ä¸ªæœ¯è¯­ã€‚Istio çš„æ§åˆ¶å™¨ä¸ä»…ä»…è§‚å¯Ÿä¸€ä¸ªé›†ç¾¤çš„çŠ¶æ€â€”â€”è®¸å¤šæ§åˆ¶å™¨ä»å¤šä¸ªé›†ç¾¤è¯»å–ï¼Œç”šè‡³ä»å¤–éƒ¨æ¥æºï¼ˆæ–‡ä»¶å’Œ XDSï¼‰è¯»å–ã€‚é€šå¸¸ï¼ŒKubernetes æ§åˆ¶å™¨ç„¶åå°†çŠ¶æ€å†™å›åˆ°é›†ç¾¤ï¼›Istio ç¡®å®æœ‰å‡ ä¸ªè¿™æ ·çš„æ§åˆ¶å™¨ï¼Œä½†å¤§å¤šæ•°æ§åˆ¶å™¨éƒ½é›†ä¸­åœ¨æ¨åŠ¨&lt;a href=&#34;#proxy-configuration&#34;&gt;ä»£ç†é…ç½®&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç¼–å†™æ§åˆ¶å™¨&#34;&gt;ç¼–å†™æ§åˆ¶å™¨&lt;/h3&gt;
&lt;p&gt;Istio æä¾›äº†ä¸€äº›å¸®åŠ©åº“æ¥å¼€å§‹ç¼–å†™æ§åˆ¶å™¨ã€‚è™½ç„¶è¿™äº›åº“æœ‰å¸®åŠ©ï¼Œä½†æ­£ç¡®ç¼–å†™ï¼ˆå’Œæµ‹è¯•ï¼ï¼‰ä¸€ä¸ªæ§åˆ¶å™¨ä»ç„¶æœ‰å¾ˆå¤šç»†å¾®ä¹‹å¤„ã€‚&lt;/p&gt;
&lt;p&gt;è¦å¼€å§‹ç¼–å†™æ§åˆ¶å™¨ï¼Œè¯·æŸ¥çœ‹&lt;a href=&#34;https://github.com/istio/istio/blob/master/pkg/kube/controllers/example_test.go&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹æ§åˆ¶å™¨&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ§åˆ¶å™¨æ¦‚è§ˆ&#34;&gt;æ§åˆ¶å™¨æ¦‚è§ˆ&lt;/h3&gt;
&lt;p&gt;ä¸‹é¢æä¾›äº† Istiod ä¸­æ§åˆ¶å™¨çš„é«˜çº§æ¦‚è§ˆã€‚æœ‰å…³æ¯ä¸ªæ§åˆ¶å™¨çš„æ›´å¤šä¿¡æ¯ï¼Œå»ºè®®å’¨è¯¢æ§åˆ¶å™¨çš„ Go æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-5.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼Œç›®å‰æ§åˆ¶å™¨çš„æ™¯è§‚ç›¸å½“å¹¿æ³›ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;#ServiceDiscovery&#34;&gt;æœåŠ¡å‘ç°&lt;/a&gt; å’Œ &lt;a href=&#34;#ConfigStore&#34;&gt;Config Store&lt;/a&gt; å·²åœ¨ä¸Šæ–‡è®¨è®ºï¼Œå› æ­¤è¿™é‡Œä¸å†èµ˜è¿°ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ç½‘æ ¼é…ç½®&#34;&gt;ç½‘æ ¼é…ç½®&lt;/h4&gt;
&lt;p&gt;ç½‘æ ¼é…ç½®æ§åˆ¶å™¨æ˜¯ä¸€ä¸ªç›¸å½“ç®€å•çš„æ§åˆ¶å™¨ï¼Œä» &lt;code&gt;ConfigMap&lt;/code&gt;ï¼ˆå¦‚æœä½¿ç”¨ &lt;code&gt;SHARED_MESH_CONFIG&lt;/code&gt; åˆ™ä¸ºå¤šä¸ªï¼‰è¯»å–ï¼Œå¤„ç†å¹¶åˆå¹¶è¿™äº›åˆ°ç±»å‹åŒ–çš„ &lt;code&gt;MeshConfig&lt;/code&gt; ä¸­ã€‚ç„¶åå®ƒé€šè¿‡ä¸€ä¸ªç®€å•çš„ &lt;code&gt;mesh.Watcher&lt;/code&gt; æš´éœ²è¿™ä¸ªï¼Œè¿™åªæ˜¯æš´éœ²ä¸€ç§è®¿é—®å½“å‰ &lt;code&gt;MeshConfig&lt;/code&gt; çš„æ–¹å¼å¹¶åœ¨å®ƒæ”¹å˜æ—¶è·å¾—é€šçŸ¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ingress&#34;&gt;Ingress&lt;/h4&gt;
&lt;p&gt;é™¤äº† &lt;code&gt;VirtualService&lt;/code&gt; å’Œ &lt;code&gt;Gateway&lt;/code&gt;ï¼ŒIstio ä¹Ÿæ”¯æŒ &lt;code&gt;Ingress&lt;/code&gt; æ ¸å¿ƒèµ„æºç±»å‹ã€‚åƒ CRD ä¸€æ ·ï¼Œ&lt;code&gt;Ingress&lt;/code&gt; æ§åˆ¶å™¨å®ç° &lt;code&gt;ConfigStore&lt;/code&gt;ï¼Œä½†æœ‰äº›ä¸åŒã€‚&lt;code&gt;Ingress&lt;/code&gt; èµ„æºåœ¨å³æ—¶è½¬æ¢ä¸º &lt;code&gt;VirtualService&lt;/code&gt; å’Œ &lt;code&gt;Gateway&lt;/code&gt;ï¼Œæ‰€ä»¥è™½ç„¶æ§åˆ¶å™¨è¯»å– &lt;code&gt;Ingress&lt;/code&gt; èµ„æºï¼ˆå’Œä¸€äº›ç›¸å…³ç±»å‹å¦‚ &lt;code&gt;IngressClass&lt;/code&gt;ï¼‰ï¼Œå®ƒå‘å‡ºå…¶ä»–ç±»å‹ã€‚è¿™å…è®¸å…¶ä»–ä»£ç ä¸ç”¨å…³å¿ƒ Ingressï¼Œåªå…³æ³¨æ ¸å¿ƒç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;é™¤äº†è¿™ç§è½¬æ¢å¤–ï¼Œ&lt;code&gt;Ingress&lt;/code&gt; è¿˜éœ€è¦åœ¨çŠ¶æ€ä¸­å†™å…¥å®ƒå¯ä»¥è®¿é—®çš„åœ°å€ã€‚è¿™ç”± Ingress çŠ¶æ€æ§åˆ¶å™¨å®Œæˆã€‚&lt;/p&gt;
&lt;h4 id=&#34;gateway&#34;&gt;Gateway&lt;/h4&gt;
&lt;p&gt;Gatewayï¼ˆæŒ‡çš„æ˜¯ &lt;a href=&#34;http://gateway-api.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes API&lt;/a&gt;ï¼Œä¸æ˜¯åŒåçš„ Istio ç±»å‹ï¼‰çš„å·¥ä½œæ–¹å¼ä¸ &lt;a href=&#34;#ingress&#34;&gt;Ingress&lt;/a&gt; éå¸¸ç›¸ä¼¼ã€‚ç½‘å…³æ§åˆ¶å™¨ä¹Ÿå°†ç½‘å…³ API ç±»å‹è½¬æ¢ä¸º &lt;code&gt;VirtualService&lt;/code&gt; å’Œ &lt;code&gt;Gateway&lt;/code&gt;ï¼Œå®ç° &lt;code&gt;ConfigStore&lt;/code&gt; æ¥å£ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œè¿˜æœ‰ä¸€äº›é¢å¤–çš„é€»è¾‘ã€‚ç½‘å…³ç±»å‹æœ‰å¹¿æ³›çš„çŠ¶æ€æŠ¥å‘Šã€‚ä¸ Ingress ä¸åŒï¼Œè¿™æ˜¯çŠ¶æ€æŠ¥å‘Šæ˜¯åœ¨ä¸»æ§åˆ¶å™¨ä¸­ç›´æ¥å®Œæˆçš„ï¼Œå…è®¸åœ¨å¤„ç†èµ„æºçš„é€»è¾‘ä¸­ç›´æ¥ç”ŸæˆçŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼ŒGateway æ¶‰åŠä¸¤ä¸ªç»„ä»¶å†™å…¥åˆ°é›†ç¾¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç½‘å…³ç±»æ§åˆ¶å™¨æ˜¯ä¸€ä¸ªç®€å•çš„æ§åˆ¶å™¨ï¼Œåªæ˜¯å†™ä¸€ä¸ªæè¿°æˆ‘ä»¬å®ç°çš„é»˜è®¤ &lt;code&gt;GatewayClass&lt;/code&gt; å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;ç½‘å…³éƒ¨ç½²æ§åˆ¶å™¨ä½¿ç”¨æˆ·èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªå®é™…é…ç½®åº•å±‚èµ„æºï¼ˆéƒ¨ç½²å’ŒæœåŠ¡ï¼‰çš„ç½‘å…³ã€‚è¿™æ›´åƒæ˜¯ä¸€ä¸ªä¼ ç»Ÿçš„â€œOperatorâ€ã€‚è¿™éƒ¨åˆ†é€»è¾‘æ˜¯ç¡®å®šåŸºäº &lt;code&gt;istio.io/rev&lt;/code&gt; æ ‡ç­¾å“ªä¸ª Istiod ä¿®è®¢åº”è¯¥å¤„ç†èµ„æºï¼ˆåæ˜  sidecar æ³¨å…¥ï¼‰ï¼›å› æ­¤ï¼Œè¿™éœ€è¦ä¾èµ–â€œæ ‡ç­¾è§‚å¯Ÿè€…â€æ§åˆ¶å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;crd-è§‚å¯Ÿè€…&#34;&gt;CRD è§‚å¯Ÿè€…&lt;/h4&gt;
&lt;p&gt;å¯¹äºé’ˆå¯¹è‡ªå®šä¹‰ç±»å‹ï¼ˆCRDï¼‰çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬å¸Œæœ›ä¼˜é›…åœ°å¤„ç†ç¼ºå¤±çš„ CRDã€‚å¦‚æœå¯¹ç¼ºå¤±ç±»å‹å¯åŠ¨ informersï¼Œåˆ™ä¼šå¯¼è‡´é”™è¯¯å¹¶é˜»å¡å¯åŠ¨ã€‚ç›¸åï¼Œæˆ‘ä»¬å¼•å…¥äº†ä¸€ä¸ªâ€œCRD è§‚å¯Ÿè€…â€ç»„ä»¶ï¼Œè§‚å¯Ÿé›†ç¾¤ä¸­çš„ CRD ä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦å¯ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸¤ç§ä½¿ç”¨æ–¹å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€äº›ç»„ä»¶åªæ˜¯åœ¨åšéœ€è¦çš„å·¥ä½œä¹‹å‰é˜»å¡ &lt;code&gt;watcher.WaitForCRD(...)&lt;/code&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;kclient.NewDelayedInformer&lt;/code&gt; ä¹Ÿå¯ä»¥å®Œå…¨æŠ½è±¡è¿™ä¸€ç‚¹ï¼Œé€šè¿‡æä¾›ä¸€ä¸ªåœ¨å¹•åå¤„ç†è¿™ä¸€ç‚¹çš„å®¢æˆ·ç«¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;credentials-controller&#34;&gt;Credentials Controller&lt;/h4&gt;
&lt;p&gt;å‡­è¯æ§åˆ¶å™¨æš´éœ²è®¿é—® TLS è¯ä¹¦ä¿¡æ¯çš„é€”å¾„ï¼Œè¿™äº›ä¿¡æ¯å­˜å‚¨åœ¨é›†ç¾¤çš„ &lt;code&gt;Secrets&lt;/code&gt; ä¸­ã€‚é™¤äº†ç®€å•åœ°è®¿é—®è¯ä¹¦å¤–ï¼Œå®ƒè¿˜æœ‰ä¸€ä¸ªæˆæƒç»„ä»¶ï¼Œå¯ä»¥éªŒè¯è¯·æ±‚è€…æ˜¯å¦æœ‰æƒè¯»å–å…¶å‘½åç©ºé—´ä¸­çš„ &lt;code&gt;Secrets&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;discovery-filter&#34;&gt;Discovery Filter&lt;/h4&gt;
&lt;p&gt;å‘ç°è¿‡æ»¤å™¨æ§åˆ¶å™¨ç”¨äºå®ç° &lt;code&gt;MeshConfig&lt;/code&gt; çš„ &lt;code&gt;discoverySelectors&lt;/code&gt; å­—æ®µã€‚è¿™ä¸ªæ§åˆ¶å™¨è¯»å–é›†ç¾¤ä¸­çš„ &lt;code&gt;Namespace&lt;/code&gt; ä»¥ç¡®å®šå®ƒä»¬æ˜¯å¦åº”è¯¥è¢«â€œé€‰ä¸­â€ã€‚è®¸å¤šæ§åˆ¶å™¨ä½¿ç”¨è¿™ä¸ªè¿‡æ»¤å™¨æ¥åªå¤„ç†é…ç½®çš„ä¸€ä¸ªå­é›†ã€‚&lt;/p&gt;
&lt;h4 id=&#34;å¤šé›†ç¾¤&#34;&gt;å¤šé›†ç¾¤&lt;/h4&gt;
&lt;p&gt;å„ç§æ§åˆ¶å™¨ä»å¤šä¸ªé›†ç¾¤è¯»å–ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å§‹äºå¤šé›†ç¾¤å¯†é’¥æ§åˆ¶å™¨ï¼Œè¯¥æ§åˆ¶å™¨è¯»å– &lt;code&gt;kubeconfig&lt;/code&gt; æ–‡ä»¶ï¼ˆå­˜å‚¨ä¸º &lt;code&gt;Secrets&lt;/code&gt;ï¼‰ï¼Œå¹¶ä¸ºæ¯ä¸ªåˆ›å»º Kubernetes å®¢æˆ·ç«¯ã€‚æ§åˆ¶å™¨å…è®¸æ³¨å†Œå¤„ç†ç¨‹åºï¼Œè¿™äº›å¤„ç†ç¨‹åºå¯ä»¥å¤„ç†é›†ç¾¤çš„æ·»åŠ /æ›´æ–°/åˆ é™¤ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœ‰ä¸¤ä¸ªå®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡­è¯æ§åˆ¶å™¨è´Ÿè´£è¯»å–å­˜å‚¨ä¸º Secrets çš„ TLS è¯ä¹¦ã€‚&lt;/li&gt;
&lt;li&gt;Kubernetes æœåŠ¡å‘ç°æ§åˆ¶å™¨æœ‰ç‚¹åƒä¸€ä¸ªå¤§å—å¤´ï¼Œé™¤äº†æ ¸å¿ƒæœåŠ¡å‘ç°æ§åˆ¶å™¨ä¹‹å¤–ï¼Œè¿˜å¯åŠ¨äº†ä¸€å †å…¶ä»–å­æ§åˆ¶å™¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±äºæ•´ä½“å¤æ‚æ€§ï¼Œçœ‹çœ‹è¿™ä¸ªæ”¾å¤§ä¸€ç‚¹ä¼šæœ‰å¸®åŠ©ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;./output-6.svg&#34; alt=&#34;&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h4 id=&#34;è™šæ‹Ÿæœº&#34;&gt;è™šæ‹Ÿæœº&lt;/h4&gt;
&lt;p&gt;è™šæ‹Ÿæœºæ”¯æŒç”±ä¸¤ä¸ªæ§åˆ¶å™¨ç»„æˆã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨æ³¨å†Œæ§åˆ¶å™¨æ˜¯ä¸€ä¸ªç›¸å½“ç‹¬ç‰¹çš„æ§åˆ¶å™¨â€”â€”æ§åˆ¶å™¨çš„è¾“å…¥æ˜¯ XDS è¿æ¥ã€‚å¯¹æ¯ä¸ª XDS è¿æ¥ï¼Œåˆ›å»ºä¸€ä¸ª &lt;code&gt;WorkloadEntry&lt;/code&gt; æ¥æ³¨å†Œ XDS å®¢æˆ·ç«¯ï¼ˆé€šå¸¸æ˜¯åœ¨ VM ä¸Šè¿è¡Œçš„ &lt;code&gt;istio-proxy&lt;/code&gt;ï¼‰åˆ°ç½‘æ ¼ä¸­ã€‚è¿™ä¸ª &lt;code&gt;WorkloadEntry&lt;/code&gt; ä¸è¿æ¥çš„ç”Ÿå‘½å‘¨æœŸç»‘å®šï¼Œæœ‰ä¸€äº›é€»è¾‘ç¡®ä¿ä¸´æ—¶çš„åœæœºï¼ˆé‡æ–°è¿æ¥ç­‰ï¼‰ä¸ä¼šç§»é™¤ &lt;code&gt;WorkloadEntry&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¥åº·æ£€æŸ¥æ§åˆ¶å™¨è¿˜æ§åˆ¶ &lt;code&gt;WorkloadEntry&lt;/code&gt; çš„å¥åº·çŠ¶æ€ã€‚å¥åº·çŠ¶æ€é€šè¿‡ XDS å®¢æˆ·ç«¯æŠ¥å‘Šå¹¶ä¸ &lt;code&gt;WorkloadEntry&lt;/code&gt; åŒæ­¥ã€‚&lt;/p&gt;
&lt;h4 id=&#34;webhook&#34;&gt;Webhook&lt;/h4&gt;
&lt;p&gt;Istio åŒ…å«éªŒè¯å’Œå˜æ›´ webhook é…ç½®ã€‚è¿™äº›éœ€è¦åœ¨ &lt;code&gt;caBundle&lt;/code&gt; ä¸­æŒ‡å®šä»¥é…ç½® TLS ä¿¡ä»»ã€‚å› ä¸º Istiod çš„ CA è¯ä¹¦æœ‰äº›åŠ¨æ€æ€§ï¼Œè¿™åœ¨è¿è¡Œæ—¶è¿›è¡Œä¿®è¡¥ï¼ˆè€Œä¸æ˜¯ä½œä¸ºå®‰è£…çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚webhook æ§åˆ¶å™¨å¤„ç†è¿™ç§ä¿®è¡¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›æ§åˆ¶å™¨éå¸¸ç›¸ä¼¼ï¼Œä½†ç”±äºå„ç§åŸå› æ˜¯ä¸åŒçš„ç»„ä»¶ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>SkyWalking 10 å‘å¸ƒï¼šæœåŠ¡å±‚æ¬¡ç»“æ„ã€åŸºäº eBPF çš„ Kubernetes ç½‘ç»œç›‘æ§ã€BanyanDB ç­‰</title>
      <link>https://cloudnativecn.com/blog/skywalking-10-release/</link>
      <pubDate>Tue, 14 May 2024 11:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/skywalking-10-release/</guid>
      <description>&lt;p&gt;Apache SkyWalking å›¢é˜Ÿä»Šå¤©å®£å¸ƒå‘å¸ƒ SkyWalking 10ã€‚SkyWalking 10 æä¾›äº†ä¸€ç³»åˆ—çªç ´æ€§çš„åŠŸèƒ½å’Œå¢å¼ºåŠŸèƒ½ã€‚Layer å’Œ Service Hierarchy çš„å¼•å…¥é€šè¿‡å°†æœåŠ¡å’ŒæŒ‡æ ‡ç»„ç»‡æˆä¸åŒçš„å±‚æ¬¡ï¼Œå¹¶æä¾›è·¨å±‚æ— ç¼å¯¼èˆªï¼Œä»è€Œç®€åŒ–äº†ç›‘æ§ã€‚åˆ©ç”¨ eBPF æŠ€æœ¯ï¼ŒKubernetes ç½‘ç»œç›‘æ§æä¾›äº†å¯¹ç½‘ç»œæµé‡ã€æ‹“æ‰‘å’Œ TCP/HTTP æŒ‡æ ‡çš„è¯¦ç»†æ´å¯Ÿã€‚BanyanDB ä½œä¸ºé«˜æ€§èƒ½çš„åŸç”Ÿå­˜å‚¨è§£å†³æ–¹æ¡ˆå‡ºç°ï¼ŒåŒæ—¶æ‰©å±•çš„ç›‘æ§æ”¯æŒåŒ…æ‹¬ Apache RocketMQã€ClickHouse å’Œ Apache ActiveMQ Classicã€‚å¯¹å¤šæ ‡ç­¾åç§°çš„æ”¯æŒå¢å¼ºäº†æŒ‡æ ‡åˆ†æçš„çµæ´»æ€§ï¼Œè€Œå¢å¼ºçš„å¯¼å‡ºå’ŒæŸ¥è¯¢åŠŸèƒ½ç®€åŒ–äº†æ•°æ®åˆ†å‘å’Œå¤„ç†ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ç®€è¦ä»‹ç»äº†è¿™äº›æ–°åŠŸèƒ½å’Œå¢å¼ºåŠŸèƒ½ä»¥åŠå…¶ä»–ä¸€äº›å€¼å¾—æ³¨æ„çš„å˜åŒ–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;layer-å’Œ-service-hierarchy&#34;&gt;Layer å’Œ Service Hierarchy&lt;/h2&gt;
&lt;p&gt;Layer æ¦‚å¿µæ˜¯åœ¨ SkyWalking 9.0.0 ä¸­å¼•å…¥çš„ï¼Œå®ƒä»£è¡¨è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ä¸ªæŠ½è±¡æ¡†æ¶ï¼Œä¾‹å¦‚æ“ä½œç³»ç»Ÿï¼ˆOS_LINUX layerï¼‰ã€Kubernetesï¼ˆk8s layerï¼‰ã€‚å®ƒæ ¹æ®ç³»ç»Ÿä¸­æœåŠ¡å’ŒæŒ‡æ ‡çš„è§’è‰²å’ŒèŒè´£å°†å…¶ç»„ç»‡åˆ°ä¸åŒçš„å±‚æ¬¡ã€‚SkyWalking ä¸ºæ¯ä¸ªå±‚æä¾›äº†ä¸€å¥—ç›‘æ§å’Œè¯Šæ–­å·¥å…·ï¼Œä½†å±‚ä¹‹é—´å­˜åœ¨ gapï¼Œæ— æ³•è½»æ¾è·¨å±‚æ¡¥æ¥æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ SkyWalking 10 ä¸­ï¼ŒSkyWalking æä¾›äº†è·¨å±‚è·³è½¬/è¿æ¥çš„æ–°åŠŸèƒ½ï¼Œä¸ºç”¨æˆ·æä¾›æ— ç¼çš„ç›‘æ§ä½“éªŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;layer-jump&#34;&gt;Layer Jump&lt;/h3&gt;
&lt;p&gt;åœ¨æ‹“æ‰‘å›¾ä¸­ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»æœåŠ¡èŠ‚ç‚¹è·³è½¬åˆ°å¦ä¸€å±‚æœåŠ¡çš„ä»ªè¡¨æ¿ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†é€šè¿‡ç‚¹å‡»æ‹“æ‰‘èŠ‚ç‚¹ä» GENERAL å±‚æœåŠ¡æ‹“æ‰‘è·³è½¬åˆ° VIRTUAL_DATABASE æœåŠ¡å±‚ä»ªè¡¨æ¿çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1-layer-jump&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1: Layer Jump&#34; srcset=&#34;
               /blog/skywalking-10-release/layer_jump_hu10142577769154495990.webp 400w,
               /blog/skywalking-10-release/layer_jump_hu4601478764814933129.webp 760w,
               /blog/skywalking-10-release/layer_jump_hu1143009278059272433.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/layer_jump_hu10142577769154495990.webp&#34;
               width=&#34;760&#34;
               height=&#34;382&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1: Layer Jump
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2-layer-jump-dashboard&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2: Layer jump Dashboard&#34; srcset=&#34;
               /blog/skywalking-10-release/layer_jump2_hu11703627951284172173.webp 400w,
               /blog/skywalking-10-release/layer_jump2_hu17778451633452738051.webp 760w,
               /blog/skywalking-10-release/layer_jump2_hu9431654776986396508.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/layer_jump2_hu11703627951284172173.webp&#34;
               width=&#34;760&#34;
               height=&#34;259&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2: Layer jump Dashboard
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;service-hierarchy&#34;&gt;Service Hierarchy&lt;/h3&gt;
&lt;p&gt;SkyWalking 10 å¼•å…¥äº†ä¸€ä¸ªæ–°æ¦‚å¿µï¼Œç§°ä¸º Service Hierarchyï¼Œå®ƒå®šä¹‰äº†å„å±‚ä¸­ç°æœ‰é€»è¾‘ç›¸åŒæœåŠ¡çš„å…³ç³»ã€‚OAP å°†æ£€æµ‹ä¸åŒå±‚æ¬¡çš„æœåŠ¡ï¼Œå¹¶å°è¯•å»ºç«‹è¿æ¥ã€‚ç”¨æˆ·å¯ä»¥ç‚¹å‡»ä»»ä½•å±‚çš„æœåŠ¡æ‹“æ‰‘èŠ‚ç‚¹æˆ–æœåŠ¡ä»ªè¡¨æ¿ä¸­çš„ Hierarchy Services è·å– Hierarchy Topologyã€‚åœ¨æ­¤æ‹“æ‰‘å›¾ä¸­ï¼Œç”¨æˆ·å¯ä»¥çœ‹åˆ°ä¸åŒå±‚æ¬¡æœåŠ¡ä¹‹é—´çš„å…³ç³»å’ŒæŒ‡æ ‡æ‘˜è¦ï¼Œå¹¶ä¸”å¯ä»¥è·³è½¬åˆ°è¯¥å±‚çš„æœåŠ¡ä»ªè¡¨æ¿ã€‚å½“æœåŠ¡å‘ç”Ÿæ€§èƒ½é—®é¢˜æ—¶ï¼Œç”¨æˆ·å¯ä»¥è½»æ¾åˆ†æä¸åŒå±‚æ¬¡çš„æŒ‡æ ‡å¹¶æ‰¾å‡ºæ ¹æœ¬åŸå› ï¼š&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ Service Hierarchy å…³ç³»çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åº”ç”¨ç¨‹åº &lt;code&gt;song&lt;/code&gt; åŒæ—¶åœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²äº† SkyWalking agent å’Œ Service Meshã€‚å› æ­¤ï¼Œåº”ç”¨ç¨‹åº &lt;code&gt;song&lt;/code&gt; è·¨è¶Šäº† GENERALã€MESHã€MESH_DP å’Œ K8S_SERVICE å±‚ï¼ŒSkyWalking å¯ä»¥ç›‘æ§è¿™äº›å±‚æ¬¡ï¼ŒService Hierarchy æ‹“æ‰‘å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3-service-hierarchy-agent-with-k8s-service-and-mesh-with-k8s-service&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3: Service Hierarchy Agent With K8s Service And Mesh With K8s Service&#34; srcset=&#34;
               /blog/skywalking-10-release/song_hu17989075818403223189.webp 400w,
               /blog/skywalking-10-release/song_hu15999669808595071985.webp 760w,
               /blog/skywalking-10-release/song_hu11492588395586370092.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/song_hu17989075818403223189.webp&#34;
               width=&#34;760&#34;
               height=&#34;457&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3: Service Hierarchy Agent With K8s Service And Mesh With K8s Service
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿˜å¯ä»¥æœ‰ Service Instance Hierarchy æ‹“æ‰‘æ¥è·å–è·¨å±‚çš„å•å®ä¾‹çŠ¶æ€ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š    















&lt;figure  id=&#34;figure-å›¾-4-instance-hierarchy-agent-with-k8s-servicepod&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4: Instance Hierarchy Agent With K8s Service(Pod)&#34; srcset=&#34;
               /blog/skywalking-10-release/song_instance_hu3813211082561186002.webp 400w,
               /blog/skywalking-10-release/song_instance_hu1690291293558603073.webp 760w,
               /blog/skywalking-10-release/song_instance_hu5469054882107122005.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/song_instance_hu3813211082561186002.webp&#34;
               width=&#34;760&#34;
               height=&#34;379&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4: Instance Hierarchy Agent With K8s Service(Pod)
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;ol start=&#34;2&#34;&gt;
&lt;li&gt;åœ¨ Kubernetes é›†ç¾¤ä¸­éƒ¨ç½²å¹¶ç”±åº”ç”¨ç¨‹åº &lt;code&gt;song&lt;/code&gt; ä½¿ç”¨çš„ PostgreSQL æ•°æ®åº“ &lt;code&gt;psql&lt;/code&gt;ã€‚å› æ­¤ï¼Œæ•°æ®åº“ &lt;code&gt;psql&lt;/code&gt; è·¨è¶Š &lt;code&gt;VIRTUAL_DATABASE&lt;/code&gt;ã€&lt;code&gt;POSTGRESQL&lt;/code&gt; å’Œ &lt;code&gt;K8S_SERVICE&lt;/code&gt; å±‚ï¼ŒSkyWalking å¯ä»¥ç›‘æ§è¿™äº›å±‚æ¬¡ï¼ŒService Hierarchy æ‹“æ‰‘å¦‚ä¸‹ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5-service-hierarchy-agentvirtual-database-with-real-database-and-k8s-service&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5: Service Hierarchy Agent(Virtual Database) With Real Database And K8s Service&#34; srcset=&#34;
               /blog/skywalking-10-release/postgre_hu6996347874478222530.webp 400w,
               /blog/skywalking-10-release/postgre_hu8552692846907299522.webp 760w,
               /blog/skywalking-10-release/postgre_hu9609057140340617837.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/postgre_hu6996347874478222530.webp&#34;
               width=&#34;760&#34;
               height=&#34;422&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5: Service Hierarchy Agent(Virtual Database) With Real Database And K8s Service
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ‰å…³æ›´å¤šæ”¯æŒçš„å±‚æ¬¡ä»¥åŠå¦‚ä½•æ£€æµ‹ä¸åŒå±‚æ¬¡æœåŠ¡ä¹‹é—´çš„å…³ç³»ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/concepts-and-designs/service-hierarchy/#service-hierarchy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Service Hierarchy&lt;/a&gt;ã€‚æœ‰å…³å¦‚ä½•åœ¨ SkyWalking ä¸­é…ç½® Service Hierarchyï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/concepts-and-designs/service-hierarchy-configuration/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Service Hierarchy Configuration&lt;/a&gt; éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-ebpf-ç›‘æ§-kubernetes-ç½‘ç»œæµé‡&#34;&gt;ä½¿ç”¨ eBPF ç›‘æ§ Kubernetes ç½‘ç»œæµé‡&lt;/h2&gt;
&lt;p&gt;åœ¨ä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼ŒSkyWalking æä¾›äº† &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/setup/backend/backend-k8s-monitoring-metrics-cadvisor/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¥è‡ª kube-state-metrics å’Œ cAdvisor çš„ Kubernetes (K8s) ç›‘æ§&lt;/a&gt;ï¼Œå®ƒå¯ä»¥ç›‘æ§ Kubernetes é›†ç¾¤çŠ¶æ€å’Œ Kubernetes èµ„æºçš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ SkyWalking 10 ä¸­ï¼Œé€šè¿‡åˆ©ç”¨ &lt;a href=&#34;https://skywalking.apache.org/docs/skywalking-rover/latest/readme/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache SkyWalking Rover&lt;/a&gt; 0.6+ï¼ŒSkyWalking å…·æœ‰ä½¿ç”¨ eBPF ç›‘æ§ Kubernetes ç½‘ç»œæµé‡çš„èƒ½åŠ›ï¼Œå¯ä»¥æ”¶é›†å’Œæ˜ å°„ Kubernetes ç¯å¢ƒä¸­åº”ç”¨ç¨‹åºçš„è®¿é—®æ—¥å¿—ã€‚é€šè¿‡è¿™äº›æ•°æ®ï¼ŒSkyWalking å¯ä»¥ä» Kubernetes è§’åº¦åˆ†æå’Œæä¾›æœåŠ¡æµé‡ã€æ‹“æ‰‘ã€TCP/HTTP çº§åˆ«æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾æ˜¾ç¤ºäº† Kubernetes ç½‘ç»œæµé‡çš„æ‹“æ‰‘å’Œ TCP ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-6-kubernetes-network-traffic-topology&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 6: Kubernetes Network Traffic Topology&#34; srcset=&#34;
               /blog/skywalking-10-release/k8s_topology_hu4276743585279988251.webp 400w,
               /blog/skywalking-10-release/k8s_topology_hu8219443752033304945.webp 760w,
               /blog/skywalking-10-release/k8s_topology_hu5445802710443120622.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/k8s_topology_hu4276743585279988251.webp&#34;
               width=&#34;760&#34;
               height=&#34;459&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 6: Kubernetes Network Traffic Topology
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-7-kubernetes-network-traffic-tcp-dashboard&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 7: Kubernetes Network Traffic TCP Dashboard&#34; srcset=&#34;
               /blog/skywalking-10-release/k8s_dashboard_hu2794396169615117733.webp 400w,
               /blog/skywalking-10-release/k8s_dashboard_hu5455487476317143218.webp 760w,
               /blog/skywalking-10-release/k8s_dashboard_hu11092733754357776690.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/k8s_dashboard_hu2794396169615117733.webp&#34;
               width=&#34;760&#34;
               height=&#34;433&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 7: Kubernetes Network Traffic TCP Dashboard
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ‰å…³å¦‚ä½•ä½¿ç”¨ eBPF ç›‘æ§ Kubernetes ç½‘ç»œæµé‡çš„æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/blog/2024-03-18-monitor-kubernetes-network-by-ebpf/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ eBPF ç›‘æ§ Kubernetes ç½‘ç»œæµé‡&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;banyandb---åŸç”Ÿ-apm-æ•°æ®åº“&#34;&gt;BanyanDB - åŸç”Ÿ APM æ•°æ®åº“&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://skywalking.apache.org/docs/skywalking-banyandb/latest/readme/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;BanyanDB&lt;/a&gt; 0.6.0 å’Œ &lt;a href=&#34;https://github.com/apache/skywalking-banyandb-java-client&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;BanyanDB Java å®¢æˆ·ç«¯&lt;/a&gt; 0.6.0 éš SkyWalking 10 ä¸€èµ·å‘å¸ƒã€‚ä½œä¸º SkyWalking çš„åŸç”Ÿå­˜å‚¨è§£å†³æ–¹æ¡ˆï¼ŒBanyanDB å°†æˆä¸º SkyWalking çš„ä¸‹ä¸€ä»£å­˜å‚¨è§£å†³æ–¹æ¡ˆã€‚æ¨èåœ¨ 0.6 åˆ° 1.0 æœŸé—´ç”¨äºä¸­ç­‰è§„æ¨¡çš„éƒ¨ç½²ã€‚
å®ƒå±•ç¤ºäº†é«˜æ€§èƒ½æ”¹è¿›çš„æ½œåŠ›ã€‚ä¸ Elasticsearch åœ¨åŒä¸€è§„æ¨¡ä¸‹ç›¸æ¯”ï¼ŒCPU ä½¿ç”¨ç‡é™ä½ 50%ï¼Œå†…å­˜ä½¿ç”¨ç‡é™ä½ 50%ï¼Œç£ç›˜ä½¿ç”¨é‡å‡å°‘ 40%ã€‚&lt;/p&gt;
&lt;h2 id=&#34;apache-rocketmq-æœåŠ¡å™¨ç›‘æ§&#34;&gt;Apache RocketMQ æœåŠ¡å™¨ç›‘æ§&lt;/h2&gt;
&lt;p&gt;Apache RocketMQ æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ†å¸ƒå¼æ¶ˆæ¯å’Œæµå¹³å°ï¼Œå¹¿æ³›åº”ç”¨äºäº’è”ç½‘ã€å¤§æ•°æ®ã€ç§»åŠ¨äº’è”ç½‘ã€ç‰©è”ç½‘ç­‰é¢†åŸŸã€‚SkyWalking ä¸º RocketMQ æä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„ç›‘æ§ä»ªè¡¨æ¿ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cluster Metricsï¼šåŒ…æ‹¬å½“å¤©äº§ç”Ÿ/æ¶ˆè´¹çš„æ¶ˆæ¯æ•°ã€æ€»ç”Ÿäº§è€…/æ¶ˆè´¹è€… TPSã€ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¶ˆæ¯å¤§å°ã€æˆªè‡³æ˜¨å¤©äº§ç”Ÿ/æ¶ˆè´¹çš„æ¶ˆæ¯æ•°ã€æœ€å¤§æ¶ˆè´¹è€…å»¶è¿Ÿã€æœ€å¤§ commitLog ç£ç›˜æ¯”ã€commitLog ç£ç›˜æ¯”ã€æ‹‰å–/å‘é€çº¿ç¨‹æ± é˜Ÿåˆ—å¤´ç­‰å¾…æ—¶é—´ã€topic count å’Œ broker countã€‚&lt;/li&gt;
&lt;li&gt;Broker Metricsï¼šåŒ…æ‹¬ç”Ÿäº§/æ¶ˆè´¹ TPSã€ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¶ˆæ¯å¤§å°ã€‚&lt;/li&gt;
&lt;li&gt;Topic Metricsï¼šåŒ…æ‹¬æœ€å¤§ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ¶ˆæ¯å¤§å°ã€æ¶ˆè´¹è€…å»¶è¿Ÿã€ç”Ÿäº§/æ¶ˆè´¹ TPSã€ç”Ÿäº§/æ¶ˆè´¹åç§»ã€ç”Ÿäº§/æ¶ˆè´¹æ¶ˆæ¯å¤§å°ã€æ¶ˆè´¹è€…ç»„æ•°å’Œä»£ç†æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹å›¾æ˜¾ç¤ºäº† RocketMQ Cluster Metrics ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-8-apache-rocketmq-æœåŠ¡å™¨ç›‘æ§&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 8: Apache RocketMQ æœåŠ¡å™¨ç›‘æ§&#34; srcset=&#34;
               /blog/skywalking-10-release/rocket_mq_hu16145755530748750030.webp 400w,
               /blog/skywalking-10-release/rocket_mq_hu7327102152519477921.webp 760w,
               /blog/skywalking-10-release/rocket_mq_hu7750846284856592431.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/rocket_mq_hu16145755530748750030.webp&#34;
               width=&#34;760&#34;
               height=&#34;409&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 8: Apache RocketMQ æœåŠ¡å™¨ç›‘æ§
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ‰å…³ RocketMQ ç›‘æ§çš„æ›´å¤šæŒ‡æ ‡å’Œè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/setup/backend/backend-rocketmq-monitoring/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache RocketMQ æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;clickhouse-server-ç›‘æ§&#34;&gt;ClickHouse Server ç›‘æ§&lt;/h2&gt;
&lt;p&gt;ClickHouse æ˜¯ä¸€ä¸ªå¼€æºçš„åˆ—å¼æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå¯ä»¥å®æ—¶ç”Ÿæˆåˆ†ææ•°æ®æŠ¥å‘Šï¼Œå¹¿æ³›ç”¨äºåœ¨çº¿åˆ†æå¤„ç† (OLAP)ã€‚ClickHouse ç›‘æ§æä¾›äº† ClickHouse æœåŠ¡å™¨çš„æŒ‡æ ‡ã€äº‹ä»¶å’Œå¼‚æ­¥æŒ‡æ ‡çš„ç›‘æ§ï¼ŒåŒ…æ‹¬ä»¥ä¸‹éƒ¨åˆ†çš„æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Server Metrics&lt;/li&gt;
&lt;li&gt;Query Metrics&lt;/li&gt;
&lt;li&gt;Network Metrics&lt;/li&gt;
&lt;li&gt;Insert Metrics&lt;/li&gt;
&lt;li&gt;Replica Metrics&lt;/li&gt;
&lt;li&gt;MergeTree Metrics&lt;/li&gt;
&lt;li&gt;ZooKeeper Metrics&lt;/li&gt;
&lt;li&gt;Embedded ClickHouse Keeper Metrics&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹å›¾æ˜¾ç¤ºäº† ClickHouse Cluster Metrics ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-9-clickhouse-æœåŠ¡å™¨ç›‘æ§&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 9: ClickHouse æœåŠ¡å™¨ç›‘æ§&#34; srcset=&#34;
               /blog/skywalking-10-release/clickhouse_hu17124604017186211784.webp 400w,
               /blog/skywalking-10-release/clickhouse_hu12955312275850674690.webp 760w,
               /blog/skywalking-10-release/clickhouse_hu7506951408873536930.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/clickhouse_hu17124604017186211784.webp&#34;
               width=&#34;760&#34;
               height=&#34;408&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 9: ClickHouse æœåŠ¡å™¨ç›‘æ§
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ‰å…³ ClickHouse ç›‘æ§çš„æ›´å¤šæŒ‡æ ‡å’Œè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/setup/backend/backend-clickhouse-monitoring/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ClickHouse æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;ï¼Œä»¥åŠä¸€ç¯‡å¯ä»¥å¸®åŠ©å¿«é€Ÿå…¥é—¨çš„åšå®¢ &lt;a href=&#34;https://skywalking.apache.org/blog/2024-03-12-monitoring-clickhouse-through-skywalking/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€šè¿‡ SkyWalking ç›‘æ§ ClickHouse&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;apache-activemq-æœåŠ¡å™¨ç›‘æ§&#34;&gt;Apache ActiveMQ æœåŠ¡å™¨ç›‘æ§&lt;/h2&gt;
&lt;p&gt;Apache ActiveMQ Classic æ˜¯ä¸€ä¸ªæµè¡Œä¸”å¼ºå¤§çš„å¼€æºæ¶ˆæ¯å’Œé›†æˆæ¨¡å¼æœåŠ¡å™¨ã€‚SkyWalking ä¸º ActiveMQ æä¾›äº†ä¸€ä¸ªåŸºæœ¬çš„ç›‘æ§ä»ªè¡¨æ¿ï¼ŒåŒ…æ‹¬ä»¥ä¸‹æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cluster Metricsï¼šåŒ…æ‹¬å†…å­˜ä½¿ç”¨ç‡ã€å†™å…¥/è¯»å–é€Ÿç‡å’Œå¹³å‡/æœ€å¤§å†™å…¥æŒç»­æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;Broker Metricsï¼šåŒ…æ‹¬èŠ‚ç‚¹çŠ¶æ€ã€è¿æ¥æ•°ã€ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ•°å’Œä»£ç†ä¸‹çš„å†™å…¥/è¯»å–é€Ÿç‡ã€‚æ ¹æ®é›†ç¾¤æ¨¡å¼ï¼Œä¸€ä¸ªé›†ç¾¤å¯ä»¥åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªä»£ç†ã€‚&lt;/li&gt;
&lt;li&gt;Destination Metricsï¼šåŒ…æ‹¬ç”Ÿäº§è€…/æ¶ˆè´¹è€…æ•°ã€ä¸åŒçŠ¶æ€çš„æ¶ˆæ¯ã€é˜Ÿåˆ—å’Œé˜Ÿåˆ—/ä¸»é¢˜ä¸­çš„å…¥é˜ŸæŒç»­æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹å›¾æ˜¾ç¤ºäº† ActiveMQ Cluster Metrics ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-10-apache-activemq-æœåŠ¡å™¨ç›‘æ§&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 10: Apache ActiveMQ æœåŠ¡å™¨ç›‘æ§&#34; srcset=&#34;
               /blog/skywalking-10-release/active_mq_hu18083523541544368436.webp 400w,
               /blog/skywalking-10-release/active_mq_hu8505261505937757510.webp 760w,
               /blog/skywalking-10-release/active_mq_hu15374837709644185011.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/skywalking-10-release/active_mq_hu18083523541544368436.webp&#34;
               width=&#34;760&#34;
               height=&#34;642&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 10: Apache ActiveMQ æœåŠ¡å™¨ç›‘æ§
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æœ‰å…³ ActiveMQ ç›‘æ§çš„æ›´å¤šæŒ‡æ ‡å’Œè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/setup/backend/backend-activemq-monitoring/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Apache ActiveMQ æœåŠ¡å™¨ç›‘æ§&lt;/a&gt;ï¼Œä»¥åŠä¸€ç¯‡å¯ä»¥å¸®åŠ©å¿«é€Ÿå…¥é—¨çš„åšå®¢ &lt;a href=&#34;https://skywalking.apache.org/blog/2024-04-19-monitoring-activemq-through-skywalking/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€šè¿‡ SkyWalking ç›‘æ§ ActiveMQ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ”¯æŒå¤šæ ‡ç­¾åç§°&#34;&gt;æ”¯æŒå¤šæ ‡ç­¾åç§°&lt;/h2&gt;
&lt;p&gt;åœ¨ SkyWalking 10 ä¹‹å‰ï¼ŒSkyWalking ä¸ä¼šåœ¨æŒ‡æ ‡æ•°æ®ä¸­å­˜å‚¨æ ‡ç­¾åç§°ï¼Œè¿™ä½¿å¾— MQE å¿…é¡»ä½¿ç”¨ &lt;code&gt;_&lt;/code&gt; ä½œä¸ºé€šç”¨æ ‡ç­¾åç§°ï¼Œæ— æ³•ä½¿ç”¨å¤šä¸ªæ ‡ç­¾åç§°æŸ¥è¯¢æŒ‡æ ‡æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;SkyWalking 10 æ”¯æŒåœ¨æŒ‡æ ‡æ•°æ®ä¸­å­˜å‚¨æ ‡ç­¾åç§°ï¼ŒMQE å¯ä»¥ä½¿ç”¨å¤šä¸ªæ ‡ç­¾åç§°æŸ¥è¯¢æˆ–è®¡ç®—æŒ‡æ ‡æ•°æ®ã€‚ä¾‹å¦‚ï¼š&lt;code&gt;k8s_cluster_deployment_status&lt;/code&gt; æŒ‡æ ‡å…·æœ‰ &lt;code&gt;namespace&lt;/code&gt;ã€&lt;code&gt;deployment&lt;/code&gt; å’Œ &lt;code&gt;status&lt;/code&gt; æ ‡ç­¾ã€‚å¦‚æœæˆ‘ä»¬æƒ³æŸ¥è¯¢æ‰€æœ‰ &lt;code&gt;namespace=skywalking-showcase&lt;/code&gt; å’Œ &lt;code&gt;status=true&lt;/code&gt; çš„éƒ¨ç½²æŒ‡æ ‡å€¼ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹è¡¨è¾¾å¼ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-text&#34; data-lang=&#34;text&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;k8s_cluster_deployment_status{namespace=&amp;#39;skywalking-showcase&amp;#39;, status=&amp;#39;true&amp;#39;}
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç›¸å…³å¢å¼ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”±äºåœ¨ SkyWalking 9.6.0 ä¸­å‘Šè­¦è§„åˆ™é…ç½®å·²è¿ç§»åˆ° MQEï¼Œå› æ­¤å‘Šè­¦è§„åˆ™ä¹Ÿæ”¯æŒå¤šæ ‡ç­¾åç§°ã€‚&lt;/li&gt;
&lt;li&gt;PromeQL æœåŠ¡æ”¯æŒå¤šæ ‡ç­¾åç§°æŸ¥è¯¢ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;metrics-grpc-å¯¼å‡ºå™¨&#34;&gt;Metrics gRPC å¯¼å‡ºå™¨&lt;/h2&gt;
&lt;p&gt;SkyWalking 10 å¢å¼ºäº† &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/setup/backend/exporter/#grpc-exporter&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;metrics gPRC exporter&lt;/a&gt;ï¼Œæ”¯æŒå°†æ‰€æœ‰ç±»å‹çš„æŒ‡æ ‡æ•°æ®å¯¼å‡ºåˆ° gRPC æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;skywalking-åŸç”Ÿ-ui-æŒ‡æ ‡æŸ¥è¯¢åˆ‡æ¢åˆ°-v3-api&#34;&gt;SkyWalking åŸç”Ÿ UI æŒ‡æ ‡æŸ¥è¯¢åˆ‡æ¢åˆ° V3 API&lt;/h2&gt;
&lt;p&gt;SkyWalking åŸç”Ÿ UI æŒ‡æ ‡æŸ¥è¯¢å¼ƒç”¨ V2 APIï¼Œå…¨éƒ¨è¿ç§»åˆ° &lt;a href=&#34;https://skywalking.apache.org/docs/main/latest/en/api/query-protocol/#v3-apis&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;V3 API&lt;/a&gt; å’Œ &lt;a href=&#34;https://skywalking.apache.org/docs/main/next/en/api/metrics-query-expression/#metrics-query-expressionmqe-syntax&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;MQE&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…¶ä»–å€¼å¾—æ³¨æ„çš„å¢å¼ºåŠŸèƒ½&#34;&gt;å…¶ä»–å€¼å¾—æ³¨æ„çš„å¢å¼ºåŠŸèƒ½&lt;/h2&gt;
&lt;ol&gt;
&lt;li&gt;æ”¯æŒ Java 21 è¿è¡Œæ—¶å’Œ oap-java21 é•œåƒç”¨äº Java 21 è¿è¡Œæ—¶ã€‚&lt;/li&gt;
&lt;li&gt;ä»é•œåƒä¸­åˆ é™¤ CLIï¼ˆ&lt;code&gt;swctl&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æ”¯æŒæ›´å¤šçš„ MQE å‡½æ•°å’Œæ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;å¢å¼ºåŸç”Ÿ UI å¹¶æ”¹å–„ç”¨æˆ·ä½“éªŒã€‚&lt;/li&gt;
&lt;li&gt;ä¿®å¤äº†ä¸€äº› Bug å’Œ CVEã€‚&lt;/li&gt;
&lt;/ol&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Kyverno æ›´è½»æ¾åœ°ä¿æŠ¤æœåŠ¡ç½‘æ ¼</title>
      <link>https://cloudnativecn.com/blog/securing-services-meshes-easier-with-kyverno/</link>
      <pubDate>Fri, 08 Mar 2024 13:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/securing-services-meshes-easier-with-kyverno/</guid>
      <description>&lt;p&gt;å¦‚ä»Šåœ¨ Kubernetes ä¸­ï¼ŒæœåŠ¡ç½‘æ ¼å·²ç»å˜å¾—å¸ç©ºè§æƒ¯ï¼Œæœ‰äº›å¹³å°ç”šè‡³é»˜è®¤å°†å…¶æ„å»ºåˆ°é›†ç¾¤ä¸­ã€‚æœåŠ¡ç½‘æ ¼æ— ç–‘åœ¨å¤šç§æ–¹é¢æä¾›äº†è¯¸å¤šå¥½å¤„ï¼Œè¿™äº›å¥½å¤„ä¼—æ‰€å‘¨çŸ¥ï¼Œä½†ä¹Ÿä¼—æ‰€å‘¨çŸ¥ï¼Œå®ƒä»¬æ˜¾è‘—å¢åŠ äº†é›†ç¾¤çš„å¤æ‚æ€§ã€‚é™¤äº†å¢åŠ äº†å¤æ‚æ€§ä¹‹å¤–ï¼ŒæœåŠ¡ç½‘æ ¼åœ¨å¼ºåˆ¶æ‰§è¡Œ Pod å®‰å…¨æ€§æ–¹é¢ä¹Ÿå¸¦æ¥äº†ï¼ˆè‡­åæ˜­è‘—çš„ï¼‰é—®é¢˜ï¼Œå› ä¸ºå®ƒä»¬éœ€è¦æå‡çš„æƒé™å¯èƒ½å¯¹å…¶ä»–å‡†å…¥æ§åˆ¶å™¨é€ æˆéš¾ä»¥å¤„ç†çš„å›°æ‰°ï¼Œä¾‹å¦‚ Kubernetes è‡ªèº«çš„ Pod å®‰å…¨å‡†å…¥æ§åˆ¶å™¨ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ›´è¯¦ç»†åœ°è§£é‡Šè¿™ä¸ªé—®é¢˜ä»¥åŠåœ¨ä½¿ç”¨æœåŠ¡ç½‘æ ¼æ—¶ Kyverno å¦‚ä½•æˆä¸ºçœŸæ­£çš„æ•‘æ˜Ÿï¼ŒåŒæ—¶ä¸ºä½ é¢„è§ˆä¸€ä¸‹å³å°†åˆ°æ¥çš„ Kyverno 1.12 ç‰ˆæœ¬ä¸­çš„ä¸€äº›ä¸œè¥¿ï¼Œè¿™å°†ä½¿å®‰å…¨æœåŠ¡ç½‘æ ¼å˜å¾—è½»è€Œæ˜“ä¸¾ï¼&lt;/p&gt;
&lt;h2 id=&#34;ä»‹ç»&#34;&gt;ä»‹ç»&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼&lt;a href=&#34;https://konghq.com/learning-center/service-mesh/what-is-a-service-mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸º Kubernetes åº”ç”¨ç¨‹åºæä¾›äº†è®¸å¤šå¥½å¤„&lt;/a&gt;ï¼ŒåŒ…æ‹¬æ›´å¥½çš„è´Ÿè½½å‡è¡¡ã€åŒå‘ TLSã€å¯è§‚å¯Ÿæ€§ç­‰ã€‚å¾ˆå¯èƒ½ä½ ç°åœ¨å°±åœ¨ä½ çš„æŸä¸ªé›†ç¾¤ä¸­ä½¿ç”¨äº†æœåŠ¡ç½‘æ ¼ã€‚æœ€æµè¡Œçš„å¼€æºæœåŠ¡ç½‘æ ¼åŒ…æ‹¬ &lt;a href=&#34;https://istio.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt; å’Œ &lt;a href=&#34;https://linkerd.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linkerd&lt;/a&gt;ã€‚æ‰€æœ‰æœåŠ¡ç½‘æ ¼çš„å·¥ä½œæ–¹å¼åŸºæœ¬ç›¸åŒï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨è¿™ç¯‡åšæ–‡ä¸­æ·±å…¥æ¢è®¨ã€‚ä¸€ä¸ªæ˜¾è‘—çš„ç‚¹æ˜¯ï¼Œä¸ºäº†å°†æµé‡å®šå‘åˆ°å…¶â€œæ—è·¯â€ä»£ç†å¹¶ä»å…¶â€œæ—è·¯â€ä»£ç†ï¼Œéœ€è¦å¯¹åº•å±‚ Linux èŠ‚ç‚¹çš„ iptables è§„åˆ™è¿›è¡Œä¸€äº›è°ƒæ•´ã€‚è¿™äº›è°ƒæ•´æˆ–é…ç½®ä¿®æ”¹æ˜¯æœåŠ¡ç½‘æ ¼é‡å†™ç½‘ç»œå †æ ˆè·¯ç”±è§„åˆ™çš„ç»“æœã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œåƒ Istio å’Œ Linkerd è¿™æ ·çš„ç½‘æ ¼ä½¿ç”¨ä¸€ä¸ª &lt;a href=&#34;https://kubernetes.io/docs/concepts/workloads/pods/init-containers/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;initContainer&lt;/a&gt; åœ¨ä»»ä½•å…¶ä»–å®¹å™¨å¯åŠ¨ä¹‹å‰æ‰§è¡Œæ­¤æ“ä½œã€‚ä¸ºäº†ä½¿è¯¥ initContainer èµ·ä½œç”¨ï¼Œå®ƒéœ€è¦ä¸€äº›æƒé™ï¼Œè¿™å¾€å¾€åœ¨æ³¨é‡å®‰å…¨çš„é›†ç¾¤ä¸­æ˜¯å›°éš¾çš„ã€‚è‡³å°‘ï¼Œè¿™äº› initContainer å¿…é¡»æ·»åŠ ä¸¤ä¸ª&lt;a href=&#34;https://man7.org/linux/man-pages/man7/capabilities.7.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Linux æƒé™&lt;/a&gt;ï¼Œä»¥å…è®¸å®ƒä»¬å¯¹ç½‘ç»œå †æ ˆè¿›è¡Œä¿®æ”¹ï¼š&lt;code&gt;NET_ADMIN&lt;/code&gt; å’Œ &lt;code&gt;NET_RAW&lt;/code&gt;ã€‚è¿™äº› initContainer ç”šè‡³å¯èƒ½ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œï¼Œè¿™åœ¨å®¹å™¨ä¸–ç•Œæ˜¯ç»å¯¹ä¸å…è®¸çš„ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼ŒLinkerd 2.14 å°†åœ¨åº”è¯¥æˆä¸ºå…¶ç½‘æ ¼çš„ä»»ä½• Pod ä¸­æ³¨å…¥ç±»ä¼¼ä»¥ä¸‹çš„ initContainerï¼ˆä¸ºç®€æ´èµ·è§ï¼Œçœç•¥äº†ä¸€äº›å­—æ®µï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;initContainers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cr.l5d.io/linkerd/proxy-init:v2.2.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;linkerd-init&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;securityContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allowPrivilegeEscalation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;capabilities&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;NET_ADMIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;NET_RAW&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;privileged&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;readOnlyRootFilesystem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runAsNonRoot&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runAsUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;65534&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;seccompProfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RuntimeDefault&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;äº‹å®ä¸Šï¼Œè¿™äº›æœåŠ¡ç½‘æ ¼ initContainer éœ€è¦çš„é¢å¤–æƒé™è¢« Kubernetes å®˜æ–¹çš„ &lt;a href=&#34;https://kubernetes.io/docs/concepts/security/pod-security-standards/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pod å®‰å…¨æ ‡å‡†&lt;/a&gt; æ‰€ç¦æ­¢ã€‚è¿™ä¸ªäº‹å®æœ¬èº«å¹¶ä¸æ˜¯ä¸»è¦é—®é¢˜ï¼Œè€Œæ˜¯æ ¹æ®ä½¿ç”¨çš„ç­–ç•¥å¼•æ“ï¼Œä¸ºè¿™äº›ç‰¹æ®Šçš„ initContainer æä¾›è®¸å¯æ˜¯éå¸¸å›°éš¾ç”šè‡³æ ¹æœ¬ä¸å¯èƒ½çš„ã€‚æˆ‘ä»¬æ¯å‘¨éƒ½åœ¨ &lt;a href=&#34;https://kyverno.io/community/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kyverno ç¤¾åŒº&lt;/a&gt;å¬åˆ°ç”¨æˆ·çš„ç—›è‹¦ï¼Œä¼¼ä¹é‚£äº›æœ€ä¸¥é‡å—åˆ°å½±å“çš„ç”¨æˆ·æ˜¯é‚£äº›ä½¿ç”¨ &lt;a href=&#34;https://kubernetes.io/docs/concepts/security/pod-security-admission/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pod å®‰å…¨å‡†å…¥&lt;/a&gt; çš„äººï¼Œè¿™æ˜¯å®ç° Pod å®‰å…¨æ ‡å‡†çš„è¿›ç¨‹ä¸­çš„å‡†å…¥æ§åˆ¶å™¨ã€‚è¿™å·²ç»æˆä¸ºä¸€ä¸ªæ˜¾è‘—çš„é—®é¢˜ï¼Œä»¥è‡³äº Istio å’Œ Linkerd &lt;a href=&#34;https://istio.io/latest/docs/setup/additional-setup/cni/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;éƒ½å°è¯•è¿‡&lt;/a&gt; è§£å†³å®ƒï¼ˆæˆ–è€…æ›´å‡†ç¡®åœ°è¯´ï¼Œè§£å†³å®ƒçš„æ–¹æ³•ï¼‰ ï¼Œé€šè¿‡æä¾›å¦ä¸€ç§é€‰æ‹©ï¼šä¸€ä¸ªè‡ªå®šä¹‰çš„ CNI æ’ä»¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cni-æ’ä»¶&#34;&gt;CNI æ’ä»¶&lt;/h2&gt;
&lt;p&gt;è¿™äº› CNI æ’ä»¶é€‚ç”¨äºè®¸å¤šæƒ…å†µï¼Œä½†æ€»çš„æ¥è¯´ï¼Œå®ƒä»¬å¤§éƒ½æ˜¯ä»¥ç‰ºç‰²ä¸€ä¸ªé—®é¢˜æ¥è§£å†³å¦ä¸€ä¸ªé—®é¢˜ã€‚æ¯•ç«Ÿï¼Œiptables è§„åˆ™ä»ç„¶ &lt;strong&gt;å¿…é¡»&lt;/strong&gt; è¢«é‡å†™ï¼Œè€Œç½‘æ ¼ä¸­çš„æŸäº›ä¸œè¥¿ä»ç„¶ &lt;strong&gt;å¿…é¡»&lt;/strong&gt; è´Ÿè´£æ‰§è¡Œè¿™ä¸ªä»»åŠ¡ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼ŒCNI æ’ä»¶å®ç°äº†ä¸€ä¸ª DaemonSetï¼Œè¯¥ DaemonSet è¿è¡Œä¸€ä¸ªç‰¹æƒå®¹å™¨ï¼Œä»¥åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šæ‰§è¡Œè¿™äº›ä¿®æ”¹ï¼Œä»è€Œé¿å…äº†åœ¨æ¯ä¸ª Pod ä¸­éƒ½éœ€è¦ä¸€ä¸ª initContainer çš„éœ€æ±‚ã€‚è¿™ç¡®å®æœ‰å®ƒçš„ä¼˜ç‚¹ï¼Œä½†ä¹Ÿæœ‰ç¼ºç‚¹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;DaemonSet æ›´å…·ç‰¹æƒï¼Œå› ä¸ºå®ƒéœ€è¦ hostPath å·ï¼Œå¹¶å°†é…ç½®æ–‡ä»¶å’ŒäºŒè¿›åˆ¶æ–‡ä»¶å¤åˆ¶åˆ°æ¯ä¸ªèŠ‚ç‚¹ã€‚&lt;/li&gt;
&lt;li&gt;å®ƒéœ€è¦äº†è§£ CNI æ’ä»¶ï¼Œè¿™æ˜¯ä¸“é—¨çš„çŸ¥è¯†ã€‚&lt;/li&gt;
&lt;li&gt;å¢åŠ äº†æ›´å¤šçš„æ“ä½œå’Œè‡ªåŠ¨åŒ–å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;li&gt;ä¸å…¶ä»– CNI æ’ä»¶å¯èƒ½å‘ç”Ÿå†²çªï¼Œå› ä¸ºå®ƒä»¬å½¼æ­¤ä¸çŸ¥é“ï¼Œå¹¶ä¸”ç¡®å®šå¦‚ä½•é“¾æ¥å¤šä¸ªæ’ä»¶ä¸æ˜¯æ ‡å‡†åŒ–çš„ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ°´å¹³é›†ç¾¤ç¼©æ”¾æˆ–èŠ‚ç‚¹é‡å¯æœŸé—´å¯èƒ½ä¼šå‡ºç°æ½œåœ¨çš„ç«äº‰æ¡ä»¶ï¼Œå› ä¸º DaemonSet Pod å¯èƒ½åœ¨å·¥ä½œè´Ÿè½½ Pod ä¹‹å‰å¯åŠ¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;é—®é¢˜çš„å…³é”®&#34;&gt;é—®é¢˜çš„å…³é”®&lt;/h2&gt;
&lt;p&gt;ä½†æ˜¯ä¸ºä»€ä¹ˆè§£å†³ initContainer é—®é¢˜ä¼šæ˜¯ä¸€ä¸ªçœŸæ­£çš„é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆåœ¨äºæ’é™¤ã€‚æ’é™¤ï¼Œæˆ–è€…ä½ å¦‚ä½•å…é™¤æŸäº›èµ„æºä¸é€‚ç”¨äºç­–ç•¥ï¼Œè¿™æ˜¯åŒºåˆ†è‰¯å¥½çš„å‡†å…¥æ§åˆ¶å™¨å’Œä¼˜ç§€å‡†å…¥æ§åˆ¶å™¨çš„å…³é”®ä¹‹ä¸€ã€‚ç›®æ ‡æ˜¯åœ¨å°½å¯èƒ½ä¸å½±å“ä½ ç¡®å®éœ€è¦çš„äº‹ç‰©çš„åŒæ—¶ï¼Œæä¾›å°½å¯èƒ½å¼ºå¤§çš„ Pod å®‰å…¨å§¿æ€ã€‚ä½ å¸Œæœ›èƒ½å¤Ÿå°†â€œå¥½â€ä¸â€œåâ€åˆ†å¼€ï¼Œè€Œä½ çš„æœåŠ¡ç½‘æ ¼ç»å¯¹å±äºâ€œå¥½â€çš„èŒƒç•´ã€‚ä½†å°±åƒç­›å­ç­›æ²™å­ä¸€æ ·ï¼Œä½ å¿…é¡»å°å¿ƒè¿‡æ»¤æ‰â€œåâ€çš„éƒ¨åˆ†ï¼Œä½¿ä½ åªå‰©ä¸‹â€œå¥½â€çš„éƒ¨åˆ†ã€‚åœ¨ä¸Šè¿° initContainer ç¤ºä¾‹ä¸­ï¼Œä½ ç»å¯¹ä¸å¸Œæœ›éæœåŠ¡ç½‘æ ¼ Pod æ·»åŠ  &lt;code&gt;NET_ADMIN&lt;/code&gt; æƒé™ï¼Œå› ä¸ºé‚£æ ·ä¼šç»™äºˆå®ƒä»¬å¯¹ç½‘ç»œå †æ ˆçš„ä¸å—é™åˆ¶çš„è®¿é—®ï¼Œä»è€Œå¯èƒ½å¯¼è‡´çª¥æ¢å’Œä¼ªè£…ç­‰é—®é¢˜ã€‚å‡å°‘æ¼æ–—å¤§å°çš„é€‰é¡¹å¦‚ä¸‹ï¼Œä»å¤§åˆ°å°æ’åºã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ•´ä¸ªé›†ç¾¤ä¸­ç¦ç”¨ Pod å®‰å…¨
&lt;ul&gt;
&lt;li&gt;è¿™æ˜¾ç„¶æ˜¯ä¸€ä¸ªä¸å¯è¡Œçš„æ–¹æ¡ˆï¼Œæ‰€ä»¥ä¸éœ€è¦è¿›ä¸€æ­¥è®¨è®ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨å—å½±å“çš„ Namespace ä¸­ç¦ç”¨ Pod å®‰å…¨
&lt;ul&gt;
&lt;li&gt;å› ä¸ºæˆ‘ä»¬è°ˆè®ºçš„æ˜¯æ¯ä¸ªå¿…é¡»å‚ä¸ç½‘æ ¼çš„ Pod ä¸­éƒ½æœ‰ä¸€ä¸ª initContainerï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€ä½ å¿…é¡»åœ¨é›†ç¾¤çš„å¤§å¤šæ•° Namespace ä¸­ç¦ç”¨ Pod å®‰å…¨ï¼Œè¿™å®é™…ä¸Šå°±åƒç¬¬ä¸€ç§é€‰é¡¹ä¸€æ ·â€”â€”è¡Œä¸é€šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨åŒ…å«æ­¤æ£€æŸ¥çš„é…ç½®æ–‡ä»¶ä¸­ç¦ç”¨æ­¤é…ç½®æ–‡ä»¶ï¼ˆå¦‚æœé€‚ç”¨ï¼‰
&lt;ul&gt;
&lt;li&gt;Pod å®‰å…¨æ ‡å‡†ç»„ç»‡æˆç§°ä¸ºé…ç½®æ–‡ä»¶çš„é›†åˆï¼Œæ¯ä¸ªé…ç½®æ–‡ä»¶åŒ…å«å¤šä¸ªæ§åˆ¶ã€‚æ§åˆ¶æ˜¯å…³äº&lt;em&gt;åº”è¯¥&lt;/em&gt;æ£€æŸ¥å“ªäº›å­—æ®µä»¥åŠå…è®¸æˆ–ä¸å…è®¸å“ªäº›å€¼çš„å‘½ä»¤ã€‚ä½ å¯ä»¥æ‰¾åˆ°åŒ…å«æ­¤æ§åˆ¶çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶ç¦ç”¨æ•´ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½†è¿™æ˜¾ç„¶ä¼šç¦ç”¨åŒä¸€é…ç½®æ–‡ä»¶ä¸­çš„å…¶ä»–æ§åˆ¶ã€‚è¿™ä¹Ÿä¸æ˜¯å¾ˆå¥½ã€‚å¹¶éæ‰€æœ‰ç­–ç•¥å‡†å…¥æ§åˆ¶å™¨éƒ½æä¾›æ­¤åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨ Pod ä¸Šç¦ç”¨æ­¤æ§åˆ¶
&lt;ul&gt;
&lt;li&gt;è¯·æ±‚ &lt;code&gt;NET_ADMIN&lt;/code&gt; å’Œ &lt;code&gt;NET_RAW&lt;/code&gt; çš„è¿™äº› initContainer è¿åäº†&lt;a href=&#34;https://kubernetes.io/docs/concepts/security/pod-security-standards/#baseline&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pod å®‰å…¨æ ‡å‡†çš„åŸºçº¿é…ç½®æ–‡ä»¶ä¸­çš„â€œCapabilitiesâ€æ§åˆ¶&lt;/a&gt;ï¼Œè¿™æ˜¯ Pod å®‰å…¨çš„åŸºæœ¬é…ç½®æ–‡ä»¶ï¼ˆå—é™åˆ¶é…ç½®æ–‡ä»¶å»ºç«‹åœ¨åŸºçº¿é…ç½®æ–‡ä»¶ä¹‹ä¸Šï¼‰ã€‚ä½ å¯ä»¥ç®€å•åœ°ä¸åœ¨ä½¿ç”¨è¿™ç§ initContainer çš„ä»»ä½• Pod ä¸­æ£€æŸ¥æ­¤æ§åˆ¶ï¼Œä½†è¿™ä¹Ÿä¸å¥½ï¼Œå› ä¸ºé‚£æ ·ä¸€ä¸ªæ¶æ„å®¹å™¨ä¹Ÿå¯ä»¥æ·»åŠ  &lt;code&gt;NET_ADMIN&lt;/code&gt;ã€‚ä½ å¯èƒ½æ­£åœ¨æ‰§è¡Œæ‰€æœ‰å…¶ä»–æ§åˆ¶ï¼Œä½†æ˜¯ç®€å•åœ°å…³é—­ä¸€ä¸ªæ§åˆ¶è¿˜æ˜¯å¤ªå¤šã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªé•œåƒä¸Šç¦ç”¨æ­¤æ§åˆ¶
&lt;ul&gt;
&lt;li&gt;å¦‚æœä½ å·²ç»è¾¾åˆ°äº†è¿™ä¸ªçº§åˆ«ï¼Œé‚£ä¹ˆä½ åšå¾—å¾ˆå¥½ã€‚ä½ å¯ä»¥ç®€å•åœ°ä¸åœ¨ä¸æŸç§æ¨¡å¼åŒ¹é…çš„é•œåƒä¸Šæ£€æŸ¥è¿™äº›ç‰¹æƒèƒ½åŠ›ã€‚ä½†æˆ‘ä»¬è¿˜å¯ä»¥åšå¾—æ›´å¥½ã€‚ï¼ˆé¡ºä¾¿è¯´ä¸€å¥ï¼ŒåŸºäº initContainer çš„åç§°è¿™æ ·åšå¹¶ä¸å®Œå…¨å®‰å…¨ï¼Œå› ä¸ºä¸€äº›æ¶æ„ç”¨æˆ·å¯èƒ½åˆ›å»ºä¸€ä¸ªåä¸º &lt;code&gt;istio-init&lt;/code&gt; çš„ initContainerï¼Œè¯¥ initContainer ä½¿ç”¨äº†ä¸€ä¸ªåä¸º &lt;code&gt;ubuntu:latest&lt;/code&gt; çš„é•œåƒã€‚ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;åœ¨ä¸€ä¸ªé•œåƒä¸Šä»¥åŠåœ¨ Pod ä¸­çš„ä¸€ä¸ªä½ç½®ä¸Šç¦ç”¨æ­¤æ§åˆ¶
&lt;ul&gt;
&lt;li&gt;ç°åœ¨æˆ‘ä»¬æ¥è°ˆè°ˆã€‚æˆ‘ä»¬å¯ä»¥å°†ä¸€ä¸ªè±å…éš”ç¦»åˆ°ä»…é™äºç‰¹å®šçš„é•œåƒå’Œ Pod ä¸­çš„ç‰¹å®šä½ç½®ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ &lt;code&gt;initContainers[]&lt;/code&gt; æ•°ç»„ä¸­å‘ç° &lt;code&gt;istio/proxyv2&lt;/code&gt; é•œåƒæ—¶ï¼Œè±å… &lt;code&gt;NET_ADMIN&lt;/code&gt; å’Œ &lt;code&gt;NET_RAW&lt;/code&gt; æƒé™æ£€æŸ¥ã€‚å¦‚æœåŒä¸€é•œåƒåœ¨ä¸»è¦çš„ &lt;code&gt;containers[]&lt;/code&gt; åˆ—è¡¨ä¸­ä½¿ç”¨ï¼Œå®ƒå°†å¯¼è‡´æ•´ä¸ª Pod è¢«æ‹’ç»ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®¸å¤šäººé‡åˆ°æ­¤é—®é¢˜çš„åŸå› ä¹‹ä¸€æ˜¯ Pod å®‰å…¨å‡†å…¥ï¼ˆPSAï¼‰ã€‚ä½¿ç”¨ PSAï¼Œä½ å¯ä»¥å®ç°çš„æœ€ç²¾ç»†çš„ç²’åº¦æ˜¯ä»é¡¶éƒ¨çš„ç¬¬ä¸‰ä¸ªé¡¹ç›®ï¼šç¦ç”¨åŒ…å«æ­¤æ£€æŸ¥çš„é…ç½®æ–‡ä»¶ã€‚ç”±äºå—é™åˆ¶çš„é…ç½®æ–‡ä»¶åŒ…å«åŸºçº¿é…ç½®æ–‡ä»¶ï¼Œå› æ­¤åœ¨ Namespace ä¸Šç¦ç”¨åŸºçº¿é…ç½®æ–‡ä»¶æœ¬è´¨ä¸Šç­‰åŒäºä¸æ‰§è¡Œ Pod å®‰å…¨æ£€æŸ¥ã€‚è¿™ä¸ªé™åˆ¶æ˜¯åˆ›å»º CNI æ’ä»¶è§£å†³æ–¹æ¡ˆçš„ä¸»è¦åŸå› ã€‚å¦‚æœæœåŠ¡ç½‘æ ¼å¯ä»¥å°†å¯¹è¿™äº›æå‡æƒé™çš„éœ€æ±‚åˆ†ç¦»åˆ°åªæœ‰ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆä¸€ä¸ª DaemonSetï¼‰ä¸­ï¼Œå¹¶ä¸”è¯¥æ§åˆ¶å™¨ä»…åœ¨ä¸€ä¸ª Namespace ä¸­è¿è¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬åŸºæœ¬ä¸Šå¯ä»¥å°†è¯¥ Namespace éš”ç¦»ä¸ºä¸€ä¸ªè±å…åŒºåŸŸã€‚&lt;/p&gt;
&lt;h2 id=&#34;kyverno-ä¸­çš„ç­–ç•¥&#34;&gt;Kyverno ä¸­çš„ç­–ç•¥&lt;/h2&gt;
&lt;p&gt;åœ¨ Kyverno ä¸­ï¼Œæ‚¨æœ‰å‡ ç§é€‰é¡¹æ¥å®æ–½ Pod å®‰å…¨æ ‡å‡†ã€‚ç¬¬ä¸€ç§å’Œâ€œåŸå§‹â€çš„æ–¹æ³•æ˜¯é’ˆå¯¹ Pod å®‰å…¨æ ‡å‡†ä¸­çš„æ¯ä¸ªæ§åˆ¶ç¼–å†™ä¸€ä¸ª &lt;code&gt;validate&lt;/code&gt; è§„åˆ™ã€‚Kyverno å·²ç»æä¾›äº†å®Œæ•´çš„è¿™äº›ç­–ç•¥ï¼Œæ‰“åŒ…ä¸ºä¸€ä¸ª &lt;a href=&#34;https://github.com/kyverno/kyverno/tree/main/charts/kyverno-policies&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Helm å›¾è¡¨&lt;/a&gt;ï¼Œè¿™äº›ç­–ç•¥ä¹Ÿå¯ä»¥ä½œä¸º &lt;a href=&#34;https://kyverno.io/policies/?policytypes=Pod%20Security%20Standards%20%28Baseline%29%2BPod%20Security%20Standards%20%28Restricted%29&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å•ç‹¬çš„ç­–ç•¥&lt;/a&gt; ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒåŸºçº¿é…ç½®æ–‡ä»¶ä¸­çš„ â€œCapabilitiesâ€ æ§åˆ¶å¯ä»¥åœ¨&lt;a href=&#34;https://kyverno.io/policies/pod-security/baseline/disallow-capabilities/disallow-capabilities/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;æ‰¾åˆ°ã€‚åœ¨è¿™ç§ç­–ç•¥æ ·å¼ä¸­ï¼Œæ‚¨å¯ä»¥å°½å¯èƒ½åœ°ç»†åŒ–ã€‚ç¨å¾®çš„ç¼ºç‚¹æ˜¯ï¼Œå½“æ¶‰åŠåˆ°é¢„æ„å»ºçš„ Pod å®‰å…¨æ ‡å‡†æ—¶ï¼Œå®ƒä»¬éœ€è¦åœ¨è¿™äº›æœåŠ¡ç½‘æ ¼ initContainers ä¸Šè¿›è¡Œä¸€äº›ä¿®æ”¹ã€‚è™½ç„¶å…¶ä¸­ä¸€äº›ä¿®æ”¹ç›¸å½“æ¸©å’Œï¼Œä½†å…¶ä»–å¯èƒ½éœ€è¦æ›´æç«¯çš„ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸ºäº†å…è®¸è¿™äº›æœåŠ¡ç½‘æ ¼ initContainers è€Œè¿›è¡Œçš„ç›¸åŒ â€œCapabilitiesâ€ æ£€æŸ¥å¯èƒ½çš„æ ·å­ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±äº Kyverno åœ¨ç­–ç•¥ç¼–å†™æ–¹é¢éå¸¸çµæ´»ï¼Œå‡ ä¹æ€»ä¼šæœ‰å¤šç§ç¼–å†™ç›¸åŒå£°æ˜çš„æ–¹å¼ï¼Œæ‰€ä»¥å¦‚æœæ‚¨å·²ç»è¿™æ ·åšäº†è€Œç»“æœæœ‰æ‰€ä¸åŒï¼Œè¯·ä¸ç”¨æ‹…å¿ƒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kyverno.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;disallow-capabilities&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validationFailureAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Enforce&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;adding-capabilities-service-mesh&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kinds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;Pod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;preconditions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{ request.operation || &amp;#39;BACKGROUND&amp;#39; }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;NotEquals&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DELETE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;&amp;gt;-&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          Any capabilities added beyond the allowed list (AUDIT_WRITE, CHOWN, DAC_OVERRIDE, FOWNER,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          FSETID, KILL, MKNOD, NET_BIND_SERVICE, SETFCAP, SETGID, SETPCAP, SETUID, SYS_CHROOT)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          are disallowed. Service mesh initContainers may only add NET_ADMIN and NET_RAW to this list.     &lt;/span&gt;&lt;span class=&#34;w&#34;&gt;          
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;foreach&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;request.object.spec.initContainers[]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;preconditions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{ element.image }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AnyIn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/istio/proxyv2*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/linkerd/proxy-init*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{ element.securityContext.capabilities.add[] || `[]` }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AnyNotIn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;NET_ADMIN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;NET_RAW&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;AUDIT_WRITE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CHOWN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DAC_OVERRIDE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FOWNER&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FSETID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;KILL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;MKNOD&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;NET_BIND_SERVICE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETFCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETGID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETPCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETUID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SYS_CHROOT&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deny&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;conditions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{ element.securityContext.capabilities.add[] || `[]` }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AnyNotIn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;AUDIT_WRITE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CHOWN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DAC_OVERRIDE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FOWNER&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FSETID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;KILL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;MKNOD&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;NET_BIND_SERVICE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETFCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETGID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETPCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETUID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SYS_CHROOT&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;list&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;request.object.spec.[ephemeralContainers, containers][]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;deny&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;conditions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;all&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;{{ element.securityContext.capabilities.add[] || `[]` }}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;AnyNotIn&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;AUDIT_WRITE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;CHOWN&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;DAC_OVERRIDE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FOWNER&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;FSETID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;KILL&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;MKNOD&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;NET_BIND_SERVICE&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETFCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETGID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETPCAP&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SETUID&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;SYS_CHROOT&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¯·éšæ—¶åœ¨ &lt;a href=&#34;https://playground.kyverno.io/#/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kyverno Playground&lt;/a&gt; ä¸­è¯•ç”¨ä¸€ä¸‹ï¼Œçœ‹çœ‹æ•ˆæœã€‚é‡Œé¢åŒ…å«äº† Istio å’Œ Linkerd çš„ç¤ºä¾‹ Podï¼Œæ‰€ä»¥å°è¯•å–æ¶ˆæ³¨é‡Šå¹¶å¤åˆ¶å…ƒç´ æ¥æµ‹è¯•ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;p&gt;ç”±äº Istio çš„ initContainer éœ€è¦æ¯” Linkerd çš„æ›´å¤šæƒé™ï¼Œå› æ­¤è¿˜éœ€è¦å¯¹ä¸€äº›å…¶ä»–ç­–ç•¥è¿›è¡Œä¸€äº›è½»å¾®çš„ä¿®æ”¹ï¼Œè¿™äº›ä¿®æ”¹å¯ä»¥åœ¨&lt;a href=&#34;https://kubernetes.io/docs/concepts/security/pod-security-standards/#restricted&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å—é™é…ç½®æ–‡ä»¶&lt;/a&gt; ä¸­æ‰¾åˆ°ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ª &lt;a href=&#34;https://playground.kyverno.io/#/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kyverno Playground é“¾æ¥&lt;/a&gt;ï¼Œå±•ç¤ºäº†å¦‚ä½•ä¿®æ”¹ &lt;a href=&#34;https://kyverno.io/policies/pod-security/restricted/require-run-as-nonroot/require-run-as-nonroot/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;require-run-as-nonroot ç­–ç•¥&lt;/a&gt; æ¥è±å… &lt;code&gt;istio-init&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åƒä¸Šé¢å±•ç¤ºçš„ä¸ªåˆ« Kyverno ç­–ç•¥å…è®¸æœ€å¤§çš„çµæ´»æ€§ï¼Œä½†åœ¨ Kyverno ä¸­å®ç° Pod å®‰å…¨æ ‡å‡†è¿˜æœ‰ä¸€ç§æ›´ç®€å•çš„æ–¹å¼ã€‚å®æ–½è¿™äº›æ ‡å‡†çš„ç¬¬äºŒç§æ–¹å¼æ˜¯ä½¿ç”¨æˆ‘ä»¬ç§°ä¹‹ä¸º â€œå­è§„åˆ™â€ çš„æ–¹å¼æ¥å®ç° &lt;code&gt;validate&lt;/code&gt; æ ·å¼ç­–ç•¥ã€‚&lt;a href=&#34;https://kyverno.io/docs/writing-policies/validate/#pod-security&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨è¿™ç§æ ·å¼&lt;/a&gt; ä¸­ï¼Œ&lt;code&gt;podSecurity&lt;/code&gt; å…ƒç´ ç”¨äºç‰¹æŒ‡è¿™äº› Pod å®‰å…¨æ ‡å‡†ã€‚åœ¨å¹•åï¼ŒKyverno ä½¿ç”¨ä¸ Kubernetes çš„ Pod å®‰å…¨ Admission å®Œå…¨ç›¸åŒçš„åº“ï¼Œä½†ä½¿ç”¨ä¸åŒçš„ â€œåŒ…è£…å™¨â€ ä½¿å…¶åº”ç”¨æ›´åŠ çµæ´»ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œä½¿ç”¨è¿™ç§ç±»å‹çš„å­è§„åˆ™å°†å…è®¸æ‚¨è½»æ¾å®æ–½ Pod å®‰å…¨æ ‡å‡†çš„æ•´ä¸ªåŸºçº¿é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨å…¶ä¸­æ’é™¤è¿™äº›æœåŠ¡ç½‘æ ¼å›¾åƒï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kyverno.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pod-security-standards&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validationFailureAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Enforce&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline-service-mesh&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kinds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;Pod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;podSecurity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;## å¼ºåˆ¶æ‰§è¡ŒåŸºçº¿é…ç½®æ–‡ä»¶&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;latest &lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;## å¼ºåˆ¶æ‰§è¡Œæ­¤é…ç½®æ–‡ä»¶çš„æœ€æ–°ç‰ˆæœ¬&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;##&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;æ’é™¤ç‰¹å®šæ§åˆ¶ï¼Œå¯é€‰ç‰¹å®šå›¾åƒ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;controlName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Capabilities&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;images&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/istio/proxyv2*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/linkerd/proxy-init*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„ &lt;code&gt;exclude[]&lt;/code&gt; å—å‘½åäº†æˆ‘ä»¬åˆ°ç›®å‰ä¸ºæ­¢ä¸€ç›´åœ¨è®¨è®ºçš„ â€œCapabilitiesâ€ æ§åˆ¶ï¼Œ&lt;code&gt;images[]&lt;/code&gt; å­—æ®µå‘½åäº†åº”è¯¥è¢«æ’é™¤çš„ä¸¤ä¸ªç‰¹å®šçš„æœåŠ¡ç½‘æ ¼å›¾åƒã€‚é€šè¿‡è¿™ç§èƒ½åŠ›ï¼Œæ‚¨å¯ä»¥è·å¾—ç±»ä¼¼ PSA çš„è¡Œä¸ºï¼Œä½†æ˜¯å…·æœ‰ç®€å•ä¸å¯èƒ½å®ç°çš„ç»†ç²’åº¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ä¸ªé€‰é¡¹ä¸ºæ‚¨æä¾›äº†ä¸°å¯Œçš„é€‰æ‹©ï¼Œä½†å®ƒä»¬éƒ½æ¶‰åŠç›´æ¥ä¿®æ”¹ç­–ç•¥ã€‚è¿˜æœ‰å¦ä¸€ç§é€‰æ‹©ï¼Œå…è®¸å°†å¼‚å¸¸ä¸ç­–ç•¥æœ¬èº«åˆ†ç¦»ï¼Œè¿™å°±æ˜¯ &lt;a href=&#34;https://kyverno.io/docs/writing-policies/exceptions/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç­–ç•¥å¼‚å¸¸&lt;/a&gt;ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ç¼–å†™ä¸€ä¸ªç­–ç•¥å¼‚å¸¸èµ„æºï¼Œè±å…ç»™å®š Pod åœ¨ç‰¹å®šç­–ç•¥ä¸­çš„ç‰¹å®šè§„åˆ™ã€‚è¿™å¯¹äºå¼€å‘äººå‘˜è‡ªåŠ©æœåŠ¡ç‰¹åˆ«æœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸å…¶ä»–ç”¨æˆ·è¯·æ±‚å¼‚å¸¸ï¼Œè€Œæ— éœ€æŸ¥çœ‹ Kyverno ç­–ç•¥ã€‚ä½†æ˜¯ï¼Œåœ¨ 1.11 ä¸­ï¼Œè¿™åœ¨æŸäº›æƒ…å†µä¸‹è¿˜ä¸å¤Ÿç»†ç²’åº¦ï¼Œå› æ­¤åœ¨ Kyverno 1.12 ä¸­è¿›è¡Œäº†ä¸€äº›å¾ˆå¥½çš„å‡çº§ã€‚æ¥ä¸‹æ¥å°†æ›´å¤šä»‹ç»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;112-ä¸­çš„å¢å¼ºåŠŸèƒ½&#34;&gt;1.12 ä¸­çš„å¢å¼ºåŠŸèƒ½&lt;/h2&gt;
&lt;p&gt;åœ¨å³å°†æ¨å‡ºçš„ Kyverno 1.12 ä¸­ï¼Œæˆ‘ä»¬æ­£åœ¨è¿›è¡Œä¸€äº›ä»¤äººå…´å¥‹çš„å¢å¼ºï¼Œè¿™äº›å¢å¼ºå°†ä½¿é’ˆå¯¹è¯¸å¦‚æœåŠ¡ç½‘æ ¼å®¹å™¨ç­‰ç”¨ä¾‹çš„æ’é™¤å˜å¾—æ›´åŠ å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;1.12 ä¸­çš„ç¬¬ä¸€ä¸ªå¢å¼ºåŠŸèƒ½æ˜¯é€šè¿‡åˆ—å‡ºç‰¹å®šå­—æ®µåŠå…¶å€¼æ¥è¿›ä¸€æ­¥åˆ†ç±» podSecurity å­è§„åˆ™çš„æ’é™¤ã€‚è¿™ä½¿æ‚¨æ—¢å¯ä»¥ä½¿ç”¨ç®€å•çš„ç­–ç•¥è¯­è¨€ï¼Œåˆå¯ä»¥è¾¾åˆ°æœ€ä½çº§åˆ«çš„ç»†ç²’åº¦ã€‚ä¾‹å¦‚ï¼Œè¿™æ˜¯æ‚¨å°†èƒ½å¤Ÿå¼ºåˆ¶æ‰§è¡Œ Pod å®‰å…¨æ ‡å‡†çš„æ•´ä¸ªåŸºçº¿é…ç½®æ–‡ä»¶ï¼Œä½†ä»…ä»ç‰¹å®šçš„ initContainers åˆ—è¡¨ä¸­æ’é™¤ Istio å’Œ Linkerd å›¾åƒçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;### å³å°†æ¨å‡ºçš„ Kyverno 1.12 ###&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kyverno.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterPolicy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pod-security-standards&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;background&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validationFailureAction&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Enforce&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline-service-mesh&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kinds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;Pod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;validate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;podSecurity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;level&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;baseline&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;latest&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exclude&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;controlName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Capabilities&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;images&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/istio/proxyv2*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/linkerd/proxy-init*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;restrictedField&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;spec.initContainers[*].securityContext.capabilities.add&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;NET_ADMIN&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;NET_RAW&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç¬¬äºŒä¸ªå¢å¼ºåŠŸèƒ½æ˜¯å¯¹ç­–ç•¥å¼‚å¸¸çš„å¢å¼ºï¼Œä½¿å…¶å…·æœ‰ podSecurity æ„è¯†æ€§ï¼Œå³æ‚¨å°†èƒ½å¤Ÿåœ¨ PolicyException èµ„æºä¸­è±å…ç­–ç•¥å¼‚å¸¸çš„ç‰¹å®šæ§åˆ¶åç§°ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯æ‚¨å°†èƒ½å¤Ÿåœ¨ Kyverno 1.12 ä¸­ä¸ºå…ˆå‰çš„ &lt;code&gt;validate.podSecurity&lt;/code&gt; å­è§„åˆ™åˆ›å»ºçš„ PolicyExceptionï¼Œä½¿æ‚¨å¯ä»¥å°†è¿™äº›æ’é™¤ä¸åªåœ¨ &lt;code&gt;staging&lt;/code&gt; å‘½åç©ºé—´ä¸­åˆ›å»ºçš„ Pod åˆ†ç¦»å¼€æ¥ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;### å³å°†æ¨å‡ºçš„ Kyverno 1.12 ###&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kyverno.io/v2beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PolicyException&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pod-security-exception&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kyverno&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exceptions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;policyName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;pod-security-standards&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ruleNames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;baseline-service-mesh&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;staging&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;podSecurity&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;controlName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Capabilities&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;images&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/istio/proxyv2*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*/linkerd/proxy-init*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åœ¨æœªæ¥è¿›ä¸€æ­¥å¢å¼ºï¼Œé€‚ç”¨äºç‰¹å®šå®¹å™¨ã€‚æŸ¥çœ‹å¹¶å…³æ³¨ &lt;a href=&#34;https://github.com/kyverno/kyverno/issues/8570&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„çš„é—®é¢˜&lt;/a&gt; è·å–è¯¦æƒ…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è¯­&#34;&gt;ç»“è¯­&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†ä¸€äº›æœ‰å…³æœåŠ¡ç½‘æ ¼çš„å†…å®¹ï¼Œä»¥åŠä¸ºä»€ä¹ˆä½¿ç”¨ initContainers ä»¥åŠå®ƒä»¬å¸¦æ¥çš„å®‰å…¨é—®é¢˜ã€‚æˆ‘ä»¬ä»‹ç»äº† Kyverno å¦‚ä½•ä»¥æœ€ç²¾ç»†çš„æ–¹å¼è§£å†³è¿™äº›é—®é¢˜ï¼ŒåŒæ—¶æä¾›äº†ä¸‹ä¸€ä¸ªç‰ˆæœ¬çš„ä¸€ç¥ï¼Œä»¥åŠå¦‚ä½•ä½¿æ­¤è¿‡ç¨‹æ›´åŠ ç®€å•ã€‚å¦‚æœæ‚¨æœ‰ä»»ä½•å…¶ä»–é—®é¢˜æˆ–åé¦ˆï¼Œè¯·ä¸ Kyverno é¡¹ç›® &lt;a href=&#34;https://kyverno.io/community/#get-in-touch&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è”ç³»&lt;/a&gt;ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>è§£å¯† Kubernetes ç½‘ç»œï¼šè·Ÿéšæ•°æ®åŒ…çš„å¥‡å¦™æ—…ç¨‹</title>
      <link>https://cloudnativecn.com/blog/kubernetes-networking-by-using-cilium-beginner-level/</link>
      <pubDate>Fri, 08 Mar 2024 12:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/kubernetes-networking-by-using-cilium-beginner-level/</guid>
      <description>&lt;p&gt;æœ€è¿‘å¯¹äºç†è§£ Kubernetes ä¸­çš„ç½‘ç»œæœ‰å¾ˆå¤§çš„å…´è¶£ã€‚æœ¬æ–‡æ˜¯æˆ‘å¯¹è¿™ä¸ªè¯é¢˜çš„è´¡çŒ®ã€‚æˆ‘ä¼šå°½åŠ›ç”¨ç›´è§‚çš„æ–¹å¼è§£é‡Šï¼Œå¹¶å°†æŠ€æœ¯éƒ¨åˆ†ç¿»è¯‘æˆæ˜“æ‡‚çš„è¯­è¨€ï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½èƒ½ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„å­¦ä¹ ç½‘ç»œçš„æ–¹å¼æ˜¯é€šè¿‡â€œè¿½è¸ªæ•°æ®åŒ…â€æˆ–â€œæ•°æ®åŒ…çš„ç”Ÿå‘½å‘¨æœŸâ€ã€‚åŸºæœ¬ä¸Šï¼Œä½ è¦è·Ÿéšæ•°æ®åŒ…ä»å‘é€è€…åˆ°æ¥æ”¶è€…çš„æ—…ç¨‹ï¼Œå¹¶åœ¨æ¯ä¸€æ­¥åœä¸‹æ¥ã€‚æˆ‘ä»¥å‰å°±ç”¨ &lt;a href=&#34;https://www.dbi-services.com/blog/exploration-of-calico-in-minikube/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Calico å®ç°çš„ Pod åˆ°å¦ä¸€ä¸ª Pod çš„é€šä¿¡&lt;/a&gt; è¿›è¡Œäº†è¿™æ ·çš„æ“ä½œã€‚è¿™æ¬¡æˆ‘å°†ä½¿ç”¨å¦ä¸€ä¸ªå®¹å™¨ç½‘ç»œæ¥å£ (CNI) å«åš &lt;a href=&#34;https://cilium.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium&lt;/a&gt;ï¼Œå®ƒåŸºäº eBPFï¼ˆäº†è§£å¿«é€Ÿå’Œçµæ´»çš„è·¯ç”±ï¼‰ï¼Œå¹¶å¸¦æœ‰è®¸å¤šå¼ºå¤§çš„åŠŸèƒ½å’Œå·¥å…·ã€‚è®©æˆ‘ä»¬å¼€å§‹å§ï¼&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-ä¸­çš„ä¼ ç»Ÿç½‘ç»œ&#34;&gt;Kubernetes ä¸­çš„ä¼ ç»Ÿç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä»å¤´å¼€å§‹ã€‚æˆ‘ä¼šå‡è®¾ä½ å¯¹ç½‘ç»œä¸€æ— æ‰€çŸ¥ã€‚ä¹Ÿè®¸ä½ å·²ç»çŸ¥é“ IP åœ°å€æ˜¯ä»€ä¹ˆï¼ŸIP åœ°å€æ˜¯è®¡ç®—æœºç½‘ç»œæ¥å£çš„æ•°å­—åœ°å€ã€‚è¿™å°±æ˜¯ä½ çš„è®¡ç®—æœºå¯ä»¥è¿æ¥åˆ°ä½ çš„ Wi-Fi ç½‘ç»œå¹¶è®©ä½ è®¿é—®äº’è”ç½‘çš„æ–¹å¼ã€‚å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ç¬”è®°æœ¬ç”µè„‘ï¼Œä½ çš„ Wi-Fi ç½‘ç»œæ¥å£æœ‰ä¸€ä¸ª IP åœ°å€ã€‚è¿™ä¸ªç½‘ç»œæ¥å£è¿˜æœ‰å¦ä¸€ä¸ªç”±ç¡¬ä»¶æä¾›å•†çƒ§å½•çš„å”¯ä¸€åœ°å€ã€‚è¿™ä¸ªåœ°å€ç§°ä¸ºä»‹è´¨è®¿é—®æ§åˆ¶ (MAC) åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;IP åœ°å€å±äºä¸€ä¸ªç»„ï¼ˆIP å­ç½‘ï¼‰ã€‚ä¸ºäº†çŸ¥é“å®ƒå±äºå“ªä¸ªç»„ï¼Œå®ƒä½¿ç”¨ä¸€ç§ç§°ä¸ºå­ç½‘æ©ç çš„ä¸œè¥¿ã€‚å½“å­ç½‘æ©ç åº”ç”¨åˆ° IP åœ°å€æ—¶ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªç»“æœï¼Œå¯¹äºå±äºåŒä¸€ç»„çš„æ¯ä¸ª IP åœ°å€æ¥è¯´ï¼Œè¿™ä¸ªç»“æœéƒ½æ˜¯ç›¸åŒçš„ã€‚è¿™å°±åƒä½ æ‰€åœ¨çš„ç¤¾åŒºä¸€æ ·ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç”¨ä¸‹é¢çš„å›¾æ¥åšç±»æ¯”ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä¼ ç»Ÿç½‘ç»œ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä¼ ç»Ÿç½‘ç»œ&#34; srcset=&#34;
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f1_hu6861543970302074284.webp 400w,
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f1_hu1390651422904168173.webp 760w,
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f1_hu8198011195257205095.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/kubernetes-networking-by-using-cilium-beginner-level/f1_hu6861543970302074284.webp&#34;
               width=&#34;760&#34;
               height=&#34;362&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä¼ ç»Ÿç½‘ç»œ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ¿å­æ˜¯ä¸€å°è®¡ç®—æœºã€æœåŠ¡å™¨æˆ–è™šæ‹Ÿæœºã€‚å®ƒçš„å¤§å°å¯ä»¥ä¸åŒï¼Œæ ¹æ®å®ƒçš„ CPU å’Œå†…å­˜ï¼Œä½†ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ä½¿ç”¨ç›¸åŒçš„å¤§å°ã€‚ä¸€æ ‹æˆ¿å­æœ‰ä¸€æ‰‡é—¨ï¼Œè¿™å°±æ˜¯ä½ çš„ç½‘ç»œæ¥å£ã€‚é—¨ä¸Šçš„åºåˆ—å·æ˜¯ä½ çš„ MAC åœ°å€ï¼Œæˆ¿å­ä¸Šçš„æ•°å­—ï¼ˆé€šå¸¸æ˜¯é’‰åœ¨é—¨ä¸Šçš„ï¼‰æ˜¯ä½ çš„ IP åœ°å€ã€‚åªæœ‰åœ¨ä½ æ¢é—¨æ—¶ï¼Œä½ çš„åºåˆ—å·æ‰ä¼šæ”¹å˜ã€‚ç„¶è€Œï¼Œä½ çš„æˆ¿å­å·ç æ˜¯ç”±ä½ çš„ç¤¾åŒºçš„å»ºç­‘å¸ˆåˆ†é…çš„ï¼Œå¦‚æœæœ‰é‡æ–°åˆ†é…æˆ–è®¾è®¡æ›´æ”¹ï¼Œå®ƒå¯èƒ½ä¼šæ”¹å˜ã€‚&lt;/p&gt;
&lt;p&gt;è“è‰²çš„ç¬¬ 10 ä¸ªç¤¾åŒºï¼ˆä½¿ç”¨ä» 10 åˆ° 19 çš„æ•°å­—ï¼‰å±äºåŒä¸€ç»„ï¼ˆåŒä¸€ IP å­ç½‘ï¼‰ï¼Œè€Œç»¿è‰²çš„ç¬¬ 20 ä¸ªç¤¾åŒºæ˜¯å¦ä¸€ç»„ã€‚åœ¨æ¯ä¸ªç¤¾åŒºä¸­ï¼Œæœ‰äº”æ ‹æˆ¿å­ï¼Œæ‰€ä»¥æœ‰ç©ºé—´è®©ç¤¾åŒºæˆé•¿ã€‚åœ¨æ¯ä¸ªç¤¾åŒºé‡Œï¼Œé—¨ç›´æ¥è¿æ¥åˆ°ä¸€ä¸ªå–·æ³‰ï¼Œä»£è¡¨ä¸€ä¸ªäº¤æ¢æœºã€‚åœ¨å–·æ³‰å¤„ï¼Œæœ‰ä¸€ä¸ªæŒ‡ç¤ºæ¯æ¡è·¯å¾„çš„æ ‡å¿—ï¼ŒæŒ‡ç¤ºä½ å¯ä»¥åˆ°è¾¾å“ªæ‰‡é—¨ã€‚æ˜¯çš„ï¼Œå–·æ³‰ä¸çŸ¥é“æˆ¿å­å·ç ï¼ŒåªçŸ¥é“é—¨çš„åºåˆ—å·ã€‚å¯¹äºäººç±»æ¥è¯´ï¼Œè¿™ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ä¸€å¼ åœ°å›¾ï¼ˆç§°ä¸º ARP è¡¨ï¼‰ï¼Œå®ƒæä¾›äº†æˆ¿å­å·ç ä¸é—¨çš„åºåˆ—å·ä¹‹é—´çš„è½¬æ¢ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ ä½åœ¨ 14 å·æˆ¿å­ï¼Œæƒ³æ‹œè®¿ 15 å·æˆ¿å­ï¼Œä½ ä¼šä½¿ç”¨è¿™æ¡è·¯ï¼ˆåªæœ‰ä¸€æ¡ï¼Œè€Œä¸”æ˜¯ä½ çš„ï¼Œæ‰€ä»¥ä¸ä¼šæœ‰äº¤é€šå µå¡ï¼ï¼‰å…ˆåˆ°è¾¾å–·æ³‰ï¼Œç„¶åçœ‹çœ‹æ ‡å¿—ã€‚ä½ ä»åœ°å›¾ä¸ŠçŸ¥é“å“ªä¸ªåºåˆ—å·å¯¹åº”å“ªä¸ªæˆ¿å­ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ²¿ç€é€šå¾€ 15 å·æˆ¿å­çš„è·¯çº¿å‰å¾€ã€‚åœ¨è¿™ç§æ˜Ÿå½¢æ‹“æ‰‘ä¸­ï¼Œä½ æ€»æ˜¯å…ˆå»å–·æ³‰ï¼Œè€Œä¸æ˜¯ç›´æ¥å»ä½ æƒ³è¦æ‹œè®¿çš„æˆ¿å­ï¼Œå› ä¸ºæ²¡æœ‰ç›´æ¥çš„è·¯å¾„ã€‚ç¤¾åŒºå†…çš„è·¯å¾„ä»£è¡¨äº†ç¬¬ 2 å±‚é“¾æ¥ã€‚ä½ æ— æ³•é€šè¿‡è¿™äº›è·¯å¾„åˆ°è¾¾å¦ä¸€ä¸ªç¤¾åŒºã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨ç¤¾åŒºä¹‹é—´æ—…è¡Œ&#34;&gt;åœ¨ç¤¾åŒºä¹‹é—´æ—…è¡Œ&lt;/h3&gt;
&lt;p&gt;ç°åœ¨ï¼Œå¦‚æœä»ä½ çš„ 14 å·æˆ¿å­ï¼Œä½ æƒ³è¦å»æ‹œè®¿ 24 å·æˆ¿å­æ€ä¹ˆåŠï¼Ÿè¿™æ˜¯å¦ä¸€ä¸ªç¤¾åŒºï¼Œè¿™æ„å‘³ç€ 14 å·çš„ IP åœ°å€/å­ç½‘æ©ç ä¸ 24 å·ä¸åŒã€‚å®é™…ä¸Šï¼Œç¬¬ 10 å’Œç¬¬ 20 ç¤¾åŒºæ˜¯ä¸åŒçš„ã€‚æ‰€ä»¥ä½ çŸ¥é“ç›®çš„åœ°æ˜¯å¦ä¸€ä¸ªç¤¾åŒºï¼Œè¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»é¦–å…ˆå»æ‰¾ä½ çš„é—¨å«ï¼ˆä½†æ€»æ˜¯é€šè¿‡å–·æ³‰ï¼Œæ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼‰ã€‚ä»–æ˜¯ä½ ç¤¾åŒºçš„é»˜è®¤ç½‘å…³ï¼Œä»–ä½åœ¨ 11 å·æˆ¿å­ã€‚è§„åˆ™æ˜¯å»æ‰¾ä»–ï¼Œå¯¹äºä»»ä½•ç›®çš„åœ°åœ¨ä½ ç¤¾åŒºä¹‹å¤–çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;åªæœ‰ä»–æœ‰åœ°å›¾ï¼ˆè·¯ç”±è¡¨ï¼‰èƒ½å¤Ÿåˆ°è¾¾ç¬¬ 20 å·ç¤¾åŒºï¼Œå¹¶ä¸”çŸ¥é“åº”è¯¥èµ°å“ªæ¡è·¯ï¼ˆè¿™è¢«ç§°ä¸ºç¬¬ 3 å±‚è·¯ç”±ï¼Œå› ä¸ºä½ æ­£åœ¨ç¦»å¼€ä½ çš„ç¤¾åŒºï¼‰ã€‚è¿™å¼ åœ°å›¾æ˜¾ç¤ºäº†åˆ°è¾¾ 20 å·ç¤¾åŒºçš„æ­£ç¡®é—¨ã€‚ç­‰ä¸€ä¸‹ï¼Œå¦‚æœä¸€æ‰‡é—¨æ˜¯ä¸€ä¸ªç½‘ç»œæ¥å£ï¼Œé‚£ä¹ˆé—¨å«æˆ¿å­æ˜¯ä¸æ˜¯è¿˜æœ‰å¦ä¸€æ‰‡é—¨ï¼Ÿå®Œå…¨æ­£ç¡®ï¼11 å·æˆ¿å­æœ‰å¦ä¸€æ‰‡é—¨ï¼Œé—¨ä¸Šæœ‰å¦ä¸€ä¸ªå·ç ï¼ˆ101ï¼‰ï¼Œå½“ç„¶è¿™æ‰‡é—¨ä¸Šæœ‰å¦ä¸€ä¸ªåºåˆ—å·ï¼ˆMAC åœ°å€ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;é€šè¿‡è¿™æ‰‡é—¨å‡ºå»ï¼Œä½ ç°åœ¨å¯ä»¥æ²¿ç€è·¯å¾„åˆ°è¾¾ç¬¬ 20 å·ç¤¾åŒºï¼Œè¿™ä¸ªç¤¾åŒºæœ‰è‡ªå·±çš„é—¨å«åœ¨ 21 å·æˆ¿å­ã€‚è¿™ä¸ªé—¨å«çš„åœ°å›¾ï¼ˆè·¯ç”±è¡¨ï¼‰æŒ‡å¯¼ä½ åˆ°è¾¾ç›®çš„åœ°çš„æ­£ç¡®é—¨ã€‚è¿™æ‰‡é—¨è®©ä½ è¿›å…¥äº†ç¬¬ 20 å·ç¤¾åŒºï¼Œå› ä¸ºä½ çš„ç›®çš„åœ° 24 å±äºå®ƒã€‚é—¨å«è¿˜ç»™äº†ä½ åœ°å›¾ï¼ˆARP è¡¨ï¼‰ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨å–·æ³‰ä¸Šæ‰¾åˆ°æ–¹å‘ã€‚ç°åœ¨ï¼Œä½ å¯ä»¥æ²¿ç€é€šå¾€ç»¿è‰²å–·æ³‰çš„è·¯å¾„èµ°äº†ã€‚ä»é‚£é‡Œï¼Œä½ åªéœ€è·Ÿç€æ ‡å¿—å’Œè·¯å¾„åˆ°è¾¾ 24 å·æˆ¿å­ã€‚å½“ä½ æƒ³å›å®¶æ—¶ï¼Œä½ æ²¿ç€ç›¸åçš„æ–¹å‘èµ°åŒæ ·çš„è·¯å¾„å›å»ã€‚&lt;/p&gt;
&lt;h2 id=&#34;kubernetes-ä¸­çš„ç½‘ç»œ&#34;&gt;Kubernetes ä¸­çš„ç½‘ç»œ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä½ äº†è§£äº†ç½‘ç»œçš„åŸºç¡€çŸ¥è¯†ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹åœ¨ Kubernetes ä¸­å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚æ˜¯çš„ï¼Œå®ƒç¨å¾®å¤æ‚ä¸€äº›ï¼Œä½†è®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œä½¿ç”¨ä¸‹é¢çš„å›¾ç‰‡æ¥æ›´å¥½åœ°ç†è§£ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä½¿ç”¨-cilium-çš„-kubernetes-ç½‘ç»œ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä½¿ç”¨ Cilium çš„ Kubernetes ç½‘ç»œ&#34; srcset=&#34;
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f2_hu11103571505158891617.webp 400w,
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f2_hu9661544583486170647.webp 760w,
               /blog/kubernetes-networking-by-using-cilium-beginner-level/f2_hu4729721895056552182.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/kubernetes-networking-by-using-cilium-beginner-level/f2_hu11103571505158891617.webp&#34;
               width=&#34;760&#34;
               height=&#34;435&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä½¿ç”¨ Cilium çš„ Kubernetes ç½‘ç»œ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç°åœ¨æ²¡æœ‰æˆ¿å­ï¼Œè€Œæ˜¯å»ºç­‘ã€‚å»ºç­‘ä¹‹é—´çš„ç½‘ç»œä¸ä¼ ç»Ÿç½‘ç»œä»ç„¶ç›¸åŒï¼Œä¸­é—´æœ‰ä¸€ä¸ªäº¤æ¢æœº/å–·æ³‰ã€‚å»ºç­‘çš„å…¥å£æœ‰ä¸€æ‰‡é—¨ï¼Œä¸Šé¢æœ‰å»ºç­‘çš„å·ç ï¼ˆå®ƒçš„ IP åœ°å€ï¼‰ï¼Œå®ƒæ˜¯ 1000 ä¸ªç¤¾åŒºçš„ä¸€ä»½å­ã€‚ä¸€ä¸ªå»ºç­‘å°†ä»£è¡¨æˆ‘ä»¬ Kubernetes é›†ç¾¤çš„ä¸€ä¸ªèŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;ä½ çŸ¥é“ Kubernetes æ˜¯ä¸€ä¸ªå®¹å™¨ç¼–æ’å™¨ã€‚ä¸€ä¸ªå®¹å™¨åŒ…è£…æˆä¸€ä¸ª podã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œè®©æˆ‘ä»¬å‡è®¾ä¸€ä¸ª pod åªæœ‰ä¸€ä¸ªå®¹å™¨ï¼Œå› æ­¤è¿™ä¸¤ä¸ªæœ¯è¯­åœ¨è¿™é‡Œæ˜¯ç­‰ä»·çš„ã€‚è¿™ä¸ª pod å°±åƒæˆ‘ä»¬å»ºç­‘ä¸­çš„ä¸€ä¸ªç§äººéƒ¨åˆ†ã€‚å…¬å¯“çš„å¤§å°å¯ä»¥ä¸åŒï¼Œå› ä¸ºå®ƒå¯èƒ½æœ‰ 2ã€3 æˆ– 4 ä¸ªå§å®¤ï¼Œè¿™å°†æ˜¯ä½ çš„å®¹å™¨åœ¨èŠ‚ç‚¹ä¸Šéœ€è¦çš„ CPU å’Œå†…å­˜å®¹é‡ã€‚æœ‰äº›å…¬å¯“æ˜¯ç©ºçš„ï¼Œæ‰€ä»¥å»ºç­‘ä»ç„¶æœ‰ä¸€äº›å®¹é‡ã€‚ç„¶è€Œï¼Œåœ¨ Kubernetes ä¸­ï¼Œpod æ˜¯æ ¹æ®éœ€è¦åˆ›å»ºå’Œåˆ é™¤çš„ã€‚æ‰€ä»¥åœ¨æˆ‘ä»¬çš„å»ºç­‘ä¸­ï¼Œè¿™æ„å‘³ç€æœ‰æ—¶ä¼šåˆ›å»ºä¸€ä¸ª 2 å§å®¤çš„å…¬å¯“ï¼Œå½“ä¸å†ä½¿ç”¨æ—¶ï¼Œå®ƒå¯èƒ½ä¼šè¢«ä»å»ºç­‘ç‰©ä¸­ç§»é™¤ã€‚ç„¶åï¼Œå¦‚æœå»ºç­‘æœ‰è¶³å¤Ÿçš„ç©ºé—´ï¼Œå¯èƒ½ä¼šåˆ›å»ºä¸€ä¸ª 5 å§å®¤çš„å…¬å¯“ã€‚ç„¶åæƒ³è±¡ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€åº§ä¹é«˜å»ºç­‘ï¼Œé‡Œé¢ä½ å¯ä»¥æ ¹æ®éœ€è¦å»ºé€ å’Œæ‹†é™¤ä¸åŒå¤§å°çš„å…¬å¯“ï¼è¿™ä¸æ˜¯å¾ˆæ£’å—ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨æ¯ä¸ªå»ºç­‘ç‰©ä¸­ï¼Œå®¹å™¨/pod æœ‰è‡ªå·±çš„ç¤¾åŒºï¼ˆIP å­ç½‘ï¼‰ã€‚åœ¨ Kubernetes ä¸­ï¼ŒCNI çš„åŠŸèƒ½åŸºæœ¬ä¸Šæ˜¯ä¸º pod åˆ†é…å·ç ï¼ˆIP åœ°å€ï¼‰ï¼Œä»¥ä¾¿å®ƒä»¬å¯ä»¥å½¼æ­¤é€šä¿¡ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒCilium ä¸ºæ¯ä¸ªå»ºç­‘ä½¿ç”¨ä¸åŒçš„ç¤¾åŒºã€‚å½“åˆ›å»ºä¸€ä¸ªå…¬å¯“æ—¶ï¼ŒCilium ä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªå·ç ã€‚å½“åˆ é™¤å¹¶é‡æ–°åˆ›å»ºä¸€ä¸ªå…¬å¯“æ—¶ï¼Œå®ƒå°†è·å¾—å¦ä¸€ä¸ªå·ç ï¼Œå› æ­¤å®ƒæ˜¯ä¸´æ—¶çš„ã€‚è¿™é‡Œè“è‰²çš„ç¤¾åŒºä½¿ç”¨ 10 å·èŒƒå›´ï¼Œç»¿è‰²çš„ç¤¾åŒºä½¿ç”¨ 20 å·ã€‚ä½ å¯ä»¥æ³¨æ„åˆ°è“è‰²å’Œç»¿è‰²ç¤¾åŒºçš„æ•°å­—èŒƒå›´ä¸å»ºç­‘ç‰©çš„èŒƒå›´ä¸åŒã€‚åªæ˜¯ä¸ºäº†è®©ä½ çŸ¥é“ï¼Œè¿™ç§è®¾è®¡è¢«ç§°ä¸ºå åŠ ç½‘ç»œã€‚è¿˜æœ‰å…¶ä»–å¯èƒ½çš„ï¼Œä½†è¿™æ˜¯å¸¸ç”¨çš„ä¸€ç§ã€‚è¿™æ˜¯ä¸€ä¸ªåœ¨èŠ‚ç‚¹ç½‘ç»œä¹‹ä¸Šçš„ pod ç½‘ç»œã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨åŒä¸€å»ºç­‘ä¸­çš„å…¬å¯“ä¹‹é—´æ—…è¡Œ&#34;&gt;åœ¨åŒä¸€å»ºç­‘ä¸­çš„å…¬å¯“ä¹‹é—´æ—…è¡Œ&lt;/h3&gt;
&lt;p&gt;ç°åœ¨ï¼Œä½ ä½åœ¨ 12 å·å…¬å¯“ï¼Œä½ è¦æ€ä¹ˆå»æ‹œè®¿ 14 å·å…¬å¯“ï¼Ÿå°±åƒæˆ‘ä»¬åœ¨ä¼ ç»Ÿç½‘ç»œç¤ºä¾‹ä¸­æ‰€åšçš„é‚£æ ·ï¼Œä½ æ˜¯æˆ‘ä»¬è¦è¿½è¸ªçš„æ•°æ®åŒ…ï¼å½“ç„¶ï¼Œä½ é€šè¿‡å®ƒçš„é—¨ï¼ˆå®ƒçš„ç½‘ç»œæ¥å£ï¼‰ç¦»å¼€å…¬å¯“ã€‚ä¸æˆ‘ä»¬ä¹‹å‰çš„ç¤ºä¾‹ä¸åŒä¹‹å¤„åœ¨äºï¼Œä½ ç°åœ¨ä¸æ˜¯ç¦»å¼€æˆ¿å­ï¼Œè€Œæ˜¯ç¦»å¼€äº†ä½ çš„å…¬å¯“ï¼Œä½†ä»ç„¶åœ¨å»ºç­‘ç‰©å†…éƒ¨ã€‚ç„¶åä½ èµ°è¿‡ä¸€ä¸ªç§äººèµ°å»Šï¼Œåˆ°è¾¾å¦ä¸€æ‰‡é—¨ï¼ˆè¿™æ˜¯ LXC æ¥å£ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ‰‡é—¨ç»™äº†ä½ è¿›å…¥å»ºç­‘çš„å…¬å…±ç©ºé—´çš„è®¿é—®ï¼Œè¿™é‡Œè¿›è¡Œäº†è·¯ç”±å’Œæ´¾å‘ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸º Cilium å¤§å…ï¼ˆè“è‰²çŸ©å½¢ï¼‰ã€‚å½“é€‰æ‹© Cilium ä¸ºè¿™ä¸ª Kubernetes é›†ç¾¤æä¾›é€šä¿¡æ—¶ï¼Œæ¯ä¸ªå»ºç­‘ç‰©éƒ½å®‰è£…äº†è¿™ä¸ªå¤§å…çš„ Cilium ä»£ç†ã€‚å¤§å…é‡Œæœ‰ä¸€ä¸ªé—¨å«ï¼Œä»–ä¸ä½åœ¨å…¬å¯“é‡Œï¼Œè€Œæ˜¯åœ¨å¤§å…çš„ä¸€ä¸ªç”²æ¿ä¸Šç­‰å¾…ã€‚ä»–æœ‰ä¸€ä¸ªæœåŠ¡äººå‘˜å›¢é˜Ÿï¼Œåœ¨å»ºç­‘ç‰©çš„ä¸åŒé—¨å¤„ç­‰å€™æä¾›æŒ‡å¯¼ã€‚è¿™æ˜¯å› ä¸º Cilium ä½¿ç”¨ä¸€ä¸ªå«åš eBPF çš„é­”æ³•è·¯ç”±åœ°å›¾ï¼Œæœ‰æ•ˆåœ°å¸®åŠ©æ—…è¡Œè€…ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ åˆ°è¾¾èµ°å»Šå°½å¤´çš„é—¨æ—¶ï¼Œä½ å‘ç­‰åœ¨è¿™é‡Œçš„æœåŠ¡äººå‘˜è¡¨ç¤ºä½ è¦å» 14 å·ã€‚ä»–åœ¨ä»–çš„é­”æ³• eBPF åœ°å›¾ä¸­æ‰¾åˆ°äº†ä¸€ä¸ªä¸ 14 å·ç›¸åŒ¹é…çš„é¡¹ç›®ï¼Œå¹¶ç›´æ¥å‘ä½ å±•ç¤ºäº†å³ä¸Šè§’çš„èµ°å»Šé—¨ã€‚ä½ ä¸å¿…å»å¤§å…ï¼Œä»–å‘ä½ å±•ç¤ºäº†ä¸€æ¡ç§˜å¯†é€šé“ï¼Œç›´æ¥åˆ°è¾¾é‚£é‡Œã€‚ç„¶åä½ æ‰“å¼€é‚£æ‰‡é—¨ï¼Œè·Ÿç€èµ°å»Šï¼Œåˆ°è¾¾äº† 14 å·å…¬å¯“ã€‚ä½ å›å»åˆ° 12 å·å…¬å¯“ï¼Œæ²¿ç€ç›¸åŒçš„è·¯å¾„å’Œè¿‡ç¨‹ï¼Œä½†æ˜¯æ–¹å‘ç›¸åã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œè¿™ç§è°ƒåº¦ä¸ä¼ ç»Ÿçš„äº¤æ¢æ–¹å¼ä¸åŒï¼Œå¹¶ä¸”éå¸¸å¿«é€Ÿï¼Œè¿™è¦å½’åŠŸäºé­”æ³• eBPF åœ°å›¾ï¼&lt;/p&gt;
&lt;h3 id=&#34;åœ¨ä¸åŒå»ºç­‘ç‰©çš„å…¬å¯“ä¹‹é—´æ—…è¡Œ&#34;&gt;åœ¨ä¸åŒå»ºç­‘ç‰©çš„å…¬å¯“ä¹‹é—´æ—…è¡Œ&lt;/h3&gt;
&lt;p&gt;ç°åœ¨ï¼Œä» 12 å·å…¬å¯“ï¼Œä½ æƒ³å»æ‹œè®¿å¦ä¸€ä¸ªå»ºç­‘ç‰©é‡Œçš„ 22 å·å…¬å¯“ã€‚ä½ çš„æ—…è¡Œå¼€å§‹å’Œä»¥å‰ä¸€æ ·ï¼Œä½ ç¦»å¼€ä½ çš„å…¬å¯“ï¼Œæ²¿ç€èµ°å»Šï¼Œè¯¢é—®ç­‰å¾…åœ¨è¿™é‡Œçš„æœåŠ¡äººå‘˜çš„æ–¹å‘ã€‚ç”±äºç›®çš„åœ°æ˜¯å¦ä¸€ä¸ªç¤¾åŒºçš„ 22 å·ï¼Œè¿™æ¬¡ä»–æŠŠä½ å¼•å¯¼åˆ°äº†å¤§å…ã€‚åœ¨è¿™é‡Œï¼Œä¸ä¼ ç»Ÿç½‘ç»œä¸€æ ·ï¼Œä½ éœ€è¦å¤§å…ä¸­çš„é—¨å«çš„å¸®åŠ©ã€‚é—¨å«æŸ¥çœ‹ä»–çš„åœ°å›¾ï¼ˆè·¯ç”±è¡¨ï¼‰ï¼ŒæŒ‡å¼•ä½ å» 22 å·çš„æ–¹å‘ï¼Œå¹¶å‘ä½ å±•ç¤ºè¦ä½¿ç”¨çš„é—¨å·ç  11ï¼ˆcilium_hostï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ æ‰“å¼€é‚£æ‰‡é—¨æ—¶ï¼Œä½ ä¼šçœ‹åˆ°åé¢æœ‰å¦ä¸€æ‰‡é—¨ï¼šé‚£å°±æ˜¯è“è‰²çš„ä¸‰è§’å½¢ï¼Œç§°ä¸º VXLAN æ¥å£ã€‚è¿™æ‰‡é—¨é€šå‘ä¸€ä¸ªæ¼‚äº®çš„é€æ˜éš§é“ï¼Œç©¿è¿‡å»ºç­‘ç‰©çš„ä¸»é—¨ã€‚ä½ å—åˆ°é›¨æ°´çš„ä¿æŠ¤ï¼Œå¯ä»¥æ¬£èµåˆ°å¦ä¸€ä¸ªå»ºç­‘ç‰©çš„æ™¯è‰²ã€‚ä½ ç”šè‡³å¯ä»¥çœ‹åˆ°å®¤å¤–çš„å–·æ³‰ï¼å½“ä½ åˆ°è¾¾ç»¿è‰²å»ºç­‘ç‰©æ—¶ï¼Œä½ ç¦»å¼€éš§é“ï¼Œå»è§åœ¨ç»¿è‰²ä¸‰è§’å½¢ï¼ˆVXLAN æ¥å£ï¼‰å¤„ç­‰å¾…ä½ çš„æœåŠ¡äººå‘˜ã€‚ä½ å‘Šè¯‰ä»–ä½ çš„ç›®çš„åœ°ï¼Œä»–åœ¨ä»–çš„é­”æ³• eBPF åœ°å›¾ä¸­æ‰¾åˆ°äº†ä¸ 22 å·ç›¸åŒ¹é…çš„é¡¹ç›®ï¼Œå¹¶å‘ä½ å±•ç¤ºäº†ä¸€æ¡é€šå¾€å·¦ä¸Šè§’èµ°å»Šé—¨çš„ç§˜å¯†é€šé“ã€‚ç„¶åä½ è·Ÿç€èµ°å»Šï¼Œåˆ°è¾¾äº†ä½ çš„ç›®çš„åœ°ã€‚å’Œä»¥å‰ä¸€æ ·ï¼Œä½ å›å»çš„è·¯çº¿å°†æ²¿ç€ç›¸åŒçš„è·¯å¾„ï¼Œä½†æ–¹å‘ç›¸åã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ç¬¬ 3 å±‚è·¯ç”±ï¼Œå› ä¸ºç›®çš„ç¤¾åŒºä¸ä½ çš„ä¸åŒã€‚ä½ å¯ä»¥çœ‹åˆ°åœ¨ Kubernetes ä¸­æ¯”ä¼ ç»Ÿè·¯ç”±ç¨å¾®å¤æ‚ä¸€äº›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å¸Œæœ›è¿™æœ‰åŠ©äºä½ ç†è§£ä¼ ç»Ÿç½‘ç»œå’Œ Kubernetes ç½‘ç»œä¹‹é—´çš„åŒºåˆ«ï¼Œä¹Ÿå¸Œæœ›åè€…ç°åœ¨å¯¹ä½ æ¥è¯´æ›´æ¸…æ™°äº†ã€‚å¦‚æœè¿™å°±æ˜¯ä½ æ‰€éœ€è¦çš„ï¼Œé‚£ä¹ˆæˆ‘å¾ˆé«˜å…´ä½ é˜…è¯»äº†è¿™ç¯‡åšæ–‡ï¼Œå¸Œæœ›ä½ å–œæ¬¢å®ƒã€‚å¦‚æœä½ ç°åœ¨æƒ³äº†è§£æ›´å¤šå…³äº Kubernetes ç½‘ç»œçš„å†…å®¹ï¼Œè¯·ä¿æŒå…³æ³¨ï¼Œå› ä¸ºæˆ‘å°†å†™ä¸€ç¯‡ &lt;a href=&#34;https://www.dbi-services.com/blog/kubernetes-networking-by-using-cilium-intermediate-level-part-1/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸­çº§ç¯‡&lt;/a&gt;ï¼Œä½ å°†åœ¨å…¶ä¸­çœ‹åˆ°ä¸€ä¸ªçœŸå®é›†ç¾¤ä¸Šå»ºç­‘ç‰©çš„æ ·å­ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Istio ä¸­åŸºäºæ ‡å¤´çš„è·¯ç”±â€”â€”æ— éœ€æ ‡å¤´ä¼ æ’­</title>
      <link>https://cloudnativecn.com/blog/header-based-routing-in-istio-without-header-propagation/</link>
      <pubDate>Wed, 06 Mar 2024 12:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/header-based-routing-in-istio-without-header-propagation/</guid>
      <description>&lt;p&gt;Istio ä½¿ç”¨ Envoy ä»£ç†ä½œä¸º Pod sidecarï¼Œåº”ç”¨ç¨‹åºå°†ç½‘ç»œè´£ä»»ï¼ˆä¾‹å¦‚å…¥ç«™å’Œå‡ºç«™æµé‡ï¼‰å§”æ‰˜ç»™å®ƒï¼Œä½†æœ‰ä¸€ä¸ªè´£ä»»ä»ç„¶å±äºåº”ç”¨ç¨‹åºå®¹å™¨ï¼šæ ‡å¤´ä¼ æ’­ã€‚&lt;/p&gt;
&lt;p&gt;Envoy ä»£ç†æ— æ³•å°†å…¶å‘é€åˆ°åº”ç”¨ç¨‹åºçš„è¯·æ±‚ä¸åº”ç”¨ç¨‹åºå“åº”çš„è¯·æ±‚å…³è”èµ·æ¥ï¼Œå› æ­¤ Istio æ— æ³•è‡ªåŠ¨ä¼ æ’­æ ‡å¤´ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1å¦‚æœåº”ç”¨ç¨‹åºå®¹å™¨ä¸è½¬å‘å›æ ‡å¤´sidecar-æ— æ³•å°†è¯·æ±‚ä¸å“åº”å…³è”èµ·æ¥&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1ï¼šå¦‚æœåº”ç”¨ç¨‹åºå®¹å™¨ä¸è½¬å‘å›æ ‡å¤´ï¼ŒSidecar æ— æ³•å°†è¯·æ±‚ä¸å“åº”å…³è”èµ·æ¥ã€‚&#34; srcset=&#34;
               /blog/header-based-routing-in-istio-without-header-propagation/f1_hu14663097096577958957.webp 400w,
               /blog/header-based-routing-in-istio-without-header-propagation/f1_hu1510165011670670968.webp 760w,
               /blog/header-based-routing-in-istio-without-header-propagation/f1_hu14673444050397104611.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/header-based-routing-in-istio-without-header-propagation/f1_hu14663097096577958957.webp&#34;
               width=&#34;760&#34;
               height=&#34;299&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1ï¼šå¦‚æœåº”ç”¨ç¨‹åºå®¹å™¨ä¸è½¬å‘å›æ ‡å¤´ï¼ŒSidecar æ— æ³•å°†è¯·æ±‚ä¸å“åº”å…³è”èµ·æ¥ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒåŸºäºæ ‡å¤´çš„è·¯ç”±éœ€è¦åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å®ç°æ ‡å¤´è½¬å‘ã€‚ä¾‹å¦‚ï¼Œåœ¨ Istio çš„ Bookinfo åº”ç”¨ç¨‹åºä¸­ï¼Œ &lt;code&gt;productpage&lt;/code&gt; å¾®æœåŠ¡æ˜¯&lt;a href=&#34;https://github.com/istio/istio/blob/master/samples/bookinfo/src/productpage/productpage.py#L102&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™æ ·&lt;/a&gt;å®ç°çš„ã€‚è¿™è®©æˆ‘ä»¬æƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;å¹³å°ç®¡ç†å‘˜å¦‚ä½•åœ¨ä¸ä¿®æ”¹åº”ç”¨ç¨‹åºå†…éƒ¨çš„æƒ…å†µä¸‹ä½¿ç”¨åŸºäºæ ‡å¤´çš„è·¯ç”±ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;æ³³é“æ–¹æ³•&#34;&gt;æ³³é“æ–¹æ³•&lt;/h2&gt;
&lt;p&gt;ä½¿ç”¨ Bookinfo åº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬å°†æ ¹æ® &lt;code&gt;x-version&lt;/code&gt; æ ‡å¤´å¯¹è¯·æ±‚è·¯å¾„è¿›è¡Œåˆ†æ®µï¼Œå¦‚ä¸‹å›¾ 2 æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2æ ¹æ®-x-version-æ ‡å¤´åˆ†æ®µè¯·æ±‚è·¯å¾„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2ï¼šæ ¹æ® x-version æ ‡å¤´åˆ†æ®µè¯·æ±‚è·¯å¾„ã€‚&#34; srcset=&#34;
               /blog/header-based-routing-in-istio-without-header-propagation/f2_hu13352547274196591875.webp 400w,
               /blog/header-based-routing-in-istio-without-header-propagation/f2_hu10331701654748029638.webp 760w,
               /blog/header-based-routing-in-istio-without-header-propagation/f2_hu7780059725850173668.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/header-based-routing-in-istio-without-header-propagation/f2_hu13352547274196591875.webp&#34;
               width=&#34;760&#34;
               height=&#34;457&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2ï¼šæ ¹æ® x-version æ ‡å¤´åˆ†æ®µè¯·æ±‚è·¯å¾„ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰ &lt;code&gt;x-version&lt;/code&gt; æ ‡å¤´çš„è¯·æ±‚å¯èƒ½ä¼šè¢«è·¯ç”±åˆ°ä»»æ„åç«¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²å·¥ä½œè´Ÿè½½&#34;&gt;éƒ¨ç½²å·¥ä½œè´Ÿè½½&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å°†ä½¿ç”¨ Istio çš„ Bookinfo &lt;a href=&#34;https://istio.io/latest/docs/examples/bookinfo/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤ºä¾‹&lt;/a&gt; ï¼Œå¹¶å¯¹ç‰ˆæœ¬æ§åˆ¶åº”ç”¨ç¨‹åºè¿›è¡Œä¸€äº›ç»†å¾®çš„æ›´æ”¹ä½œä¸ºç¤ºä¾‹å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸‰ä¸ª productpage éƒ¨ç½²ï¼Œä»…æ›´æ”¹ &lt;code&gt;version&lt;/code&gt; æ ‡ç­¾ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage-v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸ºå®ƒä»¬åˆ›å»ºæœåŠ¡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;9080&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œä¸º reviews åº”ç”¨ç¨‹åºåˆ›å»ºä¸‰ä¸ªéƒ¨ç½²ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews-v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v{1,2,3}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;rating å’Œ details åº”ç”¨ç¨‹åºä¸åŸå§‹ç¤ºä¾‹ä¸­çš„å†…å®¹ç›¸åŒã€‚&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²-istio-é…ç½®&#34;&gt;éƒ¨ç½² Istio é…ç½®&lt;/h2&gt;
&lt;p&gt;è¿™å°±æ˜¯ Istio çš„è·¯ç”±åŠŸèƒ½å‘æŒ¥ä½œç”¨çš„åœ°æ–¹ã€‚æ¯ä¸ªç‰ˆæœ¬çš„ &lt;code&gt;productpage&lt;/code&gt; çš„ &lt;code&gt;DestinationRule subsets&lt;/code&gt; å®šä¹‰ä¸ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;DestinationRule&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;trafficPolicy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;loadBalancer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;simple&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RANDOM&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subsets&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å…¶ä¸­æœ‰å‡ ä¸ª &lt;code&gt;VirtualService&lt;/code&gt; å®ç°äº†æ³³é“æ ‡å¤´é€»è¾‘çš„å‰åŠéƒ¨åˆ†ã€‚ä»¥ä¸‹è´Ÿè´£å‰ç¼€åŒ¹é…å¹¶ä½¿ç”¨ &lt;code&gt;delegate&lt;/code&gt; åŠŸèƒ½æ¥ä½¿ç”¨ç¬¬äºŒä¸ª &lt;code&gt;VirtualService&lt;/code&gt;ï¼Œå› æ­¤é…ç½®æ˜¯åŸå­çš„å¹¶ä¸” &lt;code&gt;mesh&lt;/code&gt; é¿å…å£°æ˜ç½‘å…³é€‰æ‹©å™¨ï¼ˆå‚è§ä¸‹é¢çš„å¼•ç”¨ï¼‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bookinfo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;bookinfo-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/static&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/login&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/logout&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/api/v1/products&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;delegate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage-route&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨æŒ‡æ´¾ &lt;code&gt;productpage-route&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage-route&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;productpage-v1-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;productpage-v2-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;productpage-v3-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;exact&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;productpage-default-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;withoutHeaders&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;x-version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;productpage&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç„¶åï¼Œåœ¨ &lt;code&gt;Reviews&lt;/code&gt; çº§åˆ«ï¼Œåœ¨ &lt;code&gt;httpMatchRequest&lt;/code&gt; ä¸­ä½¿ç”¨ &lt;code&gt;sourceLabels&lt;/code&gt; é…ç½®åˆ¶ä½œæ³³é“çš„ååŠéƒ¨åˆ†ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸€ä¸ªæˆ–å¤šä¸ªæ ‡ç­¾ï¼Œè¿™äº›æ ‡ç­¾çº¦æŸè§„åˆ™å¯¹å…·æœ‰ç»™å®šæ ‡ç­¾çš„æº (å®¢æˆ·æœº) å·¥ä½œè´Ÿè½½çš„é€‚ç”¨æ€§ã€‚å¦‚æœ VirtualService æœ‰ä¸€ä¸ªåœ¨é¡¶çº§ &lt;code&gt;gateways&lt;/code&gt; å­—æ®µä¸­æŒ‡å®šçš„ç½‘å…³åˆ—è¡¨ï¼Œé‚£ä¹ˆå®ƒå¿…é¡»åŒ…å«è¯¥å­—æ®µé€‚ç”¨çš„ä¿ç•™ç½‘å…³ &lt;code&gt;mesh&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ¥æºï¼š&lt;/em&gt; &lt;a href=&#34;https://istio.io/latest/docs/reference/config/networking/virtual-service/#HTTPMatchRequest&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;em&gt;Istio è™šæ‹ŸæœåŠ¡æ–‡æ¡£&lt;/em&gt;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™æ˜¯ &lt;code&gt;VirtualService&lt;/code&gt; ä½¿ç”¨è¯¥ &lt;code&gt;sourceLabels&lt;/code&gt; åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews-route&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;reviews-v1-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;sourceLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;reviews-v2-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;sourceLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;reviews-v3-route&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;sourceLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;reviews&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åœ¨æ²¡æœ‰æ ‡å¤´ä¼ æ’­çš„æƒ…å†µä¸‹æµ‹è¯•æ ‡å¤´è·¯ç”±&#34;&gt;åœ¨æ²¡æœ‰æ ‡å¤´ä¼ æ’­çš„æƒ…å†µä¸‹æµ‹è¯•æ ‡å¤´è·¯ç”±&lt;/h2&gt;
&lt;p&gt;é¦–å…ˆï¼Œä»æ— æ ‡å¤´åœºæ™¯å¼€å§‹ï¼Œæ‚¨å¯ä»¥ä»æ‰€æœ‰é€šé“è·å¾—å“åº”ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; â€”â€”â€”â€”â€”Â»  ns:bookinfo â¯ for i in {1..5}; do curl -s localhost:8080/productpage | grep -A1 &amp;#34;Reviews served by&amp;#34;; done
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v2-955b74755-t4jkb&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v2-955b74755-t4jkb&amp;lt;/u&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç„¶åæ£€æŸ¥ &lt;code&gt;x-version: v1&lt;/code&gt; header æ˜¯å¦æœ‰ä½œç”¨ã€‚æ‚¨å¯ä»¥çœ‹åˆ°å·¥ä½œè´Ÿè½½å‘å‡ºçš„æ‰€æœ‰å¯¹ &lt;code&gt;productpage-v1&lt;/code&gt; çš„è°ƒç”¨å‡ç”±  &lt;code&gt;reviews-v1&lt;/code&gt; ä¸“é—¨æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt; â€”â€”â€”â€”â€”Â»  ns:bookinfo â¯ for i in {1..10}; \
do curl -s localhost:8080/productpage -H &amp;#34;x-version: v1&amp;#34; \
| grep -A1 &amp;#34;Reviews served by&amp;#34;; done
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v1-5cf854487-hjtrg&amp;lt;/u&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;v3&lt;/code&gt; æ ‡å¤´å€¼å®Œæˆæµ‹è¯•ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;  â€”â€”â€”â€”â€”Â»  ns:bookinfo â¯ for i in {1..10}; \
do curl -s localhost:8080/productpage -H &amp;#34;x-version: v3&amp;#34; \
| grep -A1 &amp;#34;Reviews served by&amp;#34;; done
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
        &amp;lt;dt&amp;gt;Reviews served by:&amp;lt;/dt&amp;gt;
        &amp;lt;u&amp;gt;reviews-v3-797fc48bc9-wsg26&amp;lt;/u&amp;gt;
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬åœ¨æ ‡å¤´ä¸Šä½¿ç”¨ &lt;code&gt;match&lt;/code&gt; ï¼Œåœ¨ Istio ä¸­ä½¿ç”¨ &lt;code&gt;subsets&lt;/code&gt; å’Œ &lt;code&gt;sourceLabels&lt;/code&gt; åŸºäºæ ‡å¤´è¿›è¡Œè·¯ç”±ï¼Œè€Œæ— éœ€æ ‡å¤´ä¼ æ’­ã€‚æ‚¨è¿˜å¯ä»¥æŸ¥çœ‹ &lt;code&gt;delegate&lt;/code&gt; åŠŸèƒ½ä»¥åŠ &lt;code&gt;withoutHeaders&lt;/code&gt; åŒ¹é…çš„ä½¿ç”¨æƒ…å†µã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¦‚æœæ‚¨æ˜¯æœåŠ¡ç½‘æ ¼æ–°æ‰‹ï¼ŒTetrate&lt;a href=&#34;https://tetr8.io/academy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ Tetrate Academy&lt;/a&gt;æä¾›äº†ä¸€ç³»åˆ—å…è´¹åœ¨çº¿è¯¾ç¨‹ï¼Œå¯å¸®åŠ©æ‚¨å¿«é€Ÿç†Ÿæ‚‰ Istio å’Œ Envoyã€‚å¦‚æœæ‚¨æ­£åœ¨å¯»æ‰¾ä½¿ç”¨ Istio è¿›è¡Œç”Ÿäº§çš„æœ€å¯é æ–¹æ³•ï¼Œè¯·æŸ¥çœ‹ &lt;a href=&#34;https://tetr8.io/tid&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tetrate Istio Subscription&lt;/a&gt;ã€‚Tetrate Istio è®¢é˜…æ‹¥æœ‰åœ¨é«˜åº¦ç›‘ç®¡å’Œä»»åŠ¡å…³é”®å‹ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œ Istio å’Œ Envoy æ‰€éœ€çš„ä¸€åˆ‡ã€‚å®ƒåŒ…æ‹¬ &lt;a href=&#34;https://istio.tetratelabs.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tetrate Istio Distro&lt;/a&gt;ï¼Œè¿™æ˜¯ Istio å’Œ Envoy çš„ 100% ä¸Šæ¸¸å‘è¡Œç‰ˆï¼Œç»è¿‡ FIPS éªŒè¯å¹¶å‡†å¤‡å¥½ FedRAMPã€‚å¯¹äºéœ€è¦å¼€æº Istio å’Œ Envoy è€Œæ— éœ€ä¸“æœ‰ä¾›åº”å•†ä¾èµ–çš„å›¢é˜Ÿï¼ŒTetrate æä¾›å”¯ä¸€ 100% ä¸Šæ¸¸ Istio ä¼ä¸šæ”¯æŒäº§å“ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•åœ¨ Istio ä¸­æŒ‰è·¯å¾„é…ç½®å…¨å±€é€Ÿç‡é™åˆ¶</title>
      <link>https://cloudnativecn.com/blog/how-to-configure-global-rate-limits-by-path-in-istio/</link>
      <pubDate>Thu, 29 Feb 2024 20:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/how-to-configure-global-rate-limits-by-path-in-istio/</guid>
      <description>&lt;p&gt;æœ¬æ–‡æ˜¯ä¸ºé‚£äº›åˆšå¼€å§‹ä½¿ç”¨ Istio é€Ÿç‡é™åˆ¶åŠŸèƒ½ï¼Œå¸Œæœ›äº†è§£åŸºäºè¯·æ±‚è·¯å¾„çš„é€Ÿç‡é™åˆ¶å¦‚ä½•å·¥ä½œçš„äººè€Œå†™çš„ã€‚å®ƒæºäºæˆ‘çš„å®è·µï¼Œå¹¶æ¾„æ¸…äº†å…³äº&lt;code&gt;rate_limit&lt;/code&gt;æ“ä½œä¸­ AND/OR æ“ä½œçš„å›°æƒ‘ã€‚æˆ‘èŠ±äº†æ¯”é¢„æœŸæ›´å¤šçš„æ—¶é—´æ¥å¼„æ¸…æ¥šæˆ‘å°†åœ¨è¿™é‡Œä¸ºä½ æ€»ç»“çš„å†…å®¹ï¼Œä»¥ä¾¿ä½ åœ¨å‡ åˆ†é’Ÿå†…å­¦ä¹ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åŸºç¡€çŸ¥è¯†&#34;&gt;åŸºç¡€çŸ¥è¯†&lt;/h2&gt;
&lt;p&gt;Istio åœ¨ Envoy ä¹‹ä¸Šè¿è¡Œï¼Œè€Œæˆ‘ä»¬å°†è®¨è®ºçš„ä¸»è¦æŠ€æœ¯æ˜¯ Envoyã€‚Envoy æœ‰åœ¨ä»£ç†æœ¬èº«ä¸Šå®ç°çš„æœ¬åœ°é€Ÿç‡é™åˆ¶å’Œåœ¨ L4 æˆ– L7 ä¸Šè°ƒç”¨å¤–éƒ¨æœåŠ¡çš„å…¨å±€é€Ÿç‡é™åˆ¶çš„é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤–éƒ¨é€Ÿç‡é™åˆ¶æœåŠ¡&#34;&gt;å¤–éƒ¨é€Ÿç‡é™åˆ¶æœåŠ¡&lt;/h2&gt;
&lt;p&gt;å¤–éƒ¨é€Ÿç‡é™åˆ¶æœåŠ¡ï¼ˆRLSï¼‰ä¸ Redis æ•°æ®åº“é…åˆä½¿ç”¨ï¼Œé€šè¿‡ gRPC ä¸ envoy å®ä¾‹è¿æ¥ã€‚è¯¥ RLS æ˜¯ç”± &lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_filters/rate_limit_filter#rate-limit&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;filter&lt;/a&gt; åœ¨ HTTP è·¯ç”±è¿‡æ»¤å™¨ä¹‹å‰çš„ä¾¦å¬å™¨é“¾ä¸­æ·»åŠ è€Œè¢«è°ƒç”¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå¤–éƒ¨è¿‡æ»¤å™¨å°†æè¿°ç¬¦ç»„ç»‡æˆåŸŸç»„ã€‚æ¯ä¸ªæè¿°ç¬¦éƒ½æ˜¯ä¸€ä¸ªé”®å€¼å¯¹ï¼Œç”±é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨å¡«å……ï¼Œå¹¶ä¼ é€’ç»™ RLS ä¾›å…¶åœ¨è§„åˆ™æ‰§è¡Œé€»è¾‘ä¸­ä½¿ç”¨ã€‚è¯·å‚é˜… &lt;a href=&#34;https://github.com/envoyproxy/ratelimit#overview&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/envoyproxy/ratelimit#overview&lt;/a&gt; è¿›è¡Œå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;RLS éœ€è¦ç”±é›†ç¾¤æ“ä½œå‘˜ï¼ˆä½ ï¼‰å®‰è£…å’Œç®¡ç†ï¼Œå¹¶ä¸”ä¸ä¼šéš Istio ä¸€èµ·æä¾›ï¼Œå°½ç®¡å¯ä»¥åœ¨ä½ å®‰è£…æ—¶ä» Istio åŒ…çš„ç¤ºä¾‹ç›®å½•ä¸­æ‰¾åˆ°å®ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;envoy-http-é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&#34;&gt;Envoy HTTP é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&lt;/h2&gt;
&lt;p&gt;Envoy çš„è®¾ç½®ç”±åº”ç”¨äºå…¥å£ç½‘å…³çš„ä¸¤ä¸ª Envoy é…ç½®ç»„æˆï¼Œä¸€ä¸ªåœ¨ä¾¦å¬å™¨ç»„ä»¶ä¸­æ·»åŠ é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨ï¼Œå¦ä¸€ä¸ªåœ¨åŠ¨æ€è·¯ç”±ç»„ä»¶ä¸­å®šä¹‰è™šæ‹Ÿä¸»æœºçº§åˆ«çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-envoy-http-é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Envoy HTTP é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨&#34; srcset=&#34;
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f1_hu2702124450085595978.webp 400w,
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f1_hu17267518848763078126.webp 760w,
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f1_hu18100369885456252054.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-configure-global-rate-limits-by-path-in-istio/f1_hu2702124450085595978.webp&#34;
               width=&#34;760&#34;
               height=&#34;603&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Envoy HTTP é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¸¦æœ‰é€Ÿç‡é™åˆ¶è¿‡æ»¤å™¨çš„ä¾¦å¬å™¨ç»„ä»¶ filter_chains.filters[] åœ¨è·¯ç”±å™¨ä¹‹å‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è™šæ‹Ÿä¸»æœºhttpbincom80çš„è·¯ç”±ç»„ä»¶ä¸­çš„é€Ÿç‡é™åˆ¶æ“ä½œ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è™šæ‹Ÿä¸»æœºâ€œhttpbin.com:80â€çš„è·¯ç”±ç»„ä»¶ä¸­çš„é€Ÿç‡é™åˆ¶æ“ä½œ&#34; srcset=&#34;
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f2_hu913498364218129041.webp 400w,
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f2_hu4600014387462606906.webp 760w,
               /blog/how-to-configure-global-rate-limits-by-path-in-istio/f2_hu8730572533005153305.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-configure-global-rate-limits-by-path-in-istio/f2_hu913498364218129041.webp&#34;
               width=&#34;760&#34;
               height=&#34;730&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è™šæ‹Ÿä¸»æœºâ€œhttpbin.com:80â€çš„è·¯ç”±ç»„ä»¶ä¸­çš„é€Ÿç‡é™åˆ¶æ“ä½œ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æ³¨æ„ï¼šä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ä»ä»»ä½• envoy ä»£ç†ï¼ˆå½“ç„¶æ˜¯ç½‘å…³ï¼‰è·å–æ­¤è½¬å‚¨ï¼š&lt;/em&gt;&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;k exec &amp;lt;POD&amp;gt; -c istio-proxy -- curl &amp;#39;localhost:15000/config_dump&amp;#39; &amp;gt; config_dump.json
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¾¦å¬å™¨è¿‡æ»¤å™¨é…ç½®äº†å¦‚ä½•åˆ°è¾¾ RLSã€å®ƒæ­£åœ¨ç›‘è§†çš„åŸŸä»¥åŠä¸€äº›å…¶ä»–è®¾ç½®ã€‚å½“æ»¡è¶³è·¯ç”±ä¸­å®šä¹‰çš„æ“ä½œæ—¶ï¼Œæ­¤è¿‡æ»¤å™¨å°†è®¿é—®åœ¨è·¯ç”±ä¸­å®šä¹‰çš„æ“ä½œï¼Œå¹¶è§¦å‘åˆ° RLS ä¸Šæ¸¸çš„ gRPC è°ƒç”¨ï¼Œå…¶ä¸­åŒ…æ‹¬åŸŸã€æè¿°ç¬¦é”®å’Œå€¼ï¼Œä»¥ä¾¿å®ƒè¿”å›ä¸€ä¸ªåˆ¤æ–­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-ä¸­æŒ‰è¯·æ±‚è·¯å¾„è®¾ç½®é€Ÿç‡é™åˆ¶çš„ç¤ºä¾‹&#34;&gt;Istio ä¸­æŒ‰è¯·æ±‚è·¯å¾„è®¾ç½®é€Ÿç‡é™åˆ¶çš„ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;ä½ éœ€è¦æŒ‰ç…§&lt;a href=&#34;https://istio.io/latest/docs/tasks/policy-enforcement/rate-limit/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤&lt;/a&gt;å¼€å§‹ã€‚èŠ±ç‚¹æ—¶é—´åˆ†æåŸºäºå‰æ–‡ä»‹ç»çš„é…ç½®ã€‚ä¾›ä½ å‚è€ƒï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ä½ ä¹Ÿå¯ä»¥åœ¨ Istio åŒ…çš„ç¤ºä¾‹ç›®å½•ä¸­è®¿é—®çš„ &lt;code&gt;httpbin&lt;/code&gt; æœåŠ¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é”™è¯¯çš„æ–¹æ³•&#34;&gt;é”™è¯¯çš„æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæˆ‘å¸Œæœ›æ ¹æ®ä¸¤ä¸ªè·¯å¾„ &lt;code&gt;/delay&lt;/code&gt; å’Œ &lt;code&gt;/status&lt;/code&gt; è¿›è¡Œé€Ÿç‡é™åˆ¶ã€‚çœ‹èµ·æ¥å¾ˆå®¹æ˜“ï¼Œæ‰€ä»¥æˆ‘é…ç½®äº†æˆ‘çš„ Envoy Filter å’Œ RLS å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# EnvoyFilter é…ç½®è·¯ç”±æ“ä½œ&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MERGE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rate_limits&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;actions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;header_value_match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;descriptor_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;descriptor_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;yes&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;:path&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;safe_regex_match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;google_re2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;regex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.*delay.*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;header_value_match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;descriptor_key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;PATH&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;descriptor_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;no
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;:path&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;safe_regex_match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;google_re2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;{}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;regex&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;.*status.*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# RLS configmap&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;data&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;config.yaml&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    domain: tetrate-ratelimit
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    descriptors:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      - key: PATH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        value: &amp;#34;yes&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        rate_limit:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          unit: minute
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          requests_per_unit: 3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      - key: PATH
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        value: &amp;#34;no&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        rate_limit:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          unit: minute
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          requests_per_unit: 1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ‰äº†è¿™ä¸ªï¼Œæˆ‘æœŸæœ›é€šè¿‡è°ƒç”¨ä»¥ä¸‹å‘½ä»¤æ¥ä½¿å…¶å·¥ä½œï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;curl http://127.0.0.1:8080/delay/1 -H&amp;#34;host: httpbin.com&amp;#34; -v -o /dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä½†æ˜¯ RLS ç”šè‡³æ²¡æœ‰æ³¨æ„åˆ°è¿™ä¸ªè°ƒç”¨ï¼Œæ‰€ä»¥é€Ÿç‡é™åˆ¶æ²¡æœ‰å‘ç”Ÿï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# k logs -n default -f ratelimit-57bf5688c-f8q5k
time=&amp;#34;2023-11-29T17:34:10Z&amp;#34; level=debug msg=&amp;#34;[gostats] Flush() called, all stats would be flushed&amp;#34;
time=&amp;#34;2023-11-29T17:34:20Z&amp;#34; level=debug msg=&amp;#34;[gostats] flushing counter ratelimit.go.mallocs: 460&amp;#34;
time=&amp;#34;2023-11-29T17:34:20Z&amp;#34; level=debug msg=&amp;#34;[gostats] flushing counter ratelimit.go.frees: 26&amp;#34;
time=&amp;#34;2023-11-29T17:34:20Z&amp;#34; level=debug msg=&amp;#34;[gostats] flushing counter ratelimit.go.totalAlloc: 15624&amp;#34;
time=&amp;#34;2023-11-29T17:34:20Z&amp;#34; level=debug msg=&amp;#34;[gostats] flushing gauge ratelimit.go.sys: 0&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;em&gt;ä¸ºäº†è®¾ç½®è°ƒè¯•æ¨¡å¼ï¼Œä½ å¯ä»¥ç¼–è¾‘ ratelimit-server éƒ¨ç½²çš„å®¹å™¨å‚æ•°ã€‚åœ¨é‚£é‡Œï¼Œä½ å°†æ‰¾åˆ°æ—¥å¿—çº§åˆ«æ ‡å¿—ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å°è¯•äº†æ‰€æœ‰ç§ç±»çš„ç»„åˆåœ¨ &lt;code&gt;rate_limits.actions&lt;/code&gt; è®¾ç½®ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;string_match&lt;/code&gt; å’Œ &lt;code&gt;prefix_match&lt;/code&gt; æ›¿ä»£äº† &lt;code&gt;safe_regex_match&lt;/code&gt;ï¼Œä½†æ²¡æœ‰æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;è¿˜å°è¯•ä½¿ç”¨å•ä¸ª &lt;code&gt;descriptor_key&lt;/code&gt;ï¼Œä¸åŒçš„å€¼ä»¥åŠç”šè‡³ä¸è®¾ç½®å®ƒå¹¶ä½¿ç”¨é»˜è®¤çš„ &lt;code&gt;header_match&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;é¡¿æ‚Ÿæ—¶åˆ»&#34;&gt;é¡¿æ‚Ÿæ—¶åˆ»&lt;/h2&gt;
&lt;p&gt;æˆ‘å‘ç°è¿‡æ»¤å™¨æ²¡æœ‰å‘é€ä»»ä½•ä¸œè¥¿åˆ° RLSï¼Œå› ä¸ºå‰è€…åœ¨ä»»ä½•è¯·æ±‚ä¸Šéƒ½ä¿æŒæ²‰é»˜ã€‚ç„¶åï¼Œé€šè¿‡æ–‡æ¡£æˆ‘è¯»åˆ°ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;å¦‚æœæ“ä½œä¸èƒ½æ·»åŠ æè¿°ç¬¦æ¡ç›®ï¼Œåˆ™ä¸ä¼šä¸ºé…ç½®ç”Ÿæˆæè¿°ç¬¦&amp;rdquo;ï¼Œè§&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/config/route/v3/route_components.proto#config-route-v3-ratelimit&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç„¶åï¼Œå‘èµ·è°ƒç”¨ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;curl http://127.0.0.1:8080/status/delay -H&amp;#34;host: httpbin.com&amp;#34; -v -o /dev/null
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç»“æœå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;time=&amp;#34;2023-11-29T16:07:07Z&amp;#34; level=debug msg=&amp;#34;got descriptor: (PATH=yes),(PATH=no)&amp;#34;
time=&amp;#34;2023-11-29T16:07:07Z&amp;#34; level=debug msg=&amp;#34;starting get limit lookup&amp;#34;
time=&amp;#34;2023-11-29T16:07:07Z&amp;#34; level=debug msg=&amp;#34;looking up key: PATH_yes&amp;#34;
time=&amp;#34;2023-11-29T16:07:07Z&amp;#34; level=debug msg=&amp;#34;found rate limit: PATH_yes&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æ‰€ä»¥ï¼Œåªæœ‰å½“æˆ‘çš„è·¯å¾„æ»¡è¶³ &lt;em&gt;ä¸¤ä¸ª&lt;/em&gt; &lt;code&gt;header_value_match&lt;/code&gt; æ—¶ï¼Œæè¿°ç¬¦æ‰ä¼šä¼ é€’ç»™ RLSã€‚æˆ‘çš„å½“å‰é…ç½®æ­£å¦‚ä¸€ä¸ª AND è¿ç®—ç¬¦ä¸€æ ·å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œä¸€åˆ‡éƒ½å½’ç»“ä¸ºï¼š&lt;em&gt;å¦‚ä½•åœ¨ rate_limit æ“ä½œä¸­è®¾ç½® OR é€»è¾‘è€Œä¸æ˜¯ ANDï¼Ÿ&lt;/em&gt;&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³æ–¹æ¡ˆ&#34;&gt;è§£å†³æ–¹æ¡ˆ&lt;/h2&gt;
&lt;p&gt;åŸå§‹é…ç½®ç•¥æœ‰å˜åŒ–ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;# EnvoyFilter é…ç½®è·¯ç”±æ“ä½œ   
        value:
          rate_limits:
            - actions: # ä»»ä½•æ“ä½œåœ¨æ­¤å¤„
              - header_value_match:
                  descriptor_key: &amp;#34;PATH_DELAY&amp;#34;
                  descriptor_value: &amp;#34;yes&amp;#34;
                  headers:
                    - name: &amp;#34;:path&amp;#34;
                      safe_regex_match:
                        google_re2: {}
                        regex: &amp;#34;.*delay.*&amp;#34;
            - actions:
              - header_value_match:
                  descriptor_key: &amp;#34;PATH_STATUS&amp;#34;
                  descriptor_value: &amp;#34;yes&amp;#34;
                  headers:
                    - name: &amp;#34;:path&amp;#34;
                      safe_regex_match:
                        google_re2: {}
                        regex: &amp;#34;.*status.*&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;çœ‹èµ·æ¥åƒä¸€ä¸ªæœ‰æ•ˆçš„é…ç½®ï¼Œå°±åƒï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;â¯ curl http://127.0.0.1:8080/delay/1 -H&amp;#34;host: httpbin.com&amp;#34; -v -s -o /dev/null 
*   Trying 127.0.0.1:8080...
* Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)
&amp;gt; GET /delay/1 HTTP/1.1
&amp;gt; Host: httpbin.com
&amp;gt; User-Agent: curl/7.81.0
&amp;gt; Accept: */*
&amp;gt; 
* Mark bundle as not supporting multiuse
&amp;lt; HTTP/1.1 200 OK
&amp;lt; server: istio-envoy
&amp;lt; date: Wed, 29 Nov 2023 20:17:02 GMT
&amp;lt; content-type: application/json
&amp;lt; content-length: 703
&amp;lt; access-control-allow-origin: *
&amp;lt; access-control-allow-credentials: true
&amp;lt; x-envoy-upstream-service-time: 1005
&amp;lt; 
{ [703 bytes data]
* Connection #0 to host 127.0.0.1 left intact

â¯ curl http://127.0.0.1:8080/delay/1 -H&amp;#34;host: httpbin.com&amp;#34; -v -s -o /dev/null 
*   Trying 127.0.0.1:8080...
* Connected to 127.0.0.1 (127.0.0.1) port 8080 (#0)
&amp;gt; GET /delay/1 HTTP/1.1
&amp;gt; Host: httpbin.com
&amp;gt; User-Agent: curl/7.81.0
&amp;gt; Accept: */*
&amp;gt; 
* Mark bundle as not supporting multiuse
&amp;lt; HTTP/1.1 429 Too Many Requests &amp;lt;---------- å‚è§
&amp;lt; x-envoy-ratelimited: true
&amp;lt; date: Wed, 29 Nov 2023 20:17:06 GMT
&amp;lt; server: istio-envoy
&amp;lt; content-length: 0
&amp;lt; 
* Connection #0 to host 127.0.0.1 left intact
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å’Œ RLS æ—¥å¿—ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;time=&amp;#34;2023-11-29T16:33:57Z&amp;#34; level=debug msg=&amp;#34;starting cache lookup&amp;#34;
time=&amp;#34;2023-11-29T16:33:57Z&amp;#34; level=debug msg=&amp;#34;looking up cache key: tetrate-ratelimit_PATH_DELAY_yes_1701275580&amp;#34;
time=&amp;#34;2023-11-29T16:33:57Z&amp;#34; level=debug msg=&amp;#34;cache key: tetrate-ratelimit_PATH_DELAY_yes_1701275580 current: 1&amp;#34;
time=&amp;#34;2023-11-29T16:33:57Z&amp;#34; level=debug msg=&amp;#34;returning normal response&amp;#34;
time=&amp;#34;2023-11-29T16:33:57Z&amp;#34; level=debug msg=&amp;#34;[gostats] flushing time ratelimit_server.ShouldRateLimit.response_time: 0.000000&amp;#34;
time=&amp;#34;2023-11-29T16:33:59Z&amp;#34; level=debug msg=&amp;#34;got descriptor: (PATH_DELAY=yes)&amp;#34;
time=&amp;#34;2023-11-29T16:33:59Z&amp;#34; level=debug msg=&amp;#34;starting get limit lookup&amp;#34;
time=&amp;#34;2023-11-29T16:33:59Z&amp;#34; level=debug msg=&amp;#34;looking up key: PATH_DELAY_yes&amp;#34;
time=&amp;#34;2023-11-29T16:33:59Z&amp;#34; level=debug msg=&amp;#34;found rate limit: PATH_DELAY_yes&amp;#34;
time=&amp;#34;2023-11-29T16:33:59Z&amp;#34; level=debug msg=&amp;#34;applying limit: 1 requests per MINUTE, shadow_mode: false&amp;#34;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ç›¸ä¿¡æˆ‘ï¼Œ&lt;code&gt;/status&lt;/code&gt; çš„é™åˆ¶ä¹Ÿæ˜¯å­˜åœ¨çš„ã€‚&lt;/p&gt;
&lt;p&gt;AND/ORé€»è¾‘ç”¨äºé€Ÿç‡é™åˆ¶ &lt;code&gt;rate_limits&lt;/code&gt; é…ç½®åœ¨å…¶æ•°ç»„ä¸­æ”¯æŒå¤šä¸ªä½ç½®ï¼Œå› æ­¤ AND/OR é€»è¾‘æ“ä½œå–å†³äºåŠ¨ä½œæ˜¯å¦åµŒå¥—åˆ°ç›¸åŒçš„ &lt;code&gt;actions&lt;/code&gt; å­é›†ä¸­ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šå¯èƒ½æœ‰ä¸€ç§æ›´å®‰å…¨ã€æ›´æœ‰æ•ˆçš„è·¯å¾„åŒ¹é…æ–¹å¼ï¼Œè€Œä¸æ˜¯åƒè¿™ä¸ªä¾‹å­ä¸­é‚£æ ·æ‰“å¼€æ­£åˆ™è¡¨è¾¾å¼ã€‚å®ƒå¾ˆç®€å•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸“æ³¨äºä¸»é¢˜ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Weaveworks å€’é—­ï¼šäº‘åŸç”Ÿè¡Œä¸šçš„å˜é©ä¸æŒ‘æˆ˜</title>
      <link>https://cloudnativecn.com/blog/end-of-an-era-weaveworks-closes-shop-amid-cloud-native-turbulence/</link>
      <pubDate>Wed, 07 Feb 2024 09:05:42 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/end-of-an-era-weaveworks-closes-shop-amid-cloud-native-turbulence/</guid>
      <description>&lt;p&gt;Weaveworks çš„é¦–å¸­æ‰§è¡Œå®˜å…¼è”åˆåˆ›å§‹äºº Alexis Richardson åœ¨ LinkedIn ä¸Šåˆ†äº«äº†å…¬å¸å…³é—­çš„æ²‰é‡æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.weave.works/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Weaveworks&lt;/a&gt;ï¼Œæ›¾ç»åœ¨äº‘åŸç”Ÿå®¹å™¨ç®¡ç†é¢†åŸŸæ˜¯åˆ›æ–°çš„å…ˆé©±ï¼Œå¦‚ä»Šå®£å¸ƒåœæ­¢è¿è¥ï¼Œè¿™ä¸€ä¸¾åŠ¨åæ˜ äº†ç§‘æŠ€åˆåˆ›å…¬å¸è¡Œä¸šä¸ç¨³å®šçš„æœ¬è´¨ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‘¨ä¸€å‘å¸ƒçš„ä»¤äººæƒŠè®¶çš„&lt;a href=&#34;https://www.linkedin.com/posts/richardsonalexis_hi-everyone-i-am-very-sad-to-announce-activity-7160295096825860096-ZS67/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LinkedIn å¸–å­&lt;/a&gt;ä¸­ï¼ŒWeaveworks é¦–å¸­æ‰§è¡Œå®˜å®£å¸ƒå…¬å¸å³å°†åœæ­¢è¿è¥ã€‚&lt;/p&gt;
&lt;p&gt;Weaveworks çš„æ•…äº‹æ˜¯ä¸€ä¸ªå…¸å‹çš„åˆåˆ›å…¬å¸ä¸å¸‚åœºåŠ¨æ€å’Œèµ„é‡‘çº¦æŸçš„æ½®èµ·æ½®è½çš„æ•…äº‹ã€‚å°½ç®¡åœ¨ 2023 å¹´å–å¾—äº†ä¸¤ä½æ•°çš„å¢é•¿ï¼Œä½†å…¬å¸é¢ä¸´ç€â€œæ³¢åŠ¨â€çš„é”€å”®å’Œèµ„é‡‘ä¸è¶³çš„å±€é¢ï¼ŒåŠ å‰§äº†å¤±è´¥çš„æ”¶è´­è°ˆåˆ¤ï¼Œè¿™æ˜¯è®¸å¤šåˆåˆ›å…¬å¸éƒ½å®³æ€•ä½†ä¸å¯é¿å…åœ°ä¼šé‡åˆ°çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;æˆç«‹äº 2014 å¹´ï¼Œå½“æ—¶â€œäº‘åŸç”Ÿâ€è¿™ä¸ªè¯æ›´å¤šåœ°æ˜¯ä¸€ä¸ªå™±å¤´è€Œä¸æ˜¯ä¸€ä¸ªå•†ä¸šç°å®æ—¶ï¼ŒWeaveworks ç«‹å¿—äºç”¨ä»–ä»¬çš„æ–°æ¦‚å¿µ&lt;a href=&#34;https://www.weave.works/technologies/gitops/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitOps&lt;/a&gt;æ¥å¡‘é€ æœªæ¥çš„äº‘åŸºç¡€è®¾æ–½ç®¡ç†ã€‚ç„¶è€Œï¼Œå°½ç®¡æœ‰ç€å¼€æ‹“ç²¾ç¥å’Œæ—©æœŸè¿›å…¥å¸‚åœºçš„ä¼˜åŠ¿ï¼Œä½†è¯¥å…¬å¸ä»ç„¶ä¸ä¸€ä¸ªå¸ç©ºè§æƒ¯çš„æ•Œäººææ–—ï¼šè´¢åŠ¡å¯æŒç»­æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/weaveworks/weave-gitops&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Weave GitOps&lt;/a&gt;æ˜¯ä¸€ä¸ªå¼€æºè½¯ä»¶åŒ…ï¼Œæ—¨åœ¨ç®€åŒ–ä» Git å­˜å‚¨åº“åˆ° Kubernetes é›†ç¾¤çš„è¿ç»­äº¤ä»˜ï¼ˆCDï¼‰è¿‡ç¨‹ä¸­éƒ¨ç½²åº”ç”¨ç¨‹åºå’Œæ›´æ–°çš„è¿‡ç¨‹ï¼Œå¯¹å…¬å¸æœªæ¥çš„å…‰æ˜æœ‰æ‰€æœŸå¾…ã€‚ç„¶è€Œï¼Œè¿™ä¸€åˆ‡éƒ½æˆä¸ºäº†æ³¡å½±ã€‚&lt;/p&gt;
&lt;p&gt;äº‘åŸç”Ÿé¢†åŸŸçš„ç«äº‰åœ¨å¤šå¹´æ¥ä¸æ–­åŠ å‰§ï¼Œç«äº‰å¯¹æ‰‹å¦‚&lt;a href=&#34;https://circleci.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CircleCI&lt;/a&gt;å’Œ&lt;a href=&#34;https://www.harness.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Harness Labs&lt;/a&gt;å¸å¼•äº†æ³¨æ„åŠ›å’Œèµ„é‡‘ã€‚Weaveworks ä¸è¿™äº›èµ„é‡‘æ›´å……è£•çš„ç«äº‰å¯¹æ‰‹çš„æ–—äº‰å‡¸æ˜¾äº†åˆåˆ›å…¬å¸ç”Ÿæ€ç³»ç»Ÿçš„æ®‹é…·ç°å®ï¼Œå³å•é åˆ›æ–°å¹¶ä¸èƒ½ä¿è¯æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å…¶ç”Ÿå‘½å‘¨æœŸå†…ï¼Œ&lt;a href=&#34;https://www.crunchbase.com/organization/weaveworks&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Weaveworks ç­¹é›†äº†è¶…è¿‡ 6100 ä¸‡ç¾å…ƒ&lt;/a&gt;ã€‚ä½†æ˜¯ï¼Œè¯¥å…¬å¸ 2020 å¹´çš„æœ€åä¸€è½®èèµ„é‡‘é¢ä¸º 3600 ä¸‡ç¾å…ƒã€‚è¿™æ˜¯ä¸é”™çš„ï¼Œä½†åœ¨é£é™©æŠ•èµ„ç•Œï¼Œå››å¹´å·²ç»æ˜¯ä¸€æ®µæ¼«é•¿çš„æ—¶é—´äº†ã€‚éšç€ 2022 å¹´ç»æµçš„ä¸‹æ»‘ï¼Œè¯¥å…¬å¸ â€”â€” åƒè®¸å¤šå…¶ä»–å…¬å¸ä¸€æ · â€”â€” é¦–å…ˆæ— æ³•è·å¾—æ›´å¤šçš„æŠ•èµ„ï¼Œç„¶åæœªèƒ½è¾¾æˆä¸€é¡¹åˆå¹¶åè®®ï¼Œè¿™å°†ä¸ºå…¶æä¾›å‰è¿›çš„é“è·¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;çŸ­æš‚çš„ç§‘æŠ€&#34;&gt;çŸ­æš‚çš„ç§‘æŠ€&lt;/h2&gt;
&lt;p&gt;Richardson çš„å…¬å‘Šä¸ä»…æ˜¯å‘Šåˆ«ï¼Œä¹Ÿæ˜¯å¯¹ç§‘æŠ€åˆ›ä¸šçš„æš‚æ—¶æ€§æé†’ã€‚ä»–å¯¹å…¬å¸çš„ç»“å±€æ„Ÿåˆ°é—æ†¾ï¼Œä½†ä¹ŸæŒ‡å‡ºäº†è¡Œä¸šé¢ä¸´çš„æ›´å¹¿æ³›æŒ‘æˆ˜ã€‚è¿™æ˜¯è®¸å¤šåˆåˆ›å…¬å¸éƒ½èƒ½å¤Ÿå…±é¸£çš„æƒ…æ„Ÿï¼Œçªæ˜¾äº†å³ä½¿æ˜¯æœ€æœ‰å‰æ™¯çš„ä¼ä¸šåœ¨é¢å¯¹è´¢åŠ¡ä¸ç¨³å®šå’Œå¸‚åœºé¥±å’Œçš„ç°å®æ—¶ä¹Ÿå¯èƒ½å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼ŒWeaveworks çš„é—äº§å°†æ°¸å­˜ã€‚å…¬å¸å¯¹å¼€æºç¤¾åŒºçš„è´¡çŒ®ï¼Œç‰¹åˆ«æ˜¯é€šè¿‡&lt;a href=&#34;https://www.cncf.io/projects/flux/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CNCF Flux&lt;/a&gt;ï¼Œè¯æ˜äº†å…¶è‡´åŠ›äºæ¨åŠ¨äº‘åŸç”ŸæŠ€æœ¯å‘å±•çš„æ‰¿è¯ºã€‚Richardson å¸Œæœ› Flux èƒ½å¤Ÿç»§ç»­ä¸‹å»ã€‚&lt;/p&gt;
&lt;p&gt;â€œæ•…äº‹å¹¶æ²¡æœ‰å°±æ­¤ç»“æŸ â€”â€” æˆ‘ä»¬çš„å¼€æºè½¯ä»¶è¢«å¹¿æ³›ä½¿ç”¨ã€‚æˆ‘æ­£åœ¨ä¸å‡ ä¸ªå¤§å‹ç»„ç»‡åˆä½œï¼Œç¡®ä¿ CNCF Flux å¤„äºæœ€å¥åº·çš„çŠ¶æ€ï¼Œâ€Richardson å†™é“ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬å›é¡¾ Weaveworks çš„å…³é—­æ—¶ï¼Œå¾ˆæ˜æ˜¾ï¼Œç§‘æŠ€ç”Ÿæ€ç³»ç»Ÿæ—¢æ˜¯æœºé‡çš„ä¹åœŸï¼Œä¹Ÿæ˜¯è€åŠ›çš„æˆ˜åœºã€‚è¯¥å…¬å¸çš„æ•…äº‹æ˜¯å¯¹é©±åŠ¨ç§‘æŠ€è¡Œä¸šå‘å‰å‘å±•çš„åˆ›ä¸šç²¾ç¥çš„æ„Ÿäººæé†’ï¼Œå³ä½¿åœ¨é¢å¯¹å˜é©çš„å¿…ç„¶æ€§å’Œå•†ä¸šè¿è¥çš„ä¸¥é…·ç°å®æ—¶ä¹Ÿæ˜¯å¦‚æ­¤ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å Serverless æ—¶ä»£çš„äº‘è®¡ç®—è¶‹åŠ¿åˆ†æ</title>
      <link>https://cloudnativecn.com/blog/cloud-computing-post-serverless-trends/</link>
      <pubDate>Fri, 02 Feb 2024 13:05:42 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/cloud-computing-post-serverless-trends/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://www.infoq.com/articles/cloud-computing-post-serverless-trends/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cloud-Computing in the Post-Serverless Era: Current Trends and beyond&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡æ–‡ç« ä¸»è¦è®¨è®ºäº†æœªæ¥äº‘è®¡ç®—é¢†åŸŸçš„ä¸‰å¤§è¶‹åŠ¿ï¼šä»åŸºæœ¬å…ƒç´ åˆ°äº‘æ„ä»¶ä½œä¸ºæœåŠ¡çš„è½¬å˜ã€ä»è¶…å¤§è§„æ¨¡åˆ°è¶…ä¸“ä¸šåŒ–çš„è½¬å˜ã€ä»¥åŠä»åŸºç¡€è®¾æ–½åˆ°ç»„åˆå¼ç¼–ç¨‹ä½œä¸ºæœåŠ¡çš„è½¬å˜ã€‚ä½œè€…æŒ‡å‡ºï¼Œæœªæ¥çš„äº‘æœåŠ¡å°†æ›´åŠ é›†æˆç¼–ç¨‹æ„ä»¶ï¼Œä½¿å¾—å¼€å‘äººå‘˜èƒ½å¤Ÿæ— ç¼åœ°ä½¿ç”¨ä»–ä»¬å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€æ¥ç»„åˆåº”ç”¨ç¨‹åºã€‚æ–‡ç« å¼ºè°ƒäº†è¿™äº›è¶‹åŠ¿å¯¹å¼€å‘äººå‘˜å’Œè¿è¥å›¢é˜Ÿçš„å½±å“ï¼Œå¹¶æŒ‡å‡ºäº†è¿™äº›å˜åŒ–å°†å¦‚ä½•å¡‘é€ æœªæ¥ä»¥å¼€å‘äººå‘˜ä¸ºä¸­å¿ƒçš„äº‘æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸»è¦è§‚ç‚¹&#34;&gt;ä¸»è¦è§‚ç‚¹&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;æ— æœåŠ¡å™¨è®¡ç®—æ­£åœ¨è¶…è¶Šå…¶æœ€åˆçš„èŒƒå›´ï¼Œå‡½æ•°éƒ¨åˆ†æˆ–å®Œå…¨è¢«å¤šæ‰å¤šè‰ºçš„äº‘æ„ä»¶å–ä»£ï¼Œæ ‡å¿—ç€äº‘æ¶æ„çš„æ–°æ—¶ä»£ã€‚&lt;/li&gt;
&lt;li&gt;äº‘å¸‚åœºæ­£æœç€é«˜åº¦ä¸“ä¸šåŒ–çš„å‚ç›´å¤šäº‘æœåŠ¡è½¬å˜ï¼Œæä¾›ç‹¬ç‰¹çš„ã€ç²¾ç»†ç²’åº¦çš„åŠŸèƒ½ï¼Œä¸“é—¨æ»¡è¶³å¼€å‘äººå‘˜çš„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;å³å°†æ¨å‡ºçš„äº‘æœåŠ¡å°†å……æ»¡æ„ä»¶ï¼Œæ”¹å˜å¼€å‘äººå‘˜å¤„ç†è·¯ç”±ã€è¿‡æ»¤å’Œäº‹ä»¶è§¦å‘ç­‰ä»»åŠ¡çš„æ–¹å¼ï¼Œä½¿å…¶æ›´é«˜æ•ˆå’Œç”¨æˆ·å‹å¥½ã€‚&lt;/li&gt;
&lt;li&gt;ä»åŸºç¡€è®¾æ–½å³ä»£ç è½¬å‘æ„ä»¶å³ä»£ç çš„è¶‹åŠ¿æ˜¾è‘—ï¼Œå¼€å‘äººå‘˜ä½¿ç”¨ç†Ÿæ‚‰çš„ç¼–ç¨‹è¯­è¨€è¿›è¡Œæ›´ç›´è§‚çš„äº‘æœåŠ¡é…ç½®ã€‚&lt;/li&gt;
&lt;li&gt;å¾®æœåŠ¡æ­£åœ¨äº‘æ™¯è§‚ä¸­é‡æ–°å®šä¹‰ï¼Œä»ä»…ä»…æ˜¯æ¶æ„è¾¹ç•Œæ¼”å˜ä¸ºç»„ç»‡è¾¹ç•Œï¼Œåœ¨ç»Ÿä¸€çš„å¼€å‘è€…è¯­è¨€ä¸‹æ•´åˆå„ç§äº‘æ„ä»¶ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AWS Lambda å°†åœ¨ä»Šå¹´è¿æ¥å…¶ 10 å‘¨å¹´ä¹‹é™…ï¼Œæ— æœåŠ¡å™¨è®¡ç®—ä¸å†ä»…é™äºâ€œå‡½æ•°å³æœåŠ¡â€ï¼ˆFaaSï¼‰ã€‚ä»Šå¤©ï¼Œæ— æœåŠ¡å™¨æè¿°äº†ä¸éœ€è¦æ‰‹åŠ¨é…ç½®ã€æä¾›æŒ‰éœ€è‡ªåŠ¨æ‰©å±•å’Œä½¿ç”¨åŸºäºæ¶ˆè€—çš„å®šä»·çš„äº‘æœåŠ¡ã€‚è¿™ä¸€è½¬å˜æ˜¯äº‘è®¡ç®—ä¸­æ›´å¹¿æ³›æ¼”å˜çš„ä¸€éƒ¨åˆ†ï¼Œæ— æœåŠ¡å™¨æŠ€æœ¯ä¸æ–­å˜é©ã€‚æœ¬æ–‡å…³æ³¨æ— æœåŠ¡å™¨ä¹‹åçš„æœªæ¥ï¼Œæ¢è®¨äº‘æ™¯è§‚å°†å¦‚ä½•å‘å±•è¶…è¶Šå½“å‰çš„è¶…çº§æ‰©å±•æ¨¡å‹ä»¥åŠå¯¹å¼€å‘äººå‘˜å’Œè¿è¥å›¢é˜Ÿçš„å½±å“ã€‚æˆ‘å°†æ¢è®¨å¡‘é€ è¿™ä¸€æ¼”å˜çš„å‰ä¸‰å¤§è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»åŸºæœ¬æ„ä»¶åˆ°æ„ä»¶å³æœåŠ¡&#34;&gt;ä»åŸºæœ¬æ„ä»¶åˆ°æ„ä»¶å³æœåŠ¡&lt;/h2&gt;
&lt;p&gt;åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œâ€œæ¨¡å—â€æˆ–â€œç»„ä»¶â€é€šå¸¸æŒ‡çš„æ˜¯æ‰§è¡Œä¸€ç»„ååŒæ“ä½œçš„è‡ªåŒ…å«è½¯ä»¶å•å…ƒã€‚è¿™ä¸ªæ¦‚å¿µä¸é€šå¸¸åœ¨é•¿æ—¶é—´è¿è¡Œçš„è®¡ç®—æœåŠ¡ï¼ˆå¦‚è™šæ‹Ÿæœºï¼ˆVMï¼‰æˆ–å®¹å™¨æœåŠ¡ï¼‰ä¸Šè¿è¡Œçš„å¾®æœåŠ¡æ¶æ„ç›¸å¯¹åº”ã€‚AWS EC2 æ˜¯ç¬¬ä¸€ä¸ªå¹¿æ³›å¯è®¿é—®çš„äº‘è®¡ç®—æœåŠ¡ä¹‹ä¸€ï¼Œæä¾›å¯æ‰©å±•çš„ VMã€‚å¼•å…¥è¿™æ ·çš„å¯æ‰©å±•ã€å¯è®¿é—®çš„äº‘èµ„æºä¸ºå¾®æœåŠ¡æ¶æ„å˜å¾—å®ç”¨å’Œæ™®åŠæä¾›äº†åŸºç¡€ã€‚è¿™ç§è½¬å˜å¯¼è‡´å°†åºå¤§çš„åº”ç”¨ç¨‹åºåˆ†è§£æˆå¯ç‹¬ç«‹éƒ¨ç½²çš„å¾®æœåŠ¡å•å…ƒã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬ç»§ç»­ä½¿ç”¨è½¯ä»¶å•å…ƒçš„è¿™ä¸ªç±»æ¯”ã€‚å‡½æ•°æ˜¯ä¸€ä¸ªä»£ç å—ï¼Œå°è£…äº†ä¸€ç³»åˆ—å…·æœ‰å®šä¹‰çš„è¾“å…¥å’Œè¾“å‡ºçš„å•ä¸€ä»»åŠ¡çš„è¯­å¥åºåˆ—ã€‚è¿™ä¸ªä»£ç å•å…ƒä¸ FaaS æ‰§è¡Œæ¨¡å‹éå¸¸åŒ¹é…ã€‚åœ¨äº‹ä»¶è§¦å‘æ— éœ€ç®¡ç†åŸºç¡€æ¶æ„çš„æƒ…å†µä¸‹æ‰§è¡Œä»£ç çš„ FaaS æ¦‚å¿µåœ¨ AWS Lambda ä¹‹å‰å·²ç»å­˜åœ¨ï¼Œä½†ç¼ºä¹å¹¿æ³›çš„å®æ–½å’Œè®¤å¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ AWS Lambda å°† FaaS å¸¦å…¥ä¸»æµä¹‹å‰ï¼Œå·²ç»æœ‰äº†æ‰§è¡Œä»£ç ä»¥å“åº”äº‹ä»¶è€Œæ— éœ€ç®¡ç†åŸºç¡€æ¶æ„çš„ FaaS æ¦‚å¿µï¼Œå¦‚ Google App Engineã€Azure WebJobsã€IronWorker å’Œ AWS Elastic Beanstalk ç­‰æœåŠ¡ã€‚Lambda ä½œä¸º FaaS çš„é¦–ä¸ªé‡å¤§å•†ä¸šå®æ–½ï¼Œé€šè¿‡ç®€åŒ–å¼€å‘äººå‘˜çš„éƒ¨ç½²æµç¨‹ï¼Œæˆä¸ºå…¶æµè¡Œçš„å‚¬åŒ–å‰‚ã€‚è¿™ä¸€è¿›æ­¥å¯¼è‡´å°†å¾®æœåŠ¡è½¬å˜ä¸ºæ›´å°çš„ã€å¯å•ç‹¬æ‰©å±•çš„ã€äº‹ä»¶é©±åŠ¨çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å‘ä½œä¸ºæœåŠ¡æä¾›çš„æ›´å°è½¯ä»¶å•å…ƒçš„æ¼”è¿›ä¸­ï¼Œäººä»¬å¯èƒ½ä¼šæƒ³çŸ¥é“æˆ‘ä»¬æ˜¯å¦ä¼šçœ‹åˆ°åŸºæœ¬çš„ç¼–ç¨‹å…ƒç´ ï¼Œå¦‚è¡¨è¾¾å¼æˆ–è¯­å¥ä½œä¸ºæœåŠ¡ï¼ˆä¾‹å¦‚ int x = a + b;ï¼‰ã€‚ç„¶è€Œï¼Œæ¼”è¿›çš„æ–¹å‘ä¸æ­¤ä¸åŒã€‚ç›¸åï¼Œæˆ‘ä»¬æ­£åœ¨è§è¯å‡½æ•°çš„æœ€å°åŒ–å’Œæœ€ç»ˆç”±å¯é…ç½®çš„äº‘æ„ä»¶æ›¿ä»£ã€‚åœ¨è½¯ä»¶å¼€å‘ä¸­ï¼Œæ„ä»¶æ¶µç›–äº†è¯¸å¦‚æ¡ä»¶è¯­å¥ï¼ˆif-elseã€switch è¯­å¥ï¼‰ã€å¾ªç¯ï¼ˆforã€whileï¼‰ã€å¼‚å¸¸å¤„ç†ï¼ˆtry-catch-finallyï¼‰æˆ–ç”¨æˆ·å®šä¹‰çš„æ•°æ®ç»“æ„ç­‰å…ƒç´ ï¼Œè¿™äº›å…ƒç´ åœ¨æ§åˆ¶ç¨‹åºæµç¨‹æˆ–ç®¡ç†å¤æ‚æ•°æ®ç±»å‹æ–¹é¢å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚åœ¨äº‘æœåŠ¡ä¸­ï¼Œæ„ä»¶ä¸èƒ½å¤Ÿç»„æˆåˆ†å¸ƒå¼åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ç›¸ä¸€è‡´ï¼Œå®ƒä»¬äº’ç›¸é“¾æ¥è½¯ä»¶æ¨¡å—ï¼Œå¦‚å¾®æœåŠ¡å’Œå‡½æ•°ï¼Œå¹¶ç®¡ç†å®ƒä»¬ä¹‹é—´çš„æ•°æ®æµã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/cloud-computing-post-serverless-trends/f1_hu15976517905942053657.webp 400w,
               /blog/cloud-computing-post-serverless-trends/f1_hu10806693295599311214.webp 760w,
               /blog/cloud-computing-post-serverless-trends/f1_hu5889649196657159126.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cloud-computing-post-serverless-trends/f1_hu15976517905942053657.webp&#34;
               width=&#34;760&#34;
               height=&#34;296&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;äº‘æ„ä»¶å–ä»£å‡½æ•°ï¼Œå–ä»£å¾®æœåŠ¡ï¼Œå–ä»£åºå¤§çš„åº”ç”¨ç¨‹åº&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä»¥å‰å¯èƒ½ä½¿ç”¨å‡½æ•°æ¥è¿‡æ»¤ã€è·¯ç”±ã€æ‰¹é‡å¤„ç†ã€æ‹†åˆ†äº‹ä»¶ï¼Œæˆ–è°ƒç”¨å¦ä¸€ä¸ªäº‘æœåŠ¡æˆ–å‡½æ•°ï¼Œä½†ç°åœ¨è¿™äº›æ“ä½œä»¥åŠæ›´å¤šæ“ä½œéƒ½å¯ä»¥åœ¨ä½ çš„å‡½æ•°ä¸­ä½¿ç”¨æ›´å°‘çš„ä»£ç ï¼Œæˆ–è€…åœ¨è®¸å¤šæƒ…å†µä¸‹æ ¹æœ¬ä¸éœ€è¦å‡½æ•°ä»£ç ã€‚å®ƒä»¬å¯ä»¥è¢«å¯é…ç½®çš„äº‘æ„ä»¶æ›¿ä»£ï¼Œè¿™äº›æ„ä»¶æ˜¯äº‘æœåŠ¡çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬çœ‹ä¸€äº› AWS çš„å…·ä½“ç¤ºä¾‹ï¼Œä»¥æ¼”ç¤ºä» Lambda å‡½æ•°ä»£ç åˆ°äº‘æ„ä»¶çš„è¿‡æ¸¡ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚è·¯ç”±&lt;/strong&gt; - ä¸å†ä½¿ç”¨ Lambda æ¥è§£æè¯·æ±‚å¹¶å°†å…¶è·¯ç”±åˆ°æ­£ç¡®çš„åç«¯ç«¯ç‚¹ï¼Œè€Œæ˜¯å¯ä»¥ä½¿ç”¨&lt;a href=&#34;https://docs.aws.amazon.com/apigateway/latest/developerguide/http-api-develop-routes.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;API Gateway è·¯ç”±&lt;/a&gt;è¿›è¡Œè·¯ç”±ã€‚è€Œä¸”ï¼ŒAPI Gateway è¿˜å¯ä»¥ä¸å…¶ä»– AWS æœåŠ¡é›†æˆï¼Œç›´æ¥è°ƒç”¨å®ƒä»¬ï¼Œæ¶ˆé™¤äº†å¯¹å‡½æ•°çš„éœ€æ±‚ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è¯·æ±‚éªŒè¯&lt;/strong&gt; - API Gateway å¯ä»¥ä½¿ç”¨ OpenAPI éªŒè¯è¯·æ±‚çš„ä¸»ä½“ã€æŸ¥è¯¢å­—ç¬¦ä¸²å‚æ•°å’Œæ ‡å¤´ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®è½¬æ¢&lt;/strong&gt; - API Gateway å¯ä»¥ä½¿ç”¨ Apache Velocity æ¨¡æ¿æ¥&lt;a href=&#34;https://docs.aws.amazon.com/apigateway/latest/developerguide/models-mappings.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è½¬æ¢&lt;/a&gt;è¯·æ±‚å’Œå“åº”æ•°æ®ï¼Œä»¥è¦†ç›–æœ‰æ•ˆè½½è·ã€å‚æ•°ã€æ ‡å¤´å’ŒçŠ¶æ€ä»£ç ï¼Œè€Œæ— éœ€ä½¿ç”¨ Lambdaã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµå¼æ•°æ®åº“æ›´æ”¹&lt;/strong&gt; - &lt;a href=&#34;https://aws.amazon.com/blogs/database/dynamodb-streams-use-cases-and-design-patterns/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DynamoDB Streams&lt;/a&gt;ä¼šå‘å‡ºæ‰€æœ‰æ•°æ®æ›´æ”¹ã€‚è¿™å¯¹äºä»»ä½•æ•°æ®å­˜å‚¨æ¥è¯´éƒ½æ˜¯ä¸€ä¸ªå¿…è¦çš„æ„ä»¶ï¼Œæ¶ˆé™¤äº†åº”ç”¨ç¨‹åºä»£ç çš„åŒé‡å†™å…¥å’Œä»»ä½•æ•°æ®è½®è¯¢ä»£ç ï¼Œé€šè¿‡&lt;a href=&#34;https://www.infoq.com/articles/microservices-inside-out/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å°†å¾®æœåŠ¡å†…å¤–é¢ å€’&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶è§¦å‘&lt;/strong&gt; - &lt;a href=&#34;https://docs.aws.amazon.com/lambda/latest/dg/invocation-eventsourcemapping.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS äº‹ä»¶æºæ˜ å°„&lt;/a&gt;å…è®¸é€šè¿‡ä»äº‹ä»¶æºè¯»å–å¹¶è°ƒç”¨ Lambda å‡½æ•°æ¥è§¦å‘ Lambdaã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶è¿‡æ»¤&lt;/strong&gt; - &lt;a href=&#34;https://docs.aws.amazon.com/lambda/latest/dg/invocation-eventfiltering.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‹ä»¶æºæ˜ å°„&lt;/a&gt;å¯ä»¥æ‰§è¡Œäº‹ä»¶è¿‡æ»¤ï¼Œä»¥æ§åˆ¶ä»æµæˆ–é˜Ÿåˆ—ä¸­è°ƒç”¨ Lambda å‡½æ•°çš„å“ªäº›è®°å½•ã€‚è¿™æ¶ˆé™¤äº†åœ¨å‡½æ•°å†…ç¼–å†™è¿‡æ»¤é€»è¾‘çš„éœ€è¦ï¼Œå¹¶å¤§å¤§å‡å°äº†å‡½æ•°çš„å¤§å°å’Œæˆæœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶æ‰¹å¤„ç†&lt;/strong&gt; - ç±»ä¼¼åœ°ï¼Œäº‹ä»¶æºæ˜ å°„ä¼šå°†è®°å½•æ‰¹å¤„ç†æˆå•ä¸ªæœ‰æ•ˆè½½è·ï¼Œç„¶åå‘é€ç»™ä½ çš„å‡½æ•°ã€‚ä¸éœ€è¦æ‰‹åŠ¨å¾ªç¯èšåˆäº‹ä»¶æˆ–åœ¨å¤„ç†ä¹‹å‰æ‹†åˆ†å®ƒä»¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶è½¬æ¢&lt;/strong&gt; - &lt;a href=&#34;https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-pipes-input-transformation.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;EventBridge Pipes&lt;/a&gt;å¯ä»¥åœ¨å°†æ•°æ®å‘é€åˆ°ç›®æ ‡ä¹‹å‰ä½¿ç”¨ JSON è·¯å¾„è¯­æ³•æ¥è½¬æ¢æºæ•°æ®ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶ä¸°å¯ŒåŒ–&lt;/strong&gt; - EventBridge Pipes è¿˜å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªç«¯ç‚¹æ¥ä¸°å¯Œè¯·æ±‚ï¼Œç„¶åè¿›ä¸€æ­¥å¤„ç†å®ƒã€‚è¿™æä¾›äº†å¯ä»¥å®Œå…¨å£°æ˜æ€§ä½¿ç”¨çš„&lt;a href=&#34;https://www.enterpriseintegrationpatterns.com/patterns/messaging/DataEnricher.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†…å®¹ä¸°å¯Œå™¨æ¨¡å¼&lt;/a&gt;çš„å®ç°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶è·¯ç”±&lt;/strong&gt; - ä¸è¯·æ±‚è·¯ç”±ç±»ä¼¼ï¼ŒEventBridge &lt;a href=&#34;https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-rules.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è§„åˆ™&lt;/a&gt;å¯ä»¥æ‰§è¡Œäº‹ä»¶è·¯ç”±ï¼Œå…è®¸ä½ ä»åº”ç”¨ç¨‹åºä»£ç ä¸­å¸è½½æ­¤è´£ä»»ï¼Œå¹¶æ¶ˆé™¤ Lambda å‡½æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åŸºäºç»“æœçš„è·¯ç”±&lt;/strong&gt; - Lambda &lt;a href=&#34;https://aws.amazon.com/blogs/compute/introducing-aws-lambda-destinations/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Destination&lt;/a&gt;å…è®¸å¼‚æ­¥è°ƒç”¨å°†æ‰§è¡Œç»“æœè·¯ç”±åˆ°å…¶ä»– AWS æœåŠ¡ï¼Œä»¥é…ç½®ä»£ç æ›¿æ¢ Lambda è°ƒç”¨ä»£ç ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è°ƒç”¨å…¶ä»–æœåŠ¡&lt;/strong&gt; - &lt;a href=&#34;https://docs.aws.amazon.com/step-functions/latest/dg/connect-to-services.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;StepFunction&lt;/a&gt; ä»»åŠ¡ä¸éœ€è¦ Lambda å‡½æ•°æ¥è°ƒç”¨å…¶ä»–æœåŠ¡æˆ–å¤–éƒ¨ HTTP ç«¯ç‚¹ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼ŒStepFunction ä»»åŠ¡å®šä¹‰å¯ä»¥æ‰§è¡Œä¾‹å¦‚&lt;a href=&#34;https://aws.amazon.com/blogs/aws/external-endpoints-and-testing-of-task-states-now-available-in-aws-step-functions/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ‰§è¡Œ HTTP è°ƒç”¨&lt;/a&gt;æˆ–è¯»å–ã€æ›´æ–°å’Œåˆ é™¤æ•°æ®åº“è®°å½•ç­‰æ“ä½œï¼Œè€Œæ— éœ€ Lambda å‡½æ•°ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™åªæ˜¯åº”ç”¨ç¨‹åºä»£ç æ„ä»¶å˜æˆæ— æœåŠ¡å™¨äº‘æ„ä»¶çš„ä¸€äº›ç¤ºä¾‹ã€‚ä½ å¯ä»¥é€šè¿‡é…ç½®éªŒè¯è¾“å…¥å€¼ï¼Œè€Œä¸æ˜¯åœ¨å‡½æ•°ä¸­ä½¿ç”¨ if-else é€»è¾‘ã€‚ä½ å¯ä»¥åœ¨å‡½æ•°ä¹‹å¤–å£°æ˜æ€§åœ°å®šä¹‰è·¯ç”±é€»è¾‘ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ case æˆ– switch è¯­å¥ä»å‡½æ•°å†…è°ƒç”¨å…¶ä»–ä»£ç ã€‚äº‹ä»¶å¯ä»¥åœ¨æ•°æ®æ›´æ”¹æ—¶è§¦å‘ï¼Œæ‰¹å¤„ç†æˆ–æ‹†åˆ†ï¼Œæ— éœ€é‡å¤æ„é€ ï¼Œä¾‹å¦‚ for æˆ– while å¾ªç¯ã€‚&lt;/p&gt;
&lt;p&gt;äº‹ä»¶å¯ä»¥åœ¨æ²¡æœ‰å‡½æ•°çš„æƒ…å†µä¸‹è¿›è¡ŒéªŒè¯ã€è½¬æ¢ã€æ‰¹å¤„ç†ã€è·¯ç”±ã€è¿‡æ»¤å’Œä¸°å¯Œã€‚æ•…éšœå¯ä»¥åœ¨æ²¡æœ‰ try-catch ä»£ç çš„æƒ…å†µä¸‹è¿›è¡Œå¤„ç†å’Œå®šå‘åˆ° &lt;a href=&#34;https://aws.amazon.com/about-aws/whats-new/2023/06/amazon-sqs-dead-letter-queue-redrive-aws-sdk-cli/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DLQs å’Œå›é€€&lt;/a&gt;ï¼Œè€ŒæˆåŠŸå®Œæˆå¯ä»¥å®šå‘åˆ°å…¶ä»–å‡½æ•°å’ŒæœåŠ¡ç«¯ç‚¹ã€‚å°†è¿™äº›æ„ä»¶ä»åº”ç”¨ç¨‹åºä»£ç ç§»åˆ°æ„ä»¶é…ç½®ä¸­å‡å°‘äº†åº”ç”¨ç¨‹åºä»£ç çš„å¤§å°ï¼Œæˆ–è€…å°†å…¶ç§»é™¤ï¼Œæ¶ˆé™¤äº†å®‰å…¨ä¿®è¡¥å’Œä»»ä½•ç»´æŠ¤çš„éœ€è¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç¼–ç¨‹ä¸­ï¼ŒåŸè¯­å’Œæ„ä»¶å…·æœ‰ä¸åŒçš„å«ä¹‰å’Œä½œç”¨ã€‚åŸè¯­æ˜¯ç¼–ç¨‹è¯­è¨€å›ºæœ‰çš„åŸºæœ¬æ•°æ®ç±»å‹ã€‚å®ƒåŒ…å«äº†åŸºæœ¬å€¼ï¼Œä¾‹å¦‚æ•´æ•°ã€æµ®ç‚¹æ•°ã€å¸ƒå°”å€¼æˆ–å­—ç¬¦ï¼Œä¸åŒ…å«å…¶ä»–ç±»å‹ã€‚ä¸æ­¤æ¦‚å¿µç±»ä¼¼ï¼Œäº‘ - å°±åƒä¸€ä¸ªå·¨å¤§çš„ç¼–ç¨‹è¿è¡Œæ—¶ - æ­£åœ¨ä»åŸºç¡€è®¾æ–½åŸè¯­ï¼ˆå¦‚ç½‘ç»œè´Ÿè½½å‡è¡¡å™¨ã€è™šæ‹Ÿæœºã€æ–‡ä»¶å­˜å‚¨å’Œæ•°æ®åº“ï¼‰è¿›åŒ–ä¸ºæ›´ç²¾è‡´å’Œå¯é…ç½®çš„äº‘æ„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ç¼–ç¨‹æ„ä»¶ç±»ä¼¼ï¼Œè¿™äº›äº‘æ„ä»¶ç¼–æ’åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºäº¤äº’å¹¶ç®¡ç†å¤æ‚çš„æ•°æ®æµã€‚ç„¶è€Œï¼Œè¿™äº›æ„ä»¶ä¸æ˜¯å­¤ç«‹çš„äº‘æœåŠ¡ï¼›æ²¡æœ‰ç‹¬ç«‹çš„â€œè¿‡æ»¤å™¨æœåŠ¡â€æˆ–â€œäº‹ä»¶å‘å°„å™¨æœåŠ¡â€ã€‚æ²¡æœ‰â€œæ„ä»¶ä½œä¸ºæœåŠ¡â€ï¼Œä½†å®ƒä»¬è¶Šæ¥è¶Šæˆä¸ºæ ¸å¿ƒäº‘åŸè¯­ï¼ˆå¦‚ç½‘å…³ã€æ•°æ®å­˜å‚¨ã€æ¶ˆæ¯ä»£ç†å’Œå‡½æ•°è¿è¡Œæ—¶ï¼‰çš„é‡è¦åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ¼”è¿›é™ä½äº†åº”ç”¨ç¨‹åºä»£ç çš„å¤æ‚æ€§ï¼Œå¹¶åœ¨è®¸å¤šæƒ…å†µä¸‹æ¶ˆé™¤äº†è‡ªå®šä¹‰å‡½æ•°çš„éœ€æ±‚ã€‚è¿™ä» FaaS åˆ° NoFaaSï¼ˆæ— éº»çƒ¦ï¼Œæ„å‘³ç€ç®€å•ï¼‰çš„è½¬å˜åˆšåˆšå¼€å§‹ï¼Œæœ‰æ·±å…¥çš„&lt;a href=&#34;https://www.youtube.com/watch?v=sdCA0Y7QDrM&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¼”è®²&lt;/a&gt;å’Œ GitHub ä¸Šçš„ä»£ç ç¤ºä¾‹ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘å°†æ¢è®¨å‚ç›´å¤šäº‘æœåŠ¡ä¸­æ„ä»¶ä¸°å¯Œçš„äº‘æœåŠ¡çš„å‡ºç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»è¶…å¤§è§„æ¨¡åˆ°è¶…ä¸“ä¸šåŒ–&#34;&gt;ä»è¶…å¤§è§„æ¨¡åˆ°è¶…ä¸“ä¸šåŒ–&lt;/h2&gt;
&lt;p&gt;åœ¨&lt;a href=&#34;https://www.diagrid.io/blog/evolution-of-cloud-computing&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ— æœåŠ¡å™¨åäº‘æ—¶ä»£&lt;/a&gt;ï¼Œä»…æä¾›é«˜åº¦å¯æ‰©å±•çš„äº‘åŸè¯­ï¼ˆå¦‚å®¹å™¨å’Œå‡½æ•°çš„è®¡ç®—ï¼Œæˆ–è¯¸å¦‚é”®/å€¼å­˜å‚¨ã€äº‹ä»¶å­˜å‚¨ã€å…³ç³»æ•°æ®åº“æˆ–ç½‘ç»œåŸè¯­ç­‰å­˜å‚¨æœåŠ¡ï¼‰å·²ç»ä¸å†è¶³å¤Ÿã€‚æ— æœåŠ¡å™¨åäº‘æœåŠ¡å¿…é¡»å¯Œå«å¼€å‘è€…æ„ä»¶ï¼Œå¹¶å¸è½½åº”ç”¨ç¨‹åºçš„å¤§éƒ¨åˆ†åŸºç¡€è®¾æ–½ã€‚è¿™è¶…è¶Šäº†ä¸ºå¹¿æ³›ç”¨æˆ·ç¾¤ä½“è¿›è¡Œé€šç”¨äº‘æœåŠ¡çš„è¶…å¤§è§„æ¨¡ï¼›å®ƒæ¶‰åŠæ·±åº¦ä¸“ä¸šåŒ–ï¼Œå¹¶å‘æ›´å…·è¦æ±‚çš„ç”¨æˆ·å…¬å¼€é«˜çº§æ„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;åƒ AWSã€Azureã€GCP ç­‰è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†ï¼Œå‡­å€Ÿå…¶å¹¿æ³›çš„æœåŠ¡èŒƒå›´å’Œåºå¤§çš„ç”¨æˆ·ç¾¤ä½“ï¼Œå¾ˆå¥½åœ°æŠŠæ¡äº†æ–°ç”¨æˆ·éœ€æ±‚å’Œæ„ä»¶ã€‚ç„¶è€Œï¼Œæä¾›è¿™äº›æ›´ç»†ç²’åº¦çš„å¼€å‘è€…æ„ä»¶ä¼šå¢åŠ å¤æ‚æ€§ã€‚æ¯ä¸ªæœåŠ¡ä¸­çš„æ¯ä¸ªæ–°æ„ä»¶éƒ½éœ€è¦æ·±å…¥å­¦ä¹ æ›²çº¿ä»¥äº†è§£å…¶æœ‰æ•ˆåˆ©ç”¨çš„ç‰¹å®šå†…å®¹ã€‚å› æ­¤ï¼Œåœ¨æ— æœåŠ¡å™¨åæ—¶ä»£ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å‚ç›´å¤šäº‘æœåŠ¡çš„å…´èµ·ï¼Œè¿™äº›æœåŠ¡åœ¨ä¸€ä¸ªé¢†åŸŸè¡¨ç°å‡ºè‰²ã€‚è¿™ä»£è¡¨äº†äº‘æœåŠ¡çš„è¶…ä¸“ä¸šåŒ–ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ Confluent Cloud ä¸ºä¾‹ã€‚è™½ç„¶æ‰€æœ‰ä¸»è¦çš„è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†ï¼ˆAWSã€Azureã€GCP ç­‰ï¼‰éƒ½æä¾› Kafka æœåŠ¡ï¼Œä½†æ²¡æœ‰ä¸€å®¶èƒ½å¤Ÿä¸ Confluent Cloud æä¾›çš„å¼€å‘è€…ä½“éªŒå’Œæ„ä»¶ç›¸åŒ¹é…ã€‚é€šè¿‡å…¶ Kafka ä»£ç†ã€ä¼—å¤šçš„ Kafka è¿æ¥å™¨ã€é›†æˆçš„æ¨¡å¼æ³¨å†Œè¡¨ã€Flink å¤„ç†ã€æ•°æ®æ²»ç†ã€è·Ÿè¸ªå’Œæ¶ˆæ¯æµè§ˆå™¨ï¼ŒConfluent Cloud æä¾›äº†æœ€ä¸°å¯Œå’Œä¸“ä¸šåŒ–çš„ Kafka æœåŠ¡ï¼Œè¶…è¶Šäº†è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†çš„æä¾›ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§è¶‹åŠ¿å¹¶ä¸å­¤ç«‹ï¼›è®¸å¤šä¾‹å­åŒ…æ‹¬ MongoDB Atlas ä¸ DocumentDBã€GitLab ä¸ CodeCommitã€DataBricks ä¸ EMRã€RedisLabs ä¸ ElasticCache ç­‰ã€‚é™¤äº†å·²å»ºç«‹çš„äº‘å…¬å¸å¤–ï¼Œæ–°ä¸€æ³¢åˆåˆ›å…¬å¸æ­£åœ¨å´­éœ²å¤´è§’ï¼Œä¸“æ³¨äºä¸€ä¸ªå¤šäº‘åŸè¯­ï¼ˆå¦‚ä¸“ä¸šåŒ–çš„è®¡ç®—ã€å­˜å‚¨ã€ç½‘ç»œã€æ„ä»¶æµæ°´çº¿ã€ç›‘æ§ç­‰ï¼‰å¹¶é€šè¿‡å¼€å‘è€…æ„ä»¶æ¥ä¸°å¯Œå®ƒï¼Œä»¥æä¾›ç‹¬ç‰¹çš„ä»·å€¼ä¸»å¼ ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä¸“é—¨åŒ–äºå•ä¸€å¼€æºæŠ€æœ¯çš„äº‘æœåŠ¡ï¼Œæ—¨åœ¨æä¾›ä¸°å¯Œçš„æ„ä»¶ä½“éªŒï¼Œå¹¶å¸å¼•ç”¨æˆ·è¿œç¦»è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://vercel.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Vercel&lt;/a&gt;ï¼šä»¥å…¶å‡ºè‰²çš„å‰ç«¯å¼€å‘è€…ä½“éªŒè€Œé—»åï¼Œç®€åŒ–äº† Web åº”ç”¨ç¨‹åºçš„éƒ¨ç½²ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://railway.app/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Railway&lt;/a&gt;ï¼šä»¥å¢å¼ºåç«¯å¼€å‘è€…ä½“éªŒä»¥åŠç®€å•çš„éƒ¨ç½²å’Œæ‰©å±•ç®¡ç†è€Œè‘—åã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://supabase.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Supabase&lt;/a&gt;ï¼šæ˜¯ Firebase çš„å¼€æºæ›¿ä»£æ–¹æ¡ˆï¼Œæä¾›æ›´çµæ´»çš„ç›¸ä¼¼åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://fauna.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Fauna&lt;/a&gt;ï¼šä»¥å£°æ˜æ€§å…³ç³»æŸ¥è¯¢å’Œå¼ºä¸€è‡´æ€§äº‹åŠ¡ä¸­çš„åŠŸèƒ½ä¸šåŠ¡é€»è¾‘è€Œé—»åçš„æ— æœåŠ¡å™¨æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://neon.tech/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Neon&lt;/a&gt;ï¼šæä¾›æœ€ç®€å•çš„æ— æœåŠ¡å™¨ PostgreSQLï¼Œå…·æœ‰æ•°æ®åº“åˆ†æ”¯å’Œæœ€å°ç®¡ç†å¼€é”€ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://planetscale.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PlanetScale&lt;/a&gt;ï¼šä»¥é«˜çº§ MySQL äº‘æœåŠ¡è€Œé—»åï¼Œä¾§é‡äºå¼€å‘å‹å¥½çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://polyscale.ai/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PolyScale&lt;/a&gt;ï¼šä¸“æ³¨äºé€šè¿‡æ™ºèƒ½ç¼“å­˜ä¼˜åŒ–æ•°æ®æ€§èƒ½çš„ AI é©±åŠ¨ç¼“å­˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://upstash.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Upstash&lt;/a&gt;ï¼šæä¾›å…¨æ‰˜ç®¡çš„ä½å»¶è¿Ÿæ— æœåŠ¡å™¨ Kafka è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äºäº‹ä»¶æµã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://www.diagrid.io/catalyst&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Diagrid Catalyst&lt;/a&gt;ï¼šæä¾›ç”¨äºæ¶ˆæ¯ã€æ•°æ®å’Œå·¥ä½œæµçš„æ— æœåŠ¡å™¨ Dapr APIï¼Œå……å½“äº‘æœåŠ¡ä¹‹é—´çš„è¿æ¥çº½å¸¦ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://temporal.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Temporal&lt;/a&gt;ï¼šæä¾›æŒä¹…çš„æ‰§è¡Œï¼Œä¸ºå¯é ç®¡ç†å¤æ‚å·¥ä½œæµç¨‹æä¾›å¹³å°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªåˆ—è¡¨ä»£è¡¨äº†ä¸€ä¸ªä¸æ–­å¢é•¿çš„ç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ï¼Œè¿™ä¸ªç”Ÿæ€ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†æä¾›çš„æ ¸å¿ƒäº‘åŸè¯­ä¹‹ä¸Šçš„å‚ç›´å¤šäº‘æœåŠ¡ã€‚å®ƒä»¬é€šè¿‡æä¾›ä¸€å¥—å…¨é¢çš„å¯ç¼–ç¨‹æ„ä»¶å’Œå¢å¼ºçš„å¼€å‘è€…ä½“éªŒæ¥ç«äº‰ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ— æœåŠ¡å™¨äº‘æœåŠ¡é€šè¿‡ä¸°å¯Œçš„å¼€å‘äººå‘˜æ„é€ è¶…ä¸“ä¸šåœ°å¤„ç†ä¸€ä»¶äº‹&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ— æœåŠ¡å™¨äº‘æœåŠ¡é€šè¿‡ä¸°å¯Œçš„å¼€å‘äººå‘˜æ„é€ ï¼Œè¶…ä¸“ä¸šåœ°å¤„ç†ä¸€ä»¶äº‹&#34; srcset=&#34;
               /blog/cloud-computing-post-serverless-trends/f2_hu11446093166076259251.webp 400w,
               /blog/cloud-computing-post-serverless-trends/f2_hu14222359580945709382.webp 760w,
               /blog/cloud-computing-post-serverless-trends/f2_hu18086187623220493830.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cloud-computing-post-serverless-trends/f2_hu11446093166076259251.webp&#34;
               width=&#34;760&#34;
               height=&#34;428&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ— æœåŠ¡å™¨äº‘æœåŠ¡é€šè¿‡ä¸°å¯Œçš„å¼€å‘äººå‘˜æ„é€ ï¼Œè¶…ä¸“ä¸šåœ°å¤„ç†ä¸€ä»¶äº‹
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦å®Œæˆäº†è¿™ä¸ªè¿‡æ¸¡ï¼Œç¼ºä¹ä¸°å¯Œæ„ä»¶çš„åŸºæœ¬äº‘æœåŠ¡ï¼Œç”šè‡³æ˜¯æ— æœåŠ¡å™¨çš„äº‘æœåŠ¡ï¼Œéƒ½ä¼šæ˜¾å¾—åƒè¿‡æ—¶çš„æœ¬åœ°è½¯ä»¶ã€‚å­˜å‚¨æœåŠ¡å¿…é¡»åƒ DynamoDB ä¸€æ ·æµå¼ä¼ è¾“æ›´æ”¹ï¼›æ¶ˆæ¯ä»£ç†åº”åŒ…æ‹¬ç±»ä¼¼äº EventBridge çš„æ„ä»¶ï¼Œç”¨äºäº‹ä»¶é©±åŠ¨çš„è·¯ç”±ã€è¿‡æ»¤å’Œç»ˆç«¯ç‚¹è°ƒç”¨ï¼ŒåŒ…æ‹¬é‡è¯•å’Œ DLQsï¼›å‘å¸ƒ/è®¢é˜…ç³»ç»Ÿåº”æä¾›æ¶ˆæ¯æ‰¹å¤„ç†ã€æ‹†åˆ†ã€è¿‡æ»¤ã€è½¬æ¢å’Œä¸°å¯ŒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼Œè™½ç„¶è¶…å¤§è§„æ¨¡äº‘æœåŠ¡æä¾›å•†é€šè¿‡ä¸æ–­å¢åŠ çš„æœåŠ¡æ•°ç»„åœ¨æ°´å¹³æ–¹å‘æ‰©å±•ï¼Œä½†è¶…ä¸“ä¸šåŒ–æœåŠ¡æä¾›å•†åœ¨å‚ç›´æ–¹å‘å¢é•¿ï¼Œæä¾›ä¸€ä¸ªä¸°å¯Œæ„ä»¶çš„æœ€ä½³æœåŠ¡ï¼Œå½¢æˆä¸€ä¸ª&lt;a href=&#34;https://www.infoq.com/articles/cloud-bound-applications/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç”Ÿæ€ç³»ç»Ÿ&lt;/a&gt;çš„å‚ç›´å¤šäº‘æœåŠ¡ã€‚äº‘æœåŠ¡ç«äº‰çš„æœªæ¥å°†ä»åŸºç¡€è®¾æ–½åŸè¯­è½¬å‘æ ¸å¿ƒäº‘åŸè¯­å’Œé¢å‘å¼€å‘è€…çš„æ„ä»¶çš„ç»„åˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»åŸºç¡€è®¾æ–½åˆ°ç»„åˆå³ä»£ç cac&#34;&gt;ä»åŸºç¡€è®¾æ–½åˆ°ç»„åˆå³ä»£ç ï¼ˆCaCï¼‰&lt;/h2&gt;
&lt;p&gt;äº‘æ„ä»¶è¶Šæ¥è¶Šæ¨¡ç³Šäº†åº”ç”¨ç¨‹åºå’ŒåŸºç¡€è®¾æ–½èŒè´£ä¹‹é—´çš„ç•Œé™ã€‚ä¸‹ä¸€ä¸ªæ¼”è¿›æ˜¯äº‘è‡ªåŠ¨åŒ–çš„â€œå·¦ç§»â€ï¼Œå°†åº”ç”¨ç¨‹åºå’Œè‡ªåŠ¨åŒ–ä»£ç é›†æˆä¸ºå·¥å…·å’Œè´£ä»»çš„ä¸€éƒ¨åˆ†ã€‚è®©æˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªè¿‡æ¸¡æ˜¯å¦‚ä½•å±•å¼€çš„ã€‚&lt;/p&gt;
&lt;p&gt;äº‘åŸºç¡€è®¾æ–½ç®¡ç†çš„ç¬¬ä¸€ä»£æ˜¯ç”±åŸºç¡€è®¾æ–½å³ä»£ç ï¼ˆIaCï¼‰å®šä¹‰çš„ï¼Œè¿™æ˜¯ä¸€ç§æ—¨åœ¨ç®€åŒ–åŸºç¡€è®¾æ–½çš„ä¾›åº”å’Œç®¡ç†çš„æ¨¡å¼ã€‚è¿™ç§æ–¹æ³•å»ºç«‹åœ¨äº‘è®¡ç®—ä¸­è™šæ‹ŸåŒ–çš„å•†å“åŒ–è¶‹åŠ¿çš„åŸºç¡€ä¸Šã€‚&lt;/p&gt;
&lt;p&gt;æœ€åˆçš„ IaC å·¥å…·å¼•å…¥äº†ä¸“é—¨ç”¨äºä»¥å¯é‡å¤çš„æ–¹å¼åˆ›å»ºã€é…ç½®å’Œç®¡ç†äº‘èµ„æºçš„é¢†åŸŸç‰¹å®šè¯­è¨€ï¼ˆDSLï¼‰ã€‚åƒ Chefã€Ansibleã€Puppet å’Œ Terraform è¿™æ ·çš„å·¥å…·å¼•é¢†äº†è¿™ä¸ªé˜¶æ®µã€‚è¿™äº›å·¥å…·åˆ©ç”¨äº†å£°æ˜æ€§è¯­è¨€ï¼Œå…è®¸è¿ç»´å›¢é˜Ÿä»¥ä»£ç å®šä¹‰åŸºç¡€è®¾æ–½çš„æœŸæœ›çŠ¶æ€ï¼ŒæŠ½è±¡å‡ºåº•å±‚çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œéšç€äº‘è®¡ç®—ä»ä½çº§ç²—ç²’åº¦åŸºç¡€è®¾æ–½è¿‡æ¸¡åˆ°æ›´é¢å‘å¼€å‘è€…çš„å¯ç¼–ç¨‹ç»†ç²’åº¦æ„ä»¶ï¼Œä½¿ç”¨ç°æœ‰é€šç”¨ç¼–ç¨‹è¯­è¨€æ¥å®šä¹‰è¿™äº›æ„ä»¶çš„è¶‹åŠ¿æ­£åœ¨å…´èµ·ã€‚æ–°çš„å‚ä¸è€…ï¼Œå¦‚ Pulumi å’Œ AWS Cloud Development Kitï¼ˆCDKï¼‰ï¼Œå¤„äºè¿™ä¸€æµªæ½®çš„å‰æ²¿ï¼Œæ”¯æŒè¯¸å¦‚ TypeScriptã€Pythonã€C#ã€Go å’Œ Java ç­‰è¯­è¨€ã€‚&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨é€šç”¨ç¼–ç¨‹è¯­è¨€çš„è½¬å˜æ˜¯ç”±äºéœ€è¦å…‹æœå£°æ˜æ€§è¯­è¨€çš„å±€é™æ€§ï¼Œåè€…åœ¨ä»¥ç¼–ç¨‹æ–¹å¼å®šä¹‰äº‘æ„ä»¶æ–¹é¢ç¼ºä¹è¡¨ç°åŠ›å’Œçµæ´»æ€§ï¼Œå¹¶ä¸”ç”±äºäº‘æ„ä»¶é…ç½®çš„è´£ä»»ä»è¿ç»´è½¬å‘å¼€å‘è€…ã€‚ä¸é€‚ç”¨äºä½çº§é™æ€åŸºç¡€è®¾æ–½çš„å£°æ˜æ€§è¯­è¨€çš„é™æ€æ€§è´¨ä¸åŒï¼Œé€šç”¨ç¼–ç¨‹è¯­è¨€ä½¿å¼€å‘è€…èƒ½å¤Ÿå®šä¹‰åŠ¨æ€ã€é€»è¾‘é©±åŠ¨çš„äº‘æ„ä»¶ï¼Œå®ç°ä¸åº”ç”¨ç¨‹åºä»£ç æ›´ç´§å¯†çš„å¯¹é½ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å°†åº”ç”¨ç¨‹åºçš„ç»„æˆä»åŸºç¡€è®¾æ–½è½¬ç§»åˆ°å¼€å‘äººå‘˜å›¢é˜Ÿ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å°†åº”ç”¨ç¨‹åºçš„ç»„æˆä»åŸºç¡€è®¾æ–½è½¬ç§»åˆ°å¼€å‘äººå‘˜å›¢é˜Ÿ&#34; srcset=&#34;
               /blog/cloud-computing-post-serverless-trends/f3_hu16148175554365285057.webp 400w,
               /blog/cloud-computing-post-serverless-trends/f3_hu4156025095353620147.webp 760w,
               /blog/cloud-computing-post-serverless-trends/f3_hu1334812332413177915.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cloud-computing-post-serverless-trends/f3_hu16148175554365285057.webp&#34;
               width=&#34;760&#34;
               height=&#34;432&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å°†åº”ç”¨ç¨‹åºçš„ç»„æˆä»åŸºç¡€è®¾æ–½è½¬ç§»åˆ°å¼€å‘äººå‘˜å›¢é˜Ÿ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ— æœåŠ¡å™¨åäº‘å¼€å‘äººå‘˜éœ€è¦é€šè¿‡åˆ›å»ºå‡½æ•°å’Œå¾®æœåŠ¡æ¥å®ç°ä¸šåŠ¡é€»è¾‘ï¼Œä½†è¿˜éœ€è¦ä½¿ç”¨å¯ç¼–ç¨‹äº‘æ„ä»¶å°†å®ƒä»¬ç»„åˆåœ¨ä¸€èµ·ã€‚è¿™å¡‘é€ äº†æ›´å¹¿æ³›çš„å¼€å‘è€…è´£ä»»é›†ï¼Œç”¨äºå¼€å‘å’Œç»„åˆäº‘åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼Œå…·æœ‰ Lambda å‡½æ•°ä¸­çš„ä¸šåŠ¡é€»è¾‘çš„ä»£ç è¿˜éœ€è¦ API Gateway ä¸­çš„è·¯ç”±ã€è¿‡æ»¤å’Œè¯·æ±‚è½¬æ¢é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ª Lambda å‡½æ•°å¯èƒ½éœ€è¦ DynamoDB æµé…ç½®æ¥æµå¼ä¼ è¾“ç‰¹å®šæ•°æ®æ›´æ”¹ï¼ŒEventBridge è·¯ç”±ã€è¿‡æ»¤å’Œä¸°å¯Œé…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸‰ä¸ªåº”ç”¨ç¨‹åºå¯èƒ½å°†å…¶å¤§éƒ¨åˆ†ç¼–æ’é€»è¾‘è¡¨è¾¾ä¸º StepFunctionï¼Œå…¶ä¸­ Lambda ä»£ç åªæ˜¯ä¸€ä¸ªå°ä»»åŠ¡ã€‚å¼€å‘è€…ï¼Œè€Œä¸æ˜¯å¹³å°å·¥ç¨‹å¸ˆæˆ–è¿ç»´æˆå‘˜ï¼Œå¯ä»¥å°†è¿™äº›ä»£ç å•å…ƒç»„åˆåœ¨ä¸€èµ·ã€‚å·¥å…·ï¼Œå¦‚ Pulumiã€AWS CDK å’Œå…¶ä»–å·¥å…·ï¼Œå…è®¸å¼€å‘è€…ä½¿ç”¨ä»–ä»¬é€‰æ‹©çš„è¯­è¨€æ¥å®ç°å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ç›¸åŒçš„è¯­è¨€æ¥ç»„åˆå®ƒä¸äº‘ç¯å¢ƒçš„äº¤äº’ï¼Œæœ€é€‚åˆè¿™ä¸ªæ—¶ä»£ã€‚&lt;/p&gt;
&lt;p&gt;å¹³å°å›¢é˜Ÿä»ç„¶å¯ä»¥ä½¿ç”¨å£°æ˜æ€§è¯­è¨€ï¼Œæ¯”å¦‚ Terraformï¼Œæ¥ç®¡ç†ã€ä¿æŠ¤ã€ç›‘è§†å’Œå¯ç”¨äº‘ç¯å¢ƒä¸­çš„å›¢é˜Ÿï¼Œä½†ä»¥å¼€å‘è€…ä¸ºé‡ç‚¹çš„æ„ä»¶ï¼Œç»“åˆä»¥å¼€å‘è€…ä¸ºé‡ç‚¹çš„äº‘è‡ªåŠ¨åŒ–è¯­è¨€ï¼Œå°†äº‘æ„ä»¶å‘å·¦ç§»åŠ¨ï¼Œå¹¶ä½¿å¼€å‘è€…èƒ½å¤Ÿè‡ªåŠ©ä½¿ç”¨äº‘æœåŠ¡æˆä¸ºç°å®ã€‚&lt;/p&gt;
&lt;p&gt;ä» DSL åˆ°é€šç”¨ç¼–ç¨‹è¯­è¨€çš„è¿‡æ¸¡æ ‡å¿—ç€ IaC æ¼”è¿›çš„é‡è¦é‡Œç¨‹ç¢‘ã€‚å®ƒæ‰¿è®¤äº†åº”ç”¨ç¨‹åºä»£ç å‘äº‘æ„ä»¶çš„è¿‡æ¸¡ï¼Œè¿™äº›æ„ä»¶é€šå¸¸éœ€è¦å¼€å‘è€…æ›´æ·±å…¥åœ°æ§åˆ¶èµ„æºä»¥æ»¡è¶³åº”ç”¨ç¨‹åºéœ€æ±‚ã€‚è¿™ä¸ªè½¬å˜ä»£è¡¨äº† IaC å·¥å…·çš„æˆç†Ÿï¼Œç°åœ¨éœ€è¦æ»¡è¶³æ›´å¹¿æ³›çš„åŸºç¡€è®¾æ–½ç¼–æ’éœ€æ±‚ï¼Œä¸ºæ›´å¤æ‚ã€æ›´é«˜çº§çš„æŠ½è±¡å’Œå·¥å…·é“ºå¹³äº†é“è·¯ã€‚&lt;/p&gt;
&lt;p&gt;åŸºç¡€è®¾æ–½ç®¡ç†çš„è¿‡ç¨‹å°†ä»é™æ€é…ç½®è½¬å‘æ›´åŠ åŠ¨æ€ã€åŸºäºä»£ç çš„æ–¹æ³•ã€‚è¿™ä¸€æ¼”è¿›ä¸ä»…ä»…æ­¢æ­¥äºåŸºç¡€è®¾æ–½å³ä»£ç ï¼Œå®ƒæ­£åœ¨è¶…è¶Šåˆ°ä¸€ä¸ªæ›´åŠ å¾®å¦™çš„é¢†åŸŸï¼Œè¢«ç§°ä¸ºç»„åˆå³ä»£ç ã€‚è¿™ä¸€èŒƒå¼è¿›ä¸€æ­¥æ¨¡ç³Šäº†åº”ç”¨ç¨‹åºä»£ç å’ŒåŸºç¡€è®¾æ–½ä¹‹é—´çš„ç•Œé™ï¼Œå¯¼è‡´æ›´åŠ æµç•…ã€é«˜æ•ˆå’Œå¼€å‘è€…å‹å¥½çš„å®è·µã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;æ€»ç»“è¶‹åŠ¿åŠå…¶åŠ å¼ºæ•ˆåº”ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°ç¼–ç¨‹æ„ä»¶é€æ¸æ•´åˆåˆ°äº‘æœåŠ¡ä¸­ã€‚æ¯ä¸ªè®¡ç®—æœåŠ¡éƒ½å°†é›†æˆ CI/CD æµæ°´çº¿ï¼›æ•°æ®åº“å°†æä¾›æ¥è‡ªè¾¹ç¼˜çš„ HTTP è®¿é—®å¹¶å‘å‡ºæ›´æ”¹äº‹ä»¶ï¼›æ¶ˆæ¯ä»£ç†å°†é€šè¿‡è¿‡æ»¤ã€è·¯ç”±ã€å¹‚ç­‰æ€§ã€è½¬æ¢ã€DLQ ç­‰åŠŸèƒ½å¢å¼ºèƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;åŸºç¡€è®¾æ–½æœåŠ¡æ­£åœ¨æ¼”å˜ä¸ºæ— æœåŠ¡å™¨ APIã€ä»ä»£ç ä¸­æ¨æ–­çš„åŸºç¡€è®¾æ–½ (&lt;a href=&#34;https://klo.dev/state-of-infrastructure-from-code-2023/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IfC&lt;/a&gt;)ã€&lt;a href=&#34;https://vercel.com/blog/framework-defined-infrastructure&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¡†æ¶å®šä¹‰çš„åŸºç¡€è®¾æ–½&lt;/a&gt;ï¼Œæˆ–ç”±å¼€å‘è€…æ˜ç¡®ç»„åˆ (CaC)ã€‚è¿™ä¸€æ¼”è¿›å¯¼è‡´äº†æ›´å°çš„å‡½æ•°ï¼Œæœ‰æ—¶ç”šè‡³æ˜¯ NoFaaS æ¨¡å¼ï¼Œä¸ºè¶…ä¸“ä¸šåŒ–ã€ä»¥å¼€å‘è€…ä¸ºå…ˆçš„å‚ç›´å¤šäº‘æœåŠ¡é“ºå¹³äº†é“è·¯ã€‚è¿™äº›æœåŠ¡å°†æä¾›&lt;a href=&#34;https://thenewstack.io/raising-the-serverless-bar-infrastructure-apis-unleash-more-value-for-enterprises/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯ç¼–ç¨‹ API çš„åŸºç¡€è®¾æ–½&lt;/a&gt;ï¼Œä½¿å¼€å‘è€…èƒ½å¤Ÿæ— ç¼åœ°ä½¿ç”¨ä»–ä»¬å–œæ¬¢çš„ç¼–ç¨‹è¯­è¨€åˆå¹¶å…¶åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨äº‘æœåŠ¡è¿›è¡Œåº”ç”¨ç¨‹åºæ„ä»¶çš„å·¦ç§»å°†ä¸åº”ç”¨ç¨‹åºç¼–ç¨‹è¶Šæ¥è¶Šèåˆï¼Œå°†å¾®æœåŠ¡ä»ä¸€ç§æ¶æ„é£æ ¼è½¬å˜ä¸ºä¸€ç§ç»„ç»‡é£æ ¼ã€‚ä¸€ä¸ªå¾®æœåŠ¡å°†ä¸å†åªæ˜¯ä¸€ä¸ªå•ä¸€çš„éƒ¨ç½²å•å…ƒæˆ–è¿‡ç¨‹è¾¹ç•Œï¼Œè€Œæ˜¯ç”±å¼€å‘è€…é€‰æ‹©çš„å•ä¸€è¯­è¨€ä¸­å®ç°å’Œç²˜åˆçš„å‡½æ•°ã€å®¹å™¨å’Œäº‘æ„ä»¶ç»„æˆã€‚æœªæ¥æ­£åœ¨æˆä¸ºè¶…ä¸“ä¸šåŒ–ï¼Œå¹¶ä¸“æ³¨äºä»¥å¼€å‘è€…ä¸ºå…ˆçš„äº‘ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Cilium å’Œ BGP ä¸º Kubernetes æœåŠ¡è¿›è¡Œè´Ÿè½½å‡è¡¡</title>
      <link>https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/</link>
      <pubDate>Tue, 30 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&#34;https://sue.eu/blogs/expose-loadbalanced-kubernetes-services-with-bgp-cilium/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Exposing Load-Balanced Kubernetes Services with Cilium&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;Cilium æ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®ï¼Œæ—¨åœ¨ä¸ºäº‘åŸç”Ÿç¯å¢ƒæä¾›ç½‘ç»œã€å®‰å…¨å’Œå¯è§‚æµ‹æ€§ï¼Œä¾‹å¦‚ Kubernetes é›†ç¾¤å’Œå…¶ä»–å®¹å™¨ç¼–æ’å¹³å°ã€‚æœ¬åšå®¢å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ Cilium å’Œ BGP å°†æ‚¨çš„ Kubernetes æœåŠ¡æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BGP&lt;/strong&gt;
è¾¹ç•Œç½‘å…³åè®®ï¼ˆBGPï¼‰æ˜¯ä¸€ç§æ ‡å‡†åŒ–çš„å¤–éƒ¨ç½‘å…³åè®®ï¼Œæ—¨åœ¨åœ¨äº’è”ç½‘ä¸Šçš„è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ä¹‹é—´äº¤æ¢è·¯ç”±å’Œå¯è¾¾æ€§ä¿¡æ¯ã€‚è¯¥åè®®è¢«åˆ†ç±»ä¸ºè·¯å¾„çŸ¢é‡åè®®ï¼Œå› æ­¤å®ƒæ ¹æ®ç”±ç½‘ç»œç®¡ç†å‘˜é…ç½®çš„è·¯å¾„ã€ç½‘ç»œç­–ç•¥æˆ–è§„åˆ™é›†æ¥åšå‡ºè·¯ç”±å†³ç­–ã€‚å®ƒå‚ä¸åˆ¶å®šæ ¸å¿ƒè·¯ç”±å†³ç­–ï¼Œè¿™ä½¿å¾—å®ƒå¯¹äº’è”ç½‘çš„æ­£å¸¸è¿è¡Œè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;BGP ä¸“ä¸ºå¥å£®æ€§å’Œå¯æ‰©å±•æ€§è€Œå¼€å‘ï¼Œç”¨äºåœ¨å¤§å‹ç½‘ç»œä¹‹é—´è·¯ç”±æ•°æ®ï¼ŒåŒ…æ‹¬ ISP å’Œå…¶ä»–å¤§å‹ç»„ç»‡ã€‚å®ƒç¡®ä¿äº†æ— ç¯çš„åŸŸé—´è·¯ç”±ï¼Œå¹¶æœ‰åŠ©äºç»´æŠ¤ç¨³å®šçš„ç½‘ç»œç»“æ„ã€‚BGP å¯ä»¥å¤„ç†æ•°åƒä¸ªè·¯ç”±ï¼Œå¹¶ä»¥å…¶éšç€ç½‘ç»œå¢é•¿è€Œæ‰©å±•çš„èƒ½åŠ›è€Œè„±é¢–è€Œå‡ºã€‚ç”±äºå…¶çµæ´»æ€§å’Œå¯¹è·¯ç”±ç­–ç•¥çš„æ§åˆ¶ï¼Œå®ƒè¢«å¹¿æ³›ä½¿ç”¨ï¼Œä½¿å…¶èƒ½å¤Ÿå¿«é€Ÿå“åº”ç½‘ç»œå˜åŒ–ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Cilium å’Œ BGP&lt;/strong&gt;
åœ¨ç‰ˆæœ¬ 1.10 ä¸­ï¼ŒCilium é›†æˆäº†å¯¹ MetalLB çš„ BGP æ”¯æŒï¼Œä»è€Œä½¿å…¶èƒ½å¤Ÿå®£å¸ƒ Kubernetes æœåŠ¡çš„ IP åœ°å€ç±»å‹ä¸º&lt;a href=&#34;https://sue.eu/insights/bgp-load-balancing/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ BGP çš„ LoadBalancer&lt;/a&gt;ã€‚å…¶ç»“æœæ˜¯ï¼ŒæœåŠ¡å¯ä»¥ä» Kubernetes ç½‘ç»œå¤–éƒ¨è®¿é—®ï¼Œæ— éœ€é¢å¤–çš„ç»„ä»¶ï¼Œä¾‹å¦‚ Ingress è·¯ç”±å™¨ã€‚ç‰¹åˆ«æ˜¯â€œæ— éœ€é¢å¤–ç»„ä»¶â€çš„éƒ¨åˆ†æ˜¯ä»¤äººæŒ¯å¥‹çš„æ¶ˆæ¯ï¼Œå› ä¸ºæ¯ä¸ªç»„ä»¶éƒ½ä¼šå¢åŠ å»¶è¿Ÿï¼Œå› æ­¤æ²¡æœ‰é¢å¤–ç»„ä»¶ä¼šå‡å°‘å»¶è¿Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu17139992351346066106.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu12620491286267683060.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu12416264946635966108.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f1_hu17139992351346066106.webp&#34;
               width=&#34;760&#34;
               height=&#34;664&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤ç¤ºä¾‹ä¸­æ˜¾ç¤ºçš„ç½‘ç»œé…ç½®ä»£è¡¨äº†å…·æœ‰ç”¨äºæœåŠ¡è´Ÿè½½å‡è¡¡çš„ BGP é›†æˆçš„åŸºäº Kubernetes çš„ç¯å¢ƒã€‚ä»¥ä¸‹æ˜¯é…ç½®çš„è¯¦ç»†ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å®¢æˆ·ç«¯ç½‘ç»œï¼ˆLAN ç½‘ç»œï¼‰ï¼š&lt;/strong&gt; å­˜åœ¨ä¸€ä¸ªå…·æœ‰ IP èŒƒå›´ 192.168.10.0/24 çš„æœ¬åœ°åŒºåŸŸç½‘ç»œï¼ˆLANï¼‰ï¼Œè¿æ¥äº†å¤šä¸ªå®¢æˆ·ç«¯ã€‚è¯¥ç½‘ç»œåŒ…å«äº†è®¾ç½®çš„ç”¨æˆ·ç«¯ï¼Œç”¨æˆ·å’Œå…¶ä»–è®¾å¤‡å¯ä»¥åœ¨å…¶ä¸­è®¿é—®æ‰˜ç®¡åœ¨ Kubernetes é›†ç¾¤ä¸Šçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Kubernetes ç½‘ç»œï¼š&lt;/strong&gt; Kubernetes é›†ç¾¤å…·æœ‰è‡ªå·±çš„ç½‘ç»œç©ºé—´ï¼Œç”±å­ç½‘ 192.168.1.0/24 æŒ‡å®šã€‚è¯¥ç½‘ç»œåŒ…æ‹¬ Kubernetes ä¸»èŠ‚ç‚¹ï¼ˆk8s-master1ï¼‰å’Œå¤šä¸ªå·¥ä½œèŠ‚ç‚¹ï¼ˆä» k8s-worker1 åˆ° k8s-worker5ï¼‰ã€‚è¿™äº›èŠ‚ç‚¹æ‰˜ç®¡äº† Kubernetes é›†ç¾¤çš„å®é™…å®¹å™¨å’Œå·¥ä½œè´Ÿè½½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç®¡ç†ç½‘ç»œï¼š&lt;/strong&gt; ä¸€ä¸ªç‹¬ç«‹çš„ç®¡ç†ç½‘ç»œï¼Œè‡³å°‘æœ‰ä¸€ä¸ªè®¾å¤‡ï¼ˆk8s-controlï¼‰ç”¨äºæ§åˆ¶å’Œç®¡ç† Kubernetes é›†ç¾¤ã€‚è¿™ä¸ Kubernetes æ•°æ®å¹³é¢åˆ†å¼€ï¼Œä»¥ç¡®ä¿å®‰å…¨æ€§å’Œç®¡ç†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;BGP è·¯ç”±å™¨ï¼š&lt;/strong&gt; bgp-router1 æ¡¥æ¥äº†å¤–éƒ¨ç½‘ç»œ/äº’è”ç½‘å’Œ Kubernetes ç½‘ç»œã€‚å®ƒè´Ÿè´£ä½¿ç”¨ BGP æ¥å¹¿æ’­è·¯ç”±å°†æµé‡è·¯ç”±åˆ° Kubernetes é›†ç¾¤ä¸­çš„é€‚å½“æœåŠ¡ã€‚IP èŒƒå›´ 172.16.10.0/24 ä¿ç•™ä¾› Kubernetes é›†ç¾¤å†…çš„ LoadBalancer æœåŠ¡ä½¿ç”¨ã€‚å½“å°† Kubernetes æœåŠ¡å…¬å¼€ä¸º LoadBalancer æ—¶ï¼Œå®ƒä¼šåˆ†é…ä¸€ä¸ªæ¥è‡ªæ­¤æ± çš„ IP åœ°å€ã€‚ç„¶åï¼ŒBGP è·¯ç”±å™¨å°†æ­¤ IP å¹¿æ’­åˆ°å¤–éƒ¨ç½‘ç»œï¼Œä»è€Œä½¿æµé‡è·¯ç”±åˆ° LoadBalancer æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤ç½‘ç»œé…ç½®å…è®¸é€šè¿‡åˆ©ç”¨ BGP è¿›è¡Œ IP åœ°å€ç®¡ç†å’Œè·¯ç”±æ¥å®ç°è¿è¡Œåœ¨ Kubernetes é›†ç¾¤ä¸Šçš„æœåŠ¡çš„å¯æ‰©å±•å’Œçµæ´»çš„è´Ÿè½½å‡è¡¡ã€‚å®ƒå°†å®¢æˆ·ç«¯è®¿é—®ã€é›†ç¾¤ç®¡ç†å’ŒæœåŠ¡æµé‡åˆ†åˆ«åˆ†éš”åˆ°ä¸åŒçš„ç½‘ç»œä¸­ï¼Œä»¥è¿›è¡Œç»„ç»‡å’Œå®‰å…¨æ€§ç›®çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æš´éœ²æœåŠ¡&#34;&gt;æš´éœ²æœåŠ¡&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦æ„å»ºäº†ä¸Šè¿°åŸºç¡€æ¶æ„ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªéƒ¨ç½²å¹¶ä½¿ç”¨ BGP å°†å…¶æš´éœ²ç»™ç½‘ç»œã€‚è®©æˆ‘ä»¬ä»ä¸€ä¸ªéƒ¨ç½²å¼€å§‹ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªç®€å•çš„ NGINX Web æœåŠ¡å™¨ï¼Œæä¾›é»˜è®¤çš„ Web é¡µé¢ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä¸€ä¸ªç±»å‹ä¸º LoadBalancer çš„ Serviceã€‚è¿™å°†å¯¼è‡´ä½¿ç”¨ BGP å‘æˆ‘ä»¬çš„è·¯ç”±å™¨å®£å¸ƒå¤–éƒ¨ IP åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æ„å»ºå®Œæˆï¼Œå‘½ä»¤ &lt;code&gt;kubectl get svc&lt;/code&gt; æ˜¾ç¤ºæˆ‘ä»¬çš„æœåŠ¡å…·æœ‰å¤–éƒ¨ IP åœ°å€ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;NAME          TYPE           CLUSTER-IP       EXTERNAL-IP       PORT(S)         AGE
kubernetes    ClusterIP      10.96.0.1        &amp;lt;none&amp;gt;            443/TCP         7d3h
web1-lb       LoadBalancer   10.106.236.120   172.16.10.0       80:30256/TCP    7d2h
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;172.16.10.0 è¿™ä¸ªåœ°å€çœ‹èµ·æ¥å¾ˆå¥‡æ€ªï¼Œä½†æ²¡é—®é¢˜ã€‚é€šå¸¸ä¼šè·³è¿‡.0 åœ°å€ï¼Œè€Œä½¿ç”¨.1 åœ°å€ä½œä¸ºç¬¬ä¸€ä¸ªåœ°å€ã€‚å…¶ä¸­ä¸€ä¸ªåŸå› æ˜¯åœ¨æ—©æœŸï¼Œ.0 åœ°å€ç”¨äºå¹¿æ’­ï¼Œåæ¥æ”¹ä¸º.255ã€‚ç”±äº.0 ä»ç„¶æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„åœ°å€ï¼Œè´Ÿè´£åœ°å€æ± çš„ MetalLB ä¼šå°†å…¶åˆ†é…ä¸ºç¬¬ä¸€ä¸ªåœ°å€ã€‚åœ¨è·¯ç”±å™¨ bgp-router1 ä¸Šè¿è¡Œçš„å‘½ä»¤ &lt;code&gt;vtysh -c &#39;show bgp summary&#39;&lt;/code&gt; æ˜¾ç¤ºå®ƒå·²æ¥æ”¶åˆ°ä¸€ä¸ªå‰ç¼€ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;IPv4 Unicast Summary:
BGP router identifier 192.168.1.1, local AS number 64512 vrf-id 0
BGP table version 17
RIB entries 1, using 192 bytes of memory
Peers 6, using 128 KiB of memoryNeighbour V AS MsgRcvd MsgSent TblVer InQ OutQ Up/Down State/PfxRcd PfxSnt
192.168.1.10 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.21 4 64512 446 435 0 0 0 03:36:54 1 0
192.168.1.22 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.23 4 64512 445 435 0 0 0 03:36:56 1 0
192.168.1.24 4 64512 446 435 0 0 0 03:36:56 1 0
192.168.1.25 4 64512 445 435 0 0 0 03:36:56 1 0

Total number of neighbors 6
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è·¯ç”±è¡¨çš„ä»¥ä¸‹ç‰‡æ®µï¼ˆip routeï¼‰å‘Šè¯‰æˆ‘ä»¬ï¼Œå¯¹äºç‰¹å®šçš„ IP åœ°å€ 172.16.10.0ï¼Œå­˜åœ¨ 6 ä¸ªå¯èƒ½çš„è·¯ç”±/ç›®æ ‡ã€‚æ¢å¥è¯è¯´ï¼Œæ‰€æœ‰ Kubernetes èŠ‚ç‚¹éƒ½å®£å¸ƒå®ƒä»¬æ­£åœ¨å¤„ç†è¯¥åœ°å€çš„æµé‡ã€‚å¤ªæ£’äº†ï¼ï¼&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;172.16.10.0 proto bgp metric 20
nexthop via 192.168.1.10 dev enp7s0 weight 1
nexthop via 192.168.1.21 dev enp7s0 weight 1
nexthop via 192.168.1.22 dev enp7s0 weight 1
nexthop via 192.168.1.23 dev enp7s0 weight 1
nexthop via 192.168.1.24 dev enp7s0 weight 1
nexthop via 192.168.1.25 dev enp7s0 weight 1
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å®é™…ä¸Šï¼Œç°åœ¨ä»æˆ‘ä»¬çš„è·¯ç”±å™¨ä¸Šå¯ä»¥çœ‹åˆ° Web é¡µé¢ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ curl -s -v http://172.16.10.0/ -o /dev/null

* Trying 172.16.10.0â€¦
* TCP_NODELAY set
* Connected to 172.16.10.0 (172.16.10.0) port 80 (#0)
&amp;gt; GET / HTTP/1.1
&amp;gt; Host: 172.16.10.0
&amp;gt; User-Agent: curl/7.61.1
&amp;gt; Accept: */*
&amp;lt; HTTP/1.1 200 OK
&amp;lt; Server: nginx/1.21.3
&amp;lt; Date: Sun, 31 Oct 2023 14:19:17 GMT
&amp;lt; Content-Type: text/html
&amp;lt; Content-Length: 615
&amp;lt; Last-Modified: Tue, 07 Sep 2023 15:21:03 GMT
&amp;lt; Connection: keep-alive
&amp;lt; ETag: â€œ6137835f-267â€
&amp;lt; Accept-Ranges: bytes&amp;gt;
{ [615 bytes data]}
* Connection #0 to host 172.16.10.0 left intact
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è€Œä¸”ï¼Œä½äºæˆ‘ä»¬å®¢æˆ·ç«¯ç½‘ç»œä¸­çš„å®¢æˆ·ç«¯ä¹Ÿå¯ä»¥è®¿é—®ç›¸åŒçš„é¡µé¢ï¼Œå› ä¸ºå®ƒä½¿ç”¨ bgp-router1 ä½œä¸ºé»˜è®¤è·¯ç”±ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu12330485717108373314.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu8752192660279871172.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu16388573192024680154.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f2_hu12330485717108373314.webp&#34;
               width=&#34;598&#34;
               height=&#34;345&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æ›´å¤šç»†èŠ‚&#34;&gt;æ›´å¤šç»†èŠ‚&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ä¸€åˆ‡éƒ½è¿ä½œæ­£å¸¸ï¼Œå¤§å¤šæ•°å·¥ç¨‹å¸ˆéƒ½æƒ³çœ‹åˆ°æ›´å¤šç»†èŠ‚ï¼Œæ‰€ä»¥æˆ‘ä¸ä¼šè®©ä½ å¤±æœ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ping&#34;&gt;Ping&lt;/h3&gt;
&lt;p&gt;ä½ å°†æ³¨æ„åˆ°çš„ç¬¬ä¸€ä»¶äº‹æ˜¯ï¼ŒLoadBalancer çš„ IP åœ°å€æ— æ³•é€šè¿‡ ping è®¿é—®ã€‚æ·±å…¥æŒ–æ˜ä¸€ä¸‹å¯ä»¥æ­ç¤ºåŸå› ã€‚æˆ‘ä»¬åˆ›å»ºäº†æºç«¯å£ 80 å’Œç›®æ ‡ç«¯å£ 80 ä¹‹é—´çš„æ˜ å°„ã€‚æ­¤æ˜ å°„åœ¨æ¥å£ä¸Šä½¿ç”¨ eBPF é€»è¾‘æ‰§è¡Œï¼Œå¹¶å­˜åœ¨äºæ‰€æœ‰èŠ‚ç‚¹ä¸Šã€‚æ­¤æ˜ å°„ç¡®ä¿åªæœ‰ç«¯å£ 80 çš„æµé‡è¢«å‡è¡¡ã€‚æ‰€æœ‰å…¶ä»–æµé‡ï¼ŒåŒ…æ‹¬ pingï¼Œéƒ½ä¸è¢«æ¥æ”¶ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆä½ å¯ä»¥çœ‹åˆ° icmp æ•°æ®åŒ…åˆ°è¾¾èŠ‚ç‚¹ï¼Œä½†ä»æœªå‘é€å“åº”çš„åŸå› ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è§‚å¯Ÿæµé‡&#34;&gt;è§‚å¯Ÿæµé‡&lt;/h3&gt;
&lt;p&gt;Hubble æ˜¯å»ºç«‹åœ¨ eBPF å’Œ Cilium ä¹‹ä¸Šçš„ç½‘ç»œå’Œå®‰å…¨æ€§å¯è§‚æµ‹å¹³å°ã€‚é€šè¿‡å‘½ä»¤è¡Œå’Œå›¾å½¢ Web GUIï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰å’Œå†å²æµé‡ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼ŒHubble æ”¾ç½®åœ¨ k8s-control èŠ‚ç‚¹ä¸Šï¼Œè¯¥èŠ‚ç‚¹ç›´æ¥è®¿é—® Hubble Relay çš„ APIã€‚Hubble Relay æ˜¯ä» Cilium èŠ‚ç‚¹è·å–æ‰€éœ€ä¿¡æ¯çš„ç»„ä»¶ã€‚è¯·æ³¨æ„ï¼ŒHubble å‘½ä»¤ä¹Ÿå­˜åœ¨äºæ¯ä¸ª Cilium ä»£ç† Pod ä¸­ï¼Œä½†é‚£ä¸ªå‘½ä»¤åªä¼šæ˜¾ç¤ºç‰¹å®šä»£ç†çš„ä¿¡æ¯ï¼ä»¥ä¸‹è¾“å‡ºæ˜¾ç¤ºäº†ä»è·¯ç”±å™¨ä¸Šæ‰§è¡Œ curl http://172.16.10.0/ å‘½ä»¤åçš„è§‚å¯Ÿè€…ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;$ hubble observe â€“namespace default â€“follow

Oct 31 15:43:41.382: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: SYN)
Oct 31 15:43:41.384: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.384: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:43:41.385: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.385: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
Oct 31 15:43:41.386: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:43:41.386: 192.168.1.1:36946 &amp;lt;&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-overlay FORWARDED (TCP Flags: ACK)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¹‹å‰ï¼Œæˆ‘è­¦å‘Šè¿‡ä¸è¦åœ¨ Cilium ä»£ç† Pod å†…ä½¿ç”¨ hubble å‘½ä»¤ï¼Œä½†åœ¨ç‰¹å®šèŠ‚ç‚¹æµé‡ä¸­çœ‹åˆ°å…·ä½“çš„æƒ…å†µä¹Ÿå¯ä»¥éå¸¸æœ‰ä¿¡æ¯ä»·å€¼ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ¯ä¸ª Cilium ä»£ç† Pod ä¸­éƒ½æ‰§è¡Œäº† &lt;code&gt;hubble observe â€“namespace default â€“follow&lt;/code&gt;ï¼Œå¹¶ä¸”è·¯ç”±å™¨çš„ curl æ‰§è¡Œäº†ä¸€æ¬¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‰˜ç®¡ Pod çš„èŠ‚ç‚¹ï¼ˆk8s-worker2ï¼‰ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸ä¸Šé¢çš„è¾“å‡ºç›¸åŒçš„è¾“å‡ºã€‚ä½†æ˜¯ï¼Œåœ¨å¦ä¸€ä¸ª Podï¼ˆk8s-worker1ï¼‰ä¸Šï¼Œæˆ‘ä»¬çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;Oct 31 15:56:05.220: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: SYN)
Oct 31 15:56:05.220: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: SYN, ACK)
Oct 31 15:56:05.220: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:05.221: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:05.221: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:05.222: 10.0.3.103:48278 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:05.222: 10.0.3.103:48278 &amp;lt;- default/web1-696bfbbbc4-jnxbc:80 to-stack FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:05.222: 10.0.3.103:48278 -&amp;gt; default/web1

-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:12.739: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: SYN)
Oct 31 15:56:12.739: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: SYN, ACK)
Oct 31 15:56:12.742: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK)
Oct 31 15:56:12.742: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:12.745: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: ACK, PSH)
Oct 31 15:56:12.749: 10.0.4.105:36956 -&amp;gt; default/web1-696bfbbbc4-jnxbc:80 to-endpoint FORWARDED (TCP Flags: ACK, FIN)
Oct 31 15:56:12.749: default/web1-696bfbbbc4-jnxbc:80 &amp;lt;&amp;gt; 10.0.4.105:36956 to-overlay FORWARDED (TCP Flags: ACK, FIN)
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;æˆ‘ä»¬åœ¨è¿™é‡Œçœ‹åˆ°çš„æ˜¯ï¼Œæˆ‘ä»¬çš„è·¯ç”±å™¨å°† IP åœ°å€ 172.16.10.0 çš„æµé‡å‘é€åˆ° k8s-worker1ï¼Œä½†è¯¥å·¥ä½œèŠ‚ç‚¹ä¸æ‰˜ç®¡æˆ‘ä»¬çš„ web1 å®¹å™¨ï¼Œå› æ­¤å®ƒå°†æµé‡è½¬å‘åˆ°å¤„ç†æµé‡çš„ k8s-worker2ã€‚æ‰€æœ‰çš„è½¬å‘é€»è¾‘éƒ½ä½¿ç”¨ eBPF å¤„ç† - é™„åŠ åˆ°æ¥å£çš„ä¸€ä¸ªå°çš„ BPF ç¨‹åºå°†åœ¨éœ€è¦æ—¶å‘é€æµé‡å’Œè·¯ç”±åˆ°å¦ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨ k8s-worker1 ä¸Šè¿è¡Œ tcpdumpï¼Œåˆå§‹æ¥æ”¶åˆ°æµé‡çš„åœ°æ–¹ï¼Œä¸ä¼šæ˜¾ç¤ºä»»ä½•æµé‡çš„åŸå› ã€‚å®ƒå·²ç»åœ¨è¿›å…¥ k8s-worker1 çš„ IP å †æ ˆä¹‹å‰è¢«é‡å®šå‘åˆ° k8s-worker2ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬çš„åˆä½œä¼™ä¼´ &lt;a href=&#34;https://docs.cilium.io/en/stable/network/ebpf/intro/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Isovalent&lt;/a&gt; æœ‰å¾ˆå¤šå…³äº eBPF å’Œå†…éƒ¨å·¥ä½œåŸç†çš„ä¿¡æ¯ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¬è¯´è¿‡ eBPFï¼Œè€Œä¸”ä½ å¯¹ Linux å’Œ/æˆ–ç½‘ç»œæ„Ÿå…´è¶£ï¼Œè¯·åŠ¡å¿…æ¢ç´¢ä¸€ä¸‹åŸºç¡€çŸ¥è¯†ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒeBPF å°†åœ¨ä¸ä¹…çš„å°†æ¥å½»åº•æ”¹å˜ Linux çš„ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯å¯¹äºäº‘åŸç”Ÿç¯å¢ƒï¼&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cilium.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium.io &lt;/a&gt;ä¸Šæœ‰å¾ˆå¤šå…³äº eBPF å’Œå†…éƒ¨å·¥ä½œåŸç†çš„ä¿¡æ¯ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰å¬è¯´è¿‡ eBPFï¼Œè€Œä¸”ä½ å¯¹ Linux å’Œ/æˆ–ç½‘ç»œæ„Ÿå…´è¶£ï¼Œè¯·åŠ¡å¿…äº†è§£è‡³å°‘åŸºç¡€çŸ¥è¯†ã€‚åœ¨æˆ‘çœ‹æ¥ï¼ŒeBPF å°†åœ¨ä¸ä¹…çš„å°†æ¥å½»åº•æ”¹å˜ Linux çš„ç½‘ç»œï¼Œç‰¹åˆ«æ˜¯å¯¹äºäº‘åŸç”Ÿç¯å¢ƒï¼&lt;/p&gt;
&lt;h3 id=&#34;hubble-web-gui&#34;&gt;Hubble Web GUI&lt;/h3&gt;
&lt;p&gt;é€šè¿‡ä¸€ä¸ªå·¥ä½œæ­£å¸¸çš„ BGP è®¾ç½®ï¼Œä½¿ Hubble Web GUI å¯¹å¤–ç•Œä¹Ÿå¾ˆç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu1142106117073934098.webp 400w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu4509585424755433923.webp 760w,
               /blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu9447684038416519056.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/expose-loadbalanced-kubernetes-services-with-bgp-cilium/f3_hu1142106117073934098.webp&#34;
               width=&#34;760&#34;
               height=&#34;419&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æœ€åçš„è¯&#34;&gt;æœ€åçš„è¯&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ MetalLB çš„é›†æˆï¼Œä½¿ç”¨ BGP è®¾ç½® Cilium å˜å¾—éå¸¸ç®€å•ï¼Œæ¶ˆé™¤äº†æ˜‚è´µçš„ç½‘ç»œç¡¬ä»¶çš„éœ€æ±‚ã€‚Cilium/BGP çš„è¿™ç§ç»„åˆï¼Œç‰¹åˆ«æ˜¯ä¸åœç”¨ kube-proxy ç»“åˆä½¿ç”¨ï¼Œæ˜¾è‘—é™ä½äº†åˆ°äº‘ç«¯æœåŠ¡çš„å»¶è¿Ÿã€‚å®ƒè¿˜é€šè¿‡ä»…å®£å¸ƒ LoadBalancer çš„ IP åœ°å€æ¥å¢å¼ºå®‰å…¨æ€§å’Œé€æ˜æ€§ã€‚è™½ç„¶è¿™ç§è®¾ç½®ä¸éœ€è¦ Ingress Controllerï¼Œä½†å¯¹äºå¤§å¤šæ•° HTTP æœåŠ¡ä»ç„¶å»ºè®®ä½¿ç”¨ä¸€ä¸ªã€‚åƒ NGINX æˆ– Traefik è¿™æ ·çš„æ§åˆ¶å™¨ï¼Œé€šè¿‡ BGP å…¬å¼€ï¼Œæä¾›åè®®çº§åˆ«çš„é‡å†™å’Œè¯·æ±‚é€Ÿç‡é™åˆ¶ç­‰é‡å¤§ä¼˜åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§äº‘åŸç”Ÿå’ŒåŸºäº Linux çš„ç½‘ç»œçš„è¿›æ­¥ç¡®å®æ˜¯ä¸€ä¸ªé£è·ƒï¼Œæ ‡å¿—ç€ç½‘ç»œæŠ€æœ¯çš„æ¿€åŠ¨äººå¿ƒçš„æ—¶ä»£ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Cilium çš„æ§åˆ¶å¹³é¢å‡çº§ä¹‹è·¯ï¼šxDS API çš„å¼•å…¥ä¸åº”ç”¨</title>
      <link>https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/</link>
      <pubDate>Mon, 29 Jan 2024 20:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/</guid>
      <description>&lt;p&gt;åœ¨è¿™ç¯‡åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨å½“å‰çš„ Cilium æ§åˆ¶å¹³é¢è®¾è®¡ï¼Œ&lt;a href=&#34;https://github.com/cilium/cilium/issues/30283&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¤§è§„æ¨¡éƒ¨ç½²å¯èƒ½å‡ºç°çš„é™åˆ¶çš„ä½ç½®å’ŒåŸå› &lt;/a&gt;ï¼Œä»¥åŠç¤¾åŒºå¦‚ä½•ä½¿ç”¨ CNCF çš„ &lt;a href=&#34;https://github.com/cncf/xds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é€šç”¨æ•°æ®å¹³é¢ (xDS) API&lt;/a&gt; æ¨è¿›è¿™ä¸ªæ¶æ„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;äº†è§£-cilium-çš„æ§åˆ¶å¹³é¢æ¶æ„&#34;&gt;äº†è§£ Cilium çš„æ§åˆ¶å¹³é¢æ¶æ„&lt;/h2&gt;
&lt;p&gt;Cilium éµå¾ªåŸºäºâ€œæ•°æ®å¹³é¢â€å’Œâ€œæ§åˆ¶å¹³é¢â€çš„å¸¸è§ç½‘ç»œæ¶æ„ã€‚åœ¨ Cilium ä¸­ï¼Œæ•°æ®å¹³é¢éƒ¨ç½²åœ¨æ¯ä¸ªä¸»æœºï¼ˆæˆ– Kubernetes èŠ‚ç‚¹ï¼‰ä¸Šï¼ŒåŒ…æ‹¬ç”¨äºå¤„ç† L3/L4 è¿æ¥å’Œç­–ç•¥çš„ eBPF ç¨‹åºã€‚ä¸ºäº†ç®€åŒ–èµ·è§ï¼Œå¯¹äºå®Œæ•´æ€§ï¼ŒCilium è¿˜åœ¨å…¶æ•°æ®å¹³é¢ä¸­ä½¿ç”¨ Envoy ä»£ç†å¤„ç† L7 ç­–ç•¥ï¼Œä½†æˆ‘ä»¬å°†çœç•¥è¿™éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f1_hu8194293115077673131.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f1_hu8831944030708452875.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f1_hu17330839197977540555.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f1_hu8194293115077673131.webp&#34;
               width=&#34;523&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Cilium æ§åˆ¶å¹³é¢ä»¥ cilium-agent å®ˆæŠ¤ç¨‹åºçš„å½¢å¼å®ç°ï¼Œéƒ¨ç½²åœ¨æ¯ä¸ª Kubernetes èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ª cilium-agent éƒ½æ˜¯æ§åˆ¶å¹³é¢çš„å•ç‹¬ã€ç‹¬ç«‹çš„å®ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;cilium-agent è¿æ¥åˆ° Kubernetes API æœåŠ¡å™¨ï¼Œç›‘è§†é…ç½®æ›´æ”¹ï¼Œç„¶åä½¿ç”¨å®ƒæ¥é…ç½®æ•°æ®å¹³é¢ã€‚cilium-agent è¿˜å°†é…ç½®å†™å…¥ Kubernetes APIï¼Œè¡¨ç¤ºæ­£åœ¨å…¶å„è‡ªèŠ‚ç‚¹ä¸Šåˆ›å»ºçš„ç«¯ç‚¹æˆ–æ ‡è¯†ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œå½“åœ¨ Kubernetes èŠ‚ç‚¹ä¸Šå¯åŠ¨ä¸€ä¸ª Pod æ—¶ï¼Œcilium-agent è´Ÿè´£ç¼–å†™ä¸€ä¸ª CiliumEndpoint è‡ªå®šä¹‰èµ„æºï¼ˆCRï¼‰ï¼Œå¹¶å¯èƒ½æ˜¯ä¸€ä¸ªè¡¨ç¤º Pod ç½‘ç»œæ ‡è¯†çš„ CiliumIdentity CRã€‚cilium-agent è¿˜ä¼šæ›´æ–°ä¸æ ‡è¯†å’Œç«¯ç‚¹æ˜ å°„ç›¸å…³çš„èŠ‚ç‚¹ä¸Šçš„ eBPF æ˜ å°„ã€‚å…¶ä»– Kubernetes èŠ‚ç‚¹ä¸Šçš„ cilium-agent ä¹Ÿä¼šç›‘è§†è¿™äº›æ–°çš„ CiliumEndpoint å’Œ CiliumIdentity CR çš„åˆ›å»ºï¼Œå¹¶æ›´æ–°å…¶æœ¬åœ°çš„ eBPF æ•°æ®å¹³é¢ä»¥æ‰§è¡Œç­–ç•¥ã€‚è¿™ç§æœºåˆ¶èƒ½å¤Ÿåè°ƒæ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„å…¨å±€ç­–ç•¥æ‰§è¡Œé…ç½®ï¼Œä»¥ä¾¿æ‰€æœ‰èŠ‚ç‚¹çœ‹åˆ°ç›¸åŒçš„æ‰§è¡Œè¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f2_hu2478068168075565223.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f2_hu11461153252939566865.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f2_hu4187788596575714484.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f2_hu2478068168075565223.webp&#34;
               width=&#34;760&#34;
               height=&#34;501&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æ„å»ºæ§åˆ¶å¹³é¢çš„æœ€ä½³å®è·µ&#34;&gt;æ„å»ºæ§åˆ¶å¹³é¢çš„æœ€ä½³å®è·µ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä»¥å‰ &lt;a href=&#34;https://www.solo.io/blog/building-a-control-plane-for-envoy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ›¾å¤šæ¬¡åœ¨åšå®¢ä¸­&lt;/a&gt; &lt;a href=&#34;https://www.solo.io/blog/guidance-for-building-a-control-plane-for-envoy-part-3-domain-specific-configuration/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®¨è®ºè¿‡æ„å»º&lt;/a&gt; &lt;a href=&#34;https://www.solo.io/blog/why-the-control-plane-matters/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯æ‰©å±•ã€å®‰å…¨ã€é«˜æ•ˆçš„æ§åˆ¶å¹³é¢çš„æœ€ä½³å®è·µ&lt;/a&gt;ã€‚åœ¨æ·±å…¥ç ”ç©¶å¦‚ä½•æ‰©å±• Cilium çš„æ§åˆ¶å¹³é¢ä¹‹å‰ï¼Œæˆ‘ä»¬åº”è¯¥å›é¡¾ä¸€äº›è¿™äº›æœ€ä½³å®è·µã€‚&lt;/p&gt;
&lt;p&gt;ç½‘ç»œæ¶æ„ä¸­çš„æ•°æ®å¹³é¢åº”è¯¥å°½å¯èƒ½ç®€å•ï¼Œæ€§èƒ½é«˜ï¼Œä»¥åŠé«˜æ•ˆå®Œæˆå®ƒéœ€è¦åšçš„äº‹æƒ…ï¼šåœ¨æœ¬ä¾‹ä¸­ï¼Œæ¥å›ä¼ è¾“å­—èŠ‚ï¼Œå®æ–½ç­–ç•¥ï¼Œå¹¶æ‰§è¡Œå®‰å…¨æ€§ã€‚æ§åˆ¶å¹³é¢çš„ä½œç”¨æ˜¯ä¿æŠ¤æ•°æ®å¹³é¢å…å—å¤æ‚æ€§çš„å¹²æ‰°ï¼Œä»¥åŠä»»ä½•åˆ†æ•£æ•°æ®å¹³é¢æ ¸å¿ƒä»»åŠ¡çš„äº‹ç‰©ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œç”¨æˆ·éœ€è¦èƒ½å¤Ÿä»¥æœ€é€‚åˆä»–ä»¬ç”¨æˆ·ä½“éªŒçš„å½¢å¼æŒ‡å®šé…ç½®å’Œç­–ç•¥ã€‚å¾ˆå¤šæ—¶å€™ï¼Œé€šè¿‡æŸç§ &lt;a href=&#34;https://www.solo.io/blog/guidance-for-building-a-control-plane-for-envoy-part-3-domain-specific-configuration/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç‰¹å®šé¢†åŸŸçš„é…ç½®æ ¼å¼&lt;/a&gt; æ¥å®ç°ã€‚ç„¶åéœ€è¦å°†è¿™ç§æ›´é«˜çº§åˆ«çš„ç”¨æˆ·é…ç½®ä¸åŸºç¡€è®¾æ–½çŠ¶æ€ç›¸ç»“åˆï¼Œå¹¶å°†å…¶è½¬åŒ–ä¸ºè¾ƒä½çº§åˆ«çš„æ•°æ®å¹³é¢æ ¼å¼ã€‚è½¬è¯‘æ˜¯ä¸€åŠçš„æˆ˜æ–—ã€‚è¿˜éœ€è¦å°†è¾ƒä½çº§åˆ«çš„é…ç½®åˆ†å‘åˆ°æ•°æ®å¹³é¢ï¼Œå¹¶é«˜æ•ˆåœ°æ‰§è¡Œã€‚è¿™å°±æ˜¯æ§åˆ¶å¹³é¢å‡ºç°åœ¨ç”»é¢ä¸­çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f3_hu4261563001142846400.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f3_hu2968728725743550823.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f3_hu2886241438425704438.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f3_hu4261563001142846400.webp&#34;
               width=&#34;529&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ§åˆ¶å¹³é¢å…è®¸é…ç½®è§£è€¦å¹¶ä¸å¹³å°çš„å…¶ä»–éƒ¨åˆ†é›†æˆï¼Œè¿™äº›éƒ¨åˆ†éšåå¯ä»¥é€šçŸ¥æ•°æ®å¹³é¢ã€‚åœ¨è®¸å¤šæ–¹é¢ï¼Œè¿™ä¸ªå›¾è¡¨ä¸æˆ‘ä»¬æ„å»ºåº”ç”¨ç¨‹åºæ—¶ä½¿ç”¨çš„ &lt;a href=&#34;https://learn.microsoft.com/en-us/azure/architecture/guide/architecture-styles/n-tier&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸‰å±‚æ¶æ„&lt;/a&gt; ç±»ä¼¼ï¼šè¡¨ç¤ºå±‚ï¼Œè§£è€¦çš„ä¸šåŠ¡é€»è¾‘å±‚å’Œæ•°æ®å­˜å‚¨ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f4_hu5427380226969187166.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f4_hu16853436292085068589.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f4_hu10660222131653048004.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f4_hu5427380226969187166.webp&#34;
               width=&#34;533&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨ç½‘ç»œæ¶æ„çš„æƒ…å†µä¸‹ï¼Œæ§åˆ¶å¹³é¢å±‚å°†å¤„ç†è¯»å–/å†™å…¥ Kubernetes API å’Œåˆ›å»ºç½‘ç»œæ ‡è¯†ç­‰æ•æ„Ÿæ•°æ®ã€‚ç”±äºå®ƒæ˜¯ä¸€ä¸ªå•ç‹¬çš„å±‚ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œå®‰å…¨å’Œç¡¬åŒ–å¤„ç†ï¼Œå¹¶æ¶ˆé™¤æ•°æ®å¹³é¢éœ€è¦æ‰§è¡Œè¿™äº›ä»»åŠ¡çš„æƒé™ã€‚åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼Œè™½ç„¶å¼€å§‹æ—¶æ›´ç®€å•ï¼Œä½†åˆå¹¶ä¸€äº›å±‚ä¼šå¯¼è‡´æ•ˆç‡ä½ä¸‹ã€å®‰å…¨é—®é¢˜å’Œæ‰©å±•/è€¦åˆé—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cilium-æ§åˆ¶å¹³é¢æ¶æ„çš„æ‰©å±•è€ƒè™‘&#34;&gt;Cilium æ§åˆ¶å¹³é¢æ¶æ„çš„æ‰©å±•è€ƒè™‘&lt;/h2&gt;
&lt;p&gt;é›†ç¾¤ä¸­çš„æ¯ä¸ª cilium-agent è´Ÿè´£å°†å…¨å±€é›†ç¾¤é…ç½®æ›´æ–°åˆ°å…¶æœ¬åœ°æ•°æ®å¹³é¢é…ç½®ã€‚æ¯ä¸ª cilium-agent å¯èƒ½ä¼šç›‘è§†å¤šè¾¾ 15 ç§ CRD ç±»å‹ã€‚&lt;/p&gt;
&lt;p&gt;éšç€é›†ç¾¤åœ¨èŠ‚ç‚¹ã€Podã€å‘½åç©ºé—´å’Œç½‘ç»œç­–ç•¥æ–¹é¢çš„è§„æ¨¡å¢é•¿ï¼Œæ¯ä¸ª cilium-agent éœ€è¦æ‰§è¡Œçš„å·¥ä½œé‡ä¹Ÿä¼šå¢åŠ ã€‚ä¸ºäº†æœåŠ¡å’Œæ›´æ–°æ‰€æœ‰è¿™äº›çŠ¶æ€ï¼Œä¼šå¯¹ Kubernetes apiserver é€ æˆå‹åŠ›ï¼Œå¯èƒ½å¯¼è‡´ &lt;a href=&#34;https://github.com/cilium/cilium/issues/29127&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é—®é¢˜&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f5_hu16030348651474974304.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f5_hu54815831044306071.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f5_hu9468284516964515973.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f5_hu16030348651474974304.webp&#34;
               width=&#34;760&#34;
               height=&#34;478&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨å¤§è§„æ¨¡éƒ¨ç½²ä¸­ï¼Œè¿™ç§å¯¹ Kubernetes API æœåŠ¡å™¨çš„å‹åŠ›å¯èƒ½æœ€ç»ˆä¼šå‡æ…¢ &lt;em&gt;ç”šè‡³å¯¼è‡´&lt;/em&gt; é›†ç¾¤ä¸­çš„æ‰€æœ‰æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æŸ¥çœ‹é›†ç¾¤ä¸­çš„å¸¸è§æ“ä½œä»¥åŠ cilium-agent å¤„ç†å®ƒçš„æ–¹å¼æ—¶ï¼Œå…¨å±€é…ç½®çŠ¶æ€å¯¹æ¯ä¸ªèŠ‚ç‚¹çš„å½±å“ç¡®å®å¼€å§‹æ”¾å¤§ï¼šå·¥ä½œè´Ÿè½½å’Œå‘½åç©ºé—´è¢«æ ‡è®°ã€é‡æ–°æ ‡è®°æˆ–å–æ¶ˆæ ‡è®°ã€‚&lt;/p&gt;
&lt;p&gt;cilium-agent è´Ÿè´£ä¸ºè°ƒåº¦åˆ°å…¶èŠ‚ç‚¹ä¸Šçš„ Pod ç¼–å†™ CiliumEndpoint å’Œ CiliumIdentity èµ„æºã€‚ç”±äºè¿™äº›èµ„æºä¾èµ–äº Pod å’Œå‘½åç©ºé—´æ ‡ç­¾çš„ç»„åˆï¼Œæ ‡ç­¾çš„æ›´æ”¹å°†å¯¼è‡´æ‰€æœ‰ä¾èµ–èµ„æºçš„æ›´æ–°ã€‚è¿™ä¼šå¯¼è‡´å¤§é‡çš„å†™æ“ä½œå’Œç›¸åº”çš„è¯»å–æ“ä½œï¼Œå› ä¸ºæ­¤çŠ¶æ€éšåä¼šä¼ æ’­åˆ°æ‰€æœ‰ cilium-agentï¼Œå®ƒä»¬å¿…é¡»åšå‡ºååº”å¹¶é‡æ–°é…ç½®å…¶æœ¬åœ°æ•°æ®å¹³é¢ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cilium.io/v2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;CiliumIdentity&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;50568&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;io.cilium.k8s.policy.cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;io.cilium.k8s.policy.serviceaccount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;io.kubernetes.pod.namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;security-labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.cilium.k8s.namespace.labels.team&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;loyalty&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.cilium.k8s.namespace.labels.version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v10.45&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.cilium.k8s.namespace.labels.kubernetes.io/metadata.name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.cilium.k8s.policy.cluster&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.cilium.k8s.policy.serviceaccount&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;sleep-v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:io.kubernetes.pod.namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;k8s:version&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;strong&gt;ä»£ç æ¸…å• 1ï¼š&lt;code&gt;CiliumIdentity&lt;/code&gt; èµ„æºç»“åˆäº† &lt;em&gt;Pod&lt;/em&gt; å’Œ &lt;em&gt;å‘½åç©ºé—´&lt;/em&gt; æ ‡ç­¾ã€‚å¯¹ä»»ä¸€è€…çš„æ›´æ”¹éƒ½ä¼šå¼ºåˆ¶é‡æ–°è®¡ç®—å¹¶ç”Ÿæˆæ–°çš„ &lt;code&gt;CiliumIdentity&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å¯¹é›†ç¾¤ä¸­çš„å‘½åç©ºé—´è¿›è¡Œæ ‡è®°ç­‰æ“ä½œå¯¹äº Cilium å¯èƒ½éå¸¸æ˜‚è´µï¼Œå¹¶ä¸”æœ‰å¯èƒ½å¯¼è‡´ API æœåŠ¡å™¨æ“ä½œå‡æ…¢åˆ°çˆ¬è¡Œçš„ç¨‹åº¦ï¼ˆ&lt;a href=&#34;https://docs.cilium.io/en/stable/operations/performance/scalability/identity-relevant-labels/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯·å‚é˜…ç”¨äºæ ‡è¯†ç›®çš„åŒ…æ‹¬/æ’é™¤æ ‡ç­¾çš„å»ºè®®&lt;/a&gt;ï¼‰ã€‚ä¾‹å¦‚ï¼Œåœ¨ä¸­ç­‰è§„æ¨¡é›†ç¾¤ä¸­æ›´æ”¹å‘½åç©ºé—´çš„æ ‡ç­¾å¯èƒ½ä¼šå¯¼è‡´è¶³å¤Ÿå¤šçš„ cilium-agent å¯¼è‡´ Kubernetes API æœåŠ¡å™¨å“åº”å»¶è¿Ÿçº¦ &lt;strong&gt;4 åˆ†é’Ÿ&lt;/strong&gt;ã€‚è¿™å°†æœ‰æ•ˆåœ°ä½¿é›†ç¾¤ä¸Šçš„æ‰€æœ‰æ“ä½œåœæ»ä¸å‰ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä»¥ä¸‹ç¯å¢ƒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;200 ä¸ªèŠ‚ç‚¹çš„ Kubernetes é›†ç¾¤&lt;/li&gt;
&lt;li&gt;5 ä¸ªå‘½åç©ºé—´&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªå‘½åç©ºé—´æœ‰ 50 ä¸ªéƒ¨ç½²&lt;/li&gt;
&lt;li&gt;æ¯ä¸ªéƒ¨ç½²æœ‰ 80 ä¸ªå‰¯æœ¬ï¼ˆæ€»å…± 20,000 ä¸ª Podï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä¸€æ¬¡æ›´æ–°è·¨å‘½åç©ºé—´çš„æ ‡ç­¾çš„æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ° CPU åˆ©ç”¨ç‡æ€¥å‰§ä¸Šå‡ï¼Œçº¦ä¸º 150%ï¼Œå¹¶ä¸”å†…å­˜åœ¨æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šå‡åˆ°çº¦ 1 GBã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„-cpu-å’Œå†…å­˜å³°å€¼&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1ï¼šæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ CPU å’Œå†…å­˜å³°å€¼&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g1_hu17486889627407700744.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g1_hu16263909123267190212.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g1_hu1838474423053320396.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g1_hu17486889627407700744.webp&#34;
               width=&#34;760&#34;
               height=&#34;210&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1ï¼šæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ CPU å’Œå†…å­˜å³°å€¼
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨æ•´ä¸ªé›†ç¾¤çš„æ‰€æœ‰èŠ‚ç‚¹ä¸ŠåŒæ—¶æé«˜ CPU å’Œå†…å­˜æ˜¯ä¸å¸Œæœ›çœ‹åˆ°çš„è¡Œä¸ºï¼Œç„¶è€Œæ›´ä¸¥é‡çš„æ˜¯ cilium-agent äº‹ä»¶çš„è¯»å†™å¦‚ä½•å½±å“ Kubernetes API æœåŠ¡å™¨çš„å»¶è¿Ÿã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°å»¶è¿Ÿå¢é•¿åˆ° 3 åˆ° 4 &lt;em&gt;åˆ†é’Ÿ&lt;/em&gt;ã€‚è¿™è‚¯å®šä¼šå¯¼è‡´å„ç§ç±»å‹çš„åœæœºï¼ä¸å¹¸çš„æ˜¯ï¼Œç”±äºè¿™ç§æ§åˆ¶å¹³é¢æ¶æ„ï¼Œé€šè¿‡å¢åŠ å®¹é‡æ¥å¤„ç†æ‰©å±•é—®é¢˜çš„å…¸å‹æ–¹æ³•ä¸èµ·ä½œç”¨ï¼›å®é™…ä¸Šï¼Œæ·»åŠ æ›´å¤šèŠ‚ç‚¹å’Œ/æˆ–æ›´å¤šå·¥ä½œè´Ÿè½½ä¼šæ”¾å¤§è¿™ç§è¡Œä¸ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2kubernetes-api-æœåŠ¡å™¨å»¶è¿Ÿå¢åŠ åˆ°-3---4-åˆ†é’Ÿ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2ï¼šKubernetes API æœåŠ¡å™¨å»¶è¿Ÿå¢åŠ åˆ° 3 - 4 åˆ†é’Ÿ&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g2_hu7795722616314403305.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g2_hu2191967409548707840.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g2_hu10717639184421141124.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g2_hu7795722616314403305.webp&#34;
               width=&#34;760&#34;
               height=&#34;312&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2ï¼šKubernetes API æœåŠ¡å™¨å»¶è¿Ÿå¢åŠ åˆ° 3 - 4 åˆ†é’Ÿ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;å‡è½»-kubernetes-api-æœåŠ¡å™¨çš„å‹åŠ›&#34;&gt;å‡è½» Kubernetes API æœåŠ¡å™¨çš„å‹åŠ›&lt;/h2&gt;
&lt;p&gt;å¯¹äºè¾ƒå¤§çš„ Cilium é›†ç¾¤ï¼Œæ‚¨å¯ä»¥é€šè¿‡ä½¿ç”¨&lt;a href=&#34;https://docs.cilium.io/en/latest/kvstore/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸“ç”¨çš„é”®å€¼å­˜å‚¨&lt;/a&gt; æ¥å‡è½» Kubernetes API æœåŠ¡å™¨ä¸Šçš„å‹åŠ›ã€‚é”®å€¼å­˜å‚¨ç”¨äºå­˜å‚¨å·¥ä½œè´Ÿè½½æ ‡è¯†ã€ç«¯ç‚¹å’Œ IP åˆ°æ ‡è¯†æ˜ å°„ç­‰å†…å®¹ã€‚Cilium ä¸å†å°†æ­¤ä¿¡æ¯å­˜å‚¨åœ¨ Kubernetes è‡ªå®šä¹‰èµ„æºï¼ˆCRDï¼‰ä¸­ï¼Œè€Œæ˜¯åœ¨å…¶è‡ªå·±çš„æ•°æ®åº“ä¸­ç›´æ¥ç›‘è§†ã€æ“ä½œå’Œå†™å…¥å¯¹è±¡ã€‚Cilium Helm å›¾è¡¨æ”¯æŒå°† etcd ä½œä¸ºä¸“ç”¨é”®å€¼å­˜å‚¨æ¥è¿›è¡Œå®‰è£…ï¼Œä»¥æ»¡è¶³æ­¤ç›®çš„ã€‚&lt;/p&gt;
&lt;p&gt;éšç€é›†ç¾¤çš„å¢é•¿ï¼Œä½¿ç”¨ kv-store æ¥å¸è½½ Cilium å¯¹è±¡çš„è¯»/å†™æ“ä½œå¯èƒ½æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œè€Œä¸æ˜¯ç»™ Kubernetes API æœåŠ¡å™¨æ–½åŠ å‹åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šCilium è¿˜è¿›è¡Œäº†å…¶ä»–ä¼˜åŒ–ï¼Œä»¥å‡è½» Kubernetes API æœåŠ¡å™¨çš„å‹åŠ›ï¼Œä¾‹å¦‚ç­–ç•¥çŠ¶æ€æ›´æ–°ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&#34;https://docs.cilium.io/en/stable/internals/cilium_operator/#policy-status-update&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;k8s-events-handover æ–‡æ¡£&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬åœ¨å­˜åœ¨ kv-store çš„æƒ…å†µä¸‹é‡æ–°è¿è¡Œå…ˆå‰çš„æµ‹è¯•ï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°å¯¹ Kubernetes API æœåŠ¡å™¨çš„å‹åŠ›å‡è½»ï¼Œå°½ç®¡ CPU å¯èƒ½æ²¡æœ‰å‡è½»ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3æ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„-cpu-å³°å€¼å†…å­˜ä¿æŒåœ¨-300-400-mb-èŒƒå›´å†…&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3ï¼šæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ CPU å³°å€¼ï¼Œå†…å­˜ä¿æŒåœ¨ 300-400 MB èŒƒå›´å†…&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g3_hu8766193418619210519.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g3_hu15609787638247514164.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g3_hu15499874654379155262.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g3_hu8766193418619210519.webp&#34;
               width=&#34;760&#34;
               height=&#34;174&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3ï¼šæ‰€æœ‰èŠ‚ç‚¹ä¸Šçš„ CPU å³°å€¼ï¼Œå†…å­˜ä¿æŒåœ¨ 300-400 MB èŒƒå›´å†…
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸å…ˆå‰æƒ…å†µä¸‹çš„ 150% CPU æ¶ˆè€—ä¸åŒï¼ŒCPU åœ¨å¤§çº¦ 100% å·¦å³æ³¢åŠ¨ï¼Œè€Œå†…å­˜ä¿æŒåœ¨å¤§çº¦ 300 åˆ° 400 MB çš„èŒƒå›´å†…ã€‚è¿™æ˜¯å› ä¸ºå¯¹æ¯ä¸ª Pod å’Œæ¯ä¸ªæ ‡è¯†ï¼ˆCilium åœ¨æ›´æ”¹æ ‡ç­¾æ—¶åˆ›å»ºæ‰€æœ‰æ–°æ ‡è¯†ï¼Œå¹¶ä¸”å¿…é¡»æ›´æ–°å¼•ç”¨æ—§æ ‡è¯†çš„æ‰€æœ‰ eBPF æ˜ å°„çš„ CiliumEndpoint å’Œ CiliumIdentity å¯¹è±¡çš„é‡æ–°è®¡ç®—å’Œç”Ÿæˆéœ€è¦ CPU è®¡ç®—èµ„æºæ¥å®Œæˆï¼Œæ— è®ºä½¿ç”¨ä½•ç§åå¤‡å­˜å‚¨ï¼ˆCRDã€kv-store ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬è§‚å¯Ÿ kv-storeï¼Œæˆ‘ä»¬ä¼šçœ‹åˆ°åœ¨æ­¤å‘½åç©ºé—´æ ‡ç­¾äº‹ä»¶æœŸé—´ï¼Œäº‹ä»¶æ“ä½œ/ç§’å’Œå»¶è¿Ÿä¼šæ€¥å‰§ä¸Šå‡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-4kv-store-ä¸Šçš„äº‹ä»¶æ“ä½œå’Œå»¶è¿Ÿåœ¨æ­¤å‘½åç©ºé—´æ ‡ç­¾äº‹ä»¶æœŸé—´æ€¥å‰§ä¸Šå‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4ï¼škv-store ä¸Šçš„äº‹ä»¶æ“ä½œå’Œå»¶è¿Ÿåœ¨æ­¤å‘½åç©ºé—´æ ‡ç­¾äº‹ä»¶æœŸé—´æ€¥å‰§ä¸Šå‡&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g4_hu5162100211635706179.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g4_hu8027949023168315035.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g4_hu17981861380060744388.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g4_hu5162100211635706179.webp&#34;
               width=&#34;760&#34;
               height=&#34;183&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4ï¼škv-store ä¸Šçš„äº‹ä»¶æ“ä½œå’Œå»¶è¿Ÿåœ¨æ­¤å‘½åç©ºé—´æ ‡ç­¾äº‹ä»¶æœŸé—´æ€¥å‰§ä¸Šå‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§ç‰¹æ®Šæƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çœ‹åˆ° kv-store æ‰¿å—äº†ç›¸å½“å¤§çš„è´Ÿè½½ï¼Œé€šè¿‡äº‹ä»¶ IOï¼Œæˆ‘ä»¬çœ‹åˆ° kv-store è°ƒç”¨çš„å»¶è¿Ÿé™ä½åˆ°çº¦ 15 ç§’å·¦å³ã€‚æ€»ä¹‹ï¼Œè¿™å¯¹äºæ•´ä¸ªé›†ç¾¤æ“ä½œè€Œè¨€è¦å¥½å¾—å¤šï¼Œè€Œä¸æ˜¯ç”¨è¯·æ±‚ä½¿ Kubernetes API æœåŠ¡å™¨é¥±å’Œã€‚äº‹å®ä¸Šï¼Œåœ¨å›¾ 5 ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° Kubernetes API æœåŠ¡å™¨çš„å»¶è¿Ÿä¿æŒåœ¨ 10 åˆ° 40 æ¯«ç§’çš„å¯æ¥å—èŒƒå›´å†…ï¼Œè€Œåœ¨å…ˆå‰çš„ç¤ºä¾‹ä¸­ï¼Œå»¶è¿Ÿå‡é«˜åˆ° 4 åˆ†é’Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5kubernetes-api-server-å»¶è¿Ÿåœ¨-10-åˆ°-40ms-ä¹‹é—´&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5ï¼šKubernetes API Server å»¶è¿Ÿåœ¨ 10 åˆ° 40ms ä¹‹é—´&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g5_hu15786867033393857353.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g5_hu5725239903038200334.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g5_hu4960722962006109899.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g5_hu15786867033393857353.webp&#34;
               width=&#34;760&#34;
               height=&#34;305&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5ï¼šKubernetes API Server å»¶è¿Ÿåœ¨ 10 åˆ° 40ms ä¹‹é—´
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ kv-store åç«¯æ¥å­˜å‚¨ Cilium å¯¹è±¡æ˜¯ä¸€ç§ç¼“è§£ Kubernetes API æœåŠ¡å™¨å‹åŠ›çš„å¥½æ–¹æ³•ï¼Œä½†å®ƒä¹Ÿæœ‰å…¶ç¼ºç‚¹ã€‚ç°åœ¨æœ‰ä¸¤ä¸ªæŒä¹…å­˜å‚¨éœ€è¦ç»´æŠ¤ï¼Œè€Œä¸”éšç€è§„æ¨¡çš„å¢åŠ ï¼Œè¿ç»´è´Ÿæ‹…ä¹Ÿå¢åŠ ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œæ•°æ®åº“æˆ–æŒä¹…å­˜å‚¨ï¼ˆæ€»ä½“æ¥è¯´ï¼‰ä»¥æ”¯æŒè§„æ¨¡åŒ–å¹¶éæ˜“äº‹ã€‚å¦‚æœå¤±å»ä¸€è‡´æ€§ï¼Œæ¢å¤è¿‡ç¨‹æ˜¯å¿…éœ€çš„ï¼Œå› ä¸ºç°åœ¨æœ‰ä¸¤ä¸ªâ€œçœŸç›¸æºâ€ã€‚è®¸å¤šå¹³å°å®Œå…¨ç®¡ç† Kubernetes API æœåŠ¡å™¨åŠå…¶å­˜å‚¨ï¼Œä½† kv-store å¹¶ä¸æ˜¯å¦‚æ­¤ã€‚ç”±äºç»å¤§å¤šæ•°è´Ÿè½½æ˜¯è¯»å–æ“ä½œï¼Œç¼“å­˜å°†åœ¨å‡å°‘è¿ç»´å¤æ‚æ€§çš„åŒæ—¶äº§ç”Ÿç›¸åŒçš„æ”¹è¿›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½¿ç”¨-xds-æ”¹è¿›-cilium-çš„æ§åˆ¶å¹³é¢æ‰©å±•å®‰å…¨æ€§å’Œæ•ˆç‡&#34;&gt;ä½¿ç”¨ xDS æ”¹è¿› Cilium çš„æ§åˆ¶å¹³é¢æ‰©å±•ã€å®‰å…¨æ€§å’Œæ•ˆç‡&lt;/h2&gt;
&lt;p&gt;å¦‚æœæˆ‘ä»¬å¯ä»¥å…¼é¡¾ä¸¤å…¨å‘¢ï¼Ÿæ—¢å‡è½» Kubernetes API æœåŠ¡å™¨çš„å‹åŠ›ï¼Œåˆæ¶ˆé™¤ç»´æŠ¤å•ç‹¬æ•°æ®å­˜å‚¨çš„æ˜‚è´µç”Ÿäº§æ“ä½œçš„éœ€è¦ï¼Ÿç”šè‡³å¯èƒ½è§£å†³ä¸€äº›å…¶ä»–å°šæœªè§£å†³çš„ Cilium æ‰©å±•å’Œå®‰å…¨æ€§é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ Solo.ioï¼Œæˆ‘ä»¬å¾ˆé«˜å…´ä¸º Cilium ç¤¾åŒºä¸­æ›´å¹¿æ³›çš„ xDS å·¥ä½œä½œå‡ºè´¡çŒ®ï¼Œå¹¶å¸®åŠ©æ¨åŠ¨è¯¥é¡¹ç›®æœç€å¯æ‰©å±•ã€å®‰å…¨å’Œé«˜æ•ˆçš„æ§åˆ¶å¹³é¢è¿ˆè¿›ã€‚ä½¿ç”¨&lt;a href=&#34;https://github.com/cncf/xds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;xDS åè®®&lt;/a&gt;ä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨é›†ç¾¤ä¸­æ‰©å±•åˆ°æ•°åƒç”šè‡³æ•°ä¸‡ä¸ªèŠ‚ç‚¹ã€‚è¿™ç§æ–¹æ³•è§£å†³äº†ä¸Šé¢è®¨è®ºçš„è®¸å¤šé—®é¢˜ï¼Œä»¥åŠå…¶ä»–é—®é¢˜ï¼Œå¦‚å•èŠ‚ç‚¹å¦¥åå½±å“èŒƒå›´å’Œè§„æ¨¡ä¸Šçš„ CiliumIdentity é‡å¤ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/cncf/xds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;xDS åè®®&lt;/a&gt;æœ€åˆæ˜¯ä¸€ç§åŠ¨æ€é…ç½®&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy ä»£ç†&lt;/a&gt;çš„æ–¹å¼ï¼Œä½†æ˜¯å®ƒå»ºç«‹çš„ç†å¿µæ˜¯å¯ä»¥ç”¨æ¥æ”¯æŒâ€œé€šç”¨æ•°æ®å¹³é¢â€ã€‚è¯¥åè®®å·²æˆä¸ºåœ¨å¤šä¸ªèŠ‚ç‚¹ä¹‹é—´åŒæ­¥çŠ¶æ€çš„æœ‰æ•ˆæ–¹å¼ï¼Œ&lt;a href=&#34;https://github.com/cncf/xds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç°åœ¨ç”± CNCF å·¥ä½œç»„ç®¡ç†&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ç»ˆï¼Œæˆ‘ä»¬å¸Œæœ›æ¶ˆé™¤æ¯ä¸ª cilium-agent æ‰€åšçš„å†—ä½™å·¥ä½œï¼Œå°†è¯¸å¦‚æ ‡è¯†åˆ›å»ºä¹‹ç±»çš„å¤æ‚ä¸”æƒé™æ•æ„Ÿçš„æ“ä½œé›†ä¸­åœ¨ä¸€èµ·ï¼Œå¹¶ä»¥é«˜æ•ˆçš„æ–¹å¼ä¸ºä»£ç†æä¾›çŠ¶æ€ï¼ŒåŒæ—¶ä¸æŸå®³ Kubernetes ä½œä¸ºæ•´ä½“çš„å¯é æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å°†ä¸å†è®©æ¯ä¸ª cilium-agent å……å½“ç‹¬ç«‹çš„æ§åˆ¶å¹³é¢ï¼Œè€Œæ˜¯è€ƒè™‘è®© cilium-agent å……å½“æ™ºèƒ½é›†ä¸­æ§åˆ¶å¹³é¢çš„ç®€å•åªè¯»å®¢æˆ·ç«¯ã€‚æ§åˆ¶å¹³é¢å°†ä¿æŠ¤ä»£ç†å…å—å¤æ‚å’Œæƒé™æ•æ„Ÿçš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;cilium-agentï¼ˆç°åœ¨å±äºæ•°æ®å¹³é¢çš„ä¸€éƒ¨åˆ†ï¼‰ä¸æ§åˆ¶å¹³é¢ä¹‹é—´çš„é€šä¿¡å°†é‡‡ç”¨&lt;a href=&#34;https://github.com/cncf/xds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;xDS åè®®&lt;/a&gt;ã€‚æ•°æ®å¹³é¢ä¸å…è®¸ä»æ•°æ®å¹³é¢åˆ°æ§åˆ¶å¹³é¢çš„å†™æ“ä½œï¼Œå› æ­¤ cilium-agent ä¸éœ€è¦å¯¹åç«¯å­˜å‚¨ï¼ˆCRD/kv-storeï¼‰å…·æœ‰å†™å…¥è®¿é—®æƒé™ã€‚xDS æ§åˆ¶å¹³é¢æœåŠ¡å¯ä»¥å¾—åˆ°å®‰å…¨åŠ å›ºï¼Œæ˜¯å”¯ä¸€éœ€è¦æ”¯æŒå¯¹ Kubernetes API æœåŠ¡å™¨è¿›è¡Œè¯»/å†™æ“ä½œçš„ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/f6_hu18164745346281393999.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/f6_hu14878595511585962512.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/f6_hu7420436872122181644.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/f6_hu18164745346281393999.webp&#34;
               width=&#34;760&#34;
               height=&#34;562&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™ç§æ¶æ„å‡è½»äº† Kubernetes API æœåŠ¡å™¨çš„è´Ÿè½½ï¼Œå¹¶ä¸”ä¸éœ€è¦ä»»ä½•å¤–éƒ¨ç®¡ç†çš„æ•°æ®å­˜å‚¨ã€‚å®ƒçœ‹èµ·æ¥ä¹Ÿæ›´æ¥è¿‘ä¹‹å‰è®¨è®ºçš„ä¸‰å±‚æ§åˆ¶å¹³é¢æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-6xds-å®ç°çš„åˆå§‹æµ‹è¯•æ˜¾ç¤º-cpu-å’Œå†…å­˜ä½¿ç”¨çš„é¢„æœŸè¡Œä¸º&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 6ï¼šxDS å®ç°çš„åˆå§‹æµ‹è¯•æ˜¾ç¤º CPU å’Œå†…å­˜ä½¿ç”¨çš„é¢„æœŸè¡Œä¸º&#34; srcset=&#34;
               /blog/scaling-cilium-to-new-heights-with-xds/g6_hu17778559167326793251.webp 400w,
               /blog/scaling-cilium-to-new-heights-with-xds/g6_hu13540862992585216661.webp 760w,
               /blog/scaling-cilium-to-new-heights-with-xds/g6_hu387173476530170890.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-cilium-to-new-heights-with-xds/g6_hu17778559167326793251.webp&#34;
               width=&#34;760&#34;
               height=&#34;385&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 6ï¼šxDS å®ç°çš„åˆå§‹æµ‹è¯•æ˜¾ç¤º CPU å’Œå†…å­˜ä½¿ç”¨çš„é¢„æœŸè¡Œä¸º
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æ¶æ„ä¸­ï¼Œæˆ‘ä»¬ç¡®å®çœ‹åˆ°äº† xDS æ§åˆ¶å¹³é¢ pods ä¸­çš„ CPU å’Œå†…å­˜å¼€é”€ï¼Œæ­£å¦‚é¢„æœŸçš„é‚£æ ·ï¼Œæ¯ä¸ªèŠ‚ç‚¹ä»ç„¶éœ€è¦å¤„ç† eBPF æ•°æ®å¹³é¢çš„ä¸€äº› CPU/å†…å­˜å¤„ç†å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ¨¡å‹å¸¦æ¥çš„å…¶ä»–å¥½å¤„åŒ…æ‹¬åœ¨èŠ‚ç‚¹å—æŸæ—¶æ›´å°çš„å½±å“èŒƒå›´ï¼Œä»¥åŠæ¶ˆé™¤äº† cilium-agent åˆ›å»ºçš„é‡å¤æ ‡è¯†ã€‚åœ¨åŸå§‹æ¶æ„ï¼ˆCRD æˆ– kv-storeï¼‰ä¸­ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æœ‰ä¸€ä¸ªå®Œæ•´çš„æ§åˆ¶å¹³é¢ï¼Œéœ€è¦ç‰¹æ®Šæƒé™æ¥è¯»å–å’Œå†™å…¥&lt;code&gt;CiliumEndpoints&lt;/code&gt;å’Œ&lt;code&gt;CiliumIdentity&lt;/code&gt;ã€‚å¦‚æœæŸä¸ªèŠ‚ç‚¹ä¸Šçš„ cilium-agent å—åˆ°å¦¥åï¼Œé‚£ä¹ˆæ•´ä¸ªæ§åˆ¶å¹³é¢å°†å—åˆ°å¨èƒï¼Œå¹¶ä½¿æ”»å‡»è€…èƒ½å¤Ÿå½±å“å…¶ä»–èŠ‚ç‚¹ã€‚è¿™å¯èƒ½å¯¼è‡´æ•´ä¸ªé›†ç¾¤å¦¥åã€‚åœ¨ xDS æ¨¡å‹ä¸­ï¼Œcilium-agent è¢«å…è®¸ä»æ§åˆ¶å¹³é¢è¯»å–æ•°æ®ï¼ˆä¸å…è®¸å†™å…¥ï¼‰ï¼Œå•ä¸ª cilium-agent çš„å¦¥åä¸ä¼šç»™äºˆå¯¹æ•´ä¸ªæ§åˆ¶å¹³é¢æˆ–é›†ç¾¤çš„è®¿é—®æƒé™ã€‚æ­£å¦‚å‰é¢æåˆ°çš„ï¼ŒxDS æ§åˆ¶å¹³é¢è¢«è§†ä¸ºç‰¹æƒç»„ä»¶ï¼Œå¯ä»¥è¿›è¡Œé”å®šå’Œå®‰å…¨è®¾ç½®ï¼Œç”šè‡³å¯ä»¥å®Œå…¨åœ¨é›†ç¾¤ä¹‹å¤–è¿è¡Œã€‚&lt;/p&gt;
&lt;p&gt;xDS æ–¹æ³•çš„å¦ä¸€ä¸ªå¥½å¤„æ˜¯é€šè¿‡é›†ä¸­æ ‡è¯†åˆ›å»ºæ¥æ¶ˆé™¤ Cilium ä¸­é‡å¤æ ‡è¯†çš„ç”Ÿæˆã€‚åœ¨ç°æœ‰æ¨¡å‹ä¸­ï¼Œæ¯ä¸ª cilium-agent éƒ½ç‹¬ç«‹å……å½“æ§åˆ¶å¹³é¢ï¼Œä¸å…¶ä»–èŠ‚ç‚¹éš”ç¦»ï¼Œæ­£å¦‚åœ¨ç°æœ‰æ¨¡å‹ä¸­ï¼Œå®ƒè¯•å›¾åšå‡ºå¯èƒ½æ˜¯é‡å¤çš„å†³ç­–ã€‚ä¾‹å¦‚ï¼Œå½“ Pod åˆ†é…åˆ°èŠ‚ç‚¹æ—¶ï¼ŒCNI è´Ÿè´£è®¾ç½®ç½‘ç»œç«¯ç‚¹ï¼Œå½“ cilium-agent è¯†åˆ«åˆ°ä¸€ä¸ªæ–°çš„ç«¯ç‚¹ï¼Œå®ƒæ²¡æœ‰ç°æœ‰çš„&lt;code&gt;CiliumIdentity&lt;/code&gt;æ—¶ï¼Œå®ƒå°†å°è¯•åˆ›å»ºå®ƒã€‚å¦‚æœå‘½åç©ºé—´æ ‡ç­¾å‘ç”Ÿæ›´æ”¹å¹¶ä¸”éœ€è¦é‡æ–°è®¡ç®—æ‰€æœ‰æ ‡è¯†ï¼Œé‚£ä¹ˆä¹Ÿä¼šå‘ç”Ÿç›¸åŒçš„æƒ…å†µã€‚ç”±äºæ ‡è¯†åˆ›å»ºåœ¨å¤šä¸ªèŠ‚ç‚¹ä¸Šç‹¬ç«‹è¿›è¡Œï¼Œå› æ­¤æœ‰å¾ˆå¤§æœºä¼šä¸ºç›¸åŒæ ‡è¯†åˆ›å»ºå¤šä¸ª&lt;code&gt;CiliumIdentity&lt;/code&gt;ï¼ˆåœ¨æç«¯æƒ…å†µä¸‹ï¼Œ&lt;a href=&#34;https://docs.google.com/document/d/1Hcc_2mB9OOUxrqQgZ-gSYDPnLYE_If_TCzVbUGDOdGM/edit?pli=1#heading=h.yzvq0akbw7z9&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¦‚æ­¤æè¿°çš„æ˜“äºé‡ç°&lt;/a&gt;ï¼‰ã€‚åœ¨ xDS æ–¹æ³•ä¸­ï¼Œ&lt;code&gt;CiliumIdentity&lt;/code&gt;åœ¨é›†ä¸­åˆ›å»ºï¼Œä»è€Œæ¶ˆé™¤äº†è¿™ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;Cilium åœ¨ eBPF åŸºç¡€ä¸Šæ„å»ºäº†å¼ºå¤§çš„æ•°æ®å¹³é¢ï¼Œä½†è¦ä½¿ Cilium åœ¨è§„æ¨¡ä¸Šæœ‰æ•ˆè¿è¡Œï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ xDS åè®®æ¥æ”¹è¿›æ§åˆ¶å¹³é¢æ¶æ„ã€‚xDS æ˜¯ä¸€ç§é«˜æ•ˆçš„åè®®ï¼Œå…è®¸æˆ‘ä»¬åˆ©ç”¨å¤šå¹´æ¥å­¦åˆ°çš„æ„å»ºæ§åˆ¶å¹³é¢çš„æœ€ä½³å®è·µã€‚äº‹å®ä¸Šï¼Œå¦‚æœæˆ‘ä»¬å°† xDS æ§åˆ¶å¹³é¢ &lt;a href=&#34;https://docs.google.com/document/d/1U4pO_dTaHERKOtrneNA8njW19HSVbq3sBM3x8an4878/edit#heading=h.ghzkbpzc9oea&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›´æ¥æ„å»ºåˆ° cilium-operator ä¸­&lt;/a&gt;ï¼Œé‚£ä¹ˆä»è¿™ä¸ªå®æ–½ä¸­ä¸ä¼šå¢åŠ æ–°çš„å¤æ‚æ€§ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>DoorDash çš„æœåŠ¡ç½‘æ ¼ä¹‹æ—…ï¼šå¦‚ä½•å®ç°é«˜æ•ˆçš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±</title>
      <link>https://cloudnativecn.com/blog/doordash-service-mesh/</link>
      <pubDate>Thu, 18 Jan 2024 21:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/doordash-service-mesh/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://doordash.engineering/2024/01/16/staying-in-the-zone-how-doordash-used-a-service-mesh-to-manage-data-transfer-reducing-hops-and-cloud-spend/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Staying in the Zone: How DoorDash used a service mesh to manage data transfer, reducing hops and cloud spend&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»äº† DoorDash å¦‚ä½•ä½¿ç”¨æœåŠ¡ç½‘æ ¼æ¥ä¼˜åŒ–å…¶è·¨å¯ç”¨åŒºçš„æ•°æ®ä¼ è¾“ï¼Œé™ä½æˆæœ¬å’Œå»¶è¿Ÿã€‚ä½œè€…åˆ†äº«äº†ä»–ä»¬çš„æµé‡æ¶æ„ã€é—®é¢˜åˆ†æå’Œè§£å†³æ–¹æ¡ˆè®¾è®¡ï¼Œä»¥åŠä½¿ç”¨ Envoy å’Œ Istio å®ç°åŒºåŸŸæ„ŸçŸ¥è·¯ç”±çš„è¿‡ç¨‹å’Œæ•ˆæœã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;DoorDash ä»å•ä½“åº”ç”¨æ¶æ„æ¼”å˜ä¸ºåŸºäº&lt;a href=&#34;https://www.youtube.com/watch?v=ReRrhU-yRjg&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å•å…ƒï¼ˆcellsï¼‰&lt;/a&gt;å’Œ&lt;a href=&#34;https://doordash.engineering/2020/12/02/how-doordash-transitioned-from-a-monolith-to-microservices/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¾®æœåŠ¡ï¼ˆmicroservicesï¼‰&lt;/a&gt;æ¶æ„åï¼Œè·å¾—äº†è®¸å¤šå¥½å¤„ã€‚æ–°çš„æ¶æ„é™ä½äº†å¼€å‘ã€æµ‹è¯•å’Œéƒ¨ç½²æ‰€éœ€çš„æ—¶é—´ï¼ŒåŒæ—¶æé«˜äº†å¯ä¼¸ç¼©æ€§å’Œç”¨æˆ·ä½“éªŒï¼ŒåŒ…æ‹¬å•†å®¶ã€é€é¤å‘˜å’Œæ¶ˆè´¹è€…ã€‚ç„¶è€Œï¼Œéšç€å¾®æœåŠ¡å’Œåç«¯æ•°é‡çš„å¢åŠ ï¼ŒDoorDash æ³¨æ„åˆ°äº†è·¨å¯ç”¨åŒºï¼ˆAZï¼‰çš„æ•°æ®ä¼ è¾“æˆæœ¬ä¸Šå‡ã€‚è¿™äº›æ•°æ®ä¼ è¾“æˆæœ¬ â€” &lt;a href=&#34;https://aws.amazon.com/blogs/architecture/overview-of-data-transfer-costs-for-common-architectures/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨å‘é€å’Œæ¥æ”¶æ—¶å‘ç”Ÿ&lt;/a&gt; â€” å…è®¸ DoorDash ä¸ºå…¶æœ€ç»ˆç”¨æˆ·æä¾›é«˜å¯ç”¨æ€§çš„æœåŠ¡ï¼Œå¯ä»¥æŠµå¾¡ä¸€ä¸ªæˆ–å¤šä¸ª AZ çš„é™çº§ã€‚&lt;/p&gt;
&lt;p&gt;æˆæœ¬ä¸Šå‡ä¿ƒä½¿æˆ‘ä»¬çš„å·¥ç¨‹å›¢é˜Ÿè°ƒæŸ¥äº†ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼æä¾›ç›¸åŒçº§åˆ«çš„æœåŠ¡çš„æ›¿ä»£æ–¹æ³•ã€‚åœ¨æœ¬åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬æè¿°äº† DoorDash ä½¿ç”¨æœåŠ¡ç½‘æ ¼å®ç°æ•°æ®ä¼ è¾“æˆæœ¬èŠ‚çœè€Œä¸ç‰ºç‰²æœåŠ¡è´¨é‡çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;doordash-æµé‡æ¶æ„&#34;&gt;DoorDash æµé‡æ¶æ„&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬æ·±å…¥è§£å†³æ–¹æ¡ˆä¹‹å‰ï¼Œè®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ DoorDash çš„æµé‡åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;åŸºäºå•å…ƒçš„æ¶æ„ï¼š&lt;/em&gt; å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬çš„æµé‡æ¶æ„éµå¾ª&lt;a href=&#34;https://www.youtube.com/watch?v=ReRrhU-yRjg&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºäºå•å…ƒçš„è®¾è®¡&lt;/a&gt;ã€‚æ‰€æœ‰å¾®æœåŠ¡ Pod éƒ½éƒ¨ç½²åœ¨å¤šä¸ªéš”ç¦»çš„å•å…ƒä¸­ã€‚æ¯ä¸ªæœåŠ¡åœ¨æ¯ä¸ªå•å…ƒä¸­éƒ½æœ‰ä¸€ä¸ª Kubernetes éƒ¨ç½²ã€‚ä¸ºäº†ç¡®ä¿å•å…ƒä¹‹é—´çš„éš”ç¦»ï¼Œä¸å…è®¸å•å…ƒé—´çš„æµé‡ã€‚è¿™ç§æ–¹æ³•ä½¿æˆ‘ä»¬èƒ½å¤Ÿå‡å°å•ä¸ªå•å…ƒæ•…éšœçš„å½±å“èŒƒå›´ã€‚å¯¹äºå•ä¾‹æœåŠ¡æˆ–å°šæœªè¿ç§»åˆ°å•å…ƒæ¶æ„çš„æœåŠ¡ï¼Œéƒ¨ç½²åœ¨ä¸€ä¸ªå…¨å±€å•å…ƒä¸­ã€‚å†…éƒ¨çš„&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt;è·¯ç”±å™¨å…è®¸å…¨å±€å•å…ƒä¸å¤åˆ¶çš„å•å…ƒä¹‹é—´è¿›è¡Œé€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Kubernetes é›†ç¾¤éƒ¨ç½²ï¼š&lt;/em&gt; æ¯ä¸ªå•å…ƒç”±å¤šä¸ª Kubernetes é›†ç¾¤ç»„æˆï¼›æ¯ä¸ªå¾®æœåŠ¡éƒ½ä¸“é—¨éƒ¨ç½²åœ¨ç»™å®šå•å…ƒå†…çš„ä¸€ä¸ªé›†ç¾¤ä¸­ã€‚è¿™ä¸ªè®¾è®¡ç¡®ä¿äº†å¯ä¼¸ç¼©æ€§å’Œå¯é æ€§ï¼ŒåŒæ—¶ä¸æˆ‘ä»¬çš„åŸºäºå•å…ƒçš„æ¶æ„ä¿æŒä¸€è‡´ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1åŸºäºå•å…ƒçš„å¤šé›†ç¾¤éƒ¨ç½²&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1ï¼šåŸºäºå•å…ƒçš„å¤šé›†ç¾¤éƒ¨ç½²&#34; srcset=&#34;
               /blog/doordash-service-mesh/f1_hu4661960324467941560.webp 400w,
               /blog/doordash-service-mesh/f1_hu1210520426826871964.webp 760w,
               /blog/doordash-service-mesh/f1_hu13998306779289376447.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f1_hu4661960324467941560.webp&#34;
               width=&#34;760&#34;
               height=&#34;357&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1ï¼šåŸºäºå•å…ƒçš„å¤šé›†ç¾¤éƒ¨ç½²
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;em&gt;é«˜å¯ç”¨æ€§ï¼š&lt;/em&gt; ä¸ºäº†å¢å¼ºå¯ç”¨æ€§å’Œå®¹é”™æ€§ï¼Œæ¯ä¸ª Kubernetes é›†ç¾¤éƒ½éƒ¨ç½²åœ¨å¤šä¸ª AZ ä¸­ã€‚è¿™ä¸ªåšæ³•æœ€å¤§ç¨‹åº¦åœ°å‡å°‘äº†ç”±äºä¸€ä¸ªæˆ–å¤šä¸ª AZ ä¸­æ–­å¼•èµ·çš„ä¸­æ–­ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å¹³é¢ç½‘ç»œä¸­çš„ç›´æ¥é€šä¿¡ï¼š&lt;/em&gt; åˆ©ç”¨&lt;a href=&#34;https://github.com/aws/amazon-vpc-cni-k8s&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS-CNI&lt;/a&gt;ï¼Œåœ¨ä¸€ä¸ªå•å…ƒä¸­çš„ä¸åŒé›†ç¾¤ä¸­çš„å¾®æœåŠ¡ Pod å¯ä»¥ç›´æ¥é€šä¿¡ã€‚è¿™ç§å¹³é¢ç½‘ç»œæ¶æ„ç®€åŒ–äº†é€šä¿¡è·¯å¾„ï¼Œä¿ƒè¿›äº†å¾®æœåŠ¡ä¹‹é—´çš„é«˜æ•ˆäº¤äº’ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;è‡ªå®šä¹‰å¤šé›†ç¾¤æœåŠ¡å‘ç°ï¼š&lt;/em&gt; æˆ‘ä»¬çš„è‡ªå®šä¹‰æœåŠ¡å‘ç°è§£å†³æ–¹æ¡ˆï¼ŒDoorDash æ•°æ®ä¸­å¿ƒæœåŠ¡å‘ç°ï¼ˆDDSDï¼‰ï¼Œæä¾›äº†ä¸€ä¸ªè‡ªå®šä¹‰çš„ DNS åŸŸï¼Œä»¥æ”¯æŒå¤šé›†ç¾¤é€šä¿¡ã€‚å®¢æˆ·ç«¯ä½¿ç”¨ DNS åç§°åŠ¨æ€å‘ç°æ‰€éœ€æœåŠ¡çš„æ‰€æœ‰ Pod IP åœ°å€ã€‚DDSD çš„åŠŸèƒ½ç±»ä¼¼äº Kubernetes çš„&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/service/#headless-services&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ— å¤´æœåŠ¡&lt;/a&gt;ï¼Œä½†å®ƒä¹Ÿé€‚ç”¨äºé›†ç¾¤é—´é€šä¿¡ã€‚ä¾‹å¦‚ï¼Œä¸åŒé›†ç¾¤ä¸­çš„å®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨&lt;em&gt;payment-service.service.prod.ddsd&lt;/em&gt;æ¥æ£€ç´¢ä¸æ”¯ä»˜æœåŠ¡ç›¸å…³è”çš„æ‰€æœ‰ Pod IP åœ°å€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å®¢æˆ·ç«¯è´Ÿè½½å¹³è¡¡ï¼š&lt;/em&gt; æœåŠ¡ç½‘æ ¼è´Ÿè´£å®¢æˆ·ç«¯è´Ÿè½½å¹³è¡¡ã€‚å¯¹äºæœªåŠ å…¥æœåŠ¡ç½‘æ ¼çš„æœåŠ¡ï¼Œè´Ÿè½½å¹³è¡¡å‘ç”Ÿåœ¨å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºç«¯ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ 2 æè¿°äº†ä¸Šè¿°å››ä¸ªç‰¹å¾ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2å•å…ƒå†…å’Œè·¨-az-é€šä¿¡æ¨¡å¼&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2ï¼šå•å…ƒå†…å’Œè·¨ AZ é€šä¿¡æ¨¡å¼&#34; srcset=&#34;
               /blog/doordash-service-mesh/f2_hu18339295774470859875.webp 400w,
               /blog/doordash-service-mesh/f2_hu13838320517383407275.webp 760w,
               /blog/doordash-service-mesh/f2_hu5308656684731651955.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f2_hu18339295774470859875.webp&#34;
               width=&#34;760&#34;
               height=&#34;423&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2ï¼šå•å…ƒå†…å’Œè·¨ AZ é€šä¿¡æ¨¡å¼
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;&lt;em&gt;æœåŠ¡ç½‘æ ¼æ¶æ„ï¼š&lt;/em&gt; å¦‚å›¾ 3 æ‰€ç¤ºï¼ŒDoorDash çš„æœåŠ¡ç½‘æ ¼éƒ¨ç½²åœ¨æ¯ä¸ªå•å…ƒä¸­ï¼Œé‡‡ç”¨äº†ä¸€ç§è¾¹è½¦å®¹å™¨è®¾è®¡æ¨¡å¼ï¼Œåˆ©ç”¨&lt;a href=&#34;https://www.envoyproxy.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy&lt;/a&gt;ä»£ç†ä½œä¸ºæ•°æ®å¹³é¢ã€‚æˆ‘ä»¬å»ºç«‹äº†æˆ‘ä»¬è‡ªå·±çš„åŸºäº&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-docs/xds_protocol&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;xDS çš„&lt;/a&gt;æ§åˆ¶å¹³é¢æ¥ç®¡ç† Envoy é…ç½®ã€‚è¾¹è½¦å®¹å™¨ä½œä¸ºä¸€ç§å³æ’å³ç”¨çš„è§£å†³æ–¹æ¡ˆï¼Œå¯ä»¥åœ¨ä¸éœ€è¦å¯¹åº”ç”¨ç¨‹åºä»£ç è¿›è¡Œä»»ä½•ä¿®æ”¹çš„æƒ…å†µä¸‹ï¼Œæ— ç¼åœ°æ‹¦æˆªã€æ§åˆ¶å’Œè½¬æ¢è¿›å‡º DoorDash å¾®æœåŠ¡çš„æ‰€æœ‰ HTTP1/HTTP2/gRPC æµé‡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3æœåŠ¡ç½‘æ ¼é«˜çº§æ¶æ„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3ï¼šæœåŠ¡ç½‘æ ¼é«˜çº§æ¶æ„&#34; srcset=&#34;
               /blog/doordash-service-mesh/f3_hu6984152760499809298.webp 400w,
               /blog/doordash-service-mesh/f3_hu17270092460841037320.webp 760w,
               /blog/doordash-service-mesh/f3_hu14379838550011899618.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f3_hu6984152760499809298.webp&#34;
               width=&#34;760&#34;
               height=&#34;422&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3ï¼šæœåŠ¡ç½‘æ ¼é«˜çº§æ¶æ„
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è™½ç„¶ DoorDash çš„æµé‡æ¶æ„å…·æœ‰ç‹¬ç‰¹çš„ç»„ä»¶ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºæˆ‘ä»¬åœ¨ç½‘ç»œæµé‡æ•ˆç‡æ–¹é¢é‡åˆ°çš„æŒ‘æˆ˜å’Œç»éªŒå¯ä»¥å¹¿æ³›åº”ç”¨äºå…¶ä»–æ¶æ„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;doordash-çš„å¸¸è§æ•°æ®ä¼ è¾“æ¨¡å¼&#34;&gt;DoorDash çš„å¸¸è§æ•°æ®ä¼ è¾“æ¨¡å¼&lt;/h2&gt;
&lt;p&gt;å¯¹äºè·¨å¯ç”¨åŒºçš„æµé‡ï¼Œæˆ‘ä»¬å°†æˆ‘ä»¬çš„æµé‡æ¨¡å¼åˆ†ç±»å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;em&gt;HTTP1/HTTP2/gRPCæµé‡ï¼š&lt;/em&gt; åœ¨åŒä¸€å•å…ƒå†…çš„å¾®æœåŠ¡ä¹‹é—´è¿›è¡Œç›´æ¥çš„ Pod åˆ° Pod é€šä¿¡ï¼›åœ¨å…¨å±€å•å…ƒä¸­çš„å¾®æœåŠ¡ä¸æ¶‰åŠåˆ°è°ƒç”¨è·¯å¾„ä¸­çš„é¢å¤–è·ƒç‚¹çš„å•å…ƒä¹‹é—´çš„æµé‡ â€” ä¾‹å¦‚å†…éƒ¨è·¯ç”±å™¨ â€” å¢åŠ äº†è·¨å¯ç”¨åŒºæµé‡çš„å¯èƒ½æ€§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å­˜å‚¨æµé‡ï¼š&lt;/em&gt; åŒ…æ‹¬æ¥è‡ªå¾®æœåŠ¡åˆ°æœ‰çŠ¶æ€ç³»ç»Ÿï¼ˆå¦‚ Aurora PostgreSQLã€CockroachDBã€Redis å’Œ Kafkaï¼‰çš„æµé‡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;em&gt;å†…éƒ¨åŸºç¡€è®¾æ–½æµé‡ï¼š&lt;/em&gt; å†…éƒ¨ Kubernetes æµé‡ï¼Œä¾‹å¦‚&lt;a href=&#34;https://github.com/coredns/coredns&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;coredns&lt;/a&gt;æµé‡æˆ–&lt;a href=&#34;https://kubernetes.io/docs/concepts/overview/components/#control-plane-components&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes æ§åˆ¶å¹³é¢ç»„ä»¶&lt;/a&gt;ä¹‹é—´çš„é€šä¿¡ã€‚è¿™ç§ç±»å‹çš„æµé‡é€šå¸¸ä½¿ç”¨ Kubernetes å†…éƒ¨ DNS è€Œä¸æ˜¯ DDSDã€‚&lt;/p&gt;
&lt;h2 id=&#34;åˆæ­¥å‡è®¾&#34;&gt;åˆæ­¥å‡è®¾&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬è®¤ä¸ºï¼Œç”±äºæˆ‘ä»¬çš„å¾®æœåŠ¡æ¶æ„ï¼ŒåŒä¸€å•å…ƒå†…çš„ HTTP1/HTTP2/gRPC æµé‡æ˜¯è·¨å¯ç”¨åŒºæ•°æ®ä¼ è¾“æˆæœ¬çš„æœ€å¤§æ¥æºã€‚æˆ‘ä»¬è¿˜ç¡®å®šæœåŠ¡ç½‘æ ¼å¯èƒ½é€šè¿‡&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/load_balancing/zone_aware&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy ä¸­çš„è¯¥åŠŸèƒ½&lt;/a&gt;å®ç°æ‰€æœ‰å¾®æœåŠ¡çš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±ã€‚äº†è§£äº†è¿™ä¸¤ç‚¹åï¼Œæˆ‘ä»¬ä¼˜å…ˆç ”ç©¶å’Œä¼˜åŒ– HTTP1/HTTP2/gRPC æµé‡æ¨¡å¼ï¼Œä»¥æé«˜æ•ˆç‡è€Œä¸é™ä½æœåŠ¡è´¨é‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è§£å†³-http1http2grpc-æµé‡æˆæœ¬é—®é¢˜&#34;&gt;è§£å†³ HTTP1/HTTP2/gRPC æµé‡æˆæœ¬é—®é¢˜&lt;/h2&gt;
&lt;p&gt;æœ€åˆï¼ŒæœåŠ¡ä¹‹é—´çš„æµé‡åœ¨ä¸åŒçš„ AZ ä¹‹é—´å‡åŒ€åˆ†å¸ƒï¼Œå¦‚å›¾ 4 æ‰€ç¤ºã€‚æœ‰äº† Envoy çš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±åŠŸèƒ½ï¼Œè°ƒç”¨è€…æœåŠ¡ç°åœ¨æ›´å€¾å‘äºå°†æµé‡å¼•å¯¼åˆ°åŒä¸€ AZ ä¸­çš„è¢«è°ƒç”¨è€…æœåŠ¡ï¼Œå¦‚å›¾ 5 æ‰€ç¤ºï¼Œä»è€Œé™ä½äº†è·¨å¯ç”¨åŒºçš„æ•°æ®ä¼ è¾“æˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-4pod-ä¹‹é—´çš„ç®€å•è½®è¯¢è´Ÿè½½å¹³è¡¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4ï¼šPod ä¹‹é—´çš„ç®€å•è½®è¯¢è´Ÿè½½å¹³è¡¡&#34; srcset=&#34;
               /blog/doordash-service-mesh/f4_hu10643152161542930605.webp 400w,
               /blog/doordash-service-mesh/f4_hu9275913241364340883.webp 760w,
               /blog/doordash-service-mesh/f4_hu10234660497447087391.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f4_hu10643152161542930605.webp&#34;
               width=&#34;760&#34;
               height=&#34;419&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4ï¼šPod ä¹‹é—´çš„ç®€å•è½®è¯¢è´Ÿè½½å¹³è¡¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5åŒºåŸŸæ„ŸçŸ¥è·¯ç”±&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5ï¼šåŒºåŸŸæ„ŸçŸ¥è·¯ç”±&#34; srcset=&#34;
               /blog/doordash-service-mesh/f5_hu754422853671423636.webp 400w,
               /blog/doordash-service-mesh/f5_hu10437757333642473203.webp 760w,
               /blog/doordash-service-mesh/f5_hu137413635685922731.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f5_hu754422853671423636.webp&#34;
               width=&#34;760&#34;
               height=&#34;425&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5ï¼šåŒºåŸŸæ„ŸçŸ¥è·¯ç”±
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸ºäº†å¯ç”¨ Envoy çš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±åŠŸèƒ½ï¼Œæˆ‘ä»¬åœ¨æœåŠ¡ç½‘æ ¼çš„æ§åˆ¶å¹³é¢ä¸­è¿›è¡Œäº†æ›´æ”¹ï¼Œå°†æœåŠ¡å‘ç°ç±»å‹ä»&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/service_discovery#strict-dns&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;STRICT_DNS&lt;/a&gt;åˆ‡æ¢åˆ°ç»ˆç«¯å‘ç°æœåŠ¡ï¼ˆ&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/intro/arch_overview/upstream/service_discovery#endpoint-discovery-service-eds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;EDS&lt;/a&gt;ï¼‰ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œå¯¹äº DDSD åŸŸï¼Œæ§åˆ¶å¹³é¢ç°åœ¨ä¼šåŠ¨æ€åœ°å°†æ¥è‡ªæ¯ä¸ª Envoy é›†ç¾¤çš„ EDS èµ„æºå‘é€å› Envoy è¾¹è½¦å®¹å™¨ã€‚EDS èµ„æºåŒ…æ‹¬ Pod IP åœ°å€åŠå…¶ AZ ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.config.endpoint.v3.ClusterLoadAssignment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cluster_name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;payment-service.service.prod.ddsd&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;locality&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-west-2a&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1.1.1.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;locality&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-west-2b&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2.2.2.2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;     &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;locality&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;zone&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;us-west-2c&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;       &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;lb_endpoints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;         &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;endpoint&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;             &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;               &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;socket_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;3.3.3.3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                 &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port_value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;å›¾ 6ï¼šä¸€ä¸ª EDS å“åº”çš„ç¤ºä¾‹&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;é€šè¿‡ EDS å“åº”ä¸­æä¾›çš„æ•°æ®ï¼ŒEnvoy è·å–äº†è°ƒç”¨è€…æœåŠ¡å’Œè¢«è°ƒç”¨è€…æœåŠ¡çš„ AZ åˆ†å¸ƒã€‚è¿™äº›ä¿¡æ¯ä½¿ Envoy èƒ½å¤Ÿ&lt;a href=&#34;https://github.com/envoyproxy/envoy/blob/v1.28.0/source/common/upstream/load_balancer_impl.cc#L520&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®¡ç®—&lt;/a&gt;Pod ä¹‹é—´çš„æƒé‡ã€‚å°½ç®¡ä»ç„¶ä¼˜å…ˆé€šè¿‡æœ¬&lt;/p&gt;
&lt;p&gt;åœ° AZ å‘é€æµé‡ï¼Œä½†ä¸ºäº†ç¡®ä¿å‡è¡¡åˆ†å¸ƒå¹¶é¿å…è¿‡è½½ä»»ä½•å•ä¸ª Podï¼Œä¸€äº›æµé‡å¯èƒ½ä»ç„¶ä¼šå¼•å¯¼åˆ°è·¨è¶Š AZï¼Œå¦‚å›¾ 7 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-7ä¼˜å…ˆä½¿ç”¨æœ¬åœ°-azåŒæ—¶ç¡®ä¿æµé‡å‡è¡¡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 7ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ° AZï¼ŒåŒæ—¶ç¡®ä¿æµé‡å‡è¡¡&#34; srcset=&#34;
               /blog/doordash-service-mesh/f7_hu3906495341702921334.webp 400w,
               /blog/doordash-service-mesh/f7_hu570611858638604838.webp 760w,
               /blog/doordash-service-mesh/f7_hu7434856150752668316.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f7_hu3906495341702921334.webp&#34;
               width=&#34;760&#34;
               height=&#34;422&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 7ï¼šä¼˜å…ˆä½¿ç”¨æœ¬åœ° AZï¼ŒåŒæ—¶ç¡®ä¿æµé‡å‡è¡¡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™ç§è·¯ç”±è§£å†³æ–¹æ¡ˆå…·æœ‰å¤šç§å¥½å¤„ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æœåŠ¡ä¸å‡åŒ€åˆ†å¸ƒåœ¨ä¸åŒ AZ çš„æƒ…å†µä¸‹ä»ç„¶ä¿æŒæµé‡å¹³è¡¡&lt;/li&gt;
&lt;li&gt;å¯ä»¥åŠ¨æ€è®¾ç½® Pod ä¹‹é—´çš„æµé‡æƒé‡ï¼Œæ¶ˆé™¤æ‰‹åŠ¨æ“ä½œ&lt;/li&gt;
&lt;li&gt;å‡å°‘å•ä¸ªæˆ–å¤šä¸ª AZ ä¸­æ–­çš„å½±å“èŒƒå›´&lt;/li&gt;
&lt;li&gt;å‡å°‘æµé‡å»¶è¿Ÿ â€” è°ƒç”¨è€…æœåŠ¡è¿æ¥åˆ°æ›´è¿‘çš„è¢«è°ƒç”¨è€…æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬çš„è§£å†³æ–¹æ¡ˆåœ¨æœåŠ¡ Pod å‡åŒ€éƒ¨ç½²åœ¨å¯ç”¨åŒºæ—¶å˜å¾—æ›´åŠ æœ‰æ•ˆã€‚ä¸ºå®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬åˆ©ç”¨äº†&lt;a href=&#34;https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;topologySpreadConstraints&lt;/a&gt;ï¼Œå¹¶å°†&lt;a href=&#34;https://kubernetes.io/docs/concepts/scheduling-eviction/topology-spread-constraints/#spread-constraint-definition&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;maxSkew&lt;/a&gt;è®¾ç½®ä¸º 1ï¼Œå½“ Unsatisfiable æ—¶è®¾ç½®ä¸º ScheduleAnywayï¼Œå¦‚å›¾ 8 æ‰€ç¤ºã€‚è¿™æ„å‘³ç€ Kubernetes è°ƒåº¦å™¨å°†ä»ç„¶è°ƒåº¦ Podï¼Œå³ä½¿æ¡ä»¶æœªæ»¡è¶³ï¼Œä¼˜å…ˆé€‰æ‹©æœ€å°åŒ–åå·®çš„èŠ‚ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•ç¡®ä¿äº† Pod ä»ç„¶è¢«è°ƒåº¦ï¼›å¦åˆ™å°†ä¼šå‡å°‘è£…ç®±é‡ï¼Œå¢åŠ ç©ºé—²è®¡ç®—é‡ï¼Œå¹¶æœ€ç»ˆå½±å“äº†åŒºåŸŸæ„ŸçŸ¥çš„ä¸æµé‡ç›¸å…³çš„æˆæœ¬å‡å°‘ã€‚åœ¨æˆ‘ä»¬çš„ç”Ÿäº§ç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æœ‰ 10% çš„æµé‡æ˜¯æ ¹æ®è¿™ä¸ª topologySpreadConstraints ç­–ç•¥è·¨å¯ç”¨åŒºå‘é€çš„ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;topologySpreadConstraints&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;maxSkew&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;topologyKey&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;topology.kubernetes.io/zone&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;whenUnsatisfiable&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ScheduleAnyway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;em&gt;å›¾ 8ï¼šé…ç½®ä»¥å‡åŒ€éƒ¨ç½² Pod åœ¨å¯ç”¨åŒºä¹‹é—´&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;éšç€æˆ‘ä»¬é€æ¸æ¨å‡ºä¸Šè¿°æ›´æ”¹ï¼Œæˆ‘ä»¬çœ‹åˆ°äº† AWS è·¨å¯ç”¨åŒºä¼ è¾“è´¹ç”¨çš„æ”¹è¿›ã€‚å³ä¾¿å¦‚æ­¤ï¼Œæˆ‘ä»¬é¢„æœŸçš„å‡å°‘è¦æ›´å¤§ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç€æ‰‹è°ƒæŸ¥ä¸ºä»€ä¹ˆæˆ‘ä»¬æ²¡æœ‰èŠ‚çœå¤šå°‘é¢„æœŸçš„è´¹ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤§æµ·æé’ˆæ›´å¥½åœ°äº†è§£è·¨å¯ç”¨åŒºçš„æµé‡&#34;&gt;å¤§æµ·æé’ˆï¼šæ›´å¥½åœ°äº†è§£è·¨å¯ç”¨åŒºçš„æµé‡&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é€šè¿‡éªŒè¯&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/upstream/cluster_manager/cluster_stats#config-cluster-manager-cluster-per-az-stats&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy åœ¨å¯ç”¨åŒºä¹‹é—´çš„æŒ‡æ ‡&lt;/a&gt;å’Œåº”ç”¨ç¨‹åºæ—¥å¿—ï¼Œç¡®è®¤äº†åŒºåŸŸæ„ŸçŸ¥è·¯ç”±æ­£åœ¨æŒ‰é¢„æœŸå·¥ä½œï¼Œä½†æˆ‘ä»¬éœ€è¦æ›´å¤šçš„å¯è§æ€§æ¥ç¡®å®šæ•°æ®ä¼ è¾“æˆæœ¬é™ä½çš„æ ¹æœ¬åŸå› ä½äºé¢„æœŸã€‚è¿™ä¿ƒä½¿æˆ‘ä»¬ä½¿ç”¨äº†å¤šç§å¯è§‚å¯Ÿæ€§å·¥å…·ï¼ŒåŒ…æ‹¬&lt;a href=&#34;https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;VPC æµé‡æ—¥å¿—&lt;/a&gt;ï¼Œ&lt;a href=&#34;https://doordash.engineering/2023/08/15/bpfagent-ebpf-for-monitoring-at-doordash/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ebpf ä»£ç†æŒ‡æ ‡&lt;/a&gt;å’Œ Envoy ç½‘ç»œå­—èŠ‚æŒ‡æ ‡ï¼Œä»¥çº æ­£è¿™ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ VPC æµé‡æ—¥å¿—ï¼Œæˆ‘ä»¬å°†&lt;a href=&#34;https://docs.aws.amazon.com/vpc/latest/userguide/flow-logs.html#flow-logs-fields&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;srcaddr å’Œ dstaddr IP åœ°å€&lt;/a&gt;æ˜ å°„åˆ°éƒ¨ç½²åœ¨æˆ‘ä»¬çš„ AWS å¸æˆ·ç»“æ„ä¸­çš„ç›¸åº”å­ç½‘ã€‚è¿™ä¸ªæ˜ å°„æä¾›äº†ä¸€ä¸ªæ±‡æ€»è§„åˆ™ï¼Œè®©æˆ‘ä»¬ç†è§£æ‰˜ç®¡äº‘è¶³è¿¹çš„ä¸åŒéƒ¨åˆ†ä¹‹é—´çš„å‡ºå£/å…¥å£æµé‡æ¨¡å¼ï¼ŒåŒ…æ‹¬ç”¨äºç”Ÿäº§ Kubernetes é›†ç¾¤ã€å­˜å‚¨è§£å†³æ–¹æ¡ˆã€ç¼“å­˜å’Œæ¶ˆæ¯ä»£ç†çš„å­ç½‘ï¼Œå¦‚è¡¨ 1 æ‰€ç¤ºã€‚æˆ‘ä»¬ç¡®è®¤ï¼Œæˆ‘ä»¬è·¨å¯ç”¨åŒºä¼ è¾“è´¹ç”¨çš„æœ€å¤§æ¥æºæ˜¯æ¯ä¸ªå•å…ƒå†…çš„éå­˜å‚¨æµé‡ã€‚å…¶ä¸­çº¦æœ‰ 20% çš„è´¹ç”¨æ˜¯ç”±äºæµé‡ä¼ è¾“åˆ°ç”¨äºæˆ‘ä»¬äº‹ä»¶æ¥æ”¶æµæ°´çº¿ï¼ˆ&lt;a href=&#34;https://doordash.engineering/2022/08/02/building-scalable-real-time-event-processing-with-kafka-and-flink/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Iguazu&lt;/a&gt;ï¼‰çš„ä¸€ä¸ªå¼¹æ€§è´Ÿè½½å‡è¡¡å™¨ï¼ˆELBï¼‰å¼•èµ·çš„ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-è¡¨-1ä½¿ç”¨-vpc-æµé‡æ—¥å¿—è¿›è¡Œè·¨å¯ç”¨åŒºæµé‡å½’å› &#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;è¡¨ 1ï¼šä½¿ç”¨ VPC æµé‡æ—¥å¿—è¿›è¡Œè·¨å¯ç”¨åŒºæµé‡å½’å› &#34; srcset=&#34;
               /blog/doordash-service-mesh/t1_hu10156685048245899794.webp 400w,
               /blog/doordash-service-mesh/t1_hu17418231720911665410.webp 760w,
               /blog/doordash-service-mesh/t1_hu14811504966488777718.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/t1_hu10156685048245899794.webp&#34;
               width=&#34;752&#34;
               height=&#34;324&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      è¡¨ 1ï¼šä½¿ç”¨ VPC æµé‡æ—¥å¿—è¿›è¡Œè·¨å¯ç”¨åŒºæµé‡å½’å› 
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘ä»¬æ£€æŸ¥äº†æœåŠ¡ç½‘æ ¼ HTTP1/HTTP2/gRPC æŒ‡æ ‡ï¼Œç‰¹åˆ«æ˜¯ç”¨äºæ‰€æœ‰è¯·æ±‚å’Œå“åº”çš„è¿æ¥å­—èŠ‚ï¼ŒåŒ…æ‹¬å…¥å£å’Œå‡ºå£æµé‡ã€‚æ¥è‡ªæœåŠ¡ç½‘æ ¼ Envoy ä»£ç†çš„æœ€é‡è¦çš„æŒ‡æ ‡æ˜¯&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/upstream/cluster_manager/cluster_stats.html#general&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¥è‡ª Envoy ä¾¦å¬å™¨å’Œé›†ç¾¤çš„ cx_rx_bytes_total å’Œ cx_tx_bytes_total&lt;/a&gt;ã€‚ä½†æ˜¯ï¼Œç”±äºå½“æ—¶å¹¶éæ‰€æœ‰æœåŠ¡éƒ½å·²åŠ å…¥åˆ°æœåŠ¡ç½‘æ ¼ä¸­ï¼Œå› æ­¤æˆ‘ä»¬ä¾èµ–äº BPFAgent çš„æŒ‡æ ‡ï¼Œè¯¥æŒ‡æ ‡åœ¨æ¯ä¸ªç”Ÿäº§ Kubernetes èŠ‚ç‚¹ä¸Šéƒ½å…¨çƒéƒ¨ç½²ï¼Œä»¥å¢åŠ å¯¹æ€»ç½‘ç»œå­—èŠ‚çš„å¯è§æ€§ã€‚ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥æºçš„æŒ‡æ ‡ï¼Œæˆ‘ä»¬å‘ç°äº† 90% çš„æµé‡æ˜¯ HTTP1/HTTP2/gRPC æµé‡ï¼›å…¶ä¸­ 45% çš„æµé‡å·²ç»åŠ å…¥äº†æœåŠ¡ç½‘æ ¼ï¼Œå¹¶ä¸”è¯¥éƒ¨åˆ†æµé‡çš„ 91% è¢«å‘é€åˆ° Iguazuï¼&lt;/p&gt;
&lt;h2 id=&#34;ç¯ç¯ç›¸æ‰£iguazu-çš„æµé‡æµåŠ¨&#34;&gt;ç¯ç¯ç›¸æ‰£ï¼šIguazu çš„æµé‡æµåŠ¨&lt;/h2&gt;
&lt;p&gt;åœ¨åˆ†æäº†å¦‚å›¾ 9 æ‰€ç¤ºçš„ Iguazu æµé‡æµåŠ¨ä¹‹åï¼Œæˆ‘ä»¬æ„è¯†åˆ°åœ¨è°ƒç”¨è€…å’Œè¢«è°ƒç”¨è€…æœåŠ¡æˆ– Pod ä¹‹é—´å­˜åœ¨å¤šä¸ªä¸­é—´è·ƒç‚¹ã€‚å½“æµé‡ä»è°ƒç”¨è€…æœåŠ¡ä¼ è¾“åˆ° Iguazu æ—¶ï¼Œå®ƒé¦–å…ˆç»è¿‡ ELBsï¼Œç„¶åç€é™†åœ¨å…¨çƒå•å…ƒä¸­ä¸åŒ Kubernetes é›†ç¾¤ä¸­çš„ä¸€ä¸ªå·¥ä½œèŠ‚ç‚¹ä¸Šã€‚å› ä¸º&lt;a href=&#34;https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/#preserving-the-client-source-ip&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;externalTrafficPolicy&lt;/a&gt;é…ç½®ä¸ºé›†ç¾¤ï¼Œ&lt;em&gt;iptables&lt;/em&gt;ä¼šå°†æµé‡é‡å®šå‘åˆ°å¦ä¸€ä¸ªèŠ‚ç‚¹ä»¥ç¡®ä¿è´Ÿè½½å‡è¡¡ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-9iguazu-çš„åŸå§‹æµé‡æµåŠ¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 9ï¼šIguazu çš„åŸå§‹æµé‡æµåŠ¨&#34; srcset=&#34;
               /blog/doordash-service-mesh/f9_hu2192565020248816167.webp 400w,
               /blog/doordash-service-mesh/f9_hu4575425348256080487.webp 760w,
               /blog/doordash-service-mesh/f9_hu609528376943781814.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f9_hu2192565020248816167.webp&#34;
               width=&#34;760&#34;
               height=&#34;223&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 9ï¼šIguazu çš„åŸå§‹æµé‡æµåŠ¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è§‚å¯Ÿåˆ°ä»¥ä¸‹æ•°æ®ä¼ è¾“è¡Œä¸ºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‘ ELBs å‘é€æµé‡çš„å®¢æˆ·ç«¯ä»ç„¶ç›´æ¥ä½¿ç”¨ ELB DNS åç§°ã€‚å› ä¸ºå®¢æˆ·ç«¯æ²¡æœ‰ä½¿ç”¨å†…éƒ¨çš„ DDSD åŸŸï¼Œæ‰€ä»¥ Envoy é›†ç¾¤ä¸­çš„æœåŠ¡å‘ç°ç±»å‹ä»ç„¶æ˜¯ STRICT_DNSï¼Œè€Œä¸æ˜¯ EDSï¼Œè¿™æ˜¯å¯ç”¨åŒºåŸŸæ„ŸçŸ¥è·¯&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç”±çš„å…ˆå†³æ¡ä»¶ã€‚è¿™æ„å‘³ç€ Envoy Sidecar å®¹å™¨ä½¿ç”¨ç®€å•çš„è½®è¯¢æ–¹æ³•æ¥å°†æµé‡åˆ†å‘ç»™ ELBsã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ ELBs åˆ° Cluster 2 çš„ Kubernetes å·¥ä½œèŠ‚ç‚¹çš„æµé‡çš„æƒ…å†µä¸‹ï¼Œç¦ç”¨äº†è·¨å¯ç”¨åŒºçš„è´Ÿè½½å‡è¡¡ã€‚&lt;/li&gt;
&lt;li&gt;å½“æµé‡ä» Iguazu ELB åˆ°è¾¾ Kubernetes å·¥ä½œèŠ‚ç‚¹æ—¶ï¼Œ&lt;em&gt;iptables&lt;/em&gt;ä¼šå°†å…¶è¿›ä¸€æ­¥é‡å®šå‘åˆ°éšæœºèŠ‚ç‚¹ï¼Œè¿™ä¹Ÿå¢åŠ äº†è·¨å¯ç”¨åŒºæµé‡çš„æ¦‚ç‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è€ƒè™‘åˆ° Iguazu è°ƒç”¨å›¾å†…éƒ¨çš„å¤šä¸ªè·ƒç‚¹çš„å¤æ‚æ€§ï¼Œæˆ‘ä»¬å†³å®šå°† Iguazu æœåŠ¡è¿ç§»åˆ°ä¸å…¶å®¢æˆ·ç«¯éƒ¨ç½²åœ¨åŒä¸€å•å…ƒçš„åœ°æ–¹ã€‚æˆ‘ä»¬è¿˜é…ç½®äº†æ‰€æœ‰å®¢æˆ·ç«¯ Envoy Sidecar çš„&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/http/http_conn_man/rds&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è·¯ç”±è§„åˆ™&lt;/a&gt;ï¼Œå°†æµé‡è·¯ç”±åˆ°æ–°é›†ç¾¤ä¸­çš„ Iguazu Podï¼Œè€Œä¸éœ€è¦æˆ‘ä»¬çš„å·¥ç¨‹å¸ˆå¯¹å…¶æœåŠ¡è¿›è¡Œä»»ä½•ä»£ç æˆ–é…ç½®æ›´æ”¹ã€‚è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿä¸º Iguazu æµé‡å¯ç”¨ç›´æ¥çš„ Pod é—´é€šä¿¡ï¼Œå®ç°åŒºåŸŸæ„ŸçŸ¥è·¯ç”±ï¼ŒåŒæ—¶å‡å°‘äº† ELBs å¤„ç†çš„æµé‡é‡ï¼Œå¦‚å›¾ 10 æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-10iguazu-çš„æ–°æµé‡æµåŠ¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 10ï¼šIguazu çš„æ–°æµé‡æµåŠ¨&#34; srcset=&#34;
               /blog/doordash-service-mesh/f10_hu10989069810095499348.webp 400w,
               /blog/doordash-service-mesh/f10_hu1550754521975185528.webp 760w,
               /blog/doordash-service-mesh/f10_hu7806436955765505294.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/doordash-service-mesh/f10_hu10989069810095499348.webp&#34;
               width=&#34;760&#34;
               height=&#34;234&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 10ï¼šIguazu çš„æ–°æµé‡æµåŠ¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™äº›æ“ä½œä½¿ DoorDash çš„æ•°æ®ä¼ è¾“æˆæœ¬ä»¥åŠ ELB æˆæœ¬å—åˆ°äº†å¾ˆå¤§çš„æ‰“å‡»ï¼Œä»¥è‡³äºæˆ‘ä»¬çš„äº‘æœåŠ¡æä¾›å•†ä¸æˆ‘ä»¬è”ç³»ï¼Œè¯¢é—®æˆ‘ä»¬æ˜¯å¦é‡åˆ°äº†ä¸ç”Ÿäº§ç›¸å…³çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¸å–çš„æ•™è®­&#34;&gt;å¸å–çš„æ•™è®­&lt;/h2&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„æ—…ç¨‹ä¸­ï¼Œæˆ‘ä»¬è·å¾—äº†ä¸€äº›å…³é”®çš„å‘ç°ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;äº‘æœåŠ¡æä¾›å•†çš„æ•°æ®ä¼ è¾“å®šä»·æ¯”èµ·åˆçœ‹èµ·æ¥æ›´åŠ å¤æ‚ã€‚å€¼å¾—æŠ•å…¥æ—¶é—´æ¥ç†è§£å®šä»·æ¨¡å‹ï¼Œä»¥æ„å»ºæ­£ç¡®çš„æ•ˆç‡è§£å†³æ–¹æ¡ˆã€‚&lt;/li&gt;
&lt;li&gt;è¦å…¨é¢äº†è§£/æŸ¥çœ‹æ‰€æœ‰è·¨å¯ç”¨åŒºçš„æµé‡æ˜¯å…·æœ‰æŒ‘æˆ˜æ€§çš„ã€‚ç„¶è€Œï¼Œå°†æ¥è‡ªä¸åŒæ¥æºçš„ç½‘ç»œå­—èŠ‚æŒ‡æ ‡ç»“åˆèµ·æ¥ï¼Œè¶³ä»¥è¯†åˆ«çƒ­ç‚¹ï¼Œä¸€æ—¦è§£å†³ï¼Œå¯ä»¥åœ¨ä½¿ç”¨å’Œæˆæœ¬æ–¹é¢äº§ç”Ÿå®è´¨æ€§å½±å“ã€‚&lt;/li&gt;
&lt;li&gt;Envoy çš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±å¯ä»¥å°†æµé‡å‘é€åˆ°å…¶æœ¬åœ°å¯ç”¨åŒºï¼ŒåŒæ—¶é€šè¿‡å¹³è¡¡æµé‡è‡ªåŠ¨ç¡®ä¿å¼¹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;éšç€å¾®æœåŠ¡è°ƒç”¨å›¾ä¸­è·ƒç‚¹æ•°é‡çš„å¢åŠ ï¼Œæ•°æ®è¢«ä¼ è¾“åˆ°è·¨å¯ç”¨åŒºçš„å¯èƒ½æ€§å¢åŠ ï¼Œå¢åŠ äº†ç¡®ä¿æ‰€æœ‰è·ƒç‚¹æ”¯æŒåŒºåŸŸæ„ŸçŸ¥è·¯ç”±çš„å¤æ‚æ€§ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ è€ƒè™‘ä½¿ç”¨æœåŠ¡ç½‘æ ¼æ¥ç®¡ç†æµé‡ï¼Œä½ ä¹Ÿå¯ä»¥åˆ©ç”¨å®ƒæ¥æé«˜æ•ˆç‡ã€‚&lt;/li&gt;
&lt;li&gt;è¦äº†è§£æ›´å¤šå…³äº DoorDash çš„æœåŠ¡ç½‘æ ¼ä¹‹æ—…çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ Hochuen çš„ KubeCon + CloudNativeCon North America 2023&lt;a href=&#34;https://www.youtube.com/watch?v=I6E_7f40YP0&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœåŠ¡ç½‘æ ¼ä¼šè®®&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æœªæ¥çš„å·¥ä½œ&#34;&gt;æœªæ¥çš„å·¥ä½œ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»åˆ—å‡ºäº†æˆ‘ä»¬å¸Œæœ›å®æ–½çš„è§£å†³æ–¹æ¡ˆå¢å¼ºåŠŸèƒ½çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç®€åŒ–ä»ä¸åŒæ¥æºæ”¶é›†æŒ‡æ ‡å¹¶æä¾›æˆæœ¬å’Œä½¿ç”¨æƒ…å†µçš„ç»Ÿä¸€æ¦‚è¿°çš„è¿‡ç¨‹ã€‚&lt;/li&gt;
&lt;li&gt;å¯ç”¨å†…éƒ¨ Envoy è·¯ç”±å™¨çš„åŒºåŸŸæ„ŸçŸ¥è·¯ç”±åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿è§£å†³æ–¹æ¡ˆæ›´å…·å¯æ‰©å±•æ€§ï¼Œä»¥æ”¯æŒ DDSD ä¹‹å¤–çš„å…¶ä»–åŸŸçš„ HTTP1/HTTP2/gRPC æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ Kubernetes ç½‘ç»œä»£ç† kube-proxy ä¸ºå†…éƒ¨åŸºç¡€è®¾æ–½æµé‡å¯ç”¨&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/topology-aware-routing/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ‹“æ‰‘æ„ŸçŸ¥è·¯ç”±&lt;/a&gt;åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;li&gt;æ¢ç´¢ä¼˜åŒ–çš„è·¯ç”±ï¼Œç”¨äºä¸ DoorDash çš„æœ‰çŠ¶æ€ç³»ç»Ÿï¼ˆä¾‹å¦‚ PostgreSQLã€CRDBã€Redis å’Œ Kafkaï¼‰ä¹‹é—´çš„å¤§æ•°æ®ä¼ è¾“æ“ä½œã€‚è¿™å°†å…è®¸æµé‡åœ¨æœ‰æ„ä¹‰çš„æƒ…å†µä¸‹ä¿æŒåœ¨å•ä¸€ AZ æ³³é“ä¸­ï¼Œè¿›ä¸€æ­¥é™ä½æˆæœ¬ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;è‡´è°¢&#34;&gt;è‡´è°¢&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬æ„Ÿè°¢&lt;strong&gt;Darshit Gavhane&lt;/strong&gt;å’Œ&lt;strong&gt;Allison Cheng&lt;/strong&gt;å°†æ‰€æœ‰ Iguazu æœåŠ¡è¿ç§»åˆ°å®¢æˆ·ç«¯æ­£åœ¨è¿è¡Œçš„åŒä¸€å•å…ƒï¼Œä»¥åŠ&lt;strong&gt;Steve Hoffman&lt;/strong&gt;å’Œ&lt;strong&gt;Sebastian Yates&lt;/strong&gt;åœ¨æ—…ç¨‹ä¸­çš„å»ºè®®å’ŒæŒ‡å¯¼ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åœ¨ AWS NLB å’Œ Istio Ingress ç½‘å…³ä¸Šå¯ç”¨ä»£ç†åè®®</title>
      <link>https://cloudnativecn.com/blog/show-source-ip/</link>
      <pubDate>Thu, 18 Jan 2024 12:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/show-source-ip/</guid>
      <description>&lt;p&gt;&lt;em&gt;æ³¨ï¼šåŸæ–‡å‘å¸ƒäº 2020 å¹´ 12 æœˆï¼Œä»¥ä¸‹å†…å®¹æœªåœ¨å½“ä¸‹å¾—åˆ°éªŒè¯ï¼Œå¯èƒ½å·²ç»è¿‡æ—¶ã€‚&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†å¦‚ä½•é…ç½®å¹¶åœ¨ AWS NLB å’Œ Istio Ingress ç½‘å…³çš„å †æ ˆä¸­å¯ç”¨ä»£ç†åè®®çš„æœ€æ–°ç»éªŒã€‚&lt;a href=&#34;https://www.haproxy.com/blog/haproxy/proxy-protocol/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä»£ç†åè®®&lt;/a&gt; æ—¨åœ¨åœ¨ä¸ä¸¢å¤±å®¢æˆ·ç«¯ä¿¡æ¯çš„æƒ…å†µä¸‹é“¾æ¥ä»£ç†å’Œåå‘ä»£ç†ã€‚ä»£ç†åè®®é¿å…äº†å¯¹åŸºç¡€æ¶æ„è¿›è¡Œæ›´æ”¹æˆ– &lt;code&gt;NAT&lt;/code&gt; é˜²ç«å¢™çš„éœ€æ±‚ï¼Œå¹¶æä¾›äº†åè®®ä¸å¯çŸ¥æ€§å’Œè‰¯å¥½å¯ä¼¸ç¼©æ€§çš„ä¼˜åŠ¿ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜åœ¨éƒ¨ç½²ä¸­å¯ç”¨äº† &lt;code&gt;X-Forwarded-For&lt;/code&gt; HTTP æ ‡å¤´ï¼Œä»¥ä¾¿è½»æ¾è¯»å–å®¢æˆ·ç«¯ IP åœ°å€ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œå±•ç¤ºäº† Istio Ingress çš„æµé‡ç®¡ç†ï¼Œä½¿ç”¨ç«¯å£ 80 å’Œ 443 ä¸Šçš„ httpbin æœåŠ¡æ¥æ¼”ç¤ºä»£ç†åè®®çš„ä½¿ç”¨ã€‚è¯·æ³¨æ„ï¼Œä»£ç†åè®®çš„ v1 å’Œ v2 éƒ½é€‚ç”¨äºæ­¤ç¤ºä¾‹ï¼Œä½†ç”±äº AWS NLB ç›®å‰ä»…æ”¯æŒ v2ï¼Œå› æ­¤é»˜è®¤æƒ…å†µä¸‹åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ä½¿ç”¨ä»£ç†åè®® v2ã€‚ä¸‹å›¾æ˜¾ç¤ºäº†åœ¨ AWS NLB ä¸­ä½¿ç”¨ä»£ç†åè®® v2ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-aw-nlb-ä¸­å¯ç”¨ä»£ç†åè®®çš„é¡µé¢&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;AW NLB ä¸­å¯ç”¨ä»£ç†åè®®çš„é¡µé¢&#34; srcset=&#34;
               /blog/show-source-ip/aws-proxy-protocol_hu9120249543006965179.webp 400w,
               /blog/show-source-ip/aws-proxy-protocol_hu1762587696565684352.webp 760w,
               /blog/show-source-ip/aws-proxy-protocol_hu1810584694641237551.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/show-source-ip/aws-proxy-protocol_hu9120249543006965179.webp&#34;
               width=&#34;760&#34;
               height=&#34;614&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      AW NLB ä¸­å¯ç”¨ä»£ç†åè®®çš„é¡µé¢
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ¥æ”¶å™¨å¯ä»¥é…ç½®ä¸ºæ”¯æŒåè®®çš„ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2ã€‚è¯†åˆ«åè®®ç‰ˆæœ¬å¾ˆå®¹æ˜“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä¼ å…¥çš„å­—èŠ‚è®¡æ•°ä¸º 16 æˆ–æ›´å¤šï¼Œå¹¶ä¸”å‰ 13 ä¸ªå­—èŠ‚ä¸åè®®ç­¾åå— &lt;code&gt;\x0D\x0A\x0D\x0A\x00\x0D\x0A\x51\x55\x49\x54\x0A\x02&lt;/code&gt; åŒ¹é…ï¼Œåˆ™åè®®æ˜¯ç‰ˆæœ¬ 2ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ï¼Œå¦‚æœä¼ å…¥çš„å­—èŠ‚è®¡æ•°ä¸º 8 æˆ–æ›´å¤šï¼Œå¹¶ä¸”å‰ 5 ä¸ªå­—ç¬¦ä¸â€œPROXYâ€çš„ &lt;code&gt;US-ASCII&lt;/code&gt; è¡¨ç¤ºï¼ˆ&lt;code&gt;\x50\x52\x4F\x58\x59&lt;/code&gt;ï¼‰åŒ¹é…ï¼Œåˆ™å¿…é¡»è§£æåè®®ä½œä¸ºç‰ˆæœ¬ 1ã€‚&lt;/li&gt;
&lt;li&gt;å¦åˆ™ï¼Œæ­¤åè®®ä¸åœ¨æ­¤è§„èŒƒèŒƒå›´å†…ï¼Œè¿æ¥å¿…é¡»è¢«å…³é—­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;åœ¨-80-å’Œ-443-ä¸Šè¿›è¡Œåˆ†å¼€çš„è®¾ç½®&#34;&gt;åœ¨ 80 å’Œ 443 ä¸Šè¿›è¡Œåˆ†å¼€çš„è®¾ç½®&lt;/h2&gt;
&lt;p&gt;åœ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ä¹‹å‰ï¼Œå‡å®šå·²ç»é…ç½®äº†é€‚å½“çš„ VPCã€IAM å’Œ Kubernetes è®¾ç½®çš„ AWS ç¯å¢ƒã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ­¥éª¤-1ä½¿ç”¨-aws-nlb-å®‰è£…-istio&#34;&gt;æ­¥éª¤ 1ï¼šä½¿ç”¨ AWS NLB å®‰è£… Istio&lt;/h3&gt;
&lt;p&gt;åšå®¢&lt;a href=&#34;https://istio.io/latest/blog/2018/aws-nlb/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ AWS NLB é…ç½® Istio Ingress&lt;/a&gt; æä¾›äº†è®¾ç½® AWS IAM è§’è‰²å’Œé€šè¿‡ Helm å¯ç”¨ AWS NLB ä½¿ç”¨çš„è¯¦ç»†æ­¥éª¤ã€‚ä½ è¿˜å¯ä»¥ä½¿ç”¨å…¶ä»–è‡ªåŠ¨åŒ–å·¥å…·ï¼Œä¾‹å¦‚ Terraformï¼Œæ¥å®ç°ç›¸åŒçš„ç›®æ ‡ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œä¸ºäº†åŒæ—¶å¯ç”¨ä»£ç†åè®®å’Œ &lt;code&gt;X-Forwarded-For&lt;/code&gt;ï¼Œæ˜¾ç¤ºäº†æ›´å®Œæ•´çš„é…ç½®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service.beta.kubernetes.io/aws-load-balancer-proxy-protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service.beta.kubernetes.io/aws-load-balancer-type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;nlb&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;proxy.istio.io/config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s1&#34;&gt;&amp;#39;{&amp;#34;gatewayTopology&amp;#34; : { &amp;#34;numTrustedProxies&amp;#34;: 2 } }&amp;#39;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;release&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ­¥éª¤-2åˆ›å»ºä»£ç†åè®®-envoy-è¿‡æ»¤å™¨&#34;&gt;æ­¥éª¤ 2ï¼šåˆ›å»ºä»£ç†åè®® Envoy è¿‡æ»¤å™¨&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyFilter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;proxy-protocol&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;workloadSelector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configPatches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;applyTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;LISTENER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MERGE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listener_filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.listener.proxy_protocol&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.filters.listener.tls_inspector&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ­¥éª¤-3å¯ç”¨-x-forwarded-for-æ ‡å¤´&#34;&gt;æ­¥éª¤ 3ï¼šå¯ç”¨ &lt;code&gt;X-Forwarded-For&lt;/code&gt; æ ‡å¤´&lt;/h3&gt;
&lt;p&gt;æ­¤&lt;a href=&#34;https://istio.io/latest/docs/ops/configuration/traffic-management/network-topologies/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åšå®¢&lt;/a&gt;åŒ…æ‹¬é…ç½® Gateway Network Topology çš„å‡ ä¸ªç¤ºä¾‹ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œæ ¹æ®éœ€è¦è°ƒæ•´é…ç½®ï¼Œä»¥åœ¨æ²¡æœ‰ä¸­é—´ä»£ç†çš„æƒ…å†µä¸‹å¯ç”¨ &lt;code&gt;X-Forwarded-For&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;EnvoyFilter&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway-settings&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;configPatches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;applyTo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;NETWORK_FILTER&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listener&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filterChain&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filter&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.http_connection_manager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patch&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operation&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;MERGE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;envoy.http_connection_manager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;typed_config&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;@type&amp;#34;: &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;type.googleapis.com/envoy.config.filter.network.http_connection_manager.v2.HttpConnectionManager&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;skip_xff_append&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;false&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;use_remote_address&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;xff_num_trusted_hops&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ­¥éª¤-4åœ¨ç«¯å£-80-å’Œ-443-ä¸Šéƒ¨ç½²-httpbin-çš„å…¥å£ç½‘å…³&#34;&gt;æ­¥éª¤ 4ï¼šåœ¨ç«¯å£ 80 å’Œ 443 ä¸Šéƒ¨ç½² httpbin çš„å…¥å£ç½‘å…³&lt;/h3&gt;
&lt;p&gt;åœ¨æ‰§è¡Œ&lt;a href=&#34;https://istio.io/latest/docs/tasks/traffic-management/ingress/secure-ingress/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®‰å…¨å…¥å£è®¾ç½®&lt;/a&gt;æ—¶ï¼ŒmacOS ç”¨æˆ·å¿…é¡»æ·»åŠ é¢å¤–çš„è¡¥ä¸æ¥ç”Ÿæˆ TLS è¯ä¹¦ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# use Istio default gateway implementation&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;httpbin-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/headers&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mygateway2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ingressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# use istio default ingress gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;servers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;https&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SIMPLE&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;credentialName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin-credential&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# must be the same as secret&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;networking.istio.io/v1alpha3&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;VirtualService&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hosts&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gateways&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;mygateway2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;uri&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;prefix&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/headers&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;route&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;destination&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;number&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8000&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;httpbin&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;æ­¥éª¤-5æ£€æŸ¥-httpbin-çš„æ ‡å¤´è¾“å‡º&#34;&gt;æ­¥éª¤ 5ï¼šæ£€æŸ¥ httpbin çš„æ ‡å¤´è¾“å‡º&lt;/h3&gt;
&lt;p&gt;æ£€æŸ¥ç«¯å£ 443ï¼ˆ80 ç±»ä¼¼ï¼‰å¹¶æ¯”è¾ƒä½¿ç”¨å’Œä¸ä½¿ç”¨ä»£ç†åè®®çš„æƒ…å†µã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;l&#34;&gt;//////with proxy_protocal enabled in the stack&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Trying YY.XXX.141.26...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP_NODELAY set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection failed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* connect to YY.XXX.141.26 port 443 failed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Operation timed out&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Trying YY.XXX.205.117...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP_NODELAY set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connected to a25fa0b4835b.elb.us-west-2.amazonaws.com (XX.YYY.205.117) port 443 (#0)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, offering h2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, offering http/1.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* successfully set certificate verify locations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*   CAfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;new_certificates/example.com.crt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CApath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Client hello (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server hello (2)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Certificate (11)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server key exchange (12)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server finished (14)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Client key exchange (16)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Finished (20)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Finished (20)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SSL connection using TLSv1.2 / ECDHE-RSA-CHACHA20-POLY1305&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, server accepted to use h2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Server certificate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  subject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;CN=a25fa0b4835b.elb.us-west-2.amazonaws.com; O=httpbin organization&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  start date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Oct 29 20:39:12 2020 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  expire date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Oct 29 20:39:12 2021 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  common name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;a25fa0b4835b.elb.us-west-2.amazonaws.com (matched)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;O=example Inc.; CN=example.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SSL certificate verify ok.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Using HTTP2, server supports multi-use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection state changed (HTTP/2 confirmed)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Copying HTTP/2 data in stream buffer to connection buffer after upgrade&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;len=0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Using Stream ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;(easy handle 0x7fc6c8810800)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;gt; GET /headers?show_env=1 HTTP/2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; Host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;a25fa0b4835b.elb.us-west-2.amazonaws.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; User-Agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl/7.64.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; Accept&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;*/*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection state changed (MAX_CONCURRENT_STREAMS == 2147483647)!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;lt; HTTP/2 200&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-envoy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Thu, 29 Oct 2020 21:39:46 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; content-type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;application/json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; content-length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;629&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; access-control-allow-origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; access-control-allow-credentials&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; x-envoy-upstream-service-time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;headers&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Accept&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*/*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Content-Length&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Host&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;User-Agent&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;curl/7.64.1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Sampled&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Spanid&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;74f99a1c6fc29975&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Traceid&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;85db86fe6aa322a074f99a1c6fc29975&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-Attempt-Count&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-Decorator-Operation&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.default.svc.cluster.local:8000/headers*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-External-Address&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;XX.110.54.41&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Forwarded-For&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;XX.110.54.41&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Forwarded-Proto&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Request-Id&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;5c3bc236-0c49-4401-b2fd-2dbfbce506fc&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#0 to host a25fa0b4835b.elb.us-west-2.amazonaws.com left intact&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Closing connection 0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;l&#34;&gt;//////////without proxy_protocal&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Trying YY.XXX.141.26...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP_NODELAY set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection failed&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* connect to YY.XXX.141.26 port 443 failed&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Operation timed out&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Trying YY.XXX.205.117...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;TCP_NODELAY set&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connected to a25fa0b4835b.elb.us-west-2.amazonaws.com (YY.XXX.205.117) port 443 (#0)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, offering h2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, offering http/1.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* successfully set certificate verify locations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*   CAfile&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;new_certificates/example.com.crt&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;CApath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;none&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Client hello (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server hello (2)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Certificate (11)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server key exchange (12)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Server finished (14)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Client key exchange (16)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS change cipher, Change cipher spec (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (OUT), TLS handshake, Finished (20)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS change cipher, Change cipher spec (1)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* TLSv1.2 (IN), TLS handshake, Finished (20)&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SSL connection using TLSv1.2 / ECDHE-RSA-CHACHA20-POLY1305&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ALPN, server accepted to use h2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Server certificate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  subject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;CN=a25fa0b4835b.elb.us-west-2.amazonaws.com; O=httpbin organization&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  start date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Oct 29 20:39:12 2020 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  expire date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Oct 29 20:39:12 2021 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  common name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;a25fa0b4835b.elb.us-west-2.amazonaws.com (matched)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;*  issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;O=example Inc.; CN=example.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;SSL certificate verify ok.&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Using HTTP2, server supports multi-use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection state changed (HTTP/2 confirmed)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Copying HTTP/2 data in stream buffer to connection buffer after upgrade&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;len=0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;* Using Stream ID&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;(easy handle 0x7fbf8c808200)&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;gt; GET /headers?show_env=1 HTTP/2&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; Host&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;a25fa0b4835b.elb.us-west-2.amazonaws.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; User-Agent&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;curl/7.64.1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt; Accept&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;*/*&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;gt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection state changed (MAX_CONCURRENT_STREAMS == 2147483647)!&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;lt; HTTP/2 200&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; server&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-envoy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; date&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Thu, 29 Oct 2020 20:44:01 GMT&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; content-type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;application/json&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; content-length&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;612&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; access-control-allow-origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;*&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; access-control-allow-credentials&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;lt; x-envoy-upstream-service-time&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;l&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;headers&amp;#34;: &lt;/span&gt;{&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Accept&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*/*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Content-Length&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;Host&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;a25fa0b4835b.elb.us-west-2.amazonaws.com&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;User-Agent&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;curl/7.64.1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Sampled&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;0&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Spanid&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;69913a6e6e949334&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-B3-Traceid&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;729d5da3618545da69913a6e6e949334&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-Attempt-Count&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;1&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-Decorator-Operation&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;httpbin.default.svc.cluster.local:8000/headers*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Envoy-Internal&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Forwarded-For&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;172.16.5.30&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Forwarded-Proto&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;https&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;#34;X-Request-Id&amp;#34;: &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;299c7f8a-5f89-480a-82c9-028c76d45d84&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;}&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Connection&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;#0 to host a25fa0b4835b.elb.us-west-2.amazonaws.com left intact&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;*&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Closing connection 0&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä»‹ç»äº†éƒ¨ç½²ä¸€ä¸ªç”±å¯ç”¨ä»£ç†åè®®çš„ AWS NLB å’Œ Istio Ingress ç½‘å…³ç»„æˆçš„å †æ ˆã€‚å¦‚æœä½ å¯¹åè®®å¯ç”¨ä»¥ä¸€ç§è½¶äº‹ã€ç»éªŒå’Œæ›´ä¸æ­£å¼çš„æ–¹å¼æ„Ÿå…´è¶£ï¼Œå¸Œæœ›è¿™å¯¹ä½ æœ‰æ‰€å¸®åŠ©ã€‚ä½†è¯·æ³¨æ„ï¼Œ&lt;code&gt;X-Forwarded-For&lt;/code&gt; æ ‡å¤´åº”ä»…ç”¨äºæµ‹è¯•æ—¶æ–¹ä¾¿é˜…è¯»ï¼Œå› ä¸ºå¤„ç†è™šå‡çš„ &lt;code&gt;X-Forwarded-For&lt;/code&gt; æ”»å‡»ä¸åœ¨æœ¬æ–‡çš„èŒƒå›´å†…ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.nginx.com/nginx/admin-guide/load-balancer/using-proxy-protocol/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åè®®è®¾ç½®&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.haproxy.com/blog/haproxy/proxy-protocol/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åè®®ä»‹ç»&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Proxy åè®®</title>
      <link>https://cloudnativecn.com/blog/proxy-protocol/</link>
      <pubDate>Fri, 12 Jan 2024 12:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/proxy-protocol/</guid>
      <description>&lt;h2 id=&#34;ç‰ˆæœ¬-1-å’Œ-2&#34;&gt;ç‰ˆæœ¬ 1 å’Œ 2&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;æ‘˜è¦&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;PROXY åè®®æä¾›äº†ä¸€ç§æ–¹ä¾¿çš„æ–¹å¼ï¼Œå¯ä»¥å®‰å…¨åœ°ä¼ è¾“è¿æ¥ä¿¡æ¯ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯çš„åœ°å€ï¼Œè·¨è¶Šå¤šå±‚ NAT æˆ– TCP ä»£ç†ã€‚å®ƒæ—¨åœ¨å¯¹ç°æœ‰ç»„ä»¶è¿›è¡Œå°‘é‡æ›´æ”¹ï¼Œå¹¶é™åˆ¶ç”±ä¼ è¾“ä¿¡æ¯å¤„ç†å¼•èµ·çš„æ€§èƒ½å½±å“ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¿®è®¢å†å²&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;2010/10/29 - ç¬¬ä¸€ä¸ªç‰ˆæœ¬&lt;/li&gt;
&lt;li&gt;2011/03/20 - æ›´æ–°ï¼šå®ç°å’Œå®‰å…¨æ€§è€ƒè™‘&lt;/li&gt;
&lt;li&gt;2012/06/21 - æ·»åŠ å¯¹äºŒè¿›åˆ¶æ ¼å¼çš„æ”¯æŒ&lt;/li&gt;
&lt;li&gt;2012/11/19 - æœ€ç»ˆå®¡æŸ¥å’Œä¿®å¤&lt;/li&gt;
&lt;li&gt;2014/05/18 - ä¿®æ”¹å’Œæ‰©å±• PROXY åè®®ç‰ˆæœ¬ 2&lt;/li&gt;
&lt;li&gt;2014/06/11 - ä¿®å¤ç¤ºä¾‹ä»£ç ä»¥è€ƒè™‘ ver+cmd åˆå¹¶&lt;/li&gt;
&lt;li&gt;2014/06/14 - ä¿®å¤ç¤ºä¾‹ä»£ç ä¸­çš„ v2 å¤´æ£€æŸ¥ï¼Œå¹¶æ›´æ–° Forwarded è§„èŒƒ&lt;/li&gt;
&lt;li&gt;2014/07/12 - æ›´æ–°å®ç°åˆ—è¡¨ï¼ˆæ·»åŠ  Squidï¼‰&lt;/li&gt;
&lt;li&gt;2015/05/02 - æ›´æ–°å®ç°åˆ—è¡¨å’Œ TLV é™„åŠ ç»„ä»¶çš„æ ¼å¼&lt;/li&gt;
&lt;li&gt;2017/03/10 - æ·»åŠ æ ¡éªŒå’Œã€noop å’Œæ›´å¤šä¸ SSL ç›¸å…³çš„ TLV ç±»å‹ã€ä¿ç•™çš„ TLV ç±»å‹èŒƒå›´ã€æ·»åŠ  TLV æ–‡æ¡£ã€æ¾„æ¸…å­—ç¬¦ä¸²ç¼–ç ã€‚Andriy Palamarchukï¼ˆAmazon.comï¼‰çš„è´¡çŒ®ã€‚&lt;/li&gt;
&lt;li&gt;2020/03/05 - æ·»åŠ å”¯ä¸€ ID TLV ç±»å‹ï¼ˆTim DÃ¼sterhusï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;1-èƒŒæ™¯&#34;&gt;1. èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä»£ç†ä¸­ç»§ TCP è¿æ¥é€šå¸¸ä¼šå¯¼è‡´åŸå§‹ TCP è¿æ¥å‚æ•°çš„ä¸¢å¤±ï¼Œä¾‹å¦‚æºåœ°å€ã€ç›®æ ‡åœ°å€ã€ç«¯å£ç­‰ç­‰ã€‚ä¸€äº›åè®®ä½¿å¾—ä¼ è¾“æ­¤ç±»ä¿¡æ¯å˜å¾—ç¨å¾®å®¹æ˜“ä¸€äº›ã€‚å¯¹äº SMTPï¼ŒPostfix çš„ä½œè€…æå‡ºäº† XCLIENT åè®®[1]ï¼Œå®ƒå¾—åˆ°äº†å¹¿æ³›çš„é‡‡ç”¨ï¼Œç‰¹åˆ«é€‚ç”¨äºé‚®ä»¶äº¤æ¢ã€‚å¯¹äº HTTPï¼Œå­˜åœ¨&amp;quot;Forwarded&amp;quot;æ‰©å±•[2]ï¼Œæ—¨åœ¨æ›¿ä»£æ™®éå­˜åœ¨çš„&amp;quot;X-Forwarded-For&amp;quot;å¤´éƒ¨ï¼Œè¯¥å¤´éƒ¨æºå¸¦æœ‰å…³åŸå§‹æºåœ°å€çš„ä¿¡æ¯ï¼Œä»¥åŠè¾ƒä¸å¸¸è§çš„ X-Original-To å¤´éƒ¨ï¼Œè¯¥å¤´éƒ¨æºå¸¦æœ‰å…³ç›®æ ‡åœ°å€çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™ä¸¤ç§æœºåˆ¶éƒ½éœ€è¦åœ¨ä¸­é—´ä»¶ä¸­å®æ–½å¯¹åº•å±‚åè®®çš„äº†è§£ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åå‡ºç°äº†ä¸€ç±»æ–°çš„äº§å“ï¼Œæˆ‘ä»¬å°†å…¶ç§°ä¸º&amp;quot;æ„šè ¢çš„ä»£ç†&amp;quot;ï¼Œå¹¶ä¸æ˜¯å› ä¸ºå®ƒä»¬ä»€ä¹ˆéƒ½ä¸åšï¼Œè€Œæ˜¯å› ä¸ºå®ƒä»¬å¤„ç†åè®®æ— å…³çš„æ•°æ®ã€‚Stunnel[3]å’Œ Stud[4]éƒ½æ˜¯è¿™ç§&amp;quot;æ„šè ¢çš„ä»£ç†&amp;quot;çš„ç¤ºä¾‹ã€‚å®ƒä»¬ä¸€ä¾§ä½¿ç”¨åŸå§‹ TCPï¼Œå¦ä¸€ä¾§ä½¿ç”¨åŸå§‹ SSLï¼Œè€Œä¸”å¯ä»¥å¯é åœ°æ‰§è¡Œï¼Œè€Œä¸éœ€è¦äº†è§£åœ¨è¿æ¥çš„é¡¶éƒ¨ä¼ è¾“çš„åè®®æ˜¯ä»€ä¹ˆã€‚å½“ HAProxy ä»¥çº¯ TCP æ¨¡å¼è¿è¡Œæ—¶ï¼Œæ˜¾ç„¶ä¹Ÿå±äºè¿™ä¸ªç±»åˆ«ã€‚&lt;/p&gt;
&lt;p&gt;å½“å°†è¿™ç§ä»£ç†ä¸å¦ä¸€ä¸ªä»£ç†ï¼ˆå¦‚ haproxyï¼‰ç»“åˆä½¿ç”¨æ—¶ï¼Œå®ƒçš„é—®é¢˜åœ¨äºä½¿å…¶é€‚åº”é«˜çº§åˆ«åè®®è¿›è¡Œé€šä¿¡ã€‚å·²ç»ä¸º Stunnel æä¾›äº†ä¸€ä¸ªè¡¥ä¸ï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨æ¯ä¸ªä¼ å…¥è¿æ¥çš„ç¬¬ä¸€ä¸ª HTTP è¯·æ±‚ä¸­æ’å…¥ X-Forwarded-For å¤´éƒ¨ã€‚å½“è¿æ¥æ¥è‡ª Stunnel æ—¶ï¼ŒHAProxy å¯ä»¥ä¸æ·»åŠ å¦ä¸€ä¸ªå¤´éƒ¨ï¼Œä»¥ä¾¿å¯ä»¥å°†å…¶éšè—åœ¨æœåŠ¡å™¨ç«¯ã€‚&lt;/p&gt;
&lt;p&gt;å…¸å‹çš„æ¶æ„å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;      +--------+      HTTP                      :80 +----------+
      | client |  --------------------------------&amp;gt; |          |
      |        |                                    | haproxy, |
      +--------+             +---------+            |  1 or 2  |
     /        /     HTTPS    | stunnel |  HTTP  :81 | listening|
    &amp;lt;________/    ---------&amp;gt; | (server | ---------&amp;gt; |  ports   |
                             |  mode)  |            |          |
                             +---------+            +----------+
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;å½“ HAProxy åœ¨å‘å®¢æˆ·ç«¯çš„ä¸€ä¾§å¯ç”¨äº†ä¿æŒæ´»åŠ¨æ—¶ï¼Œé—®é¢˜å°±å‡ºç°äº†ã€‚Stunnel è¡¥ä¸å°†ä»…åœ¨æ¯ä¸ªè¿æ¥çš„ç¬¬ä¸€ä¸ªè¯·æ±‚ä¸­æ·»åŠ  X-Forwarded-For å¤´éƒ¨ï¼Œå¹¶ä¸”æ‰€æœ‰åç»­çš„è¯·æ±‚å°†ä¸ä¼šæœ‰å®ƒã€‚ä¸€ç§è§£å†³æ–¹æ¡ˆå¯èƒ½æ˜¯æ”¹è¿›è¡¥ä¸ï¼Œä½¿å…¶æ”¯æŒä¿æŒæ´»åŠ¨ï¼Œå¹¶è§£ææ‰€æœ‰è½¬å‘çš„æ•°æ®ï¼Œæ— è®ºå®ƒä»¬æ˜¯ä½¿ç”¨ Content-Length è¿˜æ˜¯ Transfer-Encoding è¿›è¡Œé€šå‘Šï¼ŒåŒæ—¶æ³¨æ„ç‰¹æ®Šçš„æ–¹æ³•ï¼Œä¾‹å¦‚ HEADï¼Œå®ƒä»¬å®£å¸ƒæ•°æ®è€Œä¸ä¼ è¾“å®ƒä»¬ç­‰ç­‰ã€‚å®é™…ä¸Šï¼Œè¿™å°†éœ€è¦åœ¨ Stunnel ä¸­å®ç°ä¸€ä¸ªå®Œæ•´çš„ HTTP å †æ ˆã€‚ç„¶åå®ƒä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œå¯é æ€§æ›´å·®ï¼Œå¹¶ä¸”ä¸å†æ˜¯é€‚ç”¨äºæ‰€æœ‰ç›®çš„çš„&amp;quot;æ„šè ¢çš„ä»£ç†&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦ä¸ºæ¯ä¸ªè¯·æ±‚æ·»åŠ ä¸€ä¸ªå¤´éƒ¨ï¼Œå› ä¸ºæˆ‘ä»¬å°†æ¯æ¬¡å‘å‡ºç›¸åŒçš„ä¿¡æ¯ï¼šä¸å®¢æˆ·ç«¯ç«¯å£è¿æ¥ç›¸å…³çš„ä¿¡æ¯ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ HAProxy ä¸­ç¼“å­˜è¯¥ä¿¡æ¯ï¼Œå¹¶å°†å…¶ç”¨äºæ¯ä¸ªå…¶ä»–è¯·æ±‚ã€‚ä½†è¿™å˜å¾—å±é™©ï¼Œå¹¶ä¸”ä»ç„¶ä»…é™äº HTTPã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ç§æ–¹æ³•æ˜¯åœ¨æ¯ä¸ªè¿æ¥å‰æ·»åŠ ä¸€ä¸ªæŠ¥å¤´ï¼ŒæŠ¥å‘Šå¦ä¸€ä¾§è¿æ¥çš„ç‰¹å¾ã€‚è¿™ç§æ–¹æ³•æ›´å®¹æ˜“å®æ–½ï¼Œä¸éœ€è¦åœ¨ä»»ä¸€ä¾§å…·æœ‰ä»»ä½•ç‰¹å®šäºåè®®çš„çŸ¥è¯†ï¼Œå¹¶ä¸”å®Œå…¨é€‚åˆç›®çš„ï¼Œå› ä¸ºç¡®åˆ‡çš„ç›®æ ‡æ˜¯äº†è§£å¦ä¸€ä¾§è¿æ¥çš„ç«¯ç‚¹ã€‚å¯¹äºå‘é€æ–¹æ¥è¯´æ‰§è¡Œèµ·æ¥å¾ˆå®¹æ˜“ï¼ˆåªéœ€åœ¨å»ºç«‹è¿æ¥åå‘é€ä¸€ä¸ªç®€çŸ­çš„æŠ¥å¤´ï¼‰ï¼Œå¯¹äºæ¥æ”¶æ–¹æ¥è¯´è§£æä¹Ÿå¾ˆå®¹æ˜“ï¼ˆåªéœ€åœ¨æ¥æ”¶è¿æ¥åæ‰§è¡Œä¸€æ¬¡ read() æ¥å¡«å……åœ°å€ï¼‰ã€‚ç”¨äºåœ¨ä»£ç†ä¹‹é—´ä¼ é€’è¿æ¥ä¿¡æ¯çš„åè®®å› æ­¤è¢«ç§°ä¸º PROXY åè®®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-proxy-åè®®å¤´&#34;&gt;2. PROXY åè®®å¤´&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡ä½¿ç”¨ä¸€äº›å€¼å¾—åœ¨è¿™é‡Œè§£é‡Šçš„æœ¯è¯­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;è¿æ¥å‘èµ·æ–¹&amp;quot;æ˜¯è¯·æ±‚æ–°è¿æ¥çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;è¿æ¥ç›®æ ‡&amp;quot;æ˜¯æ¥å—è¿æ¥è¯·æ±‚çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;å®¢æˆ·ç«¯&amp;quot;æ˜¯è¯·æ±‚è¿æ¥çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;æœåŠ¡å™¨&amp;quot;æ˜¯å®¢æˆ·ç«¯å¸Œæœ›è¿æ¥çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;ä»£ç†&amp;quot;æ˜¯æ‹¦æˆªå¹¶ä¸­ç»§è¿æ¥çš„ä¸€æ–¹ï¼Œä»å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;å‘é€æ–¹&amp;quot;æ˜¯åœ¨è¿æ¥ä¸Šå‘é€æ•°æ®çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;æ¥æ”¶æ–¹&amp;quot;æ˜¯ä»å‘é€æ–¹æ¥æ”¶æ•°æ®çš„ä¸€æ–¹ã€‚&lt;/li&gt;
&lt;li&gt;&amp;ldquo;å¤´éƒ¨&amp;quot;æˆ–&amp;quot;PROXY åè®®å¤´&amp;quot;æ˜¯è¿æ¥å‘èµ·æ–¹åœ¨è¿æ¥å¼€å§‹æ—¶æ·»åŠ çš„è¿æ¥ä¿¡æ¯å—ï¼Œä»åè®®çš„è§’åº¦æ¥çœ‹ï¼Œå®ƒæˆä¸ºå‘é€æ–¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;PROXY åè®®çš„ç›®æ ‡æ˜¯ç”¨ä»£ç†æ”¶é›†çš„ä¿¡æ¯å¡«å……æœåŠ¡å™¨çš„å†…éƒ¨ç»“æ„ï¼Œå¦‚æœå®¢æˆ·ç«¯ç›´æ¥è¿æ¥åˆ°æœåŠ¡å™¨è€Œä¸æ˜¯é€šè¿‡ä»£ç†è¿æ¥ï¼ŒæœåŠ¡å™¨æœ¬èº«ä¹Ÿå¯ä»¥è·å¾—è¿™äº›ä¿¡æ¯ã€‚åè®®æºå¸¦çš„ä¿¡æ¯æ˜¯æœåŠ¡å™¨ä½¿ç”¨ getsockname() å’Œ getpeername() è·å¾—çš„ä¿¡æ¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ°å€æ—ï¼ˆAF_INET è¡¨ç¤º IPv4ï¼ŒAF_INET6 è¡¨ç¤º IPv6ï¼ŒAF_UNIXï¼‰&lt;/li&gt;
&lt;li&gt;å¥—æ¥å­—åè®®ï¼ˆSOCK_STREAM è¡¨ç¤º TCPï¼ŒSOCK_DGRAM è¡¨ç¤º UDPï¼‰&lt;/li&gt;
&lt;li&gt;ç¬¬ 3 å±‚æºå’Œç›®æ ‡åœ°å€&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰çš„è¯ï¼Œç¬¬ 4 å±‚æºå’Œç›®æ ‡ç«¯å£&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ XCLIENT åè®®ä¸åŒï¼ŒPROXY åè®®è¢«è®¾è®¡ä¸ºå…·æœ‰æœ‰é™çš„å¯æ‰©å±•æ€§ï¼Œä»¥å¸®åŠ©æ¥æ”¶æ–¹å¿«é€Ÿè§£æå®ƒã€‚ç‰ˆæœ¬ 1 ä¾§é‡äºä¿æŒäººç±»å¯è¯»æ€§ï¼Œä»¥è·å¾—æ›´å¥½çš„è°ƒè¯•å¯èƒ½æ€§ï¼Œè¿™åœ¨æ—©æœŸé‡‡ç”¨æ—¶æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› ä¸ºå­˜åœ¨å¾ˆå°‘çš„å®ç°ã€‚ç‰ˆæœ¬ 2 å¢åŠ äº†å¯¹å¤´éƒ¨çš„äºŒè¿›åˆ¶ç¼–ç çš„æ”¯æŒï¼Œè¿™åœ¨å¤„ç†æ˜‚è´µçš„ä»¥ ASCII å½¢å¼å‘å‡ºå’Œè§£æçš„ IPv6 åœ°å€æ—¶è¦é«˜æ•ˆå¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸¤ç§æƒ…å†µä¸‹ï¼Œåè®®åªåŒ…æ‹¬ç”±è¿æ¥å‘èµ·æ–¹æ”¾ç½®åœ¨æ¯ä¸ªè¿æ¥å¼€å¤´çš„æ˜“äºè§£æçš„å¤´éƒ¨ã€‚åè®®æ•…æ„æ˜¯æ— çŠ¶æ€çš„ï¼Œä¸æœŸæœ›å‘é€æ–¹åœ¨å‘é€å¤´éƒ¨ä¹‹å‰ç­‰å¾…æ¥æ”¶æ–¹ï¼Œä¹Ÿä¸æœŸæœ›æ¥æ”¶æ–¹å‘é€ä»»ä½•æ•°æ®å›æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤è§„èŒƒæ”¯æŒä¸¤ç§å¤´éƒ¨æ ¼å¼ï¼Œä¸€ç§æ˜¯äººç±»å¯è¯»çš„æ ¼å¼ï¼Œæ˜¯åè®®ç‰ˆæœ¬ 1 å”¯ä¸€æ”¯æŒçš„æ ¼å¼ï¼Œå¦ä¸€ç§æ˜¯äºŒè¿›åˆ¶æ ¼å¼ï¼Œåªæœ‰åè®®ç‰ˆæœ¬ 2 æ”¯æŒã€‚è¿™ä¸¤ç§æ ¼å¼éƒ½ç»è¿‡è®¾è®¡ï¼Œä»¥ç¡®ä¿å¤´éƒ¨ä¸ä¼šä¸å¸¸è§çš„é«˜çº§åè®®ï¼ˆå¦‚ HTTPã€SSL/TLSã€FTP æˆ– SMTPï¼‰æ··æ·†ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹å¯ä»¥è½»æ¾åŒºåˆ†å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;ç‰ˆæœ¬ 1 çš„å‘é€æ–¹åªèƒ½ç”Ÿæˆäººç±»å¯è¯»çš„å¤´éƒ¨æ ¼å¼ã€‚ç‰ˆæœ¬ 2 çš„å‘é€æ–¹åªèƒ½ç”ŸæˆäºŒè¿›åˆ¶å¤´éƒ¨æ ¼å¼ã€‚ç‰ˆæœ¬ 1 çš„æ¥æ”¶æ–¹å¿…é¡»è‡³å°‘å®ç°äººç±»å¯è¯»çš„å¤´éƒ¨æ ¼å¼ã€‚ç‰ˆæœ¬ 2 çš„æ¥æ”¶æ–¹å¿…é¡»è‡³å°‘å®ç°äºŒè¿›åˆ¶å¤´éƒ¨æ ¼å¼ï¼Œå¹¶å»ºè®®å®ƒä»¬ä¹Ÿå®ç°äººç±»å¯è¯»çš„å¤´éƒ¨æ ¼å¼ï¼Œä»¥è·å¾—æ›´å¥½çš„äº’æ“ä½œæ€§å’Œåœ¨é¢å¯¹ç‰ˆæœ¬ 1 å‘é€æ–¹æ—¶æ›´å®¹æ˜“å‡çº§çš„ä¾¿åˆ©æ€§ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸¤ç§æ ¼å¼éƒ½ç»è¿‡è®¾è®¡ï¼Œä»¥é€‚åº”ä»»ä½• TCP/IP ä¸»æœºéƒ½å¿…é¡»æ”¯æŒçš„æœ€å° TCP æ®µï¼ˆ576 - 40 = 536 å­—èŠ‚ï¼‰ã€‚è¿™ç¡®ä¿åœ¨è¿æ¥å¼€å§‹æ—¶å¥—æ¥å­—ç¼“å†²åŒºä»ç„¶ä¸ºç©ºæ—¶ï¼Œæ•´ä¸ªå¤´éƒ¨å°†å§‹ç»ˆä¸€æ¬¡æ€§ä¼ é€’ã€‚å‘é€æ–¹å¿…é¡»å§‹ç»ˆç¡®ä¿å¤´éƒ¨ä¸€æ¬¡æ€§å‘é€ï¼Œä»¥ä¾¿ä¼ è¾“å±‚åœ¨ä¼ é€åˆ°æ¥æ”¶æ–¹çš„è·¯å¾„ä¸Šä¿æŒåŸå­æ€§ã€‚æ¥æ”¶æ–¹å¯èƒ½å¯¹éƒ¨åˆ†å¤´éƒ¨å®½å®¹ï¼Œæˆ–è€…åœ¨æ¥æ”¶åˆ°éƒ¨åˆ†å¤´éƒ¨æ—¶å¯èƒ½åªæ˜¯æ–­å¼€è¿æ¥ã€‚å»ºè®®æ˜¯å®½å®¹ï¼Œä½†æ˜¯å®æ–½é™åˆ¶å¯èƒ½ä¸æ€»æ˜¯å®¹æ˜“å…è®¸è¿™æ ·åšã€‚é‡è¦çš„æ˜¯è¦æ³¨æ„ï¼Œæ²¡æœ‰ä»»ä½•ä¸­é—´è®¾å¤‡å¼ºåˆ¶è½¬å‘æ•´ä¸ªå¤´éƒ¨ï¼Œå› ä¸º TCP æ˜¯ä¸€ç§æµå¼åè®®ï¼Œå¦‚æœéœ€è¦çš„è¯ï¼Œå¯ä»¥ä¸€æ¬¡å¤„ç†ä¸€ä¸ªå­—èŠ‚ï¼Œå¯¼è‡´åœ¨åˆ°è¾¾æ¥æ”¶æ–¹æ—¶å¤´éƒ¨è¢«åˆ†æ®µã€‚ä½†ç”±äºä½¿ç”¨è¿™ç§åè®®çš„åœ°æ–¹ï¼Œé€šå¸¸æ˜¯å¯ä»¥æ¥å—ä¸Šè¿°ç®€åŒ–çš„ï¼Œå› ä¸ºå¤„ç†ä¸€ä¸ªå­—èŠ‚çš„è®¾å¤‡çš„é£é™©æ¥è¿‘äºé›¶ã€‚&lt;/p&gt;
&lt;p&gt;æ¥æ”¶æ–¹åœ¨æ¥æ”¶å®Œæ•´ä¸”æœ‰æ•ˆçš„ PROXY åè®®å¤´ä¹‹å‰ï¼Œ&lt;strong&gt;ä¸å¾—&lt;/strong&gt;å¼€å§‹å¤„ç†è¿æ¥ã€‚è¿™å¯¹äºæ¥æ”¶æ–¹é¢„æœŸé¦–å…ˆå‘è¨€çš„åè®®ï¼ˆä¾‹å¦‚ï¼šSMTPã€FTP æˆ– SSHï¼‰å°¤ä¸ºé‡è¦ã€‚æ¥æ”¶æ–¹å¯ä»¥åº”ç”¨çŸ­æš‚çš„è¶…æ—¶ï¼Œå¹¶å†³å®šåœ¨å‡ ç§’å†…ï¼ˆè‡³å°‘ 3 ç§’ä»¥è¦†ç›– TCP é‡ä¼ ï¼‰å†…æœªçœ‹åˆ°åè®®å¤´æ—¶ç»ˆæ­¢è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ¥æ”¶æ–¹&lt;strong&gt;å¿…é¡»&lt;/strong&gt;é…ç½®ä¸ºä»…æ¥æ”¶æœ¬è§„èŒƒä¸­æè¿°çš„åè®®ï¼Œ&lt;strong&gt;ä¸å¾—&lt;/strong&gt;å°è¯•çŒœæµ‹åè®®å¤´æ˜¯å¦å­˜åœ¨ã€‚è¿™æ„å‘³ç€è¯¥åè®®æ˜ç¡®é˜»æ­¢äº†å…¬å…±å’Œç§æœ‰è®¿é—®ä¹‹é—´çš„ç«¯å£å…±äº«ã€‚å¦åˆ™ï¼Œå®ƒå°†é€šè¿‡å…è®¸ä¸å—ä¿¡ä»»çš„æ–¹ä¼ªé€ å…¶è¿æ¥åœ°å€è€Œå¼€å¯ä¸€ä¸ªé‡å¤§çš„å®‰å…¨æ¼æ´ã€‚æ¥æ”¶æ–¹&lt;strong&gt;åº”è¯¥&lt;/strong&gt;ç¡®ä¿è¿›è¡Œé€‚å½“çš„è®¿é—®è¿‡æ»¤ï¼Œä»¥ä¾¿åªæœ‰å—ä¿¡ä»»çš„ä»£ç†å¯ä»¥ä½¿ç”¨è¿™ä¸ªåè®®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€äº›ä»£ç†è¶³å¤Ÿèªæ˜ï¼Œèƒ½å¤Ÿç†è§£ä¼ è¾“çš„åè®®ï¼Œå¹¶é‡å¤ä½¿ç”¨ç©ºé—²çš„æœåŠ¡å™¨è¿æ¥æ¥ä¼ è¾“å¤šä¸ªæ¶ˆæ¯ã€‚è¿™é€šå¸¸å‘ç”Ÿåœ¨ HTTP ä¸­ï¼Œå…¶ä¸­æ¥è‡ªå¤šä¸ªå®¢æˆ·ç«¯çš„è¯·æ±‚å¯èƒ½é€šè¿‡åŒä¸€ä¸ªè¿æ¥å‘é€ã€‚è¿™æ ·çš„ä»£ç†&lt;strong&gt;ä¸å¾—&lt;/strong&gt;åœ¨å¤ç”¨è¿æ¥ä¸Šå®ç°æ­¤åè®®ï¼Œå› ä¸ºæ¥æ”¶æ–¹ä¼šå°† PROXY å¤´ä¸­å¹¿å‘Šçš„åœ°å€ç”¨ä½œæ‰€æœ‰è½¬å‘è¯·æ±‚çš„å‘é€æ–¹åœ°å€ã€‚å®é™…ä¸Šï¼Œè¿™æ ·çš„ä»£ç†ä¸æ˜¯&amp;quot;æ„šè ¢çš„ä»£ç†&amp;rdquo;ï¼Œå› ä¸ºå®ƒä»¬å¯¹ä¼ è¾“çš„åè®®æœ‰å®Œå…¨çš„äº†è§£ï¼Œå› æ­¤å®ƒä»¬&lt;strong&gt;å¿…é¡»&lt;/strong&gt;ä½¿ç”¨æ­¤åè®®æä¾›çš„åŠŸèƒ½æ¥å‘ˆç°å®¢æˆ·ç«¯çš„åœ°å€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;21-äººç±»å¯è¯»çš„å¤´éƒ¨æ ¼å¼ç‰ˆæœ¬-1&#34;&gt;2.1. äººç±»å¯è¯»çš„å¤´éƒ¨æ ¼å¼ï¼ˆç‰ˆæœ¬ 1ï¼‰&lt;/h2&gt;
&lt;p&gt;è¿™æ˜¯åè®®ç‰ˆæœ¬ 1 ä¸­æŒ‡å®šçš„æ ¼å¼ã€‚å®ƒåŒ…æ‹¬ä¸€è¡Œ US-ASCII æ–‡æœ¬ï¼Œä¸ä»¥ä¸‹å®Œå…¨åŒ¹é…çš„å—ï¼Œç«‹å³åœ¨è¿æ¥å»ºç«‹æ—¶å‘é€ï¼Œä¸”åœ¨ä»å‘é€æ–¹æµå‘æ¥æ”¶æ–¹çš„ä»»ä½•æ•°æ®ä¹‹å‰æ·»åŠ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;æ ‡è¯†åè®®çš„å­—ç¬¦ä¸²ï¼š&amp;ldquo;PROXY&amp;rdquo;ï¼ˆ\x50 \x52 \x4F \x58 \x59ï¼‰
çœ‹åˆ°æ­¤å­—ç¬¦ä¸²è¡¨ç¤ºè¿™æ˜¯åè®®çš„ç‰ˆæœ¬ 1ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­£å¥½ä¸€ä¸ªç©ºæ ¼ï¼š&amp;rdquo; &amp;ldquo;ï¼ˆ\x20ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æŒ‡ç¤ºä»£ç†çš„ INET åè®®å’Œæ—çš„å­—ç¬¦ä¸²ã€‚æˆªè‡³ç‰ˆæœ¬ 1ï¼Œä»…å…è®¸&amp;quot;TCP4&amp;rdquo;ï¼ˆ\x54 \x43 \x50 \x34ï¼‰è¡¨ç¤º IPv4 ä¸Šçš„ TCPï¼Œä»¥åŠ&amp;quot;TCP6&amp;rdquo;ï¼ˆ\x54 \x43 \x50 \x36ï¼‰è¡¨ç¤º IPv6 ä¸Šçš„ TCPã€‚å…¶ä»–ã€ä¸æ”¯æŒçš„æˆ–æœªçŸ¥çš„åè®®å¿…é¡»æŠ¥å‘Šä¸ºåç§°&amp;quot;UNKNOWN&amp;rdquo;ï¼ˆ\x55 \x4E \x4B \x4E \x4F \x57 \x4Eï¼‰ã€‚å¯¹äº&amp;quot;UNKNOWN&amp;rdquo;ï¼Œå‘é€æ–¹å¯ä»¥çœç•¥ CRLF ä¹‹å‰çš„è¡Œçš„å…¶ä½™éƒ¨åˆ†ï¼Œæ¥æ”¶æ–¹å¿…é¡»å¿½ç•¥åœ¨æ‰¾åˆ° CRLF ä¹‹å‰å‘ˆç°çš„ä»»ä½•å†…å®¹ã€‚è¯·æ³¨æ„ï¼Œæœ¬è§„èŒƒçš„æ—©æœŸç‰ˆæœ¬å»ºè®®åœ¨å‘é€å¥åº·æ£€æŸ¥æ—¶ä½¿ç”¨æ­¤åè®®ï¼Œä½†è¿™ä¼šå¯¼è‡´æœåŠ¡å™¨æ‹’ç»&amp;quot;UNKNOWN&amp;quot;å…³é”®å­—ã€‚å› æ­¤ï¼Œç°åœ¨å»ºè®®ä¸å‘é€&amp;quot;UNKNOWN&amp;rdquo;ï¼Œå½“é¢„è®¡è¦æ¥å—è¿æ¥æ—¶ï¼Œè€Œåªåœ¨æ— æ³•æ­£ç¡®å¡«å…… PROXY è¡Œæ—¶æ‰å‘é€&amp;quot;UNKNOWN&amp;rdquo;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­£å¥½ä¸€ä¸ªç©ºæ ¼ï¼š&amp;rdquo; &amp;ldquo;ï¼ˆ\x20ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥å…¶è§„èŒƒæ ¼å¼è¡¨ç¤ºçš„ç¬¬ 3 å±‚æºåœ°å€ã€‚IPv4 åœ°å€å¿…é¡»è¡¨ç¤ºä¸ºä¸€ç³»åˆ—æ°å¥½ä¸º[0..255]èŒƒå›´å†…çš„ 4 ä¸ªæ•´æ•°ï¼Œç”¨åè¿›åˆ¶è¡¨ç¤ºï¼Œæ¯ä¸ªæ•°å­—ä¹‹é—´ç”¨ä¸€ä¸ªç‚¹åˆ†éš”ã€‚ä¸å…è®¸åœ¨æ•°å­—å‰é¢æ·»åŠ é›¶ï¼Œä»¥é¿å…ä¸å…«è¿›åˆ¶æ•°æ··æ·†ã€‚IPv6 åœ°å€å¿…é¡»è¡¨ç¤ºä¸ºä¸€ç³»åˆ—ä»¥å†’å·åˆ†éš”çš„ 4 ä½åå…­è¿›åˆ¶æ•°å­—ï¼ˆå¤§å°å†™ä¸æ•æ„Ÿï¼‰ï¼Œå…è®¸ä½¿ç”¨ä¸€ä¸ªåŒå†’å·åºåˆ—æ¥æ›¿æ¢è¿ç»­çš„é›¶çš„æœ€å¤§å¯æ¥å—èŒƒå›´ã€‚è§£ç çš„æ¯”ç‰¹æ€»æ•°å¿…é¡»æ°å¥½ä¸º 128ã€‚å¹¿å‘Šçš„åè®®æ—å†³å®šäº†è¦ä½¿ç”¨çš„æ ¼å¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­£å¥½ä¸€ä¸ªç©ºæ ¼ï¼š&amp;rdquo; &amp;ldquo;ï¼ˆ\x20ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥å…¶è§„èŒƒæ ¼å¼è¡¨ç¤ºçš„ç¬¬ 3 å±‚ç›®æ ‡åœ°å€ã€‚å®ƒä¸ç¬¬ 3 å±‚æºåœ°å€çš„æ ¼å¼ç›¸åŒï¼Œä¸ç›¸åŒçš„åè®®æ—åŒ¹é…ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­£å¥½ä¸€ä¸ªç©ºæ ¼ï¼š&amp;rdquo; &amp;ldquo;ï¼ˆ\x20ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥åè¿›åˆ¶æ•´æ•°è¡¨ç¤ºçš„ TCP æºç«¯å£ï¼ŒèŒƒå›´åœ¨[0..65535]å†…ã€‚åœ¨æ•°å­—å‰é¢ä¸å…è®¸æ·»åŠ é›¶ï¼Œä»¥é¿å…ä¸å…«è¿›åˆ¶æ•°æ··æ·†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ­£å¥½ä¸€ä¸ªç©ºæ ¼ï¼š&amp;rdquo; &amp;ldquo;ï¼ˆ\x20ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä»¥åè¿›åˆ¶æ•´æ•°è¡¨ç¤ºçš„ TCP ç›®æ ‡ç«¯å£ï¼ŒèŒƒå›´åœ¨[0..65535]å†…ã€‚åœ¨æ•°å­—å‰é¢ä¸å…è®¸æ·»åŠ é›¶ï¼Œä»¥é¿å…ä¸å…«è¿›åˆ¶æ•°æ··æ·†ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;CRLF åºåˆ—ï¼ˆ\x0D \x0Aï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ¥æ”¶æ–¹å¿…é¡»ç­‰å¾… CRLF åºåˆ—ï¼Œç„¶åå¼€å§‹è§£ç åœ°å€ï¼Œä»¥ç¡®ä¿å®ƒä»¬æ˜¯å®Œæ•´ä¸”æ­£ç¡®è§£æçš„ã€‚å¦‚æœåœ¨å‰ 107 ä¸ªå­—ç¬¦ä¸­æ‰¾ä¸åˆ° CRLF åºåˆ—ï¼Œæ¥æ”¶æ–¹åº”å£°æ˜è¯¥è¡Œæ— æ•ˆã€‚æ¥æ”¶æ–¹å¯èƒ½ä¼šæ‹’ç»ä¸å®Œæ•´çš„è¡Œï¼Œå…¶ä¸­ä¸åŒ…å« CRLF åºåˆ—çš„ç¬¬ä¸€æ¬¡åŸå­è¯»å–æ“ä½œã€‚å½“æœŸæœ›ä¸€ä¸ªå®Œæ•´çš„ CRLF åºåˆ—æ—¶ï¼Œæ¥æ”¶æ–¹ä¸å¾—å®¹å¿å•ä¸ª CR æˆ– LF å­—ç¬¦ç»“æŸè¡Œã€‚&lt;/p&gt;
&lt;h2 id=&#34;22-äºŒè¿›åˆ¶å¤´éƒ¨æ ¼å¼ç‰ˆæœ¬-2&#34;&gt;2.2. äºŒè¿›åˆ¶å¤´éƒ¨æ ¼å¼ï¼ˆç‰ˆæœ¬ 2ï¼‰&lt;/h2&gt;
&lt;p&gt;ç”Ÿæˆå¯è¯»çš„ IPv6 åœ°å€å¹¶è§£æå®ƒä»¬éå¸¸ä½æ•ˆï¼Œå› ä¸ºå­˜åœ¨å¤šç§å¯èƒ½çš„è¡¨ç¤ºæ ¼å¼å’Œç´§å‡‘åœ°å€æ ¼å¼çš„å¤„ç†ã€‚æ­¤å¤–ï¼Œæ— æ³•åœ¨ IPv4/IPv6 ä»¥å¤–æŒ‡å®šåœ°å€ç³»åˆ—ï¼Œä¹Ÿä¸èƒ½æŒ‡å®šé TCP åè®®ã€‚äººç±»å¯è¯»æ ¼å¼çš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ç°éœ€è¦è§£ææ‰€æœ‰å­—ç¬¦æ‰èƒ½æ‰¾åˆ°å°¾éšçš„ CRLFï¼Œè¿™ä½¿å¾—åªè¯»å–ç¡®åˆ‡å­—èŠ‚æ•°å˜å¾—æ›´åŠ å›°éš¾ã€‚æœ€åï¼Œç”±äºå…¶ä¸ç²¾ç¡®çš„å«ä¹‰ï¼Œä¸€äº›æœåŠ¡å™¨å¹¶ä¸æ€»æ˜¯æ¥å— UNKNOWN åœ°å€ç±»å‹ä½œä¸ºæœ‰æ•ˆåè®®ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œåè®®çš„ç‰ˆæœ¬ 2 å¼•å…¥äº†ä¸€ç§æ–°çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œè¯¥æ ¼å¼ä¸ç‰ˆæœ¬ 1 å’Œå…¶ä»–å¸¸ç”¨åè®®ä»ç„¶å¯ä»¥åŒºåˆ†å¼€ã€‚å®ƒä¸“é—¨è®¾è®¡æˆä¸å„ç§åè®®ä¸å…¼å®¹ï¼Œå¹¶åœ¨æ„å¤–å‘ˆç°æ—¶è¢«è®¸å¤šå¸¸è§å®ç°æ‹’ç»ï¼ˆè¯·å‚é˜…ç¬¬ 7 èŠ‚ï¼‰ã€‚æ­¤å¤–ï¼Œä¸ºäº†æé«˜å¤„ç†æ•ˆç‡ï¼ŒIPv4 å’Œ IPv6 åœ°å€åˆ†åˆ«åœ¨ 4 å­—èŠ‚å’Œ 16 å­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½ã€‚&lt;/p&gt;
&lt;p&gt;äºŒè¿›åˆ¶å¤´éƒ¨æ ¼å¼ä»¥åŒ…å«åè®®ç­¾åçš„å›ºå®š 12 å­—èŠ‚å—å¼€å¤´ï¼š&lt;/p&gt;
&lt;p&gt;\x0D \x0A \x0D \x0A \x00 \x0D \x0A \x51 \x55 \x49 \x54 \x0A&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œè¯¥å—åœ¨ç¬¬ 5 ä¸ªä½ç½®åŒ…å«ä¸€ä¸ªç©ºå­—èŠ‚ï¼Œå› æ­¤ä¸å¾—å°†å…¶è§†ä¸ºä»¥ç©ºå­—ç¬¦ç»“å°¾çš„å­—ç¬¦ä¸²ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥çš„ä¸€ä¸ªå­—èŠ‚ï¼ˆç¬¬ 13 ä¸ªå­—èŠ‚ï¼‰æ˜¯åè®®ç‰ˆæœ¬å’Œå‘½ä»¤ã€‚&lt;/p&gt;
&lt;p&gt;æœ€é«˜å››ä½åŒ…å«ç‰ˆæœ¬ã€‚æ ¹æ®æœ¬è§„èŒƒï¼Œå®ƒå¿…é¡»å§‹ç»ˆä»¥\x2 å‘é€ï¼Œæ¥æ”¶æ–¹åªèƒ½æ¥å—æ­¤å€¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ä½å››ä½è¡¨ç¤ºå‘½ä»¤ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;\x0 : LOCAL : è¿æ¥æ˜¯ä»£ç†æœ‰ç›®çš„åœ°å»ºç«‹çš„ï¼Œè€Œæ²¡æœ‰è¢«ä¸­ç»§ã€‚è¿æ¥çš„ç«¯ç‚¹æ˜¯å‘é€æ–¹å’Œæ¥æ”¶æ–¹ã€‚å½“ä»£ç†å‘æœåŠ¡å™¨å‘é€å¥åº·æ£€æŸ¥æ—¶ï¼Œå­˜åœ¨è¿™æ ·çš„è¿æ¥ã€‚æ¥æ”¶æ–¹å¿…é¡»å°†æ­¤è¿æ¥è§†ä¸ºæœ‰æ•ˆï¼Œå¹¶ä½¿ç”¨çœŸå®çš„è¿æ¥ç«¯ç‚¹ï¼Œä¸¢å¼ƒåŒ…æ‹¬è¢«å¿½ç•¥çš„åè®®å—åœ¨å†…çš„åè®®å—ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x1 : PROXY : è¿æ¥æ˜¯ä»£è¡¨å¦ä¸€ä¸ªèŠ‚ç‚¹å»ºç«‹çš„ï¼Œå¹¶åæ˜ äº†åŸå§‹çš„è¿æ¥ç«¯ç‚¹ã€‚æ¥æ”¶æ–¹å¿…é¡»ä½¿ç”¨åè®®å—ä¸­æä¾›çš„ä¿¡æ¯æ¥è·å–åŸå§‹åœ°å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä»–å€¼æœªåˆ†é…ï¼Œå‘é€æ–¹ä¸å¾—å‘å‡ºè¿™é‡Œæ„å¤–çš„å€¼ã€‚æ¥æ”¶æ–¹å¿…é¡»ä¸¢å¼ƒå‘ˆç°æ„å¤–å€¼çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ç¬¬ 14 ä¸ªå­—èŠ‚åŒ…å«ä¼ è¾“åè®®å’Œåœ°å€æ—ã€‚æœ€é«˜çš„ 4 ä½åŒ…å«åœ°å€æ—ï¼Œæœ€ä½çš„ 4 ä½åŒ…å«åè®®ã€‚&lt;/p&gt;
&lt;p&gt;åœ°å€æ—æ˜ å°„åˆ°åŸå§‹å¥—æ¥å­—æ—ï¼Œè€Œä¸ä¸€å®šåŒ¹é…ç³»ç»Ÿå†…éƒ¨ä½¿ç”¨çš„å€¼ã€‚å®ƒå¯ä»¥æ˜¯ä»¥ä¸‹ä¹‹ä¸€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;0x0 : AF_UNSPEC : è¯¥è¿æ¥è¢«è½¬å‘åˆ°æœªçŸ¥ã€æœªæŒ‡å®šæˆ–ä¸æ”¯æŒçš„åè®®ã€‚å‘é€æ–¹åº”åœ¨å‘é€ LOCAL å‘½ä»¤æˆ–å¤„ç†ä¸æ”¯æŒçš„åè®®ç³»åˆ—æ—¶ä½¿ç”¨æ­¤ç³»åˆ—ã€‚æ¥æ”¶æ–¹å¯ä»¥è‡ªç”±åœ°æ¥å—è¿æ¥å¹¶ä½¿ç”¨çœŸå®çš„ç«¯ç‚¹åœ°å€ï¼Œæˆ–æ‹’ç»å®ƒã€‚æ¥æ”¶æ–¹åº”å¿½ç•¥åœ°å€ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;0x1 : AF_INET : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET åœ°å€æ—ï¼ˆIPv4ï¼‰ã€‚åœ°å€å®Œå…¨æ˜¯æ¯ä¸ª 4 å­—èŠ‚çš„ç½‘ç»œå­—èŠ‚é¡ºåºï¼Œåè·Ÿä¼ è¾“åè®®ä¿¡æ¯ï¼ˆé€šå¸¸æ˜¯ç«¯å£ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;0x2 : AF_INET6 : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET6 åœ°å€æ—ï¼ˆIPv6ï¼‰ã€‚åœ°å€æ˜¯æ¯ä¸ª 16 å­—èŠ‚çš„ç½‘ç»œå­—èŠ‚é¡ºåºï¼Œåè·Ÿä¼ è¾“åè®®ä¿¡æ¯ï¼ˆé€šå¸¸æ˜¯ç«¯å£ï¼‰ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;0x3 : AF_UNIX : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_UNIX åœ°å€æ—ï¼ˆUNIXï¼‰ã€‚åœ°å€æ˜¯æ¯ä¸ª 108 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä»–å€¼æœªæŒ‡å®šï¼Œä¸å¾—åœ¨è¯¥åè®®çš„ç‰ˆæœ¬ 2 ä¸­å‘é€ï¼Œå¹¶ä¸”å¿…é¡»è¢«æ¥æ”¶æ–¹æ‹’ç»ä¸ºæ— æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¼ è¾“åè®®åœ¨ç¬¬ 14 ä¸ªå­—èŠ‚çš„æœ€ä½ 4 ä½ä¸­æŒ‡å®šï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;0x0 : UNSPEC : è¯¥è¿æ¥è¢«è½¬å‘åˆ°æœªçŸ¥ã€æœªæŒ‡å®šæˆ–ä¸æ”¯æŒçš„åè®®ã€‚å‘é€æ–¹åº”åœ¨å‘é€ LOCAL å‘½ä»¤æˆ–å¤„ç†ä¸æ”¯æŒçš„åè®®ç³»åˆ—æ—¶ä½¿ç”¨æ­¤ç³»åˆ—ã€‚æ¥æ”¶æ–¹å¯ä»¥è‡ªç”±åœ°æ¥å—è¿æ¥å¹¶ä½¿ç”¨çœŸå®çš„ç«¯ç‚¹åœ°å€ï¼Œæˆ–æ‹’ç»å®ƒã€‚æ¥æ”¶æ–¹åº”å¿½ç•¥åœ°å€ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;0x1 : STREAM : è½¬å‘çš„è¿æ¥ä½¿ç”¨ SOCK_STREAM åè®®ï¼ˆä¾‹å¦‚ï¼šTCP æˆ– UNIX_STREAMï¼‰ã€‚åœ¨ä¸ AF_INET/AF_INET6ï¼ˆTCPï¼‰ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåœ°å€åè·Ÿä»¥ç½‘ç»œå­—èŠ‚é¡ºåºè¡¨ç¤ºçš„æºå’Œç›®æ ‡ç«¯å£ï¼Œé€šå¸¸æ˜¯ 2 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;0x2 : DGRAM : è½¬å‘çš„è¿æ¥ä½¿ç”¨ SOCK_DGRAM åè®®ï¼ˆä¾‹å¦‚ï¼šUDP æˆ– UNIX_DGRAMï¼‰ã€‚åœ¨ä¸ AF_INET/AF_INET6ï¼ˆUDPï¼‰ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œåœ°å€åè·Ÿä»¥ç½‘ç»œå­—èŠ‚é¡ºåºè¡¨ç¤ºçš„æºå’Œç›®æ ‡ç«¯å£ï¼Œé€šå¸¸æ˜¯ 2 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å…¶ä»–å€¼æœªæŒ‡å®šï¼Œä¸å¾—åœ¨è¯¥åè®®çš„ç‰ˆæœ¬ 2 ä¸­å‘é€ï¼Œå¹¶ä¸”å¿…é¡»è¢«æ¥æ”¶æ–¹æ‹’ç»ä¸ºæ— æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å®é™…ä¸Šï¼Œä»¥ä¸‹åè®®å­—èŠ‚æ˜¯é¢„æœŸçš„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;\x00 : UNSPEC : è¯¥è¿æ¥è¢«è½¬å‘åˆ°æœªçŸ¥ã€æœªæŒ‡å®šæˆ–ä¸æ”¯æŒçš„åè®®ã€‚å‘é€æ–¹åº”åœ¨å‘é€ LOCAL å‘½ä»¤æˆ–å¤„ç†ä¸æ”¯æŒçš„åè®®ç³»åˆ—æ—¶ä½¿ç”¨æ­¤ç³»åˆ—ã€‚åœ¨ä½¿ç”¨ LOCAL å‘½ä»¤æ—¶ï¼Œæ¥æ”¶æ–¹å¿…é¡»æ¥å—è¿æ¥å¹¶å¿½ç•¥ä»»ä½•åœ°å€ä¿¡æ¯ã€‚å¯¹äºå…¶ä»–å‘½ä»¤ï¼Œæ¥æ”¶æ–¹å¯ä»¥è‡ªç”±åœ°æ¥å—è¿æ¥å¹¶ä½¿ç”¨çœŸæ­£çš„ç«¯ç‚¹åœ°å€ï¼Œæˆ–æ‹’ç»è¿æ¥ã€‚æ¥æ”¶æ–¹åº”å¿½ç•¥åœ°å€ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x11 : TCP over IPv4 : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET åè®®ç³»åˆ—çš„ TCPã€‚åœ°å€é•¿åº¦ä¸º 2&lt;em&gt;4 + 2&lt;/em&gt;2 = 12 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x12 : UDP over IPv4 : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET åè®®ç³»åˆ—çš„ UDPã€‚åœ°å€é•¿åº¦ä¸º 2&lt;em&gt;4 + 2&lt;/em&gt;2 = 12 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x21 : TCP over IPv6 : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET6 åè®®ç³»åˆ—çš„ TCPã€‚åœ°å€é•¿åº¦ä¸º 2&lt;em&gt;16 + 2&lt;/em&gt;2 = 36 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x22 : UDP over IPv6 : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_INET6 åè®®ç³»åˆ—çš„ UDPã€‚åœ°å€é•¿åº¦ä¸º 2&lt;em&gt;16 + 2&lt;/em&gt;2 = 36 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x31 : UNIX æµ : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_UNIX åè®®ç³»åˆ—çš„ SOCK_STREAMã€‚åœ°å€é•¿åº¦ä¸º 2*108 = 216 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;\x32 : UNIX æ•°æ®æŠ¥ : è½¬å‘çš„è¿æ¥ä½¿ç”¨ AF_UNIX åè®®ç³»åˆ—çš„ SOCK_DGRAMã€‚åœ°å€é•¿åº¦ä¸º 2*108 = 216 å­—èŠ‚ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åªæœ‰ UNSPEC åè®®å­—èŠ‚ï¼ˆ\x00ï¼‰æ˜¯æ¥æ”¶æ–¹å¿…é¡»å®ç°çš„ã€‚æ¥æ”¶æ–¹ä¸éœ€è¦å®ç°å…¶ä»–åè®®å­—èŠ‚ï¼Œåªè¦å¯¹äºå®ƒä¸æ”¯æŒçš„ä¸Šè¿°æœ‰æ•ˆç»„åˆï¼Œå®ƒä¼šè‡ªåŠ¨å›é€€åˆ° UNSPEC æ¨¡å¼ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ 15 å’Œç¬¬ 16 å­—èŠ‚æ˜¯ä»¥ç½‘ç»œå­—èŠ‚åºçš„å­—èŠ‚é•¿åº¦ã€‚å®ƒç”¨äºä½¿æ¥æ”¶æ–¹çŸ¥é“è¦è·³è¿‡å¤šå°‘åœ°å€å­—èŠ‚ï¼Œå³ä½¿å®ƒä¸å®ç°æ‰€å‘ˆç°çš„åè®®ä¹Ÿæ˜¯å¦‚æ­¤ã€‚å› æ­¤ï¼Œåè®®å¤´çš„å­—èŠ‚é•¿åº¦æ€»æ˜¯ç²¾ç¡®åœ°ä¸º 16 åŠ ä¸Šæ­¤å€¼ã€‚å½“å‘é€æ–¹å‘ˆç° LOCAL è¿æ¥æ—¶ï¼Œå®ƒä¸åº”å‘ˆç°ä»»ä½•åœ°å€ï¼Œå› æ­¤å°†æ­¤å­—æ®µè®¾ç½®ä¸ºé›¶ã€‚æ¥æ”¶æ–¹å¿…é¡»å§‹ç»ˆè€ƒè™‘æ­¤å­—æ®µä»¥è·³è¿‡é€‚å½“æ•°é‡çš„å­—èŠ‚ï¼Œä¸å¾—å‡è®¾ LOCAL è¿æ¥çš„æƒ…å†µä¸‹ä¸ºé›¶ã€‚å½“æ¥æ”¶æ–¹æ¥å—æ˜¾ç¤º UNSPEC åœ°å€æ—æˆ–åè®®çš„ä¼ å…¥è¿æ¥æ—¶ï¼Œå¦‚æœå­˜åœ¨ï¼Œå®ƒå¯èƒ½ä¼šå†³å®šæ˜¯å¦è®°å½•åœ°å€ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œ16 å­—èŠ‚çš„ç‰ˆæœ¬ 2 å¤´éƒ¨å¯ä»¥è¿™æ ·æè¿°ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;proxy_hdr_v2&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* hex 0D 0A 0D 0A 00 0D 0A 51 55 49 54 0A */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ver_cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* protocol version and command */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;      &lt;span class=&#34;cm&#34;&gt;/* protocol family and address */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;     &lt;span class=&#34;cm&#34;&gt;/* number of following bytes part of the header */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»ç¬¬ 17 ä¸ªå­—èŠ‚å¼€å§‹ï¼Œåœ°å€ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºå‘ˆç°ã€‚åœ°å€é¡ºåºå§‹ç»ˆç›¸åŒï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æºå±‚ 3 åœ°å€ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºå‘ˆç°&lt;/li&gt;
&lt;li&gt;ç›®æ ‡å±‚ 3 åœ°å€ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºå‘ˆç°&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰ï¼Œæºå±‚ 4 åœ°å€ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºå‘ˆç°ï¼ˆç«¯å£ï¼‰&lt;/li&gt;
&lt;li&gt;å¦‚æœæœ‰ï¼Œç›®æ ‡å±‚ 4 åœ°å€ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºå‘ˆç°ï¼ˆç«¯å£ï¼‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ°å€å—å¯ä»¥ç›´æ¥ä»ä»¥ä¸‹è”åˆå‘é€æˆ–æ¥æ”¶ï¼Œè¿™æ ·å¯ä»¥æ ¹æ®åœ°å€ç±»å‹è½»æ¾è¿›è¡Œè½¬æ¢åˆ°/ä»ç›¸å…³å¥—æ¥å­—æœ¬æœºç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;proxy_addr&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;        &lt;span class=&#34;cm&#34;&gt;/* for TCP/UDP over IPv4, len = 12 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ipv4_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;        &lt;span class=&#34;cm&#34;&gt;/* for TCP/UDP over IPv6, len = 36 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ipv6_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;        &lt;span class=&#34;cm&#34;&gt;/* for AF_UNIX sockets, len = 216 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;         &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unix_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‘é€æ–¹å¿…é¡»ç¡®ä¿æ•´ä¸ªåè®®å¤´ä¸€æ¬¡å‘é€ã€‚è¿™ä¸ªå—æ€»æ˜¯å°äº MSSï¼Œæ‰€ä»¥æ²¡æœ‰ç†ç”±åœ¨è¿æ¥å¼€å§‹æ—¶å°†å…¶åˆ†æ®µã€‚æ¥æ”¶æ–¹ä¹Ÿåº”ä¸€æ¬¡å¤„ç†å¤´éƒ¨ã€‚æ¥æ”¶æ–¹åœ¨æ¥æ”¶å®Œæ•´çš„åœ°å€å—ä¹‹å‰ä¸å¾—å¼€å§‹è§£æåœ°å€ã€‚æ¥æ”¶æ–¹è¿˜å¿…é¡»æ‹’ç»åŒ…å«éƒ¨åˆ†åè®®å¤´çš„ä¼ å…¥è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æ¥æ”¶æ–¹å¯ä»¥é…ç½®ä¸ºæ”¯æŒåè®®çš„ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2ã€‚è¯†åˆ«åè®®ç‰ˆæœ¬å¾ˆå®¹æ˜“ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœä¼ å…¥çš„å­—èŠ‚è®¡æ•°ä¸º 16 æˆ–æ›´å¤šï¼Œå¹¶ä¸”å‰ 13 ä¸ªå­—èŠ‚ä¸åè®®ç­¾åå—åŒ¹é…ï¼Œåè·Ÿåè®®ç‰ˆæœ¬ 2ï¼š&lt;/p&gt;
&lt;p&gt;\x0D\x0A\x0D\x0A\x00\x0D\x0A\x51\x55\x49\x54\x0A\x20&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦åˆ™ï¼Œå¦‚æœä¼ å…¥çš„å­—èŠ‚è®¡æ•°ä¸º 8 æˆ–æ›´å¤šï¼Œå¹¶ä¸”å‰ 5 ä¸ªå­—ç¬¦ä¸&amp;quot;PROXY&amp;quot;çš„ US-ASCII è¡¨ç¤ºåŒ¹é…ï¼Œé‚£ä¹ˆåè®®å¿…é¡»è§£æä¸ºç‰ˆæœ¬ 1ï¼š&lt;/p&gt;
&lt;p&gt;\x50\x52\x4F\x58\x59&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦åˆ™ï¼Œè¯¥åè®®ä¸åœ¨æœ¬è§„èŒƒçš„èŒƒå›´å†…ï¼Œè¿æ¥å¿…é¡»è¢«ä¸¢å¼ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœ PROXY åè®®å¤´ä¸­æŒ‡å®šçš„é•¿åº¦è¡¨ç¤ºåœ¨åœ°å€ä¿¡æ¯ä¹‹åè¿˜æœ‰å…¶ä»–å­—èŠ‚ï¼Œæ¥æ”¶æ–¹å¯ä»¥é€‰æ‹©è·³è¿‡å¹¶å¿½ç•¥è¿™äº›å­—èŠ‚ï¼Œæˆ–å°è¯•è§£é‡Šè¿™äº›å­—èŠ‚ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›å­—èŠ‚ä¸­çš„ä¿¡æ¯å°†ä»¥ Type-Length-Valueï¼ˆTLV å‘é‡ï¼‰çš„æ ¼å¼æ’åˆ—ã€‚ç¬¬ä¸€ä¸ªå­—èŠ‚æ˜¯å‘é‡çš„ç±»å‹ã€‚æ¥ä¸‹æ¥çš„ä¸¤ä¸ªå­—èŠ‚è¡¨ç¤ºå€¼çš„é•¿åº¦ï¼ˆä¸åŒ…æ‹¬ç±»å‹å’Œé•¿åº¦å­—èŠ‚ï¼‰ï¼Œåœ¨é•¿åº¦å­—æ®µä¹‹åæ˜¯é•¿åº¦å­—æ®µæŒ‡å®šçš„å­—èŠ‚æ•°ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pp2_tlv&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length_hi&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;length_lo&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ¥æ”¶æ–¹å¯ä»¥é€‰æ‹©è·³è¿‡å¹¶å¿½ç•¥å…¶ä¸æ„Ÿå…´è¶£æˆ–ä¸ç†è§£çš„ TLVsã€‚å‘é€&lt;/p&gt;
&lt;p&gt;æ–¹åªèƒ½ä¸ºå®ƒé€‰æ‹©å‘å¸ƒçš„ä¿¡æ¯ç”Ÿæˆ TLVsã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹ç±»å‹å·²ç»æ³¨å†Œåˆ°&lt;type&gt;å­—æ®µï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_ALPN           0x01
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_AUTHORITY      0x02
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_CRC32C         0x03
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_NOOP           0x04
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_UNIQUE_ID      0x05
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_SSL            0x20
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_SUBTYPE_SSL_VERSION 0x21
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_SUBTYPE_SSL_CN      0x22
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_SUBTYPE_SSL_CIPHER  0x23
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_SUBTYPE_SSL_SIG_ALG 0x24
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_SUBTYPE_SSL_KEY_ALG 0x25
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#define PP2_TYPE_NETNS          0x30
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;2.2.1 PP2_TYPE_ALPN&lt;/p&gt;
&lt;p&gt;åº”ç”¨å±‚åè®®åå•†ï¼ˆALPNï¼‰ã€‚å®ƒæ˜¯å®šä¹‰è¿æ¥ä¸Šæ­£åœ¨ä½¿ç”¨çš„ä¸Šå±‚åè®®çš„å­—èŠ‚åºåˆ—ã€‚æœ€å¸¸è§çš„ç”¨ä¾‹å°†æ˜¯ä¼ é€’ç”± RFC7301 [9]å®šä¹‰çš„ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTLSï¼‰åè®®çš„ ALPN æ‰©å±•çš„ç²¾ç¡®å‰¯æœ¬ã€‚&lt;/p&gt;
&lt;p&gt;2.2.2 PP2_TYPE_AUTHORITY&lt;/p&gt;
&lt;p&gt;åŒ…å«ç”±å®¢æˆ·ç«¯ä¼ é€’çš„ä¸»æœºåå€¼ï¼Œä½œä¸º UTF8 ç¼–ç çš„å­—ç¬¦ä¸²ã€‚åœ¨å®¢æˆ·ç«¯è¿æ¥ä¸Šä½¿ç”¨ TLS çš„æƒ…å†µä¸‹ï¼Œè¿™æ˜¯ç”± RFC3546 [10]ç¬¬ 3.1 èŠ‚å®šä¹‰çš„â€œserver_nameâ€æ‰©å±•çš„ç²¾ç¡®å‰¯æœ¬ï¼Œé€šå¸¸ç§°ä¸ºâ€œSNIâ€ã€‚å¯èƒ½è¿˜æœ‰å…¶ä»–æƒ…å†µå¯ä»¥åœ¨æ²¡æœ‰æ¶‰åŠ TLS çš„æƒ…å†µä¸‹åœ¨è¿æ¥ä¸­æåˆ°æƒå¨ã€‚&lt;/p&gt;
&lt;p&gt;2.2.3. PP2_TYPE_CRC32C&lt;/p&gt;
&lt;p&gt;ç±»å‹ PP2_TYPE_CRC32C çš„å€¼æ˜¯ä¸€ä¸ª 32 ä½æ•°å­—ï¼Œå­˜å‚¨äº† PROXY åè®®å¤´çš„ CRC32c æ ¡éªŒå’Œã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå‘é€æ–¹æ”¯æŒæ ¡éªŒå’Œå¹¶æ„å»ºäº†å¤´éƒ¨ï¼Œåˆ™å‘é€æ–¹å¿…é¡»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å°†æ ¡éªŒå­—æ®µåˆå§‹åŒ–ä¸º&#39;0&amp;rsquo;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;è®¡ç®— PROXY å¤´çš„ CRC32c æ ¡éªŒå’Œï¼Œå¦‚ RFC4960 é™„å½• B [8]æ‰€è¿°ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å°†ç»“æœå€¼æ”¾å…¥æ ¡éªŒå­—æ®µä¸­ï¼Œä¿æŒå…¶ä½™ä½ä¸å˜ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¦‚æœæ ¡éªŒå’Œä½œä¸º PROXY å¤´çš„ä¸€éƒ¨åˆ†æä¾›ï¼Œå¹¶ä¸”æ¥æ”¶æ–¹æ”¯æŒæ ¡éªŒå’ŒåŠŸèƒ½ï¼Œåˆ™æ¥æ”¶æ–¹å¿…é¡»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;å­˜å‚¨æ¥æ”¶åˆ°çš„ CRC32c æ ¡éªŒå’Œå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç”¨æ‰€æœ‰&#39;0&amp;rsquo;æ›¿æ¢æ¥æ”¶åˆ°çš„ PROXY å¤´ä¸­çš„ 32 ä½æ ¡éªŒå­—æ®µï¼Œå¹¶è®¡ç®—æ•´ä¸ª PROXY å¤´çš„ CRC32c æ ¡éªŒå€¼ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;éªŒè¯è®¡ç®—çš„ CRC32c æ ¡éªŒå’Œæ˜¯å¦ä¸æ¥æ”¶åˆ°çš„ CRC32c æ ¡éªŒå’Œç›¸åŒã€‚å¦‚æœä¸ç›¸åŒï¼Œæ¥æ”¶æ–¹å¿…é¡»å°†æä¾›å¤´éƒ¨çš„ TCP è¿æ¥è§†ä¸ºæ— æ•ˆã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å¤„ç†æ— æ•ˆ TCP è¿æ¥çš„é»˜è®¤è¿‡ç¨‹æ˜¯ä¸­æ­¢å®ƒã€‚&lt;/p&gt;
&lt;p&gt;2.2.4. PP2_TYPE_NOOP&lt;/p&gt;
&lt;p&gt;å½“è§£ææ—¶ï¼Œåº”å¿½ç•¥æ­¤ç±»å‹çš„ TLVã€‚å€¼æ˜¯é›¶ä¸ªæˆ–å¤šä¸ªå­—èŠ‚ã€‚å¯ä»¥ç”¨äºæ•°æ®å¡«å……æˆ–å¯¹é½ã€‚è¯·æ³¨æ„ï¼Œå®ƒåªèƒ½å¯¹é½ 3 ä¸ªæˆ–æ›´å¤šå­—èŠ‚ï¼Œå› ä¸º TLV ä¸èƒ½å°äºè¿™ä¸ªå¤§å°ã€‚&lt;/p&gt;
&lt;p&gt;2.2.5. PP2_TYPE_UNIQUE_ID&lt;/p&gt;
&lt;p&gt;ç±»å‹ PP2_TYPE_UNIQUE_ID çš„å€¼æ˜¯ç”±ä¸Šæ¸¸ä»£ç†ç”Ÿæˆçš„æœ€å¤š 128 ä¸ªå­—èŠ‚çš„ä¸é€æ˜å­—èŠ‚åºåˆ—ï¼Œç”¨äºå”¯ä¸€æ ‡è¯†è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;å”¯ä¸€ ID å¯ç”¨äºè½»æ¾åœ°åœ¨å¤šå±‚ä»£ç†ä¹‹é—´å…³è”è¿æ¥ï¼Œæ— éœ€æŸ¥æ‰¾ IP åœ°å€å’Œç«¯å£å·ã€‚&lt;/p&gt;
&lt;p&gt;2.2.6. PP2_TYPE_SSL ç±»å‹å’Œå­ç±»å‹&lt;/p&gt;
&lt;p&gt;å¯¹äºç±»å‹ PP2_TYPE_SSLï¼Œå€¼æœ¬èº«å¦‚ä¸‹å®šä¹‰ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pp2_tlv_ssl&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;client&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;verify&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pp2_tlv&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sub_tlv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;};&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœå®¢æˆ·ç«¯æä¾›äº†è¯ä¹¦å¹¶æˆåŠŸéªŒè¯ï¼Œ&lt;verify&gt;å­—æ®µå°†ä¸ºé›¶ï¼Œå¦åˆ™ä¸ºéé›¶ã€‚&lt;/p&gt;
&lt;p&gt;&lt;client&gt;å­—æ®µç”±ä»¥ä¸‹å€¼çš„ä½å­—æ®µç»„æˆï¼ŒæŒ‡ç¤ºå“ªäº›å…ƒç´ å­˜åœ¨ï¼š&lt;/p&gt;
&lt;p&gt;#define PP2_CLIENT_SSL           0x01
#define PP2_CLIENT_CERT_CONN     0x02
#define PP2_CLIENT_CERT_SESS     0x04&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œè¿™äº›å…ƒç´ ä¸­çš„æ¯ä¸€ä¸ªéƒ½å¯èƒ½å¯¼è‡´åœ¨æ­¤ TLV ä¹‹åä½¿ç”¨ç¬¬äºŒçº§ TLV å°è£…è¿½åŠ é¢å¤–æ•°æ®ã€‚å› æ­¤ï¼Œå¯ä»¥åœ¨æ­¤å­—æ®µä¹‹åæ‰¾åˆ°å¤šä¸ª TLV å€¼ã€‚pp2_tlv_ssl çš„æ€»é•¿åº¦å°†åæ˜ è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;PP2_CLIENT_SSL æ ‡å¿—è¡¨ç¤ºå®¢æˆ·ç«¯é€šè¿‡ SSL/TLS è¿æ¥ã€‚å½“æ­¤å­—æ®µå­˜åœ¨æ—¶ï¼ŒTLS ç‰ˆæœ¬çš„ US-ASCII å­—ç¬¦ä¸²è¡¨ç¤ºå°†é™„åŠ åœ¨ TLV æ ¼å¼çš„å­—æ®µæœ«å°¾ï¼Œä½¿ç”¨ç±»å‹ PP2_SUBTYPE_SSL_VERSIONã€‚&lt;/p&gt;
&lt;p&gt;PP2_CLIENT_CERT_CONN è¡¨ç¤ºå®¢æˆ·ç«¯åœ¨å½“å‰è¿æ¥ä¸Šæä¾›äº†è¯ä¹¦ã€‚PP2_CLIENT_CERT_SESS è¡¨ç¤ºå®¢æˆ·ç«¯åœ¨å±äºæ­¤è¿æ¥çš„ TLS ä¼šè¯ä¸­è‡³å°‘æä¾›äº†ä¸€æ¬¡è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒçº§ TLV PP2_SUBTYPE_SSL_CIPHER æä¾›äº†æ‰€ä½¿ç”¨çš„å¯†ç çš„ US-ASCII å­—ç¬¦ä¸²åç§°ï¼Œä¾‹å¦‚&amp;quot;ECDHE-RSA-AES128-GCM-SHA256&amp;rdquo;ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒçº§ TLV PP2_SUBTYPE_SSL_SIG_ALG æä¾›äº†ç”¨äºç­¾åå‰ç«¯æä¾›çš„è¯ä¹¦çš„ç®—æ³•çš„ US-ASCII å­—ç¬¦ä¸²åç§°ï¼Œå½“é€šè¿‡ SSL/TLS ä¼ è¾“å±‚è¿›è¡Œä¼ å…¥è¿æ¥æ—¶ï¼Œä¾‹å¦‚&amp;quot;SHA256&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬äºŒçº§ TLV PP2_SUBTYPE_SSL_KEY_ALG æä¾›äº†ç”¨äºç”Ÿæˆå‰ç«¯æä¾›çš„è¯ä¹¦å¯†é’¥çš„ç®—æ³•çš„ US-ASCII å­—ç¬¦ä¸²åç§°ï¼Œå½“é€šè¿‡ SSL/TLS ä¼ è¾“å±‚è¿›è¡Œä¼ å…¥è¿æ¥æ—¶ï¼Œä¾‹å¦‚&amp;quot;RSA2048&amp;quot;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯è¯ä¹¦çš„ Distinguished Name çš„ Common Name å­—æ®µï¼ˆOIDï¼š2.5.4.3ï¼‰çš„å­—ç¬¦ä¸²è¡¨ç¤ºï¼ˆUTF8 ç¼–ç ï¼‰éƒ½å°†é™„åŠ åœ¨ TLV æ ¼å¼ä¸‹ï¼Œä½¿ç”¨ç±»å‹ PP2_SUBTYPE_SSL_CNã€‚ä¾‹å¦‚ï¼š&amp;ldquo;example.com&amp;rdquo;ã€‚&lt;/p&gt;
&lt;p&gt;2.2.7. PP2_TYPE_NETNS ç±»å‹&lt;/p&gt;
&lt;p&gt;ç±»å‹ PP2_TYPE_NETNS å°†å€¼å®šä¹‰ä¸ºå‘½åç©ºé—´åç§°çš„ US-ASCII å­—ç¬¦ä¸²è¡¨ç¤ºã€‚&lt;/p&gt;
&lt;p&gt;2.2.8. ä¿ç•™çš„ç±»å‹èŒƒå›´&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹èŒƒå›´çš„ 16 ä¸ªç±»å‹å€¼ä¿ç•™ç”¨äºç‰¹å®šåº”ç”¨æ•°æ®ï¼Œå¹¶æ°¸è¿œä¸ä¼šè¢« PROXY åè®®ä½¿ç”¨ã€‚å¦‚æœéœ€è¦æ›´å¤šçš„å€¼ï¼Œè¯·è€ƒè™‘é€šè¿‡ TLV ä¸­çš„ç±»å‹å­—æ®µæ‰©å±•èŒƒå›´ã€‚&lt;/p&gt;
&lt;p&gt;#define PP2_TYPE_MIN_CUSTOM    0xE0
#define PP2_TYPE_MAX_CUSTOM    0xEF&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª 8 ä¸ªå€¼çš„èŒƒå›´è¢«åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å’Œåè®®è®¾è®¡å¸ˆç”¨äºä¸´æ—¶å®éªŒæ€§ç”¨é€”ã€‚è¿™ä¸ªèŒƒå›´çš„å€¼æ°¸è¿œä¸ä¼šè¢« PROXY åè®®ä½¿ç”¨ï¼Œä¸åº”åœ¨ç”Ÿäº§åŠŸèƒ½ä¸­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;#define PP2_TYPE_MIN_EXPERIMENT 0xF0
#define PP2_TYPE_MAX_EXPERIMENT 0xF7&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹èŒƒå›´çš„ 8 ä¸ªå€¼è¢«ä¿ç•™ä¾›å°†æ¥ä½¿ç”¨ï¼Œå¯èƒ½ç”¨äºæ‰©å±•åè®®ä»¥æ”¯æŒå¤šå­—èŠ‚ç±»å‹å€¼ã€‚&lt;/p&gt;
&lt;p&gt;#define PP2_TYPE_MIN_FUTURE    0xF8
#define PP2_TYPE_MAX_FUTURE    0xFF&lt;/p&gt;
&lt;h2 id=&#34;3-å®ç°&#34;&gt;3. å®ç°&lt;/h2&gt;
&lt;p&gt;HAProxy 1.5 åœ¨åŒæ–¹éƒ½å®ç°äº† PROXY åè®®çš„ç‰ˆæœ¬ 1ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨â€œaccept-proxyâ€è®¾ç½®ä¼ é€’ç»™â€œbindâ€å…³é”®å­—æ—¶ï¼Œç›‘å¬å¥—æ¥å­—æ¥å—åè®®ã€‚åœ¨æ­¤ç±»ä¾¦å¬å™¨ä¸Šæ¥å—çš„è¿æ¥å°†è¡¨ç°å¾—å°±åƒæºå®é™…ä¸Šæ˜¯åè®®ä¸­å®£ä¼ çš„ä¸€æ ·ã€‚è¿™å¯¹äºæ—¥å¿—è®°å½•ã€ACLã€å†…å®¹è¿‡æ»¤ã€é€æ˜ä»£ç†ç­‰éƒ½æ˜¯çœŸå®çš„ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å¦‚æœâ€œserverâ€è¡Œä¸Šå­˜åœ¨â€œsend-proxyâ€è®¾ç½®ï¼Œåˆ™å¯ä»¥ä½¿ç”¨åè®®è¿æ¥åˆ°æœåŠ¡å™¨ã€‚å®ƒæ˜¯åŸºäºæ¯ä¸ªæœåŠ¡å™¨å¯ç”¨çš„ï¼Œå› æ­¤å¯ä»¥ä»…å¯¹è¿œç¨‹æœåŠ¡å™¨å¯ç”¨å®ƒï¼Œè€Œä»ç„¶ä½¿æœ¬åœ°æœåŠ¡å™¨è¡Œä¸ºä¸åŒã€‚å¦‚æœä½¿ç”¨â€œaccept-proxyâ€æ¥å—äº†ä¼ å…¥è¿æ¥ï¼Œåˆ™ä¸­ç»§çš„ä¿¡æ¯æ˜¯æ­¤è¿æ¥çš„ PROXY è¡Œä¸­å®£ä¼ çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;HAProxy 1.5 è¿˜ä½œä¸ºå‘é€æ–¹å®ç°äº† PROXY åè®®çš„ç‰ˆæœ¬ 2ã€‚æ­¤å¤–ï¼Œå·²æ·»åŠ äº†å…·æœ‰æœ‰é™å¯é€‰ SSL ä¿¡æ¯çš„ TLVã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Stunnel åœ¨ç‰ˆæœ¬ 4.45 ä¸­ä¸ºå‡ºç«™è¿æ¥æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Stud äº 2011 å¹´ 06 æœˆ 29 æ—¥ä¸ºå‡ºç«™è¿æ¥æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Postfix äºç‰ˆæœ¬ 2.10 ä¸­ä¸ºä¼ å…¥è¿æ¥ä¸­çš„ smtpd å’Œ postscreen æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;å¯ç”¨äº Stud [5]çš„è¡¥ä¸æ¥å®ç°å¯¹ä¼ å…¥è¿æ¥çš„åè®®ç‰ˆæœ¬ 1 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Varnish 4.1 [6]æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Exim äº 2014/05/13 ä¸ºä¼ å…¥è¿æ¥æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2 çš„æ”¯æŒï¼Œå¹¶å°†ä½œä¸ºç‰ˆæœ¬ 4.83 çš„ä¸€éƒ¨åˆ†å‘å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;Squid åœ¨ç‰ˆæœ¬ 3.5 [7]ä¸­æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;Jetty 9.3.0 æ”¯æŒåè®®ç‰ˆæœ¬ 1ã€‚&lt;/p&gt;
&lt;p&gt;lighttpd åœ¨ç‰ˆæœ¬ 1.4.46 [11]ä¸­ä¸ºä¼ å…¥è¿æ¥æ·»åŠ äº†å¯¹åè®®ç‰ˆæœ¬ 1 å’Œç‰ˆæœ¬ 2 çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;åè®®è¶³å¤Ÿç®€å•ï¼Œé¢„è®¡å…¶ä»–å®ç°å°†å‡ºç°ï¼Œç‰¹åˆ«æ˜¯åœ¨ SMTPã€IMAPã€FTPã€RDP ç­‰å®¢æˆ·ç«¯åœ°å€å¯¹æœåŠ¡å™¨å¾ˆé‡è¦ä¸”ä¸€äº›ä¸­ä»‹ç¯å¢ƒä¸­ã€‚äº‹å®ä¸Šï¼Œå·²ç»æœ‰å‡ ä¸ªä¸“æœ‰éƒ¨ç½²åœ¨ FTP å’Œ SMTP æœåŠ¡å™¨ä¸Šå®ç°äº†è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;é¼“åŠ±ä»£ç†å¼€å‘äººå‘˜å®ç°æ­¤åè®®ï¼Œå› ä¸ºå®ƒå°†ä½¿å…¶äº§å“åœ¨å¤æ‚çš„åŸºç¡€è®¾æ–½ä¸­æ›´åŠ é€æ˜ï¼Œå¹¶ä¸”å°†æ¶ˆé™¤ä¸æ—¥å¿—è®°å½•å’Œè®¿é—®æ§åˆ¶ç›¸å…³çš„ä¸€äº›é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æ¶æ„ä¼˜åŠ¿&#34;&gt;4. æ¶æ„ä¼˜åŠ¿&lt;/h2&gt;
&lt;h3 id=&#34;41-å¤šå±‚æ¶æ„&#34;&gt;4.1. å¤šå±‚æ¶æ„&lt;/h3&gt;
&lt;p&gt;åœ¨å¤šå±‚åŸºç¡€æ¶æ„ä¸­ï¼Œä½¿ç”¨ PROXY åè®®è€Œä¸æ˜¯é€æ˜ä»£ç†æä¾›äº†å¤šä¸ªä¼˜ç‚¹ã€‚ç¬¬ä¸€ä¸ªå³æ—¶çš„ä¼˜ç‚¹æ˜¯å¯ä»¥é“¾å¼è¿æ¥å¤šä¸ªä»£ç†å±‚ï¼Œå¹¶å§‹ç»ˆå‘ˆç°åŸå§‹ IP åœ°å€ã€‚ä¾‹å¦‚ï¼Œè€ƒè™‘ä»¥ä¸‹ 2 å±‚ä»£ç†æ¶æ„ï¼š&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;     äº’è”ç½‘
      ,---.                     | ä»å®¢æˆ·ç«¯åˆ°PX1ï¼š
     (  X  )                    | åŸç”Ÿåè®®
      `---&#39;                     |
        |                       V
     +--+--+      +-----+
     | FW1 |------| PX1 |
     +--+--+      +-----+       | ä»PX1åˆ°PX2ï¼šPROXY + åŸç”Ÿåè®®
        |                       V
     +--+--+      +-----+
     | FW2 |------| PX2 |
     +--+--+      +-----+       | ä»PX2åˆ°SRVï¼šPROXY + åŸç”Ÿåè®®
        |                       V
     +--+--+
     | SRV |
     +-----+
&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;é˜²ç«å¢™ FW1 æ¥æ”¶æ¥è‡ªäº’è”ç½‘å®¢æˆ·ç«¯çš„æµé‡å¹¶å°†å…¶è½¬å‘ç»™åå‘ä»£ç† PX1ã€‚PX1 æ·»åŠ  PROXY å¤´ï¼Œç„¶åé€šè¿‡ FW2 è½¬å‘åˆ° PX2ã€‚PX2 é…ç½®ä¸ºè¯»å– PROXY å¤´å¹¶åœ¨è¾“å‡ºä¸Šå‘é€å®ƒã€‚ç„¶åï¼Œå®ƒåŠ å…¥åˆ°æºæœåŠ¡å™¨ SRV å¹¶åœ¨é‚£é‡Œå‘ˆç°åŸå§‹å®¢æˆ·ç«¯çš„åœ°å€ã€‚ç”±äºæ‰€æœ‰ TCP è¿æ¥ç«¯ç‚¹éƒ½æ˜¯çœŸå®çš„æœºå™¨ï¼Œè€Œä¸æ˜¯ä¼ªé€ çš„ï¼Œå› æ­¤å¯¹äºå›ç¨‹æµé‡é€šè¿‡é˜²ç«å¢™å’Œåå‘ä»£ç†è€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤è·¯ç”±æ²¡æœ‰é—®é¢˜ã€‚ä½¿ç”¨é€æ˜ä»£ç†ï¼Œè¿™å°†éå¸¸å›°éš¾ï¼Œå› ä¸ºé˜²ç«å¢™å¿…é¡»å¤„ç†æ¥è‡ª DMZ ä¸­ä»£ç†çš„å®¢æˆ·ç«¯åœ°å€ï¼Œå¹¶ä¸”å¿…é¡»æ­£ç¡®è·¯ç”±å›ç¨‹æµé‡ï¼Œè€Œä¸æ˜¯ä½¿ç”¨é»˜è®¤è·¯ç”±ã€‚&lt;/p&gt;
&lt;h3 id=&#34;42-ipv4-å’Œ-ipv6-é›†æˆ&#34;&gt;4.2. IPv4 å’Œ IPv6 é›†æˆ&lt;/h3&gt;
&lt;p&gt;è¯¥åè®®è¿˜ç®€åŒ–äº† IPv4 å’Œ IPv6 çš„é›†æˆï¼šå¦‚æœä»…ç¬¬ä¸€å±‚ï¼ˆFW1 å’Œ PX1ï¼‰æ”¯æŒ IPv6ï¼Œå³ä½¿æ•´ä¸ªé“¾è·¯ä»…é€šè¿‡ IPv4 è¿æ¥ï¼Œä»ç„¶å¯ä»¥å°†åŸå§‹å®¢æˆ·ç«¯çš„ IPv6 åœ°å€å‘ˆç°ç»™ç›®æ ‡æœåŠ¡å™¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;43-å¤šä¸ªè¿”å›è·¯å¾„&#34;&gt;4.3. å¤šä¸ªè¿”å›è·¯å¾„&lt;/h3&gt;
&lt;p&gt;å½“ä½¿ç”¨é€æ˜ä»£ç†æ—¶ï¼Œä¸å¯èƒ½è¿è¡Œå¤šä¸ªä»£ç†ï¼Œå› ä¸ºè¿”å›æµé‡å°†éµå¾ªé»˜è®¤è·¯ç”±ï¼Œè€Œä¸æ˜¯æ‰¾åˆ°æ­£ç¡®çš„ä»£ç†ã€‚æœ‰æ—¶å¯ä»¥ä½¿ç”¨å¤šä¸ªæœåŠ¡å™¨åœ°å€å’Œç­–ç•¥è·¯ç”±æ¥å®ç°ä¸€äº›æŠ€å·§ï¼Œä½†è¿™äº›æ–¹æ³•éå¸¸æœ‰é™ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ PROXY åè®®ï¼Œæ­¤é—®é¢˜æ¶ˆå¤±äº†ï¼Œå› ä¸ºæœåŠ¡å™¨æ— éœ€è·¯ç”±åˆ°å®¢æˆ·ç«¯ï¼Œåªéœ€è·¯ç”±åˆ°è½¬å‘è¿æ¥çš„ä»£ç†ã€‚å› æ­¤ï¼Œå¯ä»¥å®Œå…¨åœ¨éå¸¸å¤§çš„æœåŠ¡å™¨ç¾¤å‰é¢è¿è¡Œä»£ç†ç¾¤ï¼Œå³ä½¿å¤„ç†å¤šä¸ªç«™ç‚¹ä¹Ÿèƒ½è½»æ¾å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ç±»ä¼¼äº‘çš„ç¯å¢ƒä¸­ï¼Œè¿™ä¸€ç‚¹ç‰¹åˆ«é‡è¦ï¼Œå› ä¸ºå¾ˆå°‘æœ‰é€‰æ‹©ç»‘å®šåˆ°éšæœºåœ°å€ï¼Œè€Œæ¯ä¸ªèŠ‚ç‚¹é€šå¸¸éœ€è¦å¤šä¸ªå‰ç«¯èŠ‚ç‚¹ï¼Œå¤„ç†èƒ½åŠ›è¾ƒä½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„ç¤ºä¾‹è¯´æ˜äº†ä»¥ä¸‹æƒ…å†µï¼šè™šæ‹ŸåŒ–åŸºç¡€è®¾æ–½éƒ¨ç½²åœ¨ 3 ä¸ªæ•°æ®ä¸­å¿ƒï¼ˆDC1..DC3ï¼‰ä¸­ã€‚æ¯ä¸ªæ•°æ®ä¸­å¿ƒéƒ½ä½¿ç”¨å…¶è‡ªå·±çš„ VIPï¼Œç”±æ‰˜ç®¡æä¾›å•†çš„ç¬¬ 3 å±‚è´Ÿè½½å‡è¡¡å™¨å¤„ç†ã€‚è¿™ä¸ªè´Ÿè½½å‡è¡¡å™¨å°†æµé‡è·¯ç”±åˆ°ä¸€ç»„ç¬¬ 7 å±‚ SSL/ç¼“å­˜å¸è½½è®¾å¤‡ï¼Œå®ƒä»¬åœ¨å…¶æœ¬åœ°æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œè´Ÿè½½å‡è¡¡ã€‚VIP ç”±åœ°ç†ä½ç½®æ„ŸçŸ¥çš„ DNS å¹¿å‘Šï¼Œä»¥ä¾¿å®¢æˆ·ç«¯é€šå¸¸åšæŒä½¿ç”¨ç‰¹å®šçš„ DCã€‚ç”±äºå®¢æˆ·ç«¯ä¸èƒ½ä¿è¯åšæŒä½¿ç”¨ä¸€ä¸ª DCï¼Œå› æ­¤ L7 è´Ÿè½½å‡è¡¡ä»£ç†å¿…é¡»çŸ¥é“å¯ä»¥é€šè¿‡æ‰˜ç®¡æä¾›å•†çš„ LAN æˆ–é€šè¿‡äº’è”ç½‘è®¿é—®çš„å…¶ä»– DC æœåŠ¡å™¨ã€‚L7 ä»£ç†ä½¿ç”¨ PROXY åè®®åŠ å…¥å®ƒä»¬åé¢çš„æœåŠ¡å™¨ï¼Œå› æ­¤å³ä½¿åœ¨æ•°æ®ä¸­å¿ƒä¹‹é—´çš„æµé‡ä¹Ÿå¯ä»¥è½¬å‘åŸå§‹å®¢æˆ·ç«¯çš„åœ°å€ï¼Œè€Œè¿”å›è·¯å¾„æ˜¯æ˜ç¡®çš„ã€‚ä½¿ç”¨é€æ˜ä»£ç†æ˜¯ä¸å¯èƒ½çš„ï¼Œå› ä¸ºå¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒL7 ä»£ç†å°†æ— æ³•ä¼ªé€ ä¸€ä¸ªåœ°å€ï¼Œå¹¶ä¸”åœ¨æ•°æ®ä¸­å¿ƒä¹‹é—´æ°¸è¿œæ— æ³•å·¥ä½œã€‚&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;                           äº’è”ç½‘

        DC1                  DC2                  DC3
       ,---.                ,---.                ,---.
      (  X  )              (  X  )              (  X  )
       `---&#39;                `---&#39;                `---&#39;
         |    +-------+       |    +-------+       |    +-------+
         +----| L3 LB |       +----| L3 LB |       +----| L3 LB |
         |    +-------+       |    +-------+       |    +-------+
   ------+------- ~ ~ ~ ------+------- ~ ~ ~ ------+-------
   |||||   ||||         |||||   ||||         |||||    ||||
  50 SRV   4 PX        50 SRV   4 PX        50 SRV    4 PX
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&#34;5-å®‰å…¨æ³¨æ„äº‹é¡¹&#34;&gt;5. å®‰å…¨æ³¨æ„äº‹é¡¹&lt;/h2&gt;
&lt;p&gt;åè®®å¤´çš„ç‰ˆæœ¬ 1ï¼ˆå¯è¯»æ ¼å¼ï¼‰è®¾è®¡ä¸ºä¸ HTTP æœ‰æ‰€åŒºåˆ«ã€‚å®ƒä¸ä¼šè§£æä¸ºæœ‰æ•ˆçš„ HTTP è¯·æ±‚ï¼Œè€Œ HTTP è¯·æ±‚ä¹Ÿä¸ä¼šè§£æä¸ºæœ‰æ•ˆçš„ä»£ç†è¯·æ±‚ã€‚ç‰ˆæœ¬ 2 æ·»åŠ äº†ä¸€ä¸ªä¸å¯è§£æçš„äºŒè¿›åˆ¶ç­¾åï¼Œä»¥ä½¿è®¸å¤šäº§å“åœ¨æ­¤å—ä¸Šå¤±è´¥ã€‚è¯¥ç­¾åè®¾è®¡ä¸ºå¯¼è‡´ HTTPã€SSL/TLSã€SMTPã€FTP å’Œ POP ç­‰å¤šç§äº§å“ç«‹å³å¤±è´¥ã€‚å®ƒè¿˜å¯¼è‡´ LDAP å’Œ RDP æœåŠ¡å™¨ä¸­çš„ä¸­æ­¢ï¼ˆè§ç¬¬ 6 èŠ‚ï¼‰ã€‚è¿™ä½¿å¾—å¯ä»¥åœ¨ç‰¹å®šè¿æ¥ä¸‹å¼ºåˆ¶ä½¿ç”¨å®ƒå˜å¾—æ›´åŠ å®¹æ˜“ï¼ŒåŒæ—¶ç¡®ä¿ä¸æ­£ç¡®é…ç½®çš„æœåŠ¡å™¨èƒ½å¤Ÿå¿«é€Ÿè¢«æ£€æµ‹åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;å®ç°è€…åº”éå¸¸å°å¿ƒï¼Œä¸è¦è¯•å›¾è‡ªåŠ¨æ£€æµ‹æ˜¯å¦å¿…é¡»è§£ç å¤´éƒ¨ï¼Œè€Œæ˜¯åªä¾èµ–äºé…ç½®å‚æ•°ã€‚çš„ç¡®ï¼Œå¦‚æœç•™ç»™æ™®é€šå®¢æˆ·ç«¯ä½¿ç”¨åè®®çš„æœºä¼šï¼Œå®ƒå°†èƒ½å¤Ÿéšè—å…¶æ´»åŠ¨æˆ–ä½¿å…¶çœ‹èµ·æ¥æ¥è‡ªå…¶ä»–åœ°æ–¹ã€‚ä½†æ˜¯ï¼Œä»…ä»ä¸€äº›å·²çŸ¥æ¥æºæ¥å—å¤´éƒ¨åº”è¯¥æ˜¯å®‰å…¨çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;6-éªŒè¯&#34;&gt;6. éªŒè¯&lt;/h2&gt;
&lt;p&gt;åè®®ç‰ˆæœ¬ 2 çš„ç­¾åå·²å‘é€åˆ°å„ç§åè®®å’Œå®ç°ï¼ŒåŒ…æ‹¬æ—§åè®®ã€‚å·²æµ‹è¯•ä»¥ä¸‹åè®®å’Œäº§å“ï¼Œä»¥ç¡®ä¿åœ¨å‘ˆç°ç­¾åæ—¶è¡¨ç°å‡ºæœ€ä½³å¯èƒ½çš„è¡Œä¸ºï¼Œå³ä½¿åªæœ‰æœ€å°çš„å®ç°ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;HTTPï¼š
&lt;ul&gt;
&lt;li&gt;Apache 1.3.33ï¼šè¿æ¥ä¸­æ­¢        =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;Nginx 0.7.69ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;lighttpd 1.4.20ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;thttpd 2.20cï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;mini-httpd-1.19ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;haproxy 1.4.21ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;Squid 3ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SSLï¼š
&lt;ul&gt;
&lt;li&gt;stud 0.3.47ï¼šè¿æ¥ä¸­æ­¢        =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;stunnel 4.45ï¼šè¿æ¥ä¸­æ­¢        =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;nginx 0.7.69ï¼š400 Bad Request + ä¸­æ­¢ =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;FTPï¼š
&lt;ul&gt;
&lt;li&gt;Pure-ftpd 1.0.20 ï¼š3*500 then 221 Goodbye  =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;vsftpd 2.0.1     ï¼š3*530 then 221 Goodbye  =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SMTPï¼š
&lt;ul&gt;
&lt;li&gt;postfix 2.3      ï¼š3*500 + 221 Bye         =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;li&gt;exim 4.69ï¼š554 + è¿æ¥ä¸­æ­¢  =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;POPï¼š
&lt;ul&gt;
&lt;li&gt;dovecot 1.0.10   ï¼š3*ERR + æ³¨é”€         =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;IMAPï¼š
&lt;ul&gt;
&lt;li&gt;dovecot 1.0.10ï¼š5*ERR + æŒ‚èµ·         =&amp;gt; é€šè¿‡/éæœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;LDAPï¼š
&lt;ul&gt;
&lt;li&gt;openldap 2.3ï¼šä¸­æ­¢                 =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;SSHï¼š
&lt;ul&gt;
&lt;li&gt;openssh 3.9p1ï¼šä¸­æ­¢                 =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;RDPï¼š
&lt;ul&gt;
&lt;li&gt;Windows XP SP3ï¼šä¸­æ­¢                 =&amp;gt; é€šè¿‡/æœ€ä½³&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ„å‘³ç€å¤§å¤šæ•°åè®®å’Œå®ç°ä¸ä¼šå› å…·æœ‰åè®®ç­¾åçš„ä¼ å…¥è¿æ¥è€Œæ„Ÿåˆ°å›°æƒ‘ï¼Œè¿™é¿å…äº†é¢å¯¹é”™è¯¯é…ç½®æ—¶çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;7-æœªæ¥å‘å±•&#34;&gt;7. æœªæ¥å‘å±•&lt;/h2&gt;
&lt;p&gt;è¯¥åè®®å¯èƒ½ä¼šç•¥å¾®å‘å±•ï¼Œä»¥å‘ˆç°å…¶ä»–ä¿¡æ¯ï¼Œä¾‹å¦‚ä¼ å…¥ç½‘ç»œæ¥å£æˆ–åœ¨ç¬¬ä¸€ä¸ªä»£ç†ä¹‹å‰å‘ç”Ÿç½‘ç»œåœ°å€è½¬æ¢çš„æƒ…å†µä¸‹çš„åŸå§‹åœ°å€ï¼Œä½†ç›®å‰æ²¡æœ‰æ˜ç¡®è¦æ±‚ã€‚å·²ç»å¯¹æ­¤è¿›è¡Œäº†æ·±å…¥æ€è€ƒï¼Œä¼¼ä¹è¯•å›¾æ·»åŠ æ›´å¤šä¿¡æ¯ä¼šæ‰“å¼€ä¸€ä¸ªæ½˜å¤šæ‹‰ç›’å­ï¼Œå…¶ä¸­åŒ…æ‹¬ MAC åœ°å€åˆ° SSL å®¢æˆ·ç«¯è¯ä¹¦ç­‰å¤§é‡ä¿¡æ¯ï¼Œè¿™å°†ä½¿åè®®å˜å¾—æ›´åŠ å¤æ‚ã€‚å› æ­¤ï¼Œç›®å‰æ²¡æœ‰è®¡åˆ’ã€‚æ¬¢è¿æå‡ºæ”¹è¿›å»ºè®®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;8-è”ç³»å’Œé“¾æ¥&#34;&gt;8. è”ç³»å’Œé“¾æ¥&lt;/h2&gt;
&lt;p&gt;è¯·ä½¿ç”¨ &lt;a href=&#34;mailto:w@1wt.eu&#34;&gt;w@1wt.eu&lt;/a&gt; å°†ä»»ä½•æ„è§å‘é€ç»™ä½œè€…ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹é“¾æ¥åœ¨æ–‡æ¡£ä¸­å¼•ç”¨ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href=&#34;http://www.postfix.org/XCLIENT_README.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Postfix XCLIENT Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://tools.ietf.org/html/rfc7239&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RFC 7239 - Forwarded HTTP Extension&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://www.stunnel.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Stunnel - SSL/TLS Proxy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/bumptech/stud&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Stud - Scalable TLS Unwrapping Daemon&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/bumptech/stud/pull/81&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pull Request for Stud on GitHub&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.varnish-cache.org/docs/trunk/phk/ssl_again.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SSL/TLS Again (by PHK)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://wiki.squid-cache.org/Squid-3.5&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Squid Proxy Server Documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tools.ietf.org/html/rfc4960#appendix-B&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RFC 4960 - SCTP Specification (Appendix B)&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tools.ietf.org/rfc/rfc7301.txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RFC 7301 - Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.ietf.org/rfc/rfc3546.txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RFC 3546 - Transport Layer Security (TLS) Extensions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://redmine.lighttpd.net/issues/2804&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Lighttpd Redmine Issue #2804&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;9-ç¤ºä¾‹ä»£ç &#34;&gt;9. ç¤ºä¾‹ä»£ç &lt;/h2&gt;
&lt;p&gt;ä¸‹é¢çš„ä»£ç æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæ¼”ç¤ºäº†æ¥æ”¶å™¨å¦‚ä½•å¤„ç† TCP over IPv4 æˆ– IPv6 åè®®å¤´çš„ä¸¤ä¸ªç‰ˆæœ¬ã€‚è¯¥å‡½æ•°åº”è¯¥åœ¨è¯»äº‹ä»¶å‘ç”Ÿæ—¶è°ƒç”¨ã€‚åœ°å€å¯ä»¥ç›´æ¥å¤åˆ¶åˆ°å®ƒä»¬çš„æœ€ç»ˆå†…å­˜ä½ç½®ï¼Œå› ä¸ºå®ƒä»¬ä»¥ç½‘ç»œå­—èŠ‚é¡ºåºä¼ è¾“ã€‚å‘é€ç«¯ç”šè‡³æ›´ç®€å•ï¼Œå¯ä»¥ä»è¿™ä¸ªç¤ºä¾‹ä»£ç ä¸­è½»æ¾æ¨å¯¼å‡ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* ç”± accept() å¡«å…… */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_storage&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;   &lt;span class=&#34;cm&#34;&gt;/* ç”± getsockname() å¡«å…… */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;k&#34;&gt;const&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v2sig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;se&#34;&gt;\x0D\x0A\x0D\x0A\x00\x0D\x0A\x51\x55\x49\x54\x0A&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;cm&#34;&gt;/* å¦‚æœéœ€è¦è½®è¯¢ï¼Œåˆ™è¿”å› 0ï¼Œ&amp;lt;0 è¡¨ç¤ºé”™è¯¯ï¼Œ&amp;gt;0 è¡¨ç¤ºå®Œæˆäº†å·¥ä½œ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;read_evt&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ver_cmd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;fam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;union&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* ç”¨äº TCP/UDP over IPv4ï¼Œlen = 12 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;kt&#34;&gt;uint32_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* ç”¨äº TCP/UDP over IPv6ï¼Œlen = 36 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt;  &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint16_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* ç”¨äº AF_UNIX å¥—æ¥å­—ï¼Œlen = 216 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                       &lt;span class=&#34;kt&#34;&gt;uint8_t&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;108&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unx&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;recv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;),&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MSG_PEEK&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EINTR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EAGAIN&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;memcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;v2sig&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;12&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ver_cmd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xF0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;ntohs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* å¤´éƒ¨è¢«æˆªæ–­æˆ–å¤ªå¤§ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ver_cmd&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0xF&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x01&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* PROXY å‘½ä»¤ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;switch&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fam&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x11&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* TCPv4 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_family&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_addr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_family&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AF_INET&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;s_addr&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin_port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;goto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x21&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;  &lt;span class=&#34;cm&#34;&gt;/* TCPv6 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_family&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AF_INET6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_family&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AF_INET6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;nf&#34;&gt;memcpy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;16&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;p&#34;&gt;((&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;sockaddr_in6&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;to&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;sin6_port&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                      &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;addr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ip6&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;dst_port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;                  &lt;span class=&#34;k&#34;&gt;goto&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;cm&#34;&gt;/* ä¸æ”¯æŒçš„åè®®ï¼Œä¿æŒæœ¬åœ°è¿æ¥åœ°å€ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;case&lt;/span&gt; &lt;span class=&#34;mh&#34;&gt;0x00&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* LOCAL å‘½ä»¤ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;cm&#34;&gt;/* ä¿æŒæœ¬åœ°è¿æ¥åœ°å€ä»¥ç”¨äº LOCAL */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* ä¸æ”¯æŒçš„å‘½ä»¤ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;8&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;memcmp&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;PROXY&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;memchr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\r&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;!&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;||&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;              &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* å¤´éƒ¨éƒ¨åˆ†æˆ–æ— æ•ˆ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* ç»ˆæ­¢å­—ç¬¦ä¸²ä»¥ä¾¿äºè§£æ */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;end&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;line&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;cm&#34;&gt;/* è·³è¿‡å¤´éƒ¨ + CRLF */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;cm&#34;&gt;/* ä½¿ç”¨å–œæ¬¢çš„åœ°å€è§£æå™¨ï¼ˆå¦‚ inet_ptonï¼‰è§£æ V1 å¤´éƒ¨ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;           * åœ¨é”™è¯¯æ—¶è¿”å› -1ï¼Œæˆ–è€…ç›´æ¥ç»§ç»­æ¥å—ã€‚
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;cm&#34;&gt;           */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;cm&#34;&gt;/* é”™è¯¯çš„åè®® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nl&#34;&gt;done&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;cm&#34;&gt;/* æˆ‘ä»¬éœ€è¦ä»å¥—æ¥å­—ä¸­æ¶ˆè€—é€‚å½“æ•°é‡çš„æ•°æ® */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;do&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;recv&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;fd&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;hdr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;while&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;errno&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;==&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;EINTR&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;      &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;?&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™æ®µä»£ç æ¼”ç¤ºäº†å¦‚ä½•å¤„ç† PROXY åè®®å¤´çš„ä¸¤ä¸ªç‰ˆæœ¬ï¼Œä»¥åŠå¦‚ä½•æ ¹æ®åè®®ä¸­çš„ä¿¡æ¯å¡«å……åœ°å€ç»“æ„ã€‚è¿™ä¸ªç¤ºä¾‹ä»£ç å¯ä»¥å¸®åŠ©ä½ ç†è§£å¦‚ä½•åœ¨æ¥æ”¶ç«¯å¤„ç† PROXY åè®®çš„ä¸åŒç‰ˆæœ¬ï¼Œå¹¶ä»ä¸­æ¨å¯¼å‡ºå‘é€ç«¯çš„å®ç°ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>KEDA vs. åŸç”Ÿ Kubernetesï¼šè°æ˜¯äº‘åŸç”Ÿåº”ç”¨çš„è‡ªåŠ¨ä¼¸ç¼©ç‹è€…ï¼Ÿ</title>
      <link>https://cloudnativecn.com/blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/</link>
      <pubDate>Fri, 12 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://www.kedify.io/blog-posts/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Battle of the Pods: Kubernetes Autoscaling Showdown - KEDA vs. vanilla Kubernetes&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šæœ¬æ–‡æ¯”è¾ƒäº† Kubernetes çš„å†…ç½®è‡ªåŠ¨ä¼¸ç¼©å™¨ï¼ˆHPA å’Œ VPAï¼‰å’Œ KEDA é¡¹ç›®çš„ä¼˜ç¼ºç‚¹ï¼Œåˆ†æäº†å®ƒä»¬åœ¨ä¸åŒåœºæ™¯ä¸‹çš„é€‚ç”¨æ€§å’Œæ•ˆæœï¼Œå±•ç¤ºäº† KEDA å¦‚ä½•è§£å†³ HPA å’Œ VPA æ— æ³•è¦†ç›–çš„å¤æ‚éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;1-å¼•è¨€è‡ªåŠ¨ä¼¸ç¼©çš„é‡è¦æ€§&#34;&gt;1. å¼•è¨€ï¼šè‡ªåŠ¨ä¼¸ç¼©çš„é‡è¦æ€§&lt;/h3&gt;
&lt;p&gt;åœ¨ä»Šå¤©çš„äº‘åŸç”Ÿç”Ÿæ€ç³»ç»Ÿä¸­ï¼Œæ³¢åŠ¨çš„å·¥ä½œè´Ÿè½½å’ŒåŠ¨æ€çš„æµé‡æ¨¡å¼æ˜¯å¸¸æ€ã€‚é€‚åº”è¿™ç§ä¸å¯é¢„æµ‹çš„è¡Œä¸ºéœ€è¦èƒ½å¤Ÿå®æ—¶è°ƒæ•´çš„ç³»ç»Ÿã€‚è‡ªåŠ¨ä¼¸ç¼©æ˜¯å¿…éœ€çš„ï¼Œå¯ä»¥ç¡®ä¿èµ„æºçš„æœ€ä½³åˆ†é…ï¼Œéåˆ¶è¿‡åº¦æˆæœ¬ï¼Œå¹¶ä¿ƒè¿›èµ„æºçš„é«˜æ•ˆä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨ä¼¸ç¼©ä¸ä»…å…³ä¹æˆæœ¬ã€‚å®ƒåœ¨ç»´æŠ¤åº”ç”¨æ€§èƒ½å’Œååé‡æ–¹é¢å‘æŒ¥ç€å…³é”®ä½œç”¨ã€‚é€šè¿‡é¿å…æ¬ é…ç½®ï¼ˆå¯¼è‡´ç”¨æˆ·ä½“éªŒä¸ä½³ï¼‰å’Œè¿‡åº¦é…ç½®ï¼ˆå¯¼è‡´ä¸å¿…è¦çš„æˆæœ¬ï¼‰ï¼Œè‡ªåŠ¨ä¼¸ç¼©å¯ä»¥å®ç°åˆç†çš„å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h3 id=&#34;2-ç«äº‰è€…äº†è§£åŸºç¡€çŸ¥è¯†&#34;&gt;2. ç«äº‰è€…ï¼šäº†è§£åŸºç¡€çŸ¥è¯†&lt;/h3&gt;
&lt;h3 id=&#34;æ°´å¹³-pod-è‡ªåŠ¨ä¼¸ç¼©å™¨hpa&#34;&gt;æ°´å¹³ Pod è‡ªåŠ¨ä¼¸ç¼©å™¨ï¼ˆHPAï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HPA&lt;/a&gt;ï¼Œä½œä¸º Kubernetes çš„æœ¬åœ°è§£å†³æ–¹æ¡ˆï¼Œæ ¹æ®è§‚å¯Ÿåˆ°çš„æŒ‡æ ‡ï¼ˆä¸»è¦æ˜¯ CPU å’Œå†…å­˜ï¼‰æ¥æ‰©å±• Pod çš„æ•°é‡ã€‚è™½ç„¶å¯¹äºç»Ÿä¸€çš„å·¥ä½œè´Ÿè½½æ¥è¯´éå¸¸ç›´æ¥å’Œæœ‰ç›Šï¼Œä½†å½“è€ƒè™‘åˆ°å…¶æ— æ³•æ‰©å±•åˆ°é›¶å¹¶ä¸”å®Œå…¨ä¾èµ– CPU å’Œå†…å­˜æŒ‡æ ‡æ—¶ï¼Œå®ƒçš„å±€é™æ€§å°±å˜å¾—æ˜æ˜¾äº†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-hpa-æ”¹å˜-pod-çš„æ•°é‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;HPA æ”¹å˜ Pod çš„æ•°é‡&#34; srcset=&#34;
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/1_hu11995226469964566354.webp 400w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/1_hu16851504726864327277.webp 760w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/1_hu5754082744711571263.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/1_hu11995226469964566354.webp&#34;
               width=&#34;760&#34;
               height=&#34;293&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      HPA æ”¹å˜ Pod çš„æ•°é‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;å‚ç›´-pod-è‡ªåŠ¨ä¼¸ç¼©å™¨vpa&#34;&gt;å‚ç›´ Pod è‡ªåŠ¨ä¼¸ç¼©å™¨ï¼ˆVPAï¼‰&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes/autoscaler/tree/master/vertical-pod-autoscaler#intro&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;VPA&lt;/a&gt;æ›´å¤šåœ°æ¶‰åŠèµ„æºçš„è°ƒæ•´è€Œä¸æ˜¯æ‰©å±•å®ƒä»¬ã€‚å®ƒè¯„ä¼°éœ€æ±‚å¹¶åŠ¨æ€è°ƒæ•´èµ„æºï¼Œç¡®ä¿å·¥ä½œè´Ÿè½½çš„åˆé€‚é€‚é…ã€‚ä½†è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¢å¼ºå‹çš„ Pod å¹¶ä¸ä¸€å®šæ›´å¥½ã€‚æœ‰æ—¶ï¼Œæ‹¥æœ‰æ›´å¤šçš„å·¥ä½œè¿›ç¨‹æ¥å¤„ç†æ•°æ®æ¯”æ‹¥æœ‰ä¸€ä¸ªå¤§è€Œå¼ºå¤§çš„å·¥ä½œè¿›ç¨‹æ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-vpa-è°ƒæ•´-pod-çš„å¤§å°&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;VPA è°ƒæ•´ Pod çš„å¤§å°&#34; srcset=&#34;
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/2_hu12018477851291741342.webp 400w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/2_hu16048068236269557703.webp 760w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/2_hu6194738254757635060.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/2_hu12018477851291741342.webp&#34;
               width=&#34;760&#34;
               height=&#34;339&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      VPA è°ƒæ•´ Pod çš„å¤§å°
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;3-é™åˆ¶å½“åŸç”Ÿ-kubernetes-è‡ªåŠ¨ä¼¸ç¼©å™¨ä¸è¶³ä»¥åº”å¯¹æ—¶&#34;&gt;3. é™åˆ¶ï¼šå½“åŸç”Ÿ Kubernetes è‡ªåŠ¨ä¼¸ç¼©å™¨ä¸è¶³ä»¥åº”å¯¹æ—¶&lt;/h2&gt;
&lt;p&gt;å°½ç®¡å†…ç½®çš„ Kubernetes è‡ªåŠ¨ä¼¸ç¼©å™¨å¦‚ HPA å’Œ VPA æä¾›äº†åŸºæœ¬çš„æ‰©å±•èƒ½åŠ›ï¼Œä½†å®ƒä»¬åœ¨èŒƒå›´ä¸Šå¤©ç„¶æœ‰é™ã€‚å®ƒä»¬ä¸»è¦å…³æ³¨ CPU å’Œå†…å­˜æŒ‡æ ‡å¯èƒ½å¯¹äºç°ä»£åº”ç”¨æ¥è¯´æ˜¯ä¸€ä¸ªé‡å¤§é™åˆ¶ï¼Œå› ä¸ºè¿™äº›åº”ç”¨å¯èƒ½éœ€è¦å¯¹å„ç§æŒ‡æ ‡åšå‡ºååº”ï¼Œå…¶ä¸­ä¸€äº›ç”šè‡³å¯èƒ½ä¸æ˜¯æ¥è‡ªåº”ç”¨ç¨‹åºæœ¬èº«çš„æŒ‡æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;ç°ä»£åº”ç”¨é¢ä¸´çš„å¼•äººæ³¨ç›®çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯æ ¹æ®å¤–éƒ¨ç³»ç»Ÿçš„äº‹ä»¶æ¥è¿›è¡Œæ‰©å±•ã€‚ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æ¶ˆæ¯é˜Ÿåˆ—ï¼š&lt;/strong&gt; åº”ç”¨ç¨‹åºå¯èƒ½éœ€è¦æ ¹æ®é˜Ÿåˆ—ä¸­çš„æ¶ˆæ¯æ•°é‡ï¼ˆå¦‚ RabbitMQ æˆ– Kafkaï¼‰æ¥è¿›è¡Œæ‰©å±•ã€‚å¦‚æœæœ‰å¤§é‡æœªå¤„ç†çš„æ¶ˆæ¯æ¶Œå…¥ï¼Œè¿™å¯èƒ½æ˜¯ä¸€ä¸ªæ‰©å±•çš„æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ•°æ®åº“è§¦å‘å™¨ï¼š&lt;/strong&gt; æ•°æ®åº“ä¸­çš„æ›´æ”¹æˆ–æ›´æ–°ï¼ˆå¦‚æŸä¸ªè¡¨çš„è¡Œçªç„¶å¢åŠ ï¼‰å¯èƒ½éœ€è¦å°†åº”ç”¨ç¨‹åºè¿›è¡Œæ‰©&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å±•ä»¥å¤„ç†æˆ–åˆ†ææ•°æ®çš„æ¶Œå…¥ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;å¤–éƒ¨ Webhookï¼š&lt;/strong&gt; æ¥è‡ªç¬¬ä¸‰æ–¹æœåŠ¡çš„ä¼ å…¥ Webhookï¼ˆä¾‹å¦‚ GitHub æ¨é€æˆ–ç”µå­å•†åŠ¡äº¤æ˜“äº‹ä»¶ï¼‰å¯èƒ½éœ€è¦æ›´å¤šçš„èµ„æºæ¥å¤„ç†é¢å¤–çš„è´Ÿè½½ã€‚&lt;/li&gt;
&lt;li&gt;â€&lt;strong&gt;IoT ä¿¡å·ï¼š&lt;/strong&gt; å¯¹äºè¿æ¥åˆ°ç‰©è”ç½‘è®¾å¤‡çš„åº”ç”¨ç¨‹åºï¼Œæ¥è‡ªè¿™äº›è®¾å¤‡çš„ä¿¡å·å¯èƒ½æ˜¯éœ€è¦æ‰©å±•çš„æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¿˜å­˜åœ¨å°†æ‰©å±•åˆ°é›¶çš„å¿…è¦æ¥æœ‰æ•ˆç®¡ç†èµ„æºçš„æƒ…å†µï¼Œæˆ–è€…å­˜åœ¨ä¸åŒæŒ‡æ ‡çš„ç»„åˆå†³å®šæ‰©å±•é€»è¾‘çš„æƒ…å†µï¼Œä¾‹å¦‚ CPU åˆ©ç”¨ç‡ä¸æ•°æ®åº“è¯»/å†™é€Ÿç‡ã€‚è¿™äº›å¾®å¦™çš„éœ€æ±‚çªæ˜¾äº†å†…ç½® Kubernetes è‡ªåŠ¨ä¼¸ç¼©å™¨çš„ä¸è¶³ä¹‹å¤„ã€‚â€&lt;/p&gt;
&lt;h3 id=&#34;hpa-çš„è‡ªå®šä¹‰æŒ‡æ ‡æ‰©å±•&#34;&gt;HPA çš„è‡ªå®šä¹‰æŒ‡æ ‡æ‰©å±•&lt;/h3&gt;
&lt;p&gt;Kubernetes å¼•å…¥äº†ä¸€ä¸ª&lt;a href=&#34;https://kubernetes.io/docs/tasks/run-application/horizontal-pod-autoscale/#scaling-on-custom-metrics&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªå®šä¹‰æŒ‡æ ‡&lt;/a&gt;çš„æ¥å£ï¼Œæ—¨åœ¨ä¸ºæ°´å¹³ Pod è‡ªåŠ¨ä¼¸ç¼©å™¨ï¼ˆHPAï¼‰æä¾›æ›´å¤šè¶…è¶Š CPU å’Œå†…å­˜æŒ‡æ ‡çš„é€‚åº”æ€§ã€‚ç„¶è€Œï¼Œå®é™…å®ç°ä¸­å‡ºç°äº†æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;p&gt;å°½ç®¡å¼ºå¤§ï¼Œä½†è‡ªå®šä¹‰æŒ‡æ ‡ API å¹¶ä¸ç›´è§‚æ˜“ç”¨ã€‚å®ƒè¦æ±‚å¯¹ Kubernetes å†…éƒ¨æœ‰è¯¦ç»†çš„äº†è§£ï¼Œä½¿è®¾ç½®å’Œè°ƒæ•´å˜å¾—ç¹çã€‚â€&lt;/p&gt;
&lt;h3 id=&#34;æ’æ›²prometheus-é€‚é…å™¨&#34;&gt;æ’æ›²ï¼šPrometheus é€‚é…å™¨&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/kubernetes-sigs/prometheus-adapter&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Prometheus é€‚é…å™¨&lt;/a&gt;è¯•å›¾é€šè¿‡åˆ©ç”¨è‡ªå®šä¹‰æŒ‡æ ‡ API æ¥å¼¥åˆè¿™ä¸€å·®è·ï¼Œå¼•å…¥äº† Prometheus çš„å¹¿æ³›æŒ‡æ ‡ã€‚ä½†å®ƒä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼šå¤æ‚ã€ä¸ç›´è§‚çš„é…ç½®ä»¥åŠä»…ä¸ Prometheus æŒ‡æ ‡ç›¸å…³è”ã€‚å®æ–½å’Œç»´æŠ¤é…ç½®éœ€è¦ä¸æ–­çš„è­¦è§‰æ€§ã€‚åŸºç¡€æ¶æ„æˆ–åº”ç”¨ç¨‹åºçš„æ›´æ”¹å¯èƒ½ä¼šè§¦å‘é‡æ–°é…ç½®çš„éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h3 id=&#34;4-ç™»åœº-kedaå¯¹å†³ä¸­çš„è‹±é›„&#34;&gt;4. ç™»åœº KEDAï¼šå¯¹å†³ä¸­çš„è‹±é›„&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://keda.sh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Kubernetes äº‹ä»¶é©±åŠ¨è‡ªåŠ¨ä¼¸ç¼©ï¼ˆKEDAï¼‰&lt;/a&gt;ä¸ä»…ä¸ Kubernetes çš„è‡ªå®šä¹‰æŒ‡æ ‡ API é›†æˆï¼Œè¿˜ä½¿å…¶å˜å¾—æ›´åŠ å¯è®¿é—®ã€‚è¿™æ˜¯ç”¨æˆ·å‹å¥½ç•Œé¢å¦‚ä½•æ”¹å˜ä½“éªŒçš„è¯æ˜ï¼Œä½¿è‡ªåŠ¨ä¼¸ç¼©çœŸæ­£å…·æœ‰å¯å®šåˆ¶æ€§å’Œå¤šåŠŸèƒ½æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;keda-çš„å¥½å¤„&#34;&gt;KEDA çš„å¥½å¤„&lt;/h3&gt;
&lt;p&gt;KEDA æä¾›äº†å¤šä¸ªæŠ€æœ¯ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶é©±åŠ¨è‡ªåŠ¨ä¼¸ç¼©ï¼š&lt;/strong&gt; KEDA èƒ½å¤Ÿå“åº”ç‰¹å®šäº‹ä»¶ï¼Œç”šè‡³æ‰©å±•åˆ°é›¶ï¼Œç¡®ä¿èµ„æºå¾—åˆ°æ˜æ™ºåœ°ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ˜“äºä½¿ç”¨ï¼š&lt;/strong&gt; å…¶ç›´è§‚çš„é…ç½®ä½¿å®æ–½å˜å¾—è½»æ¾ï¼Œå…è®¸å¼€å‘äººå‘˜ä¸“æ³¨äºåº”ç”¨é€»è¾‘è€Œä¸æ˜¯é…ç½®è¯­æ³•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¹¿æ³›åº”ç”¨ï¼š&lt;/strong&gt; é™¤äº†ä»…æ‰©å±• Pod å¤–ï¼ŒKEDA è¿˜å¯ä»¥åŸºäºäº‹ä»¶å®‰æ’ Kubernetes ä½œä¸šï¼Œé€‚ç”¨äºä¸éœ€è¦æŒç»­è¿è¡Œä½†å¯èƒ½éœ€è¦å®šæœŸå¤§é‡èµ„æºçš„ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å¤šåŠŸèƒ½é›†æˆï¼š&lt;/strong&gt; æ”¯æŒå¤šç§èº«ä»½éªŒè¯æä¾›ç¨‹åºï¼Œé›†æˆ KEDA æ—¢ç®€å•åˆå®‰å…¨ã€‚â€&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;keda-åœ¨å®è·µä¸­çš„åº”ç”¨&#34;&gt;KEDA åœ¨å®è·µä¸­çš„åº”ç”¨&lt;/h3&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-keda-æ‰©å±•-kafka-consumer-åº”ç”¨ç¨‹åº&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;KEDA æ‰©å±• Kafka Consumer åº”ç”¨ç¨‹åº&#34; srcset=&#34;
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/3_hu18326824243340343863.webp 400w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/3_hu1655171237193676145.webp 760w,
               /blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/3_hu14781047135494662203.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/battle-of-the-pods-kubernetes-autoscaling-showdown-keda-vs-vanilla-kubernetes/3_hu18326824243340343863.webp&#34;
               width=&#34;760&#34;
               height=&#34;498&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      KEDA æ‰©å±• Kafka Consumer åº”ç”¨ç¨‹åº
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä¼ ç»Ÿçš„æŒ‡æ ‡å¦‚ CPU å’Œå†…å­˜æä¾›äº†ä¸€äº›è§è§£ï¼Œä½†ç°å®ä¸–ç•Œçš„åº”ç”¨ç¨‹åºé€šå¸¸éœ€è¦æ›´ç²¾ç»†å’Œå¤šæ ·åŒ–çš„æŒ‡æ ‡æ¥è¿›è¡Œæœ‰æ•ˆçš„è‡ªåŠ¨ä¼¸ç¼©ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›è¦è€ƒè™‘çš„æƒ…æ™¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;äº‹ä»¶é©±åŠ¨åº”ç”¨ç¨‹åºï¼š&lt;/strong&gt; è€ƒè™‘ä¸€ä¸ªåŸºäº Kafka çš„è®¾ç½®ã€‚è™½ç„¶ CPU ä½¿ç”¨ç‡å¯èƒ½ä¿æŒç¨³å®šï¼Œä½†ä¼ å…¥ Kafka äº‹ä»¶çš„æ¿€å¢æ˜¯ç¡®å®šè´Ÿè½½çš„çœŸæ­£æŒ‡æ ‡ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè‡ªåŠ¨ä¼¸ç¼©åº”è¯¥ç†æƒ³åœ°å¯¹å…¥ç«™äº‹ä»¶çš„é€Ÿç‡æˆ–æ¶ˆæ¯ç§¯å‹åšå‡ºå“åº”ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç”µå­å•†åŠ¡äº¤æ˜“ï¼š&lt;/strong&gt; åœ¨ç”µå­å•†åŠ¡æ¡†æ¶ä¸­ï¼Œç‰¹æ®Šé”€å”®æ´»åŠ¨å¯èƒ½ä¼šå¯¼è‡´è®¢å•ç»“å¸æ¿€å¢ã€‚CPU å¯èƒ½ä¸å—å½±å“ï¼Œä½†çœŸæ­£çš„è´Ÿè½½å¯èƒ½æ˜¯æ•°æ®åº“é˜Ÿåˆ—ä¸­ç§¯ç´¯çš„æœªå¤„ç†è®¢å•ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµæ•°æ®ç®¡é“ï¼š&lt;/strong&gt; ä»å¹³å°ï¼ˆå¦‚ Apache Kafka æˆ– AWS Kinesisï¼‰å¤„ç†æ•°æ®æµçš„åº”ç”¨ç¨‹åºä¼šç»å†å¯å˜çš„æ•°æ®æµå…¥ç‡ã€‚åœ¨è¿™é‡Œï¼Œç›¸å…³çš„æŒ‡æ ‡å¯èƒ½æ˜¯å¤„ç†çš„ç§¯å‹æˆ–æ»åï¼Œè€Œä¸æ˜¯ CPU æˆ–å†…å­˜æ¶ˆè€—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Selenium æµ‹è¯•å·¥ä½œè€…ï¼š&lt;/strong&gt; åœ¨æŒç»­é›†æˆï¼ˆCIï¼‰æµæ°´çº¿ä¸­ï¼Œå½“æäº¤æ–°ä»£ç æ—¶ï¼Œå¯èƒ½ä¼šè§¦å‘ä¸€ç³»åˆ— Selenium æµ‹è¯•ã€‚è¿™é‡ŒçœŸæ­£çš„åº¦é‡æ ‡å‡†å¯èƒ½æ˜¯ç­‰å¾…æµ‹è¯•çš„é˜Ÿåˆ—ã€‚å¦‚æœæœ‰å¤§é‡ç­‰å¾…æµ‹è¯•çš„æµ‹è¯•å­˜åœ¨ç“¶é¢ˆï¼ŒåŸºäºè¿™ä¸ªé˜Ÿåˆ—æ¥è‡ªåŠ¨ä¼¸ç¼© Selenium å·¥ä½œè€…æ¯”ä»…ä»…è§‚å¯Ÿ CPU æˆ–å†…å­˜æŒ‡æ ‡æ›´æœ‰æ•ˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;API é€Ÿç‡é™åˆ¶ï¼š&lt;/strong&gt; å¯¹äºå¤§é‡ä¾èµ–ç¬¬ä¸‰æ–¹ API ä¸”å…·æœ‰é€Ÿç‡é™åˆ¶çš„åº”ç”¨ç¨‹åºï¼Œæ¥è¿‘é€Ÿç‡é™åˆ¶å¯èƒ½æ˜¯éœ€è¦è¿›è¡Œä¼¸ç¼©çš„ä¿¡å·ã€‚ä¸å¯¹é€Ÿç‡é™åˆ¶é”™è¯¯çš„è¢«åŠ¨ååº”ä¸åŒï¼ŒåŸºäº API è°ƒç”¨é¢‘ç‡è¿›è¡Œä¸»åŠ¨ä¼¸ç¼©å¯ä»¥ç¡®ä¿æ“ä½œé¡ºåˆ©è¿›è¡Œã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™æ ·å¤šæ ·åŒ–çš„ç°å®åœºæ™¯å¼ºè°ƒäº†éœ€è¦ä¸€ç§å¤šåŠŸèƒ½çš„è‡ªåŠ¨ä¼¸ç¼©è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿç†è§£å¹¶å“åº”å¤šç§åº¦é‡æ ‡å‡†ã€‚KEDA å‡­å€Ÿå…¶çµæ´»æ€§å’Œé€‚åº”æ€§æœ‰æ•ˆåœ°åº”å¯¹äº†è¿™äº›æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;5-ç»“è®ºkeda-è‡ªåŠ¨ä¼¸ç¼©çš„æœªæ¥&#34;&gt;5. ç»“è®ºï¼šKEDA è‡ªåŠ¨ä¼¸ç¼©çš„æœªæ¥&lt;/h3&gt;
&lt;p&gt;å°½ç®¡ Kubernetes æ‹¥æœ‰åŸç”Ÿçš„è‡ªåŠ¨ä¼¸ç¼©å·¥å…·å¦‚ HPA å’Œ VPAï¼Œä»¥åŠåƒ Prometheus é€‚é…å™¨è¿™æ ·çš„æ‰©å±•ï¼Œä½†å®ƒä»¬é€šå¸¸ä¼´éšç€å¤æ‚æ€§ã€‚è€Œ KEDA æä¾›äº†ä¸€ä¸ªç®€å•çš„å¹³å°ï¼Œé€‚ç”¨äºå„ç§å„æ ·çš„è‡ªåŠ¨ä¼¸ç¼©éœ€æ±‚ã€‚å®ƒå¤„ç†äº‹ä»¶é©±åŠ¨çš„æ‰©å±•ï¼ŒåŒ…æ‹¬ç¼©å‡åˆ°é›¶ï¼Œè¿™æ˜¯ä¸€ä¸ªé‡å¤§ä¼˜åŠ¿ã€‚æ­¤å¤–ï¼Œè®¾ç½® KEDA æ›´åŠ ç®€å•ï¼Œå‡å°‘äº†ç”¨æˆ·åœ¨å¤„ç† Kubernetes è‡ªå®šä¹‰æŒ‡æ ‡æ—¶é€šå¸¸ä¼šé‡åˆ°çš„å…¸å‹éšœç¢ã€‚&lt;/p&gt;
&lt;p&gt;KEDA çš„æ´»è·ƒç¤¾åŒºè¯æ˜äº†å®ƒçš„å®ç”¨æ€§ã€‚å¯¹è¯¥é¡¹ç›®çš„å®šæœŸè´¡çŒ®ã€åƒ Kedify æˆ– Microsoft è¿™æ ·çš„ä¾›åº”å•†ä»¥åŠä¸æ–­å¢åŠ çš„&lt;a href=&#34;https://keda.sh/community/#end-users&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¼ä¸šé‡‡ç”¨&lt;/a&gt;æ˜¾ç¤ºå‡ºå®ƒåœ¨ Kubernetes ç”Ÿæ€ç³»ç»Ÿä¸­æ—¥ç›Šé‡è¦ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>OpenTelemetry çš„æœ€æ–°è¿›å±•åŠå…¶å¯¹å¯è§‚æµ‹æ€§çš„å½±å“</title>
      <link>https://cloudnativecn.com/blog/why-the-latest-advances-in-opentelemetry-are-significant/</link>
      <pubDate>Fri, 12 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/why-the-latest-advances-in-opentelemetry-are-significant/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&#34;https://thenewstack.io/why-the-latest-advances-in-opentelemetry-are-significant/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Why the Latest Advances in OpenTelemetry Are Significant&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šOpenTelemetry æ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–è§‚æµ‹æ€§å’Œé¥æµ‹æ•°æ®æ ¼å¼çš„é¡¹ç›®ï¼Œæ”¯æŒå¤šç§å·¥å…·çš„äº’æ“ä½œã€‚æœ¬æ–‡ä»‹ç»äº†è¯¥é¡¹ç›®çš„æ–°ç‰¹æ€§ï¼Œå¦‚æ–°çš„è½¬æ¢è¯­è¨€ã€æ—¥å¿—æ”¯æŒå’Œè‡ªåŠ¨åŒ–ä¿®å¤èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä»Šå¹´ï¼Œåœ¨&lt;a href=&#34;https://cncf.io/?utm_content=inline-mention&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿè®¡ç®—åŸºé‡‘ä¼šï¼ˆCloud Native Computing Foundationï¼‰&lt;/a&gt;ä¸­ï¼Œä¸€ä¸ªå¤‡å—å…³æ³¨çš„é¡¹ç›®æ˜¯&lt;a href=&#34;https://thenewstack.io/observability-in-2024-more-opentelemetry-less-confusion/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry&lt;/a&gt;å’Œ&lt;a href=&#34;https://thenewstack.io/how-the-opentelemetry-collector-scales-observability/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry Collector&lt;/a&gt;ã€‚è¿™ä¸ªé¡¹ç›®æ˜¯è§‚æµ‹é¢†åŸŸçš„ä¸€ä¸ªéå¸¸ä»¤äººå…´å¥‹çš„è¿åŠ¨ï¼Œæ—¨åœ¨è·¨è¡Œä¸šåˆä½œï¼Œè¾¾æˆè§‚æµ‹å’Œé¥æµ‹çš„æ ‡å‡†æ•°æ®æ ¼å¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœ¬èº«å°±éå¸¸é‡è¦ï¼Œå› ä¸ºå®ƒå…è®¸å¤šä¸ªè§‚æµ‹å’Œåˆ†æå·¥å…·è¿›è¡Œäº’æ“ä½œï¼Œè€Œä»¥å‰çš„å›¢é˜Ÿå¦‚æœæƒ³è¦ä¸€ä¸ªå·¥å…·ä¸å¦ä¸€ä¸ªå·¥å…·è¿›è¡Œäº’æ“ä½œï¼Œå°±å¿…é¡»å¤šæ¬¡è½¬æ¢æ•°æ®ã€‚éšç€è§‚æµ‹é¢†åŸŸå›´ç»•äººå·¥æ™ºèƒ½/æœºå™¨å­¦ä¹ çš„ç‚’ä½œï¼Œå…¬å¸æ›´æœ‰å¯èƒ½ä»ä¸€ä¸ªç³»ç»Ÿä¸­å­˜å‚¨å’ŒæŸ¥çœ‹æ•°æ®ï¼Œç„¶ååœ¨å¦ä¸€ä¸ªç³»ç»Ÿä¸­è¿›è¡Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„è®­ç»ƒã€‚&lt;/p&gt;
&lt;p&gt;æ›´æ£’çš„æ˜¯ï¼Œç”±äºè¡Œä¸šä¾›åº”å•†å’Œä¸ªäººåœ¨&lt;a href=&#34;https://opentelemetry.io/docs/collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry Collector&lt;/a&gt;ä¸Šåˆä½œï¼Œè¿™ä¸ªé¡¹ç›®ç»§ç»­ä¸æ–­å‘å±•ã€‚å®ƒæ˜¯ä¸€ä¸ªæ ‡å‡†åŒ–çš„ä»£ç†å’Œé¥æµ‹æ”¶é›†å™¨ï¼Œæä¾›é«˜ååé‡çš„é¥æµ‹æ•°æ®æ”¶é›†å’Œåˆ†æã€‚è¯¥æ”¶é›†å™¨å·²ç»æ”¯æŒè·Ÿè¸ªå’Œåº¦é‡æ•°æ®ä¸€æ®µæ—¶é—´äº†ï¼Œä½†ç›´åˆ°å»å¹´çš„&lt;a href=&#34;https://thenewstack.io/kubeconcloudnativecon-2022-rolls-into-detroit/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;KubeCon Detroit 2022&lt;/a&gt;ï¼Œç¤¾åŒºæ‰å¸çº³äº† OpenLogs é¡¹ç›®ï¼Œå¹¶å¼€å§‹å®æ–½æ—¥å¿—æ”¶é›†å’Œåˆ†æåŠŸèƒ½ã€‚ç°åœ¨ï¼Œæ—¥å¿—æ”¯æŒå·²ç»å®Œå…¨æˆç†Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ¥ä¸‹æ¥çš„éƒ¨åˆ†ä¸­ï¼Œæˆ‘å°†åˆ†äº«ä¸€äº›å…³äºè¿™ä¸ªé¡¹ç›®çš„æ–°ç‰¹æ€§ä»¥åŠå®ƒä»¬å¯¹ç¤¾åŒºçš„é‡è¦æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-æ–°çš„è½¬æ¢è¯­è¨€&#34;&gt;1. æ–°çš„è½¬æ¢è¯­è¨€&lt;/h2&gt;
&lt;p&gt;æˆ‘å‘ç°è®¸å¤šä»£ç†çš„è¯­æ³•ä½¿å¾—è¿›è¡Œæœ‰æ„ä¹‰çš„è½¬æ¢éå¸¸å›°éš¾ï¼Œéœ€è¦ä½¿ç”¨ä¸€äº›å¥‡æ€ªçš„ YAML æˆ– TOMLã€‚Otel Collector ä»ç„¶ä¾èµ–äº YAML æ ¼å¼ï¼Œä½†å®ƒçš„æ–°è½¬æ¢è¯­è¨€å…è®¸ä½¿ç”¨åŸºäºå‡½æ•°çš„è¯­å¥ï¼Œæ‰§è¡Œèµ·æ¥éå¸¸å¿«é€Ÿï¼Œå¯ä»¥ç®¡ç†å¤æ‚æ€§ã€‚æŸ¥çœ‹ä¸€äº›&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/pkg/ottl/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯­æ³•ç¤ºä¾‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-æ—¥å¿—æ­£å¼å‘å¸ƒ&#34;&gt;2. æ—¥å¿—æ­£å¼å‘å¸ƒ&lt;/h2&gt;
&lt;p&gt;åœ¨å¤§çº¦ä¸€å¹´çš„å¼€å‘æ—¶é—´å†…ï¼Œæ—¥å¿—æ”¶é›†å’Œåˆ†æç°åœ¨å·²ç»æ­£å¼å‘å¸ƒã€‚è¯¥å®æ–½æœ‰ä¸€äº›æ”¶é›†æ—¥å¿—çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¦–å…ˆï¼Œå®ƒä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„ä»£ç†è¿è¡Œï¼Œå¹¶ä»æ–‡ä»¶ç³»ç»Ÿæ”¶é›†æ—¥å¿—ã€‚å®ƒå¯ä»¥ç›´æ¥å‘é€åˆ°æœ€ç»ˆç›®çš„åœ°ï¼Œä¹Ÿå¯ä»¥è½¬å‘åˆ°ä»¥æ”¶é›†å™¨æ¨¡å¼è¿è¡Œçš„ OpenTelemetry Collectorï¼Œå¯ä»¥å³æ—¶è®¡ç®—æ—¥å¿—æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;li&gt;å…¶æ¬¡ï¼Œå­˜åœ¨è®¸å¤šæ—¥å¿— SDKï¼Œå¯ä»¥ç›´æ¥åœ¨åº”ç”¨ç¨‹åºä¸­å®æ–½ï¼Œå¹¶å°†æ—¥å¿—å‘é€åˆ°ä¸­å¤®æ”¶é›†å™¨æˆ–ç›´æ¥å‘é€åˆ°æœ€ç»ˆç›®çš„åœ°ï¼Œè¿™æœ‰åŠ©äºå‡å°‘ç£ç›˜ IO çš„å½±å“ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;3-è‡ªåŠ¨ä»ªå™¨æˆç†Ÿåº¦&#34;&gt;3. è‡ªåŠ¨ä»ªå™¨æˆç†Ÿåº¦&lt;/h2&gt;
&lt;p&gt;è‡ªåŠ¨ä»ªå™¨æ˜¯è‡ªåŠ¨å°†åº”ç”¨ç¨‹åºè¿æ¥åˆ°å‘å‡ºè·Ÿè¸ªå’Œåº¦é‡æ•°æ®è€Œæ— éœ€æˆ–ä»…éœ€è¿›è¡Œæœ€å°‘ä»£ç æ›´æ”¹çš„èƒ½åŠ›ã€‚Java å’Œ.Net å¾—åˆ°äº†å…¨é¢æ”¯æŒï¼Œå…¶ä»–è¯­è¨€æ­£å¤„äºä¸åŒå¼€å‘å’Œå‘å¸ƒé˜¶æ®µã€‚è¿™ä¸ªåŠŸèƒ½æ˜¯ä¸€äº›ä¸“æœ‰è§£å†³æ–¹æ¡ˆå±•ç¤ºå‡ºæ¥çš„ç‰¹è‰²ï¼Œå› ä¸ºå®ƒé€šè¿‡å‡å°‘å¼€å‘äººå‘˜çš„æ—¶é—´æ¥é™ä½éƒ¨ç½²å¤æ‚æ€§ï¼Œç°åœ¨å®ƒå°†åŒæ ·å¼ºå¤§çš„åŠŸèƒ½å¸¦åˆ°äº† OpenTelemetry ç”Ÿæ€ç³»ç»Ÿä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-è¯­ä¹‰çº¦å®š&#34;&gt;4. è¯­ä¹‰çº¦å®š&lt;/h2&gt;
&lt;p&gt;è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå¹¶ä¸”æ­£åœ¨ä» ElasticSearch å‘ OpenTelemetry é¡¹ç›®æèµ  ECSï¼ˆElastic Common Schemaï¼‰è€Œå—ç›Šã€‚è§„èŒƒåŒ–æ—¥å¿—å’Œé¥æµ‹ç»“æ„å…·æœ‰æŒ‘æˆ˜æ€§ï¼Œå› ä¸ºä¼¼ä¹å‡ ä¹æ¯ä¸ªäººéƒ½ä»¥ç¨å¾®ä¸åŒçš„æ ¼å¼ç”Ÿæˆé¥æµ‹æ•°æ®ï¼›ä½†è¦èƒ½å¤Ÿåˆ†æã€åˆ›å»ºè­¦æŠ¥å¹¶ä»¥äººæ€§åŒ–çš„æ–¹å¼å‘ˆç°æ•°æ®ï¼Œæ‰€æœ‰é¥æµ‹å­—æ®µéƒ½éœ€è¦ä»¥æŸç§æ–¹å¼æ˜ å°„ã€‚å¦‚æœæ¯ä¸ªäººå’Œæ¯ä¸ªç³»ç»Ÿéƒ½ç•¥æœ‰ä¸åŒï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯é‡ç”¨çš„ä»ªè¡¨æ¿å’Œç»„ä»¶æ–¹é¢å°±ä¼šå‡ºç°æŒ‘æˆ˜ã€‚ç°åœ¨ï¼Œè½¯ä»¶ä¾›åº”å•†å¯ä»¥è´Ÿè´£åœ¨å¤šä¸ªå¹³å°ä¸Šåˆ›å»ºä»ªè¡¨æ¿ï¼Œåˆç†åœ°ç¡®ä¿æ•°æ®å°†ä»¥å¤šä¸ªå¹³å°ä¸Šçš„æ­£ç¡®æ ¼å¼è¿›è¡Œå‘é€ã€‚ä¸æ­¤åŒæ—¶ï¼Œæˆ‘ä»¬ç®¡ç†å¤§é‡é¥æµ‹æ•°æ®çš„äººå¯ä»¥é€šè¿‡ä½¿ç”¨ä¼—æ‰€å‘¨çŸ¥çš„å­—æ®µåç§°æ¥æé«˜æ‘„å–å’ŒæŸ¥è¯¢æ•ˆç‡ï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°å®¢æˆ·å‘é€çš„å†…å®¹ä¾èµ–äºè¿™äº›å­—æ®µåç§°æ—¶ï¼Œå¯ä»¥æä¾›æ›´é«˜çº§çš„åŠŸèƒ½ï¼ŒåŒæ—¶å‡å°‘è®¡ç®—èµ„æºå’Œå†…å­˜å¼€é”€ã€‚&lt;/p&gt;
&lt;p&gt;å®Œæ•´çš„æ¶æ„ä»ç„¶éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æœ€ç»ˆç¡®å®šï¼Œä½†é€æ­¥æ­£åœ¨æ‰¹å‡†è¿™äº›çº¦å®šã€‚ä¾‹å¦‚ï¼Œåœ¨ KubeCon ä¸Šï¼Œä»–ä»¬å®£å¸ƒäº† HTTP æ¶æ„çš„æœ€ç»ˆç¡®å®šã€‚&lt;/p&gt;
&lt;h2 id=&#34;5-æ’ä»¶æ¡†æ¶å’Œç”Ÿæ€ç³»ç»Ÿ&#34;&gt;5. æ’ä»¶æ¡†æ¶å’Œç”Ÿæ€ç³»ç»Ÿ&lt;/h2&gt;
&lt;p&gt;ç”Ÿæ€ç³»ç»Ÿæ­£åœ¨ä¸æ–­æˆç†Ÿã€‚å¯æ‰©å±•æ€§æ¡†æ¶å…è®¸è‡ªå®šä¹‰ä»»ä½•æ‘„å–ç®¡é“&lt;/p&gt;
&lt;p&gt;çš„ä»»ä½•é˜¶æ®µã€‚æœ‰è¶Šæ¥è¶Šå¤šçš„æ¥æ”¶å™¨ç”¨äºå„ç§ç³»ç»Ÿï¼Œå¤„ç†å™¨å…·æœ‰è¶Šæ¥è¶Šå…ˆè¿›çš„åŠŸèƒ½ï¼Œç›®æ ‡ä¹Ÿåœ¨å¢åŠ ã€‚æˆ‘ç‰¹åˆ«å¯¹æ–°ç‰ˆæœ¬çš„ OpenSearch æ‰©å±•æ„Ÿåˆ°å…´å¥‹ï¼Œå®ƒå¯ä»¥å‘é€é¢„æ‰“åŒ…åœ¨ç®€åŒ–çš„é¥æµ‹æˆ– ECS æ ¼å¼ä¸­çš„æ—¥å¿—æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä»å¼€å‘è€…çš„è§’åº¦æ¥çœ‹ï¼Œæˆ‘å‘ç°æ¨¡å¼å’Œå†…éƒ¨â€œpâ€æ¶ˆæ¯æ¨¡å¼çš„ç»“æ„éå¸¸å‘¨åˆ°ï¼Œå†…ç½®äº† protobufã€‚å®ƒåœ¨åŠŸèƒ½è‡ªç”±åº¦å’Œæœ€å°å¤æ‚åº¦ä¹‹é—´æœ‰ä¸€ä¸ªè‰¯å¥½çš„å¹³è¡¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;6-ç¤¾åŒºåˆä½œ&#34;&gt;6. ç¤¾åŒºåˆä½œ&lt;/h2&gt;
&lt;p&gt;è¿™å¯¹äº CNCF ç¤¾åŒºæ¥è¯´å¹¶ä¸æ˜¯å¾ˆæ–°é²œï¼Œä½†è¿™ä¸ªé¡¹ç›®çš„é€Ÿåº¦å’Œå½±å“ä½“ç°äº† CNCF ç¤¾åŒºå“²å­¦çš„ç²¾ç¥ã€‚ç«äº‰å…¬å¸æ­£åœ¨å…±åŒåŠªåŠ›ï¼Œä½¿è®¡ç®—çš„ä¸€éƒ¨åˆ†å˜å¾—æ›´å¥½ã€æ›´å®¹æ˜“ï¼Œä»¥é€ ç¦æˆ‘ä»¬å…¶ä»–äººã€‚æœ‰äº›äººå¯èƒ½æ‹…å¿ƒå»é™¤ä¾›åº”å•†é”å®šä¼šå¯¼è‡´å®¢æˆ·ç¦»å¼€ï¼Œæˆ–è€…å…±äº«ä»£ç å¯èƒ½æ³„æ¼ä¸“æœ‰ IPã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œåœ¨é¥æµ‹é¢†åŸŸï¼Œä»£ç†å’Œæ”¶é›†å™¨çš„æ ¸å¿ƒæ¶æ„é€šå¸¸æ˜¯å·²è§£å†³çš„é—®é¢˜ã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆä¸åˆ¶ä½œä¸€äº›éµå¾ªæƒ¯ä¾‹å¹¶åœ¨å„ä¸ªå¹³å°ä¸Šè¿è¡Œçš„ä¸œè¥¿ï¼Œä»¥ä¾¿å…¬å¸ä¸å†å¿…é¡»ç»´æŠ¤ä»£ç†ä»£ç ï¼Œå…¶ä¸­ 80% éƒ½æ˜¯é‡å¤çš„å‘¢ï¼Ÿè¿™ä½¿å…¬å¸å¯ä»¥åœ¨äº’æ“ä½œæ€§å’Œåˆ›æ–°å¯ä»¥é€šè¿‡è¿™ä¸ªæ¡†æ¶ä¼ é€’çš„ä¸“æœ‰å¤„ç†å™¨æ–¹é¢å…±åŒå¼€å‘æ’ä»¶ã€‚å¥½å¤„ä¹Ÿå»¶ä¼¸åˆ°æ‰€æœ‰è¿è¥å•†å’Œè½¯ä»¶ä¾›åº”å•†ã€‚å€ŸåŠ©æ ‡å‡†åŒ–çš„ Otel Collector SDKï¼Œä¾›åº”å•†å¯ä»¥åˆ›å»ºä¸€ä¸ªå•ä¸€çš„é›†æˆæ¥ä¸ºå…¶åº”ç”¨ç¨‹åºæ·»åŠ é¥æµ‹ï¼Œå¹¶æå¤§ç®€åŒ–äº†æ”¶é›†è¿‡ç¨‹ï¼Œè¯•å›¾è®©æ‰€æœ‰ä¸»è¦çš„è§‚æµ‹æä¾›å•†ä¸ºä½ çš„åº”ç”¨ç¨‹åºå®æ–½æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;è¿è¥å•†ä¹Ÿä»â€œéšå¤„æ”¶é›†â€å’Œâ€œéšå¤„å‘é€â€çš„ç†å¿µä¸­å—ç›Šã€‚é€šè¿‡æ ‡å‡†çš„é…ç½®æ–‡ä»¶æ ¼å¼ç®€åŒ–äº†è®¾ç½®ï¼Œå‡å°‘äº†æ–°ç³»ç»Ÿçš„å¼•å…¥å¤æ‚æ€§ã€‚æˆ‘è¿˜æ€€ç–‘ï¼Œè®¸å¤šæ—¥å¿—ç³»ç»Ÿçš„è¿è¥å•†åœ¨è§‚æµ‹æ•°æ®çš„è¯­ä¹‰çº¦å®šé¡¹ç›®å‡å°‘äº†è®¸å¤šé—®é¢˜åï¼Œå°†å¤§å¤§å‡å°‘å­—æ®µæ˜ å°„çš„åŸºæ•°é—®é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å‘æ‰€æœ‰é¡¹ç›®è´¡çŒ®è€…å’Œç¤¾åŒºæˆå‘˜è¡¨ç¤ºè¡·å¿ƒçš„â€œæ„Ÿè°¢â€ï¼è¿™é‡Œæœ‰å¤ªå¤šäººè¦åˆ—å‡ºæ¥äº†ï¼Œä½†ä½ å¯ä»¥åœ¨&lt;a href=&#34;https://github.com/open-telemetry/community/blob/main/community-members.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub ä¸Šçš„ OpenTelemetry é¡¹ç›®&lt;/a&gt;ä¸Šæ‰¾åˆ°ä»–ä»¬ã€‚&lt;/p&gt;
&lt;p&gt;OpenTelemetry å’Œ OpenTelemetry Collector çš„åŠŸèƒ½å’Œæœªæ¥è·¯å¾„æ­£åœ¨ä»¥æå¿«çš„é€Ÿåº¦å‰è¿›ï¼Œè¿‡å»ä¸€å¹´æ˜¯ CNCF ç»„åˆä¸­è´¡çŒ®ç¬¬äºŒå¤šçš„é¡¹ç›®ï¼Œä»…æ¬¡äº Kubernetesã€‚æœ‰è¿™ä¹ˆå¤šè´¡çŒ®è€…ä¿æŒç»„ç»‡å’Œåˆä½œï¼Œæˆç†Ÿåº¦å°†ç»§ç»­åŠ é€Ÿã€‚è¿™å°†æœ‰æœ›é€šè¿‡å¢åŠ äº’æ“ä½œæ€§å¹¶ç®€åŒ–ä»ªè¡¨ç³»ç»Ÿçš„ä»ªå™¨åŒ–è¿‡ç¨‹æ¥ä¿ƒè¿›è§‚æµ‹é¢†åŸŸçš„åˆ›æ–°ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ç”¨ eBPF æ´å¯Ÿåº”ç”¨å±‚ç½‘ç»œæµé‡</title>
      <link>https://cloudnativecn.com/blog/application-traffic-with-ebpf/</link>
      <pubDate>Wed, 10 Jan 2024 12:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/application-traffic-with-ebpf/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thebsdbox.co.uk/2023/12/08/Application-traffic-with-eBPF/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Application traffic with eBPF&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šæœ¬æ–‡ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ eBPF ç¨‹åºæ•è·ã€åˆ†æå’Œä¿®æ”¹åº”ç”¨å±‚çš„ç½‘ç»œæ•°æ®ï¼ŒåŒ…æ‹¬ HTTP å¤´éƒ¨å’Œ URL è·¯å¾„ã€‚ä½œè€…è¿˜å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨ eBPF map åœ¨å†…æ ¸å’Œç”¨æˆ·ç©ºé—´ä¹‹é—´ä¼ é€’æ•°æ®ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åœ¨&lt;a href=&#34;../ebpf-adventures-in-networking/&#34;&gt;å…ˆå‰çš„å¸–å­&lt;/a&gt;ä¸­ï¼Œæˆ‘ç¨å¾®è°ˆåˆ°äº†å»ºç«‹ eBPF çŸ¥è¯†ï¼Œä»¥å¼€å§‹æ›´å¤šåœ°äº†è§£ç½‘ç»œé€‚é…å™¨çš„è¾“å…¥å’Œè¾“å‡ºæƒ…å†µã€‚åŸºæœ¬ä¸Šï¼Œå°†ä»¥å¤ªç½‘å¸§å¹¶å‰¥ç¦»æ ‡å¤´ï¼ˆä»¥å¤ªç½‘æ ‡å¤´+IP æ ‡å¤´+TCP/UDP æ ‡å¤´ï¼‰ï¼Œæœ€ç»ˆä½ å°†å¾—åˆ°æ¥è‡ªåº”ç”¨ç¨‹åºæˆ–æ•°æ®è§’åº¦çš„æ•°æ®åŒ…ä¸­å‰©ä½™çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€æœ‰çš„ä»£ç éƒ½åœ¨â€œå­¦ä¹  eBPFâ€å­˜å‚¨åº“ä¸­ï¼Œå…·ä½“çš„ eBPF ä»£ç åœ¨&lt;a href=&#34;https://github.com/thebsdbox/learning-ebpf/blob/main/ebpf/http/http.c&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚è¿™ç¯‡æ–‡ç« çš„è®¡åˆ’æ˜¯é€æ­¥ä»‹ç»æˆ‘è®¤ä¸ºæœ‰ç”¨æˆ–å¯èƒ½é‡è¦çš„éƒ¨åˆ†&amp;hellip;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ³¨æ„&lt;/strong&gt;ï¼šæ­¤ä»£ç ç¡®å®å¯¹å…¥å£/å‡ºå£æ•°æ®åŒ…è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå› æ­¤éœ€è¦ 6.1+ çš„ Linux å†…æ ¸æ‰èƒ½ä½¿ç”¨ä¸€äº› eBPF åŠ©æ‰‹å‡½æ•°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ˜ å°„&#34;&gt;æ˜ å°„ï¼&lt;/h2&gt;
&lt;p&gt;ä½ å¯èƒ½ä»¥å‰é‡åˆ°è¿‡è¿™äº›å§ï¼Ÿå¦‚æœæ²¡æœ‰ï¼Œä¸ç”¨æ‹…å¿ƒï¼ç®€è€Œè¨€ä¹‹ï¼ŒeBPF æ˜ å°„æ˜¯åœ¨ç”¨æˆ·ç©ºé—´å’Œå†…æ ¸ä¸­çš„ eBPF ç¨‹åºä¹‹é—´é€šä¿¡çš„æœºåˆ¶ã€‚åœ¨æˆ‘çœ‹æ¥ï¼Œéå¸¸é…·çš„ä¸€ç‚¹æ˜¯è¿™äº›æ˜ å°„ä½¿ç”¨é”®å’Œå€¼&amp;hellip;æ‰€ä»¥æˆ‘ä¸å¿…å¾ªç¯æ¯”è¾ƒæ•°æ®å¹¶å¯»æ‰¾åŒ¹é…çš„å†…å®¹ï¼Œæˆ‘ä¼ é€’ä¸€ä¸ªé”®ï¼Œå¦‚æœæœ‰åŒ¹é…çš„å†…å®¹ï¼Œæˆ‘å°±å¾—åˆ°ç›¸åº”çš„æ•°æ®:D&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æˆ‘å°†è¦ä½¿ç”¨çš„æ˜ å°„ï¼Œç§°ä¸º&lt;code&gt;url_map&lt;/code&gt;ï¼Œé”®æ˜¯ 20 ä¸ªå­—ç¬¦é•¿ï¼ˆå¯ä»¥è¯´æ˜¯æœ‰ç•Œçš„â€œå­—ç¬¦ä¸²â€ï¼‰ï¼Œåˆ†é…ç»™è¯¥é”®çš„å€¼æ˜¯æˆ‘åœ¨ä¸Šé¢å®šä¹‰çš„ç»“æ„ä½“ã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;// å®šä¹‰ä¸é”®å…³è”çš„ä¸åŒURL
struct url_path {
  __u8 path_len;
  __u8 path[max_path_len]; // è¿™åº”è¯¥æ˜¯ä¸€ä¸ªcharï¼Œä½†åœ¨è¿™é‡Œå’ŒGoä¹‹é—´çš„ä»£ç ç”Ÿæˆæœ‰ç‚¹ä¸åŒ...
};

// å®šä¹‰æˆ‘çš„URLæ˜ å°„
struct {
  __uint(type, BPF_MAP_TYPE_HASH);
  __uint(max_entries, 1024);
  __type(key, char[max_path_len]);
  __type(value, struct url_path);
}
url_map SEC(&amp;#34;.maps&amp;#34;);
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;ebpf-ç¨‹åº&#34;&gt;eBPF ç¨‹åºï¼&lt;/h2&gt;
&lt;p&gt;ä»£ç ä¸­å®šä¹‰äº†ä¸¤ä¸ª eBPF ç¨‹åº&lt;code&gt;tc_egress&lt;/code&gt;å’Œ&lt;code&gt;tc_ingress&lt;/code&gt;ï¼Œå¦‚æœä½ èƒ½çŒœåˆ°å®ƒä»¬æ˜¯å¦‚ä½•è¿æ¥çš„ï¼Œé‚£å°±åŠ åˆ†ï¼åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬åªå…³æ³¨&lt;code&gt;tc_ingress&lt;/code&gt;ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;å°±åƒæˆ‘ä»¬åœ¨å·²ç»å­˜åœ¨çš„ä¼—å¤šç¤ºä¾‹ä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæ ‡å¤´è¯†åˆ«çš„æ“ä½œã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;è¿›è¡Œåˆç†æ€§æ£€æŸ¥ï¼Œå¹¶å°†&lt;code&gt;data&lt;/code&gt;å¼ºåˆ¶è½¬æ¢ä¸º&lt;code&gt;ethhdr&lt;/code&gt;ç±»å‹ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Ethernet_frame&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä»¥å¤ªç½‘æ ‡å¤´&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡è¯»å–ä»¥å¤ªç½‘æ ‡å¤´å†…éƒ¨çš„&lt;code&gt;h_proto&lt;/code&gt;ï¼ˆä¹Ÿç§°ä¸º&lt;code&gt;Ethertype&lt;/code&gt;ï¼‰æ¥æŸ¥æ‰¾ä»¥å¤ªç½‘å¸§å†…éƒ¨çš„åè®®ã€‚&lt;/li&gt;
&lt;li&gt;å°†ä»¥å¤ªç½‘æ ‡å¤´åçš„æ•°æ®å¼ºåˆ¶è½¬æ¢ä¸º&lt;code&gt;iphdr&lt;/code&gt;ç±»å‹ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Internet_Protocol_version_4#Header&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IP æ ‡å¤´&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ IP æ ‡å¤´å†…æŸ¥æ‰¾åè®®ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç¡®å®š IP æ ‡å¤´çš„å¤§å°ï¼ˆåŸæ¥å®ƒä»¬å¯ä»¥æœ‰ä¸åŒçš„å¤§å°ï¼&lt;code&gt;Â¯\_(ãƒ„)_/Â¯&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä¸ºäº†ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼Œæˆ‘ä»¬å°†å…¶å€¼ä¹˜ä»¥å››ï¼Œä½ å¯èƒ½ä¼šé—®ä¸ºä»€ä¹ˆï¼å¥½å§ï¼Œè¿™ä¸ªå€¼ä¹˜ä»¥ 32 ä½ä»¥ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼Œæ‰€ä»¥å¦‚æœå€¼ä¸º 6ï¼Œé‚£ä¹ˆæ ‡å¤´å°†æ˜¯ 192 ä½ï¼ˆæˆ– 24 å­—èŠ‚ï¼‰ã€‚æ‰€ä»¥ï¼Œä¸ºäº†ç®€å•åœ°ç¡®å®š IP æ ‡å¤´çš„å­—èŠ‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å°†è¿™ä¸ªå€¼ä¹˜ä»¥ 4ï¼&lt;/li&gt;
&lt;li&gt;å°†ä»¥ IP æ ‡å¤´åçš„æ•°æ®å¼ºåˆ¶è½¬æ¢ä¸º&lt;code&gt;tcphdr&lt;/code&gt;ç±»å‹ï¼ˆ&lt;a href=&#34;https://en.wikipedia.org/wiki/Transmission_Control_Protocol#TCP_segment_structure&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TCP æ ‡å¤´&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;åƒæ­¥éª¤ï¼ˆ5ï¼‰ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ç¡®å®š TCP æ ‡å¤´çš„å¤§å°ï¼ˆå®ƒä¹Ÿå¯ä»¥æ˜¯åŠ¨æ€çš„ï¼‰ï¼Œåœ¨è¿™é‡Œçš„æ­¥éª¤ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å€¼&lt;code&gt;doff&lt;/code&gt;ä¹˜ä»¥å››æ¥ç¡®å®šæ ‡å¤´çš„å¤§å°ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;é€šè¿‡è®¡ç®—æ‰€æœ‰è¿™äº›ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ¨æ–­å‡ºæ•°æ®ä½äºä»¥å¤ªç½‘æ ‡å¤´å¤§å°ã€IP æ ‡å¤´å¤§å°å’Œ TCP æ ‡å¤´å¤§å°çš„æœ«å°¾ã€‚&lt;/li&gt;
&lt;li&gt;æœ€åï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä» IP æ ‡å¤´ä¸­å‡å» IP å’Œ TCP æ ‡å¤´çš„å¤§å°æ¥ç¡®å®šåº”ç”¨ç¨‹åºæ•°æ®çš„å¤§å°ï¼Œä½¿ç”¨&lt;code&gt;tot_len&lt;/code&gt;ï¼ˆæ€»é•¿åº¦ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;åº”ç”¨æ•°æ®&#34;&gt;åº”ç”¨æ•°æ®ï¼ï¼&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†è¯»å–è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°†éœ€è¦ä¸Šé¢æåˆ°çš„ä¸€äº›ä¸œè¥¿ï¼&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ•°æ®åç§»é‡ï¼ˆæ•°æ®èµ·å§‹ä½ç½®ï¼‰ï¼Œå®ƒä½äºä»¥å¤ªç½‘æ ‡å¤´+IP æ ‡å¤´å¤§å°ï¼ˆä¸€æ—¦è®¡ç®—å‡ºæ¥ï¼‰å’Œ TCP æ ‡å¤´ï¼ˆå†æ¬¡ï¼Œä¸€æ—¦è®¡ç®—å‡ºæ¥ï¼‰ä¹‹åã€‚æˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªç¼“å†²åŒºæ¥å­˜å‚¨æˆ‘ä»¬å°†ä»å¥—æ¥å­—ç¼“å†²åŒºä¸­è¯»å–çš„æ•°æ®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ç”¨äºå­˜å‚¨æˆ‘ä»¬åº”ç”¨ç¨‹åºæ•°æ®çš„æ•°æ®ç¼“å†²åŒº
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// è®¡ç®—æ•°æ®å®é™…ä½ç½®çš„åç§»é‡
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;poffset&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ETH_HLEN&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ip_hlen&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;tcp_hlen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ä»å¥—æ¥å­—ç¼“å†²åŒºåŠ è½½æ•°æ®ï¼Œpoffset ä» TCP æ ‡å¤´çš„æœ«å°¾å¼€å§‹
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;bpf_skb_load_bytes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;skb&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;poffset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;60&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;ret&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;   &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨&lt;code&gt;bpf_skb_load_bytes&lt;/code&gt;ä»å¥—æ¥å­—ç¼“å†²åŒºï¼ˆ&lt;code&gt;skb&lt;/code&gt;ï¼‰ä¸­è¯»å–ä¸€å®šé‡çš„æ•°æ®ï¼ˆ60 ä¸ªå­—èŠ‚ï¼‰åˆ°æˆ‘ä»¬çš„ç¼“å†²åŒºï¼ˆ&lt;code&gt;pdata&lt;/code&gt;ï¼‰ï¼Œèµ·å§‹ä½ç½®æ˜¯æˆ‘ä»¬çŸ¥é“æ•°æ®ä½äºçš„åç§»é‡ï¼ˆ&lt;code&gt;poffset&lt;/code&gt;ï¼‰ï¼&lt;/p&gt;
&lt;p&gt;æ­¤æ—¶ï¼Œæˆ‘ä»¬æœ‰äº† 60 å­—èŠ‚çš„æ•°æ®ï¼Œåº”è¯¥è¶³å¤Ÿè®©æˆ‘ä»¬ç¼–å†™ä¸€äº›ä»£ç æ¥ç†è§£å®ƒã€‚&lt;/p&gt;
&lt;h3 id=&#34;http-æ•°æ®--&#34;&gt;HTTP æ•°æ® :-)&lt;/h3&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹å½“æˆ‘ä»¬å°è¯•è¿›è¡Œ HTTP è¯·æ±‚æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plaintext&#34; data-lang=&#34;plaintext&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt; ~ curl code/test -vvv
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;*   Trying 192.168.0.22:80...
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;* Connected to code (192.168.0.22) port 80 (#0)
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; GET /test HTTP/1.1
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; Host: code
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; User-Agent: curl/7.87.0
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;gt; Accept: */*
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;...
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘æ­£åœ¨ä½¿ç”¨&lt;code&gt;curl&lt;/code&gt;ä»ä¸»æœº&lt;code&gt;code&lt;/code&gt;ï¼ˆcode æ˜¯æˆ‘çš„å¼€å‘ VMï¼Œè¿è¡Œ code-serverï¼‰è¯·æ±‚ URL &lt;code&gt;/test&lt;/code&gt;ã€‚æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‘é€åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼ˆæ¯è¡Œä»¥&lt;code&gt;&amp;gt;&lt;/code&gt;å¼€å¤´ï¼Œç”¨äºç¡®å®šé€šä¿¡çš„æ–¹å‘ï¼‰ã€‚HTTP è¯·æ±‚ä¸­çš„ç¬¬ä¸€è¡Œæ•°æ®é€šå¸¸æ˜¯ä¸€ä¸ª&lt;em&gt;åŠ¨è¯&lt;/em&gt;ï¼Œåé¢æ˜¯æˆ‘ä»¬å¸Œæœ›ä¸ä¹‹äº¤äº’çš„èµ„æºï¼Œç„¶åæ˜¯ HTTP è§„èŒƒå’Œå›è½¦ç¬¦ï¼Œå¦‚&lt;a href=&#34;https://en.wikipedia.org/wiki/HTTP#HTTP/1.1_request_messages&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HTTP æ ‡å‡†&lt;/a&gt;ä¸­å®šä¹‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å…³å¿ƒçš„è¡Œæ˜¯&lt;code&gt;GET /test&lt;/code&gt;ï¼ˆåœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬/æˆ‘ä¸å¤ªå…³å¿ƒ HTTP è§„èŒƒ:Dï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ­¥æ˜¯è¯»å–&lt;code&gt;pdata&lt;/code&gt;çš„å‰ä¸‰ä¸ªå­—ç¬¦ï¼ŒæŸ¥æ‰¾&lt;code&gt;pdata[0] == G&lt;/code&gt;ï¼Œ&lt;code&gt;pdata[1] == E&lt;/code&gt;å’Œ&lt;code&gt;pdata[2] == T&lt;/code&gt;ï¼Œè¿™å°†æœ‰æ•ˆåœ°å¸®åŠ©æˆ‘ä»¬ç¡®å®šé¦–å…ˆæ˜¯å¦æ˜¯ HTTP è¯·æ±‚ï¼Œç‰¹åˆ«æ˜¯æ˜¯å¦æ˜¯ HTTP è¯·æ±‚ï¼&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬éªŒè¯äº†è¿™å‰ 3 ä¸ªå­—èŠ‚ï¼Œæˆ‘ä»¬å°†æƒ³è¦ä»ç¬¬ 4 ä¸ªå­—èŠ‚ï¼ˆè¯·æ±‚çš„å‰ä¸‰ä¸ªå­—èŠ‚åŠ ä¸Šä¸€ä¸ªç”¨äºåˆ†éš”çš„ç©ºæ ¼ï¼‰å¼€å§‹è¯»å–æ›´å¤šæ•°æ®ï¼&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;char&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;max_path_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;memset&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;));&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path_len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// æŸ¥æ‰¾è¯·æ±‚ URIï¼ˆä»åç§»é‡ 4 å¼€å§‹ï¼‰ï¼Œä»¥ç©ºæ ¼ç»“æŸ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;for&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;sizeof&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;pdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39; &amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;pdata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;sc&#34;&gt;&amp;#39;\0&amp;#39;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;n&#34;&gt;path_len&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;-&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;        &lt;span class=&#34;k&#34;&gt;break&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢çš„å‡½æ•°å°†ä» HTTP æ•°æ®çš„ç¬¬ 4 ä¸ªå­—èŠ‚å¼€å§‹ï¼ˆä»ç¬¬ 4 ä¸ªå­—èŠ‚å¼€å§‹ï¼‰è¯»å–å…¶ä½™çš„æ•°æ®ï¼Œç›´åˆ°é‡åˆ°ç©ºæ ¼ä¸ºæ­¢ï¼Œç•™ä¸‹æˆ‘ä»¬è¦&lt;code&gt;GET&lt;/code&gt;çš„ URLï¼æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ä¸ªè°ƒè¯•æ‰“å°è¯­å¥æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nf&#34;&gt;bpf_printk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;lt;- incoming path [%s], length [%d]&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path_len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™å°†åœ¨æ—¥å¿—ä¸­æ˜¾ç¤ºå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plaintext&#34; data-lang=&#34;plaintext&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;idle&amp;gt;-0       [001] dNs3. 2252901.017812: bpf_trace_printk: &amp;lt;- incoming path [/test], length [5]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;å¯¹-http-åº”ç”¨ç¨‹åºè¯·æ±‚é‡‡å–è¡ŒåŠ¨&#34;&gt;å¯¹ HTTP åº”ç”¨ç¨‹åºè¯·æ±‚é‡‡å–è¡ŒåŠ¨&lt;/h3&gt;
&lt;p&gt;ä¸Šè¿°è§£é‡Šè¯¦ç»†è¯´æ˜äº†æˆ‘ä»¬å¦‚ä½•è¯»å–æ•°æ®ä»¥åŠå¦‚ä½•è¯»å–æ•°æ®ï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦â€œåŠ¨æ€â€æŸ¥æ‰¾ HTTP è¯·æ±‚ï¼Œæˆ‘ä»¬å°†éœ€è¦ä½¿ç”¨ eBPF æ˜ å°„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬çš„ Go ç”¨æˆ·ç©ºé—´ä»£ç ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-go&#34; data-lang=&#34;go&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;:=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;path&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;The URL Path to watch for&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nx&#34;&gt;flag&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Parse&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// ...
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// åˆ›å»ºä¸€ä¸ª uint8 æ•°ç»„
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;kd&#34;&gt;var&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;urlPath&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;mi&#34;&gt;20&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;uint8&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å°†æˆ‘ä»¬çš„å­—èŠ‚å¤åˆ¶åˆ° uint8 æ•°ç»„ä¸­ï¼ˆæˆ‘ä»¬å¯ä»¥è¿›è¡Œç±»å‹è½¬æ¢ï¼‰
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;copy&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;urlPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[:],&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;// å°†æˆ‘ä»¬çš„ urlPath ä½œä¸ºé”®
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;objs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;UrlMap&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;nf&#34;&gt;Put&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;urlPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nx&#34;&gt;bpfUrlPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;Path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;    &lt;span class=&#34;nx&#34;&gt;urlPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nx&#34;&gt;PathLen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;nb&#34;&gt;uint8&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nb&#34;&gt;len&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;urlPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)),&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;p&#34;&gt;})&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;!=&lt;/span&gt; &lt;span class=&#34;kc&#34;&gt;nil&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;  &lt;span class=&#34;nb&#34;&gt;panic&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;nx&#34;&gt;err&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¦‚æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç ä¸­çœ‹åˆ°çš„ï¼Œå½“æˆ‘ä»¬å¯åŠ¨ Go ç¨‹åºæ—¶ï¼Œå®ƒå°†ä»æ ‡å¿—&lt;code&gt;-path&lt;/code&gt;ä¸­è¯»å–ï¼Œå¹¶å°†å…¶ç”¨ä½œæˆ‘ä»¬ eBPF æ˜ å°„ä¸­çš„&lt;strong&gt;é”®&lt;/strong&gt;ï¼Œå¯ä»¥æš‚æ—¶å¿½ç•¥å€¼ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-c&#34; data-lang=&#34;c&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;struct&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;url_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;*&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;found_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;bpf_map_lookup_elem&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;amp;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;url_map&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;found_path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;nf&#34;&gt;bpf_printk&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Looks like we&amp;#39;ve found your path [%s]&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;    &lt;span class=&#34;c1&#34;&gt;// å¯èƒ½è¿›è¡Œæ›´å¤šæ“ä½œï¼Œé˜»æ­¢æµé‡æˆ–é‡å®šå‘ï¼Ÿ
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨æˆ‘ä»¬çš„ eBPF ç¨‹åºä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ HTTP è¯·æ±‚è¿›è¡Œæ˜ å°„æŸ¥æ‰¾ï¼Œå¦‚æœè¯¥è¯·æ±‚ä½œä¸º char æ•°ç»„å­˜åœ¨äº&lt;strong&gt;é”®&lt;/strong&gt;ä¸­ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å¯¹å…¶è¿›è¡Œæ“ä½œï¼&lt;/p&gt;
&lt;p&gt;ç°åœ¨å¯åŠ¨æˆ‘ä»¬çš„ Go ç¨‹åº &lt;code&gt;sudo ./http -interface ens160 -path /test&lt;/code&gt; å°†å¾—åˆ°ä»¥ä¸‹ç»“æœï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-plaintext&#34; data-lang=&#34;plaintext&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;INFO[0000] Starting ğŸ the eBPF HTTP watcher, on interface [ens160] for path [/test]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;INFO[0000] Loaded TC QDisc
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;INFO[0000] Press Ctrl-C to exit and remove the program
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] d.s3. 2252901.015575: bpf_trace_printk: &amp;lt;- 0.0.0.0:56345 -&amp;gt; 0.0.0.0:80
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] D.s3
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;. 2252901.015642: bpf_trace_printk: -&amp;gt; 192.168.0.22:80 -&amp;gt; 192.168.0.180:56345
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] d.s3. 2252901.017552: bpf_trace_printk: &amp;lt;- 0.0.0.0:56345 -&amp;gt; 0.0.0.0:80
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] d.s3. 2252901.017793: bpf_trace_printk: &amp;lt;- 0.0.0.0:56345 -&amp;gt; 0.0.0.0:80
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] dNs3. 2252901.017812: bpf_trace_printk: &amp;lt;- incoming path [/test], length [5]
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;          &amp;lt;idle&amp;gt;-0       [001] dNs3. 2252901.017814: bpf_trace_printk: Looks like we&amp;#39;ve found your path [/test]
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;è§£æ HTTP å¹¶ä¸å¤ªå›°éš¾ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªç›¸å¯¹ç®€å•çš„åè®®ï¼Œå®ƒä½¿ç”¨ç®€å•çš„åŠ¨è¯å’Œç»“æ„çš„ç®€å•æ–¹æ³•ï¼Œä½¿ç”¨ç©ºæ ¼å’Œå›è½¦ç¬¦æ¥åŒºåˆ†ã€‚è¿™ç§æ–¹æ³•å¯èƒ½ä¹Ÿé€‚ç”¨äºå…¶ä»–åè®®ï¼Œå¦‚ DNSã€POP3 æˆ– SMTPã€‚å½“æ•°æ®åŠ å¯†æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ç§è§£å¯†çš„æ–¹æ³•ï¼Œç„¶åæ‰èƒ½è§£ææ•°æ®ï¼ˆè¿™è¶…å‡ºäº†æˆ‘çš„èƒ½åŠ›&amp;hellip;ï¼‰ã€‚ä½†æ˜¯ï¼Œæˆ‘å¸Œæœ›è¿™ä¼šæ¿€å‘ä½ æ›´å¤šåœ°å°è¯•ä½¿ç”¨ eBPF æ¥è§£æå’Œæ“ä½œåº”ç”¨ç¨‹åºçš„æƒ³æ³•ï¼&lt;/p&gt;
&lt;p&gt;æˆ‘ä¸€ç›´æƒ³å†™ä¸€äº›æœ‰å¸Œæœ›æœ‰ç”¨çš„å…³äº eBPF çš„å¸–å­ï¼Œå°½ç®¡é€šå¸¸åœ¨æˆ‘æƒ³å‡ºå¯èƒ½æœ‰ç”¨çš„ä¸œè¥¿ä¹‹åï¼Œåˆ«äººå·²ç»æŠ¢å…ˆä¸€æ­¥ã€‚é‰´äºæˆ‘å·²ç»åœ¨ä¸€æ®µæ—¶é—´é‡Œä»¥æŸç§æ–¹å¼å…³æ³¨ç½‘ç»œï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æˆ‘å…³æ³¨çš„é¢†åŸŸï¼Œå°½ç®¡æˆ‘ç¡®å®ä¸ºæœ€è¿‘çš„ eBPF å³°ä¼š 2023 ç¼–å†™äº†ä¸€äº›æœ‰è¶£çš„å†…å®¹ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæœ‰å¾ˆå¤šäººå¼€å§‹æ’°å†™ eBPF å†…å®¹ï¼Œæ‰€ä»¥æˆ‘å¯èƒ½ä¼šå‚è€ƒä»–ä»¬çš„å¸–å­ï¼Œè€Œä¸æ˜¯é‡å¤å†…å®¹ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•ç”¨ eBPF æ”¹å˜ç½‘ç»œç¼–ç¨‹çš„æ¸¸æˆè§„åˆ™</title>
      <link>https://cloudnativecn.com/blog/ebpf-adventures-in-networking/</link>
      <pubDate>Wed, 10 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/ebpf-adventures-in-networking/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thebsdbox.co.uk/2023/11/18/eBPF-adventures-in-networking/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;eBPF adventures in networking&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡æ–‡ç« ä»‹ç»äº† eBPF åœ¨ç½‘ç»œé¢†åŸŸçš„ä¸€äº›åº”ç”¨å’Œå®è·µï¼ŒåŒ…æ‹¬ XDPã€TC å’Œ sysprobes ä¸‰ç§ä¸åŒçš„ eBPF ç¨‹åºæŒ‚è½½æ–¹å¼çš„ä¼˜ç¼ºç‚¹ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ eBPF å®ç°ç½‘ç»œæ•°æ®çš„æ•è·ã€åˆ†æå’Œä¿®æ”¹ã€‚ä½œè€…è¿˜åˆ†äº«äº†ä¸€äº›æœ‰ç”¨çš„ eBPF å·¥å…·å’Œèµ„æºï¼Œä»¥åŠè‡ªå·±å¼€å‘çš„ä¸€ä¸ª eBPF ç½‘ç»œä»£ç†çš„é¡¹ç›®ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æˆ‘ä¸€ç›´æƒ³å†™ä¸€äº›å…³äº eBPF çš„å¸–å­ï¼Œå¸Œæœ›å®ƒä»¬èƒ½æœ‰æ‰€å¸®åŠ©ï¼Œå°½ç®¡é€šå¸¸åœ¨æˆ‘æƒ³åˆ°å¯èƒ½æœ‰ç”¨çš„ä¸œè¥¿æ—¶ï¼Œå…¶ä»–äººå·²ç»å…ˆæˆ‘ä¸€æ­¥äº†ã€‚é‰´äºæˆ‘å·²ç»åœ¨ç½‘ç»œæ–¹é¢é›†ä¸­ç²¾åŠ›ä¸€æ®µæ—¶é—´ï¼Œè¿™åŸºæœ¬ä¸Šæ˜¯æˆ‘ä¸“æ³¨çš„é¢†åŸŸï¼Œå°½ç®¡æˆ‘ç¡®å®è®¾æ³•ä¸ºæœ€è¿‘çš„ eBPF å³°ä¼š 2023 å‡†å¤‡äº†ä¸€äº›æˆ‘è®¤ä¸ºå¾ˆæœ‰è¶£çš„ä¸œè¥¿ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æåˆ°çš„ï¼Œæœ‰å¾ˆå¤šäººå¼€å§‹æ’°å†™å…³äº eBPF çš„å†…å®¹ï¼Œå› æ­¤æˆ‘å¯èƒ½ä¼šå‚è€ƒä»–ä»¬çš„å¸–å­ï¼Œè€Œä¸æ˜¯é‡å¤å†…å®¹ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å°†ä»ä¸€äº›åœ¨ Linux å†…æ ¸ä¸­å¯èƒ½æˆ–å¯èƒ½ä¸ä¼šé‡åˆ°çš„é¦–å­—æ¯ç¼©å†™æˆ–æŠ€æœ¯å¼€å§‹ã€‚ä½†åŸºæœ¬ä¸Šä»æˆ‘çš„è§’åº¦æ¥çœ‹ï¼Œè¿™äº›æ˜¯ä½ ä¿®æ”¹æ­£åœ¨è¿è¡Œçš„ç³»ç»Ÿä»¥ä¸ç½‘ç»œæ•°æ®äº¤äº’çš„ä¸»è¦é€‰é¡¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;xdp&#34;&gt;XDP&lt;/h3&gt;
&lt;p&gt;å…³äº eXpress Data Plane å·²ç»å­˜åœ¨å¤§é‡ä¿¡æ¯ï¼Œå› æ­¤æˆ‘ä¸ä¼šæ·±å…¥æ¢è®¨å¤ªå¤šç»†èŠ‚ã€‚&lt;code&gt;tl;dr&lt;/code&gt;æ˜¯ XDP eBPF ç¨‹åºæŒ‚é’©åˆ° XDP å°†ä½¿å…¶èƒ½å¤Ÿè®¿é—®ç”±å†…æ ¸è‡ªèº«å¤„ç†ä¹‹å‰çš„ä¼ å…¥ç½‘ç»œå¸§ã€‚åœ¨æŸäº›æƒ…å†µä¸‹ï¼ŒeBPF ç¨‹åºå°†åŠ è½½åˆ° NIC é©±åŠ¨ç¨‹åºæœ¬èº«ä¸­ï¼Œè¿™å°†æœ‰æ•ˆåœ°å°†ç¨‹åºå¸è½½åˆ° NIC æœ¬èº«ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹&#34;&gt;ä¼˜ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æœ€ä½³æ€§èƒ½&lt;/li&gt;
&lt;li&gt;éå¸¸é€‚ç”¨äºé˜²ç«å¢™ã€DDoS é˜²æŠ¤æˆ–è´Ÿè½½å‡è¡¡ç­‰ç”¨ä¾‹&lt;/li&gt;
&lt;li&gt;åœ¨ä»»ä½•å…¶ä»–å†…å®¹è¿›è¡Œä¿®æ”¹ä¹‹å‰çœ‹åˆ°ä¼ å…¥çš„æµé‡&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¼ºç‚¹&#34;&gt;ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;ä»…æ”¯æŒå…¥ç«™æµé‡ï¼Œä½¿ç”¨ XDP ç¨‹åºçœ‹åˆ°çš„ä»»ä½•æµé‡éƒ½åªæ˜¯ä¼ å…¥æµé‡ï¼Œç›®å‰æ— æ³•çœ‹åˆ°å‡ºç«™æµé‡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;XDP&lt;/code&gt;æ•°æ®ç»“æ„ï¼Œä¸å¤§å¤šæ•°å¥—æ¥å­—ç¼–ç¨‹çš„é»˜è®¤æ•°æ®ç»“æ„&lt;code&gt;SKB&lt;/code&gt;æœ‰ä¸€äº›ä¸åŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;tctraffic-controlæˆ–æµé‡æ§åˆ¶&#34;&gt;TCï¼ˆTraffic Controlï¼‰æˆ–æµé‡æ§åˆ¶&lt;/h3&gt;
&lt;p&gt;Traffic Control æ˜¯å†…æ ¸ç½‘ç»œç»“æ„çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä¸»è¦åŒ…æ‹¬æ·»åŠ è¯¸å¦‚ qdisc å’Œè¿‡æ»¤å™¨ä¹‹ç±»çš„åŠŸèƒ½åˆ°æ¥å£çš„èƒ½åŠ›ã€‚qdisc ä¸»è¦é›†ä¸­åœ¨ä¸º TBDï¼ˆå¾…å®šï¼‰æä¾›æœåŠ¡ï¼Œè€Œè¿‡æ»¤å™¨é€šå¸¸åœ¨åº•å±‚å®é™…ä¸Šæ˜¯ä¸€ä¸ª eBPF ç¨‹åºã€‚&lt;/p&gt;
&lt;p&gt;å¸¸è§çš„å·¥ä½œæµç¨‹æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªå…³æ³¨å…¥å£æˆ–å‡ºå£çš„ qdiscï¼Œæˆ–è€…æ›¿æ¢ä¸€ä¸ªç°æœ‰çš„ qdiscã€‚qdisc å°†é™„åŠ åˆ°æ¥å£ä¸Šã€‚&lt;/li&gt;
&lt;li&gt;åŠ è½½ä½ çš„ eBPF ç¨‹åºã€‚&lt;/li&gt;
&lt;li&gt;åˆ›å»ºä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œå°†å…¶é™„åŠ åˆ°é€šè¿‡æ¥å£ä¸Šçš„ qdisc ä¸Šçš„å…¥å£æˆ–å‡ºå£ä¹‹ä¸€ã€‚è¯¥è¿‡æ»¤å™¨å°†ä¸ eBPF ç¨‹åºç›¸å…³è”ï¼Œè¿™æ„å‘³ç€æ‰€æœ‰ä¼ å…¥æˆ–ä¼ å‡ºçš„æµé‡ç°åœ¨éƒ½ä¼šé€šè¿‡ä¸€ä¸ªç¨‹åºè¿è¡Œï¼ˆå¦‚æœè¿æ¥ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è·åˆ© ğŸ’°&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;ä¼˜ç‚¹-1&#34;&gt;ä¼˜ç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;æä¾›å…¥å£å’Œå‡ºå£çš„æŒ‚é’©ç‚¹&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ä¼ ç»Ÿçš„&lt;code&gt;SKB&lt;/code&gt;æ•°æ®ç»“æ„&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç¼ºç‚¹-1&#34;&gt;ç¼ºç‚¹&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;å°† TC ç¨‹åºé™„åŠ åˆ°å…¥å£æˆ–å‡ºå£é˜Ÿåˆ—ç¨å¾®å¤æ‚ä¸€äº›ã€‚ç”¨æˆ·éœ€è¦ä½¿ç”¨ qdisc æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼ŒæŸäº› eBPF SDK ä¸ä¼šåŸç”Ÿæ”¯æŒ TC ç¨‹åºçš„ä½¿ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;TC eBPF ç¨‹åºçœ‹åˆ°çš„æµé‡å¯èƒ½å·²ç»è¢«ä¹‹å‰çš„ XDP ç¨‹åºæˆ–å†…æ ¸æœ¬èº«ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ç³»ç»Ÿè°ƒç”¨&#34;&gt;ç³»ç»Ÿè°ƒç”¨&lt;/h3&gt;
&lt;p&gt;ä¸å…¶ä»–ä¸¤ç§ä¸“é—¨è®¾è®¡ç”¨äºå¤„ç†ç½‘ç»œçš„æ–¹æ³•ç›¸æ¯”ï¼Œè¿™å¯èƒ½ä¼šæ˜¾å¾—æœ‰äº›å¥‡æ€ªï¼Œå› ä¸ºå®ƒæ˜¯å°†ä¸€äº› eBPF ä»£ç é™„åŠ åˆ°å†…æ ¸ä¸­çš„ç³»ç»Ÿè°ƒç”¨çš„ä¸€ç§æ›¿ä»£æ–¹æ³•ï¼Œå…·ä½“æ¥è¯´æ˜¯&lt;code&gt;tcp4_connect()&lt;/code&gt; / &lt;code&gt;tcp6_connect()&lt;/code&gt;ç­‰è°ƒç”¨ã€‚è¿™åœ¨åè®®æ ˆä¸­ç•¥å¾®é åï¼Œå› ä¸ºåœ¨æ­¤æ—¶ï¼Œä¼ å…¥æ•°æ®åŒ…å·²ç»ç»è¿‡äº†å¾ˆå¤šå†…æ ¸é€»è¾‘ï¼Œè€Œ eBPF å†…çœç‚¹æ˜¯å½“æµé‡å³å°†ä¸åº”ç”¨ç¨‹åºæœ¬èº«äº¤äº’æ—¶ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç¼–å†™ç½‘ç»œç¨‹åº&#34;&gt;ç¼–å†™ç½‘ç»œç¨‹åºï¼&lt;/h2&gt;
&lt;p&gt;æ‰€ä»¥åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œæˆ‘ä»¬ï¼ˆå¸Œæœ›ï¼‰æ„è¯†åˆ°æˆ‘ä»¬æœ‰è®¸å¤šä¸åŒçš„å…¥å£ç‚¹ï¼Œå…è®¸æˆ‘ä»¬åœ¨â€œä¼ é€å¸¦â€ä¸Šæ³¨å…¥æˆ‘ä»¬çš„ä»£ç ï¼Œè¿™ä¸ªä¼ é€å¸¦ä» NIC å¼€å§‹ï¼Œä¸€ç›´åˆ°åº”ç”¨ç¨‹åºï¼ˆä»¥åŠåœ¨å‡ºç«™çš„æƒ…å†µä¸‹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å›é¡¾&#34;&gt;å›é¡¾&lt;/h3&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬æ‰€è°“çš„â€œä¼ é€å¸¦â€çš„å¼€å¤´ï¼Œæˆ‘ä»¬å¯ä»¥é™„åŠ æˆ‘ä»¬çš„ XDP ç¨‹åºå¹¶è·å¾—æœªç»è§¦ç¢°çš„åŸå§‹ç½‘ç»œæ•°æ®ã€‚åœ¨â€œä¼ é€å¸¦â€çš„ä¸­é—´ï¼Œæˆ‘ä»¬çš„ TC ç¨‹åºå°†æˆä¸ºé€šè¿‡å†…æ ¸çš„è·¯å¾„çš„ä¸€éƒ¨åˆ†ï¼Œå¹¶æ¥æ”¶å¯èƒ½è¢«ä¿®æ”¹çš„ç½‘ç»œæ•°æ®ã€‚åœ¨ä¼ é€å¸¦çš„æœ«ç«¯ï¼Œæˆ‘ä»¬å¯ä»¥å°†ä»£ç é™„åŠ åˆ°åº”ç”¨ç¨‹åºå°†åœ¨å®ƒè¢«è¿è¡Œä¹‹å‰è·å–ç½‘ç»œæ•°æ®çš„å‡½æ•°ï¼Œè¿™äº›å‡½æ•°å¯ä»¥åœ¨ä¼ é€å¸¦çš„æœ«ç«¯è¿›è¡Œé™„åŠ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®è¡¨ç¤º&#34;&gt;æ•°æ®è¡¨ç¤º&lt;/h3&gt;
&lt;p&gt;ä½ çš„ç¨‹åºé™„åŠ åˆ°çš„ä½ç½®å†³å®šäº†ä¸¤ä¸ªä¸»è¦äº‹ç‰©ï¼Œä¸€ä¸ªæ˜¯æ½œåœ¨çš„æµé‡ä¿®æ”¹çš„ç›¸å¯¹çº§åˆ«ï¼Œå¦ä¸€ä¸ªæ˜¯æµé‡çš„è¡¨ç¤ºæ–¹å¼ã€‚&lt;/p&gt;
&lt;h3 id=&#34;xdp-ç»“æ„&#34;&gt;XDP ç»“æ„&lt;/h3&gt;
&lt;p&gt;æˆ‘ä¼šå†™å…³äºå®ƒçš„å†…å®¹ï¼Œä½†æ˜¯ DataDog å·²ç»åšäº†ï¼Œä½ å¯ä»¥åœ¨&lt;a href=&#34;https://www.datadoghq.com/blog/xdp-intro/#the-flow-of-an-xdp-program&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;é˜…è¯»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;skbå¥—æ¥å­—ç¼“å†²åŒº&#34;&gt;SKBï¼ˆå¥—æ¥å­—ç¼“å†²åŒºï¼‰&lt;/h3&gt;
&lt;p&gt;SKB æ˜¯åœ¨ eBPF æ·»åŠ åˆ°å†…æ ¸ä¹‹å‰å°±å­˜åœ¨äºå†…æ ¸ä¸­çš„æ•°æ®ç±»å‹ï¼Œå®ƒå·²ç»å…·å¤‡äº†ä¸€äº›ä½¿ä¸ SKB å¯¹è±¡äº¤äº’å˜å¾—ç¨å¾®å®¹æ˜“ä¸€äº›çš„è¾…åŠ©åŠŸèƒ½ã€‚æœ‰å…³æ›´æ·±å…¥çš„ SKB ä»‹ç»ï¼Œä½ å¯ä»¥é˜…è¯»æ­¤æ–‡ -&amp;gt; &lt;a href=&#34;http://vger.kernel.org/~davem/skb_data.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;http://vger.kernel.org/~davem/skb_data.html&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;è§£ææ•°æ®&#34;&gt;è§£ææ•°æ®&lt;/h3&gt;
&lt;p&gt;æ— è®ºä¸å“ªä¸ªç»“æ„è¿›è¡Œäº¤äº’ï¼Œå®ƒä»¬éƒ½å…±äº«ä¸€äº›å…±åŒä¹‹å¤„ï¼Œè¿™ä¸»è¦æ˜¯ä¸¤ä¸ªå˜é‡ï¼Œå¯¹äºè¿™ä¸¤ç§æ•°æ®ç±»å‹æ¥è¯´æ˜¯ç›¸åŒçš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›å˜é‡æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;data&lt;/code&gt;ï¼Œå®ƒæ˜¯ eBPF ç¨‹åºæ¥æ”¶åˆ°çš„æ•°æ®çš„æŒ‡é’ˆ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;data_len&lt;/code&gt;ï¼Œå®ƒæ˜¯ä¸€ä¸ªæ•´æ•°ï¼ŒæŒ‡å®šäº†æœ‰å¤šå°‘æ•°æ®å¯ç”¨ï¼ˆä»¥å¸®åŠ©ç¡®ä¿ä½ æ°¸è¿œä¸ä¼šè®¿é—®&lt;code&gt;data&lt;/code&gt;è¶…è¿‡&lt;code&gt;data_len&lt;/code&gt;ï¼ˆæ˜¾è€Œæ˜“è§çš„çœŸç† ğŸ¤“ï¼‰ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æ‰€ä»¥è¿™ä¸€åˆ‡ä¼¼ä¹å¾ˆç®€å•ï¼Œä½†ç­‰ç­‰&amp;hellip; &lt;code&gt;*data&lt;/code&gt;ä¸­å®é™…ä¸Šæœ‰ä»€ä¹ˆï¼Ÿï¼ˆè¿™å–å†³äºä½ çš„å‘ç°ï¼‰&lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸æ–­â€œè½¬æ¢â€&lt;code&gt;*data&lt;/code&gt;å¹¶æ²¿ç€å®ƒç§»åŠ¨ä»¥å‰¥ç¦»å„ç§æ ‡å¤´ï¼Œæˆ‘ä»¬å¯ä»¥äº†è§£å’ŒæŸ¥æ‰¾åº•å±‚æ•°æ®ï¼&lt;/p&gt;
&lt;h3 id=&#34;è½¬æ¢&#34;&gt;è½¬æ¢ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¦‚æœä½ æ„¿æ„ï¼Œä½ å¯ä»¥è·³è¿‡æ­¤éƒ¨åˆ†ï¼Œä½†è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿï¼ˆä¸”ç³Ÿç³•ï¼‰çš„ç¤ºä¾‹ï¼Œè¯´æ˜äº†æˆ‘ä»¬é€šå¸¸å¦‚ä½•å°†ä¸€äº›åŸå§‹æ•°æ®è½¬æ¢ä¸ºæœ‰æ„ä¹‰çš„ä¸œè¥¿ã€‚ç›®å‰ï¼Œ&lt;code&gt;*data&lt;/code&gt;å°†åªæ˜¯ä¸€ä¸²éšæœºæ•°æ®ï¼Œæ¯«æ— æ„ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰æ•ˆåœ°ä¸ºå…¶æ·»åŠ â€œæ ¼å¼â€ä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ç†è§£å…¶å¤–è§‚ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘ä¸€ä¸‹éšæœºæ•°æ®è¡Œï¼šâ€œBobby0004500100.503 Harvard Drive90210â€ï¼Œå…¶ä¸­ä¸€äº›å¯¹è£¸çœ¼æ¥è¯´æ˜¯æœ‰æ„ä¹‰çš„ï¼Œä½†æœ‰äº›æ˜¯ä¸æ¸…æ¥šçš„ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³è±¡ä¸€ä¸‹åä¸ºâ€œpersonâ€çš„æ•°æ®ç»“æ„ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name: string
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Age: number
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Balance: float
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Street: string
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ZipCode: number
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å¦‚æœæˆ‘ä»¬è¦å°†æˆ‘ä»¬çš„éšæœºæ•°æ®â€œè½¬æ¢â€ä¸ºä¸Šé¢çš„â€œpersonâ€ç»“æ„ï¼Œå®ƒå°†çªç„¶å˜æˆï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Name: Bobby
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Age: &lt;span class=&#34;m&#34;&gt;45&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Balance: 100.50
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;Street: &lt;span class=&#34;m&#34;&gt;3&lt;/span&gt; Harvard Drive
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;ZipCode: &lt;span class=&#34;m&#34;&gt;90210&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç°åœ¨çªç„¶é—´ï¼Œæˆ‘èƒ½å¤Ÿç†è§£å¹¶è®¿é—®ç»“æ„ä¸­çš„åº•å±‚å˜é‡ï¼Œå› ä¸ºå®ƒä»¬ç°åœ¨æ˜¯æœ‰æ„ä¹‰çš„ï¼Œå³ person-&amp;gt;Nameï¼Œå¹¶ä¸”å‘ç°æ­¤ç‰¹å®šçš„ person ç±»å‹å¯¹è±¡å…·æœ‰åç§°å˜é‡â€œBobbyâ€ï¼&lt;/p&gt;
&lt;p&gt;è¿™æ­£æ˜¯æˆ‘ä»¬å°†å¯¹æˆ‘ä»¬çš„&lt;code&gt;*data&lt;/code&gt;æ‰€åšçš„ï¼&lt;/p&gt;
&lt;h3 id=&#34;æ•°æ®ä¸­åŒ…å«ä»€ä¹ˆ&#34;&gt;æ•°æ®ä¸­åŒ…å«ä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å› æ­¤ï¼Œç¬¬ä¸€æ­¥æ˜¯ç¡®å®šæ•°æ®æ˜¯å¦ä»¥ä»¥å¤ªç½‘å¸§å¼€å¤´ï¼å‡ ä¹æ‰€æœ‰ä¼ è¾“çš„æ•°æ®éƒ½ä»¥ä»¥å¤ªç½‘å¸§å¼€å¤´ï¼Œè¿™ç›¸å½“ç®€å•ï¼Œä½†å…¶ä½œç”¨æ˜¯å…·æœ‰æºå’Œç›®æ ‡ç¡¬ä»¶åœ°å€ï¼ˆæ— è®ºè™šæ‹ŸåŒ–/å®¹å™¨åŒ–/æœ‰çº¿ç½‘ç»œè¿˜æ˜¯ WiFi å¦‚ä½•ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€æ­¥æ˜¯å°†æˆ‘ä»¬çš„&lt;code&gt;*data&lt;/code&gt;è½¬æ¢ä¸ºç±»å‹&lt;code&gt;ETHHDR&lt;/code&gt;ï¼Œå¦‚æœæˆåŠŸï¼Œæˆ‘ä»¬ç°åœ¨å°†èƒ½å¤Ÿäº†è§£ç»„æˆä»¥å¤ªç½‘å¤´æ•°æ®ç±»å‹çš„å˜é‡ã€‚è¿™äº›åŒ…æ‹¬æºå’Œç›®æ ‡ MAC åœ°å€ï¼Œä½†æ›´é‡è¦çš„æ˜¯å‰©ä½™æ•°æ®çš„å†…å®¹æ˜¯ä»€ä¹ˆã€‚å†æ¬¡ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»¥å¤ªç½‘å¤´ä¹‹åçš„&lt;code&gt;*data&lt;/code&gt;å†…å®¹é€šå¸¸æ˜¯ IP å¤´ï¼Œä½†æˆ‘ä»¬å°†é€šè¿‡æ£€æŸ¥ä»¥å¤ªç½‘å¸§çš„ TBD å˜é‡æ¥éªŒè¯ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬éªŒè¯ä¸‹ä¸€ç»„æ•°æ®æ˜¯ IP å¤´ï¼Œæˆ‘ä»¬å°†éœ€è¦å°†ä»¥å¤ªç½‘å¤´ä¹‹åçš„æ•°æ®è½¬æ¢ä¸º IPHDR ç±»å‹ã€‚ä¸€æ—¦æˆ‘ä»¬è¿™æ ·åšï¼Œæˆ‘ä»¬å°†èƒ½å¤Ÿè®¿é—® IP ç‰¹å®šçš„æ•°æ®ï¼Œä¾‹å¦‚æº IPï¼ˆ&lt;code&gt;saddr&lt;/code&gt;ï¼‰æˆ–ç›®æ ‡åœ°å€ï¼ˆ&lt;code&gt;daddr&lt;/code&gt;ï¼‰ï¼Œå†æ¬¡é‡è¦çš„æ˜¯ IP å¤´åŒ…å«ä¸€ä¸ªå˜é‡ï¼Œè¯¦ç»†è¯´æ˜äº† IP å¤´ä¹‹åçš„æ•°æ®æ˜¯ä»€ä¹ˆã€‚è¿™é€šå¸¸æ˜¯ TCP å¤´æˆ– UDP å¤´ï¼Œä½†è¿˜æœ‰å…¶ä»–é€‰æ‹©ï¼Œä¾‹å¦‚ sctp ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æˆ‘ä»¬æŸ¥çœ‹äº† IP å¤´çš„å†…éƒ¨å¹¶ç¡®å®šæ•°æ®ç±»å‹æ˜¯ TCPï¼ˆä¹Ÿå¯èƒ½æ˜¯ UDP æˆ–å…¶ä»–å†…å®¹ï¼‰ï¼Œæˆ‘ä»¬å°†æŠŠä»¥å¤ªç½‘å¤´å’Œ IP å¤´ä¹‹åçš„æ•°æ®éƒ½è½¬æ¢ä¸º TCP å¤´ç±»å‹ï¼ï¼ˆå‡ ä¹å®Œæˆäº†ï¼‰ã€‚é€šè¿‡è®¿é—® TCP å¤´çš„å†…å®¹ï¼Œæˆ‘ä»¬å¯ä»¥è·å¾— TCP ç‰¹å®šçš„æ•°æ®ï¼Œä¾‹å¦‚æºç«¯å£æˆ–ç›®æ ‡ç«¯å£ï¼Œç”¨äºéªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§çš„æ ¡éªŒå’Œä»¥åŠå…¶ä»–æœ‰ç”¨çš„å˜é‡ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬å‡ ä¹æ‹¥æœ‰ä¸€åˆ‡ï¼Œä½†æ˜¯ TCP å¤´çš„é•¿åº¦å¯èƒ½æ˜¯å¯å˜çš„ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦é€šè¿‡æŸ¥çœ‹ tcl_len å˜é‡æ¥ç¡®å®šè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶ä¹˜ä»¥ 4ã€‚ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†è®¿é—®æœ€ç»ˆæ•°æ®æ‰€éœ€çš„ä¸€åˆ‡ï¼&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œ&lt;code&gt;*data&lt;/code&gt;æŒ‡å‘æ•°æ®çš„å¼€å¤´ï¼æˆ‘ä»¬å·²ç»ç¡®å®šäº†ä»¥å¤ªç½‘å¤´ä¹‹åæ˜¯ IP å¤´ï¼Œæœ€åæ˜¯ TCP å¤´ï¼Œè¿™æ„å‘³ç€`*data + ä»¥å¤ªç½‘å¤´ + IP å¤´ + TCP å¤´ = å®é™…åº”ç”¨ç¨‹åºæ•°æ®ï¼&lt;/p&gt;
&lt;h3 id=&#34;æˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›ä¿¡æ¯åšä»€ä¹ˆ&#34;&gt;æˆ‘ä»¬å¯ä»¥ç”¨è¿™äº›ä¿¡æ¯åšä»€ä¹ˆï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å½“æˆ‘ä»¬è§£æå„ç§æ ‡å¤´æ—¶ï¼Œå®é™…ä¸Šåœ¨ OSI æ¨¡å‹çš„ä¸åŒå±‚æ¬¡ä¸Šè§£é”äº†è¶Šæ¥è¶Šå¤šçš„ä¿¡æ¯ï¼&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ç¬¬ 2 å±‚]&lt;/strong&gt; ä»¥å¤ªç½‘å¤´ä¸ºæˆ‘ä»¬æä¾›äº†æºå’Œç›®æ ‡ç¡¬ä»¶åœ°å€ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ­¤ä¿¡æ¯æ¥æ½œåœ¨åœ°é˜»æ­¢ä»æˆ‘ä»¬çŸ¥é“å±é™©çš„æº MAC åœ°å€å¤„ç†çš„å¸§ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ç¬¬ 3 å±‚]&lt;/strong&gt; IP å¤´åŒ…å«æºå’Œç›®æ ‡ IP åœ°å€ï¼Œå†æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åƒé˜²ç«å¢™ä¸€æ ·è¿ä½œï¼Œé€šè¿‡ä½¿ç”¨ eBPF ç¨‹åºä¸¢å¼ƒç‰¹å®š IP åœ°å€çš„æ‰€æœ‰æµé‡ã€‚æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ® IP åœ°å€é‡å®šå‘æµé‡ï¼Œæˆ–è€…ç”šè‡³åœ¨è¿™ä¸€å±‚å®æ–½è´Ÿè½½å‡è¡¡é€»è¾‘ï¼Œä»¥å°†æµé‡é‡å®šå‘åˆ°å…¶ä»–åº•å±‚ IP åœ°å€é›†åˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ç¬¬ 4 å±‚]&lt;/strong&gt; TCP æˆ– UDP æ ‡å¤´å®šä¹‰äº†ç›®æ ‡ç«¯å£å·ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™äº›ä¿¡æ¯æ¥ç¡®å®šåº”ç”¨ç¨‹åºåè®®æ˜¯ä»€ä¹ˆï¼ˆå³ç«¯å£ 80 é€šå¸¸æ„å‘³ç€å‰©ä½™çš„*data å¯èƒ½æ˜¯ HTTP æ•°æ®ï¼‰ã€‚åœ¨è¿™ä¸€å±‚ï¼Œæˆ‘ä»¬é€šå¸¸ä¼šæ‰§è¡Œè´Ÿè½½å‡è¡¡ç­‰æ“ä½œï¼ŒåŸºäºç›®æ ‡ï¼ˆå³åœ¨å¤šä¸ªå…¶ä»–è´Ÿè½½å‡è¡¡å™¨åœ°å€ä¹‹é—´å¹³è¡¡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;[ç¬¬ 7 å±‚]&lt;/strong&gt; æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œå„ç§æ ‡å¤´é›†åˆçš„æœ«å°¾çš„æ•°æ®æ˜¯å®é™…çš„åº”ç”¨ç¨‹åºæ•°æ®ï¼Œåªè¦æˆ‘ä»¬çŸ¥é“æ ¼å¼ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥è§£æå®ƒã€‚ä¾‹å¦‚ï¼Œå¦‚æœå¤–éƒ¨ Web æµè§ˆå™¨å°è¯•è®¿é—®æˆ‘çš„è®¡ç®—æœºä¸Šçš„&lt;code&gt;/index.html&lt;/code&gt;å¹¶é™„åŠ äº† eBPF ç¨‹åºï¼Œæˆ‘ä¼šè§£æåˆ° TCPï¼Œç„¶åç¡®å®šå®ƒæ˜¯ç«¯å£ 80ï¼Œç„¶ååº”ç”¨ç¨‹åºæ•°æ®åº”è¯¥æ˜¯ HTTP æ ¼å¼ã€‚æˆ‘å¯ä»¥é€šè¿‡æŸ¥çœ‹åº”ç”¨ç¨‹åºæ•°æ®çš„å‰ä¸‰ä¸ªå­—ç¬¦ï¼ˆåœ¨æ‰€æœ‰æ ‡å¤´ä¹‹åï¼‰æ¥éªŒè¯è¿™ä¸€ç‚¹ï¼Œä½¿ç”¨ä»¥ä¸‹ä¼ªä»£ç ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nv&#34;&gt;ApplicationData&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; EthernetHDR + IPHDR + TCPHDR // å°†æ‰€æœ‰æ ‡å¤´é•¿åº¦ç›¸åŠ ä»¥æ‰¾åˆ°æ•°æ®
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;If &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt; data&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ApplicationData&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;G&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; data&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ApplicationData+1&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;E&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;amp;&amp;amp;&lt;/span&gt; data&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;ApplicationData+2&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;T&amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// è¿™æ˜¯ä¸€ä¸ªHTTP GETè¯·æ±‚
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;	// åšä¸€äº›ä»¤äººå…´å¥‹çš„äº‹æƒ…
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;ç°åœ¨æˆ‘ä»¬â€œæœ‰ç‚¹â€ç†è§£äº†è¿™ä¸ªé€»è¾‘ï¼Œä¹Ÿè®¸æˆ‘ä»¬åº”è¯¥è€ƒè™‘å®æ–½ä¸€äº›ä»£ç æ¥å®Œæˆæ‰€æœ‰è¿™äº›&amp;hellip;ä½†è¿™å°†æ˜¯å¦ä¸€å¤©çš„äº‹æƒ…ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>äº‘åŸç”Ÿè½¯ä»¶çš„å…³é”®ç”¨ä¾‹å®‰å…¨ä¿éšœä¹‹é“</title>
      <link>https://cloudnativecn.com/blog/securing-cloud-natives-most-important-use-cases/</link>
      <pubDate>Wed, 10 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/securing-cloud-natives-most-important-use-cases/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&#34;https://www.chainguard.dev/unchained/securing-cloud-natives-most-important-use-cases&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Securing cloud nativeâ€™s most important use cases&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šäº‘åŸç”Ÿè½¯ä»¶å¼€å‘æ„å‘³ç€ä¸ºå…¬æœ‰äº‘å’Œç§æœ‰äº‘çš„ç‰¹æ€§ä¼˜åŒ–åº”ç”¨å’Œç¯å¢ƒã€‚Chainguard æ—¨åœ¨æä¾›ä¸å½±å“å¼€å‘è€…ä½“éªŒçš„è½¯ä»¶ä¾›åº”é“¾å®‰å…¨å·¥å…·ï¼Œé€šè¿‡æä¾›æœ€å°åŒ–ã€å¼ºåŒ–çš„å®¹å™¨é•œåƒï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå‡†ç¡®åœ°æ‰«ææ¼æ´å¹¶æ¶ˆé™¤ CVE è­¦æŠ¥ã€‚æœ¬æ–‡ä»‹ç»äº† Chainguard Images ä¸º Istio å’Œ Cilium è¿™ä¸¤ä¸ªäº‘åŸç”ŸåŸºç¡€æŠ€æœ¯æä¾›çš„å®‰å…¨å¢å¼ºæ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä»æ ¹æœ¬ä¸Šè¯´ï¼Œæ„å»ºäº‘åŸç”Ÿè½¯ä»¶æ„å‘³ç€æ„å»ºé’ˆå¯¹å…¬å…±å’Œç§æœ‰äº‘ç‰¹æ€§è¿›è¡Œä¼˜åŒ–çš„åº”ç”¨ç¨‹åºå’Œç¯å¢ƒã€‚å¼€å‘äº‘åŸç”Ÿè½¯ä»¶æ„å‘³ç€ç®¡ç†ä¸€å®šç¨‹åº¦çš„æ··ä¹±ï¼Œè¿™ä¸æ˜¯æ‰€æœ‰ç±»å‹çš„è½¯ä»¶éƒ½éœ€è¦çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™åœ¨æ–°çš„ä¸€å¹´å°¤å…¶é‡è¦ï¼Œæˆ‘ä»¬å¯ä»¥é¢„æœŸäº§å“å°†è¶‹å‘äºä¼˜å…ˆè€ƒè™‘å¼€å‘è€…ä½“éªŒï¼Œå¹¶ä¸”å¹³å°å·¥ç¨‹çš„å´›èµ·ã€‚è‰¯å¥½çš„å·¥ç¨‹å’Œå·¥å…·ä½¿å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºæ„å»ºå’Œåˆ›æ–°ã€‚å·²ç»æ„å»ºçš„æ‰€æœ‰å†…éƒ¨å¼€å‘è€…å¹³å°å’Œå³å°†æ¨å‡ºçš„å¹³å°éƒ½éœ€è¦å°½é‡å°†åŸºç¡€è®¾æ–½ç®¡ç†ä»å¼€å‘è€…é‚£é‡ŒæŠ½è±¡å‡ºæ¥ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ­£æ˜¯ Chainguard æƒ³è¦è§£å†³çš„é—®é¢˜é¢†åŸŸï¼Œç‰¹åˆ«æ˜¯åœ¨å®‰å…¨æ€§å’Œæ¼æ´ç®¡ç†æ–¹é¢ã€‚æˆ‘ä»¬è‡´åŠ›äºæä¾›ä¸å¦¨ç¢å¼€å‘è€…ä½“éªŒçš„å·¥å…·ï¼Œä»¥ç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨ã€‚æˆ‘ä»¬é€šè¿‡æä¾›æœ€å°åŒ–ã€åŠ å›ºçš„å®¹å™¨é•œåƒæ¥å®ç°è¿™ä¸€ç›®æ ‡ï¼Œè¿™ä½¿æˆ‘ä»¬çš„ç”¨æˆ·å¯ä»¥è·å¾—å‡†ç¡®çš„æ‰«æç»“æœï¼Œå¹¶å°† CVE æ”¶ä»¶ç®±è­¦æŠ¥é™è‡³é›¶ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¨å‡ºæ–°çš„-chainguard-images-æ†ç»‘åŒ…é€‚ç”¨äº-cilium-å’Œ-istio&#34;&gt;æ¨å‡ºæ–°çš„ Chainguard Images æ†ç»‘åŒ…ï¼Œé€‚ç”¨äº Cilium å’Œ Istio&lt;/h3&gt;
&lt;p&gt;ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å¯†åˆ‡å…³æ³¨æœ€å—æ¬¢è¿çš„å¼€æºé¡¹ç›®ï¼Œä½†ä¹Ÿå…³æ³¨é‚£äº›å¦‚æœç»è¿‡åŠ å›ºï¼Œå°†ä¸ºæ•´ä¸ªå¼€æºç”Ÿæ€ç³»ç»Ÿæä¾›é‡è¦çš„å®‰å…¨æ”¹è¿›çš„é¡¹ç›®ã€‚ä¸ºäº†åœ¨æ•´ä¸ªç”Ÿæ€ç³»ç»Ÿä¸­äº§ç”Ÿæœ€å¤§çš„å½±å“ï¼Œæˆ‘ä»¬åº”è¯¥å¸®åŠ©åŠ å›ºé‚£äº›ä½œä¸ºäº‘åŸç”Ÿè½¯ä»¶åŸºçŸ³çš„æŠ€æœ¯ã€‚Istio å’Œ Cilium æ­£æ˜¯è¿™æ ·çš„æ˜æ˜¾ç¤ºä¾‹ï¼Œå®ƒä»¬æ˜¯äº‘åŸç”Ÿè½¯ä»¶ç”Ÿæ€ç³»ç»Ÿçš„åŸºç¡€æ„å»ºæ¨¡å—ä¹‹ä¸€ã€‚é€šè¿‡æä¾›æ–°çš„ Chainguard Images Istio å’Œ Cilium æ†ç»‘åŒ…ï¼Œæˆ‘ä»¬ä¸ºè¿™äº›é¡¹ç›®çš„ç”¨æˆ·æä¾›äº†ä¸€ä¸ªå®‰å…¨åœ°å°†å®ƒä»¬å¼•å…¥å…¶æ„å»ºæµç¨‹çš„ç®€ä¾¿æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä»»ä½•ç»™å®šçš„ä¾›åº”é“¾ä¸­ï¼Œæœ‰äº›åŸææ–™æ¯”å…¶ä»–åŸææ–™æ›´ä¸ºåŸºç¡€ã€‚å¦‚æœè¿™äº›åŸææ–™å¾—åˆ°äº†å¦¥å–„ä¿æŠ¤ï¼Œé‚£ä¹ˆè¿™å°†å¯¹åç»­å·¥ä½œäº§ç”Ÿè¿é”æ•ˆåº”ï¼ˆæˆ–è€…å¦‚æœä½ æ„¿æ„çš„è¯ï¼Œå¯ä»¥è¯´æ˜¯å¯¹æ•´ä¸ªå †æ ˆäº§ç”Ÿä¸Šä¸‹æ¸¸å½±å“ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;Cilium å’Œ Istio æŠ€æœ¯éƒ½æ¶µç›–äº†å¯¹ Kubernetes ç¯å¢ƒå…·æœ‰åŸºç¡€ä½œç”¨çš„å„ç§ç”¨ä¾‹ã€‚Cilium å’Œ Istio æ˜¯ä¸¤ä¸ªæµè¡Œçš„å·¥å…·ï¼Œé€šè¿‡æä¾›æµé‡è·¯ç”±ã€è´Ÿè½½å¹³è¡¡ã€æœåŠ¡å‘ç°ç­‰åŠŸèƒ½æ¥å¸®åŠ©è§£å†³è¿™äº›æŒ‘æˆ˜ã€‚è¿™äº›åŠŸèƒ½å¯¹äºç¡®ä¿ Kubernetes å’Œå…¶ä»–äº‘åŸç”Ÿè½¯ä»¶éƒ¨ç½²çš„é¡ºåˆ©ã€é«˜æ•ˆå’Œå®‰å…¨è¿è¡Œè‡³å…³é‡è¦ã€‚æœ€ç»ˆï¼Œæ„å»ºäº‘åŸç”Ÿè½¯ä»¶æ„å‘³ç€åˆ›å»ºä¸“ä¸ºäº‘è®¾è®¡çš„åº”ç”¨ç¨‹åºï¼Œè€Œ Cilium å’Œ Istio åœ¨å¸®åŠ©å¼€å‘è€…å®ç°è¿™ä¸€ç›®æ ‡æ–¹é¢å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;istio-å’Œ-cilium-åœ¨äº‘è®¡ç®—ä¸­ä¸å¯æˆ–ç¼ºçš„ä½œç”¨&#34;&gt;Istio å’Œ Cilium åœ¨äº‘è®¡ç®—ä¸­ä¸å¯æˆ–ç¼ºçš„ä½œç”¨&lt;/h3&gt;
&lt;p&gt;æ ¹æ® 2022 å¹´çš„ &lt;a href=&#34;https://www.cncf.io/reports/cncf-annual-survey-2022/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CNCF å¹´åº¦è°ƒæŸ¥&lt;/a&gt;ï¼ŒIstio æ˜¯å—è®¿è€…ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„æœåŠ¡ç½‘æ ¼ï¼Œ73% çš„å—è®¿å…¬å¸ä½¿ç”¨å®ƒã€‚è¿™ç§å¹¿æ³›çš„é‡‡ç”¨è¯æ˜äº† Istio åœ¨è§£å†³å„ç§æœåŠ¡ç®¡ç†æŒ‘æˆ˜æ–¹é¢çš„æœ‰æ•ˆæ€§ï¼Œä½¿å…¶æˆä¸ºç°ä»£ä¼ä¸šå¯»æ±‚æ„å»ºå¼ºå¤§ã€å®‰å…¨å’Œå¯æ‰©å±•çš„å¾®æœåŠ¡æ¶æ„çš„é‡è¦å·¥å…·ã€‚Istio åœ¨ GitHub ä¸Šæ‹¥æœ‰è¶…è¿‡ 34,000 é¢—æ˜Ÿæ˜Ÿï¼Œä½¿å…¶æˆä¸º CNCF ä¸­æœ€å—æ¬¢è¿çš„é¡¹ç›®ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;ä»åŒä¸€ä»½ CNCF è°ƒæŸ¥ä¸­ï¼Œæœ‰ 47% çš„å—è®¿è€…å°† Cilium ä½œä¸ºä»–ä»¬å®¹å™¨ç¼–æ’å¹³å°ï¼ˆå¦‚ Kubernetesï¼‰çš„é¦–é€‰ç½‘ç»œæ’ä»¶ã€‚å®ƒä¹Ÿå—æ¬¢è¿äºç½‘ç»œå®‰å…¨é¢†åŸŸï¼Œæœ‰ 43% çš„å—è®¿è€…å°†å…¶ç”¨äºæ­¤ç›®çš„ã€‚eBPF çš„æœªæ¥å’ŒåŠ›é‡æ˜¯ä¸å¯æ€è®®çš„ï¼Œæ‰€æœ‰äººéƒ½åŒæ„è¿™ä¸€ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ï¼Œæˆ‘ä»¬æ¨å‡ºäº†æˆ‘ä»¬çš„æ–°çš„ &lt;a href=&#34;https://images.chainguard.dev/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Chainguard Images ç›®å½•&lt;/a&gt;ï¼Œè¿™æ˜¯ä¸€ä¸ªå…¬å¼€å¯ç”¨çš„ç½‘ç«™ï¼Œç”¨æˆ·å¯ä»¥åœ¨å…¶ä¸­æµè§ˆæˆ‘ä»¬åº“å­˜ä¸­çš„æ‰€æœ‰é•œåƒã€‚åœ¨æ¯ä¸ª Chainguard&lt;/p&gt;
&lt;p&gt;Image åˆ—è¡¨ä¸­ï¼Œä½ å°†æ‰¾åˆ°æœ‰å…³å®‰è£…ã€åŸºç¡€è®¾æ–½ã€ç­¾åå’Œ SBOM çš„æºæ•°æ®çš„ç›¸å…³ä¿¡æ¯ï¼Œä»¥åŠæ›´å¤šå…¶ä»–ç›¸å…³ä¿¡æ¯ã€‚Chainguard Images ç›®å½•è¿˜åŒ…æ‹¬ä¸€ä¸ªæ–°çš„&lt;a href=&#34;https://images.chainguard.dev/security&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®‰å…¨é€šæŠ¥&lt;/a&gt;é¡µé¢ï¼Œæ˜¾ç¤ºç”¨æˆ·å·²çŸ¥çš„ CVEï¼Œä¿®å¤çš„çŠ¶æ€ç­‰ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ­£åœ¨å¯»æ‰¾æ›´å¤šå…³äºå¦‚ä½•åœ¨æœ¬åœ°ç¯å¢ƒä¸­å¯åŠ¨ Chainguard Images Cilium æˆ– Istio æ†ç»‘åŒ…çš„æŠ€æœ¯æŒ‡å¯¼ï¼Œè¯·æŸ¥çœ‹ Chainguard å·¥ç¨‹å¸ˆ&lt;a href=&#34;https://www.linkedin.com/in/tcnghia/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Nghia Tran&lt;/a&gt;åœ¨ Chainguard Academy ä¸Šæä¾›çš„è¿™äº›æ–¹ä¾¿å…¥é—¨çš„æŒ‡å—ã€‚éå¸¸æ„Ÿè°¢æˆ‘ä»¬çš„æœ‹å‹&lt;a href=&#34;https://www.linkedin.com/in/feroz-salam-372a4113/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Isovalent&lt;/a&gt;çš„ Feroz Salam åœ¨ Cilium Images æ–¹é¢ç»™äº†æˆ‘ä»¬å¸®åŠ©ï¼Œä»¥åŠå¤šå¹´æ¥å¸®åŠ©æˆ‘ä»¬çš„ Istio çš„&lt;a href=&#34;https://www.linkedin.com/in/-johnhoward/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;John Howard&lt;/a&gt;ï¼ä»¥ä¸‹æ˜¯æŒ‡å—ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://edu.chainguard.dev/chainguard/chainguard-images/getting-started/getting-started-istio/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€å§‹ä½¿ç”¨ Istio&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://edu.chainguard.dev/chainguard/chainguard-images/getting-started/getting-started-cilium/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼€å§‹ä½¿ç”¨ Cilium&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Chainguard Developer Images æä¾›äº†å¸¦æœ‰ &lt;code&gt;:latest&lt;/code&gt; å’Œ &lt;code&gt;:latest-dev&lt;/code&gt; æ ‡ç­¾çš„å…è´¹é•œåƒï¼Œä¾›ä½ åœ¨å¼€å‘å’Œæµ‹è¯•ç¯å¢ƒä¸­ä½¿ç”¨ã€‚åœ¨æ–°çš„ç›®å½•ä¸­ï¼Œæ¯ä¸ªé•œåƒé¡µé¢è¿˜åŒ…æ‹¬é‡è¦çš„ç‰¹å®šäºé•œåƒçš„è¯¦ç»†ä¿¡æ¯ï¼Œä¾‹å¦‚ç‰ˆæœ¬æ ‡ç­¾å’Œå…¶ä»–å˜ä½“ï¼Œå¦‚ FIPS å’Œé•¿æœŸæ”¯æŒï¼ˆLTSï¼‰ï¼Œè¿™äº›éƒ½é€‚ç”¨äºè´­ä¹°äº†è¿™äº›è§£å†³æ–¹æ¡ˆçš„ Chainguard Images å®¢æˆ·ã€‚å¦‚æœä½ æƒ³äº†è§£æœ‰å…³æˆ‘ä»¬çš„ Production Images ä¸­é¢å‘ä¼ä¸šçš„åŠŸèƒ½çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·&lt;a href=&#34;https://www.chainguard.dev/contact&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è”ç³»æˆ‘ä»¬çš„å›¢é˜Ÿ&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å¦‚ä½•ä½¿ç”¨ Calico æ„å»ºå’Œç®¡ç† Kubernetes Cluster Mesh</title>
      <link>https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/</link>
      <pubDate>Tue, 09 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/</guid>
      <description>&lt;p&gt;Kubernetes æ˜¯æ„å»ºçµæ´»å¯æ‰©å±•åŸºç¡€è®¾æ–½ä»¥è¿è¡ŒåŠ¨æ€å·¥ä½œè´Ÿè½½çš„ä¼˜ç§€è§£å†³æ–¹æ¡ˆã€‚ç„¶è€Œï¼Œéšç€æˆ‘ä»¬çš„é›†ç¾¤æ‰©å±•ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé¢ä¸´åŒæ—¶æ‰©å±•å’Œç®¡ç†å¤šä¸ªé›†ç¾¤çš„ä¸å¯é¿å…æƒ…å†µã€‚è¿™ä¸ªæ¦‚å¿µå¯èƒ½ä¼šç»™æˆ‘ä»¬çš„æ—¥å¸¸å·¥ä½œè´Ÿè½½ç»´æŠ¤å¸¦æ¥å¾ˆå¤šå¤æ‚æ€§ï¼Œå¹¶å¢åŠ åœ¨æ‰€æœ‰ç¯å¢ƒä¸­ä¿æŒæ‰€æœ‰ç­–ç•¥å’ŒæœåŠ¡çš„æœ€æ–°æ€§çš„éš¾åº¦ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ&lt;a href=&#34;https://www.tigera.io/blog/using-calico-to-create-a-kubernetes-cluster-mesh-for-multi-cluster-environments/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›†ç¾¤ç½‘æ ¼&lt;/a&gt; å¯ä»¥åœ¨è¿™äº›é›†ç¾¤ä¹‹é—´å»ºç«‹æ— ç¼çš„è¿æ¥ï¼Œå¹¶å°†å·¥ä½œè´Ÿè½½é›†æˆåˆ°ç»Ÿä¸€çš„ç½‘ç»œç¯å¢ƒä¸­ã€‚&lt;/p&gt;
&lt;p&gt;é›†ç¾¤ç½‘æ ¼æ˜¯è¿æ¥ç‹¬ç«‹ Kubernetes é›†ç¾¤å¹¶åœ¨ä¸åŒé›†ç¾¤ä¸­çš„èµ„æºä¹‹é—´æä¾›è¿æ¥æ€§çš„ç»ä½³æ–¹å¼ï¼Œä»¥æä¾›è¶…å‡ºå•ä¸ªé›†ç¾¤æƒ…å†µä¸‹å¯èƒ½çš„å®¹é”™æ€§å’Œé«˜å¯ç”¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æœ¬åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†å¼•å¯¼ä½ å®Œæˆæ„å»ºå¤šé›†ç¾¤ç¯å¢ƒå¹¶å»ºç«‹é›†ç¾¤ç½‘æ ¼æ‰€éœ€çš„æ­¥éª¤ï¼Œåˆ©ç”¨ Calico Open Source çš„å¤šåŠŸèƒ½èƒ½åŠ›ã€‚æˆ‘ä»¬å°†æ¢è®¨ä¸åŒçš„æ–¹æ³•ï¼Œå¦‚é¡¶çº§æœºæ¶ (TOR) å’Œ overlayï¼Œä»¥å»ºç«‹é›†ç¾¤ç½‘æ ¼ï¼Œè§£å†³ä¸åŒç¯å¢ƒæå‡ºçš„ç‹¬ç‰¹ç½‘ç»œæŒ‘æˆ˜ã€‚è¿™æ˜¯å¯èƒ½çš„ï¼Œå› ä¸º Calico æä¾›äº†å»ºç«‹å¤šé›†ç¾¤ç¯å¢ƒçš„å¤šç§æ–¹æ³•ï¼Œçµæ´»é€‚åº”ä½ çš„ç½‘ç»œåŸºç¡€è®¾æ–½å’Œç‰¹å®šè¦æ±‚ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç»å¦‚ä½•åŠ å…¥ DNS è¿é€šæ€§ä»¥å¢å¼ºé›†ç¾¤é—´é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ä½ çš„é›†ç¾¤ç½‘æ ¼ç¯å¢ƒæ‰©å±•ï¼Œæˆ‘ä»¬å°†è®¨è®ºæ¶‰åŠ&lt;a href=&#34;https://www.tigera.io/learn/guides/kubernetes-security/kubernetes-federation/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è”é‚¦&lt;/a&gt;å’Œä½¿ç”¨ Calico Enterprise è¿›è¡Œå¤šé›†ç¾¤ç®¡ç†çš„ä¸‹ä¸€æ­¥ï¼Œä»¥åŠæ¶‰åŠè”é‚¦é›†ç¾¤ã€‚æˆ‘ä»¬å°†å±•ç¤º Calico å¦‚ä½•æä¾›å¤šé›†ç¾¤ç®¡ç†å¹³é¢ï¼Œå…è®¸åœ¨é›†ç¾¤é—´æ— ç¼å®æ–½å®‰å…¨æ€§å’Œå¯è§‚æµ‹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬å°†æ¶‰åŠåˆ° Calico Enterprise è”é‚¦èº«ä»½å¦‚ä½•åœ¨&lt;a href=&#34;https://www.tigera.io/learn/guides/kubernetes-networking/kubernetes-multi-cluster/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¤šé›†ç¾¤&lt;/a&gt;ç¯å¢ƒä¸­å¼¥åˆå·®è·ï¼Œæä¾›ä¸€ç§ç»Ÿä¸€çš„æ–¹å¼æ¥å®šåˆ¶ç½‘ç»œç­–ç•¥ï¼Œå¯ä»¥å¼•ç”¨æ¥è‡ªä¸åŒé›†ç¾¤çš„èµ„æºå¹¶æ„å»ºè·¨é›†ç¾¤è¾¹ç•Œè´Ÿè½½å¹³è¡¡è¯·æ±‚çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä»€ä¹ˆæ˜¯é›†ç¾¤ç½‘æ ¼&#34;&gt;ä»€ä¹ˆæ˜¯é›†ç¾¤ç½‘æ ¼ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;é›†ç¾¤ç½‘æ ¼è¿æ¥äº†ä¸¤ä¸ªæˆ–å¤šä¸ªç‹¬ç«‹é›†ç¾¤å†…éƒ¨èµ„æºã€‚é€šå¸¸ï¼Œæ¯ä¸ª Kubernetes é›†ç¾¤å°†ä¸ºå†…éƒ¨èµ„æºåˆ†é…ç§æœ‰ IP åœ°å€ï¼Œé™¤éå°†&lt;strong&gt;èŠ‚ç‚¹ç«¯å£&lt;/strong&gt;æˆ–&lt;strong&gt;è´Ÿè½½å‡è¡¡å™¨&lt;/strong&gt;æœåŠ¡ä¸å®ƒä»¬å…³è”ï¼Œå¦åˆ™è¿™äº›èµ„æºå¯¹ä»»ä½•å¤–éƒ¨å®ä½“éƒ½ä¸å¯è§ã€‚ç„¶è€Œï¼Œå°†èµ„æºæš´éœ²ç»™æ‰€æœ‰äººå¯èƒ½ä¼šå¸¦æ¥å®‰å…¨é£é™©ï¼Œå¹¶ç ´åä½ åº”è¯¥ä¿æŒçš„&lt;a href=&#34;https://www.tigera.io/learn/guides/zero-trust/zero-trust-security/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é›¶ä¿¡ä»»å®‰å…¨&lt;/a&gt;å§¿æ€ï¼Œä»¥ä¿æŠ¤ä½ çš„ç¯å¢ƒã€‚æ­¤å¤–ï¼Œå®ƒå¯ä»¥é€šè¿‡å…è®¸æ¶æ„ç”¨æˆ·åˆ©ç”¨æ¼æ´å¹¶åœ¨å…³é”®æœåŠ¡ä¸­å æ®ç«‹è¶³ç‚¹æ¥å±åŠæ•´ä¸ªç¯å¢ƒã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸­å»ºç«‹é›†ç¾¤ç½‘æ ¼æä¾›äº†ä¸€ç§å®‰å…¨æœºåˆ¶ï¼Œç”¨äºä¿ƒè¿›é›†ç¾¤ä¹‹é—´çš„ç›´æ¥é€šä¿¡ã€‚è¿™ç§é€šä¿¡å¯ä»¥é€šè¿‡æŒ‡å®šçš„é›†ç¾¤æœåŠ¡æˆ–ç§æœ‰ IP åœ°å€è¿›è¡Œï¼Œç¡®ä¿å¼ºå¤§è€Œå—æ§åˆ¶çš„äº¤äº’ï¼ŒåŒæ—¶å‡è½»äº†å°†å†…éƒ¨èµ„æºæš´éœ²ç»™æ›´å¹¿æ³›ç½‘ç»œçš„é£é™©ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚ä½•æ„å»ºå¤šé›†ç¾¤ç¯å¢ƒå¹¶å»ºç«‹é›†ç¾¤ç½‘æ ¼&#34;&gt;å¦‚ä½•æ„å»ºå¤šé›†ç¾¤ç¯å¢ƒå¹¶å»ºç«‹é›†ç¾¤ç½‘æ ¼&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç‰‡è¯´æ˜äº† Calico å¦‚ä½•åœ¨ä½ çš„é›†ç¾¤ä¹‹é—´å»ºç«‹é›†ç¾¤ç½‘æ ¼è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/1_hu1714775106322988165.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/1_hu14397733527843732603.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/1_hu3158767459423501648.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/1_hu1714775106322988165.webp&#34;
               width=&#34;760&#34;
               height=&#34;466&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Calico æä¾›äº†ä¸åŒçš„æ–¹å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨è¿™äº›æ–¹å¼æ¥æ„å»ºå¤šé›†ç¾¤ç¯å¢ƒï¼Œä»è€Œæä¾›äº†ä¸ä½ çš„ç½‘ç»œåŸºç¡€è®¾æ–½å’Œéœ€æ±‚ç›¸åŒ¹é…çš„çµæ´»æ€§ã€‚Calico æœ€å¥½çš„éƒ¨åˆ†æ˜¯ï¼Œåœ¨å°†ä¸¤ä¸ªé›†ç¾¤è¿æ¥åœ¨ä¸€èµ·åï¼Œå®ƒå°†è‡ªåŠ¨æä¾›é›†ç¾¤ç½‘æ ¼ï¼Œä½ å¯ä»¥é€šè¿‡ä½¿ç”¨å®ƒä»¬çš„å†…éƒ¨é›†ç¾¤æœåŠ¡å’Œ IP åœ°å€å¼€å§‹åœ¨ä¸åŒçš„é›†ç¾¤ä¸­ä½¿ç”¨èµ„æºã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨æ‰å¹³ç½‘ç»œç¯å¢ƒä¸­çš„é›†ç¾¤ç½‘æ ¼&#34;&gt;åœ¨æ‰å¹³ç½‘ç»œç¯å¢ƒä¸­çš„é›†ç¾¤ç½‘æ ¼&lt;/h3&gt;
&lt;p&gt;é›†ç¾¤ç½‘æ ¼çš„é…ç½®å¯ä»¥æ ¹æ®åº•å±‚åŸºç¡€è®¾æ–½çš„ä¸åŒè€Œå˜åŒ–ï¼Œä½†å…¶åŸºæœ¬ç›®çš„ä¿æŒä¸å˜ï¼Œå®è´¨ä¸Šæ˜¯ç”¨äºå»ºç«‹ç‹¬ç«‹é›†ç¾¤ä¹‹é—´çš„è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œåœ¨æˆ‘ä»¬çš„é›†ç¾¤çš„å‚ä¸èŠ‚ç‚¹é€šè¿‡å¹¿æ’­åŸŸç›´æ¥è¿æ¥çš„ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¼ æ’­å†…éƒ¨è·¯ç”±åˆ°å¤–éƒ¨å®ä½“çš„è·¯ç”±åè®®æ¥å¿«é€Ÿå»ºç«‹ä¸€ä¸ªç½‘æ ¼ã€‚è¿™å°†å…è®¸æˆ‘ä»¬å¹¿å‘Šå†…éƒ¨è·¯ç”±ï¼Œè€Œæ— éœ€é€šè¿‡&lt;strong&gt;èŠ‚ç‚¹ç«¯å£&lt;/strong&gt;æœåŠ¡å°†å®ƒä»¬æš´éœ²ç»™æˆ‘ä»¬çš„ç›®æ ‡æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç‰‡è¯´æ˜äº†æ‰å¹³ç½‘ç»œçš„å¸¸è§è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/2_hu967632242553420625.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/2_hu17811270883764521857.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/2_hu1814670850135416981.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/2_hu967632242553420625.webp&#34;
               width=&#34;358&#34;
               height=&#34;364&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è€ƒè™‘è§‚çœ‹æˆ‘ä»¬çš„è§†é¢‘ï¼Œ&lt;a href=&#34;https://www.youtube.com/watch?v=PefluN8YM9o&amp;amp;ab_channel=ProjectCalico&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ Calico å¼€æºè¿›è¡Œ Kubernetes çš„ BGP&lt;/a&gt;ï¼Œä»¥äº†è§£ä½¿ç”¨å…¨ç½‘æ ¼æ–¹æ³•éƒ¨ç½²é›†ç¾¤ç½‘æ ¼çš„å…¨é¢æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åœ¨ä¼ä¸šæˆ–äº‘ç½‘ç»œç¯å¢ƒä¸­çš„é›†ç¾¤ç½‘æ ¼&#34;&gt;åœ¨ä¼ä¸šæˆ–äº‘ç½‘ç»œç¯å¢ƒä¸­çš„é›†ç¾¤ç½‘æ ¼&lt;/h3&gt;
&lt;p&gt;åœ¨å¤æ‚çš„ç½‘ç»œç¯å¢ƒä¸­ï¼Œä¾‹å¦‚äº‘æˆ–ä¼ä¸šç½‘ç»œï¼Œå½¢æˆé›†ç¾¤çš„åŸºç¡€è®¾æ–½èµ„æºé€šå¸¸åˆ†ä¸ºå•ç‹¬çš„å¹¿æ’­åŸŸã€‚è¿™æ˜¯å› ä¸ºè¿™äº›åŸŸä¸­çš„æ¯ä¸ªå®ä½“éƒ½è¢«è¦æ±‚é€šè¿‡ç½‘å…³æ¥åˆ°è¾¾å…¶ç›®çš„åœ°ã€‚ä½†æ˜¯ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œè¿™ä¸ªé¢å¤–çš„è·³è·ƒï¼ˆç½‘å…³ï¼‰éœ€è¦äº†è§£æˆ‘ä»¬åœ¨ Kubernetes é›†ç¾¤ä¸­åˆ›å»ºçš„å†…éƒ¨é›†ç¾¤èµ„æºã€‚å› æ­¤ï¼Œç½‘å…³ä¼šä¸¢å¼ƒå‰å¾€è¿™äº›å†…éƒ¨èµ„æºçš„æ•°æ®åŒ…ï¼Œä½¿ç®€å•çš„è·¯ç”±æ–¹æ³•æ— æ³•æ»¡è¶³è¦æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç‰‡è¯´æ˜äº†å¤æ‚ç½‘ç»œç¯å¢ƒçš„å¸¸è§è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/3_hu14527019382589229471.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/3_hu1917702437854214796.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/3_hu3149951656747117663.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/3_hu14527019382589229471.webp&#34;
               width=&#34;579&#34;
               height=&#34;357&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†é—®é¢˜ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•åˆ©ç”¨ Calico æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†åœ¨è¿™æ ·çš„ç¯å¢ƒä¸­å»ºç«‹é›†ç¾¤ç½‘æ ¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä¸¤ç§æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¡¶å±‚æœºæ¶ï¼ˆTORï¼‰&lt;/li&gt;
&lt;li&gt;overlay&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&#34;tor-æ–¹æ³•æ¨è&#34;&gt;TOR æ–¹æ³•ï¼ˆæ¨èï¼‰&lt;/h4&gt;
&lt;p&gt;åœ¨ä¼ä¸šæˆ–äº‘ç¯å¢ƒä¸­ï¼Œèµ„æºé€šå¸¸é€šè¿‡ä¸­é—´ç½‘å…³äº’è¿ã€‚é€šå¸¸ï¼Œæˆ‘ä»¬å»ºè®®æˆ‘ä»¬çš„å®¢æˆ·ä½¿ç”¨ TORï¼Œå› ä¸ºé€šè¿‡ä¸äº‘æä¾›å•†è‡ªåŠ¨å»ºç«‹è·¯ç”±ä¼ æ’­æœºåˆ¶æ¥ä½¿ä½ çš„é›†ç¾¤äº†è§£ä½ ç›‘ç®¡ä¸‹çš„æ‰€æœ‰äº‘èµ„æºï¼Œä»è€Œä½¿ä½ çš„é›†ç¾¤å…·å¤‡é«˜å¯ç”¨æ€§ã€‚è¿™ä¹Ÿåœ¨äº‘æä¾›å•†çš„åº•å±‚ç½‘ç»œåŸºç¡€è®¾æ–½ä¸Šå‘æŒ¥äº†ä½œç”¨ï¼Œä»è€Œä½¿ä½ çš„é›†ç¾¤åœ¨ç½‘ç»œåŸºç¡€è®¾æ–½çš„æ”¯æŒä¸‹å…·å¤‡é«˜å¯ç”¨æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾ä½ å¯ä»¥é…ç½®äº‘ç½‘å…³å¹¶å°†å…¶ä¸åƒ Calico è¿™æ ·çš„å¼ºå¤§çš„&lt;a href=&#34;https://www.tigera.io/learn/guides/kubernetes-networking/kubernetes-cni/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®¹å™¨ç½‘ç»œæ¥å£ï¼ˆCNIï¼‰&lt;/a&gt;é…å¯¹ï¼Œé‚£ä¹ˆä½ å¯ä»¥åˆ©ç”¨ BGP è·¯ç”±æ¥å»ºç«‹é›†ç¾¤ç½‘æ ¼ã€‚Calico BGP é›†æˆæä¾›äº†åŠ¨æ€è·¯ç”±ï¼Œå…è®¸ä½ å°†å†…éƒ¨ Pod å’Œé›†ç¾¤ IP è·¯ç”±ä¼ æ’­åˆ°ç½‘ç»œåŸºç¡€è®¾æ–½ä¸­çš„å…¶ä»–èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç‰‡è¯´æ˜äº†æ”¯æŒ BGP çš„äº‘ç¯å¢ƒçš„å¸¸è§è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/4_hu15022200272298689073.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/4_hu12518138062779718872.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/4_hu8335078202697362550.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/4_hu15022200272298689073.webp&#34;
               width=&#34;310&#34;
               height=&#34;452&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è®¸å¤šæƒ…å†µä¸‹ï¼ŒTORï¼ˆé¡¶å±‚æœºæ¶ï¼‰æé«˜äº†é«˜å¯ç”¨æ€§å’Œå®¹é”™æ€§ã€‚è¿™ç§æ–¹æ³•ä¼˜åŒ–äº†ç½‘ç»œæµé‡åˆ†å¸ƒï¼Œå‡è½»äº†å•ç‚¹æ•…éšœï¼Œå¹¶è¿›ä¸€æ­¥å¢å¼ºäº†ä½ çš„åŸºç¡€è®¾æ–½çš„å¯é æ€§å’Œå¼¹æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šè¦äº†è§£ä½¿ç”¨ TOR æ–¹æ³•éƒ¨ç½²é›†ç¾¤ç½‘æ ¼çš„è¯¦ç»†æŒ‡å—ï¼Œè¯·æŸ¥çœ‹&lt;a href=&#34;https://docs.tigera.io/calico/latest/networking/configuring/bgp#top-of-rack-tor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;çš„æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;h4 id=&#34;ipip-overlay&#34;&gt;IPIP overlay&lt;/h4&gt;
&lt;p&gt;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½æ— æ³•è®¿é—®ç½‘å…³ä»¥ä¿®æ”¹å…¶è®¾ç½®ï¼Œæˆ–è€…å®ƒå¯èƒ½ä¸æ”¯æŒ BGP å¯¹ç­‰è¿æ¥ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¯ä»¥ä½¿ç”¨ IPIP overlay æ¥å°è£…æµå‘ç›®æ ‡é›†ç¾¤çš„æµé‡ã€‚overlay ç½‘ç»œå…è®¸ç½‘ç»œè®¾å¤‡åœ¨åº•å±‚ç½‘ç»œï¼ˆç§°ä¸ºåº•å±‚ï¼‰ä¸Šç›¸äº’é€šä¿¡ï¼Œè€Œåº•å±‚ç½‘ç»œä¸éœ€è¦äº†è§£è¿æ¥åˆ° overlay ç½‘ç»œçš„è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äº overlay ç½‘ç»œçš„ä¿¡æ¯ï¼Œè¯·å•å‡»&lt;a href=&#34;https://docs.tigera.io/calico/latest/about/kubernetes-training/about-networking#overlay-networks&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&#34;vxlan-overlay-calico-enterprise&#34;&gt;VXLAN overlay (Calico Enterprise)&lt;/h4&gt;
&lt;p&gt;å³å°†å‘å¸ƒçš„ Calico Enterpriseï¼ˆ3.18+ï¼‰ç‰ˆæœ¬å°†åœ¨å¤šé›†ç¾¤ç¯å¢ƒä¸‹å¯ç”¨ VXLAN ç½‘ç»œã€‚è¿™ç§æ–¹æ³•çš„ä¸€ä¸ªæ˜¾è‘—ä¼˜åŠ¿ä¹‹ä¸€æ˜¯èƒ½å¤Ÿä½¿ç”¨èº«ä»½æ„ŸçŸ¥ç­–ç•¥æ¥ä¿æŠ¤è·¨é›†ç¾¤çš„æµé‡ï¼ˆä½ å°†åœ¨æ¥ä¸‹æ¥çš„è”é‚¦éƒ¨åˆ†äº†è§£æœ‰å…³æ­¤åŠŸèƒ½çš„ä¿¡æ¯ï¼‰ã€‚é€šè¿‡å…¶å¤šé›†ç¾¤ç½‘ç»œåŠŸèƒ½ï¼ŒCalico Enterprise è‡ªåŠ¨æ‰©å±• overlay ç½‘ç»œï¼Œä»¥åœ¨é›†ç¾¤ä¹‹é—´å»ºç«‹ Pod IP è·¯ç”±ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ VXLAN çš„ Calico Enterprise é›†ç¾¤ç½‘æ ¼è®¾ç½®ä¸­ï¼Œæ¯ä¸ªé›†ç¾¤éƒ½å……å½“æœ¬åœ°é›†ç¾¤å’Œè¿œç¨‹é›†ç¾¤ï¼Œæœ¬åœ°é›†ç¾¤é…ç½®ä¸ºä»è¿œç¨‹é›†ç¾¤çš„åŠ å¯†é€šé“ä¸­æ£€ç´¢ç«¯ç‚¹å’Œè·¯ç”±æ•°æ®ã€‚VXLAN é›†ç¾¤ç½‘æ ¼æä¾›äº†ä¸€ç§å®‰å…¨ã€å¯æ‰©å±•å’Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆï¼Œç”¨äºç®¡ç†å¤šé›†ç¾¤ç½‘ç»œï¼Œå®ç°äº†è·¨é›†ç¾¤çš„æ— ç¼é€šä¿¡å’Œèº«ä»½æ„ŸçŸ¥ç­–ç•¥å¼ºåˆ¶æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šå¦‚æœä½ æƒ³äº†è§£æœ‰å…³ VXLAN overlay çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å•å‡»&lt;a href=&#34;https://www.tigera.io/news/tigera-introduces-powerful-enhancements-to-calico-open-source-and-calico-cloud-to-elevate-security-scalability-and-performance/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤å¤„&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾ç‰‡è¯´æ˜äº†æ²¡æœ‰ BGP èƒ½åŠ›çš„äº‘ç¯å¢ƒçš„å¸¸è§è®¾è®¡ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/5_hu9781146334230845649.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/5_hu656800191488018043.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/5_hu12539663424339541766.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/5_hu9781146334230845649.webp&#34;
               width=&#34;353&#34;
               height=&#34;445&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šè¦äº†è§£ä½¿ç”¨ TOR æ–¹æ³•éƒ¨ç½²é›†ç¾¤ç½‘æ ¼çš„å…¨é¢æŒ‡å—ï¼Œè¯·æŸ¥çœ‹&lt;a href=&#34;https://youtu.be/rv-DnExi6SM?t=2287&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤æ•™ç¨‹&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;dns-è¿æ¥&#34;&gt;DNS è¿æ¥&lt;/h3&gt;
&lt;p&gt;åœ¨å»ºç«‹å¤šé›†ç¾¤ä¹‹åï¼Œå„ä¸ªé›†ç¾¤å¯ä»¥åœ¨ IP çº§åˆ«è¿›è¡Œé€šä¿¡ã€‚ç„¶è€Œï¼Œæ ¹æ®ä½ çš„ç½‘ç»œè§„æ¨¡ä»¥åŠ Kubernetes IP åœ°å€çš„æ€§è´¨ï¼Œè¿™äº›åœ°å€å¯ä»¥éšæ—¶åŠ¨æ€æ›´æ”¹ï¼Œå› æ­¤ä½ éœ€è¦å®ç°ä¸€ç§æ›´å®¹æ˜“å»ºç«‹è¿™äº›é›†ç¾¤ä¹‹é—´è¿æ¥çš„æ–¹å¼ã€‚åŸŸåè§£æå¯ä»¥æˆä¸ºä½ çš„é›†ç¾¤ç½‘æ ¼çš„é‡è¦è¡¥å……ï¼Œå…è®¸æ›´å®¹æ˜“è¿›è¡Œé›†ç¾¤é—´é€šä¿¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤§å¤šæ•° Kubernetes éƒ¨ç½²ä¸­ï¼ŒCoreDNS ä½œä¸ºè´Ÿè´£è§£æé›†ç¾¤åŸŸåçš„ä¸»è¦å·¥ä½œè´Ÿè½½ã€‚è¦å°† DNS ä¸é›†ç¾¤ç½‘æ ¼æ— ç¼é›†æˆï¼Œåªéœ€å¯¹ CoreDNS é…ç½®æ˜ å°„è¿›è¡Œç®€å•çš„ä¿®æ”¹å³å¯ã€‚å…·ä½“æ¥è¯´ï¼Œä½ éœ€è¦å°†å…¶ä»–é›†ç¾¤çš„ CoreDNS å†…éƒ¨æœåŠ¡ IP æ·»åŠ ä¸ºè½¬å‘å™¨åˆ°ä½ çš„é…ç½®ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªç®€å•çš„è°ƒæ•´ä½¿ä½ çš„é›†ç¾¤èƒ½å¤Ÿé€šè¿‡å‘å…¶ä»–é›†ç¾¤å‘é€æŸ¥è¯¢æ¥è§£æåç§°ï¼Œå¹¶æ£€ç´¢æ‰€éœ€èµ„æºçš„ç›¸åº” IP åœ°å€ã€‚è¿™ç§é›†æˆå¤§å¤§ç®€åŒ–äº†é›†ç¾¤ç½‘æ ¼å†…çš„é€šä¿¡ï¼Œå¢å¼ºäº†æ•´ä½“è¿é€šæ€§ï¼Œå¹¶æé«˜äº†ç®¡ç†æ•ˆç‡ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šè€ƒè™‘è§‚çœ‹&lt;a href=&#34;https://youtu.be/rv-DnExi6SM?t=2574&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤è§†é¢‘&lt;/a&gt;ä»¥äº†è§£æœ‰å…³ DNS è¿æ¥çš„å…¨é¢æ•™ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è”é‚¦å’Œå¤šé›†ç¾¤ç®¡ç†ä¸‹ä¸€æ­¥&#34;&gt;è”é‚¦å’Œå¤šé›†ç¾¤ç®¡ç†ï¼ˆä¸‹ä¸€æ­¥ï¼‰&lt;/h2&gt;
&lt;p&gt;éšç€ä½ çš„ç¯å¢ƒæ‰©å±•ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°å¤šä¸ªå›¢é˜Ÿå¿…é¡»åŒæ—¶åœ¨æ‰€æœ‰é›†ç¾¤ä¸Šå·¥ä½œçš„æƒ…å†µã€‚å¤šé›†ç¾¤ç®¡ç†ï¼ˆMCMï¼‰é€šå¸¸è§£å†³çš„ä¸€ä¸ªå¸¸è§é—®é¢˜æ˜¯ä»¥é›†ä¸­çš„æ–¹å¼å¤„ç†æ¥è‡ªä¸åŒé›†ç¾¤çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬ç½‘ç»œç­–ç•¥ã€Podã€&lt;a href=&#34;https://www.tigera.io/learn/guides/kubernetes-security/kubernetes-compliance/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åˆè§„æ€§&lt;/a&gt;æŠ¥å‘Šã€å¯è§‚æµ‹æ€§å’Œå®‰å…¨æ—¥å¿—ã€‚&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä»æŠ€æœ¯ä¸Šè®²ï¼Œå¯ä»¥é€šè¿‡ kubectl ä¸ºæ¯ä¸ªé›†ç¾¤æ‰‹åŠ¨åˆ›å»ºç­–ç•¥ã€ç½‘ç»œé›†å’Œå…¶ä»–èµ„æºï¼Œä½†è¿™ç§æ–¹æ³•ä¼šåœ¨ä½ çš„æ—¥å¸¸ç»´æŠ¤ä»»åŠ¡ä¸­å¼•å…¥ç›¸å½“å¤æ‚æ€§ï¼Œå¹¶å¯èƒ½ä¸ºæ„å¤–çš„å‡­æ®æ³„æ¼å¼€è¾Ÿä¸€æ¡é€”å¾„ã€‚æ­¤å¤–ï¼Œä¸æˆ‘ä»¬åœ¨å‰ä¸€èŠ‚ä¸­æ¢è®¨çš„ç±»ä¼¼ï¼Œå®ƒåæ˜ äº†æ²¡æœ‰è‰¯å¥½ç»“æ„çš„å¤šé›†ç¾¤ç¯å¢ƒæ‰€é¢ä¸´çš„æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯åœ¨é›†ç¾¤ç®¡ç†ã€ç½‘ç»œã€æ•…éšœæ’é™¤å’Œå¯è§‚æµ‹æ€§æ–¹é¢ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨-calico-enterprise-è¿›è¡Œå¤šé›†ç¾¤ç®¡ç†&#34;&gt;ä½¿ç”¨ Calico Enterprise è¿›è¡Œå¤šé›†ç¾¤ç®¡ç†&lt;/h3&gt;
&lt;p&gt;Calico Enterprise æä¾›äº†ä¸€ä¸ª MCM å¹³é¢ï¼Œé€šè¿‡åœ¨è¿™äº›é›†ç¾¤ä¹‹é—´å»ºç«‹å®‰å…¨è¿æ¥ï¼Œå®ç°äº†å¤šé›†ç¾¤çš„å®‰å…¨å’Œå¯è§‚æµ‹æ€§ã€‚è¯¥æ¶æ„è¿˜æ”¯æŒè·¨é›†ç¾¤è”é‚¦&lt;a href=&#34;https://www.tigera.io/learn/guides/kubernetes-security/kubernetes-network-policy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç½‘ç»œç­–ç•¥&lt;/a&gt;èµ„æºï¼Œå¹¶ä¸ºçœŸæ­£çš„é›†ä¸­å¼ç®¡ç†ã€å¯è§‚æµ‹æ€§å’Œé›†ç¾¤ç»´æŠ¤å¥ å®šäº†åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾åƒæ˜¯åˆ—å‡ºæ‰€æœ‰å·²è¿æ¥é›†ç¾¤çš„ MCM é¡µé¢çš„ç¤ºä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/6_hu89478033148328707.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/6_hu7397803450086093900.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/6_hu11151254813731525729.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/6_hu89478033148328707.webp&#34;
               width=&#34;760&#34;
               height=&#34;237&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;MCM çš„å®‰å…¨åŠŸèƒ½ä¸ä»…é™äºé›†ç¾¤çš„ç½‘ç»œæ–¹é¢ã€‚ç”±äº MCM å®Œå…¨é›†æˆäº† Kubernetes åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼ˆRBACï¼‰ï¼Œä½ å¯ä»¥åˆ¶å®šæˆæƒï¼Œå…è®¸ç”¨æˆ·ä»…æŸ¥çœ‹ä»–ä»¬éœ€è¦æŸ¥çœ‹çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šä½¿ç”¨&lt;a href=&#34;https://www.tigera.io/tutorials/?_sft_tutorial_product=calico-enterprise&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™ä¸ª&lt;/a&gt;å®é™…æ“ä½œçš„å·¥ä½œåŠæ¥äº†è§£æ›´å¤šå…³äºå¤šé›†ç¾¤ç®¡ç†çš„ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åˆ©ç”¨-calico-enterprise-çš„è”é‚¦èº«ä»½å’Œç»Ÿä¸€ç­–ç•¥æ‰§è¡Œ&#34;&gt;åˆ©ç”¨ Calico Enterprise çš„è”é‚¦èº«ä»½å’Œç»Ÿä¸€ç­–ç•¥æ‰§è¡Œ&lt;/h3&gt;
&lt;p&gt;Calico Enterprise è”é‚¦å°†å·¥ä½œè´Ÿè½½å’ŒæœåŠ¡ç«¯ç‚¹ä¸åœ¨é›†ç¾¤ä¹‹é—´å…±äº«çš„å”¯ä¸€èº«ä»½å…³è”èµ·æ¥ã€‚&lt;/p&gt;
&lt;p&gt;è”é‚¦èº«ä»½å¯ä»¥ä¸ç½‘ç»œå®‰å…¨ç­–ç•¥å…³è”ï¼Œä»¥åˆ›å»ºå¼•ç”¨ä½äºä¸åŒé›†ç¾¤ä¸­çš„ç«¯ç‚¹çš„å”¯ä¸€èµ„æºï¼Œä»è€Œå®ç°å¯¹é›†ç¾¤é—´å®‰å…¨çš„æ— ç¼æ§åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œé€šè¿‡è”é‚¦æœåŠ¡ï¼Œä½ å¯ä»¥å‘ç°å¹¶ä¸ä½äºä¸åŒé›†ç¾¤ä¸­çš„è¿œç¨‹ Pod äº’åŠ¨ã€‚è¿™ä¸¤ä¸ªå…³é”®åŠŸèƒ½ä½¿å¾—å¯ä»¥åˆ›å»ºç²¾ç¡®ã€ç»†ç²’åº¦çš„å®‰å…¨æ§åˆ¶ï¼ŒåŠ å¼ºäº†è·¨å¤šä¸ªé›†ç¾¤çš„æ•´ä½“å®‰å…¨å§¿æ€ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/7_hu14119038410928012322.webp 400w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/7_hu17653289768340331763.webp 760w,
               /blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/7_hu16145022243233993411.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/what-is-a-kubernetes-cluster-mesh-and-what-are-the-benefits/7_hu14119038410928012322.webp&#34;
               width=&#34;760&#34;
               height=&#34;325&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;é€šè¿‡å®æ–½è”é‚¦å±‚å’Œç­–ç•¥ï¼Œä½ å¯ä»¥çµæ´»åœ°å®šä¹‰ç½‘ç»œå®‰å…¨ç­–ç•¥ï¼Œè¿™äº›ç­–ç•¥å¯ä»¥æ™®éé€‚ç”¨äºæ‰€æœ‰é›†ç¾¤ï¼Œä¹Ÿå¯ä»¥ä¸“é—¨é’ˆå¯¹ä¸€ç»„å®šä¹‰çš„é›†ç¾¤ã€‚è¿™ç§æ–¹æ³•æä¾›äº†ä¸€ç§æœ‰æ•ˆçš„æ‰‹æ®µï¼Œä»¥åœ¨æ‰©å±•éƒ¨ç½²ä»¥åŒ…æ‹¬å¤šä¸ªé›†ç¾¤çš„åŒæ—¶æ‰©å±•å®‰å…¨æªæ–½ã€‚é€šè¿‡å°†è¿™äº›å®‰å…¨æ§åˆ¶æ‰©å±•åˆ°ç°æœ‰å’Œæ–°çš„é›†ç¾¤ï¼Œä½ æœ‰æ•ˆåœ°å‡å°‘äº†ç­–ç•¥çš„é‡å¤å’Œç®€åŒ–äº†ä»åˆ›å»ºåˆ°ç»´æŠ¤çš„æ•´ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æ€»ç»“ä¸€ä¸‹ï¼Œé›†ç¾¤ç½‘æ ¼è¿æ¥ä¸åŒ Kubernetes é›†ç¾¤ä¸­çš„å†…éƒ¨èµ„æºã€‚Calico çš„çµæ´»é›†ç¾¤ç½‘æ ¼è®¾ç½®ä¸ºåœ¨ä»»ä½•ç¯å¢ƒä¸­è¿æ¥åˆ°å¤šä¸ªé›†ç¾¤æä¾›äº†æ„å»ºå—ã€‚&lt;/p&gt;
&lt;p&gt;Calico Enterprise MCMã€è”é‚¦å’Œè”é‚¦ç­–ç•¥å¼ºåˆ¶æ‰§è¡Œæˆä¸ºå¤šé›†ç¾¤æ¶æ„çš„ç¼ºå¤±ç¯èŠ‚ï¼Œå…è®¸æ— ç¼é€šä¿¡ï¼ŒåŒæ—¶ä¼˜å…ˆè€ƒè™‘å®‰å…¨æ€§ã€‚Calico åœ¨è¿™ä¸ªé¢†åŸŸçš„èƒ½åŠ›ä½¿ä½ èƒ½å¤Ÿæ— ç¼æä¾›å¤šé›†ç¾¤ç®¡ç†ã€å¯è§‚æµ‹æ€§ã€è”é‚¦æœåŠ¡å’Œèº«ä»½ï¼Œä»è€Œä½¿ä½ çš„ç»„ç»‡èƒ½å¤Ÿè‡ªä¿¡è€Œé«˜æ•ˆåœ°åº”å¯¹ç°ä»£ç½‘ç»œçš„å¤æ‚æ€§ã€‚éšç€ç»„ç»‡çš„ç»§ç»­æ‰©å±•å’Œæ‰©å¤§è§„æ¨¡ï¼Œæ•´åˆè¿™äº›ç­–ç•¥å°†åœ¨å¡‘é€ å¤šé›†ç¾¤ç¯å¢ƒçš„æœªæ¥ä¸­å‘æŒ¥å…³é”®ä½œç”¨ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ Cilium å®ç° Gateway API æŒ‡å—</title>
      <link>https://cloudnativecn.com/blog/cilium-gateway-api/</link>
      <pubDate>Thu, 04 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/cilium-gateway-api/</guid>
      <description>&lt;p&gt;åœ¨ Kubernetes ä¸Šéƒ¨ç½²åº”ç”¨ç¨‹åºåï¼Œé€šå¸¸çš„ä¸‹ä¸€æ­¥æ˜¯è®©ç”¨æˆ·å¯ä»¥è®¿é—®å®ƒã€‚æˆ‘ä»¬é€šå¸¸ä½¿ç”¨&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Ingress æ§åˆ¶å™¨&lt;/strong&gt;&lt;/a&gt;ï¼Œä¾‹å¦‚ Nginxã€Haproxyã€Traefik æˆ–æ¥è‡ªäº‘æä¾›å•†çš„æ§åˆ¶å™¨ï¼Œæ¥å¼•å¯¼ä¼ å…¥çš„æµé‡åˆ°åº”ç”¨ç¨‹åºï¼Œç®¡ç†è´Ÿè½½å¹³è¡¡ã€TLS ç»ˆæ­¢ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åï¼Œæˆ‘ä»¬å¿…é¡»ä»ä¼—å¤š&lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯ç”¨çš„é€‰é¡¹&lt;/a&gt; ä¸­è¿›è¡Œé€‰æ‹©ã€‚Cilium æ˜¯å…¶ä¸­ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„é€‰é¡¹ï¼Œæ—¨åœ¨å¤„ç†æ‰€æœ‰è¿™äº›ç½‘ç»œæ–¹é¢çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cilium.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Cilium&lt;/strong&gt;&lt;/a&gt; æ˜¯ä¸€ä¸ªåŸºäº eBPF çš„å¼€æºç½‘ç»œå’Œå®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œå…¶é‡‡ç”¨é€Ÿåº¦å¢é•¿è¿…çŒ›ã€‚å®ƒå¯èƒ½æ˜¯æä¾›æœ€å¤šåŠŸèƒ½çš„ç½‘ç»œæ’ä»¶ä¹‹ä¸€ã€‚æˆ‘ä»¬ä¸ä¼šæ¶µç›–æ‰€æœ‰åŠŸèƒ½ï¼Œä½†å…¶ä¸­ä¸€ä¸ªåŠŸèƒ½æ¶‰åŠä½¿ç”¨&lt;a href=&#34;https://gateway-api.sigs.k8s.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;Gateway API&lt;/strong&gt;&lt;/a&gt; (&lt;code&gt;GAPI&lt;/code&gt;) ç®¡ç†ä¼ å…¥æµé‡ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘ä»¬çš„ç›®æ ‡&#34;&gt;æˆ‘ä»¬çš„ç›®æ ‡&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;å‡†ç¡®äº†è§£ &lt;strong&gt;Gateway API&lt;/strong&gt; æ˜¯ä»€ä¹ˆï¼Œä»¥åŠå®ƒå¦‚ä½•ä»£è¡¨ä» &lt;code&gt;Ingress&lt;/code&gt; API è¿›åŒ–è€Œæ¥ã€‚&lt;/li&gt;
&lt;li&gt;æ¼”ç¤ºä»¥ GitOps æ–¹å¼éƒ¨ç½²çš„çœŸå®åœºæ™¯ã€‚&lt;/li&gt;
&lt;li&gt;å½“å‰çš„é™åˆ¶å’Œå³å°†æ¨å‡ºçš„æ–°åŠŸèƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æç¤º&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    &lt;p&gt;æœ¬æ–‡ä¸­æ‰§è¡Œçš„æ‰€æœ‰æ­¥éª¤éƒ½æ¥è‡ªè¿™ä¸ª&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;git å­˜å‚¨åº“&lt;/strong&gt;&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘é¼“åŠ±ä½ æ¢ç´¢å®ƒï¼Œå› ä¸ºå®ƒè¿œè¿œè¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨å¯ç”¨äº† kube-proxy æ›¿ä»£å¹¶å…·æœ‰ä¸“ç”¨ Daemonset ç”¨äº &lt;code&gt;Envoy&lt;/code&gt; çš„ &lt;code&gt;Cilium&lt;/code&gt; é…ç½®çš„ &lt;strong&gt;EKS&lt;/strong&gt; é›†ç¾¤çš„å®‰è£…ã€‚&lt;/li&gt;
&lt;li&gt;æå‡ºäº†å…·æœ‰ä¾èµ–å…³ç³»ç®¡ç†å’Œæˆ‘è®¤ä¸ºéå¸¸é«˜æ•ˆçš„ DRY ä»£ç çš„ &lt;code&gt;Flux&lt;/code&gt; ç»“æ„ã€‚&lt;/li&gt;
&lt;li&gt;ç®€åŒ–äº†ç”¨äºå¹³å°ç»„ä»¶çš„ IAM æƒé™ç®¡ç†çš„ &lt;code&gt;Crossplane&lt;/code&gt; å’Œ &lt;a href=&#34;https://docs.aws.amazon.com/eks/latest/userguide/iam-roles-for-service-accounts.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;IRSA&lt;/a&gt; ç»„åˆã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;External-DNS&lt;/code&gt; å’Œ &lt;code&gt;Let&#39;s Encrypt&lt;/code&gt; è‡ªåŠ¨ç®¡ç†åŸŸåå’Œè¯ä¹¦ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™ä¸ªæƒ³æ³•æ˜¯åªéœ€å‡ åˆ†é’Ÿå†…è®¾ç½®å¥½ä¸€åˆ‡ï¼Œåªéœ€ä¸€ä¸ªå‘½ä»¤è¡Œã€‚&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&#34;ä»‹ç»-gateway-api&#34;&gt;ä»‹ç» Gateway API&lt;/h2&gt;
&lt;p&gt;æ­£å¦‚å‰é¢æåˆ°çš„ï¼Œæœ‰è®¸å¤š&lt;strong&gt;Ingress æ§åˆ¶å™¨&lt;/strong&gt;é€‰é¡¹ï¼Œæ¯ä¸ªéƒ½æœ‰å…¶ç‰¹å®šæ€§å’Œç‰¹æ®ŠåŠŸèƒ½ï¼Œæœ‰æ—¶ä¼šä½¿å®ƒä»¬çš„ä½¿ç”¨å˜å¾—å¤æ‚ã€‚æ­¤å¤–ï¼ŒKubernetes ä¸­ä¼ ç»Ÿçš„ &lt;code&gt;Ingress&lt;/code&gt; API å…·æœ‰éå¸¸æœ‰é™çš„å‚æ•°ã€‚ä¸€äº›è§£å†³æ–¹æ¡ˆç”šè‡³åˆ›å»ºäº†è‡ªå·±çš„&lt;a href=&#34;https://kubernetes.io/docs/concepts/extend-kubernetes/api-extension/custom-resources/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CRDs&lt;/a&gt;ï¼ˆKubernetes è‡ªå®šä¹‰èµ„æºï¼‰ï¼Œè€Œå…¶ä»–è§£å†³æ–¹æ¡ˆåˆ™ä½¿ç”¨ &lt;code&gt;annotations&lt;/code&gt; æ¥å…‹æœè¿™äº›é™åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯&lt;strong&gt;Gateway API&lt;/strong&gt;çš„ç”¨æ­¦ä¹‹åœ°ï¼å®é™…ä¸Šï¼Œè¿™æ˜¯ä¸€ç§&lt;strong&gt;æ ‡å‡†&lt;/strong&gt;ï¼Œå…è®¸å£°æ˜é«˜çº§ç½‘ç»œåŠŸèƒ½ï¼Œè€Œæ— éœ€å¯¹åº•å±‚æ§åˆ¶å™¨è¿›è¡Œç‰¹å®šæ‰©å±•ã€‚è€Œä¸”ï¼Œç”±äºæ‰€æœ‰æ§åˆ¶å™¨éƒ½ä½¿ç”¨ç›¸åŒçš„ APIï¼Œå› æ­¤å¯ä»¥åœ¨ä¸æ”¹å˜é…ç½®çš„æƒ…å†µä¸‹ä»ä¸€ä¸ªè§£å†³æ–¹æ¡ˆåˆ‡æ¢åˆ°å¦ä¸€ä¸ªè§£å†³æ–¹æ¡ˆï¼ˆKubernetes æ¸…å•æè¿°äº†å¦‚ä½•è·¯ç”±ä¼ å…¥æµé‡ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æˆ‘ä»¬å°†è¦æ¢è®¨çš„æ¦‚å¿µä¸­ï¼ŒGAPI å¼•å…¥äº†ä¸€ä¸ªç²¾ç»†çš„æˆæƒæ¨¡å‹ï¼Œå®šä¹‰äº†å…·æœ‰ä¸åŒæƒé™çš„&lt;strong&gt;æ˜¾å¼è§’è‰²&lt;/strong&gt;ï¼ˆæœ‰å…³ GAPI å®‰å…¨æ¨¡å‹çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…&lt;a href=&#34;https://gateway-api.sigs.k8s.io/concepts/security-model/#roles-and-personas&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¯¥é¡¹ç›®ç”±&lt;a href=&#34;https://github.com/kubernetes/community/tree/master/sig-network&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;sig-network-kubernetes&lt;/a&gt;å·¥ä½œç»„æ¨åŠ¨ï¼Œè¿˜æœ‰ä¸€ä¸ª Slack &lt;a href=&#34;https://kubernetes.slack.com/archives/CR0H13KGA&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é¢‘é“&lt;/a&gt;ï¼Œä½ å¯ä»¥åœ¨éœ€è¦æ—¶è”ç³»ä»–ä»¬ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬çœ‹çœ‹åœ¨å®è·µä¸­å¦‚ä½•ä½¿ç”¨ GAPI ä¸ Ciliumï¼&lt;/p&gt;
&lt;h2 id=&#34;å…ˆå†³æ¡ä»¶&#34;&gt;å…ˆå†³æ¡ä»¶&lt;/h2&gt;
&lt;p&gt;åœ¨æœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‡è®¾å·²éƒ¨ç½²äº†ä¸€ä¸ª EKS é›†ç¾¤ã€‚å¦‚æœä½ æ²¡æœ‰ä½¿ç”¨&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/tree/main/terraform/eks&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¼”ç¤ºå­˜å‚¨åº“ä¸­å»ºè®®çš„æ–¹æ³•&lt;/a&gt;ä½œä¸ºæœ¬æ–‡çš„åŸºç¡€ï¼Œé‚£ä¹ˆæœ‰ä¸€äº›&lt;strong&gt;è¦æ£€æŸ¥çš„è¦ç‚¹&lt;/strong&gt;ï¼Œä»¥ä¾¿ä½¿ç”¨ GAPIã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤„æè¿°çš„å®‰è£…æ–¹æ³•åŸºäº &lt;code&gt;Helm&lt;/code&gt;ï¼Œæ‰€æœ‰çš„ &lt;code&gt;values&lt;/code&gt; å¯ä»¥åœ¨&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/terraform/eks/helm_values/cilium.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;æŸ¥çœ‹ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;åœ¨&lt;a href=&#34;https://github.com/kubernetes-sigs/gateway-api/tree/main/config/crd&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API&lt;/a&gt;å­˜å‚¨åº“ä¸­&lt;strong&gt;å®‰è£…&lt;/strong&gt;å¯ç”¨çš„ &lt;code&gt;CRDs&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æ³¨æ„&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    å¦‚æœ Cilium è®¾ç½®ä¸ºæ”¯æŒ &lt;code&gt;GAPI&lt;/code&gt;ï¼ˆè§ä¸‹æ–‡ï¼‰ï¼Œå¹¶ä¸”ç¼ºå°‘ CRDsï¼Œåˆ™å®ƒå°†æ— æ³•å¯åŠ¨ã€‚åœ¨&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¼”ç¤ºå­˜å‚¨åº“&lt;/a&gt;ä¸­ï¼Œ&lt;strong&gt;GAPI CRDs&lt;/strong&gt;åœ¨é›†ç¾¤åˆ›å»ºæœŸé—´å®‰è£…ä¸€æ¬¡ï¼Œä»¥ä¾¿ Cilium å¯ä»¥å¯åŠ¨ï¼Œç„¶åç”± Flux ç®¡ç†ã€‚
&lt;/div&gt;

&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä½¿ç”¨ Cilium å’Œ &lt;code&gt;eBPF&lt;/code&gt; çš„ç½‘ç»œè½¬å‘åŠŸèƒ½&lt;strong&gt;æ›¿æ¢&lt;/strong&gt; &lt;code&gt;kube-proxy&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;kubeProxyReplacement&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;å¯ç”¨&lt;/strong&gt; Gateway API æ”¯æŒã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;gatewayAPI&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;enabled&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;kc&#34;&gt;true&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;æ£€æŸ¥&lt;/strong&gt;å®‰è£…ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å®‰è£…åä¸º &lt;code&gt;cilium&lt;/code&gt; çš„å‘½ä»¤è¡Œå·¥å…·ã€‚æˆ‘ä¸ªäººä½¿ç”¨ &lt;a href=&#34;https://blog.ogenki.io/post/asdf/asdf/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;asdf&lt;/a&gt;ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;asdf plugin-add cilium-cli
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;asdf install cilium-cli 0.15.7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;asdf global cilium 0.15.7
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä»¥ä¸‹å‘½ä»¤å…è®¸ç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½æ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium status --wait
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;   /Â¯Â¯\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/Â¯Â¯\__/Â¯Â¯\    Cilium:             OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;\__/Â¯Â¯\__/    Operator:           OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;/Â¯Â¯\__/Â¯Â¯\    Envoy DaemonSet:    OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;\__/Â¯Â¯\__/    Hubble Relay:       disabled
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;   \__/       ClusterMesh:        disabled
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;go&#34;&gt;Deployment             cilium-operator    Desired: 2, Ready: 2/2, Available: 2/2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;DaemonSet              cilium             Desired: 2, Ready: 2/2, Available: 2/2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;DaemonSet              cilium-envoy       Desired: 2, Ready: 2/2, Available: 2/2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Containers:            cilium             Running: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;                      cilium-operator    Running: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;                      cilium-envoy       Running: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Cluster Pods:          33/33 managed by Cilium
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Helm chart version:    1.14.2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;Image versions         cilium             quay.io/cilium/cilium:v1.14.2@sha256:6263f3a3d5d63b267b538298dbeb5ae87da3efacf09a2c620446c873ba807d35: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;                      cilium-operator    quay.io/cilium/operator-aws:v1.14.2@sha256:8d514a9eaa06b7a704d1ccead8c7e663334975e6584a815efe2b8c15244493f1: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;                      cilium-envoy       quay.io/cilium/cilium-envoy:v1.25.9-e198a2824d309024cb91fb6a984445e73033291d@sha256:52541e1726041b050c5d475b3c527ca4b8da487a0bbb0309f72247e8127af0ec: 2
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œä½ å¯ä»¥é€šè¿‡è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥æ˜¯å¦å¯ç”¨äº† Gateway API æ”¯æŒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium config view | grep -w &amp;#34;enable-gateway-api&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;enable-gateway-api                                true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;enable-gateway-api-secrets-sync                   true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ è¿˜å¯ä»¥è¿è¡Œä»¥ä¸‹ç«¯åˆ°ç«¯æµ‹è¯•ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium connectivity test
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½†æ˜¯ï¼Œæ­¤å‘½ä»¤ï¼ˆ&lt;code&gt;connectivity test&lt;/code&gt;ï¼‰å½“å‰åœ¨å¯ç”¨ Envoy ä½œä¸º DaemonSet æ—¶ä¼šæŠ›å‡ºé”™è¯¯ã€‚(&lt;a href=&#34;https://github.com/cilium/cilium/issues/28057&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github Issue&lt;/a&gt;)ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æç¤º&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    &lt;p&gt;&lt;strong&gt;Envoy ä½œä¸º DaemonSet&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼ŒCilium ä»£ç†è¿˜åœ¨åŒä¸€ Pod ä¸­è¿è¡Œ &lt;code&gt;Envoy&lt;/code&gt;ï¼Œå¹¶å§”æ‰˜ç»™å®ƒçº§åˆ« 7 çš„ç½‘ç»œæ“ä½œã€‚ä»ç‰ˆæœ¬ &lt;code&gt;v1.14&lt;/code&gt; å¼€å§‹ï¼Œå¯ä»¥å°† Envoy å•ç‹¬éƒ¨ç½²ï¼Œè¿™å¸¦æ¥äº†ä¸€äº›å¥½å¤„ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¦‚æœä¿®æ”¹/é‡æ–°å¯åŠ¨ä¸€ä¸ªç»„ä»¶ï¼ˆæ— è®ºæ˜¯ Cilium è¿˜æ˜¯ Envoyï¼‰ï¼Œéƒ½ä¸ä¼šå½±å“å¦ä¸€ä¸ªç»„ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;æ›´å¥½åœ°åˆ†é…èµ„æºç»™æ¯ä¸ªç»„ä»¶ä»¥ä¼˜åŒ–æ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æŸä¸ª Pod è¢«æ”»å‡»çš„æƒ…å†µä¸‹é™åˆ¶æ”»å‡»é¢ã€‚&lt;/li&gt;
&lt;li&gt;Envoy æ—¥å¿—å’Œ Cilium ä»£ç†æ—¥å¿—ä¸ä¼šæ··åˆåœ¨ä¸€èµ·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æ£€æŸ¥æ­¤åŠŸèƒ½æ˜¯å¦å·²å¯ç”¨ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium status
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;    /Â¯Â¯\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt; /Â¯Â¯\__/Â¯Â¯\    Cilium:             OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt; \__/Â¯Â¯\__/    Operator:           OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt; /Â¯Â¯\__/Â¯Â¯\    Envoy DaemonSet:    OK
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt; \__/Â¯Â¯\__/    Hubble Relay:       disabled
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;    \__/       ClusterMesh:        disabled
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;a href=&#34;https://isovalent.com/blog/post/cilium-release-114/#h-envoy-daemonset&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ›´å¤šä¿¡æ¯&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;/div&gt;

&lt;h2 id=&#34;å…¥å£ç‚¹gatewayclass-å’Œ-gateway&#34;&gt;å…¥å£ç‚¹ï¼šGatewayClass å’Œ Gateway&lt;/h2&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ç½‘å…³&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ç½‘å…³&#34; srcset=&#34;
               /blog/cilium-gateway-api/gateway_hu17558978471811997564.webp 400w,
               /blog/cilium-gateway-api/gateway_hu14519843841572081622.webp 760w,
               /blog/cilium-gateway-api/gateway_hu456268660095928782.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-gateway-api/gateway_hu17558978471811997564.webp&#34;
               width=&#34;760&#34;
               height=&#34;557&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ç½‘å…³
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦æ»¡è¶³å…ˆå†³æ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥è®¿é—®å¤šä¸ªå…ƒç´ ã€‚æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Gateway API CRDs å®šä¹‰çš„è‡ªå®šä¹‰èµ„æºã€‚è€Œä¸”ï¼Œåœ¨å®‰è£… Cilium åï¼Œä¸€ä¸ª &lt;code&gt;GatewayClass&lt;/code&gt; ç«‹å³å¯ç”¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;kubectl get gatewayclasses.gateway.networking.k8s.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;NAME     CONTROLLER                     ACCEPTED   AGE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium   io.cilium/gateway-controller   True       7m59s
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ Kubernetes é›†ç¾¤ä¸Šï¼Œä½ å¯ä»¥é…ç½®å¤šä¸ª &lt;code&gt;GatewayClasses&lt;/code&gt;ï¼Œä»è€Œèƒ½å¤Ÿä½¿ç”¨ä¸åŒçš„å®ç°ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ &lt;code&gt;Gateway&lt;/code&gt; é…ç½®ä¸­å¼•ç”¨ GatewayClass æ¥ä½¿ç”¨ &lt;code&gt;Linkerd&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Gateway&lt;/code&gt; æ˜¯å…è®¸è§¦å‘åœ¨äº‘æä¾›å•†ä¸­åˆ›å»ºè´Ÿè½½å‡è¡¡ç»„ä»¶çš„èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/apps/base/echo/gateway.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;apps/base/echo/gateway.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cilium&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1-echo-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allowedRoutes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Same&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨ AWSï¼ˆEKSï¼‰ä¸Šï¼Œé…ç½® &lt;code&gt;Gateway&lt;/code&gt; æ—¶ï¼ŒCilium ä¼šåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º &lt;code&gt;LoadBalancer&lt;/code&gt; çš„ &lt;code&gt;Service&lt;/code&gt;ã€‚ç„¶åï¼Œå¦ä¸€ä¸ªæ§åˆ¶å™¨ï¼ˆ&lt;a href=&#34;https://kubernetes-sigs.github.io/aws-load-balancer-controller&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AWS Load Balancer Controller&lt;/a&gt;ï¼‰å¤„ç†äº‘è´Ÿè½½å‡è¡¡å™¨ï¼ˆ&lt;a href=&#34;https://docs.aws.amazon.com/elasticloadbalancing/latest/network/introduction.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;NLB&lt;/a&gt;ï¼‰çš„åˆ›å»ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;kubectl get svc -n echo cilium-gateway-echo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;NAME                  TYPE           CLUSTER-IP     EXTERNAL-IP                                                                 PORT(S)        AGE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;cilium-gateway-echo   LoadBalancer   172.20.19.82   k8s-echo-ciliumga-64708ec85c-fcb7661f1ae4e4a4.elb.eu-west-3.amazonaws.com   80:30395/TCP   2m58s
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè´Ÿè½½å‡è¡¡å™¨åœ°å€ä¹Ÿä¸ &lt;code&gt;Gateway&lt;/code&gt; ç›¸å…³è”ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;kubectl get gateway -n echo echo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;NAME   CLASS    ADDRESS                                                                     PROGRAMMED   AGE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;echo   cilium   k8s-echo-ciliumga-64708ec85c-fcb7661f1ae4e4a4.elb.eu-west-3.amazonaws.com   True         16m
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;è·¯ç”±è§„åˆ™httproute&#34;&gt;è·¯ç”±è§„åˆ™ï¼šHTTPRoute&lt;/h2&gt;
&lt;h3 id=&#34;åŸºæœ¬è§„åˆ™&#34;&gt;åŸºæœ¬è§„åˆ™&lt;/h3&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-httproute&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img src=&#34;httproute.jpg&#34; alt=&#34;HTTPRoute&#34; loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      HTTPRoute
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç®€è€Œè¨€ä¹‹ï¼Œä¸Šé¢çš„å›¾è¡¨å¯æ€»ç»“ä¸ºå‡ å¥è¯ï¼š&lt;code&gt;HTTPRoute&lt;/code&gt; å…è®¸é€šè¿‡å¼•ç”¨ Gateway å¹¶å®šä¹‰æ‰€éœ€çš„è·¯ç”±å‚æ•°æ¥é…ç½®åˆ°æœåŠ¡çš„è·¯ç”±ã€‚&lt;/p&gt;
&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æç¤º&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    &lt;p&gt;&lt;strong&gt;Kyverno&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æˆªæ­¢ç›®å‰ï¼Œæ— æ³•é…ç½®ç”± &lt;code&gt;Gateways&lt;/code&gt; ç”Ÿæˆçš„æœåŠ¡çš„æ³¨é‡Šï¼ˆ&lt;a href=&#34;https://github.com/cilium/cilium/issues/25357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github Issue&lt;/a&gt;ï¼‰ã€‚å·²æå‡ºä¸€ç§è§£å†³æ–¹æ³•ï¼Œå³åœ¨åˆ›å»º &lt;code&gt;Gateway&lt;/code&gt; åç«‹å³ä¿®æ”¹ç”± &lt;code&gt;Gateway&lt;/code&gt; åˆ›å»ºçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Kyverno æ˜¯ä¸€ç§ç¡®ä¿é…ç½®ç¬¦åˆæœ€ä½³å®è·µå’Œå®‰å…¨è¦æ±‚çš„å·¥å…·ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œä»…ä»…ä½¿ç”¨å®ƒæ¥è½»æ¾æè¿°&lt;a href=&#34;https://kyverno.io/docs/writing-policies/mutate/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;çªå˜&lt;/a&gt;è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/security/mycluster-0/echo-gw-clusterpolicy.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;security/mycluster-0/echo-gw-clusterpolicy.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;mutate-svc-annotations&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;match&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;any&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kinds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cilium-gateway-echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mutate&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;patchStrategicMerge&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;external-dns.alpha.kubernetes.io/hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo.${domain_name}&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service.beta.kubernetes.io/aws-load-balancer-scheme&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;internet-facing&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;service.beta.kubernetes.io/aws-load-balancer-backend-protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tcp&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;loadBalancerClass&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;service.k8s.aws/nlb&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼ŒæœåŠ¡ &lt;code&gt;cilium-gateway-echo&lt;/code&gt; å°†æ·»åŠ  AWS æ§åˆ¶å™¨çš„æ³¨é‡Šï¼Œä»¥åŠä¸€ä¸ªå…è®¸è‡ªåŠ¨ DNS è®°å½•é…ç½®çš„æ³¨é‡Šã€‚&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/apps/base/echo/httproute.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;apps/base/echo/httproute.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1-echo-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä¸Šé¢ä½¿ç”¨çš„ç¤ºä¾‹éå¸¸ç®€å•ï¼šæ‰€æœ‰è¯·æ±‚éƒ½ä¼šè½¬å‘åˆ° &lt;code&gt;echo-1-echo-server&lt;/code&gt; æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;parentRefs&lt;/code&gt; æŒ‡ç¤ºä½¿ç”¨å“ªä¸ª &lt;code&gt;Gateway&lt;/code&gt;ï¼Œç„¶ååœ¨ &lt;code&gt;rules&lt;/code&gt; éƒ¨åˆ†å®šä¹‰äº†è·¯ç”±è§„åˆ™ã€‚&lt;/p&gt;
&lt;p&gt;è·¯ç”±è§„åˆ™è¿˜å¯ä»¥åŸºäº &lt;code&gt;path&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;foo.bar.com&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/login&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ–è€…åŸºäº HTTP æ ‡å¤´&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;headers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;version&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;2&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®©æˆ‘ä»¬æ£€æŸ¥æœåŠ¡æ˜¯å¦å¯è®¿é—®ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;curl -s http://echo.cloud.ogenki.io | jq -rc &amp;#39;.environment.HOSTNAME&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;echo-1-echo-server-fd88497d-w6sgn
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œè¯¥æœåŠ¡ä»¥ HTTP æ–¹å¼æš´éœ²ï¼Œæ²¡æœ‰è¯ä¹¦ã€‚è®©æˆ‘ä»¬å°è¯•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é…ç½®-tls-è¯ä¹¦&#34;&gt;é…ç½® TLS è¯ä¹¦&lt;/h3&gt;
&lt;p&gt;æœ‰å¤šç§æ–¹æ³•å¯ä»¥ä½¿ç”¨ GAPI é…ç½® TLSã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æœ€å¸¸è§çš„æƒ…å†µï¼šHTTPS åè®®å’Œåœ¨ Gateway ä¸Šç»ˆæ­¢ TLSã€‚&lt;/p&gt;
&lt;p&gt;å‡è®¾æˆ‘ä»¬æƒ³è¦é…ç½®ä¹‹å‰ä½¿ç”¨çš„åŸŸå &lt;code&gt;echo.cloud.ogenki.io&lt;/code&gt;ã€‚é…ç½®ä¸»è¦é€šè¿‡é…ç½® &lt;code&gt;Gateway&lt;/code&gt; æ¥å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/apps/base/echo/tls-gateway.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;apps/base/echo/tls-gateway.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cert-manager.io/cluster-issuer&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;letsencrypt-prod&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;gatewayClassName&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;cilium&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;listeners&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;http&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostname&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;echo.${domain_name}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;protocol&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPS&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allowedRoutes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Same&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Terminate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certificateRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œçš„å…³é”®ç‚¹æ˜¯å¼•ç”¨ä¸€ä¸ªåŒ…å«åç§°ä¸º &lt;code&gt;echo-tls&lt;/code&gt; çš„è¯ä¹¦çš„å¯†é’¥ã€‚è¿™ä¸ªè¯ä¹¦å¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼Œä½†æ˜¯ä¸ºäº†æœ¬æ–‡ï¼Œæˆ‘é€‰æ‹©ä½¿ç”¨ &lt;strong&gt;Let&amp;rsquo;s Encrypt&lt;/strong&gt; å’Œ &lt;code&gt;cert-manager&lt;/code&gt; æ¥è‡ªåŠ¨åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æç¤º&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    &lt;p&gt;}
&lt;strong&gt;cert-manager&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;cert-manager&lt;/code&gt;ï¼Œè‡ªåŠ¨åˆ›å»ºå’Œæ›´æ–°ç”± &lt;code&gt;Gateway&lt;/code&gt; æš´éœ²çš„è¯ä¹¦éå¸¸ç®€å•ã€‚ä¸ºæ­¤ï¼Œä½ éœ€è¦å…è®¸æ§åˆ¶å™¨è®¿é—® &lt;a href=&#34;https://aws.amazon.com/route53/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;route53&lt;/a&gt;ï¼Œä»¥è§£å†³ DNS01 æŒ‘æˆ˜ï¼ˆè¿™æ˜¯ä¸€ç§ç¡®ä¿å®¢æˆ·ç«¯åªèƒ½ä¸ºè‡ªå·±æ‹¥æœ‰çš„åŸŸè¯·æ±‚è¯ä¹¦çš„æœºåˆ¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/security/base/cert-manager/cluster-issuer-staging.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ClusterIssuer&lt;/a&gt; èµ„æºæè¿°äº†ä½¿ç”¨ cert-manager ç”Ÿæˆè¯ä¹¦æ‰€éœ€çš„é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªéœ€è¦æ·»åŠ ä¸€ä¸ªæ³¨é‡Š &lt;code&gt;cert-manager.io/cluster-issuer&lt;/code&gt; å¹¶è®¾ç½®å­˜å‚¨è¯ä¹¦çš„ Kubernetes å¯†é’¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://cert-manager.io/docs/usage/gateway/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ›´å¤šä¿¡æ¯&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ¼”ç¤ºå­˜å‚¨åº“ä¸­ï¼Œæƒé™æ˜¯ä½¿ç”¨ &lt;code&gt;Crossplane&lt;/code&gt; åˆ†é…çš„ï¼Œå®ƒè´Ÿè´£åœ¨ AWS ä¸­é…ç½®è¿™äº› IAM æƒé™ã€‚&lt;/p&gt;

&lt;/div&gt;

&lt;p&gt;ä¸ºäº†ä½¿è·¯ç”±æ­£å¸¸å·¥ä½œï¼Œä½ è¿˜éœ€è¦å°† &lt;code&gt;HTTPRoute&lt;/code&gt; é™„åŠ åˆ°æ­£ç¡®çš„ &lt;code&gt;Gateway&lt;/code&gt; å¹¶æŒ‡å®šåŸŸåã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;echo.${domain_name}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å‡ ç§’é’Ÿåï¼Œè¯ä¹¦å°†è¢«åˆ›å»ºã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;kubectl get cert -n echo
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;NAME       READY   SECRET     AGE
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;echo-tls   True    echo-tls   43m
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ£€æŸ¥è¯ä¹¦ç¡®å®æ¥è‡ª Let&amp;rsquo;s Encryptï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;curl https://echo.cloud.ogenki.io -v 2&amp;gt;&amp;amp;1 | grep -A 6 &amp;#39;Server certificate&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;* Server certificate:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  subject: CN=echo.cloud.ogenki.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  start date: Sep 15 14:43:00 2023 GMT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  expire date: Dec 14 14:42:59 2023 GMT
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  subjectAltName: host &amp;#34;echo.cloud.ogenki.io&amp;#34; matched cert&amp;#39;s &amp;#34;echo.cloud.ogenki.io&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  issuer: C=US; O=Let&amp;#39;s Encrypt; CN=R3
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;*  SSL certificate verify ok.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æç¤º&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    GAPI è¿˜å…è®¸ä½ é…ç½® &lt;strong&gt;ç«¯åˆ°ç«¯çš„ TLS&lt;/strong&gt;ï¼Œä¸€ç›´åˆ°å®¹å™¨ã€‚è¿™æ˜¯é€šè¿‡é…ç½® &lt;code&gt;Gateway&lt;/code&gt; ä¸º &lt;code&gt;Passthrough&lt;/code&gt; æ¨¡å¼å¹¶ä½¿ç”¨ &lt;code&gt;TLSRoute&lt;/code&gt; èµ„æºæ¥å®Œæˆçš„ã€‚è¯ä¹¦ä¹Ÿå¿…é¡»ç”±æ‰§è¡Œ TLS ç»ˆæ­¢çš„ pod æºå¸¦ã€‚
&lt;/div&gt;

&lt;h3 id=&#34;åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº«-gateway&#34;&gt;åœ¨å¤šä¸ªå‘½åç©ºé—´ä¸­å…±äº« Gateway&lt;/h3&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å…±äº«ç½‘å…³&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å…±äº«ç½‘å…³&#34; srcset=&#34;
               /blog/cilium-gateway-api/shared-gateway_hu6695365609335332407.webp 400w,
               /blog/cilium-gateway-api/shared-gateway_hu14010442251536033886.webp 760w,
               /blog/cilium-gateway-api/shared-gateway_hu1081411389784665565.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-gateway-api/shared-gateway_hu6695365609335332407.webp&#34;
               width=&#34;760&#34;
               height=&#34;507&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å…±äº«ç½‘å…³
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;GAPI&lt;/code&gt;ï¼Œä½ å¯ä»¥åœ¨ &lt;code&gt;å‘½åç©ºé—´&lt;/code&gt; ä¹‹é—´è·¯ç”±æµé‡ã€‚è¿™å¾—ç›Šäºæ¯ä¸ªåŠŸèƒ½çš„ä¸åŒèµ„æºï¼šä¸€ä¸ª &lt;code&gt;Gateway&lt;/code&gt; å…è®¸é…ç½®åŸºç¡€è®¾æ–½ï¼Œä»¥åŠ &lt;code&gt;*Routes&lt;/code&gt;ã€‚è¿™äº›è·¯ç”±å¯ä»¥é™„åŠ åˆ°ä½äºå¦ä¸€ä¸ªå‘½åç©ºé—´ä¸­çš„ Gatewayã€‚å› æ­¤ï¼Œä¸åŒçš„å›¢é˜Ÿ/é¡¹ç›®å¯ä»¥å…±äº«ç›¸åŒçš„åŸºç¡€è®¾æ–½ç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œè¿™éœ€è¦æŒ‡å®šå“ªä¸ªè·¯ç”±å…è®¸å¼•ç”¨è¯¥ Gatewayã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸“é—¨ç”¨äºå†…éƒ¨å·¥å…·çš„ Gatewayï¼Œåä¸º &lt;code&gt;platform&lt;/code&gt;ã€‚é€šè¿‡ä½¿ç”¨ &lt;code&gt;allowedRoutes&lt;/code&gt; å‚æ•°ï¼Œæˆ‘ä»¬æ˜ç¡®æŒ‡å®šäº†å“ªäº›å‘½åç©ºé—´å…è®¸é™„åŠ åˆ°æ­¤ Gatewayã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/infrastructure/base/gapi/platform-gateway.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;infrastructure/base/gapi/platform-gateway.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;allowedRoutes&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespaces&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;from&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Selector&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchExpressions&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;key&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;kubernetes.io/metadata.name&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;operator&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;In&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;values&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;observability&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;flux-system&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;tls&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;mode&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Terminate&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;certificateRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;platform-tls&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;åœ¨å‘½åç©ºé—´ &lt;code&gt;observability&lt;/code&gt; å’Œ &lt;code&gt;flux-system&lt;/code&gt; ä¸­é…ç½®çš„ &lt;code&gt;HTTPRoutes&lt;/code&gt; é™„åŠ åˆ°æ­¤å”¯ä¸€çš„ &lt;code&gt;Gateway&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;parentRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;platform&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;infrastructure&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼Œä½¿ç”¨æ¥è‡ªäº‘æä¾›å•†çš„ç›¸åŒè´Ÿè½½å‡è¡¡å™¨ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;NLB_DOMAIN=$(kubectl get svc -n infrastructure cilium-gateway-platform -o jsonpath={.status.loadBalancer.ingress[0].hostname})
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;go&#34;&gt;dig +short ${NLB_DOMAIN}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;13.36.89.108
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;go&#34;&gt;dig +short grafana-mycluster-0.cloud.ogenki.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;13.36.89.108
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;&lt;/span&gt;&lt;span class=&#34;err&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;err&#34;&gt;&lt;/span&gt;&lt;span class=&#34;go&#34;&gt;dig +short gitops-mycluster-0.cloud.ogenki.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;13.36.89.108
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;div class=&#34;alert-note-title&#34;&gt;
    &lt;p&gt;æ³¨æ„&lt;/p&gt;
&lt;/div&gt;
&lt;div class=&#34;alert alert-note&#34;&gt;
    è¿™äº›å†…éƒ¨å·¥å…·ä¸åº”è¯¥æš´éœ²åœ¨äº’è”ç½‘ä¸Šï¼Œä½†æ˜¯ä½ çŸ¥é“ï¼šè¿™åªæ˜¯ä¸€ä¸ªæ¼”ç¤ºã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å†…éƒ¨ Gatewayï¼ˆç§æœ‰ IPï¼‰é€šè¿‡è°ƒæ•´æ³¨é‡Šå¹¶ä½¿ç”¨ç§æœ‰è¿æ¥ç³»ç»Ÿï¼ˆVPNã€éš§é“ç­‰ï¼‰æ¥å®ç°ã€‚
&lt;/div&gt;

&lt;h3 id=&#34;æµé‡åˆ†æµ&#34;&gt;æµé‡åˆ†æµ&lt;/h3&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-åˆ†æµ&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;åˆ†æµ&#34; srcset=&#34;
               /blog/cilium-gateway-api/split_hu2573309448358756362.webp 400w,
               /blog/cilium-gateway-api/split_hu15210160146444151996.webp 760w,
               /blog/cilium-gateway-api/split_hu15384968705509180727.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/cilium-gateway-api/split_hu2573309448358756362.webp&#34;
               width=&#34;760&#34;
               height=&#34;517&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      åˆ†æµ
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç”±æœåŠ¡ç½‘æ ¼å¸¸å¸¸æä¾›çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯åœ¨æœ‰æ–°ç‰ˆæœ¬å¯ç”¨æ—¶ï¼ˆA/B æµ‹è¯•æˆ–é‡‘ä¸é›€éƒ¨ç½²ï¼‰å¯¹éƒ¨åˆ†æµé‡æµ‹è¯•åº”ç”¨ç¨‹åºçš„èƒ½åŠ›ã€‚&lt;code&gt;GAPI&lt;/code&gt;é€šè¿‡ä½¿ç”¨æƒé‡æ¥å®ç°è¿™ä¸€ç‚¹ï¼Œä½¿å…¶å˜å¾—éå¸¸ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€ä¸ªå°† 5% çš„æµé‡è½¬å‘åˆ°æœåŠ¡ &lt;code&gt;echo-2-echo-server&lt;/code&gt; çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/apps/base/echo/httproute-split.yaml&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;apps/base/echo/httproute-split.yaml&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;hostnames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;s2&#34;&gt;&amp;#34;split-echo.${domain_name}&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1-echo-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;95&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-2-echo-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;weight&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;5&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è®©æˆ‘ä»¬æ£€æŸ¥åˆ†å‘æ˜¯å¦æŒ‰é¢„æœŸè¿›è¡Œï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://github.com/Smana/cilium-gateway-api/blob/main/scripts/check-split.sh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;scripts/check-split.sh&lt;/a&gt;&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;./scripts/check-split.sh https://split-echo.cloud.ogenki.io
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;echo-1 çš„è¯·æ±‚æ¬¡æ•°ï¼š95
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;echo-2 çš„è¯·æ±‚æ¬¡æ•°ï¼š5
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;ä¿®æ”¹æ ‡å¤´&#34;&gt;ä¿®æ”¹æ ‡å¤´&lt;/h3&gt;
&lt;p&gt;è¿˜å¯ä»¥æ›´æ”¹ HTTP &lt;strong&gt;æ ‡å¤´&lt;/strong&gt;ï¼šæ·»åŠ ã€ä¿®æ”¹æˆ–åˆ é™¤å®ƒä»¬ã€‚è¿™äº›ä¿®æ”¹å¯ä»¥é€šè¿‡åœ¨ &lt;code&gt;HTTPRoute&lt;/code&gt; æ¸…å•ä¸­ä½¿ç”¨ &lt;a href=&#34;https://gateway-api.sigs.k8s.io/api-types/httproute#filters-optional&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;filters&lt;/a&gt; åº”ç”¨äºè¯·æ±‚æ ‡å¤´æˆ–å“åº”æ ‡å¤´ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼Œæˆ‘ä»¬å°†åœ¨ &lt;strong&gt;è¯·æ±‚&lt;/strong&gt; ä¸­æ·»åŠ ä¸€ä¸ªæ ‡å¤´ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway.networking.k8s.io/v1beta1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;HTTPRoute&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;matches&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;path&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;PathPrefix&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;/req-header-add&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;filters&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RequestHeaderModifier&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;requestHeaderModifier&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;              &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;foo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;                &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;value&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;bar&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;backendRefs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo-1-echo-server&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;80&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;...&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­¤å‘½ä»¤å…è®¸æŸ¥çœ‹æ ‡å¤´æ˜¯å¦ç¡®å®å·²æ·»åŠ ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-console&#34; data-lang=&#34;console&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;curl -s https://echo.cloud.ogenki.io/req-header-add | jq &amp;#39;.request.headers&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;host&amp;#34;: &amp;#34;echo.cloud.ogenki.io&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;user-agent&amp;#34;: &amp;#34;curl/8.2.1&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;accept&amp;#34;: &amp;#34;*/*&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;x-forwarded-for&amp;#34;: &amp;#34;81.220.234.254&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;x-forwarded-proto&amp;#34;: &amp;#34;https&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;x-envoy-external-address&amp;#34;: &amp;#34;81.220.234.254&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;x-request-id&amp;#34;: &amp;#34;320ba4d2-3bd6-4c2f-8a97-74296a9f3f26&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;  &amp;#34;foo&amp;#34;: &amp;#34;bar&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;go&#34;&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;åˆ†é…é€‚å½“çš„æƒé™&#34;&gt;åˆ†é…é€‚å½“çš„æƒé™&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;GAPI&lt;/code&gt; æä¾›äº†ä¸€ç§æ¸…æ™°çš„æƒé™å…±äº«æ¨¡å‹ï¼Œç”¨äºç®¡ç†æµé‡è·¯ç”±åŸºç¡€è®¾æ–½ï¼ˆç”±é›†ç¾¤ç®¡ç†å‘˜ç®¡ç†ï¼‰å’Œåº”ç”¨ç¨‹åºï¼ˆç”±å¼€å‘äººå‘˜ç®¡ç†ï¼‰ä¹‹é—´çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;å¤šä¸ªè‡ªå®šä¹‰èµ„æºçš„å¯ç”¨æ€§å…è®¸ä½¿ç”¨ Kubernetes çš„ &lt;strong&gt;RBAC&lt;/strong&gt; é…ç½®ä»¥å£°æ˜æ€§æ–¹å¼åˆ†é…æƒé™ã€‚æˆ‘å·²ç»æ·»åŠ äº†ä¸€äº›ç¤ºä¾‹ï¼Œè¿™äº›ç¤ºä¾‹åœ¨æˆ‘çš„æ¼”ç¤ºé›†ç¾¤ä¸­æ²¡æœ‰æ•ˆæœï¼Œä½†å¯èƒ½ä¼šç»™ä½ ä¸€ä¸ªæƒ³æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢çš„é…ç½®æˆäºˆ &lt;code&gt;developers&lt;/code&gt; ç»„çš„æˆå‘˜åœ¨ echo å‘½åç©ºé—´å†…ç®¡ç† &lt;code&gt;HTTPRoutes&lt;/code&gt; çš„èƒ½åŠ›ï¼ŒåŒæ—¶ä»…æä¾›å¯¹ &lt;code&gt;Gateways&lt;/code&gt; çš„è¯»å–æƒé™ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Role&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gapi-developer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;apiGroups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;gateway.networking.k8s.io&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;httproutes&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;*&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;apiGroups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;gateway.networking.k8s.io&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;gateways&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;get&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;list&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RoleBinding&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gapi-developer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;echo&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Group&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;developers&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;roleRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Role&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gapi-developer&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id=&#34;ä¹ä¸€çœ‹æœ‰ç‚¹æ¨¡ç³Š&#34;&gt;ä¹ä¸€çœ‹æœ‰ç‚¹æ¨¡ç³Š&lt;/h2&gt;
&lt;p&gt;äººä»¬å¯èƒ½ä¼šå¯¹é€šå¸¸ç§°ä¸º &lt;code&gt;API ç½‘å…³&lt;/code&gt; çš„ä¸œè¥¿æ„Ÿåˆ°å›°æƒ‘ã€‚å·²ç»åˆ›å»ºäº† &lt;a href=&#34;https://gateway-api.sigs.k8s.io/faq/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;FAQ&lt;/a&gt; çš„ä¸€ä¸ªéƒ¨åˆ†ï¼Œä»¥æ¾„æ¸…å®ƒä¸ &lt;code&gt;Gateway API&lt;/code&gt; çš„ä¸åŒä¹‹å¤„ã€‚å°½ç®¡ GAPI æä¾›äº†é€šå¸¸åœ¨ API ç½‘å…³ä¸­æ‰¾åˆ°çš„åŠŸèƒ½ï¼Œä½†å®ƒä¸»è¦æ˜¯ Kubernetes çš„ä¸€ä¸ªç‰¹å®šå®ç°ã€‚ç„¶è€Œï¼Œé€‰æ‹©è¿™ä¸ªåç§°ç¡®å®å¯èƒ½å¼•èµ· &lt;strong&gt;æ··æ·†&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œè¯·æ³¨æ„ï¼Œæœ¬æ–‡ä»…å…³æ³¨å…¥ç«™æµé‡ï¼Œé€šå¸¸ç”± &lt;em&gt;Ingress Controllers&lt;/em&gt; ç®¡ç†ï¼Œç§°ä¸º &lt;a href=&#34;https://gateway-api.sigs.k8s.io/concepts/glossary/#northsouth-traffic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å—åŒ—&lt;/a&gt;ï¼Œè¿™å®é™…ä¸Šæ˜¯ GAPI çš„åˆå§‹èŒƒå›´ã€‚æœ€è¿‘çš„ä¸€ä¸ªåä¸º &lt;a href=&#34;https://gateway-api.sigs.k8s.io/concepts/gamma/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;GAMMA&lt;/strong&gt;&lt;/a&gt; çš„å€¡è®®æ—¨åœ¨å¤„ç† &lt;a href=&#34;https://gateway-api.sigs.k8s.io/concepts/glossary/#eastwest-traffic&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸œè¥¿æµé‡&lt;/a&gt; è·¯ç”±ï¼Œè¿™å°†åœ¨å°†æ¥æ ‡å‡†åŒ–æŸäº›å¸¸è§çš„åŠŸèƒ½ï¼Œé€šå¸¸ç”± &lt;code&gt;Service Meshes&lt;/code&gt; è§£å†³æ–¹æ¡ˆæä¾›ã€‚ï¼ˆæœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜… &lt;a href=&#34;https://kubernetes.io/blog/2023/08/29/gateway-api-v0-8/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ­¤æ–‡ç« &lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœ€åçš„æƒ³æ³•&#34;&gt;æœ€åçš„æƒ³æ³•&lt;/h2&gt;
&lt;p&gt;è€å®è¯´ï¼Œæˆ‘å·²ç»çŸ¥é“ &lt;strong&gt;Gateway API&lt;/strong&gt; æœ‰ä¸€æ®µæ—¶é—´äº†ã€‚å°½ç®¡æˆ‘è¯»äº†ä¸€äº›æ–‡ç« ï¼Œä½†æˆ‘å¹¶æ²¡æœ‰çœŸæ­£æ·±å…¥ç ”ç©¶è¿‡ã€‚æˆ‘ä¼šæƒ³ï¼šâ€œä¸ºä»€ä¹ˆè¦éº»çƒ¦å‘¢ï¼Ÿæˆ‘çš„ &lt;em&gt;Ingress Controller&lt;/em&gt; å¯ä»¥å·¥ä½œï¼Œè€Œä¸”è¿™éœ€è¦å­¦ä¹ æ›²çº¿ã€‚â€&lt;/p&gt;
&lt;p&gt;GAPI æ­£åœ¨å´­éœ²å¤´è§’ï¼Œå³å°†å‘å¸ƒ GA ç‰ˆæœ¬ã€‚å¤šä¸ª &lt;a href=&#34;https://gateway-api.sigs.k8s.io/implementations/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é¡¹ç›®&lt;/a&gt; å·²ç»æ‹¥æŠ±å®ƒï¼Œè¿™ä¸ªç”¨äºç®¡ç† Kubernetes å†…æµé‡çš„ API å°†è¿…é€Ÿæˆä¸ºæ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¿…é¡»è¯´ï¼Œé…ç½® GAPI æ„Ÿè§‰ç›´è§‚è€Œæ˜ç¡®ã€‚å®ƒçš„å®‰å…¨æ¨¡å‹å–å¾—äº†å¹³è¡¡ï¼Œèµ‹äºˆå¼€å‘äººå‘˜æƒåŠ›è€Œä¸ä¼šæŸå®³å®‰å…¨æ€§ã€‚è€Œä¸”æ— ç¼çš„åŸºç¡€è®¾æ–½ç®¡ç†ï¼Ÿä½ å¯ä»¥åœ¨ä¸è§¦åŠ &lt;code&gt;*Routes&lt;/code&gt; çš„æƒ…å†µä¸‹åœ¨ä¸åŒçš„å®ç°ä¹‹é—´åˆ‡æ¢ã€‚&lt;/p&gt;
&lt;p&gt;ç°åœ¨å°±ç”¨ &lt;code&gt;Cilium&lt;/code&gt; äº¤æ¢æˆ‘çš„ Ingress Controller å—ï¼Ÿ&lt;strong&gt;è¿˜æ²¡æœ‰ï¼Œä½†å®ƒå³å°†åˆ°æ¥&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—å¼ºè°ƒçš„æ˜¯ï¼ŒCilium çš„åŠŸèƒ½éå¸¸å¹¿æ³›ï¼šåœ¨ Kubernetes å‘¨å›´æœ‰å¤§é‡çš„å·¥å…·ï¼ŒCilium è„±é¢–è€Œå‡ºï¼Œæ‰¿è¯ºæä¾›æŒ‡æ ‡ã€è·Ÿè¸ªã€æœåŠ¡ç½‘æ ¼ã€å®‰å…¨æ€§ï¼Œä»¥åŠ &lt;em&gt;Ingress Controller&lt;/em&gt; ä¸ GAPIã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œéœ€è¦æ³¨æ„ä¸€äº›æŒ‘æˆ˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cilium/cilium/issues/21929&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TCP å’Œ UDP æ”¯æŒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/cilium/cilium/issues/21928&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GRPC æ”¯æŒ&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;éœ€è¦ä½¿ç”¨å˜å¼‚è§„åˆ™æ¥é…ç½®äº‘ç»„ä»¶ï¼ˆ&lt;a href=&#34;https://github.com/cilium/cilium/issues/25357&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Github Issue&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ¬æ–‡è®¨è®ºçš„è®¸å¤šåŠŸèƒ½ä»å¤„äºå®éªŒé˜¶æ®µã€‚ä¾‹å¦‚ï¼Œæœ€æ–°ç‰ˆæœ¬ï¼ˆæˆ‘å†™ä½œæ—¶çš„ &lt;code&gt;v1.14.2&lt;/code&gt;ï¼‰æ”¯æŒçš„ &lt;a href=&#34;https://github.com/cilium/cilium/pull/27472&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ‰©å±•åŠŸèƒ½&lt;/a&gt;ã€‚æˆ‘å°è¯•è®¾ç½®ä¸€ä¸ªç®€å•çš„ HTTP&amp;gt;HTTPS é‡å®šå‘ï¼Œä½†é‡åˆ°äº† &lt;a href=&#34;https://github.com/kubernetes-sigs/gateway-api/issues/1185&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™ä¸ªé—®é¢˜&lt;/a&gt;ã€‚å› æ­¤ï¼Œæˆ‘é¢„è®¡ API å°†æ¥ä¼šæœ‰ä¸€äº›ä¿®æ”¹ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è™½ç„¶æˆ‘åªæ˜¯æ¶‰åŠäº† Cilium çš„ GAPI èƒ½å¤Ÿæä¾›çš„ä¸€å°éƒ¨åˆ†å†…å®¹ï¼ˆè€å®è¯´ï¼Œè¿™ç¯‡æ–‡ç« å·²ç»ç›¸å½“é•¿äº†ï¼‰ï¼Œä½†æˆ‘å¸Œæœ›æˆ‘ä»¬å¯ä»¥å¾ˆå¿«åœ¨ç”Ÿäº§ä¸­ä½¿ç”¨å®ƒã€‚ä½†è€ƒè™‘åˆ°å‰é¢æåˆ°çš„å‡ ç‚¹ï¼Œæˆ‘å»ºè®®ç­‰å¾…ä¸€æ®µæ—¶é—´ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æƒ³ä¸ºæœªæ¥åšå‡†å¤‡ï¼Œé‚£ä¹ˆç°åœ¨æ˜¯æ—¶å€™äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://gateway-api.sigs.k8s.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://gateway-api.sigs.k8s.io/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.cilium.io/en/latest/network/servicemesh/gateway-api/gateway-api/#gs-gateway-api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://docs.cilium.io/en/latest/network/servicemesh/gateway-api/gateway-api/#gs-gateway-api&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://isovalent.com/blog/post/cilium-gateway-api/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://isovalent.com/blog/post/cilium-gateway-api/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://isovalent.com/blog/post/tutorial-getting-started-with-the-cilium-gateway-api/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://isovalent.com/blog/post/tutorial-getting-started-with-the-cilium-gateway-api/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Isovalent çš„ &lt;a href=&#34;https://isovalent.com/resource-library/labs/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;labs&lt;/a&gt; æ˜¯å¼€å§‹ä½¿ç”¨ Gateway API å¹¶ä¸”ä½ å°†è·å¾—æ–°çš„å¾½ç« ä»¥æ·»åŠ åˆ°ä½ çš„æ”¶è—ä¸­çš„å¥½æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Istio Sidecar çš„èµ„æºå’Œæ€§èƒ½ç®¡ç†ï¼šä»ç›‘æ§åˆ°è‡ªåŠ¨æ‰©ç¼©å®¹çš„æœ€ä½³å®è·µ</title>
      <link>https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/</link>
      <pubDate>Wed, 03 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://karlstoney.com/scaling-and-sizing-the-sidecar/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Scaling the Sidecar&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è®¨è®ºæˆ‘ä»¬å¦‚ä½•åœ¨å·¥ä½œè´Ÿè½½ä¸­æ‰©å±• Istio Sidecarï¼Œä»¥åŠå¦‚ä½•è€ƒè™‘ Sidecar èµ„æºä¸åº”ç”¨ç¨‹åºç´§å¯†è€¦åˆçš„å…³ç³»ã€‚&lt;/p&gt;
&lt;p&gt;ç›®å‰æœ‰å¾ˆå¤šå…³äº Istio æ–°çš„ &lt;a href=&#34;https://istio.io/v1.15/blog/2022/introducing-ambient-mesh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ambient Mesh&lt;/a&gt; çš„è®¨è®ºã€‚è¿™ç§éƒ¨ç½²æœåŠ¡ç½‘æ ¼çš„æ–°æ–¹æ³•æ”¾å¼ƒäº† Sidecarï¼Œè€Œé‡‡ç”¨äº†ä¸¤ä¸ªæ–°ç»„ä»¶ï¼Œ&lt;code&gt;ztunnel&lt;/code&gt;ï¼Œä¸€ä¸ªç”¨äºå¤„ç†æ ¸å¿ƒ L4 ç½‘ç»œé—®é¢˜çš„æ¯èŠ‚ç‚¹ç»„ä»¶ï¼Œä»¥åŠï¼ˆå¦‚æœéœ€è¦ï¼‰&lt;code&gt;waypoint proxy&lt;/code&gt; æ¥å¤„ç† L7 é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/image_hu12799437118765088342.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/image_hu1012734698454333988.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/image_hu12584093846004936965.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/image_hu12799437118765088342.webp&#34;
               width=&#34;760&#34;
               height=&#34;391&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ¥æºï¼š&lt;a href=&#34;https://istio.io/v1.15/blog/2022/introducing-ambient-mesh&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://istio.io/v1.15/blog/2022/introducing-ambient-mesh&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘å¬åˆ°çš„è¿œç¦» Sidecar çš„ä¸€ä¸ªä¸»è¦åŸå› æ˜¯ï¼Œæ‰©å±• Sidecar å¾ˆå¤æ‚ã€‚å¦‚æœåªä½¿ç”¨ L4 åŠŸèƒ½ï¼Œæˆ‘åŒæ„è¿™ä¸€è§‚ç‚¹ã€‚ç„¶è€Œï¼Œä½œä¸º L7 åŠŸèƒ½çš„é‡åº¦ç”¨æˆ·ï¼Œå¯¹æˆ‘æ¥è¯´ï¼Œä¼¼ä¹æˆ‘ä»¬åªæ˜¯åœ¨ç®¡ç† Waypoint ä»£ç†çš„è§„æ¨¡ï¼Œè€Œä¸æ˜¯ Sidecarã€‚å¯¹æˆ‘ä¸ªäººè€Œè¨€ï¼Œä¹Ÿè®¸æœ‰ç‚¹è‡ªç§ï¼Œå®ƒæ„Ÿè§‰åƒæ˜¯ä¸€ä¸ªæ¨ªå‘ï¼ˆå……å…¶é‡ï¼‰çš„æ­¥éª¤ï¼Œè€Œä¸æ˜¯å‰è¿›ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œæˆ‘å¹¶ä¸è§‰å¾—ç®¡ç† Sidecar èµ„æºå¾ˆç—›è‹¦ï¼Œæ‰€ä»¥æˆ‘å¾ˆéš¾äº§ç”Ÿå…±é¸£ã€‚è¿™éƒ¨åˆ†æ˜¯å› ä¸ºæˆ‘ä»æ—©æœŸå°±å¼€å§‹ä½¿ç”¨ Istioï¼Œå¹¶å»ºç«‹äº†æœ‰åŠ©äºè¿™ä¸€è¿‡ç¨‹çš„å·¥å…·å’Œæµç¨‹ã€‚æˆ‘æ„è¯†åˆ°æˆ‘ä»æœªçœŸæ­£åˆ†äº«è¿‡å…³äºæˆ‘ä»¬å¦‚ä½•ç®¡ç†è¿™ä¸€è¿‡ç¨‹çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä¸€äº›èƒŒæ™¯&#34;&gt;ä¸€äº›èƒŒæ™¯&lt;/h3&gt;
&lt;p&gt;èƒŒæ™¯å¾ˆé‡è¦ï¼Œä½ å¦‚ä½•æ€è€ƒç›‘æ§å’Œä¼¸ç¼©å°†å–å†³äºä½ å¦‚ä½•æ„å»ºä½ çš„ Kubernetes è®¾ç½®ï¼Œä»¥åŠä½ çš„ç»„ç»‡ç»“æ„ã€‚ä¹Ÿæ²¡æœ‰ä¸€ç§å¤§å°é€‚åˆæ‰€æœ‰æƒ…å†µï¼Œè¿™åªæ˜¯å¯¹æˆ‘ä»¬æœ‰æ•ˆçš„æ–¹æ³•ã€‚å› æ­¤æˆ‘ç›¸ä¿¡ Ambient æ¨¡å¼å°†å‡å°‘æŸäº› Operator çš„å¤æ‚æ€§ï¼Œä½†å¯èƒ½ä¼šå¢åŠ å…¶ä»– Operator çš„å¤æ‚æ€§ï¼ˆæˆ‘æ‰¿è®¤ï¼Œè¿™å¯èƒ½æ˜¯å°‘æ•°æƒ…å†µï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿è¡Œå¤§çº¦ 700 ä¸ªä¸ªåˆ«æœåŠ¡ï¼ˆâ€œå·¥ä½œè´Ÿè½½â€ï¼‰ã€‚æ¯ä¸ªæœåŠ¡éƒ½æœ‰ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨è‡ªå·±çš„ &lt;code&gt;Namespace&lt;/code&gt; ä¸­è¿è¡Œ&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è‡ªå·±çš„ &lt;code&gt;Service Account&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;æ‹¥æœ‰è‡ªå·±çš„ &lt;code&gt;Service&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;ç”±è‡ªå·±çš„éš”ç¦» CI/CD æµæ°´çº¿éƒ¨ç½²&lt;/li&gt;
&lt;li&gt;ä» Istio å’Œç½‘ç»œç­–ç•¥çš„è§’åº¦æ¥çœ‹ï¼Œéƒ½åœ¨é»˜è®¤æ‹’ç»çš„è®¾ç½®ä¸­è¿è¡Œ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/workload_hu7965436511625925334.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/workload_hu17373026859141641931.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/workload_hu7541304929048414153.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/workload_hu7965436511625925334.webp&#34;
               width=&#34;251&#34;
               height=&#34;191&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œå‘½åç©ºé—´æ˜¯å·¥ä½œè´Ÿè½½çš„è¾¹ç•Œï¼Œè¿™æ˜¯ä¸€ç§ä¸€å¯¹ä¸€çš„å…³ç³»ï¼Œè€Œä¸”æ˜¯ä¸€æ¡åšå†³çš„è§„åˆ™ã€‚å› æ­¤ï¼Œæˆ‘ç›¸ä¿¡æˆ‘ä»¬ä¹Ÿä¼šä¸ºæ¯ä¸ªå‘½åç©ºé—´åˆ›å»ºä¸€ä¸ª waypoint ä»£ç†ã€‚æˆ‘ä»¬ä¸ä¼šåœ¨å¤šä¸ªå·¥ä½œè´Ÿè½½ä¹‹é—´å…±äº« waypoint ä»£ç†ï¼Œå› ä¸ºè¿™ä¼šå¯¼è‡´è€¦åˆï¼ˆé£é™©/å†²å‡»èŒƒå›´ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å°†å¾—åˆ°ç±»ä¼¼äºè¿™æ ·çš„ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/waypoint_hu5862634175922506225.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/waypoint_hu321306356572626737.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/waypoint_hu17519825754513766768.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/waypoint_hu5862634175922506225.webp&#34;
               width=&#34;361&#34;
               height=&#34;191&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸å…¶æ‰©å±• &lt;code&gt;Sidecar&lt;/code&gt;ï¼Œæˆ‘ä»¬å°†æ‰©å±• &lt;code&gt;Waypoint&lt;/code&gt; - è¿™å°±æ˜¯æˆ‘æ‰€è¯´çš„å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œæ˜¯æ¨ªå‘çš„ã€‚æˆ‘ä»¬ä»ç„¶éœ€è¦è€ƒè™‘æŸç§è§„æ¨¡çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯è§‚æµ‹æ€§åªæ˜¯å¦ä¸€ä¸ªå®¹å™¨&#34;&gt;å¯è§‚æµ‹æ€§ï¼šåªæ˜¯å¦ä¸€ä¸ªå®¹å™¨&lt;/h3&gt;
&lt;p&gt;è¿™åŸºæœ¬ä¸Šæ€»ç»“äº†æˆ‘å¯¹ Sidecar çš„çœ‹æ³•ã€‚å®ƒåªæ˜¯ä½ çš„å·¥ä½œè´Ÿè½½ä¸­çš„å¦ä¸€ä¸ªå®¹å™¨ã€‚ä¸ºäº†&lt;a href=&#34;https://karlstoney.com/managing-your-costs-on-kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ‰æ•ˆç®¡ç†&lt;/a&gt;æˆæœ¬ï¼ˆ&amp;ldquo;åˆé€‚å¤§å°&amp;rdquo;ï¼‰ï¼Œä½ åº”è¯¥å·²ç»åœ¨ç›‘æ§ä½ çš„å·¥ä½œè´Ÿè½½æ—¶ç›‘æ§å…³é”®æŒ‡æ ‡ï¼Œè¿™äº›æŒ‡æ ‡è‡ªç„¶æ‰©å±•åˆ°æ¶µç›– &lt;code&gt;istio-proxy&lt;/code&gt;ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œè¿™äº›æŒ‡æ ‡åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CPU å’Œå†…å­˜ &lt;strong&gt;è¯·æ±‚&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;kube_pod_container_resource_requests&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;CPU å’Œå†…å­˜ &lt;strong&gt;ä½¿ç”¨&lt;/strong&gt;ï¼ˆä¾‹å¦‚ &lt;code&gt;container_memory_working_set_bytes&lt;/code&gt;ï¼‰&lt;/li&gt;
&lt;li&gt;CPU å’Œå†…å­˜ &lt;strong&gt;è®¡ç®—åˆ©ç”¨ç‡&lt;/strong&gt;ï¼ˆUsage / Requestsï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æš‚æ—¶å¿½ç•¥ Istioï¼Œå¦‚æœä½ æ²¡æœ‰åšä¸Šè¿°æ“ä½œï¼Œé‚£ä¹ˆä½ åº”è¯¥å¼€å§‹åšã€‚ä¸ºäº†å¸®åŠ©ä½ ï¼Œè¿™æ˜¯æˆ‘ç”¨äº CPU è®¡ç®—åˆ©ç”¨ç‡çš„æŒ‡æ ‡ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;record&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;container_cpu_usage_against_request:pod:rate1m&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;   &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;expr&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;&lt;span class=&#34;sd&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    (   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      count(kube_pod_container_resource_requests{resource=&amp;#34;cpu&amp;#34;, container!=&amp;#34;&amp;#34;}) by (container, pod, namespace)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      *   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      avg(
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        irate(
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;          container_cpu_usage_seconds_total{container!=&amp;#34;&amp;#34;}[1m]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        )   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      ) by (container, pod, namespace)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    )   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    /   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    avg(
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      avg_over_time(
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        kube_pod_container_resource_requests{resource=&amp;#34;cpu&amp;#34;, container!=&amp;#34;&amp;#34;}[1m]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      )   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    ) by (container, pod, namespace) * 100 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    *   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    on(pod) group_left(workload) (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      avg by (pod, workload) (
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        label_replace(kube_pod_info{created_by_kind=~&amp;#34;ReplicaSet|Job&amp;#34;}, &amp;#34;workload&amp;#34;, &amp;#34;$1&amp;#34;, &amp;#34;created_by_name&amp;#34;, &amp;#34;^(.*)-([^-]+)$&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        or  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        label_replace(kube_pod_info{created_by_kind=~&amp;#34;DaemonSet|StatefulSet&amp;#34;}, &amp;#34;workload&amp;#34;, &amp;#34;$1&amp;#34;, &amp;#34;created_by_name&amp;#34;, &amp;#34;(.*)&amp;#34;)
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        or  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        label_replace(kube_pod_info{created_by_kind=&amp;#34;Node&amp;#34;}, &amp;#34;workload&amp;#34;, &amp;#34;node&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;&amp;#34;) 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        or  
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;        label_replace(kube_pod_info{created_by_kind=&amp;#34;&amp;#34;}, &amp;#34;workload&amp;#34;, &amp;#34;none&amp;#34;, &amp;#34;&amp;#34;, &amp;#34;&amp;#34;) 
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;      )   
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;sd&#34;&gt;    )&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;    
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ä½ ä¼šæ³¨æ„åˆ°åœ¨è¿™ä¸ªæŒ‡æ ‡ä¸­ï¼Œæˆ‘è¿˜ä¸ &lt;code&gt;kube_pod_info&lt;/code&gt; è¿›è¡Œäº†å…³è”ï¼Œè¿™ä¸ºæˆ‘çš„æŒ‡æ ‡æä¾›äº†ä¸€äº›é¢å¤–çš„ç»´åº¦ï¼Œç‰¹åˆ«æ˜¯ &lt;code&gt;workload&lt;/code&gt;ã€‚è¿™ä»…åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªéƒ¨ç½²ä¸ä¸€ä¸ªå‘½åç©ºé—´ç›¸å¯¹åº”ï¼Œç­‰äºä¸€ä¸ªå·¥ä½œè´Ÿè½½çš„å…³ç³»æ—¶æ‰æœ‰æ•ˆã€‚è¿™æ˜¯å¯é€‰çš„ï¼Œåªæ˜¯å¸®åŠ©æˆ‘åœ¨å„ä¸ªçº§åˆ«æŸ¥çœ‹è¿™ä¸ªæŒ‡æ ‡ï¼ŒåŒ…æ‹¬ &lt;code&gt;container&lt;/code&gt;ã€&lt;code&gt;pod&lt;/code&gt;ã€&lt;code&gt;node&lt;/code&gt; æˆ– &lt;code&gt;workload&lt;/code&gt;ã€‚è¿™æ ·åšå°†è‡ªç„¶åœ°ä¸ºä½ çš„æ‰€æœ‰å®¹å™¨æä¾›æ•°æ®ï¼Œå½“ç„¶ä¹ŸåŒ…æ‹¬ä½ çš„ Sidecarï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-08.33.17_hu4716615232599171703.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-08.33.17_hu5284750418613546213.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-08.33.17_hu13237787150320130034.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-08.33.17_hu4716615232599171703.webp&#34;
               width=&#34;760&#34;
               height=&#34;348&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;sidecar-ä¸å·¥ä½œè´Ÿè½½ä¸€èµ·æ‰©å±•&#34;&gt;Sidecar ä¸å·¥ä½œè´Ÿè½½ä¸€èµ·æ‰©å±•&lt;/h3&gt;
&lt;p&gt;å¯¹äº HTTP å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ° Sidecar çš„æ‰©å±•æ–¹å¼ä¸åº•å±‚åº”ç”¨ç¨‹åºéå¸¸ç›¸ä¼¼ã€‚ä½ å¯ä»¥åœ¨ä¸Šé¢çš„æˆªå›¾ä¸­çœ‹åˆ° &lt;code&gt;istio-proxy&lt;/code&gt; å®¹å™¨çš„ &amp;ldquo;è®¡ç®—åˆ©ç”¨ç‡&amp;rdquo; å¦‚ä½•ç´§å¯†è·Ÿéš &lt;code&gt;master&lt;/code&gt; å®¹å™¨ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯æˆ‘çœŸæ­£å–œæ¬¢ Sidecar æ¨¡å¼çš„åœ°æ–¹ã€‚ä½ çš„ Sidecar åˆ©ç”¨ç‡ä¸ä½ çš„å·¥ä½œè´Ÿè½½åˆ©ç”¨ç‡ç´§å¯†è€¦åˆï¼Œè€Œå·¥ä½œè´Ÿè½½åˆ©ç”¨ç‡ä¸å·¥ä½œè´Ÿè½½çš„å‰¯æœ¬æ•°é‡ç´§å¯†è€¦åˆã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ°´å¹³æ‰©å±•å·¥ä½œè´Ÿè½½ï¼Œåˆ©ç”¨ç‡å°†ä¿æŒå¤§è‡´ç›¸åŒã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥çœ‹åˆ° &lt;code&gt;master&lt;/code&gt; å®¹å™¨çš„åˆ©ç”¨ç‡å³°å€¼ä¸º 75%ï¼Œè€Œ &lt;code&gt;istio-proxy&lt;/code&gt; çš„åˆ©ç”¨ç‡ä¸º 60%ï¼Œå¦‚æœæˆ‘ä»¬å°†å‰¯æœ¬æ•°é‡åŠ å€ï¼Œè¿™ä¸¤ä¸ªå€¼ä¼šæ¾æ•£å‡åŠï¼Œä½†ä¿æŒå¤§è‡´ä¸€è‡´ã€‚æˆ‘ä»¬åªæ˜¯æ°´å¹³æ‰©å±•ä¸€ä¸ª &lt;code&gt;Deployment&lt;/code&gt; å¯¹è±¡ï¼Œè€Œä¸æ˜¯ä¸¤ä¸ªã€‚æˆ‘ä»¬è®¤ä¸ºè¿™æ›´å®¹æ˜“ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å‘åº”ç”¨ç¨‹åºæ‰€æœ‰è€…æä¾›çš„æŒ‡å¯¼æ˜¯ï¼Œæˆ‘ä»¬å¸Œæœ›åˆ©ç”¨ç‡åœ¨å³°å€¼æ—¶ä¿æŒåœ¨ 75% å·¦å³ã€‚åœ¨è¿™é‡Œï¼Œäººä»¬è‡ªç„¶ä¼šé—®ä¸ºä»€ä¹ˆæˆ‘ä»¬ä¸ä½¿ç”¨è‡ªåŠ¨æ‰©å±•ã€‚è‡ªåŠ¨æ‰©å±•ä¾èµ–äºåº•å±‚äº‘æä¾›å•†æä¾›çš„è®¡ç®—èµ„æºã€‚æˆ‘ä»¬æ›¾ç»é‡åˆ°è¿‡å¤šæ¬¡å½±å“å®¢æˆ·çš„äº‹ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬æ— æ³•æŒ‰éœ€æ‰©å±•ï¼ŒåŸå› æ˜¯åº•å±‚äº‘æä¾›å•†çš„å®¹é‡å­˜åœ¨é—®é¢˜ã€‚æ­¤å¤–ï¼Œè‡ªåŠ¨æ‰©å±•ä¼šå¸¦æ¥å»¶è¿Ÿï¼Œå¾ˆéš¾å¯¹çªç„¶çš„è´Ÿè½½æ€¥å‰§å¢åŠ åšå‡ºå“åº”ï¼Œå› æ­¤å®ƒåªå¯¹å…·æœ‰æ˜æ˜¾é€æ¸å­£èŠ‚æ€§çš„å·¥ä½œè´Ÿè½½æœ‰æ•ˆï¼Œå°±åƒä¸Šé¢çš„å·¥ä½œè´Ÿè½½ä¸€æ ·ã€‚æˆ‘ä»¬è®¤ä¸ºä¸è‡ªåŠ¨æ‰©å±•ç›¸å…³çš„æˆæœ¬èŠ‚çœä¸å€¼å¾—ä¸ä¸èƒ½å¯¹éœ€æ±‚åšå‡ºååº”çš„é£é™©ç›¸åŒ¹é…ï¼Œå› æ­¤æˆ‘ä»¬ä¼šç•¥å¾®è¿‡åº¦é…ç½®æˆ‘ä»¬çš„å·¥ä½œè´Ÿè½½ï¼ˆå› æ­¤æ˜¯ 75%ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœä½ å¯¹è‡ªåŠ¨æ‰©å±•æ„Ÿåˆ°æ»¡æ„ï¼Œä½ å¯ä»¥åœ¨è‡ªåŠ¨æ‰©å±•é…ç½®ä¸­è®¾ç½®ç›®æ ‡ CPUï¼Œç„¶åå°±å¯ä»¥äº†ã€‚ä½ æœ‰ä¸€ä¸ªå·¥ä½œè´Ÿè½½ï¼Œä»¥åŠä¸€ä¸ªä¸ä¹‹ç´§å¯†ç›¸å…³çš„ Sidecarï¼Œå®ƒä»¬ä¸€èµ·æ‰©å±•ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯æˆ‘å¯¹ Waypoint çš„çœ‹æ³•ã€‚å› ä¸ºåœ¨æˆ‘ä»¬çš„è®¾ç½®ä¸­ï¼Œæˆ‘ä»¬æ¯ä¸ªå·¥ä½œè´Ÿè½½éƒ½æœ‰ä¸€ä¸ª waypoint ä»£ç†ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ªéœ€è¦ä»¥ä¸åŒæ–¹å¼ä½†åŒæ­¥æ‰©å±•çš„ç‹¬ç«‹éƒ¨ç½²ï¼Œè¿™å°†è§£è€¦äº†æˆ‘ä»¬è‡ªèº«æœ‰æ„å…³è”çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è®¾ç½®æ­£ç¡®çš„-cpu-å’Œå†…å­˜å€¼&#34;&gt;è®¾ç½®æ­£ç¡®çš„ CPU å’Œå†…å­˜å€¼&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªç›¸å¯¹å¥åº·çš„å·¥ä½œè´Ÿè½½ã€‚&lt;code&gt;istio-proxy&lt;/code&gt; å®¹å™¨è¢«åˆ†é…äº†é€‚åˆå·¥ä½œè´Ÿè½½é…ç½®æ–‡ä»¶çš„ &lt;code&gt;CPU&lt;/code&gt; é‡ï¼Œå…è®¸å…¶åˆ©ç”¨ç‡ç´§å¯†è·Ÿè¸ªåº•å±‚åº”ç”¨ç¨‹åºçš„åˆ©ç”¨ç‡ã€‚ç»éªŒå‘Šè¯‰æˆ‘ï¼Œä¸€æ—¦ä½ å°†è¿™ä¸¤è€…å¯¹é½ï¼Œå®ƒä»¬å°±ä¸ä¼šæ¾æ•£å¯¹é½ã€‚å®ƒä»¬ä¼šæ¼‚ç§»çš„å”¯ä¸€æ—¶é—´æ˜¯å¦‚æœä»»ä¸€å®¹å™¨çš„æ€§èƒ½é…ç½®å‘ç”Ÿäº†æ˜¾è‘—å˜åŒ–ï¼ˆä¾‹å¦‚ï¼Œå¦‚æœå¼€å‘äººå‘˜å°†åº”ç”¨ç¨‹åºæ€§èƒ½æé«˜äº† 2 å€ï¼Œåˆ™ &lt;code&gt;master&lt;/code&gt; çš„åˆ©ç”¨ç‡ä¼šä¸‹é™ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ AutoTraderï¼Œæˆ‘ä»¬çš„å¹³å°å›¢é˜Ÿè´Ÿè´£æ„å»ºâ€œäº¤ä»˜å¹³å°â€ï¼Œå¼€å‘äººå‘˜å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°å…¶ä¸­ï¼Œä½†åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜è´Ÿè´£ç¡®å®šå…¶å·¥ä½œè´Ÿè½½çš„å¤§å°ï¼ˆCPU å’Œ RAMï¼‰ã€‚å¹³å°å›¢é˜Ÿæ„å»ºäº†å¸®åŠ©ä»–ä»¬åšå‡ºæ˜æ™ºå†³ç­–çš„å·¥å…·ï¼Œæ¶‰åŠè¿™äº›å€¼ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€ç®€å•çš„æŠ½è±¡ã€‚æˆ‘ä»¬ä¸è®©å¼€å‘äººå‘˜ç¼–å†™ 100 ä¸ª Kubernetes æ¸…å•æ¥éƒ¨ç½²å·¥ä½œè´Ÿè½½ã€‚ä»–ä»¬ä¸éœ€è¦å…³å¿ƒ Istio &lt;code&gt;VirtualServices&lt;/code&gt;ã€&lt;code&gt;Sidecars&lt;/code&gt;ã€Kubernetes &lt;code&gt;Deployments&lt;/code&gt; æˆ–è®°ä½åœ¨å“ªé‡Œæ”¾ç½®æ³¨é‡Šä»¥æ­£ç¡®è®¾ç½® Sidecar çš„è§„æ¨¡ã€‚ç›¸åï¼Œæˆ‘ä»¬è¦æ±‚åœ¨ä»–ä»¬çš„å­˜å‚¨åº“ä¸­æä¾›ä¸€ä¸ª yaml æ–‡ä»¶ï¼Œå…¶å†…å®¹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;nt&#34;&gt;deployment&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;500m&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;80Mi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;container&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;replicas&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;6&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;cpu&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;1000m&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;memory&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;956Mi&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;å› æ­¤ï¼Œä½ å¯ä»¥çœ‹åˆ°ï¼ŒæœåŠ¡çš„æ‰€æœ‰è€…è´Ÿè´£è®¾ç½®å…¶ &lt;code&gt;master&lt;/code&gt; å®¹å™¨å’Œå…¶ &lt;code&gt;istio-proxy&lt;/code&gt; çš„èµ„æºã€‚æˆ‘ä»¬çš„è´£ä»»æ˜¯æ„å»ºå·¥å…·ï¼Œå¸®åŠ©ä»–ä»¬åœ¨é€‰æ‹©è¿™äº›å€¼æ—¶åšå‡ºæ˜æ™ºå†³ç­–ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å·²ç»çœ‹åˆ°äº†æˆ‘ä»¬å¦‚ä½•åœ¨ä¸Šé¢çš„ Grafana ä»ªè¡¨æ¿ä¸­ä½¿ç”¨ &amp;ldquo;Utilisation&amp;rdquo; ç­‰æŒ‡æ ‡æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†æˆ‘ä»¬è¿˜åšäº†ä¸€äº›ç§°ä¸º &amp;ldquo;å»ºè®®&amp;rdquo; çš„äº‹æƒ…ã€‚è¿™äº›æ˜¯æˆ‘ä»¬å‘åº”ç”¨ç¨‹åºæ‰€æœ‰è€…æä¾›çš„æœ‰å…³ä¼˜åŒ–é…ç½®å…¶æœåŠ¡çš„æç¤ºï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.19.52_hu10011367135531224503.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.19.52_hu10140888739333339297.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.19.52_hu8159312785396567919.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.19.52_hu10011367135531224503.webp&#34;
               width=&#34;760&#34;
               height=&#34;422&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°æˆ‘ä»¬æœ‰ä¸€ä¸ªåä¸º &lt;code&gt;ProxyMasterImbalance&lt;/code&gt; çš„å»ºè®®ã€‚å¦‚æœæˆ‘ä»¬æ£€æµ‹åˆ°ç»™å®šå·¥ä½œè´Ÿè½½å†…çš„ &lt;code&gt;master&lt;/code&gt; å’Œ &lt;code&gt;istio-proxy&lt;/code&gt; å®¹å™¨ä¹‹é—´çš„æ¼‚ç§»è¶…è¿‡ 30%ï¼Œåˆ™æ­¤å»ºè®®å°†å¤„äºæ´»åŠ¨çŠ¶æ€ã€‚ä»¥ä¸‹æ˜¯æ­¤å»ºè®®è§¦å‘çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.44.09_hu14097461783065689385.webp 400w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.44.09_hu11904907019421485240.webp 760w,
               /blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.44.09_hu7605417550200846204.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/scaling-and-sizing-the-sidecar/Screenshot-2023-10-03-at-09.44.09_hu14097461783065689385.webp&#34;
               width=&#34;760&#34;
               height=&#34;58&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h3&gt;
&lt;p&gt;å¸Œæœ›ä½ å¯ä»¥çœ‹åˆ°åœ¨å¤§å°è°ƒæ•´ Sidecar æ–¹é¢ï¼Œå®ƒå¦‚ä½•å¯ä»¥è½»æ¾åœ°èå…¥åˆ°ä½ ç°æœ‰çš„ç”¨äºå¤§å°è°ƒæ•´å·¥ä½œè´Ÿè½½çš„ä¸šåŠ¡æµç¨‹ä¸­ã€‚æ— è®ºå¦‚ä½•ï¼Œä½ éƒ½åº”è¯¥è¿™æ ·åšï¼Œä»¥ä¿æŒä½ çš„åŸºç¡€æ¶æ„çš„å¥åº·åˆ©ç”¨ç‡ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»å»ºç«‹äº†ä¸€ç§æ–‡åŒ–ï¼Œå°ç»„å…³å¿ƒå¹¶æ‹¥æœ‰ä»–ä»¬çš„è½¯ä»¶åœ¨ç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œï¼Œå…¶ä¸­åŒ…æ‹¬å…³é”®çš„ CFRï¼ˆæˆæœ¬ï¼‰ï¼Œä»–ä»¬çŸ¥é“é€šè¿‡æŒæ¡è¿™äº›äº‹ç‰©ï¼Œä»–ä»¬æ­£åœ¨ä¸ºæ›´å¤§çš„ç›®æ ‡åšå‡ºè´¡çŒ®ï¼Œæ€»ä½“è€Œè¨€ï¼Œä»–ä»¬åšåˆ°äº†ã€‚è‡³å…³é‡è¦çš„æ˜¯ï¼Œä»–ä»¬å·²ç»å…³å¿ƒä»–ä»¬çš„ &lt;code&gt;master&lt;/code&gt; å®¹å™¨åˆ©ç”¨ç‡ï¼Œå› æ­¤ &lt;code&gt;istio-proxy&lt;/code&gt; åªæ˜¯ä»–ä»¬éœ€è¦è®¾ç½® 2 ä¸ªå€¼ï¼ˆCPU/å†…å­˜ï¼‰çš„å¦ä¸€ä¸ªå®¹å™¨ï¼Œæˆ‘ä»¬æä¾›äº†ä½¿å…¶å°½å¯èƒ½å®¹æ˜“çš„æ•°æ®ï¼Œè€Œåœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ - è¿™åªæ˜¯ä½ éœ€è¦è°ƒæ•´ä¸€æ¬¡çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è¿˜æƒ³æŒ‡å‡ºï¼Œè¿™ç¯‡æ–‡ç« ä¸“é—¨æ€è€ƒäº†è§„æ¨¡çš„é—®é¢˜ã€‚å°†ä»£ç†ä¸åº”ç”¨ç¨‹åºåˆ†ç¦»å‡ºæ¥è¿˜å­˜åœ¨å…¶ä»–æ½œåœ¨ä¼˜åŠ¿ï¼ˆä¾‹å¦‚éš”ç¦»å‡çº§ï¼‰ã€‚ä¸è¿‡å†æ¬¡å¼ºè°ƒï¼Œæˆ‘ä¸ªäººè®¤ä¸ºè¿™æœ‰åˆ©æœ‰å¼Šï¼ˆå°±åƒæŠ€æœ¯ä¸­çš„å¤§å¤šæ•°å†³ç­–ä¸€æ ·ï¼‰ï¼Œä½†è¿™æ˜¯å¦ä¸€å¤©çš„åšå®¢æ–‡ç« ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>OpenTelemetry ä¸å¯è§‚æµ‹æ€§ï¼šå±•æœ›æœªæ¥</title>
      <link>https://cloudnativecn.com/blog/opentelemetry-and-observability-looking-forward/</link>
      <pubDate>Tue, 02 Jan 2024 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/opentelemetry-and-observability-looking-forward/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/opentelemetry-and-observability-looking-forward/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry and Observability: Looking Forward&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æ¢è®¨ä¸€äº›ä»¤äººå…´å¥‹çš„è¶‹åŠ¿ï¼Œè€ƒè™‘åˆ°æˆ‘ä»¬æœŸå¾… 2024 å¹´ä¼šæœ‰ä»€ä¹ˆæ ·çš„å¯è§‚æµ‹æ€§å‘å±•ã€‚&lt;/p&gt;
&lt;p&gt;éšç€å¹´åº•çš„ä¸´è¿‘ï¼Œç°åœ¨æ˜¯ä¸€ä¸ªåœä¸‹æ¥æ€è€ƒçš„å¥½æ—¶æœºã€‚2023 å¹´å¯¹äº OpenTelemetry æ¥è¯´æ˜¯ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼Œå› ä¸ºå…¶ä¸‰ä¸ªåŸºæœ¬ä¿¡å·ï¼Œè·Ÿè¸ªã€åº¦é‡å’Œæ—¥å¿—ï¼Œéƒ½è¾¾åˆ°äº†ç¨³å®šç‰ˆæœ¬ã€‚è¿™ä¸€æˆå°±æ ‡å¿—ç€&lt;a href=&#34;https://thenewstack.io/opentelemetry-gaining-traction-from-companies-and-vendors/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry&lt;/a&gt;æœ€åˆæ„¿æ™¯çš„å®ç°ï¼Œå³æä¾›ä¸€ä¸ªåŸºäºæ ‡å‡†çš„æ¡†æ¶ï¼Œç”¨äºä»ªå™¨åŒ–å’Œæ”¶é›†å¯è§‚æµ‹æ€§æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬æŠ“ä½è¿™ä¸ªæœºä¼šï¼Œæ¢è®¨ä¸€ä¸‹æˆ‘ä»¬æ‰€è§è¯çš„ä¸€äº›ä»¤äººå…´å¥‹çš„è¶‹åŠ¿ï¼Œæ·±å…¥ç ”ç©¶åˆ›æ–°çš„äº§å“å’Œç”¨ä¾‹ï¼Œå¹¶åœ¨æœŸå¾… 2024 å¹´çš„åˆ°æ¥æ—¶æ·±æ€ç†Ÿè™‘åœ°è€ƒè™‘å¯è§‚æµ‹æ€§çš„ä¸æ–­æ¼”å˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;åº¦é‡æ ‡å‡†çš„å´­éœ²å¤´è§’&#34;&gt;åº¦é‡æ ‡å‡†çš„å´­éœ²å¤´è§’&lt;/h2&gt;
&lt;p&gt;å°½ç®¡ OpenTelemetry å…³äºåº¦é‡çš„è§„èŒƒåœ¨ 2022 å¹´ 5 æœˆè¢«å®£å¸ƒä¸ºç¨³å®šç‰ˆæœ¬ï¼Œä½†ä»Šå¹´çœ‹åˆ°äº†å…¶è¢«å¹¿æ³›é‡‡ç”¨ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ä»ä¸šè€…çš„æ–‡ç« ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”± VMware çš„ Matthew Kocher å’Œ Carson Long æ’°å†™çš„æ–‡ç« ï¼Œæ ‡é¢˜ä¸ºâ€œ&lt;a href=&#34;https://opentelemetry.io/blog/2023/cloud-foundry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½“éªŒæŠ¥å‘Šï¼šåœ¨ Cloud Foundry ä¸­é‡‡ç”¨ OpenTelemetry è¿›è¡Œåº¦é‡&lt;/a&gt;â€ã€‚&lt;/li&gt;
&lt;li&gt;æˆ‘ä»¬è‡ªå·±çš„ Matheus Nogueira æ’°å†™çš„æ–‡ç« ï¼Œæ ‡é¢˜ä¸ºâ€œ&lt;a href=&#34;https://tracetest.io/blog/adding-opentelemetry-metrics-in-your-go-app&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ä½ çš„ Go åº”ç”¨ç¨‹åºä¸­æ·»åŠ  OpenTelemetry åº¦é‡&lt;/a&gt;â€ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å±•æœ› 2024 å¹´ï¼Œå¯ä»¥é¢„æœŸä¼šçœ‹åˆ°ç±»ä¼¼çš„æ—¥å¿—è¿åŠ¨å’Œé‡‡ç”¨ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³æ³¨åœ¨è´Ÿè½½æµ‹è¯•ä¸­ä½¿ç”¨åˆ†å¸ƒå¼è·Ÿè¸ª&#34;&gt;å…³æ³¨åœ¨è´Ÿè½½æµ‹è¯•ä¸­ä½¿ç”¨åˆ†å¸ƒå¼è·Ÿè¸ª&lt;/h2&gt;
&lt;p&gt;2023 å¹´ï¼Œä¸¤ä¸ªé¢†å…ˆçš„è´Ÿè½½æµ‹è¯•å·¥å…·ï¼Œ&lt;a href=&#34;https://k6.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana k6&lt;/a&gt;å’Œ&lt;a href=&#34;https://artillery.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Artillery.io&lt;/a&gt;ï¼Œéƒ½æ·»åŠ äº†å¯¹ OpenTelemetry çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Grafana k6 &lt;a href=&#34;https://github.com/grafana/xk6-distributed-tracing&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¼•å…¥äº†è·Ÿè¸ª&lt;/a&gt;åŠŸèƒ½ï¼Œä½¿æ€§èƒ½å·¥ç¨‹å¸ˆèƒ½å¤Ÿåœ¨&lt;a href=&#34;https://thenewstack.io/trace-based-testing-the-next-step-in-observability/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è´Ÿè½½æµ‹è¯•&lt;/a&gt;æœŸé—´è¯†åˆ«ç³»ç»Ÿç“¶é¢ˆæˆ–æ•…éšœã€‚&lt;/li&gt;
&lt;li&gt;Artillery.io éšåä¹Ÿ&lt;a href=&#34;https://www.artillery.io/blog/introducing-opentelemetry-support&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ·»åŠ äº†åº¦é‡å’Œåˆ†å¸ƒå¼è·Ÿè¸ª&lt;/a&gt;ï¼Œæä¾›äº†å¯¹ç³»ç»Ÿæ€§èƒ½æ›´è¯¦ç»†çš„åˆ†æã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Tracetest åˆ©ç”¨äº† k6 æµ‹è¯•ä¸­æš´éœ²çš„åŠŸèƒ½ï¼Œä»¥&lt;a href=&#34;https://docs.tracetest.io/tools-and-integrations/k6&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯ç”¨åŸºäºè·Ÿè¸ªçš„è´Ÿè½½æµ‹è¯•&lt;/a&gt;ï¼Œåœ¨è¿è¡Œæµ‹è¯•æ—¶è¿›è¡Œæ·±å…¥çš„æ–­è¨€ã€‚æˆ‘ä»¬å·²ç»çœ‹åˆ°è®¸å¤šå®¢æˆ·å¹¿æ³›ä½¿ç”¨äº†è¿™ä¸ªåŠŸèƒ½ï¼Œæ¯”å¦‚&lt;a href=&#34;https://tracetest.io/case-studies/how-sigma-software-built-load-testing-for-their-microservices-with-k6-tracetest&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Sigma Software&lt;/a&gt;ã€‚åœ¨ 2024 å¹´ï¼ŒTracetest å›¢é˜Ÿå°†è€ƒè™‘å°†è¿™ä¸€èƒ½åŠ›æ·»åŠ åˆ°&lt;a href=&#34;http://artillery.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Artillery.io&lt;/a&gt;å’Œå…¶ä»–è´Ÿè½½æµ‹è¯•å·¥å…·ä¸­ã€‚&lt;/p&gt;
&lt;h2 id=&#34;opentelemetry-çš„æ”¯æŒå’Œç”¨ä¾‹æ‰©å±•&#34;&gt;OpenTelemetry çš„æ”¯æŒå’Œç”¨ä¾‹æ‰©å±•&lt;/h2&gt;
&lt;p&gt;è¶Šæ¥è¶Šå¤šçš„ä¾›åº”å•†æ­£åœ¨é‡‡ç”¨ OpenTelemetry æ ‡å‡†ï¼Œä»¥æ”¯æŒå…¸å‹ä½†éå¸¸é‡è¦çš„é¥æµ‹æ•°æ®åˆ†æä¹‹å¤–çš„è¡ŒåŠ¨ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸€äº›å…¬å¸ï¼Œæ¯”å¦‚&lt;a href=&#34;https://opentelemetry.io/blog/2023/tyk-api-gateway/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tyk æ­£åœ¨ä»ªå™¨åŒ–å…¶ API ç½‘å…³ï¼Œä»¥åŸç”Ÿæ”¯æŒ OpenTelemetry&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ç»ˆç«¯ç”¨æˆ·æ­£åœ¨å‘ç° OpenTelemetry çš„æ–°ç”¨ä¾‹ï¼Œæ¯”å¦‚&lt;a href=&#34;https://thenewstack.io/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨åˆ†å¸ƒå¼è·Ÿè¸ªæ¥è§‚å¯Ÿä½ çš„ CI/CD æµæ°´çº¿&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://tracetest.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tracetest&lt;/a&gt;åˆ©ç”¨åˆ†å¸ƒå¼è·Ÿè¸ªæ•°æ®è¿›è¡Œé›†æˆå’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¼ºè°ƒ-opentelemetry-æ”¶é›†å™¨&#34;&gt;å¼ºè°ƒ OpenTelemetry æ”¶é›†å™¨&lt;/h2&gt;
&lt;p&gt;&lt;a href=&#34;https://thenewstack.io/how-adobe-uses-opentelemetry-collector/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry æ”¶é›†å™¨&lt;/a&gt;ä½äº OpenTelemetry ä¸–ç•Œçš„ä¸­å¿ƒï¼Œæ¥æ”¶æ¥è‡ªåº”ç”¨ç¨‹åºçš„ä¿¡å·ï¼Œå¤„ç†å’Œè½¬æ¢è¿™äº›ä¿¡å·ï¼Œç„¶åå°†å®ƒä»¬å¯¼å‡ºåˆ°ä»»æ„æ•°é‡çš„åç«¯ç³»ç»Ÿã€‚éšç€å¯¹ OpenTelemetry çš„é›†æˆå’Œä¾›åº”å•†æ”¯æŒçš„æ‰©å±•ï¼Œå¯¹è¿™ä¸ªé›†ä¸­å¼æ”¶é›†å™¨çš„éœ€æ±‚å’Œè¦æ±‚ä¹Ÿåœ¨å¢åŠ ã€‚&lt;/p&gt;
&lt;p&gt;2023 å¹´å¼•å…¥äº† OpenTelemetry Transformation Language (OTTL)ï¼Œå¢å¼ºäº† OpenTelemetry æ”¶é›†å™¨å¤„ç†å’Œè½¬æ¢ä¼ å…¥ä¿¡å·çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Tracetest ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåˆ©ç”¨&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/processor/filterprocessor/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨è¿‡æ»¤å™¨å¤„ç†å™¨ä¸­ä½¿ç”¨ OTTL&lt;/a&gt;çš„èƒ½åŠ›ï¼Œæ”¹è¿›äº†æˆ‘ä»¬ä»è¾“å‡ºå¤§é‡é¥æµ‹æ•°æ®çš„ç”Ÿäº§ç¯å¢ƒä¸­æ”¶é›†è·Ÿè¸ªæ•°æ®çš„æ–¹å¼ã€‚è¿™ä¸€å˜åŒ–å¯¹&lt;a href=&#34;https://tracetest.io/blog/opentelemetry-collectors-new-filter-processor&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetry æ”¶é›†å™¨çš„è¿‡æ»¤å™¨å¤„ç†å™¨&lt;/a&gt;ä½¿ Tracetest é€‚ç”¨äºåœ¨é«˜è´Ÿè½½ç¯å¢ƒä¸­è¿è¡Œæµ‹è¯•ï¼ŒåŒ…æ‹¬ç”Ÿäº§ç¯å¢ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ— å¤„ä¸åœ¨çš„å¯è§‚æµ‹æ€§&#34;&gt;æ— å¤„ä¸åœ¨çš„å¯è§‚æµ‹æ€§&lt;/h2&gt;
&lt;p&gt;åœ¨æœ€è¿‘çš„è®¨è®ºä¸­ï¼Œæˆ‘ä»¬å‘ç°äº†ä¸€ç§å®¢æˆ·ä¸­ä¸æ–­å¢é•¿çš„è¶‹åŠ¿ï¼Œå³â€œæ— å¤„ä¸åœ¨çš„å¯è§‚æµ‹æ€§â€æ–¹æ³•ã€‚è¿™äº›å…¬å¸ä¸ä»…é™äºç”±ç½‘ç«™å¯é æ€§å·¥ç¨‹å¸ˆå’Œ DevOps ä¼ ç»Ÿä½¿ç”¨ï¼Œè¿˜åŒ…æ‹¬äº†æ¯ä¸ªäººï¼ŒåŒ…æ‹¬å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜ï¼Œå‚ä¸åˆ°å¯è§‚æµ‹æ€§ä¸­ã€‚è¿™ç§è½¬å˜é‡æ–°å®šä¹‰&lt;/p&gt;
&lt;p&gt;äº†å¯è§‚æµ‹æ€§ï¼Œä½¿å…¶ä»ç”Ÿäº§é—®é¢˜çš„ä¸€ç§ååº”æ€§å·¥å…·å˜æˆäº†åœ¨å¼€å‘å’Œæµ‹è¯•ä¸­éƒ½æœ‰ç›Šçš„ä¸€ç§ä¸»åŠ¨å·¥å…·ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.honeycomb.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Honeycomb&lt;/a&gt;å¼ºè°ƒäº†&lt;a href=&#34;https://www.honeycomb.io/blog/observability-driven-development&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨å¯è§‚æµ‹æ€§&lt;/a&gt;ï¼Œè€Œåƒ&lt;a href=&#34;http://digma.ai/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Digma.ai&lt;/a&gt;å’Œ Tracetest è¿™æ ·çš„å·¥å…·æ­£åœ¨æ¨åŠ¨è¿™ä¸€å‰è¿›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æµè§ˆå™¨&#34;&gt;æµè§ˆå™¨&lt;/h2&gt;
&lt;p&gt;OpenTelemetry çš„ä¸»è¦ä½œç”¨ä¸€ç›´å±€é™äºä»ªå™¨åŒ–åç«¯ç³»ç»Ÿï¼Œè€ŒåŸºäºå¼€æ”¾æ ‡å‡†çš„æµè§ˆå™¨ä»ªå™¨åŒ–ä»ç„¶æ˜¯å®éªŒæ€§çš„ï¼Œè¿›å±•ç¼“æ…¢ã€‚æ­£åœ¨åŠªåŠ›æ”¹è¿›å’Œæ ‡å‡†åŒ–è¿™ç§ä»ªå™¨åŒ–ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://tracetest.io/case-studies/how-uzufly-built-end-to-end-testing-serverless-web-app-with-distributed-traces&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Uzufly&lt;/a&gt;åœ¨è¿™æ–¹é¢è„±é¢–è€Œå‡ºã€‚å®ƒä½¿ç”¨ç°æœ‰çš„å®¢æˆ·ç«¯ä»ªå™¨åŒ–æ¥æ„å»ºæµ‹è¯•ã€‚å±•æœ›æœªæ¥ï¼Œå®ƒçš„é›„å¿ƒæ˜¯æ‰©å±•åŸºäºè·Ÿè¸ªçš„æµ‹è¯•ï¼Œä»¥è¦†ç›–æµè§ˆå™¨å†…éƒ¨å‘èµ·çš„å‰ç«¯æ“ä½œæ‰€è¿›è¡Œçš„æµ‹è¯•ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¿™å°†å®ç°å‰ç«¯å’Œåç«¯çš„å…¨é¢ç«¯åˆ°ç«¯æµ‹è¯•ã€‚è¯·å…³æ³¨ 2024 å¹´æ›´å¤šå…³äºè¿™ä¸ªä¸»é¢˜çš„ä¿¡æ¯ï¼&lt;/p&gt;
&lt;h2 id=&#34;2023-å·²ç»è¿‡å»&#34;&gt;2023 å·²ç»è¿‡å»&lt;/h2&gt;
&lt;p&gt;å‘Šåˆ« 2023ï¼Œæˆ‘ä»¬æ€€ç€çƒ­æƒ…æœŸå¾… 2024 å¹´çš„åˆ°æ¥ã€‚OpenTelemetry å…·æœ‰åŠ¿å¤´ï¼Œå¾—åˆ°äº†æ ‡å‡†å’Œå¹¿æ³›é‡‡ç”¨çš„æ”¯æŒï¼Œæ¨åŠ¨äº†å…¶å¢é•¿ã€‚æ–°çš„ä¸€å¹´æ‰¿è¯ºå¸¦æ¥ä»¤äººå…´å¥‹çš„å‘å±•ï¼Œå›´ç»• OpenTelemetry å‡ºç°äº†åˆ›æ–°çš„äº§å“å’Œç”¨ä¾‹ã€‚æˆ‘è¿«ä¸åŠå¾…åœ°æƒ³çœ‹åˆ° 2024 å¹´å°†æ­ç¤ºçš„è¿›æ­¥å’Œåˆ›æ–°ã€‚æ„¿ OpenTelemetry é•¿å­˜ï¼&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>2024 å¹´ API ç®¡ç†è¶‹åŠ¿é¢„æµ‹</title>
      <link>https://cloudnativecn.com/blog/what-will-be-the-api-management-trends-for-2024/</link>
      <pubDate>Mon, 01 Jan 2024 11:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/what-will-be-the-api-management-trends-for-2024/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/what-will-be-the-api-management-trends-for-2024/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;What Will Be the API Management Trends for 2024?&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»å®¡è§†äº† 2023 å¹´çš„å‘å±•ï¼Œå¹¶ç¡®å®šäº†å‡ ä¸ªå¯èƒ½åœ¨æ˜å¹´ä¸»å¯¼ API ç®¡ç†é¢†åŸŸçš„å…³é”®è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®ä¸€ä¸ªæƒ³æ³•ï¼šAPI å®Œå…¨æ§åˆ¶äº†æ•°å­—ä¸–ç•Œï¼Œé¢„æµ‹åˆ°æœ¬åå¹´ç»“æŸæ—¶ï¼ŒAPI ç®¡ç†å¸‚åœºå°†å¢é•¿å…­å€ã€‚&lt;/p&gt;
&lt;p&gt;éšç€è¶Šæ¥è¶Šå¤šçš„å…¬å¸è½¬å‘ API ä¸ºå…ˆçš„æ¶æ„ï¼ŒAPI ç®¡ç†çš„éœ€æ±‚å˜å¾—è‡³å…³é‡è¦ã€‚ä¸€å®¶ç»„ç»‡å¯èƒ½ä¼šç®¡ç†æ•°ç™¾ç”šè‡³æ•°åƒä¸ªå¾®æœåŠ¡ï¼Œå®ƒä»¬éœ€è¦å·¥å…·æ¥æœ‰æ•ˆåœ°ç¼–æ’å’Œç›‘æ§è¿™äº› APIã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œéšç€è¿™ç§å¢é•¿çš„å¼€å§‹ï¼ŒAPI ç®¡ç†åœ¨æœªæ¥ä¼šå¸¦æ¥ä»€ä¹ˆï¼Ÿæˆ‘ä»¬å·²ç»å®¡è§†äº† 2023 å¹´çš„å‘å±•ï¼Œå¹¶ç¡®å®šäº†å‡ ä¸ªå¯èƒ½åœ¨ 2024 å¹´ä¸»å¯¼ API ç®¡ç†é¢†åŸŸçš„å…³é”®è¶‹åŠ¿ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ˜¯æ—¶å€™å®è¡Œé›¶ä¿¡ä»»äº†è¿™å¹¶ä¸æ˜¯åäº‹&#34;&gt;æ˜¯æ—¶å€™å®è¡Œé›¶ä¿¡ä»»äº†ï¼ˆè¿™å¹¶ä¸æ˜¯åäº‹ï¼ï¼‰&lt;/h2&gt;
&lt;p&gt;éšç€ API çš„ä¸æ–­å¢åŠ ï¼Œå®‰å…¨æ¼æ´ã€é»‘å®¢å’Œ API é—®é¢˜çš„é£é™©ä¹Ÿåœ¨å¢åŠ ã€‚å°†é›¶ä¿¡ä»»å®‰å…¨æ¦‚å¿µä¸ä½ çš„ API æˆ˜ç•¥ç»“åˆèµ·æ¥ï¼Œå€¡å¯¼ä¸€ç§å®‰å…¨æ¨¡å‹ï¼Œå…¶ä¸­ä¸ç®¡äº¤äº’å‘ç”Ÿåœ¨ç½‘ç»œè¾¹ç•Œå†…è¿˜æ˜¯å¤–éƒ¨ï¼Œéƒ½ä¸ä¼šå‡å®šä¿¡ä»»ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æ–¹æ³•è¦æ±‚å¯¹æ¯ä¸ªè¯•å›¾è®¿é—®ç½‘ç»œå†…èµ„æºçš„ä¸ªäººå’Œè®¾å¤‡è¿›è¡Œä¸¥æ ¼çš„èº«ä»½éªŒè¯ï¼Œæœ‰æ•ˆåœ°æ¶ˆé™¤äº†ä¼ ç»Ÿçš„å—ä¿¡ä»»çš„å†…éƒ¨ç½‘ç»œæ¦‚å¿µã€‚åœ¨æ•°æ®æ³„éœ²å’Œæ¶æ„è¡Œä¸ºè€…å˜å¾—è¶Šæ¥è¶Šå¤æ‚çš„æ—¶ä»£ï¼Œé‡‡ç”¨é›¶ä¿¡ä»»æ¡†æ¶å¯¹äºå…¨é¢çš„å®‰å…¨è‡³å…³é‡è¦ï¼ŒåŒ…æ‹¬ APIã€äº‘æœåŠ¡å’Œç½‘ç»œåŸºç¡€è®¾æ–½åœ¨å†…çš„æ‰€æœ‰æŠ€æœ¯æ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ API ç®¡ç†é¢†åŸŸï¼ŒAPI ç½‘å…³åœ¨å®æ–½é›¶ä¿¡ä»»æ¶æ„ä¸­èµ·ç€å…³é”®ä½œç”¨ã€‚ä½œä¸ºç¬¬ä¸€é“é˜²çº¿ï¼Œè¿™äº›ç½‘å…³å¯¹æ¯ä¸ª API è¯·æ±‚æ‰§è¡Œä¸¥æ ¼çš„èº«ä»½éªŒè¯å’Œæˆæƒç­–ç•¥ã€‚å®ƒä»¬è´Ÿè´£éªŒè¯å‡­æ®ï¼Œç®¡ç†è®¿é—®ä»¤ç‰Œï¼Œå¹¶ç¡®ä¿æ¯ä¸ªè¯·æ±‚ï¼Œæ— è®ºæ¥è‡ªç»„ç»‡å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨ï¼Œéƒ½è¦ç»è¿‡ç›¸åŒä¸¥æ ¼çš„å®‰å…¨æ£€æŸ¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ¡†æ¶ä¸­ï¼ŒAPI ç½‘å…³ä¸ä»…ä»…æ˜¯æµé‡ç®¡ç†å™¨ï¼›å®ƒä»¬æ˜¯å®‰å…¨å§¿æ€çš„ä¸€éƒ¨åˆ†ï¼Œå°†é›¶ä¿¡ä»»åŸåˆ™åµŒå…¥åˆ° API äº¤äº’çš„æ ¸å¿ƒã€‚å®ƒä»¬å¸®åŠ©æ„å»ºé€‚åº”æŒç»­é£é™©è¯„ä¼°ã€åŸºäºä¸Šä¸‹æ–‡çš„è®¿é—®æ§åˆ¶å’Œæ·±åº¦ç›‘æ§ API ä½¿ç”¨æ¨¡å¼çš„åŠ¨æ€å®‰å…¨ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é›¶ä¿¡ä»»æ¨¡å‹ä¸­ï¼ŒAPI ç½‘å…³æ¼”å˜ä¸ºå®‰å…¨æ‰§è¡Œè€…ï¼Œå¯¹æµç» API çš„æ•°æ®çš„å®Œæ•´æ€§å’Œæœºå¯†æ€§è‡³å…³é‡è¦ã€‚è¿™ç§æ¼”å˜å¼ºè°ƒäº†é«˜çº§ API ç®¡ç†å·¥å…·åœ¨ç»´æŠ¤é›¶ä¿¡ä»»åŸåˆ™å’Œç¡®ä¿å®‰å…¨å’Œå¼¹æ€§åŸºç¡€è®¾æ–½æ–¹é¢çš„é‡è¦æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¤šä½“éªŒæ¶æ„å°†æˆä¸ºå¸¸æ€&#34;&gt;â€œå¤šä½“éªŒæ¶æ„â€å°†æˆä¸ºå¸¸æ€&lt;/h2&gt;
&lt;p&gt;éšç€ 2024 å¹´ Gartner çš„â€œå¤šä½“éªŒæ¶æ„â€æ¦‚å¿µå˜å¾—è¶Šæ¥è¶Šæ™®éï¼ŒAPI ç®¡ç†çš„å¤æ‚æ€§å°†å‡çº§ã€‚ç»„ç»‡ä¸å†åªå¤„ç†ä¸€ç§ç±»å‹çš„ APIï¼›ä»–ä»¬åœ¨åŒä¸€åº”ç”¨ç”Ÿæ€ç³»ç»Ÿä¸­å¤„ç†å¤šç§åè®®å’Œæ¶æ„ã€‚è¿™ç§æƒ…å†µæ˜¯ç°ä»£åº”ç”¨å¤šæ ·æ€§çš„ç»“æœï¼Œè¿™äº›åº”ç”¨ä¸ä»…åŒ…æ‹¬åŸºäº Web çš„é—¨æˆ·å’Œæœ¬æœºç§»åŠ¨åº”ç”¨ï¼Œè¿˜åŒ…æ‹¬æ‰©å±•ï¼Œå¦‚æ‰‹è¡¨åº”ç”¨ã€å®æ—¶å¯¹è¯ç•Œé¢å’Œäººå·¥æ™ºèƒ½é›†æˆã€‚&lt;/p&gt;
&lt;p&gt;æ¯ä¸ªç»„ä»¶éƒ½éœ€è¦ç‰¹å®šçš„ API æ–¹æ³•ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼ŒREST API åœ¨å¤–éƒ¨é€šä¿¡ä¸­å› å…¶ç®€å•æ€§å’Œé€šç”¨æ€§è€Œå—æ¬¢è¿ï¼Œè€Œ gRPC ç”±äºå…¶æ•ˆç‡å’Œé€Ÿåº¦è€Œå¯èƒ½è¢«é€‰æ‹©ç”¨äºå†…éƒ¨æœåŠ¡é€šä¿¡ã€‚ä¸æ­¤åŒæ—¶ï¼ŒGraphQL å› å…¶åˆ›å»ºè”åˆå›¾å’Œå­å›¾çš„èƒ½åŠ›è€Œè¶Šæ¥è¶Šå¤šåœ°ç”¨äºé«˜åº¦çµæ´»å’Œé«˜æ•ˆçš„æ•°æ®æ£€ç´¢ï¼Œè¿™å¯¹äºå¤æ‚çš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºæ˜¯å¿…ä¸å¯å°‘çš„ã€‚æ­¤å¤–ï¼Œæ¶ˆæ¯ä»£ç†å¯¹äºå®ç°éœ€è¦ç«‹å³æ•°æ®æ›´æ–°å’Œäº¤äº’çš„åº”ç”¨ç¨‹åºçš„å®æ—¶é€šä¿¡è‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§ç¯å¢ƒä¸‹ï¼ŒAPI ç®¡ç†çš„æŒ‘æˆ˜æ˜¯å¤šæ–¹é¢çš„ã€‚å®ƒæ¶‰åŠç¼–æ’ä¸åŒç±»å‹çš„ API å¹¶ç¡®ä¿åœ¨è¿™äº›ä¸åŒçš„æ¶æ„ä¸­å®ç°æ— ç¼é›†æˆã€ä¸€è‡´çš„å®‰å…¨æ‰§è¡Œå’Œæœ‰æ•ˆçš„æ€§èƒ½ç›‘æ§ã€‚è§£å†³æ–¹æ¡ˆåœ¨äºé«˜çº§ API ç®¡ç†å·¥å…·å’Œç½‘å…³ï¼Œå®ƒä»¬èƒ½å¤Ÿå¤„ç†è¿™ç§å¤šæ ·æ€§ã€‚è¿™äº›å·¥å…·å¿…é¡»æä¾›å¤æ‚çš„åŠŸèƒ½ï¼Œå¦‚åè®®è½¬æ¢ã€ç»Ÿä¸€çš„å®‰å…¨ç­–ç•¥å’Œå¯ä»¥é€‚åº”æ¯ç§ API ç±»å‹çš„ç‹¬ç‰¹éœ€æ±‚çš„åˆ†æã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œ2024 å¹´çš„ API ç®¡ç†å°†æ¶‰åŠåˆ°æ‹¥æŠ±å’Œç®¡ç†è¿™ç§å¤æ‚æ€§ï¼Œæä¾›ä¸€ä¸ªæœ‰å‡èšåŠ›å’Œé«˜æ•ˆç‡çš„æ¡†æ¶ï¼Œæ”¯æŒå¤šä½“éªŒæ¶æ„çš„å„ç§éœ€æ±‚ã€‚&lt;/p&gt;
&lt;h2 id=&#34;api-ç®¡ç†æ­£åœ¨å˜æˆç»„ç»‡ç®¡ç†&#34;&gt;API ç®¡ç†æ­£åœ¨å˜æˆç»„ç»‡ç®¡ç†&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸€ä¸ªè‘—åçš„æ•…äº‹ï¼Œæ¥è‡ªå‰äºšé©¬é€Šå’Œè°·æ­Œå·¥ç¨‹å¸ˆ Steve Yeggeï¼Œè®²è¿°äº† Jeff Bezos åœ¨ 2002 å¹´åœ¨äºšé©¬é€Šç½‘ç»œæœåŠ¡ï¼ˆAWSï¼‰åˆ¶å®šçš„ä¸€é¡¹æ ¸å¿ƒä»»åŠ¡ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰å›¢é˜Ÿå°†é€šè¿‡æœåŠ¡æ¥å£å…¬å¼€å…¶æ•°æ®å’ŒåŠŸèƒ½ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å›¢é˜Ÿå¿…é¡»é€šè¿‡è¿™äº›æ¥å£ç›¸äº’é€šä¿¡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸å…è®¸å…¶ä»–å½¢å¼çš„è¿›ç¨‹é—´é€šä¿¡ï¼šä¸å…è®¸ç›´æ¥é“¾æ¥ï¼Œä¸å…è®¸ç›´æ¥è¯»å–å¦ä¸€ä¸ªå›¢é˜Ÿçš„æ•°æ®å­˜å‚¨ï¼Œä¸å…è®¸å…±äº«å†…å­˜æ¨¡å‹ï¼Œä¹Ÿä¸å…è®¸ä»»ä½•åé—¨ã€‚å”¯ä¸€å…è®¸çš„é€šä¿¡æ˜¯é€šè¿‡ç½‘ç»œä¸Šçš„æœåŠ¡æ¥å£è°ƒç”¨ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ— è®ºä»–ä»¬ä½¿ç”¨ä»€ä¹ˆæŠ€æœ¯ã€‚HTTPã€Corbaã€Pubsubã€è‡ªå®šä¹‰åè®®â€”â€”éƒ½æ— æ‰€è°“ã€‚è´ä½æ–¯ä¸å…³å¿ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ‰€æœ‰æœåŠ¡æ¥å£ï¼Œæ²¡æœ‰ä¾‹å¤–ï¼Œå¿…é¡»ä»å¤´å¼€å§‹è®¾è®¡ï¼Œä»¥ä¾¿èƒ½å¤Ÿå°†æ¥å£æš´éœ²ç»™å¤–éƒ¨ä¸–ç•Œçš„å¼€å‘äººå‘˜ã€‚ä¸å…è®¸ä¾‹å¤–ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ä¸è¿™æ ·åšçš„äººå°†è¢«è§£é›‡ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è´ä½æ–¯æ­£åœ¨ä¸ºäºšé©¬é€Šçš„é¢å‘æœåŠ¡çš„ä½“ç³»ç»“æ„æ‰“ä¸‹åŸºç¡€ã€‚äºŒåäºŒå¹´åï¼Œè¿™ä¸€æ¡†æ¶åœ¨æŠ€æœ¯é¢†åŸŸæ™®åŠã€‚è¿™æ„å‘³ç€ API ç®¡ç†å®é™…ä¸Šæ˜¯å›¢é˜Ÿåœ¨ç»„ç»‡å†…éƒ¨è¿›è¡Œé€šä¿¡å’Œæ“ä½œçš„æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;API å·²ç»æˆä¸ºç»„ç»‡è¿‡ç¨‹çš„ç”Ÿå‘½çº¿ï¼Œä»£è¡¨äº†ä»å­¤ç«‹çš„åŠŸèƒ½åˆ°é›†æˆç³»ç»Ÿçš„è½¬å˜ã€‚è¿™ç§è½¬å˜å°† API ç®¡ç†ä»æŠ€æœ¯ä»»åŠ¡è½¬å˜ä¸ºç»„ç»‡é¢†å¯¼çš„æ ¸å¿ƒæ–¹é¢ã€‚è¿™å¸¦æ¥äº†å‡ ä¸ªå…·ä½“çš„å˜åŒ–ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;æˆ˜ç•¥å¯¹é½&lt;/strong&gt;ã€‚API ç®¡ç†ä¸ä¸šåŠ¡æˆ˜ç•¥å¯†åˆ‡å¯¹é½ã€‚å®ƒæ¶‰åŠç†è§£ API å¦‚ä½•èƒ½å¤Ÿå®ç°ä¸šåŠ¡ç›®æ ‡ï¼Œå¦‚è¿›å…¥æ–°å¸‚åœºã€æå‡å®¢æˆ·ä½“éªŒæˆ–ç®€åŒ–è¿è¥ã€‚è¿™ç§æˆ˜ç•¥å¯¹é½è¦æ±‚ API å€¡è®®ä¸ç»„ç»‡çš„æ–¹å‘å’Œç›®æ ‡åŒæ­¥ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è·¨èŒèƒ½åˆä½œ&lt;/strong&gt;ã€‚API ä¸å†ä»…ä»…æ˜¯ IT éƒ¨é—¨çš„è´£ä»»ã€‚å®ƒä»¬éœ€è¦è·¨å„ç§åŠŸèƒ½é¢†åŸŸçš„åˆä½œï¼ŒåŒ…æ‹¬è¥é”€ã€é”€å”®ã€å®¢æˆ·æœåŠ¡å’Œä¸šåŠ¡å‘å±•ã€‚è¿™ç§åˆä½œç¡®ä¿ API ä»¥æ”¯æŒå¤šæ ·åŒ–çš„ç»„ç»‡éœ€æ±‚å’Œæœºä¼šçš„æ–¹å¼å¼€å‘å’Œç®¡ç†ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°† API ä½œä¸ºäº§å“çš„æ€ç»´æ–¹å¼&lt;/strong&gt;ã€‚API è¶Šæ¥è¶Šè¢«è§†ä¸ºäº§å“ï¼Œæœ‰ä¸“é—¨çš„å›¢é˜Ÿè´Ÿè´£å®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸï¼Œä»æ„æ€åˆ°æ·˜æ±°ã€‚è¿™ç§æ–¹æ³•æ¶‰åŠå®šæœŸæ›´æ–°ã€ç”¨æˆ·åé¦ˆé›†æˆå’ŒæŒç»­æ”¹è¿›ï¼Œå°±åƒå…¬å¸æä¾›çš„ä»»ä½•å…¶ä»–äº§å“æˆ–æœåŠ¡ä¸€æ ·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€§èƒ½æŒ‡æ ‡å’Œåˆ†æ&lt;/strong&gt;ã€‚API çš„æˆåŠŸä¸ä»…é€šè¿‡æŠ€æœ¯æ€§èƒ½æ¥è¡¡é‡ï¼Œè¿˜é€šè¿‡å…¶å¯¹ä¸šåŠ¡ç»“æœçš„å½±å“æ¥è¡¡é‡ã€‚è¯¸å¦‚ API ä½¿ç”¨è¶‹åŠ¿ã€ç”¨æˆ·å‚ä¸åº¦å’Œå¯¹æ”¶å…¥å¢é•¿çš„è´¡çŒ®ç­‰æŒ‡æ ‡æˆä¸º API æœ‰æ•ˆæ€§çš„é‡è¦æŒ‡æ ‡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å› æ­¤ï¼ŒAPI çš„ç®¡ç†ä¸å†ä»…ä»…å…³äºæŠ€æœ¯è§„èŒƒæˆ–åè®®ï¼Œè€Œæ˜¯å…³äºç®¡ç†ä¿¡æ¯åˆ†äº«å’ŒæœåŠ¡äº¤ä»˜çš„æ–¹å¼ï¼Œè·¨æ•´ä¸ªç»„ç»‡ã€‚è¿™ç§æ–¹æ³•ä¿ƒè¿›äº†æ•æ·æ€§ã€å¯æ‰©å±•æ€§å’Œåˆ›æ–°ï¼Œè¿™åœ¨ä»Šå¤©ä¸æ–­å‘å±•çš„æŠ€æœ¯é¢†åŸŸä¸­æ˜¯å¿…ä¸å¯å°‘çš„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;gitops-å·²ç»åœ¨-api-ä¸­ä½¿ç”¨&#34;&gt;GitOps å·²ç»åœ¨ API ä¸­ä½¿ç”¨&lt;/h2&gt;
&lt;p&gt;å°† GitOps é›†æˆåˆ° API ç®¡ç†ä¸­æ ‡å¿—ç€ API æ˜¯å¦‚ä½•æ›´é«˜æ•ˆã€é€æ˜å’Œå¯é åœ°å¼€å‘ã€éƒ¨ç½²å’Œç»´æŠ¤çš„ä¸€ç§æ˜¾è‘—è½¬å˜ã€‚GitOps æ˜¯ä¸€ç§å°† git çš„ç‰ˆæœ¬æ§åˆ¶åŸåˆ™åº”ç”¨äºæ“ä½œå·¥ä½œæµç¨‹çš„æ–¹æ³•ï¼Œå¯¹äºä»¥æ›´é«˜æ•ˆã€é€æ˜å’Œå¯é çš„æ–¹å¼ç®¡ç† API çš„ç”Ÿå‘½å‘¨æœŸè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ä¸ªæ¡†æ¶ä¸­ï¼ŒAPI çš„æ¯ä¸ªæ–¹é¢ï¼Œä»å…¶è®¾è®¡æ–‡æ¡£å’Œé…ç½®åˆ°ä»£ç å’Œéƒ¨ç½²æ¸…å•ï¼Œéƒ½å­˜å‚¨åœ¨ git å­˜å‚¨åº“ä¸­ã€‚è¿™ç§æ–¹æ³•ç¡®ä¿äº†æ•´ä¸ª API ç”Ÿå‘½å‘¨æœŸéƒ½å—åˆ°ç‰ˆæœ¬æ§åˆ¶ï¼Œå…è®¸è¯¦ç»†è·Ÿè¸ªæ›´æ”¹ï¼Œä»¥åŠåœ¨å‡ºç°é—®é¢˜æ—¶è½»æ¾å›æ»šï¼Œå¢å¼ºäº†å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„åä½œã€‚&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹æ˜¯ä½¿ç”¨ GitOps ç®¡ç† API çš„ä¸€ä¸ªå…³é”®ä¼˜åŠ¿ã€‚é€šè¿‡åˆ©ç”¨ git ä½œä¸ºå”¯ä¸€çš„çœŸç›¸æ¥æºï¼Œå¯ä»¥è®¾ç½®è‡ªåŠ¨åŒ–æµæ°´çº¿ï¼Œä»¥åœ¨æäº¤æ›´æ”¹æ—¶éƒ¨ç½² APIã€‚è¿™ç§è‡ªåŠ¨åŒ–ä¸ä»…é™äºç®€å•çš„éƒ¨ç½²ï¼Œè¿˜åŒ…æ‹¬é…ç½®å’Œç­–ç•¥çš„æ›´æ–°ï¼Œç¡®ä¿ API çš„æ‰€æœ‰æ–¹é¢éƒ½å¾—åˆ°ä¸€è‡´å’Œå¯é çš„æ›´æ–°ã€‚å›¢é˜Ÿå¯ä»¥åˆ›å»ºä¸ GitOps å·¥ä½œæµç¨‹ç›´æ¥é›†æˆçš„åˆ†æ•£çš„å£°æ˜æ€§å·¥ä½œæµï¼Œç”¨äºå¤æ‚çš„è‡ªå®šä¹‰é…ç½®ã€‚&lt;/p&gt;
&lt;p&gt;GitOps è¿˜ä¸º API ç®¡ç†å¸¦æ¥äº†æ›´é«˜çº§åˆ«çš„å®‰å…¨æ€§ã€‚å…³äºæ›´æ”¹çš„æ‹‰å–è¯·æ±‚é¼“åŠ±åŒè¡Œå®¡æŸ¥å’Œæ‰¹å‡†ï¼Œä¸ºå¼•å…¥ä¿®æ”¹æä¾›äº†æ›´å¥å£®çš„æµç¨‹ã€‚æ­¤å¤–ï¼Œgit å­˜å‚¨åº“çš„ä¸å¯å˜æ€§å¢åŠ äº†é¢å¤–çš„å®‰å…¨æ€§å±‚ï¼Œå› ä¸ºæ¯ä¸ªæ›´æ”¹éƒ½æ˜¯è¢«è·Ÿè¸ªå’Œå¯å®¡è®¡çš„ã€‚&lt;/p&gt;
&lt;p&gt;GitOps æœ‰æœ›é€šè¿‡å¼•å…¥ç‰ˆæœ¬æ§åˆ¶ã€è‡ªåŠ¨åŒ–ã€å®‰å…¨å’Œåä½œåŸåˆ™æ¥æ”¹å˜ API ç®¡ç†ï¼Œä»è€Œä½¿ API å¼€å‘å’Œç®¡ç†æ›´åŠ ä¸ç°ä»£æ•æ·å®è·µç›¸ç¬¦ï¼Œæé«˜äº†æ•ˆç‡å’Œå¯é æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼€å‘è€…ä½“éªŒå°†æˆä¸ºæ ‡é…&#34;&gt;å¼€å‘è€…ä½“éªŒå°†æˆä¸ºæ ‡é…&lt;/h2&gt;
&lt;p&gt;åœ¨ 2024 å¹´ï¼Œæä¾›å“è¶Šçš„å¼€å‘è€…ä½“éªŒï¼ˆDevXï¼‰å°†ä¸å†æ˜¯å¥¢ä¾ˆï¼›å®ƒå°†æˆä¸ºä¸€é¡¹å¿…éœ€ã€‚æœªå°† DevX ç½®äºä¼˜å…ˆä½ç½®çš„ API ç®¡ç†ç³»ç»Ÿè¶Šæ¥è¶Šæœ‰è¢«æ·˜æ±°çš„é£é™©ï¼Œå› ä¸ºä»¥å¼€å‘è€…ä¸ºä¸­å¿ƒçš„æ¨¡å¼æ­£åœ¨æˆä¸ºæ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸€å˜é©çš„åŸºçŸ³åœ¨äºè®¤è¯†åˆ°å¼€å‘è€…éœ€è¦ä¸å…¶å·¥ä½œæµç¨‹ç›¸ä¸€è‡´å¹¶å¢å¼ºç”Ÿäº§åŠ›çš„å·¥å…·å’Œç³»ç»Ÿã€‚è¿™å…¶ä¸­çš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯é‡‡ç”¨&lt;a href=&#34;https://thenewstack.io/why-use-infrastructure-as-code/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åŸºç¡€è®¾æ–½å³ä»£ç &lt;/a&gt;ï¼ˆIaCï¼‰å®è·µã€‚IaC å…è®¸å¼€å‘è€…é€šè¿‡ä»£ç è€Œä¸æ˜¯æ‰‹åŠ¨æµç¨‹æ¥ç®¡ç†å’Œé…ç½®åŸºç¡€è®¾æ–½ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªå…³é”®å› ç´ æ˜¯ API ç®¡ç†ç³»ç»Ÿæ”¯æŒå„ç§éƒ¨ç½²ç¯å¢ƒçš„èƒ½åŠ›ã€‚éšç€éƒ¨ç½²æ¨¡å‹çš„å¤šæ ·åŒ–ï¼Œä»æœ¬åœ°éƒ¨ç½²åˆ°&lt;a href=&#34;https://www.getambassador.io/kubernetes-glossary/cloud-native&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;äº‘åŸç”Ÿ&lt;/a&gt;ç­‰ï¼Œä¸€ä¸ªçµæ´»çš„ API ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œèƒ½å¤Ÿé€‚åº”ä¸åŒçš„ç¯å¢ƒè‡³å…³é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;API ç®¡ç†ç³»ç»Ÿå¿…é¡»ä¸æ–­å‘å±•ï¼Œä»¥æ»¡è¶³ç°ä»£è½¯ä»¶å¼€å‘å®è·µçš„éœ€æ±‚ã€‚æœªèƒ½æä¾›ä»¥å¼€å‘è€…ä¸ºä¸­å¿ƒçš„ä½“éªŒçš„ç³»ç»Ÿï¼Œå…¶ç‰¹ç‚¹åŒ…æ‹¬ IaCã€ä¸æ ‡å‡†å·¥å…·çš„é›†æˆã€æ˜“ç”¨æ€§ã€çµæ´»æ€§å’Œå¼ºå¤§çš„åˆ†æåŠŸèƒ½ï¼Œå°†åœ¨å¼€å‘è€…ä½“éªŒè‡³å…³é‡è¦çš„ç¯å¢ƒä¸­éš¾ä»¥ä¿æŒç›¸å…³æ€§ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ†ç»‘éšåçš„è§£ç»‘&#34;&gt;æ†ç»‘éšåçš„è§£ç»‘&lt;/h2&gt;
&lt;p&gt;API ç®¡ç†å·¥å…·çš„æ¼”å˜æ­£åœ¨è§è¯å›å½’åˆ°æ†ç»‘è§£å†³æ–¹æ¡ˆï¼Œè¿™æ˜¯ä¸æœ€è¿‘çš„ç‚¹å¯¹ç‚¹è§£å†³æ–¹æ¡ˆçš„è¶‹åŠ¿ç›¸åã€‚ä¸æ—§çš„ä¼ä¸šæ†ç»‘è§£å†³æ–¹æ¡ˆä¸åŒï¼Œè¿™äº›æ–°ä¸€ä»£æ†ç»‘è§£å†³æ–¹æ¡ˆé€‚ç”¨äºæ›´å¹¿æ³›çš„ç»„ç»‡èŒƒå›´ï¼Œæä¾›äº†ç»¼åˆçš„ã€é›†æˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;API ç”Ÿæ€ç³»ç»Ÿçš„ä¸æ–­å¤æ‚å’Œè§„æ¨¡çš„å¢åŠ æ¨åŠ¨äº†è¿™ä¸€è½¬å˜ã€‚ç°ä»£ API ç®¡ç†éœ€è¦ä¸€ç§å…¨é¢çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬å¼ºå¤§çš„èº«ä»½éªŒè¯æœºåˆ¶ã€ä¸¥æ ¼çš„å®‰å…¨åè®®å’Œè‡ªåŠ©å¼€å‘è€…å·¥å…·ã€‚é€šè¿‡å°†è¿™äº›åŠŸèƒ½æ•´åˆåˆ°&lt;a href=&#34;https://www.getambassador.io/products/edge-stack/api-gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å•ä¸€çš„ã€è¿è´¯çš„åŒ…ä¸­&lt;/a&gt;ï¼Œæ†ç»‘è§£å†³æ–¹æ¡ˆæä¾›äº†ä¸€ç§æ›´ç®€åŒ–å’Œé«˜æ•ˆçš„ API ç®¡ç†æ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿™äº›æ†ç»‘è§£å†³æ–¹æ¡ˆä¸­åŒ…æ‹¬ç½‘å…³å¯¹äºæµé‡ç®¡ç†è‡³å…³é‡è¦ï¼Œæä¾›äº†é€Ÿç‡é™åˆ¶ã€è¯·æ±‚è·¯ç”±å’Œåè®®è½¬æ¢ç­‰åŠŸèƒ½ã€‚èº«ä»½éªŒè¯æ˜¯å¦ä¸€ä¸ªå…³é”®ç»„æˆéƒ¨åˆ†ï¼Œç¡®ä¿é€šè¿‡ OAuth å’Œ JSON Web Tokensï¼ˆJWTï¼‰ç­‰æœºåˆ¶å®‰å…¨è®¿é—® APIã€‚è¿™äº›æ†ç»‘è§£å†³æ–¹æ¡ˆä¸­çš„å®‰å…¨åŠŸèƒ½ä¸ä»…é™äºèº«ä»½éªŒè¯ï¼Œè¿˜æä¾›äº†å…¨é¢çš„ä¿æŠ¤ï¼Œé˜²æ­¢ SQL æ³¨å…¥ã€DDoS æ”»å‡»å’Œæ•°æ®æ³„éœ²ç­‰å¨èƒã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;https://www.getambassador.io/products/telepresence&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è‡ªåŠ©å¼€å‘è€…å·¥å…·&lt;/a&gt;æ˜¯è¿™äº›æ†ç»‘è§£å†³æ–¹æ¡ˆçš„é‡è¦ç»„æˆéƒ¨åˆ†ã€‚å®ƒä»¬èµ‹äºˆå¼€å‘è€…ç‹¬ç«‹åˆ›å»ºã€æµ‹è¯•å’Œéƒ¨ç½² API çš„èƒ½åŠ›ï¼Œå‡å°‘äº†å¯¹ IT å›¢é˜Ÿçš„ä¾èµ–ï¼ŒåŠ é€Ÿäº†å¼€å‘ã€‚è¿™äº›å·¥å…·å¿…é¡»åŒ…æ‹¬ç”¨æˆ·å‹å¥½çš„ç•Œé¢ã€è¯¦ç»†çš„æ–‡æ¡£å’Œè‡ªåŠ¨åŒ–çš„æµ‹è¯•åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;API ç®¡ç†ä¸­æ†ç»‘è§£å†³æ–¹æ¡ˆçš„å†æ¬¡å‡ºç°ä»£è¡¨ç€å¯¹ç°ä»£ API æ™¯è§‚éœ€æ±‚çš„é€‚åº”ã€‚é€šè¿‡åœ¨ä¸€ä¸ªç»Ÿä¸€çš„åŒ…ä¸­æä¾›ç½‘å…³ã€èº«ä»½éªŒè¯ã€å®‰å…¨å’Œå¼€å‘è€…å·¥å…·ï¼Œè¿™äº›æ†ç»‘è§£å†³æ–¹æ¡ˆæä¾›äº†é€‚ç”¨äºå„ç§ç»„ç»‡éœ€æ±‚çš„å¤šåŠŸèƒ½å’Œé«˜æ•ˆçš„è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœªçŸ¥çš„äººå·¥æ™ºèƒ½&#34;&gt;æœªçŸ¥çš„äººå·¥æ™ºèƒ½&lt;/h2&gt;
&lt;p&gt;äººå·¥æ™ºèƒ½æ­£åœ¨é¢ è¦†æ•°åä¸ªè¡Œä¸šçš„è§„åˆ™ï¼Œå¹¶ä»¥æ„æƒ³ä¸åˆ°çš„æ–¹å¼é‡å¡‘å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;â€œæ„æƒ³ä¸åˆ°â€æ˜¯æè¿°äººå·¥æ™ºèƒ½/æœºå™¨å­¦ä¹ æŠ€æœ¯å°†å¦‚ä½•æ‰°ä¹± API ç®¡ç†ç”Ÿæ€ç³»ç»Ÿçš„å¥½æ–¹å¼ã€‚KubeCon North America 2023 ä¸ OpenAI Dev Day åŒæ—¶ä¸¾è¡Œï¼Œä½†ä¸¤è€…ä¼¼ä¹å¤©å·®åœ°åˆ«ã€‚åœ¨ KubeCon ä¸Šï¼ŒAI åªè½»å¾®&lt;a href=&#34;https://danielbryantuk.medium.com/kubecon-chicago-key-takeaways-3de5ca13b375&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æåŠ&lt;/a&gt;ï¼Œä¼¼ä¹ DevOps å’Œ API ç®¡ç†è¡Œä¸šå¯¹äººå·¥æ™ºèƒ½æ²¡æœ‰å¤ªå¤šï¼ˆå°šæœªï¼ï¼‰è¨€è®ºã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå°† AI æ’é™¤åœ¨å¤–å°†ä¸¥é‡ä½ä¼° AI å‘å±•çš„èŒƒå›´å’Œé€Ÿåº¦ã€‚å»å¹´è¿™ä¸ªæ—¶å€™ï¼ŒChatGPT æ‰ä¸¤å‘¨å¤§ã€‚é‚£æ—¶æ²¡æœ‰äººçŸ¥é“å®ƒå°†å¦‚ä½•å½»åº•æ”¹å˜æŠ€æœ¯çš„å„ä¸ªæ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼ŒAI/æœºå™¨å­¦ä¹ ä¸ API æˆ˜ç•¥çš„èåˆæ˜¯ä¸å¯é¿å…çš„ï¼Œå¯èƒ½ä¼šå½»åº•æ”¹å˜ API çš„å¼€å‘ã€ç®¡ç†å’Œä¼˜åŒ–æ–¹å¼ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AI é©±åŠ¨çš„åˆ†æå¯ä»¥æä¾›å¯¹ API ä½¿ç”¨æ¨¡å¼çš„æ›´æ·±å…¥æ´å¯Ÿï¼Œä»è€Œå®ç°æ›´æœ‰æ•ˆçš„èµ„æºç®¡ç†å’Œä¼˜åŒ–ã€‚&lt;/li&gt;
&lt;li&gt;AI å¯ä»¥è‡ªåŠ¨åŒ–å’Œå¢å¼ºå®‰å…¨åè®®ï¼Œæ¯”ä¼ ç»Ÿæ–¹æ³•æ›´æœ‰æ•ˆåœ°æ£€æµ‹å¼‚å¸¸å’Œæ½œåœ¨å¨èƒã€‚&lt;/li&gt;
&lt;li&gt;AI å¯ä»¥æ˜¾ç€ç®€åŒ– API å¼€å‘è¿‡ç¨‹ã€‚é€šè¿‡ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•ï¼ŒAPI å¯ä»¥å˜å¾—æ›´åŠ è‡ªé€‚åº”å’Œæ™ºèƒ½ï¼Œèƒ½å¤Ÿä»¥æ›´é«˜çš„å‡†ç¡®æ€§å’Œæ•ˆç‡å¤„ç†å¤æ‚è¯·æ±‚ã€‚è¿™ç§é›†æˆå¯èƒ½å¯¼è‡´è‡ªæˆ‘ä¼˜åŒ–çš„ APIï¼Œæ ¹æ®å®æ—¶åé¦ˆè°ƒæ•´å…¶è¡Œä¸ºã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;AI ä¸ API ç®¡ç†çš„äº¤æ±‡æ˜¯å³å°†åˆ°æ¥çš„ç°å®ã€‚éšç€ AI ç»§ç»­æ¸—é€å„ä¸ªé¢†åŸŸï¼Œå…¶èå…¥ API ç”Ÿæ€ç³»ç»Ÿå°†æä¾›å‰æ‰€æœªæœ‰çš„æ•ˆç‡ã€å®‰å…¨æ€§å’Œé€‚åº”æ€§æ°´å¹³ï¼Œå®£å‘Šäº† API ç®¡ç†å’Œä½¿ç”¨æ–¹å¼çš„æ–°æ—¶ä»£ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æœªçŸ¥çš„æœªçŸ¥&#34;&gt;æœªçŸ¥çš„æœªçŸ¥&lt;/h2&gt;
&lt;p&gt;è¿˜æœ‰ä»€ä¹ˆåœ¨æœªæ¥ï¼Ÿéšç€æŠ€æœ¯è¿›æ­¥çš„æé€Ÿå’Œ API å·²ç»åå™¬äº†æ•´ä¸ªä¸–ç•Œçš„æ–¹å¼ï¼Œé¢„æµ‹ API ç®¡ç†çš„æœªæ¥å°±åƒè¯•å›¾ç»˜åˆ¶æœªçŸ¥é¢†åŸŸä¸€æ ·å›°éš¾ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¢†åŸŸæ­£åœ¨è¿…é€Ÿå‘å±•ï¼Œå—æ–°å…´æŠ€æœ¯å’Œ Paradigm è½¬å˜çš„æ¨åŠ¨ï¼Œè¿™ä½¿å¾—éš¾ä»¥é¢„è§æœªæ¥çš„å˜åŒ–çš„å…¨éƒ¨èŒƒå›´ã€‚å°±åƒ API å·²ç»æ”¹å˜äº†æ•°å­—åŸºç¡€è®¾æ–½ä¸€æ ·ï¼Œæœªæ¥çš„åˆ›æ–°å’Œæ–¹æ³•å°†è¿›ä¸€æ­¥é‡æ–°å®šä¹‰æˆ‘ä»¬ä»Šå¤©å¯¹ API ç®¡ç†çš„ç†è§£ã€‚&lt;/p&gt;
&lt;p&gt;è¯·å‘Šè¯‰æˆ‘ä»¬ä½ è®¤ä¸º 2024 å¹´å°†ä¸º API ç®¡ç†å¸¦æ¥ä»€ä¹ˆï¼Œä»¥åŠä½ è®¤ä¸ºæ˜å¹´æˆ‘ä»¬å°†ä½¿ç”¨ä»€ä¹ˆä»¤äººå…´å¥‹çš„æŠ€æœ¯ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä»¤äººæƒŠå¹çš„ Grafana ä»ªè¡¨ç›˜ç”¨é€”ï¼š2023 å¹´æœ€æœ‰åˆ›æ„å’Œæœ‰è¶£çš„ç”¨ä¾‹åˆ†äº«</title>
      <link>https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/</link>
      <pubDate>Fri, 29 Dec 2023 11:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/</guid>
      <description>&lt;h2 id=&#34;ç¼–è€…æŒ‰&#34;&gt;ç¼–è€…æŒ‰&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://grafana.com/blog/2023/12/27/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana dashboards in 2023: Memorable use cases of the year&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡æ–‡ç« å›é¡¾äº† 2023 å¹´ç¤¾åŒºä¸­ä¸€äº›ä»¤äººå°è±¡æ·±åˆ»çš„ Grafana ä»ªè¡¨ç›˜çš„ç”¨ä¾‹ï¼Œå®ƒä»¬å±•ç¤ºäº† Grafana çš„å¤šæ ·æ€§å’Œåˆ›é€ åŠ›ï¼Œä»¥åŠå¦‚ä½•ç”¨å¯è§†åŒ–çš„æ–¹å¼ç›‘æ§å’Œåˆ†æå„ç§æ•°æ®å’Œåœºæ™¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ­£æ–‡&#34;&gt;æ­£æ–‡&lt;/h2&gt;
&lt;p&gt;éšç€æ¯å¹´ä½¿ç”¨ &lt;a href=&#34;https://grafana.com/oss/grafana?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana&lt;/a&gt; çš„ç”¨æˆ·äººæ•°å¢åŠ ï¼Œäººä»¬ä½¿ç”¨ &lt;a href=&#34;https://grafana.com/grafana/dashboards/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana ä»ªè¡¨æ¿&lt;/a&gt; çš„åŸå› ä¹Ÿæ—¥ç›Šå¤šæ ·åŒ–ã€‚åœ¨ 2023 å¹´ï¼Œæˆ‘ä»¬ç¤¾åŒºå†…å¤–çš„æˆå‘˜åˆ†äº«äº†ä¸€äº›ä»¤äººéš¾ä»¥ç½®ä¿¡çš„ä¸“ä¸šå’Œä¸ªäººé¡¹ç›®ï¼ŒåŒ…æ‹¬ Grafana å¦‚ä½•å¸®åŠ©ä»–ä»¬æˆåŠŸå‘å°„ç«ç®­ï¼Œå‡å°‘ç¢³æ’æ”¾ï¼Œç”šè‡³å¸®åŠ©å¹³è¡¡å›½å®¶ç”µç½‘ã€‚è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä»Šå¹´çœ‹åˆ°çš„ä¸€äº›æœ€ä»¤äººéš¾å¿˜çš„ä»ªè¡¨æ¿ï¼š&lt;/p&gt;
&lt;h2 id=&#34;è·å¥–è€…&#34;&gt;è·å¥–è€…&lt;/h2&gt;
&lt;p&gt;Grafana åœ¨å…­æœˆä»½è¿æ¥äº† 10 å²çš„ç”Ÿæ—¥ï¼Œä¸ºäº†åº†ç¥è¿™ä¸€æ—¶åˆ»ï¼Œæˆ‘ä»¬é¦–æ¬¡æ¨å‡ºäº† &lt;a href=&#34;https://grafana.com/about/events/grafanacon/2023/golden-grot-awards/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Golden Grot å¥–é¡¹&lt;/a&gt;ï¼Œè¿™äº›å¥–é¡¹å¸®åŠ©çªå‡ºæ˜¾ç¤ºäº†æˆ‘ä»¬ç¤¾åŒºåˆ›å»ºçš„ä»¤äººæƒŠå¹çš„ Grafana ä»ªè¡¨æ¿ã€‚ä½†ä»Šå¹´å¹¶ä¸æ˜¯å”¯ä¸€ä¸€ä¸ªä¸ä»ªè¡¨æ¿ç›¸å…³çš„èƒœåˆ©ï¼šä»Šå¹´ä¸‰æœˆï¼ŒåŠ å·å¤§å­¦æ´›æ‰çŸ¶åˆ†æ ¡çš„ç«ç®­å·¥ç¨‹å›¢é˜Ÿä½¿ç”¨ Grafana ä½œä¸ºæµ‹è¯•å’Œå‘å°„è¿‡ç¨‹ä¸­çš„å¯è§†åŒ–å·¥å…·ï¼Œåœ¨ä¸€æ¬¡ä¸šä½™ç«ç®­ç«èµ›ä¸­èµ¢å¾—äº†å† å†›ï¼Œå¹¶æ‰“ç ´äº†ä¸–ç•Œçºªå½•ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ç›‘æ§èƒ½æºåŸºç¡€è®¾æ–½httpsgrafanacomblog20230615meet-our-golden-grot-awards-grand-prize-winnerspgblogplcmtbody-txt&#34;&gt;&lt;a href=&#34;https://grafana.com/blog/2023/06/15/meet-our-golden-grot-awards-grand-prize-winners/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›‘æ§èƒ½æºåŸºç¡€è®¾æ–½&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;Golden Grot å¥–é¡¹æœ‰ä¸¤ä½å¤§å¥–å¾—ä¸»ï¼Œåœ¨ä¸ªäººä»ªè¡¨æ¿ç±»åˆ«ä¸­ï¼Œå¥–é¡¹æˆäºˆäº†è·å…° Erasmus ç»æµå­¦é™¢çš„ç ”ç©¶ç”Ÿ Nicky Sonnemansã€‚ä»–ç”¨ä»ªè¡¨æ¿ç›‘æ§ &lt;a href=&#34;https://grafana.sonnem.nl/d/uCV3CiPVz/european-energy-infastructure-golden-grot?orgId=2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¬§æ´²èƒ½æºåŸºç¡€è®¾æ–½çš„å½“å‰çŠ¶æ€&lt;/a&gt; â€” å…·ä½“åŒ…æ‹¬æœ‰å…³å¤©ç„¶æ°”å‚¨å­˜ã€å¤©ç„¶æ°”åœ¨æ¬§æ´²çš„å®é™…æµåŠ¨ã€ç”µåŠ›ç”Ÿæˆå’Œèƒ½æºä»·æ ¼çš„å½“å‰å’Œå†å²ä¿¡æ¯ã€‚Sonnemans åˆ›å»ºè¿™ä¸ªä»ªè¡¨æ¿çš„çµæ„Ÿæ¥è‡ªäºä»–æƒ³è¦å°†èƒ½æºæ•°æ®å¯è§†åŒ–åˆ°ä¸€ä¸ªé›†ä¸­çš„åœ°æ–¹ï¼Œä»¥ä¾¿ä»–å¯ä»¥è½»æ¾åœ°å®æ—¶å‘ç°ä»»ä½•å¼‚å¸¸æƒ…å†µå¹¶æ”¶åˆ°ä»»ä½•å¿…è¦çš„è­¦æŠ¥ã€‚ä»–è¡¥å……è¯´ï¼šâ€œæˆ‘çš„ä¸»è¦åŠ¨æœºæ˜¯å±•ç¤º Grafana å¯ä»¥ç”¨ä½œå•†ä¸šæ™ºèƒ½å·¥å…·ï¼Œè€Œä¸ä»…ä»…æ˜¯ç”¨äºæŠ€æœ¯ç›‘æ§å’ŒæœåŠ¡å™¨ç›‘æ§ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-nicky-sonnemans-çš„-golden-grot-å¥–è·å¥–ä»ªè¡¨æ¿&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Nicky Sonnemans çš„ Golden Grot å¥–è·å¥–ä»ªè¡¨æ¿&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f1_hu18221844842959810489.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f1_hu8858482443459278245.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f1_hu863223689272544258.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f1_hu18221844842959810489.webp&#34;
               width=&#34;760&#34;
               height=&#34;645&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Nicky Sonnemans çš„ Golden Grot å¥–è·å¥–ä»ªè¡¨æ¿
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;è§£å†³å·¥ä½œä¸­çš„å¯è§‚æµ‹æ€§é—®é¢˜httpsgrafanacomblog20230615meet-our-golden-grot-awards-grand-prize-winnerspgblogplcmtbody-txt&#34;&gt;&lt;a href=&#34;https://grafana.com/blog/2023/06/15/meet-our-golden-grot-awards-grand-prize-winners/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è§£å†³å·¥ä½œä¸­çš„å¯è§‚æµ‹æ€§é—®é¢˜&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ä»Šå¹´çš„ Golden Grot å¥–é¡¹çš„ä¸“ä¸šä»ªè¡¨æ¿ç±»åˆ«ä¸­ï¼Œè·å¥–è€…æ˜¯å—éçº¦ç¿°å†…æ–¯å ¡çš„ IT ä¸“ä¸šäººå‘˜ Raymond Sowdenã€‚ä»–æ˜¯ RadixTrie PTY LTD çš„ CNC å›¢é˜Ÿè´Ÿè´£äººï¼Œä¸“æ³¨äº Oracle çš„ JD Edwards EnterpriseOne ERP (JDE)ã€‚ä»–åˆ›å»ºäº†è·å¥–çš„ Grafana ä»ªè¡¨æ¿æ¥è§£å†³å·¥ä½œä¸­çš„ä¸€ä¸ªé‡å¤§å¯è§‚æµ‹æ€§é—®é¢˜ï¼šâ€œæˆ‘ä»¬æ²¡æœ‰ä¸€ä¸ªå•ä¸€çš„ç›‘æ§è§†å›¾æ¥ç›‘æ§ JDEï¼Œæ‰€ä»¥æˆ‘ä»¬çš„ä»ªè¡¨æ¿ä¸ºæˆ‘ä»¬æä¾›äº†å¯¹ JDE çš„æ•´ä½“å¥åº·å’Œæ€§èƒ½çš„æ— ä¸ä¼¦æ¯”çš„è§è§£ã€‚â€ä»–è¯´ï¼Œä¸€ä¸ªé‡è¦æ—¶åˆ»æ˜¯å½“ä»–ä»¬èƒ½å¤Ÿçœ‹åˆ°åç«¯å’Œå‰ç«¯å‘ç”Ÿäº†ä»€ä¹ˆæ—¶ï¼šâ€œé‚£æ—¶æˆ‘ä»¬çŸ¥é“æˆ‘ä»¬æœ‰äº†ç‰¹åˆ«çš„ä¸œè¥¿ã€‚â€&lt;/p&gt;
&lt;p&gt;Raymond çš„ä»ªè¡¨æ¿æä¾›äº†å¯¹ç³»ç»Ÿå¥åº·çŠ¶å†µçš„é«˜çº§æ¦‚è¿°ï¼Œä½†å„ç§å°éƒ¨ä»¶é“¾æ¥åˆ°äº†æ›´å¤šæŠ€æœ¯æ•°æ®çš„è¯¦ç»†ä»ªè¡¨æ¿ã€‚å®ƒè¢«ä»–å…¬å¸çš„ JDE æŠ€æœ¯äººå‘˜ä½¿ç”¨ï¼Œä»¥åŠä»–ä»¬å®¢æˆ·çš„æŠ€æœ¯äººå‘˜ï¼Œä¸€ç›´åˆ°æ‰§è¡Œå±‚çº§ã€‚ä»–è¯´ï¼šâ€œæˆ‘ä»¬é€šè¿‡æä¾›å®æ—¶è§è§£å’ŒæŒ‡æ ‡æ¥å‡å°‘äº†æ—¥å¸¸æ£€æŸ¥ã€æ—¥å¸¸æŠ¥å‘Šç­‰äººå·¥å·¥ä½œçš„å·¥ä½œé‡ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-raymond-sowden-çš„-golden-grot-å¥–è·å¥–ä»ªè¡¨æ¿&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Raymond Sowden çš„ Golden Grot å¥–è·å¥–ä»ªè¡¨æ¿&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f2_hu17439287760839810591.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f2_hu14024831625236733302.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f2_hu17181038386559314148.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f2_hu17439287760839810591.webp&#34;
               width=&#34;760&#34;
               height=&#34;367&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Raymond Sowden çš„ Golden Grot å¥–è·å¥–ä»ªè¡¨æ¿
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;åœ¨ç«ç®­å‘å°„è¿‡ç¨‹ä¸­æä¾›æ•°æ®å¯è§æ€§httpsgrafanacomblog20230421how-grafana-helped-a-rocket-engineering-team-break-a-world-recordpgblogplcmtbody-txt&#34;&gt;&lt;a href=&#34;https://grafana.com/blog/2023/04/21/how-grafana-helped-a-rocket-engineering-team-break-a-world-record/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åœ¨ç«ç®­å‘å°„è¿‡ç¨‹ä¸­æä¾›æ•°æ®å¯è§æ€§&lt;/a&gt;&lt;/h3&gt;
&lt;p&gt;åœ¨ä¸€ç¯‡å…³äºèµ¢å¾— &lt;a href=&#34;https://friendsofamateurrocketry.org/dpf-challenge/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Dollar Per Foot æŒ‘æˆ˜&lt;/a&gt; å¹¶åˆ›ä¸‹æ¶²ä½“ç«ç®­æœ€é«˜é«˜åº¦çš„å¤§å­¦ç”Ÿå’Œè½¯ä»¶å·¥ç¨‹å¸ˆ Philip Do çš„åšå®¢æ–‡ç« ä¸­ï¼Œä»–å’Œæ¥è‡ª &lt;a href=&#34;http://rocketproject.seas.ucla.edu/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;UCLA ç«ç®­é¡¹ç›®&lt;/a&gt; çš„é˜Ÿå‹è§£é‡Šäº†ä»–ä»¬æ˜¯å¦‚ä½•ä¾èµ– &lt;a href=&#34;https://grafana.com/oss/grafana?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana&lt;/a&gt; æ¥è¿›è¡Œå·¥ä½œçš„ã€‚â€œé€šè¿‡æˆ‘ä»¬çš„ä»ªè¡¨æ¿ï¼Œæˆ‘ä»¬å¯ä»¥å¿«é€Ÿå¯è§†åŒ–æ•°æ®ï¼Œå¹¶åœ¨æµ‹è¯•å’Œå‘å°„çš„å…³é”®é˜¶æ®µç›‘æ§æ½œåœ¨çš„ç¡¬ä»¶é—®é¢˜ï¼Œâ€ä»–è¯´ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-rocket-project-çš„å‘å°„ä»ªè¡¨æ¿ä¸­çš„ä¼ æ„Ÿå™¨å’Œé˜€é—¨æ•°æ®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Rocket Project çš„å‘å°„ä»ªè¡¨æ¿ä¸­çš„ä¼ æ„Ÿå™¨å’Œé˜€é—¨æ•°æ®&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f3_hu1749907007266798716.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f3_hu1691196081122476958.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f3_hu2821222041904701256.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f3_hu1749907007266798716.webp&#34;
               width=&#34;760&#34;
               height=&#34;476&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Rocket Project çš„å‘å°„ä»ªè¡¨æ¿ä¸­çš„ä¼ æ„Ÿå™¨å’Œé˜€é—¨æ•°æ®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;å®¶å±…&#34;&gt;å®¶å±…&lt;/h2&gt;
&lt;p&gt;Grafana Labs åšå®šåœ°ç›¸ä¿¡å·¥ä½œä¸ç”Ÿæ´»çš„å¹³è¡¡ï¼Œä½†å½“ä½ å¯¹ Grafana ä»ªè¡¨æ¿çš„å¸å¼•åŠ›å’Œä¿¡æ¯ä¸°å¯Œæ€§å¦‚æ­¤ç†Ÿæ‚‰æ—¶ï¼Œéš¾ä»¥æŠµæŒ¡åˆ›å»ºä¸€ä¸ªç”¨äºç›‘è§†å®¶åº­äº‹ç‰©çš„è¯±æƒ‘ã€‚æˆ‘ä»¬åœ¨ 2023 å¹´å±•ç¤ºçš„ Grafanista åˆ¶ä½œçš„é¡¹ç›®åŒ…æ‹¬ä¸€ä¸ª&lt;a href=&#34;https://grafana.com/blog/2023/05/19/monitoring-a-furnace-with-home-assistant-prometheus-and-grafana/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯è§†åŒ–å®¶ç”¨ç‚‰å­çš„è¿è¡Œæ—¶é—´&lt;/a&gt;ã€ä¸€ä¸ª&lt;a href=&#34;https://grafana.com/blog/2023/02/15/breathing-easy-with-grafana-dashboards-and-3d-printing/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›‘æ§ç©ºæ°”è´¨é‡&lt;/a&gt;çš„é¡¹ç›®ï¼ŒåŒæ—¶ä½¿ç”¨ 3D æ‰“å°æœºï¼Œä»¥åŠä¸€ä¸ª&lt;a href=&#34;https://grafana.com/blog/2023/10/23/monitor-temperature-and-humidity-with-grafana-and-raspberry-pi/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è·Ÿè¸ªæ¸©åº¦å’Œæ¹¿åº¦&lt;/a&gt;çš„é¡¹ç›®ï¼Œç”¨äºç›‘æ§æ»¨æµ·å®¶åº­ã€‚è¿˜æœ‰ä¸€ä¸ªæ—¨åœ¨ç›‘æ§ &lt;a href=&#34;https://www.plex.tv/your-media/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Plex åª’ä½“æœåŠ¡å™¨&lt;/a&gt; çš„é¡¹ç›®ï¼Œæ˜¯ &lt;a href=&#34;https://grafana.com/blog/2023/04/28/plexporters-energize-how-we-monitor-plex-with-grafana/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å†…éƒ¨ homelab Slack é¢‘é“çš„ä¸‰ä½ Grafanista åœ¨ä¸€æ¬¡é»‘å®¢é©¬æ‹‰æ¾æœŸé—´åˆ›å»ºçš„&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„å®¶åº­é¡¹ç›®æ¥è‡ªå…¬å¸å¤–éƒ¨ï¼š&lt;a href=&#34;https://grafana.com/about/events/grafanacon/2023/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GrafanaCON 2023&lt;/a&gt; ä¸Šï¼ŒToyota Racing Development çš„é«˜çº§ DevOps å·¥ç¨‹å¸ˆ Kyle Shelton æä¾›äº†ä¸€ä¸ªæ¼”ç¤ºï¼Œä»–ä»‹ç»äº†å¦‚ä½•å°†ä»–åœ¨å·¥ä½œä¸­ä½¿ç”¨çš„ &lt;a href=&#34;https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana Cloud&lt;/a&gt; ç»éªŒï¼Œç”¨äºåœ¨å®¶ä¸­ä½¿ç”¨ Grafana Cloud Free &lt;a href=&#34;https://grafana.com/about/events/grafanacon/2023/session/triathlon-training-with-prometheus-python-grafana-cloud/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç›‘æ§ä¸ªäººä¸‰é¡¹é“äººè®­ç»ƒ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä»ä»»ä½•åœ°æ–¹ç›‘æµ‹æ¸¸æ³³æ± æ°´ä½&#34;&gt;ä»ä»»ä½•åœ°æ–¹ç›‘æµ‹æ¸¸æ³³æ± æ°´ä½&lt;/h3&gt;
&lt;p&gt;é«˜çº§è§£å†³æ–¹æ¡ˆå·¥ç¨‹å¸ˆ Brian LeBlanc åˆ›å»ºäº†ä¸€ä¸ª Grafana ä»ªè¡¨æ¿ï¼Œä»¥ä¾¿ä»–å¯ä»¥ç›‘æµ‹è‡ªå®¶æ¸¸æ³³æ± çš„æ°´ä½ã€‚è¿™ä½¿ä»–å¯ä»¥å®‰å¿ƒåœ°è¿›è¡Œäº†ä¸€æ¬¡ä¸ºæœŸ 10 å¤©çš„æ—…è¡Œï¼Œè€Œä¸ä¼šè¿‡åº¦æ‹…å¿ƒæ¸¸æ³³æ± æ°´æ³µå¯èƒ½é­å—çš„æ½œåœ¨æŸå®³ï¼ˆæ›´æ¢è´¹ç”¨ï¼š1000 ç¾å…ƒï¼‰ã€‚åœ¨&lt;a href=&#34;https://grafana.com/blog/2023/08/14/how-to-monitor-pool-water-levels-from-anywhere-with-grafana/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸€ç¯‡åšå®¢æ–‡ç« &lt;/a&gt;ä¸­ï¼Œä»–è§£é‡Šäº†ä»–å¦‚ä½•å»ºç«‹ä¸€ä¸ªç³»ç»Ÿï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªåä¸º &lt;a href=&#34;https://www.rola-chem.com/m-3000-pool-sentry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Pool Sentry&lt;/a&gt; çš„æœºæ¢°è®¾å¤‡ï¼Œä¸€ä¸ª &lt;a href=&#34;https://www.link-tap.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;LinkTap G2S&lt;/a&gt;ï¼ˆä¸€ä¸ªè¿æ¥åˆ°èŠ±å›­æ°´ç®¡çš„ç‰©è”ç½‘æ™ºèƒ½æ°´æ§åˆ¶å™¨ï¼‰ï¼Œä»¥åŠä¸€ä¸ª &lt;a href=&#34;https://weatherflow.com/tempest-home-weather-system/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tempest å¤©æ°”ç«™&lt;/a&gt;ã€‚ä»–ä½¿ç”¨ Docker è¿è¡Œäº†ä¸€ä¸ªåœ¨ GitHub ä¸Šæ‰¾åˆ°çš„ &lt;a href=&#34;https://github.com/nalbury/tempest-exporter&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;exporter&lt;/a&gt;ï¼Œå¹¶å°†æ•°æ®å¯¼å‡ºåˆ° &lt;a href=&#34;https://grafana.com/oss/prometheus/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Prometheus&lt;/a&gt;ï¼Œç„¶åè¿œç¨‹å°†æŒ‡æ ‡æ•°æ®å†™å…¥äº†ç”± Grafana Mimir æä¾›æ”¯æŒçš„ &lt;a href=&#34;https://grafana.com/products/cloud/metrics/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana Cloud Metrics&lt;/a&gt;ã€‚ä»–è§£é‡Šè¯´ï¼šâ€œTempest exporter ä» Tempest Cloud ä¸­è·å–æ•°æ®ã€‚ç„¶åï¼Œæˆ‘çš„æœ¬åœ° Prometheus å®ä¾‹ä¼šæŠ“å–è¿™äº›æ•°æ®å¹¶å°†å…¶å‘å¸ƒåˆ° Grafana Cloud Metrics ä¸­ï¼Œä»¥ä¾¿æˆ‘å¯ä»¥åœ¨ Grafana Cloud ä¸­å¯è§†åŒ–å®ƒã€‚â€ç»“æœï¼Œä»–è¯´ï¼šâ€œæˆ‘å¯ä»¥å°†ä¸¤ä¸ªç‰©è”ç½‘è®¾å¤‡çš„æ•°æ®æ±‡æ€»åˆ°ä¸€ä¸ªçª—å£ä¸­ï¼Œä»¥è¯„ä¼°æ°´çš„æ¶ˆè€—ã€é™é›¨é‡å’Œç¯å¢ƒæ¸©åº¦ã€‚â€&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªé¡¹ç›®åœ¨å¤šä¸ªæ–¹é¢éƒ½å–å¾—äº†æˆåŠŸï¼šâ€œä½œä¸ºä¸€åæ–°çš„ Grafanistaï¼Œå®ƒä¸ºæˆ‘æä¾›äº†ä¸€äº›å®é™…çš„ç”¨ä¾‹ï¼Œè®©æˆ‘æœ‰æœºä¼šäº²è‡ªå­¦ä¹ æˆ‘ä»¬çš„äº§å“ï¼Œâ€ä»–è¯´ã€‚â€œåœ¨æˆ‘å’Œå®¶äººåº¦å‡æœŸé—´ï¼Œå®ƒä¹Ÿä¸€ç›´è¿è¡Œå¾—éå¸¸é¡ºåˆ©ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä¸€ä¸ª-grafana-ä»ªè¡¨æ¿çš„æˆªå›¾æ¶µç›–äº†å¤§èŒƒå›´çš„æ—¶é—´åŒ…æ‹¬æ°´çš„ä½¿ç”¨æ•°æ®é™æ°´å’Œæ¸©åº¦&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä¸€ä¸ª Grafana ä»ªè¡¨æ¿çš„æˆªå›¾ï¼Œæ¶µç›–äº†å¤§èŒƒå›´çš„æ—¶é—´ï¼ŒåŒ…æ‹¬æ°´çš„ä½¿ç”¨æ•°æ®ã€é™æ°´å’Œæ¸©åº¦ã€‚&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f4_hu15693370160595678351.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f4_hu9491927770473704521.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f4_hu18335451674300757946.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f4_hu15693370160595678351.webp&#34;
               width=&#34;760&#34;
               height=&#34;336&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä¸€ä¸ª Grafana ä»ªè¡¨æ¿çš„æˆªå›¾ï¼Œæ¶µç›–äº†å¤§èŒƒå›´çš„æ—¶é—´ï¼ŒåŒ…æ‹¬æ°´çš„ä½¿ç”¨æ•°æ®ã€é™æ°´å’Œæ¸©åº¦ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;ç¯å¢ƒæ°”å€™å’Œèƒ½æºæ¶ˆè€—&#34;&gt;ç¯å¢ƒã€æ°”å€™å’Œèƒ½æºæ¶ˆè€—&lt;/h2&gt;
&lt;p&gt;ä»Šå¹´çš„è®¸å¤šæ°å‡ºä»ªè¡¨æ¿æ˜¯ä½œä¸ºç¯ä¿ä½¿å‘½çš„ä¸€éƒ¨åˆ†åˆ›å»ºçš„ã€‚Grafana Labs çš„ä¸€ä¸ªå®¢æˆ·è½¬å‘ Grafanaï¼Œå¸®åŠ©å‡å°‘å¯¹ç¯å¢ƒçš„å½±å“ã€‚åœ¨å¦ä¸€ä¸ªç”¨ä¾‹ä¸­ï¼Œæˆ‘ä»¬äº†è§£åˆ° Grafana Cloud åœ¨ä¸€æ¬¡èƒ½æºå±æœºæœŸé—´å‘æŒ¥äº†å…³é”®ä½œç”¨ã€‚æˆ‘ä»¬è¿˜å‘ç°ï¼ŒGrafana Labs çš„ä¸€åå·¥ç¨‹å¸ˆæ›¾ç»å°† Grafana ä½œä¸ºå¯æŒç»­å†œä¸šç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å‡å°‘æ•°æ®ä¸­å¿ƒçš„ç¢³æ’æ”¾&#34;&gt;å‡å°‘æ•°æ®ä¸­å¿ƒçš„ç¢³æ’æ”¾&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.sentrysoftware.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Sentry Software&lt;/a&gt; æ˜¯ Hardware Sentry çš„åˆ¶é€ å•†ï¼Œå®ƒæ˜¯ä¸€æ¬¾ IT ç›‘æ§è½¯ä»¶ï¼Œå…¶ä¸šåŠ¡çš„å¾ˆå¤§ä¸€éƒ¨åˆ†ä¾èµ–äºåœ¨å…¶æ•°æ®ä¸­å¿ƒä¸­ç»´æŒæœ€ä½³çš„æ¸©åº¦æ¡ä»¶ï¼Œè¿™ä¸€æ“ä½œå¯¹å…¬å¸çš„æ•´ä½“ç¢³è¶³è¿¹æœ‰æ‰€è´¡çŒ®ã€‚&lt;/p&gt;
&lt;p&gt;æœ€è¿‘ï¼ŒSentry Software å¼€å§‹é‡‡å–æªæ–½ï¼Œåœ¨ä½äºå·´é»çš„ä¸»è¦æ•°æ®ä¸­å¿ƒä¸­é™ä½ç”µåŠ›æ¶ˆè€—ï¼Œä»¥å‡å°‘å…¶ç¢³æ’æ”¾ã€‚é€šè¿‡å®æ–½å¼€æ”¾æ ‡å‡†å’Œ Grafana Labs æŠ€æœ¯ï¼Œä»–ä»¬å¼€å‘äº†ä¸€ä¸ª&lt;a href=&#34;https://grafana.com/grafana/dashboards/17229-hardware-sentry-site/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä½¿ç”¨ Grafana ä»ªè¡¨æ¿ç›‘æ§ç”µåŠ›ä½¿ç”¨æƒ…å†µ&lt;/a&gt;çš„ç›‘æ§ç³»ç»Ÿï¼Œä»¥æ›´é«˜æ•ˆåœ°ç›‘æµ‹ç”µåŠ›ä½¿ç”¨æƒ…å†µã€‚æœ€ç»ˆç»“æœæ˜¯æ•°æ®ä¸­å¿ƒçš„ç©ºè°ƒèƒ½æºä½¿ç”¨å‡å°‘äº† 19%ï¼Œå¹´åº¦äºŒæ°§åŒ–ç¢³æ’æ”¾é‡å‡å°‘äº† 7%ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„éƒ¨åˆ†æ˜¯ï¼Œç”±äºæ•´ä¸ªç›‘æ§ç³»ç»Ÿæ˜¯å»ºç«‹åœ¨å¼€æºè§£å†³æ–¹æ¡ˆå’Œå¼€æ”¾æ ‡å‡†ä¹‹ä¸Šçš„ï¼Œä»»ä½•äººéƒ½å¯ä»¥å¤åˆ¶è¯¥å…¬å¸çš„æˆåŠŸç»éªŒã€‚Sentry Software CEO Bertrand Martin åœ¨&lt;a href=&#34;https://grafana.com/about/events/grafanacon/2023/session/grafana-opentelemetry-to-reduce-electricity-usage-at-sentry-software/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GrafanaCON 2023 æ¼”è®²&lt;/a&gt;ä¸­è¡¨ç¤ºï¼šâ€œè¿™ä¸ªæ•…äº‹å¯ä»¥æˆä¸ºä½ çš„æ•…äº‹ï¼Œä½ ä¸éœ€è¦å¤æ‚çš„ä¼ä¸šè§£å†³æ–¹æ¡ˆã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-sentry-software-çš„-grafana-ä»ªè¡¨æ¿ä¸ºæ›´æœ‰æ•ˆåœ°è·Ÿè¸ªå…¶æ•°æ®ä¸­å¿ƒçš„ç¢³è¶³è¿¹æä¾›äº†æœ‰å…³èƒ½æºæ¶ˆè€—æˆæœ¬å’Œæ’æ”¾çš„å®æ—¶å’Œç´¯ç§¯æ•°æ®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Sentry Software çš„ Grafana ä»ªè¡¨æ¿ä¸ºæ›´æœ‰æ•ˆåœ°è·Ÿè¸ªå…¶æ•°æ®ä¸­å¿ƒçš„ç¢³è¶³è¿¹æä¾›äº†æœ‰å…³èƒ½æºæ¶ˆè€—ã€æˆæœ¬å’Œæ’æ”¾çš„å®æ—¶å’Œç´¯ç§¯æ•°æ®ã€‚&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f5_hu6382822618192999423.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f5_hu14400009668208227237.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f5_hu18331537354472158026.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f5_hu6382822618192999423.webp&#34;
               width=&#34;760&#34;
               height=&#34;360&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Sentry Software çš„ Grafana ä»ªè¡¨æ¿ä¸ºæ›´æœ‰æ•ˆåœ°è·Ÿè¸ªå…¶æ•°æ®ä¸­å¿ƒçš„ç¢³è¶³è¿¹æä¾›äº†æœ‰å…³èƒ½æºæ¶ˆè€—ã€æˆæœ¬å’Œæ’æ”¾çš„å®æ—¶å’Œç´¯ç§¯æ•°æ®ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;åœ¨æ³•å›½å¹³è¡¡ç”µç½‘&#34;&gt;åœ¨æ³•å›½å¹³è¡¡ç”µç½‘&lt;/h3&gt;
&lt;p&gt;å»å¹´å†¬å¤©ï¼ŒFlexcity â€”â€” ç”µåŠ¨çµæ´»æ€§å¸‚åœºçš„å¸‚åœºé¢†å¯¼è€… â€”â€” é¢ä¸´äº†å‰æ‰€æœªæœ‰çš„æŒ‘æˆ˜ï¼šå¸®åŠ©æ³•å›½ç”µç½‘è¿è¥å•† &lt;a href=&#34;https://www.rte-france.com/en/home&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;RTE&lt;/a&gt; åœ¨æ¬§æ´²æ™®éçš„èƒ½æºå±æœºé˜´äº‘ç¬¼ç½©ä¸‹ç¨³å®šæ³•å›½å›½å®¶ç”µç½‘ã€‚éšç€å…¬å¸å› å…¶åŠªåŠ›è€Œä¸Šäº†æ–°é—»å¤´æ¡ï¼ŒFlexcity çš„æŠ€æœ¯å›¢é˜Ÿå°† &lt;a href=&#34;https://grafana.com/products/cloud/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Grafana Cloud&lt;/a&gt; å½’åŠŸäºå¸®åŠ©æ³•å›½æ¸¡è¿‡äº†é‚£ä¸ªç‰¹åˆ«è‰°éš¾çš„æ—¶æœŸã€‚åˆ©ç”¨ Grafana ä»ªè¡¨æ¿ï¼ŒFlexcity å›¢é˜Ÿå¯ä»¥å®æ—¶è·Ÿè¸ªå®¢æˆ·çš„èƒ½æºæ¶ˆè€—æ•°æ®ï¼Œä»è€Œåœ¨ç”µç½‘æœ€éœ€è¦çš„å…³é”®æ—¶åˆ»èŠ‚çœäº†æ•°åƒåƒç“¦æ—¶ç”µåŠ›ã€‚&lt;/p&gt;
&lt;p&gt;Flexcity çš„ CTO Mathias Deshayes è¡¨ç¤ºï¼šâ€œå½“æˆ‘ä»¬æ”¶åˆ°ç”µç½‘è¿è¥å•†çš„è¯·æ±‚æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ Grafana ä»ªè¡¨æ¿å®æ—¶æŸ¥çœ‹å®¢æˆ·åŸºç¡€çš„èƒ½æºå’ŒåŠŸç‡æ¶ˆè€—å’Œäº§é‡æ°´å¹³ã€‚æˆ‘ä»¬åœ¨å®¢æˆ·ç°åœºå®‰è£…äº†å°å‹è®¾å¤‡ï¼Œæ¯éš”å››ç§’ï¼Œæˆ‘ä»¬çš„å¹³å°å°±ä¼šå°†ä»–ä»¬çš„æ¶ˆè€—å‘é€åˆ°æˆ‘ä»¬çš„å¹³å°ï¼Œå¹¶åœ¨ Grafana ä¸­æ˜¾ç¤ºå‡ºæ¥ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åœ¨ Grafana ä¸­æœ‰äº†æˆ‘ä»¬ç»„åˆçš„æ€»å’Œï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ¿€æ´»æœŸé—´è·Ÿè¸ªæ¶ˆè€—ï¼Œå³å½“ç”µç½‘è¿è¥å•†è¦æ±‚è®¾å¤‡ä¸Šä¸‹è°ƒæ•´åŠŸç‡ä»¥å¸®åŠ©å¹³è¡¡ç”µç½‘æ—¶ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-flexcity-æ¯”åˆ©æ—¶ç»„åˆçš„-grafana-cloud-ä»ªè¡¨æ¿æ˜¾ç¤ºäº†å…¬å¸å®¢æˆ·å’ŒæœåŠ¡-kpi-çš„å…¨çƒæ¶ˆè€—&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Flexcity æ¯”åˆ©æ—¶ç»„åˆçš„ Grafana Cloud ä»ªè¡¨æ¿ï¼Œæ˜¾ç¤ºäº†å…¬å¸å®¢æˆ·å’ŒæœåŠ¡ KPI çš„å…¨çƒæ¶ˆè€—ã€‚&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f6_hu1796082277492361466.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f6_hu15393511587537966416.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f6_hu10286619010594032130.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f6_hu1796082277492361466.webp&#34;
               width=&#34;760&#34;
               height=&#34;331&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Flexcity æ¯”åˆ©æ—¶ç»„åˆçš„ Grafana Cloud ä»ªè¡¨æ¿ï¼Œæ˜¾ç¤ºäº†å…¬å¸å®¢æˆ·å’ŒæœåŠ¡ KPI çš„å…¨çƒæ¶ˆè€—ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;ç›‘ç®¡å°å†œåœº&#34;&gt;ç›‘ç®¡å°å†œåœº&lt;/h3&gt;
&lt;p&gt;åœ¨åŠ å…¥ Grafana Labs ä¹‹å‰ï¼Œé«˜çº§è§£å†³æ–¹æ¡ˆå·¥ç¨‹å¸ˆ Chris Wilkes ç»è¥äº†ä¸€ä¸ªé±¼å¡˜å†œåœº â€”â€” ä¸¥æ ¼æ¥è¯´æ˜¯ä¸€ä¸ªæ°´è€•å†œåœºã€‚ ï¼ˆæ°´è€•å†œä¸šç»“åˆäº†å…»é±¼ä¸šå’Œæ°´åŸ¹ï¼Œå³åœ¨æ¶²ä½“åŸ¹å…»åŸºä¸­ç§æ¤è”¬èœã€‚ï¼‰Wilkes æ˜¯ä¸€ååˆå­¦è€…å†œæ°‘ï¼Œå¦è¨€åœ¨å¼€å§‹æ—¶é‡åˆ°äº†å¾ˆå¤šé—®é¢˜ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€æ¬¡ï¼Œä»–çš„æ‰€æœ‰é±¼åœ¨æ™šä¸Šä¸€å°ç©ºæ°”æ³µå‘ç”Ÿæ•…éšœåæ­»äº¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ·±å…¥ç ”ç©¶ç‰©è”ç½‘é¢†åŸŸä¹‹åï¼Œä»–è¯´ï¼šâ€œå†œåœºä¸Šçš„æ¯ä¸€å°æœºå™¨éƒ½æœ‰ä¸€ä¸ªå¾®æ§åˆ¶å™¨ã€‚â€éšç€æ—¶é—´çš„æ¨ç§»ï¼Œå†œåœºä¸Šå‘å±•å‡ºäº†ä¸€ä¸ªæ§åˆ¶å’Œç›‘æ§ç³»ç»Ÿï¼Œä»–ä½¿ç”¨ PubNub æŸ¥è¯¢äº†æ‰€æœ‰æ¿ï¼Œå¹¶å°†æ•°æ®è½¬å‚¨åˆ°è¿è¡Œåœ¨ä¸­å¤®æœåŠ¡å™¨ä¸Šï¼ˆä¸€å°æ—§çš„ç¬”è®°æœ¬ç”µè„‘æ”¾åœ¨é›†è£…ç®±ä¸­ï¼‰çš„ PostgreSQL æ•°æ®åº“ä¸­ã€‚å½“ä»–å¶ç„¶å‘ç° Grafana æ—¶ï¼Œä»–è¯´ï¼šâ€œå°±åƒèµ°å‡ºé»‘æš—æ´ç©´è¿›å…¥å…‰æ˜ã€‚â€&lt;/p&gt;
&lt;p&gt;Wilkes ç»è¥äº†è¿™ä¸ªå†œåœºçº¦äº”å¹´ã€‚ä»–è¯´ï¼šâ€œGrafana çš„ç›‘æ§èƒ½åŠ›åœ¨æˆ‘ç®¡ç†å’Œæ”¹è¿›å†œä¸šæŠ€æœ¯æ–¹é¢å‘æŒ¥äº†é‡è¦ä½œç”¨ã€‚â€ä»–è¡¥å……è¯´ï¼Œä»–è®¡åˆ’æœ‰ä¸€å¤©å›åˆ°å†œä¸šé¢†åŸŸï¼Œå°†æ›´åŠ é«˜çº§çš„ Grafana æŠ€èƒ½ä¸ä»–å¯¹å¯æŒç»­æ€§çš„çƒ­æƒ…ç»“åˆèµ·æ¥ã€‚ä»–è¯´ï¼šâ€œæˆ‘ä»¬éœ€è¦æ”¹å˜ç§æ¤é£Ÿç‰©çš„æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨é£Ÿç‰©ç¨€ç¼ºå’Œä¸ç¡®å®šçš„åœ°æ–¹ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-2016-å¹´å·¦å³çš„-grafana-ä»ªè¡¨æ¿è·Ÿè¸ªäº†å†œåœºçš„ç‰©è”ç½‘æ•°æ®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;2016 å¹´å·¦å³çš„ Grafana ä»ªè¡¨æ¿ï¼Œè·Ÿè¸ªäº†å†œåœºçš„ç‰©è”ç½‘æ•°æ®ã€‚&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f7_hu4661636944307329489.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f7_hu12118003496546013070.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f7_hu5643900455970786609.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f7_hu4661636944307329489.webp&#34;
               width=&#34;760&#34;
               height=&#34;517&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      2016 å¹´å·¦å³çš„ Grafana ä»ªè¡¨æ¿ï¼Œè·Ÿè¸ªäº†å†œåœºçš„ç‰©è”ç½‘æ•°æ®ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;æˆ·å¤–&#34;&gt;æˆ·å¤–&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ç»å¸¸çœ‹åˆ° Grafana ä»ªè¡¨æ¿çªç„¶å‡ºç°ï¼Œä½†ä»Šå¹´æœ‰ä¸¤ä¸ªç‰¹åˆ«å¼•äººæ³¨ç›®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;the-ocean-race&#34;&gt;The Ocean Race&lt;/h3&gt;
&lt;p&gt;å‚èµ›è€…åœ¨è¿™ä¸ªå…¨çƒå¸†èˆ¹æ¯”èµ›ä¸­ç¯ç»•ä¸–ç•Œæ¯”èµ›ï¼Œè¿™æ„å‘³ç€ä»–ä»¬éœ€è¦å…¨å¤©å€™ç›‘æµ‹åŒ…æ‹¬ GPS ä½ç½®ã€é£é€Ÿä»¥åŠç©ºæ°”å’Œæ°´æ¸©åœ¨å†…çš„æ•°æ®ã€‚ä»£è¡¨å¾·å›½çš„ &lt;a href=&#34;https://www.theoceanrace.com/en/teams/team-malizia&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Team Malizia&lt;/a&gt;åˆ†äº«äº†&lt;a href=&#34;https://exocet.cloud/grafana/d/bsbc_7MGx/malizia-public-dashboard-the-ocean-race?orgId=15&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¸®åŠ©ä»–ä»¬åœ¨è‰°éš¾çš„å…­ä¸ªæœˆå†’é™©ä¸­è·Ÿè¸ªè¿›å±•çš„ Grafana ä»ªè¡¨æ¿&lt;/a&gt;ã€‚The Ocean Race æ€»éƒ¨è¿˜å±•ç¤ºäº†ä¸€äº›ä»¤äººå°è±¡æ·±åˆ»çš„ Grafana ä»ªè¡¨æ¿ï¼Œä»¥ç›‘æµ‹æ•´ä¸ªæ¯”èµ›ã€‚&lt;/p&gt;
&lt;h3 id=&#34;call-of-duty&#34;&gt;Call of Duty&lt;/h3&gt;
&lt;p&gt;Grafana ä»ªè¡¨æ¿çš„ç°å®ä¸–ç•Œç¤ºä¾‹å¹¶ä¸æ–°é²œï¼Œä½†å®ƒä»¬ä¹Ÿåœ¨è™šæ‹Ÿä¸–ç•Œä¸­ä½¿ç”¨ã€‚ä¸‹é¢çš„å›¾åƒæ¥è‡ªè§†é¢‘æ¸¸æˆ Call of Duty: Modern Warfare 2ã€‚&lt;/p&gt;
&lt;p&gt;Grafana Labs çš„é¦–å¸­æ‰§è¡Œå®˜å…¼è”åˆåˆ›å§‹äºº Raj Dutt åœ¨&lt;a href=&#34;https://grafana.com/about/events/grafanacon/2023/session/keynote-grafana-10/?pg=blog&amp;amp;plcmt=body-txt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GrafanaCON 2023 ä¸»é¢˜æ¼”è®²&lt;/a&gt;ä¸­è¯´ï¼šâ€œå¯¹äºé‚£äº›äº†è§£ Grafana çš„äººæ¥è¯´ï¼Œè¿™æ˜¾ç„¶éå¸¸åƒ Grafanaï¼Œä»æŒ‡é’ˆçš„æ ·å¼ã€é¢œè‰²æ–¹æ¡ˆä»¥åŠä¸€åˆ‡éƒ½æ¸…æ™°å¯è§ã€‚â€â€œæ‰€ä»¥æ— è®ºæ˜¯è°åœ¨ Activision æ˜¯ Grafana çš„ç²‰ä¸å¹¶ä¸”è´Ÿè´£è¿™ä¸ªï¼Œè°¢è°¢ä½ ï¼æˆ‘ä»¬æ‰€æœ‰äººéƒ½è¡¨ç¤ºç”±è¡·çš„æ•¬æ„ã€‚â€&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-call-of-duty-è§†é¢‘æ¸¸æˆä¸­çš„-grafana-ä»ªè¡¨æ¿æˆªå›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Call of Duty è§†é¢‘æ¸¸æˆä¸­çš„ Grafana ä»ªè¡¨æ¿æˆªå›¾&#34; srcset=&#34;
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f8_hu4092503091472369284.webp 400w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f8_hu16955323406776421686.webp 760w,
               /blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f8_hu16870755456012369398.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/grafana-dashboards-in-2023-memorable-use-cases-of-the-year/f8_hu4092503091472369284.webp&#34;
               width=&#34;760&#34;
               height=&#34;428&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Call of Duty è§†é¢‘æ¸¸æˆä¸­çš„ Grafana ä»ªè¡¨æ¿æˆªå›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æœŸå¾…åœ¨ 2024 å¹´çœ‹åˆ°æ›´å¤šä»¤äººæƒŠå¹çš„ä»ªè¡¨æ¿ï¼&lt;/p&gt;
&lt;p&gt;æƒ³è¦ä¸ç¤¾åŒºåˆ†äº«æ‚¨çš„ Grafana æ•…äº‹å’Œä»ªè¡¨æ¿å—ï¼Ÿç»™æˆ‘ä»¬å‘é€é‚®ä»¶ï¼š&lt;a href=&#34;mailto:stories@grafana.com&#34;&gt;stories@grafana.com&lt;/a&gt;ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ç»™åˆå­¦ç”Ÿæˆå¼ AIï¼ˆGenAIï¼‰çš„å¼€å‘äººå‘˜çš„ 7 æ¡æœ€ä½³å®è·µ</title>
      <link>https://cloudnativecn.com/blog/7-best-practices-for-developers-getting-started-with-genai/</link>
      <pubDate>Wed, 20 Dec 2023 11:30:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/7-best-practices-for-developers-getting-started-with-genai/</guid>
      <description>&lt;h2 id=&#34;ç¼–è€…æŒ‰&#34;&gt;ç¼–è€…æŒ‰&lt;/h2&gt;
&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/7-best-practices-for-developers-getting-started-with-genai/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://thenewstack.io/7-best-practices-for-developers-getting-started-with-genai/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¼–è¾‘è¯„è®ºï¼šè¿™æ˜¯ä¸€ç¯‡éå¸¸æœ‰ä»·å€¼çš„æ–‡ç« ï¼Œå‘å¼€å‘è€…å±•ç¤ºäº†ç”Ÿæˆå¼ AI çš„æ½œåŠ›å’Œåº”ç”¨ã€‚ç”Ÿæˆå¼ AI æ˜¯ä¸€ç§åˆ©ç”¨å¤§å‹è¯­è¨€æ¨¡å‹æ¥ç”Ÿæˆå’Œè½¬æ¢æ–‡æœ¬çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥å¸®åŠ©å¼€å‘è€…è§£å†³ä¸€äº›å¤æ‚çš„é—®é¢˜ï¼Œå¦‚ä»£ç ç”Ÿæˆï¼Œæ–‡æ¡£ç¼–å†™ï¼Œå†…å®¹åˆ›ä½œç­‰ã€‚ç”Ÿæˆå¼ AI ä¹Ÿæ˜¯ä¸€ç§äº‘åŸç”Ÿçš„æŠ€æœ¯ï¼Œå®ƒéœ€è¦å¤§é‡çš„è®¡ç®—èµ„æºå’Œæ•°æ®ï¼Œä»¥åŠé«˜æ•ˆçš„éƒ¨ç½²å’Œç®¡ç†æ–¹å¼ã€‚æ–‡ç« æä¾›äº†ä¸€äº›å®ç”¨çš„å·¥å…·å’Œå¹³å°ï¼Œå¦‚ GitHub Copilotï¼ŒBardï¼ŒChatGPT ç­‰ï¼Œè®©å¼€å‘è€…å¯ä»¥è½»æ¾åœ°å°è¯•å’Œä½¿ç”¨ç”Ÿæˆå¼ AIã€‚æ–‡ç« è¿˜ç»™å‡ºäº†ä¸€äº›æ³¨æ„äº‹é¡¹å’Œå»ºè®®ï¼Œå¦‚ä¿æŠ¤æ•°æ®éšç§ï¼ŒéªŒè¯è¾“å‡ºè´¨é‡ï¼Œé¿å…æ»¥ç”¨ç­‰ï¼Œè®©å¼€å‘è€…å¯ä»¥è´Ÿè´£ä»»åœ°ä½¿ç”¨ç”Ÿæˆå¼ AIã€‚æˆ‘è®¤ä¸ºè¿™ç¯‡æ–‡ç« æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å…¥é—¨æŒ‡å—ï¼Œè®©å¼€å‘è€…å¯ä»¥äº†è§£å’Œåˆ©ç”¨ç”Ÿæˆå¼ AI æ¥æ‰“é€ åˆ›æ–°çš„äº‘åŸç”Ÿåº”ç”¨ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&#34;æ­£æ–‡&#34;&gt;æ­£æ–‡&lt;/h2&gt;
&lt;p&gt;é€šè¿‡ä¸€ç‚¹ç»éªŒï¼Œä½ å¯ä»¥ä½¿ç”¨ GenAI è§£å†³ä¸€äº›ç›¸å½“å›°éš¾çš„é—®é¢˜ï¼Œå°±åƒå­¦ä¹ ä»»ä½•æ–°æŠ€æœ¯ä¸€æ ·ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯åŠ¨æ‰‹å®è·µã€‚&lt;/p&gt;
&lt;p&gt;éšç€å¯è®¿é—®çš„ç”Ÿæˆå¼äººå·¥æ™ºèƒ½è¿›å…¥ä¸»æµï¼Œä»¥åŠç”±æ­¤äº§ç”Ÿçš„é€šè¿‡ç®€å•è¯­è¨€è½¬åŒ–æ•´ä¸ªäººç±»çŸ¥è¯†çš„èƒ½åŠ›ï¼Œæ¯ä¸ªä¼ä¸šéƒ½åœ¨ç«­åŠ›å°†äººå·¥æ™ºèƒ½æ•´åˆåˆ°å…¶æŠ€æœ¯ä½“ç³»ä¸­ã€‚å¯¹äºå¼€å‘äººå‘˜æ¥è¯´ï¼Œå‹åŠ›å¾ˆå¤§ï¼Œä½†ä¹Ÿæœ‰ç€ä»¤äººå…´å¥‹çš„æ— é™å¯èƒ½æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€äº›ç»éªŒï¼Œä½ å¯ä»¥ä½¿ç”¨ GenAI è§£å†³ä¸€äº›ç›¸å½“å›°éš¾çš„é—®é¢˜ï¼Œå°±åƒå­¦ä¹ è‡ª HTML è¯ç”Ÿä»¥æ¥çš„æ¯ä¸€é¡¹æ–°æŠ€æœ¯ä¸€æ ·ã€‚è®©æˆ‘ä»¬çœ‹çœ‹ä½ å¯ä»¥é‡‡å–çš„ä¸ƒä¸ªæ­¥éª¤ï¼Œä»¥å¼€å§‹å»ºç«‹ GenAI çš„åŸºç¡€ï¼Œå¹¶æœ€ç»ˆé€æ­¥å‘å±•æˆä¸€ä¸ªå®Œå…¨è¿ä½œã€å¯æ‰©å±•çš„åº”ç”¨ç¨‹åºã€‚&lt;/p&gt;
&lt;h2 id=&#34;1-ç©è½¬ç°æœ‰çš„-genai-å·¥å…·&#34;&gt;1. ç©è½¬ç°æœ‰çš„ GenAI å·¥å…·&lt;/h2&gt;
&lt;p&gt;å…¥é—¨ GenAI çš„æœ€ä½³æ–¹æ³•æ˜¯å®è·µï¼Œè€Œä¸”é—¨æ§›éå¸¸ä½ã€‚å¸‚åœºä¸Šç°åœ¨æœ‰è®¸å¤šå…è´¹é€‰é¡¹ï¼Œæ¯”å¦‚ Bardã€ChatGPTã€Bing å’Œ Anthropicï¼Œæœ‰å¾ˆå¤šå¯ä»¥å­¦ä¹ çš„é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å°è¯•ä½¿ç”¨ GenAI å·¥å…·å’Œä»£ç ç”Ÿæˆè§£å†³æ–¹æ¡ˆè¿›è¡Œå®éªŒï¼ˆå¹¶é¼“åŠ±ä½ çš„å›¢é˜Ÿè¿›è¡Œå®éªŒï¼‰ï¼Œä¾‹å¦‚&lt;a href=&#34;https://github.com/features/copilot&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Copilot&lt;/a&gt;ï¼Œå®ƒé›†æˆåˆ°æ¯ä¸ªæµè¡Œçš„ IDE ä¸­ï¼Œå……å½“ä¸€å¯¹ç¨‹åºå‘˜ã€‚Copilot æä¾›ç¨‹åºå‘˜å»ºè®®ï¼Œå¸®åŠ©è§£å†³ä»£ç é—®é¢˜ï¼Œå¹¶ç”Ÿæˆæ•´ä¸ªå‡½æ•°ï¼Œä½¿å­¦ä¹ å’Œé€‚åº”&lt;a href=&#34;https://us.resources.cio.com/resources/the-data-streaming-platform-key-to-ai-initiatives-4/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GenAI&lt;/a&gt;å˜å¾—æ›´å¿«æ›´å®¹æ˜“ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ é¦–æ¬¡ä½¿ç”¨è¿™äº›ç°æˆçš„å·¥å…·æ—¶ï¼Œè¦å°å¿ƒä½¿ç”¨ä¸“æœ‰æˆ–æ•æ„Ÿçš„å…¬å¸æ•°æ®ï¼Œå³ä½¿åªæ˜¯æä¾›ç»™å·¥å…·ä¸€ä¸ªæç¤ºä¹Ÿè¦å°å¿ƒã€‚Gen AI ä¾›åº”å•†å¯èƒ½ä¼šå­˜å‚¨å¹¶ä½¿ç”¨ä½ çš„æ•°æ®ç”¨äºå°†æ¥çš„è®­ç»ƒè¿è¡Œï¼Œè¿™æ˜¯å…¬å¸æ•°æ®æ”¿ç­–å’Œä¿¡æ¯å®‰å…¨åè®®çš„é‡å¤§è¿è§„è¡Œä¸ºã€‚ç¡®ä¿ä½ åŠæ—¶ç›´æ¥åœ°å‘ä½ çš„å›¢é˜Ÿä¼ è¾¾è¿™ä¸€é»„é‡‘è§„åˆ™ã€‚&lt;/p&gt;
&lt;h2 id=&#34;2-äº†è§£ä»-genai-ä¸­å¯ä»¥è·å¾—ä»€ä¹ˆ&#34;&gt;2. äº†è§£ä» GenAI ä¸­å¯ä»¥è·å¾—ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ä½ å¼€å§‹å°è¯• GenAIï¼Œä½ å°†å¾ˆå¿«äº†è§£åˆ°ä¸åŒæç¤ºä¼šäº§ç”Ÿä»€ä¹ˆç±»å‹çš„è¾“å‡ºã€‚å¤§å¤šæ•° GenAI å·¥å…·å¯ä»¥ç”Ÿæˆå„ç§æ ¼å¼çš„æ–‡æœ¬ï¼ŒåŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ç”Ÿæˆ&lt;/strong&gt;æ–°çš„æ•…äº‹ã€æƒ³æ³•ã€æ–‡ç« æˆ–ä»»æ„é•¿åº¦çš„æ–‡æœ¬ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è½¬æ¢&lt;/strong&gt;ç°æœ‰æ–‡æœ¬ä¸ºä¸åŒæ ¼å¼ï¼Œå¦‚ JSONã€Markdown æˆ– CSVã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç¿»è¯‘&lt;/strong&gt;æ–‡æœ¬æˆä¸åŒè¯­è¨€ã€‚&lt;/li&gt;
&lt;li&gt;ä»¥èŠå¤©çš„æ–¹å¼&lt;strong&gt;å¯¹è¯&lt;/strong&gt;æ¥å›ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å®¡æŸ¥&lt;/strong&gt;æ–‡æœ¬ä»¥å±•ç¤ºç‰¹å®šå…ƒç´ ã€‚&lt;/li&gt;
&lt;li&gt;å°†é•¿ç¯‡å†…å®¹&lt;strong&gt;æ±‡æ€»&lt;/strong&gt;ä»¥è·å–æ´å¯Ÿã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åˆ†æ&lt;/strong&gt;æ–‡æœ¬çš„æƒ…æ„Ÿã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»»ä½•äººéƒ½å¯ä»¥ç”Ÿæˆè¿™äº›ç±»å‹çš„ç”Ÿæˆæ–‡æœ¬ç»“æœï¼Œæ— éœ€ç¼–ç¨‹æŠ€èƒ½ã€‚åªéœ€é”®å…¥æç¤ºï¼Œæ–‡æœ¬å°±ä¼šäº§ç”Ÿã€‚ç„¶è€Œï¼Œå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰ç»è¿‡çš„åŸ¹è®­è¶Šå¤šï¼Œå³å®ƒæ‘„å–çš„è¯­è¨€ç¢ç‰‡è¶Šå¤šï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œå®ƒåœ¨ç”Ÿæˆã€æ›´æ”¹å’Œåˆ†ææ–‡æœ¬æ–¹é¢å°±ä¼šå˜å¾—æ›´åŠ å‡†ç¡®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;3-å­¦ä¹ æç¤ºå·¥ç¨‹&#34;&gt;3. å­¦ä¹ æç¤ºå·¥ç¨‹&lt;/h2&gt;
&lt;p&gt;éƒ¨ç½² GenAI çš„è‰¯å¥½æ–¹æ³•ä¹‹ä¸€æ˜¯æŒæ¡ç¼–å†™æç¤ºçš„æŠ€å·§ï¼Œè¿™æ—¢æ˜¯ä¸€é—¨è‰ºæœ¯åˆæ˜¯ä¸€é—¨ç§‘å­¦ã€‚è™½ç„¶æç¤ºå·¥ç¨‹å¸ˆæ˜¯ä¸€ä¸ªå®é™…çš„èŒä½æè¿°ï¼Œä½†å®ƒä¹Ÿæ˜¯ä»»ä½•å¸Œæœ›æé«˜ä»–ä»¬ä½¿ç”¨ AI çš„äººçš„å¥½ç»°å·ã€‚ä¼˜ç§€çš„æç¤ºå·¥ç¨‹å¸ˆçŸ¥é“å¦‚ä½•å¼€å‘ã€å®Œå–„å’Œä¼˜åŒ–æ–‡æœ¬æç¤ºï¼Œä»¥è·å¾—æœ€ä½³ç»“æœå¹¶æé«˜æ•´ä¸ª AI ç³»ç»Ÿçš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æç¤ºå·¥ç¨‹ä¸éœ€è¦ç‰¹å®šçš„å­¦ä½æˆ–èƒŒæ™¯ï¼Œä½†ä»äº‹è¿™é¡¹å·¥ä½œçš„äººéœ€è¦æ“…é•¿æ¸…æ™°è§£é‡Šäº‹ç‰©ã€‚è¿™æ˜¯é‡è¦çš„ï¼Œå› ä¸ºæ‰€æœ‰å¯ç”¨çš„ LLM éƒ½æ˜¯æ— çŠ¶æ€çš„ï¼Œè¿™æ„å‘³ç€æ²¡æœ‰é•¿æœŸè®°å¿†ï¼Œæ¯æ¬¡äº¤äº’åªå­˜åœ¨äºå°ä¼šè¯ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æç¤ºå·¥ç¨‹ä¸­ï¼Œä»¥ä¸‹ä¸‰ä¸ªå› ç´ å˜å¾—é‡è¦ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;ä¸Šä¸‹æ–‡&lt;/strong&gt;ï¼šä½ æå‡ºçš„é—®é¢˜ã€èŠå¤©å†å²è®°å½•å’Œä½ è®¾ç½®çš„å‚æ•°ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;çŸ¥è¯†&lt;/strong&gt;ï¼šLLM å·²ç»æ¥å—çš„åŸ¹è®­å†…å®¹ä»¥åŠä½ é€šè¿‡æç¤ºæä¾›çš„æ–°ä¿¡æ¯çš„ç»“åˆã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å½¢å¼&lt;/strong&gt;ï¼šä½ æœŸæœ›ä»¥ä½•ç§æ–¹å¼ç”Ÿæˆä¿¡æ¯çš„è¯­æ°”ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä¸Šä¸‹æ–‡ã€çŸ¥è¯†å’Œå½¢å¼çš„ç»“åˆå¡‘é€ äº† GenAI çš„å¤§é‡çŸ¥è¯†å­˜å‚¨æˆä¸ºä½ å¸Œæœ›è·å¾—çš„å“åº”ç±»å‹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;4-æ¢ç´¢å…¶ä»–-genai-æç¤ºæ–¹æ³•&#34;&gt;4. æ¢ç´¢å…¶ä»– GenAI æç¤ºæ–¹æ³•&lt;/h2&gt;
&lt;p&gt;åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´åœ¨è°ˆè®ºé›¶-shot æç¤ºï¼Œè¿™åŸºæœ¬ä¸Šæ„å‘³ç€æå‡ºä¸€ä¸ªå¸¦æœ‰ä¸€äº›ä¸Šä¸‹æ–‡çš„é—®é¢˜ã€‚å¦‚æœä½ ä»è¿™ç§æ–¹æ³•ä¸­æ²¡æœ‰å¾—åˆ°æœŸæœ›çš„ç»“æœï¼Œè¿˜æœ‰å››ç§æç¤º GenAI çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;strong&gt;å•æ¬¡æç¤º&lt;/strong&gt;ï¼šæä¾›ä½ æ­£åœ¨å¯»æ‰¾çš„è¾“å‡ºç±»å‹çš„ç¤ºä¾‹ã€‚å¦‚æœä½ æƒ³è¦ç‰¹å®šç±»å‹çš„æ ¼å¼ï¼Œä¾‹å¦‚[æ ‡é¢˜]å’Œ[4 ä¸ªè¦ç‚¹]ï¼Œè¿™å°†ç‰¹åˆ«æœ‰ç”¨ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å°‘é‡æç¤º&lt;/strong&gt;ï¼šè¿™ç±»ä¼¼äºå•æ¬¡æç¤ºï¼Œä½†ä½ ä¼šæä¾›ä¸‰åˆ°äº”ä¸ªç¤ºä¾‹è€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;â€œè®©æˆ‘ä»¬ä¸€æ­¥ä¸€æ­¥åœ°æ€è€ƒâ€&lt;/strong&gt;ï¼šè¿™ç§æŠ€å·§å¯¹ LLM å’Œå¯¹äººéƒ½åŒæ ·æœ‰æ•ˆã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«å¤šä¸ªéƒ¨åˆ†çš„å¤æ‚é—®é¢˜ï¼Œè¯·åœ¨æœ«å°¾è¾“å…¥æ­¤çŸ­è¯­ï¼Œç­‰å¾… LLM åˆ†è§£é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æ€è·¯é“¾æç¤º&lt;/strong&gt;ï¼šå¯¹äºæ¶‰åŠå¤æ‚ç®—æœ¯æˆ–å…¶ä»–æ¨ç†ä»»åŠ¡çš„é—®é¢˜ï¼Œæ€è·¯é“¾æç¤ºä¼šæŒ‡ç¤ºå·¥å…·â€œå±•ç¤ºå…¶å·¥ä½œæ–¹å¼â€å¹¶è§£é‡Šå…¶å¦‚ä½•å¾—å‡ºç­”æ¡ˆã€‚ä»¥ä¸‹æ˜¯å¯èƒ½çš„ç¤ºä¾‹ï¼š&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/7-best-practices-for-developers-getting-started-with-genai/f1_hu14801736640312961138.webp 400w,
               /blog/7-best-practices-for-developers-getting-started-with-genai/f1_hu14731880502347286634.webp 760w,
               /blog/7-best-practices-for-developers-getting-started-with-genai/f1_hu5759154962722220918.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/7-best-practices-for-developers-getting-started-with-genai/f1_hu14801736640312961138.webp&#34;
               width=&#34;760&#34;
               height=&#34;402&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;5-æŸ¥çœ‹å…¶ä»–-genai-å·¥ä½œç¤ºä¾‹&#34;&gt;5. æŸ¥çœ‹å…¶ä»– GenAI å·¥ä½œç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;ä¸€æ—¦ä½ ç†Ÿæ‚‰äº† GenAI å·¥å…·å¹¶äº†è§£å¦‚ä½•ç¼–å†™å‡ºè‰²çš„æç¤ºï¼Œ&lt;a href=&#34;https://github.com/openai/openai-cookbook/tree/main/examples&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯·æŸ¥çœ‹ OpenAI å‘å¸ƒçš„ä¸€äº›ç¤ºä¾‹&lt;/a&gt;ï¼Œäº†è§£å…¶ä»–äººæ­£åœ¨åšä»€ä¹ˆä»¥åŠå¯èƒ½çš„å…¶ä»–å¯èƒ½æ€§ã€‚éšç€ä½ çš„å®éªŒï¼Œä½ å°†æ›´åŠ ç†Ÿæ‚‰èŠå¤©ç•Œé¢ï¼Œå¹¶å­¦ä¼šå¦‚ä½•å¯¹å…¶è¿›è¡Œå¾®è°ƒï¼Œä»¥ä¾¿ç†Ÿç»ƒåœ°ç¼©å°å“åº”èŒƒå›´ï¼Œç”šè‡³å°†å“åº”è½¬æ¢ä¸º CSV æ–‡ä»¶æˆ–å…¶ä»–ç±»å‹çš„è¡¨æ ¼ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘å¦‚ä½•å°†ä½ çš„ GenAI çŸ¥è¯†åº”ç”¨äºä½ çš„ä¸šåŠ¡ï¼Œä»¥ç®€åŒ–å›°éš¾æˆ–é‡å¤æ€§ä»»åŠ¡ï¼Œç”Ÿæˆåˆ›æ„å¹¶ä½¿ä¿¡æ¯æ˜“äºè®©æ›´å¹¿æ³›çš„å—ä¼—è®¿é—®ã€‚ä½ å¯ä»¥æƒ³è±¡å‡ºå“ªäº›æ–°çš„ç”¨ä¾‹ï¼Ÿä»¥å‰ä¸å¯èƒ½çš„ä¸œè¥¿ç°åœ¨æˆä¸ºå¯èƒ½äº†å—ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;6-é›†æˆç¬¬ä¸‰æ–¹-genai-å·¥å…·å’Œ-api&#34;&gt;6. é›†æˆç¬¬ä¸‰æ–¹ GenAI å·¥å…·å’Œ API&lt;/h2&gt;
&lt;p&gt;è€ƒè™‘ä½¿ç”¨ ChatGPTã€Bard å’Œ Claude 2 ç­‰ API é€šè¿‡ API ä½¿ç”¨ LLMs çš„è§’è‰²ã€‚è¿™äº›å·¥å…·éƒ½æä¾›äº†å¼ºå¤§çš„ APIï¼Œå¹¶æœ‰æ”¯æŒæ–‡æ¡£ï¼Œå› æ­¤å…¥é—¨é—¨æ§›å¾ˆä½ã€‚å¤§å¤šæ•°è¿™äº› API æ˜¯åŸºäºä½¿ç”¨é‡çš„ï¼Œå› æ­¤æ›´å®¹æ˜“ç©å¼„ã€‚&lt;/p&gt;
&lt;p&gt;é€šå¸¸æƒ…å†µä¸‹ï¼Œé€šè¿‡è¯­ä¹‰æœç´¢å’Œç”±å‘é‡æ•°æ®åº“æ”¯æŒçš„åµŒå…¥æ¥å°†è‡ªå®šä¹‰æˆ–ç§æœ‰æ•°æ®é›†æˆåˆ° LLM æç¤ºä¸­ï¼Œä½ è¿˜å¯ä»¥é›†æˆè‡ªå®šä¹‰æˆ–ç§æœ‰æ•°æ®ã€‚é€šå¸¸ç§°ä¸º RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;åˆ†è§£è¿™ä¸¤ä¸ªæœ¯è¯­ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è¯­ä¹‰æœç´¢&lt;/strong&gt;ï¼šä½¿ç”¨è¯åµŒå…¥æ¯”è¾ƒæŸ¥è¯¢çš„å«ä¹‰ä¸å…¶ç´¢å¼•ä¸­æ–‡æ¡£çš„å«ä¹‰ï¼Œå³ä½¿æ²¡æœ‰å®Œå…¨åŒ¹é…çš„å•è¯ä¹Ÿèƒ½è·å¾—æ›´ç›¸å…³çš„ç»“æœã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åµŒå…¥&lt;/strong&gt;ï¼šå°†å¯¹è±¡ï¼ˆå¦‚å•è¯ã€å¥å­æˆ–æ•´ä¸ªæ–‡æ¡£ï¼‰çš„æ•°å€¼è¡¨ç¤ºè½¬åŒ–ä¸ºå¤šç»´ç©ºé—´ã€‚è¿™ä½¿å¾—è¯„ä¼°ä¸åŒå®ä½“ä¹‹é—´çš„å…³ç³»æˆä¸ºå¯èƒ½ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯è¿™å¯èƒ½çœ‹èµ·æ¥çš„ä¸€ä¸ªç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  &gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;&#34; srcset=&#34;
               /blog/7-best-practices-for-developers-getting-started-with-genai/f2_hu1009306822241985111.webp 400w,
               /blog/7-best-practices-for-developers-getting-started-with-genai/f2_hu11470018464599431523.webp 760w,
               /blog/7-best-practices-for-developers-getting-started-with-genai/f2_hu17865044914941909841.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/7-best-practices-for-developers-getting-started-with-genai/f2_hu1009306822241985111.webp&#34;
               width=&#34;760&#34;
               height=&#34;608&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è¿™å¹…å›¾å±•ç¤ºäº†â€œçŒ«â€å’Œâ€œç‹—â€çš„æ¦‚å¿µæ¯”å®ƒä»¬ä¸â€œäººâ€æˆ–â€œèœ˜è››â€çš„æ¦‚å¿µæ›´æ¥è¿‘ï¼Œâ€œè½¦è¾†æ±½è½¦â€åˆ™æ˜¯æœ€è¿œçš„ï¼Œæ˜¯æ¦‚å¿µä¸­æœ€ä¸ç›¸å…³çš„ã€‚ï¼ˆ&lt;a href=&#34;https://www.confluent.io/blog/chatgpt-and-streaming-data-for-real-time-generative-ai/#connecting-knowledge-base-to-gpt&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œæœ‰æ›´å¤šå…³äºå¦‚ä½•ä½¿ç”¨è¯­ä¹‰æœç´¢å’ŒåµŒå…¥çš„ä¿¡æ¯&lt;/a&gt;ã€‚ï¼‰&lt;/p&gt;
&lt;h2 id=&#34;7-ä»å¤´å¼€å§‹è®­ç»ƒè‡ªå·±çš„æ¨¡å‹&#34;&gt;7. ä»å¤´å¼€å§‹è®­ç»ƒè‡ªå·±çš„æ¨¡å‹&lt;/h2&gt;
&lt;p&gt;è¿™æœ€åçš„å»ºè®®å®é™…ä¸Šä¸å¤ªåƒå»ºè®®ï¼Œæ›´åƒæ˜¯ä¸€ä¸ªâ€œå¯é€‰çš„ä¸‹ä¸€æ­¥â€ã€‚è®­ç»ƒè‡ªå·±çš„ GenAI æ¨¡å‹å¹¶ä¸é€‚åˆæ¯ä¸ªäººï¼Œä½†å¦‚æœä½ ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‹¥æœ‰ç‹¬ç‰¹è€Œæœ‰ä»·å€¼çš„çŸ¥è¯†åº“ã€‚&lt;/li&gt;
&lt;li&gt;æƒ³è¦æ‰§è¡Œå•†ä¸š LLM æ— æ³•å®Œæˆçš„æŸäº›ä»»åŠ¡ã€‚&lt;/li&gt;
&lt;li&gt;å‘ç°å•†ä¸š LLM çš„æ¨ç†æˆæœ¬åœ¨å•†ä¸šä¸Šæ²¡æœ‰æ„ä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;æœ‰ç‰¹å®šçš„å®‰å…¨è¦æ±‚ï¼Œéœ€è¦æ‰˜ç®¡è‡ªå·±çš„ LLM æ•°æ®ï¼Œå¹¶ä¸”ä¸æ„¿é€šè¿‡ç¬¬ä¸‰æ–¹ API ä¼ é€’æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è®­ç»ƒè‡ªå·±çš„æ¨¡å‹çš„ä¸€ç§æ–¹æ³•æ˜¯ä½¿ç”¨å¼€æºæ¨¡å‹ï¼Œä¾‹å¦‚ Llama 2ã€Mosaic MPT-7Bã€Falcon æˆ– Vicunaï¼Œå…¶ä¸­è®¸å¤šè¿˜æä¾›äº†å•†ä¸šä½¿ç”¨è®¸å¯è¯ã€‚è¿™äº›é€šå¸¸æ ¹æ®å®ƒä»¬å…·æœ‰çš„å‚æ•°æ•°é‡è¿›è¡Œæ ‡è®°ï¼š7Bã€13Bã€40B ç­‰ã€‚ â€œBâ€ä»£è¡¨æ¨¡å‹çš„å‚æ•°æ•°ç›®ï¼Œä»¥åŠå®ƒå¯ä»¥å¤„ç†å’Œå­˜å‚¨çš„ä¿¡æ¯é‡ã€‚æ•°å­—è¶Šé«˜ï¼Œæ¨¡å‹å°±è¶Šå¤æ‚å’Œå¤æ‚ï¼Œä½†è®­ç»ƒå’Œè¿è¡Œæˆæœ¬ä¹Ÿè¶Šé«˜ã€‚å¦‚æœä½ çš„ç”¨ä¾‹ä¸å¤æ‚ï¼Œå¹¶ä¸”å¦‚æœä½ è®¡åˆ’åœ¨æ€§èƒ½ç›¸å½“å¼ºå¤§çš„ç°ä»£ç¬”è®°æœ¬ç”µè„‘ä¸Šè¿è¡Œæ¨¡å‹ï¼Œé‚£ä¹ˆå…·æœ‰è¾ƒä½å‚æ•°çš„æ¨¡å‹æ˜¯å¼€å§‹çš„æœ€ä½³ä¸”æœ€ç»æµçš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸­å¤§å‹ç»„ç»‡å¯èƒ½ä¼šé€‰æ‹©ä»å¤´å¼€å§‹æ„å»ºå’Œè®­ç»ƒä¸€ä¸ª LLM æ¨¡å‹ã€‚è¿™æ˜¯ä¸€æ¡éå¸¸æ˜‚è´µã€èµ„æºå¯†é›†ä¸”è€—æ—¶çš„ AI ä¹‹è·¯ã€‚ä½ éœ€è¦éš¾ä»¥æ‹›è˜çš„æŠ€æœ¯äººæ‰ï¼Œå¹¶å…·å¤‡é•¿æ—¶é—´è¿­ä»£çš„æœºä¼šï¼Œå› æ­¤å¯¹å¤§å¤šæ•°ç»„ç»‡æ¥è¯´ï¼Œè¿™æ¡è·¯çº¿ä¸ç°å®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¾®è°ƒ-llm&#34;&gt;å¾®è°ƒ LLM&lt;/h3&gt;
&lt;p&gt;ä¸€äº›ç»„ç»‡é€‰æ‹©ä¸­é—´è·¯å¾„ï¼šå¾®è°ƒåŸºæœ¬å¼€æº LLM ä»¥å®ç°æ¨¡å‹é¢„è®­ç»ƒèƒ½åŠ›ä¹‹å¤–çš„ç‰¹å®šåŠŸèƒ½ã€‚å¦‚æœä½ å¸Œæœ›ä»¥ä½ å“ç‰Œç‹¬ç‰¹çš„å£°éŸ³åˆ›å»ºè™šæ‹ŸåŠ©æ‰‹æˆ–åŸºäºçœŸå®å®¢æˆ·è´­ä¹°æ„å»ºçš„æ¨èç³»ç»Ÿï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚è¿™äº›æ¨¡å‹ä¼šéšç€ä½ çº³å…¥æ’åé å‰çš„ç”¨æˆ·äº¤äº’è€Œä¸æ–­åœ°è®­ç»ƒè‡ªå·±ã€‚äº‹å®ä¸Šï¼Œ&lt;a href=&#34;https://voicebot.ai/2023/08/23/openai-brings-fine-tuning-to-gpt-3-5-turbo-and-gpt-4/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Open AI æŠ¥å‘Š&lt;/a&gt;ï¼Œä½¿ç”¨æ­¤æ¨¡å‹ï¼Œå¯ä»¥å°†æç¤ºé•¿åº¦ç¼©çŸ­å¤šè¾¾ 90%ï¼ŒåŒæ—¶ä¿æŒæ€§èƒ½ä¸å˜ã€‚æ­¤å¤–ï¼ŒOpen AI çš„å•†ä¸š API çš„æœ€æ–°å¢å¼ºåŠŸèƒ½ä½¿å…¶ä¸é©±åŠ¨ ChatGPT å’Œ Bing AI çš„æ¨¡å‹ä¸€æ ·å¼ºå¤§å’Œæ˜“äºè®¿é—®ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes åœ¨è£¸æœºä¸Šæ¯”è™šæ‹Ÿæœºè¡¨ç°æ›´å¥½å—ï¼šKubernetes æ€§èƒ½å¯¹æ¯”å®éªŒ</title>
      <link>https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/</link>
      <pubDate>Mon, 18 Dec 2023 14:30:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://thenewstack.io/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šæœ¬æ–‡å¯¹æ¯”äº†è™šæ‹Ÿæœºå’Œè£¸æœºä¸Š Kubernetes é›†ç¾¤çš„ CPUã€RAMã€å­˜å‚¨å’Œç½‘ç»œæ€§èƒ½çš„è¯¦ç»†æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è®¸å¤šäººè®¤ä¸ºéƒ¨ç½²åœ¨è£¸æœºä¸Šçš„ Kubernetes é›†ç¾¤æ¯”éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šçš„æ€§èƒ½æ›´å¥½ï¼Œä½†ç›´åˆ°ç°åœ¨éƒ½æ²¡æœ‰å…³äºè¿™ä¸€å‡è®¾çš„è¯æ®ã€‚åœ¨ Gcoreï¼Œæˆ‘ä»¬åªæä¾›åŸºäºå……åˆ†è¯æ®çš„ä¿¡æ¯ç»™å®¢æˆ·ï¼Œå› æ­¤æˆ‘ä»¬å†³å®šè‡ªè¡Œæµ‹è¯• Kubernetes æ˜¯å¦åœ¨&lt;a href=&#34;https://thenewstack.io/bare-metal-in-a-cloud-native-world/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è£¸æœºä¸Š&lt;/a&gt;æ¯”åœ¨è™šæ‹Ÿæœºä¸Šè¡¨ç°æ›´å¥½ï¼Œå¦‚æœæ˜¯çš„è¯ï¼Œå·®è·æœ‰å¤šå¤§ã€‚æˆ‘å°†åˆ†äº«æˆ‘ä»¬å†…éƒ¨æµ‹è¯•çš„ç»“æœã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘æ•…æ„ä¸è®¨è®ºè™šæ‹ŸèŠ‚ç‚¹ä¸è£¸æœºèŠ‚ç‚¹ç«äº‰çš„å…¶ä»–æ–¹é¢ï¼Œå¦‚&lt;a href=&#34;https://gcore.com/blog/kubernetes-on-bare-metal/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆæœ¬æ•ˆç›Šæˆ–åŸºç¡€è®¾æ–½æ§åˆ¶çº§åˆ«&lt;/a&gt;ã€‚è¿™è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ï¼Œæœ¬æ–‡åªå…³æ³¨æ€§èƒ½æ¯”è¾ƒã€‚&lt;/p&gt;
&lt;h2 id=&#34;vm-å’Œè£¸æœº-kubernetes-ä¹‹é—´çš„åŒºåˆ«&#34;&gt;VM å’Œè£¸æœº Kubernetes ä¹‹é—´çš„åŒºåˆ«&lt;/h2&gt;
&lt;p&gt;å½“æ‚¨åœ¨è™šæ‹Ÿæœºä¸Šéƒ¨ç½² Kubernetes é›†ç¾¤æ—¶ï¼Œä¸è£¸æœºï¼ˆBMï¼‰ç›¸æ¯”ï¼Œæ‚¨ä¼šå¾—åˆ°é¢å¤–çš„åŸºç¡€è®¾æ–½å±‚ï¼Œå³è™šæ‹Ÿæœºç›‘è§†å™¨å’Œå®¢æˆ·æ“ä½œç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ˜¾ç¤ºè£¸æœºå’Œè™šæ‹Ÿæœºæ¶æ„å·®å¼‚çš„å›¾è¡¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ˜¾ç¤ºè£¸æœºå’Œè™šæ‹Ÿæœºæ¶æ„å·®å¼‚çš„å›¾è¡¨&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/39ff19bc-image1a-e1700581613781_hu15883057500611356443.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/39ff19bc-image1a-e1700581613781_hu4426442748305589303.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/39ff19bc-image1a-e1700581613781_hu9013060151492115554.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/39ff19bc-image1a-e1700581613781_hu15883057500611356443.webp&#34;
               width=&#34;760&#34;
               height=&#34;331&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ˜¾ç¤ºè£¸æœºå’Œè™šæ‹Ÿæœºæ¶æ„å·®å¼‚çš„å›¾è¡¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 1ï¼šè£¸æœºå’Œè™šæ‹Ÿæœºæ¶æ„çš„å·®å¼‚ã€‚&lt;/p&gt;
&lt;p&gt;è¿™äº›å±‚å ç”¨ç‰©ç† CPU å’Œ RAM æ¥è¿è¡Œï¼Œä»å·¥ä½œè´Ÿè½½ä¸­æ‹¿èµ°ä¸€äº›è®¡ç®—èƒ½åŠ›ã€‚è™šæ‹ŸåŒ–è¿˜ä¼šå½±å“ç½‘ç»œå’Œå­˜å‚¨æ€§èƒ½ï¼šè™šæ‹Ÿç½‘ç»œå’Œå­˜å‚¨æ¯”ç‰©ç†ç½‘ç»œå’Œå­˜å‚¨æ…¢ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸æ¯”ä¹‹ä¸‹ï¼Œå½“æ‚¨åœ¨&lt;a href=&#34;https://thenewstack.io/provision-bare-metal-kubernetes-with-the-cluster-api/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è£¸æœºæœåŠ¡å™¨ä¸Šéƒ¨ç½² Kubernetes é›†ç¾¤&lt;/a&gt;æ—¶ï¼Œæ‚¨æ²¡æœ‰ä»»ä½•é¢å¤–çš„åŸºç¡€è®¾æ–½å±‚å’Œè™šæ‹ŸåŒ–ã€‚æœåŠ¡å™¨çš„ç‰©ç†èµ„æºå®Œå…¨ä¸“ç”¨äºæ‚¨çš„å·¥ä½œè´Ÿè½½ï¼Œå®¹å™¨åŒ–åº”ç”¨ç¨‹åºå¯ä»¥ç›´æ¥è®¿é—®è¿™äº›èµ„æºã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆ‘ä»¬å¦‚ä½•æ¯”è¾ƒè™šæ‹Ÿæœºå’Œè£¸æœº-k8s-æ€§èƒ½&#34;&gt;æˆ‘ä»¬å¦‚ä½•æ¯”è¾ƒè™šæ‹Ÿæœºå’Œè£¸æœº K8s æ€§èƒ½&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å…¨é¢äº†è§£è™šæ‹Ÿæœºå’Œè£¸æœºé›†ç¾¤æ€§èƒ½çš„æ¯”è¾ƒï¼Œæˆ‘ä»¬æµ‹é‡äº†ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;CPUï¼š&lt;/strong&gt; é€Ÿåº¦å’Œåˆ©ç”¨ç‡&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;RAMï¼š&lt;/strong&gt; å»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;å­˜å‚¨ï¼š&lt;/strong&gt; æ¯ç§’äº‹åŠ¡ï¼ˆTPSï¼‰å’Œå»¶è¿Ÿ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ç½‘ç»œï¼š&lt;/strong&gt; å¸¦å®½å’Œå»¶è¿Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸ºäº†ä¿æŒå·¥ä½œè´Ÿè½½çš„ä¸€è‡´æ€§ï¼Œæ‰€æœ‰æµ‹è¯•åº”ç”¨ç¨‹åºéƒ½ä»¥å®¹å™¨åŒ–æ–¹å¼éƒ¨ç½²åœ¨æ¯”è¾ƒçš„å·¥ä½œèŠ‚ç‚¹ä¸Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;æˆ‘ä»¬çš„æµ‹è¯•æ¡ä»¶&#34;&gt;æˆ‘ä»¬çš„æµ‹è¯•æ¡ä»¶&lt;/h3&gt;
&lt;p&gt;åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¿è¡Œåœ¨&lt;a href=&#34;https://gcore.com/cloud/managed-kubernetes&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gcore æ‰˜ç®¡çš„ Kubernetes&lt;/a&gt;ä¸Šçš„ K8s é›†ç¾¤ã€‚ç„¶è€Œï¼Œç”±äºæ‰˜ç®¡çš„ Kubernetes ä¸ä¼šå¢åŠ å·¥ä½œèŠ‚ç‚¹æ€§èƒ½çš„ä»»ä½•å¼€é”€ï¼Œå› æ­¤è¿™äº›ç»“æœä¹Ÿä¸æ ‡å‡† Kubernetes ç›¸å…³ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä¿æŒå·¥ä½œè´Ÿè½½çš„ç›¸åŒæ¡ä»¶ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ç›¸ä¼¼çš„è™šæ‹Ÿæœºå’Œè£¸æœºå·¥ä½œèŠ‚ç‚¹çš„é…ç½®ã€‚ä»¥ä¸‹æ˜¯è¿™ç§æ¯”è¾ƒé…ç½®çš„ç¤ºä¾‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;è£¸æœºå·¥ä½œèŠ‚ç‚¹ï¼š&lt;/strong&gt; 1x Intel Xeon E-2388 8C/16T 3.2 GHz / 64 GB / Ubuntu 22.04&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;è™šæ‹Ÿæœºå·¥ä½œèŠ‚ç‚¹ï¼š&lt;/strong&gt; 16 vCPU / 64 GiB å†…å­˜ / Ubuntu 22.04&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;æµ‹è¯•ç»“æœæ‘˜è¦&#34;&gt;æµ‹è¯•ç»“æœæ‘˜è¦&lt;/h2&gt;
&lt;p&gt;åœ¨æµ‹è¯•ä¸­ï¼Œæˆ‘ä»¬æ¯”è¾ƒäº†ä¸¤ä¸ª Kubernetes é›†ç¾¤ï¼Œä¸€ä¸ªéƒ¨ç½²åœ¨è™šæ‹Ÿæœºï¼ˆVMsï¼‰ä¸Šï¼Œå¦ä¸€ä¸ªéƒ¨ç½²åœ¨è£¸æœºä¸Šã€‚å®ƒä»¬çš„é…ç½®ç›¸ä¼¼ã€‚ä½œä¸ºæµ‹è¯•å·¥ä½œè´Ÿè½½ï¼Œæˆ‘ä»¬è¿è¡Œäº†ä»¥ä¸‹å†…å®¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ç”¨äº CPU æµ‹è¯•çš„ CPU åŸºå‡†æµ‹è¯•&lt;/li&gt;
&lt;li&gt;ç”¨äº RAM æµ‹è¯•çš„ Sysbench&lt;/li&gt;
&lt;li&gt;ç”¨äºå­˜å‚¨æµ‹è¯•çš„ Pgbench&lt;/li&gt;
&lt;li&gt;ç”¨äºç½‘ç»œæµ‹è¯•çš„ Netperf&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æ€»ç»“æœ€é‡è¦çš„æµ‹è¯•ç»“æœçš„è¡¨æ ¼ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æµ‹è¯•ç»“æœè¡¨æ ¼&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æµ‹è¯•ç»“æœè¡¨æ ¼&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/417a03ef-summary1_hu7118314951676424900.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/417a03ef-summary1_hu6673537408299442938.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/417a03ef-summary1_hu7158908024045810663.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/417a03ef-summary1_hu7118314951676424900.webp&#34;
               width=&#34;760&#34;
               height=&#34;295&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æµ‹è¯•ç»“æœè¡¨æ ¼
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æ˜¾ç„¶ï¼Œè£¸æœºé›†ç¾¤åœ¨æ‰€æœ‰æƒ…å†µä¸‹æ•ˆç‡æ›´é«˜ã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬è¯¦ç»†æŸ¥çœ‹ç»“æœï¼Œå¹¶ç¡®å®šè£¸æœºæ€§èƒ½å¯¹æ‚¨çš„å·¥ä½œè´Ÿè½½æ„å‘³ç€ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯¦ç»†æµ‹è¯•ç»“æœ&#34;&gt;è¯¦ç»†æµ‹è¯•ç»“æœ&lt;/h2&gt;
&lt;p&gt;ç°åœ¨ï¼Œè®©æˆ‘ä»¬è¯¦ç»†æŸ¥çœ‹æ¯ä¸ªè¯„ä¼°æ ‡å‡†ä¸‹è£¸æœºå’Œ VM é›†ç¾¤çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cpu-é€Ÿåº¦å’Œåˆ©ç”¨ç‡&#34;&gt;CPU é€Ÿåº¦å’Œåˆ©ç”¨ç‡&lt;/h2&gt;
&lt;p&gt;å¯¹äº CPU é€Ÿåº¦æ¯”è¾ƒï¼Œæˆ‘ä»¬ä½¿ç”¨äº† Alex Dedyura çš„ &lt;a href=&#34;https://github.com/alexdedyura/cpu-benchmark&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CPU åŸºå‡†æµ‹è¯•&lt;/a&gt;ã€‚è¿™æ˜¯ä¸€ä¸ªè®¡ç®—åˆ° 10,000 ä½å°æ•°çš„ pi çš„è„šæœ¬ã€‚ä»¥ç§’ä¸ºå•ä½çš„è®¡ç®—æ—¶é—´ï¼Œå¹³å‡å€¼åœ¨ 10 æ¬¡æµ‹è¯•ä¸­è¢«è§†ä¸ºæµ‹è¯•ç»“æœã€‚è®¡ç®— pi æ˜¯ä¸€ä¸ª CPU å¯†é›†å‹ä»»åŠ¡ï¼Œå› æ­¤è¯¥åŸºå‡†æµ‹è¯•æ¸…æ™°åœ°æ˜¾ç¤ºäº†è¢«æµ‹è¯• CPU çš„æ€§èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ CPU é€Ÿåº¦æ¯”è¾ƒçš„ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾è¡¨æ˜¾ç¤ºè£¸æœºé›†ç¾¤çš„-cpu-é€Ÿåº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„-cpu-å¿«äº†ä¸¤å€å¤š&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾è¡¨æ˜¾ç¤ºï¼Œè£¸æœºé›†ç¾¤çš„ CPU é€Ÿåº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ CPU å¿«äº†ä¸¤å€å¤š&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/f35507b7-image3a_hu7590700065589710454.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/f35507b7-image3a_hu9194157310494957751.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/f35507b7-image3a_hu1951929181626291109.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/f35507b7-image3a_hu7590700065589710454.webp&#34;
               width=&#34;760&#34;
               height=&#34;334&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾è¡¨æ˜¾ç¤ºï¼Œè£¸æœºé›†ç¾¤çš„ CPU é€Ÿåº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ CPU å¿«äº†ä¸¤å€å¤š
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 3ï¼šè£¸æœºé›†ç¾¤çš„ CPU é€Ÿåº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ CPU å¿«äº†ä¸¤å€å¤šã€‚&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿæœºé›†ç¾¤çš„ 10 æ¬¡é‡è¯•çš„å¹³å‡æ—¶é—´ä¸º 47.07 ç§’ï¼›è€Œè£¸æœºé›†ç¾¤ä¸º 21.46 ç§’ã€‚å› æ­¤ï¼Œè£¸æœºé›†ç¾¤å¿«äº†ä¸¤å€å¤šã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯è™šæ‹Ÿæœºé›†ç¾¤çš„ CPU åˆ©ç”¨ç‡æµ‹è¯•ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¹³å‡åˆ©ç”¨ç‡ä¸º-8681&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¹³å‡åˆ©ç”¨ç‡ä¸º 86.81%&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/12670f56-image4a_hu13940636004228181467.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/12670f56-image4a_hu10574852521258537534.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/12670f56-image4a_hu5399063720231841400.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/12670f56-image4a_hu13940636004228181467.webp&#34;
               width=&#34;760&#34;
               height=&#34;162&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¹³å‡åˆ©ç”¨ç‡ä¸º 86.81%
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 4ï¼šè™šæ‹Ÿæœºé›†ç¾¤çš„ CPU å¹³å‡åˆ©ç”¨ç‡ä¸º 86.81%ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5è™šæ‹Ÿæœºé›†ç¾¤-cpu-çš„æ¯ä¸ªæ ¸å¿ƒä½¿ç”¨ä¿¡æ¯&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5ï¼šè™šæ‹Ÿæœºé›†ç¾¤ CPU çš„æ¯ä¸ªæ ¸å¿ƒä½¿ç”¨ä¿¡æ¯&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/ef618156-image5a_hu8416017473154672443.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/ef618156-image5a_hu15142550987573904795.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/ef618156-image5a_hu8477653307649727971.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/ef618156-image5a_hu8416017473154672443.webp&#34;
               width=&#34;760&#34;
               height=&#34;83&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5ï¼šè™šæ‹Ÿæœºé›†ç¾¤ CPU çš„æ¯ä¸ªæ ¸å¿ƒä½¿ç”¨ä¿¡æ¯
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 5ï¼šè™šæ‹Ÿæœºé›†ç¾¤ CPU çš„æ¯ä¸ªæ ¸å¿ƒä½¿ç”¨ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šå›¾ 4 ä¸­ï¼Œçº¢è‰²ç‚¹è¡¨ç¤ºæœ€å¤§çš„ CPU æ ¸å¿ƒè´Ÿè½½*ï¼Œç»¿è‰²è¡¨ç¤ºæ‰€æœ‰æ ¸å¿ƒçš„æ€» CPU è´Ÿè½½ã€‚åœ¨æ‰§è¡Œè„šæœ¬æœŸé—´ï¼Œå¤§éƒ¨åˆ†æ—¶é—´å†…æ ¸å¿ƒéƒ½ä»¥ 100% çš„åˆ©ç”¨ç‡è¿è¡Œï¼›å¹³å‡å€¼ä¸º 86.81%ã€‚è¿˜æœ‰ä¸€ä¸ªå°çš„çªƒå–æ—¶é—´å³°å€¼ï¼Œå¤§çº¦åœ¨ 15:16ï¼ˆå‚è§å›¾ 4ï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¸¸è§æƒ…å†µï¼Œå½“ä¸€ä¸ªè™šæ‹Ÿæœºç”±äºç­‰å¾…ç‰©ç† CPU å…±äº«è®¡ç®—èµ„æºè€Œæ²¡æœ‰è¿è¡Œæ—¶ä¼šå‘ç”Ÿã€‚&lt;/p&gt;
&lt;p&gt;*&lt;strong&gt;æœ€å¤§ CPU æ ¸å¿ƒè´Ÿè½½ï¼š&lt;/strong&gt; è¿™ä¸ªæŒ‡æ ‡é€šå¸¸æ˜¯æŒ‡åœ¨è™šæ‹Ÿæœºå†…æˆ–ä¸»æœºä¸Šæ‰€æœ‰è™šæ‹Ÿæœºä¸­è§‚å¯Ÿåˆ°çš„å•ä¸ª CPU æ ¸å¿ƒçš„æœ€é«˜åˆ©ç”¨ç‡ç™¾åˆ†æ¯”ã€‚å®ƒè¡¨ç¤ºåœ¨ç»™å®šæ—¶åˆ»ä¸€ä¸ªç‰¹å®šçš„ CPU æ ¸å¿ƒæœ‰å¤šé‡åœ°è¢«åˆ©ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;æ€» CPU æ ¸å¿ƒè´Ÿè½½ï¼š&lt;/strong&gt; æ­¤æŒ‡æ ‡è¡¨ç¤ºä¸»æœºæœºå™¨ä¸Šæ‰€æœ‰å¯ç”¨ CPU æ ¸å¿ƒçš„æ•´ä½“ CPU åˆ©ç”¨ç‡ã€‚å®ƒè€ƒè™‘äº†æ‰€æœ‰ CPU æ ¸å¿ƒçš„ç»¼åˆä½¿ç”¨æƒ…å†µï¼Œæä¾›äº†è¿è¡Œåœ¨ä¸»æœºä¸Šçš„æ‰€æœ‰è™šæ‹Ÿæœºä½¿ç”¨äº†å¤šå°‘ CPU å®¹é‡çš„ç»¼åˆè§†å›¾ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯è£¸æœºé›†ç¾¤çš„ CPU åˆ©ç”¨ç‡æµ‹è¯•ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾è¡¨æ˜¾ç¤ºè£¸æœºé›†ç¾¤çš„-cpu-å¹³å‡åˆ©ç”¨ç‡ä¸º-4375&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾è¡¨æ˜¾ç¤ºï¼Œè£¸æœºé›†ç¾¤çš„ CPU å¹³å‡åˆ©ç”¨ç‡ä¸º 43.75%&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/d79f8453-image6a_hu12673580296188909068.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/d79f8453-image6a_hu8368303906492050588.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/d79f8453-image6a_hu6304644511949318152.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/d79f8453-image6a_hu12673580296188909068.webp&#34;
               width=&#34;760&#34;
               height=&#34;160&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾è¡¨æ˜¾ç¤ºï¼Œè£¸æœºé›†ç¾¤çš„ CPU å¹³å‡åˆ©ç”¨ç‡ä¸º 43.75%
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 6ï¼šè£¸æœºé›†ç¾¤çš„ CPU å¹³å‡åˆ©ç”¨ç‡ä¸º 43.75%ã€‚&lt;/p&gt;
&lt;p&gt;å¹³å‡ CPU è´Ÿè½½çº¦ä¸º 43.75%ï¼Œæœ€å¤§è´Ÿè½½ä¸º 62.57%ï¼Œæ²¡æœ‰çªƒå–æ—¶é—´ã€‚å› æ­¤ï¼Œå°± CPU æ€§èƒ½è€Œè¨€ï¼Œæµ‹è¯•æ˜¾ç¤ºè£¸æœºé›†ç¾¤çº¦ä¸ºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€æœ‰æ•ˆã€‚&lt;/p&gt;
&lt;h2 id=&#34;ram-å»¶è¿Ÿ&#34;&gt;RAM å»¶è¿Ÿ&lt;/h2&gt;
&lt;p&gt;å¯¹äº RAM æµ‹è¯•ï¼Œ&lt;a href=&#34;https://github.com/akopytov/sysbench&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘ä»¬ä½¿ç”¨äº† sysbench&lt;/a&gt; å¹¶é€šè¿‡ RAM ä¼ è¾“äº† 6400 GB çš„æ•°æ®ã€‚ä»¥ä¸‹æ˜¯æ‰§è¡Œçš„å†™å…¥å’Œè¯»å–æ“ä½œçš„å…³é”®ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-7è£¸æœºé›†ç¾¤çš„-ram-å¤§çº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„-ram-å¿«ä¸‰å€&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 7ï¼šè£¸æœºé›†ç¾¤çš„ RAM å¤§çº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ RAM å¿«ä¸‰å€&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/684e605e-7a_hu6234669188063511086.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/684e605e-7a_hu14670826045507087730.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/684e605e-7a_hu4791314928989275549.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/684e605e-7a_hu6234669188063511086.webp&#34;
               width=&#34;760&#34;
               height=&#34;355&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 7ï¼šè£¸æœºé›†ç¾¤çš„ RAM å¤§çº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ RAM å¿«ä¸‰å€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 7ï¼šè£¸æœºé›†ç¾¤çš„ RAM å¤§çº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ RAM å¿«ä¸‰å€ã€‚&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿæœºé›†ç¾¤æ‰§è¡Œå†™å…¥æ“ä½œçš„å¹³å‡æ—¶é—´ä¸º 174.53 æ¯«ç§’ï¼Œè€Œè£¸æœºé›†ç¾¤ç›¸åŒæ“ä½œä»…éœ€ 62.02 æ¯«ç§’ã€‚è¯»å–æ“ä½œåˆ†åˆ«åœ¨ 173.75 å’Œ 47.33 æ¯«ç§’å†…å®Œæˆã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€è£¸æœºé›†ç¾¤çš„ RAM å¤§çº¦æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ RAM å¿«ä¸‰å€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å­˜å‚¨-tps-å’Œå»¶è¿Ÿ&#34;&gt;å­˜å‚¨ TPS å’Œå»¶è¿Ÿ&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æµ‹è¯•å­˜å‚¨æ€§èƒ½ï¼Œæˆ‘ä»¬è¿è¡Œäº†ä¸€ä¸ª PostgreSQL é›†ç¾¤ï¼Œå¹¶ä½¿ç”¨äº† &lt;a href=&#34;https://www.postgresql.org/docs/current/pgbench.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;pgbench åŸºå‡†æµ‹è¯•&lt;/a&gt;ã€‚æˆ‘ä»¬æµ‹é‡äº† TPSï¼ˆæ¯ç§’äº‹åŠ¡æ•°ï¼‰å’Œå»¶è¿Ÿã€‚æˆ‘ä»¬è¿˜å˜åŒ–äº†å·¥ä½œè´Ÿè½½ï¼Œæµ‹è¯•äº†ç›¸åŒé›†ç¾¤é…ç½®ä¸‹çš„ 8 GB å’Œ 75 GB æ•°æ®åº“ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯è¿™äº›å®ä¾‹çš„é…ç½®ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-8å­˜å‚¨æµ‹è¯•çš„è£¸æœºå’Œè™šæ‹Ÿæœºé›†ç¾¤é…ç½®&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 8ï¼šå­˜å‚¨æµ‹è¯•çš„è£¸æœºå’Œè™šæ‹Ÿæœºé›†ç¾¤é…ç½®&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/87869729-image8a_hu9149180351891864535.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/87869729-image8a_hu14613515769141181283.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/87869729-image8a_hu17653871652178316450.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/87869729-image8a_hu9149180351891864535.webp&#34;
               width=&#34;760&#34;
               height=&#34;210&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 8ï¼šå­˜å‚¨æµ‹è¯•çš„è£¸æœºå’Œè™šæ‹Ÿæœºé›†ç¾¤é…ç½®
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 8ï¼šå­˜å‚¨æµ‹è¯•çš„è£¸æœºå’Œè™šæ‹Ÿæœºé›†ç¾¤é…ç½®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å­˜å‚¨-tps-ç»“æœ&#34;&gt;å­˜å‚¨ TPS ç»“æœ&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ TPS æ¯”è¾ƒçš„å¹³å‡ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-9è£¸æœºé›†ç¾¤çš„å­˜å‚¨-tps-å€¼å¤§çº¦æ˜¯è™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 9ï¼šè£¸æœºé›†ç¾¤çš„å­˜å‚¨ TPS å€¼å¤§çº¦æ˜¯è™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/7bda97df-image9a_hu4655470512185340449.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/7bda97df-image9a_hu13346581987451801685.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/7bda97df-image9a_hu1318709091714920028.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/7bda97df-image9a_hu4655470512185340449.webp&#34;
               width=&#34;760&#34;
               height=&#34;355&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 9ï¼šè£¸æœºé›†ç¾¤çš„å­˜å‚¨ TPS å€¼å¤§çº¦æ˜¯è™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 9ï¼šè£¸æœºé›†ç¾¤çš„å­˜å‚¨ TPS å€¼å¤§çº¦æ˜¯è™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿è¡Œ 8 GB æ•°æ®åº“æ—¶ï¼Œè™šæ‹Ÿæœºé›†ç¾¤æ˜¾ç¤ºäº† 7,359 TPSï¼Œè€Œè£¸æœºé›†ç¾¤ä¸º 14,087 TPSã€‚75 GB æ•°æ®åº“çš„æ€§èƒ½ç»“æœåˆ†åˆ«ä¸º 4,636 å’Œ 12,029 TPSã€‚&lt;/p&gt;
&lt;h3 id=&#34;å­˜å‚¨å»¶è¿Ÿç»“æœ&#34;&gt;å­˜å‚¨å»¶è¿Ÿç»“æœ&lt;/h3&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯å»¶è¿Ÿæµ‹è¯•çš„å¹³å‡ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾è¡¨æ˜¾ç¤º8-gb-æµ‹è¯•ä¸­è£¸æœºé›†ç¾¤çš„å­˜å‚¨å»¶è¿Ÿçº¦ä¸ºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¸€åŠåœ¨-75-gb-æµ‹è¯•ä¸­å‡ ä¹æ˜¯å…¶ä¸‰å€&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾è¡¨æ˜¾ç¤ºï¼Œ8 GB æµ‹è¯•ä¸­è£¸æœºé›†ç¾¤çš„å­˜å‚¨å»¶è¿Ÿçº¦ä¸ºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¸€åŠï¼Œåœ¨ 75 GB æµ‹è¯•ä¸­å‡ ä¹æ˜¯å…¶ä¸‰å€&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/311dd007-image10_hu17444463236007598524.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/311dd007-image10_hu15242248684357858536.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/311dd007-image10_hu1005150464826649085.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/311dd007-image10_hu17444463236007598524.webp&#34;
               width=&#34;760&#34;
               height=&#34;355&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾è¡¨æ˜¾ç¤ºï¼Œ8 GB æµ‹è¯•ä¸­è£¸æœºé›†ç¾¤çš„å­˜å‚¨å»¶è¿Ÿçº¦ä¸ºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¸€åŠï¼Œåœ¨ 75 GB æµ‹è¯•ä¸­å‡ ä¹æ˜¯å…¶ä¸‰å€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 10ï¼šè£¸æœºåœ¨å­˜å‚¨å»¶è¿Ÿæ–¹é¢ä¼˜äºè™šæ‹Ÿæœºã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è¿è¡Œ 8 GB æ•°æ®åº“æ—¶ï¼Œè™šæ‹Ÿæœºé›†ç¾¤çš„å»¶è¿Ÿä¸º 34.78 æ¯«ç§’ï¼Œè€Œè£¸æœºé›†ç¾¤çš„å»¶è¿Ÿä¸º 18.17 æ¯«ç§’ã€‚å¯¹äº 75 GB æ•°æ®åº“ï¼Œå»¶è¿Ÿåˆ†åˆ«ä¸º 55.21 æ¯«ç§’å’Œ 21.28 æ¯«ç§’ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äº 8 GB æ•°æ®åº“ï¼Œè£¸æœºé›†ç¾¤çš„å­˜å‚¨æ€§èƒ½çº¦ä¸ºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¸¤å€ã€‚å¯¹äº 75 GB æ•°æ®åº“ï¼Œè£¸æœºé›†ç¾¤ç›¸å¯¹äºè™šæ‹Ÿæœºé›†ç¾¤çš„ä¼˜åŠ¿æ›´åŠ æ˜æ˜¾ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿ&#34;&gt;ç½‘ç»œå¸¦å®½å’Œå»¶è¿Ÿ&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†æµ‹è¯•ç½‘ç»œæ€§èƒ½ï¼Œæˆ‘ä»¬ä½¿ç”¨äº† &lt;a href=&#34;https://github.com/kubernetes/perf-tests/tree/master/network/benchmarks/netperf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;netperf åŸºå‡†æµ‹è¯•&lt;/a&gt;ï¼Œå…¶ä¸­ MSSï¼ˆæœ€å¤§æ®µå¤§å°ï¼‰ä» 1 åˆ° 65,536 ä¸ç­‰ã€‚MSS ä¸­çš„â€œæ®µâ€å…ƒç´ æ˜¯åœ¨ç½‘ç»œä¸Šä¼ è¾“çš„ä¸€ç§ IP æ•°æ®åŒ…æ†ç»‘ã€‚å› æ­¤ï¼ŒMSS è¶Šå¤§ï¼Œä¼ è¾“çš„æµé‡å°±è¶Šå¤šã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä¸¤ä¸ªç‰©ç†èŠ‚ç‚¹ä¸Šéƒ¨ç½²äº†ä¸‰ä¸ªå·¥ä½œèŠ‚ç‚¹ï¼šWorker 1 å’Œ Worker 2 ä½äºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œè€Œ Worker 3 ä½äºç¬¬äºŒä¸ªèŠ‚ç‚¹ä¸Šã€‚ç„¶åï¼Œæˆ‘ä»¬æµ‹è¯•äº†æ‰€æœ‰ä¸‰ä¸ªå·¥ä½œèŠ‚ç‚¹ä¹‹é—´çš„ç½‘ç»œæ€§èƒ½ã€‚åœ¨æ‰€æœ‰æƒ…å†µä¸‹ï¼Œç»“æœè¶‹åŠ¿éƒ½ç›¸ä¼¼ â€” è£¸æœºä¼˜äºè™šæ‹Ÿæœºã€‚&lt;/p&gt;
&lt;p&gt;æœ€æœ‰è¶£çš„æµ‹è¯•æ˜¯ç‰©ç†è·ç¦»æœ€è¿œçš„æµ‹è¯•ä¹‹ä¸€ï¼Œå³ Worker 1/Worker 2ï¼ˆä½äºç¬¬ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼‰ä¸ Worker 3ï¼ˆä½äºç¬¬äºŒä¸ªèŠ‚ç‚¹ä¸Šï¼‰ä¹‹é—´çš„è·ç¦»ï¼Œå½“æµé‡åœ¨ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªç‰©ç†èŠ‚ç‚¹ä¹‹é—´ä¼ è¾“æ—¶ã€‚æˆ‘ä»¬å¯ä»¥å°†è¿™çœ‹ä½œæ˜¯æ‰€æœ‰æµ‹è¯•ä¸­æœ€å…·æŒ‘æˆ˜æ€§çš„æ¡ä»¶ã€‚å›¾ 10 å’Œå›¾ 11 æ˜¾ç¤ºäº†æ­¤æµ‹è¯•çš„ç»“æœã€‚å›¾ 10 æ˜¾ç¤ºäº† MSS å€¼ä¸º 1ã€2ã€4 å’Œ 8 æ—¶çš„ç½‘ç»œå¸¦å®½æ¯”è¾ƒï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-11è£¸æœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½å¤§äº”å€&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 11ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½å¤§äº”å€&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/4d53bfd2-image11_hu4326784236451675919.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/4d53bfd2-image11_hu16763944113206073775.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/4d53bfd2-image11_hu15909013285789106783.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/4d53bfd2-image11_hu4326784236451675919.webp&#34;
               width=&#34;760&#34;
               height=&#34;346&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 11ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½å¤§äº”å€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 11ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå¸¦å®½å¤§äº”å€ã€‚&lt;/p&gt;
&lt;p&gt;è™šæ‹Ÿæœºé›†ç¾¤çš„å¸¦å®½èŒƒå›´ä» MSS=1 æ—¶çš„ 862 KB/ç§’åˆ° MSS=8 æ—¶çš„ 6.52 MB/ç§’ï¼Œè€Œè£¸æœºé›†ç¾¤çš„å¸¦å®½åœ¨ç›¸åŒçš„ MSS å€¼èŒƒå›´å†…ä» 4.17 MB/ç§’åˆ° 31 MB/ç§’ä¸ç­‰ã€‚å¹³å‡è€Œè¨€ï¼Œè£¸æœºé›†ç¾¤çš„å¸¦å®½æ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„å¸¦å®½å¤§äº”å€ã€‚&lt;/p&gt;
&lt;p&gt;å›¾ 12 æ˜¾ç¤ºäº†ä½¿ç”¨ç›¸åŒ MSS å€¼çš„ç½‘ç»œå»¶è¿Ÿæ¯”è¾ƒï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-12è£¸æœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿæ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿä½äº†å¤šè¾¾å…­å€&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 12ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿæ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿä½äº†å¤šè¾¾å…­å€&#34; srcset=&#34;
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/5f29719e-image12_hu3925527354444535559.webp 400w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/5f29719e-image12_hu10723088195961781842.webp 760w,
               /blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/5f29719e-image12_hu848740201447840396.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/does-kubernetes-really-perform-better-on-bare-metal-vs-vms/5f29719e-image12_hu3925527354444535559.webp&#34;
               width=&#34;760&#34;
               height=&#34;346&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 12ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿæ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿä½äº†å¤šè¾¾å…­å€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å›¾ 12ï¼šè£¸æœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿæ¯”è™šæ‹Ÿæœºé›†ç¾¤çš„ç½‘ç»œå»¶è¿Ÿä½äº†å¤šè¾¾å…­å€ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä»¬æ‰€è§ï¼Œå½“ä½¿ç”¨ MSS=8 æ—¶ï¼Œè™šæ‹Ÿæœºé›†ç¾¤çš„å»¶è¿Ÿçº¦ä¸º 145 å¾®ç§’ï¼ˆusï¼‰ï¼Œè€Œè£¸æœºçš„å»¶è¿Ÿä¸º 24.5 å¾®ç§’ã€‚æ­¤å¤–ï¼Œåœ¨è£¸æœºé›†ç¾¤çš„æƒ…å†µä¸‹ï¼Œéšç€ MSS çš„å¢åŠ ï¼Œå»¶è¿Ÿå¢é•¿è¾ƒæ…¢ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºæ‰€æœ‰æµ‹è¯•ï¼Œè¯·æ³¨æ„æˆ‘ä»¬æŠ¥å‘Šçš„æ˜¯&lt;em&gt;å†…éƒ¨&lt;/em&gt;é›†ç¾¤ç½‘ç»œçš„ç½‘ç»œæ€§èƒ½æ¯”è¾ƒã€‚æˆ‘ä»¬åœ¨ä¸€ä¸ªç½‘ç»œä¸­çš„èŠ‚ç‚¹ä¹‹é—´æµ‹é‡äº†å¸¦å®½å’Œå»¶è¿Ÿï¼Œä½äºä¸€ä¸ªä½ç½®ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨ä¸åŒä½ç½®çš„èŠ‚ç‚¹ï¼Œè¿™å°†å¢åŠ äº’è”ç½‘å»¶è¿Ÿï¼Œè¿™æ˜¯ä¸ç¨³å®šçš„ï¼Œå¹¶ä¸”å¯èƒ½å› æä¾›å•†è€Œå¼‚ã€‚æˆ‘ä»¬ä¿æŒäº†åˆæˆçº¯å‡€çš„æ¡ä»¶ï¼›è¿™å¯èƒ½æ— æ³•åœ¨å®é™…ç¯å¢ƒä¸­å¤åˆ¶ã€‚ä½†æ˜¯ï¼Œä¸€èˆ¬è¶‹åŠ¿å¯ä»¥é¢„æœŸä¼šè¢«é‡ç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;è£¸æœºæ€§èƒ½ä¼˜åŠ¿æ„å‘³ç€ä»€ä¹ˆ&#34;&gt;è£¸æœºæ€§èƒ½ä¼˜åŠ¿æ„å‘³ç€ä»€ä¹ˆ&lt;/h2&gt;
&lt;p&gt;æ›´å¥½çš„è£¸æœºæ€§èƒ½ç›¸å¯¹äºè™šæ‹Ÿæœºæä¾›äº†ä¸¤ä¸ªç®€å•ä½†å…³é”®çš„ä¼˜åŠ¿ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://thenewstack.io/how-do-applications-run-on-kubernetes/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;éƒ¨ç½²åœ¨è£¸æœºå·¥ä½œèŠ‚ç‚¹ä¸Šçš„åº”ç”¨ç¨‹åº&lt;/a&gt;è¿è¡Œå’Œå“åº”é€Ÿåº¦æ¯”éƒ¨ç½²åœ¨è™šæ‹Ÿæœºä¸Šçš„åº”ç”¨ç¨‹åºæ›´å¿«ã€‚&lt;/li&gt;
&lt;li&gt;å› æ­¤ï¼Œå½“é€‰æ‹©è£¸æœºæ—¶ï¼Œå®¢æˆ·åœ¨ä½¿ç”¨æ‚¨çš„äº§å“æ—¶å°†æœ‰æ›´å¥½çš„ä½“éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;æˆ‘ä»¬çš„æµ‹è¯•ç»“æœè¯å®äº†ä¸€ä¸ªæ™®éçš„æœŸæœ›ï¼Œå³è£¸æœºå¯¹äºéœ€è¦é«˜æ€§èƒ½å’Œä½å»¶è¿Ÿçš„è®¡ç®—å¯†é›†å‹å·¥ä½œè´Ÿè½½ï¼ˆä¾‹å¦‚æ•°æ®åº“ã€AI/ML æ¨¡å‹å’Œå…¶ä»–ç±»å‹çš„å®æ—¶åº”ç”¨ç¨‹åºï¼‰æ›´ä¸ºé€‚ç”¨ã€‚è™šæ‹Ÿæœºåˆ™æ›´é€‚åˆä¸éœ€è¦é«˜è®¡ç®—å’Œä½å»¶è¿Ÿæ•æ„Ÿæ€§çš„å·¥ä½œè´Ÿè½½ï¼Œå¦‚ Web æœåŠ¡å™¨ã€ç½‘ç«™å’Œå¼€å‘ç¯å¢ƒã€‚å¦‚æœé«˜æ€§èƒ½å’Œä½å»¶è¿Ÿå¯¹äºæ‚¨çš„ç”¨æˆ·è‡³å…³é‡è¦ï¼Œå¹¶ç›´æ¥å½±å“æ‚¨çš„ä¸šåŠ¡ï¼Œæ‚¨åº”è¯¥è€ƒè™‘åœ¨ Kubernetes é›†ç¾¤ä¸­ä½¿ç”¨è£¸æœºã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬çš„æµ‹è¯•è¯å®äº†è£¸æœºå·¥ä½œèŠ‚ç‚¹ä¼˜äºè™šæ‹Ÿæœºå·¥ä½œèŠ‚ç‚¹çš„å‡è®¾ã€‚å³è£¸æœºæ¯”èµ·è™šæ‹Ÿæœºï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨ CPU é€Ÿåº¦å’Œåˆ©ç”¨ç‡æ–¹é¢é«˜ä¸‰å€&lt;/li&gt;
&lt;li&gt;RAM å»¶è¿Ÿæ˜¯è™šæ‹Ÿæœºçš„1/3&lt;/li&gt;
&lt;li&gt;å­˜å‚¨æ€§èƒ½é«˜ä¸¤å€å¤š&lt;/li&gt;
&lt;li&gt;ç½‘ç»œå»¶è¿Ÿæ˜¯è™šæ‹Ÿæœºçš„1/5&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ OpenTelemetry æå‡ CI/CD ç®¡é“çš„å¯è§‚å¯Ÿæ€§</title>
      <link>https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/</link>
      <pubDate>Tue, 12 Dec 2023 14:30:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/how-to-observe-your-ci-cd-pipelines-with-opentelemetry&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://thenewstack.io/how-to-observe-your-ci-cd-pipelines-with-opentelemetry&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡æ–‡ç« ä»‹ç»äº† OpenTelemetry è¿™ä¸ªå¼€æºæ¡†æ¶ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ç”Ÿæˆã€æ”¶é›†æ¢å’Œå¯¼å‡º CI/CD ç®¡é“çš„é¥æµ‹æ•°æ®ï¼Œä»¥å®ç°æ€§èƒ½ã€å¯é æ€§ã€å®‰å…¨æ€§ç­‰æ–¹é¢çš„åº¦é‡ã€ç›‘æ§ã€å‘Šè­¦ã€åˆ†æç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¦‚ä»Šçš„è½¯ä»¶æ¯” 20 å¤šå¹´å‰çš„è½¯ä»¶å¤æ‚å¾—å¤šï¼Œè¿™å¸¦æ¥äº†åœ¨æ•…éšœæ’é™¤ä»£ç æ—¶é¢ä¸´æ–°æŒ‘æˆ˜ã€‚å¹¸è¿çš„æ˜¯ï¼Œé€šè¿‡å°†å¯è§‚æµ‹æ€§å¼•å…¥æˆ‘ä»¬çš„ç³»ç»Ÿï¼Œæˆ‘ä»¬åœ¨ç†è§£åº”ç”¨ç¨‹åºçš„æ€§èƒ½å¦‚ä½•ä»¥åŠé—®é¢˜å‘ç”Ÿåœ¨ä½•å¤„æ–¹é¢å–å¾—äº†ç›¸å½“å¤§çš„è¿›å±•ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶è€Œï¼Œä¸ä»…è½¯ä»¶å‘ç”Ÿäº†æ¼”å˜ - åˆ›å»ºå’Œå¼€å‘è½¯ä»¶çš„è¿‡ç¨‹ä¹Ÿå‘ç”Ÿäº†å˜åŒ–ã€‚&lt;a href=&#34;https://roadmap.sh/devops&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;DevOps&lt;/a&gt;å¼•å…¥äº†&lt;a href=&#34;https://thenewstack.io/a-primer-continuous-integration-and-continuous-delivery-ci-cd/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CI/CDçš„æ¦‚å¿µ&lt;/a&gt;ã€‚éšç€äº¤ä»˜å‘¨æœŸä»æ¯æœˆã€æ¯å­£åº¦ï¼Œåˆ°ç°åœ¨æ¯å‘¨ç”šè‡³ä¸€å¤©å¤šæ¬¡ï¼Œæˆ‘ä»¬æ­£åœ¨å…¨é¢é‡‡ç”¨è‡ªåŠ¨åŒ–æ¥è¿›è¡Œè½¯ä»¶äº¤ä»˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¹¸çš„æ˜¯ï¼Œä¸åº”ç”¨ç¨‹åºè½¯ä»¶ç›¸æ¯”ï¼Œ&lt;a href=&#34;https://thenewstack.io/ci-cd/&#34; title=&#34;CI/CD pipelines&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CI/CDæµæ°´çº¿&lt;/a&gt;çš„å¯è§‚æµ‹æ€§è¿›å±•ä¸å¤§ã€‚è€ƒè™‘åˆ°è¿™äº›æµæ°´çº¿æ˜¯è½¯ä»¶äº¤ä»˜æµç¨‹çš„åŸºç¡€ï¼Œè¿™ä»¤äººæƒŠè®¶ï¼šå¦‚æœä½ æ²¡æœ‰å¯è§æ€§ï¼Œé‚£ä¹ˆå½“å‡ºç°é—®é¢˜ä¸”æ— æ³•å°†è½¯ä»¶æŠ•å…¥ç”Ÿäº§æ—¶ï¼Œä½ è¯¥å¦‚ä½•æ’é™¤é—®é¢˜ï¼Ÿ&lt;/p&gt;
&lt;p&gt;è¿™æ­£æ˜¯æœ¬æ–‡å°†é‡ç‚¹è®¨è®ºçš„å†…å®¹ï¼šCI/CD æµæ°´çº¿çš„å¯è§‚æµ‹æ€§ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å°†å®šä¹‰ä¸€äº›æ¦‚å¿µï¼›ç„¶åï¼Œæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨è§‚å¯Ÿæµæ°´çº¿çš„é‡è¦æ€§ä»¥åŠå¦‚ä½•ä½¿å…¶å¯è§‚æµ‹ï¼›æœ€åï¼Œæˆ‘ä»¬å°†è®¨è®ºä¸€äº›å°šæœªè§£å†³çš„æŒ‘æˆ˜ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å…³é”®æ¦‚å¿µ&#34;&gt;å…³é”®æ¦‚å¿µ&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯ä¸€äº›éœ€è¦äº†è§£çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;h3 id=&#34;å¯è§‚æµ‹æ€§&#34;&gt;å¯è§‚æµ‹æ€§&lt;/h3&gt;
&lt;p&gt;æœ‰å…³&lt;a href=&#34;https://thenewstack.io/observability/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯è§‚æµ‹æ€§&lt;/a&gt;æœ‰å¤šç§å®šä¹‰ï¼Œå› æ­¤æˆ‘ä»¬å°†å…¶ç¼©å°ä¸ºæˆ‘ä»¬æœ€å–œæ¬¢çš„å®šä¹‰ï¼š&lt;/p&gt;
&lt;p&gt;å¯è§‚æµ‹æ€§ï¼Œæˆ–ç®€ç§° o11yï¼ˆå‘éŸ³ä¸ºâ€œollieâ€ï¼‰ï¼Œå…è®¸ä½ é€šè¿‡ä¸äº†è§£ç³»ç»Ÿå†…éƒ¨è¿ä½œæ–¹å¼å°±èƒ½ä»å¤–éƒ¨äº†è§£ç³»ç»Ÿã€‚æœ‰è¶£çš„æ˜¯ï¼šâ€œo11yâ€ä¸­çš„æ•°å­— 11 ä»£è¡¨äº†â€œå¯è§‚æµ‹æ€§â€ä¸€è¯ä¸­çš„å­—æ¯â€œoâ€å’Œâ€œyâ€ä¹‹é—´çš„å­—ç¬¦æ•°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ„å‘³ç€å³ä½¿ä½ ä¸äº†è§£ç³»ç»Ÿçš„æ‰€æœ‰ç»†èŠ‚ä¸šåŠ¡é€»è¾‘ï¼Œç³»ç»Ÿä»ä¼šå‘å‡ºè¶³å¤Ÿçš„ä¿¡æ¯ï¼Œä½¿ä½ èƒ½å¤Ÿé€šè¿‡è·Ÿè¸ªçº¿ç´¢æ¥å›ç­”ï¼šâ€œä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Ÿâ€ä½†æ˜¯ï¼Œå¦‚æœä½ çš„ç³»ç»Ÿä¸å‘å‡ºä¿¡æ¯ï¼Œé‚£ä¹ˆä½ å°±æ— æ³•è¿›è¡Œè§‚å¯Ÿã€‚ä½ å¦‚ä½•è·å–è¿™äº›ä¿¡æ¯å‘¢ï¼Ÿä¸€ç§æ–¹å¼æ˜¯ä½¿ç”¨ OpenTelemetryã€‚&lt;/p&gt;
&lt;h3 id=&#34;opentelemetry&#34;&gt;OpenTelemetry&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://thenewstack.io/introducing-opentelemetry-in-your-organization-3-steps/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OpenTelemetryï¼ˆOTelï¼‰&lt;/a&gt;æ˜¯ä¸€ä¸ªç”¨äºç”Ÿæˆã€æ”¶é›†ã€è½¬æ¢å’Œå¯¼å‡ºé¥æµ‹æ•°æ®çš„å¼€æºå¯è§‚æµ‹æ€§æ¡†æ¶ã€‚å®ƒæä¾›äº†ä¸€ç»„ APIã€è½¯ä»¶å¼€å‘å·¥å…·åŒ…ï¼ˆSDKï¼‰ã€ä»ªå™¨åº“å’Œå·¥å…·ï¼Œå¸®åŠ©ä½ å®Œæˆè¿™äº›ä»»åŠ¡ã€‚è‡ª 2019 å¹´æ­£å¼æˆç«‹ä»¥æ¥ï¼Œå®ƒå·²æˆä¸ºåº”ç”¨ç¨‹åºä»ªå™¨å’Œé¥æµ‹ç”Ÿæˆå’Œæ”¶é›†çš„äº‹å®æ ‡å‡†ï¼Œè¢«åŒ…æ‹¬&lt;a href=&#34;https://innovation.ebayinc.com/tech/engineering/why-and-how-ebay-pivoted-to-opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;eBay&lt;/a&gt;å’Œ&lt;a href=&#34;https://www.infoq.com/presentations/opentelemetry-observability/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Skyscanner&lt;/a&gt;åœ¨å†…çš„å…¬å¸ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;å…¶æœ€å¤§çš„å¥½å¤„ä¹‹ä¸€æ˜¯ä¸å—ä¾›åº”å•†é”å®šçš„é™åˆ¶ã€‚ä½ å¯ä»¥ä¸ºåº”ç”¨ç¨‹åºæ·»åŠ é¥æµ‹ä¸€æ¬¡ï¼Œå¹¶å°†é¥æµ‹å‘é€åˆ°æœ€é€‚åˆä½ çš„åç«¯ã€‚å®ƒè¿˜æä¾›ä¸€äº›éå¸¸é…·çš„å·¥å…·ï¼Œä¾‹å¦‚ Collectorã€‚&lt;/p&gt;
&lt;p&gt;Collector æ˜¯ä¸€ä¸ªä¾›åº”å•†ä¸­ç«‹çš„æœåŠ¡ï¼Œç”¨äºæ¥æ”¶ã€è½¬æ¢å’Œå¯¼å‡ºæ•°æ®åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå¯è§‚æµ‹æ€§åç«¯ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-otel-collector-ç»„ä»¶çš„å›¾ç¤º&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;OTel Collector ç»„ä»¶çš„å›¾ç¤º&#34; srcset=&#34;
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/1_hu7262192281352069676.webp 400w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/1_hu6483044422482279029.webp 760w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/1_hu5063103419020521095.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/1_hu7262192281352069676.webp&#34;
               width=&#34;760&#34;
               height=&#34;272&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      OTel Collector ç»„ä»¶çš„å›¾ç¤º
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Collector ç”±å››ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼Œè¿™äº›ç»„ä»¶è®¿é—®é¥æµ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Receivers&lt;/strong&gt; æ¥æ”¶æ•°æ®ï¼Œæ— è®ºæ˜¯æ¥è‡ªä½ çš„åº”ç”¨ç¨‹åºä»£ç è¿˜æ˜¯åŸºç¡€æ¶æ„ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Processors&lt;/strong&gt; è½¬æ¢æ•°æ®ã€‚å¤„ç†å™¨å¯ä»¥æ‰§è¡Œè¯¸å¦‚æ¨¡ç³ŠåŒ–æ•°æ®ã€æ·»åŠ å±æ€§ã€åˆ é™¤å±æ€§æˆ–è¿‡æ»¤æ•°æ®ç­‰æ“ä½œã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Exporters&lt;/strong&gt; å°†æ•°æ®è½¬æ¢ä¸ºä¸ä½ é€‰æ‹©çš„å¯è§‚æµ‹æ€§åç«¯å…¼å®¹çš„æ ¼å¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Connectors&lt;/strong&gt; å…è®¸ä½ è¿æ¥ä¸¤ä¸ªæµæ°´çº¿ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ å¯ä»¥å°† OTel Collector è§†ä¸ºæ•°æ®ç®¡é“ã€‚&lt;/p&gt;
&lt;h3 id=&#34;cicd-æµæ°´çº¿&#34;&gt;CI/CD æµæ°´çº¿&lt;/h3&gt;
&lt;p&gt;CI/CD æ˜¯ä¸€ç§è‡ªåŠ¨åŒ–çš„è½¯ä»¶äº¤ä»˜æ–¹æ³•ï¼Œä¾èµ–äºä¸¤ä¸ªå…³é”®å®è·µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿ç»­é›†æˆï¼ˆCIï¼‰æ˜¯æŒ‡åœ¨è¿›è¡Œä»£ç æ›´æ”¹æ—¶æ„å»ºã€æ‰“åŒ…å’Œæµ‹è¯•è½¯ä»¶ã€‚&lt;/li&gt;
&lt;li&gt;è¿ç»­äº¤ä»˜ï¼ˆCDï¼‰æ˜¯æŒ‡ç«‹å³å°†è¯¥è½¯ä»¶åŒ…éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-cicd-æµæ°´çº¿-gifå…¶ä¸­æœ‰åªçŒ«åœ¨å…¶ä¸­ç§»åŠ¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;CI/CD æµæ°´çº¿ GIFï¼Œå…¶ä¸­æœ‰åªçŒ«åœ¨å…¶ä¸­ç§»åŠ¨&#34;
           src=&#34;https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/2.gif&#34;
           loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      CI/CD æµæ°´çº¿ GIFï¼Œå…¶ä¸­æœ‰åªçŒ«åœ¨å…¶ä¸­ç§»åŠ¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è‡ªåŠ¨åŒ–çš„æµæ°´çº¿é€šè¿‡å…è®¸ä½ æ›´å¿«åœ°å‘å®¢æˆ·æä¾›æ–°åŠŸèƒ½ã€ä¿®å¤é”™è¯¯å’Œä¸€èˆ¬æ›´æ–°æ¥å®ç°å¿«é€Ÿçš„äº§å“è¿­ä»£ã€‚å®ƒä»¬æ¶ˆé™¤äº†æ‰‹åŠ¨é”™è¯¯çš„é£é™©ï¼Œå¹¶æ ‡å‡†åŒ–äº†å¯¹å¼€å‘äººå‘˜çš„åé¦ˆå¾ªç¯ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¸ºä½•-cicd-æµæ°´çº¿çš„å¯è§‚æµ‹æ€§å¾ˆé‡è¦&#34;&gt;ä¸ºä½• CI/CD æµæ°´çº¿çš„å¯è§‚æµ‹æ€§å¾ˆé‡è¦&lt;/h2&gt;
&lt;p&gt;å½“ä½ çš„æµæ°´çº¿å¥åº·æ—¶ï¼Œä½ çš„å›¢é˜Ÿå¯ä»¥æŒç»­ç¼–å†™ã€æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ä»£ç å’Œé…ç½®æ›´æ”¹åˆ°ç”Ÿäº§ç¯å¢ƒã€‚ä½ è¿˜å¯ä»¥æ”¹è¿›æˆ–å®ç°å¼€å‘æ•æ·æ€§ï¼Œè¿™æ„å‘³ç€ä½ å¯ä»¥æ›´æ”¹è¿è¥æ–¹å¼å¹¶æœ€å°åŒ–ç¡®å®šè¿™äº›ä¿®æ”¹æ˜¯å¦å¯¹åº”ç”¨ç¨‹åºçš„å¥åº·äº§ç”Ÿäº†ç§¯ææˆ–æ¶ˆæå½±å“æ‰€éœ€çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç›¸åï¼Œå½“ä½ çš„æµæ°´çº¿ä¸å¥åº·æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°ä»¥ä¸‹ä¸€ç§æˆ–å¤šç§é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;éƒ¨ç½²ç¼“æ…¢&lt;/strong&gt;ï¼šä¿®å¤é”™è¯¯å¯èƒ½ä¸å¤Ÿå¿«ï¼Œä»¥åˆ¶æ­¢ç”¨æˆ·çš„ä¸æ»¡ï¼Œé—®é¢˜å¯èƒ½ä¼šå˜å¾—ä¸¥é‡ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æµ‹è¯•é—®é¢˜&lt;/strong&gt;ï¼šä¸å¾—ä¸ç­‰å¾…æµ‹è¯•å®Œæˆï¼Œæˆ–æ²¡æœ‰è¶³å¤Ÿçš„æ—¶é—´æ¥æµ‹è¯•ä¸åŒçš„é…ç½®ï¼Œå¯èƒ½ä¼šå¯¼è‡´å»¶è¿Ÿçš„éƒ¨ç½²å’Œéš¾ä»¥åœ¨ç”¨æˆ·ç¾¤ä¸­å®ç°è¶³å¤Ÿçš„åº”ç”¨ç¨‹åºæ€§èƒ½ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;æŠ€æœ¯å€ºåŠ¡&lt;/strong&gt;ï¼šéš¾ä»¥ç¡®å®šåº•å±‚é—®é¢˜å¯èƒ½å¯¼è‡´æŠ€æœ¯å€ºåŠ¡ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¤„äºç‡ƒçƒ§æˆ¿é—´ä¸­çš„çŒ«è¯´ä¸€åˆ‡æ­£å¸¸&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¤„äºç‡ƒçƒ§æˆ¿é—´ä¸­çš„çŒ«è¯´ï¼šâ€œä¸€åˆ‡æ­£å¸¸ã€‚â€&#34; srcset=&#34;
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/3_hu15397063269427768368.webp 400w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/3_hu2726092990639650845.webp 760w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/3_hu9447434243229437912.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/3_hu15397063269427768368.webp&#34;
               width=&#34;760&#34;
               height=&#34;427&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¤„äºç‡ƒçƒ§æˆ¿é—´ä¸­çš„çŒ«è¯´ï¼šâ€œä¸€åˆ‡æ­£å¸¸ã€‚â€
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;æµæ°´çº¿æ˜¯-devops-å·¥ç¨‹å¸ˆçš„ç”Ÿäº§ç³»ç»Ÿ&#34;&gt;æµæ°´çº¿æ˜¯ DevOps å·¥ç¨‹å¸ˆçš„ç”Ÿäº§ç³»ç»Ÿ&lt;/h3&gt;
&lt;p&gt;è™½ç„¶æµæ°´çº¿å¯èƒ½ä¸æ˜¯å¤–éƒ¨ç”¨æˆ·ä¸ä¹‹äº’åŠ¨çš„ç”Ÿäº§ç¯å¢ƒï¼Œä½†å®ƒä»¬ç»å¯¹æ˜¯å†…éƒ¨ç”¨æˆ· - ä¾‹å¦‚ï¼Œè½¯ä»¶å·¥ç¨‹å¸ˆå’Œ&lt;a href=&#34;https://thenewstack.io/our-2023-site-reliability-engineering-wish-list/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç«™ç‚¹å¯é æ€§å·¥ç¨‹å¸ˆ&lt;/a&gt;ï¼ˆSREï¼‰- ä¸ä¹‹äº’åŠ¨çš„ç”Ÿäº§ç¯å¢ƒã€‚èƒ½å¤Ÿè§‚å¯Ÿä½ çš„ç”Ÿäº§ç¯å¢ƒæ„å‘³ç€ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é¿å…ä¸å¿…è¦çš„é•¿å‘¨æœŸæ—¶é—´æˆ–æ›´æ”¹çš„å¼•å¯¼æ—¶é—´ï¼Œè¿™ä¼šå½±å“æäº¤è¿›å…¥ç”Ÿäº§æ‰€éœ€çš„æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;å‡å°‘æ¨å‡ºæ–°åŠŸèƒ½å’Œé”™è¯¯ä¿®å¤çš„ç­‰å¾…æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;ç¼©çŸ­ç”¨æˆ·ç­‰å¾…æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;ä»£ç å¯èƒ½ä¼šå¤±è´¥&#34;&gt;ä»£ç å¯èƒ½ä¼šå¤±è´¥&lt;/h3&gt;
&lt;p&gt;CI/CD æµæ°´çº¿ç”±å®šä¹‰å…¶å·¥ä½œæ–¹å¼çš„ä»£ç è¿è¡Œï¼Œå°½ç®¡ä½ ä»˜å‡ºäº†æœ€å¤§çš„åŠªåŠ›ï¼Œä»£ç ä»ç„¶å¯èƒ½ä¼šå¤±è´¥ã€‚ä½¿åº”ç”¨ç¨‹åºä»£ç å¯è§‚æµ‹æœ‰åŠ©äºä½ åœ¨é‡åˆ°ç”Ÿäº§é—®é¢˜æ—¶ç†æ¸…å¤´ç»ªã€‚åŒæ ·ï¼Œäº†è§£ä½ çš„æµæ°´çº¿å¯ä»¥å¸®åŠ©ä½ äº†è§£å®ƒä»¬å¤±è´¥æ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ•…éšœæ’é™¤æ›´å®¹æ˜“&#34;&gt;æ•…éšœæ’é™¤æ›´å®¹æ˜“&lt;/h3&gt;
&lt;p&gt;å…·æœ‰å¯è§‚æµ‹çš„æµæ°´çº¿æœ‰åŠ©äºå›ç­”ä»¥ä¸‹é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä»€ä¹ˆå¤±è´¥äº†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸ºä»€ä¹ˆå¤±è´¥äº†ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æ˜¯å¦æ›¾ç»å¤±è´¥è¿‡ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æœ€å¸¸å‘ç”Ÿäº†ä»€ä¹ˆå¤±è´¥ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æµæ°´çº¿çš„æ­£å¸¸è¿è¡Œæ—¶é—´æ˜¯å¤šå°‘ï¼Ÿ&lt;/li&gt;
&lt;li&gt;æ˜¯å¦å­˜åœ¨ä»»ä½•ç“¶é¢ˆï¼Ÿå¦‚æœæœ‰ï¼Œå®ƒä»¬æ˜¯ä»€ä¹ˆï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä½ èƒ½å¤Ÿç¼©çŸ­ä¿®å¤æµæ°´çº¿é—®é¢˜çš„å¯¼å‘æ—¶é—´å—ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;æƒ³è¦æ”¶é›†ä»€ä¹ˆæ ·çš„æ•°æ®&#34;&gt;æƒ³è¦æ”¶é›†ä»€ä¹ˆæ ·çš„æ•°æ®ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;è¦å›ç­”è¿™äº›é—®é¢˜ï¼Œä½ éœ€è¦æ”¶é›†æœ‰å…³ä½ çš„æµæ°´çº¿çš„ä¿¡æ¯ã€‚ä½†æ˜¯è¿™äº›ä¿¡æ¯åº”è¯¥æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæ•è·è¯¸å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åˆ†æ”¯åç§°ã€‚&lt;/li&gt;
&lt;li&gt;æäº¤çš„å®‰å…¨å“ˆå¸Œç®—æ³•ï¼ˆSHAï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;æœºå™¨ IPã€‚&lt;/li&gt;
&lt;li&gt;è¿è¡Œç±»å‹ï¼ˆæŒ‰è®¡åˆ’æ‰§è¡Œï¼Œç”±åˆå¹¶/æ¨é€è§¦å‘ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¤±è´¥çš„æ­¥éª¤ã€‚&lt;/li&gt;
&lt;li&gt;æ­¥éª¤æŒç»­æ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;æ„å»ºç¼–å·ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¦‚ä½•è§‚å¯Ÿæµæ°´çº¿&#34;&gt;å¦‚ä½•è§‚å¯Ÿæµæ°´çº¿&lt;/h2&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œå½“ç³»ç»Ÿå‘å‡ºè¶³å¤Ÿçš„ä¿¡æ¯æ¥å›ç­”é—®é¢˜ï¼šâ€œä¸ºä»€ä¹ˆä¼šå‘ç”Ÿè¿™ç§æƒ…å†µï¼Ÿâ€æ—¶ï¼Œç³»ç»Ÿå°±æ˜¯å¯è§‚æµ‹çš„ã€‚é¦–å…ˆï¼Œä½ éœ€è¦ä¸€ç§æ–¹æ³•æ¥å‘å‡ºè¿™äº›ä¿¡æ¯ï¼›ç„¶åï¼Œä½ éœ€è¦ä¸€ä¸ªå‘é€ä¿¡æ¯çš„åœ°æ–¹ï¼›æœ€åï¼Œä½ éœ€è¦åˆ†æä¿¡æ¯å¹¶æ‰¾å‡ºéœ€è¦ä¿®å¤çš„é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å°±æ˜¯ OpenTelemetry çš„ç”¨æ­¦ä¹‹åœ°ã€‚ä½ å¯ä»¥åœ¨ç³»ç»Ÿä¸­å®æ–½ OpenTelemetryï¼Œä»¥å‘å‡ºä½ éœ€è¦å®ç°ç³»ç»Ÿå¯è§‚æµ‹æ€§çš„ä¿¡æ¯ã€‚ä¸ç”¨äºåº”ç”¨ç¨‹åºçš„æ–¹å¼ä¸€æ ·ï¼Œä½ ä¹Ÿå¯ä»¥å°†å…¶ç”¨äº CI/CD æµæ°´çº¿ï¼ä»ç„¶éœ€è¦å°†ç”Ÿæˆçš„é¥æµ‹æ•°æ®å‘é€åˆ°åç«¯è¿›è¡Œåˆ†æï¼Œä½†æˆ‘ä»¬å°†ä¸“æ³¨äºç¬¬ä¸€ä¸ªéƒ¨åˆ†ï¼Œå³ä»ªå™¨åŒ–ã€‚&lt;/p&gt;
&lt;h3 id=&#34;ä½¿ç”¨-opentelemetry&#34;&gt;ä½¿ç”¨ OpenTelemetry&lt;/h3&gt;
&lt;p&gt;å¯¹äºä»ªå™¨åŒ– CI/CD æµæ°´çº¿æ¥è¯´ï¼ŒOpenTelemetry æ˜¯ä¸€ä¸ªå¾ˆåˆç†çš„é€‰æ‹©ï¼Œå› ä¸ºè®¸å¤šäººå·²ç»åœ¨åº”ç”¨ç¨‹åºä¸­ä½¿ç”¨å®ƒè¿›è¡Œä»ªå™¨åŒ–ï¼›åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œé‡‡ç”¨å’Œå®æ–½é€æ¸å¢åŠ ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœ‰å“ªäº›é€‰é¡¹&#34;&gt;æœ‰å“ªäº›é€‰é¡¹ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;ç›®å‰ï¼Œæƒ…å†µæœ‰äº›å¤æ‚ã€‚å­˜åœ¨ä»¥ä¸‹é€‰é¡¹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•†ä¸š SaaS ç›‘æ§è§£å†³æ–¹æ¡ˆï¼Œå¦‚&lt;a href=&#34;https://www.datadoghq.com/product/ci-cd-monitoring/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Datadog&lt;/a&gt;å’Œ&lt;a href=&#34;https://www.splunk.com/en_us/blog/learn/ci-cd-devops-analytics.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Splunk&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;ä¾›åº”å•†åˆ›å»ºçš„å·¥å…·ï¼Œä½ å¯ä»¥å°†å…¶æ’å…¥ç°æœ‰çš„ CI/CD å·¥å…·ä¸­ï¼Œä»¥å¸®åŠ©å®ç° CI/CD å¯è§‚æµ‹æ€§ï¼ˆä¾‹å¦‚ï¼Œ&lt;a href=&#34;https://github.com/honeycombio/buildevents&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Honeycomb buildevents&lt;/a&gt;ã€&lt;a href=&#34;https://docs.newrelic.com/docs/codestream/how-use-codestream/cicd/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;New Relic çš„ Codestream ä¸ CircleCI é›†æˆ&lt;/a&gt;å’Œ&lt;a href=&#34;https://docs.newrelic.com/docs/change-tracking/ci-cd/change-tracking-github-actions/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub Actions çš„æ›´æ”¹è·Ÿè¸ª&lt;/a&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåˆ¶çš„ GitHub actionsï¼ˆè¯·å‚é˜…&lt;a href=&#34;https://github.com/inception-health/otel-export-trace-action&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;ã€&lt;a href=&#34;https://words.boten.ca/GitHub-Action-to-OTLP/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;å’Œ&lt;a href=&#34;https://cloud-native.slack.com/archives/C0598R66XAP/p1698393723861129&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;çš„ç¤ºä¾‹ï¼‰ï¼Œä»¥åœ¨ CI/CD æµæ°´çº¿ä¸­å¯ç”¨å¯è§‚æµ‹æ€§ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåˆ¶çš„ &lt;a href=&#34;https://github.com/DavidS/circleci-hook&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CircleCI OTel webhook&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;è‡ªåˆ¶çš„ &lt;a href=&#34;https://cloud-native.slack.com/archives/C0598R66XAP/p1698408390701199&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Drone CI OTel webhook&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;å°† OpenTelemetry åŸç”Ÿé›†æˆåˆ° &lt;a href=&#34;https://plugins.jenkins.io/opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Jenkins&lt;/a&gt; å’Œ &lt;a href=&#34;https://github.com/tektoncd/community/blob/main/teps/0124-distributed-tracing-for-tasks-and-pipelines.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Tekton&lt;/a&gt; ä¸­ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä½ è¿˜å¯ä»¥å°†è¿™äº›å·¥å…·é›†æˆåˆ°ä½ çš„ CI/CD æµæ°´çº¿ä¸­ï¼›å®ƒä»¬ä¼šå‘å‡º OpenTelemetry ä¿¡å·ï¼Œä»è€Œå¸®åŠ©ä½¿ä½ çš„æµæ°´çº¿å¯è§‚æµ‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java-contrib/blob/main/maven-extension/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maven æ„å»º OTel æ‰©å±•&lt;/a&gt;å‘å‡º Java æ„å»ºçš„åˆ†å¸ƒå¼è·Ÿè¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://docs.ansible.com/ansible/latest/collections/community/general/opentelemetry_callback.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ansible OpenTelemetry å›è°ƒ&lt;/a&gt;è·Ÿè¸ª Ansible playbooksã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/dynatrace-oss/junit-jupiter-open-telemetry-extension&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Dynatrace çš„ JUnit Jupiter OpenTelemetry æ‰©å±•&lt;/a&gt;æ˜¯ç”¨äºé€šè¿‡ OpenTelemetry æ”¶é›† JUnit æµ‹è¯•æ‰§è¡Œæ•°æ®çš„ Gradle æ’ä»¶ã€‚è¿˜æœ‰ä¸€ä¸ª&lt;a href=&#34;https://github.com/dynatrace-oss/junit-jupiter-open-telemetry-extension/packages/1061205&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maven ç‰ˆæœ¬&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://pypi.org/project/pytest-otel/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;pytest-otel&lt;/a&gt;è®°å½•æ‰§è¡Œçš„ Python æµ‹è¯•çš„åˆ†å¸ƒå¼è·Ÿè¸ªã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/equinix-labs/otel-cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;otel-cli&lt;/a&gt;æ˜¯ç”¨ Go ç¼–å†™çš„å‘½ä»¤è¡Œç•Œé¢ï¼ˆCLIï¼‰å·¥å…·ï¼Œå¯ä½¿ shell è„šæœ¬å‘å‡ºè·Ÿè¸ªä¿¡å·ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/filelogreceiver&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Filelog æ¥æ”¶å™¨&lt;/a&gt;ï¼ˆOTel Collectorï¼‰ä»æ–‡ä»¶ä¸­è¯»å–å’Œè§£ææ—¥å¿—ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/gitproviderreceiver&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Git æä¾›å•†æ¥æ”¶å™¨&lt;/a&gt;ï¼ˆOTel Collectorï¼‰ä» Git ä¾›åº”å•†å¤„è·å–æ•°æ®ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;å¯è§‚æµ‹çš„æµæ°´çº¿ç¤ºä¾‹&#34;&gt;å¯è§‚æµ‹çš„æµæ°´çº¿ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;ä»¥ä¸‹å›¾è¡¨æ˜¾ç¤ºäº†å¦‚ä½•ä½¿ç”¨ä¸Šè¿°æåˆ°çš„ä¸€äº›å·¥å…·å®ç°æµæ°´çº¿å¯è§‚æµ‹æ€§ã€‚å‡è®¾ä½ æ­£åœ¨æ„å»ºå’Œéƒ¨ç½²ä¸€ä¸ª Java åº”ç”¨ç¨‹åºã€‚ä½ æ­£åœ¨ä½¿ç”¨ Jenkins æ¥ç¼–æ’æ„å»ºå’Œéƒ¨ç½²è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å¯ç”¨äº†-otel-çš„-jenkins-cicd-æµæ°´çº¿&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å¯ç”¨äº† OTel çš„ Jenkins CI/CD æµæ°´çº¿&#34; srcset=&#34;
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/4_hu6243664876965793228.webp 400w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/4_hu7759320642397304465.webp 760w,
               /blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/4_hu226794652791245591.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-to-observe-your-ci-cd-pipelines-with-opentelemetry/4_hu6243664876965793228.webp&#34;
               width=&#34;760&#34;
               height=&#34;333&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å¯ç”¨äº† OTel çš„ Jenkins CI/CD æµæ°´çº¿
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Jenkins CI/CD æµæ°´çº¿å¯ä»¥é€šè¿‡&lt;a href=&#34;https://plugins.jenkins.io/opentelemetry/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Jenkins OTel æ’ä»¶&lt;/a&gt;å‘å‡ºé¥æµ‹ä¿¡å·ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨æ„å»ºé˜¶æ®µä¸­ï¼š
&lt;ul&gt;
&lt;li&gt;ä½ å¯ä»¥ä½¿ç”¨&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-java-contrib/blob/main/maven-extension/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maven OTel æ‰©å±•&lt;/a&gt;å‘å‡º Java æ„å»ºçš„åˆ†å¸ƒå¼è·Ÿè¸ªã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœä½ çš„æ„å»ºåŒ…æ‹¬ shell è„š&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;æœ¬ï¼Œä½ å¯ä»¥ä½¿ç”¨&lt;a href=&#34;https://github.com/equinix-labs/otel-cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;otel-cli&lt;/a&gt;å·¥å…·æ¥ä½¿ä½ çš„ shell è„šæœ¬èƒ½å¤Ÿå‘å‡ºè·Ÿè¸ªä¿¡å·ã€‚
3. åœ¨æµ‹è¯•é˜¶æ®µä¸­ï¼Œ&lt;a href=&#34;https://github.com/dynatrace-oss/junit-jupiter-open-telemetry-extension/packages/1061205&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Maven çš„ JUnit Jupiter æ’ä»¶&lt;/a&gt;å…è®¸ä½ é€šè¿‡ OpenTelemetry æ”¶é›† JUnit æµ‹è¯•æ‰§è¡Œæ•°æ®ã€‚
4. åœ¨æ‰“åŒ…é˜¶æ®µä¸­ï¼Œä½¿ç”¨ Artifactory æ¥æ‰“åŒ…ä½ çš„åº”ç”¨ç¨‹åºï¼Œä½ å¯ä»¥å°†å…¶æ—¥å¿—å‘é€ç»™ OTel Collectorï¼Œé€šè¿‡&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/filelogreceiver/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Filelog æ¥æ”¶å™¨&lt;/a&gt;è¿›è¡Œè§£æï¼Œè¯¥æ¥æ”¶å™¨ä¼šä»æ–‡ä»¶ä¸­è¯»å–å’Œè§£ææ—¥å¿—ã€‚
5. åœ¨éƒ¨ç½²é˜¶æ®µï¼Œä½¿ç”¨ Ansible æ¥ç¼–æ’ä½ çš„éƒ¨ç½²ï¼Œ&lt;a href=&#34;https://docs.ansible.com/ansible/latest/collections/community/general/opentelemetry_callback.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ansible OpenTelemetry å›è°ƒ&lt;/a&gt;ä¼šå°†è·Ÿè¸ªæ·»åŠ åˆ°ä½ çš„ Ansible playbooks ä¸­ã€‚å¦‚æœä½ çš„ Ansible playbook è¿˜ä½¿ç”¨ shell è„šæœ¬ï¼Œå®ƒå¯ä»¥åˆ©ç”¨&lt;a href=&#34;https://github.com/equinix-labs/otel-cli&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;otel-cli&lt;/a&gt;å·¥å…·ï¼Œä½¿ä½ çš„ shell è„šæœ¬å‘å‡ºé¢å¤–çš„è·Ÿè¸ªæ•°æ®ã€‚
6. å„ç§æ’ä»¶å‘å‡ºçš„ä¿¡å·è¢« OTel Collector æ•è·ã€‚å¯ä»¥ä½¿ç”¨æ ‡å‡†çš„&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector/tree/main/receiver/otlpreceiver&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;OTLP æ¥æ”¶å™¨&lt;/a&gt;æ¥æ¥æ”¶é¥æµ‹æ•°æ®ï¼Œä»¥åŠ&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/tree/main/receiver/gitproviderreceiver&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Git æä¾›å•†æ¥æ”¶å™¨&lt;/a&gt;å’Œ&lt;a href=&#34;https://github.com/open-telemetry/opentelemetry-collector-contrib/blob/main/receiver/filelogreceiver/README.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Filelog æ¥æ”¶å™¨&lt;/a&gt;ã€‚ç„¶åï¼ŒCollector å°†é¥æµ‹ä¿¡å·å‘é€åˆ°å¯è§‚æµ‹æ€§åç«¯ã€‚
7. ä¸€æ—¦ä½ çš„æ•°æ®åˆ°è¾¾å¯è§‚æµ‹æ€§åç«¯ï¼Œä½ å¯ä»¥æŸ¥çœ‹å’ŒæŸ¥è¯¢æ•°æ®ï¼Œè®¾ç½®è­¦æŠ¥ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å®ç°å¯è§‚æµ‹æµæ°´çº¿çš„æŒ‘æˆ˜&#34;&gt;å®ç°å¯è§‚æµ‹æµæ°´çº¿çš„æŒ‘æˆ˜&lt;/h2&gt;
&lt;p&gt;è™½ç„¶ä½¿ç”¨ OpenTelemetry å®ç° CI/CD æµæ°´çº¿å¯è§‚æµ‹æ€§æ˜¯æœ‰é“ç†çš„ï¼Œä½†ç¼ºä¹æ ‡å‡†åŒ–ï¼Œå·¥å…·æƒ…å†µæœ‰ç‚¹æ··ä¹±ã€‚&lt;/p&gt;
&lt;p&gt;OpenTelemetry å¹¶æœªé›†æˆåˆ°å¤§å¤šæ•° CI/CD å·¥å…·ä¸­ã€‚è™½ç„¶æœ‰äººå¸Œæœ›å°†è§‚å¯Ÿèƒ½åŠ›æ·»åŠ åˆ°è¯¸å¦‚ GitLab å’Œ GitHub Actions ç­‰ CI/CD å·¥å…·ä¸­ï¼Œä½†è¿™äº›å€¡è®®è¿›å±•ç¼“æ…¢ã€‚ä¾‹å¦‚ï¼Œå°½ç®¡&lt;a href=&#34;https://gitlab.com/gitlab-org/gitlab/-/issues/338943&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitLab æœ‰å…³ä½¿ç”¨ OTel è¿›è¡Œæµæ°´çº¿å¯è§‚æµ‹æ€§çš„è¯·æ±‚&lt;/a&gt;å­˜åœ¨æ´»åŠ¨ï¼Œä½†è¯¥è¯·æ±‚å·²ç»å¼€æ”¾äº†ä¸¤å¹´ã€‚&lt;a href=&#34;https://github.com/open-telemetry/oteps/pull/223&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœ‰å…³ CI/CD æµæ°´çº¿å¯è§‚æµ‹æ€§çš„ OTel ææ¡ˆ&lt;/a&gt;äº 2023 å¹´ 1 æœˆæå‡ºï¼Œä½†ï¼ˆæˆªè‡³ 2023 å¹´ 11 æœˆï¼‰è‡ª 7 æœˆä»¥æ¥å°šæœªæœ‰ä»»ä½•æ´»åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;å› æ­¤ï¼Œå¦‚æœä½ æƒ³ä½¿ç”¨è¿™äº›å·¥å…·ï¼Œä½ å°†å–å†³äºåˆ›å»ºè‡ªå·±å·¥å…·çš„ä¸ªäººå’Œç»„ç»‡æ˜¯å¦æ„¿æ„ç»´æŠ¤è¿™äº›å·¥å…·ã€‚å¦‚æœä»–ä»¬å†³å®šä¸å†ç»´æŠ¤è¿™äº›å·¥å…·ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;h2 id=&#34;äº†è§£æ›´å¤š&#34;&gt;äº†è§£æ›´å¤š&lt;/h2&gt;
&lt;p&gt;ä½¿ä½ çš„ CI/CD æµæ°´çº¿å¯è§‚æµ‹æœ‰åŠ©äºæ›´æœ‰æ•ˆåœ°æ’é™¤é—®é¢˜ï¼Œå®ç°å¼€å‘æ•æ·æ€§ï¼Œå¹¶æ·±å…¥äº†è§£å…¶å†…éƒ¨å·¥ä½œåŸç†ï¼Œä»¥ä¾¿ä½ å¯ä»¥è°ƒæ•´å®ƒä»¬ä»¥ä½¿å…¶è¿è¡Œæ›´é«˜æ•ˆã€‚&lt;/p&gt;
&lt;p&gt;å¥åº·çš„æµæ°´çº¿æ„å‘³ç€ä½ å¯ä»¥è¿ç»­ç¼–å†™ã€æ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²æ–°ä»£ç ã€‚ç›¸åï¼Œä¸å¥åº·çš„æµæ°´çº¿å¯èƒ½æ„å‘³ç€éƒ¨ç½²è¾ƒæ…¢ï¼Œæµ‹è¯•é—®é¢˜å’ŒæŠ€æœ¯å€ºåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;ä½ å¯ä»¥ä½¿ç”¨ OpenTelemetry åœ¨æµæ°´çº¿ä¸­æ·»åŠ å¯è§‚æµ‹æ€§ï¼›å°½ç®¡å½“å‰é€‰é¡¹æœ‰é™ï¼Œä½†äº‹æƒ…æ­£åœ¨æœç€æ­£ç¡®çš„æ–¹å‘å‘å±•ï¼Œæˆ‘ä»¬å¯¹ CI/CD çš„æœªæ¥å……æ»¡æœŸå¾…ï¼&lt;/p&gt;
&lt;p&gt;è¿›ä¸€æ­¥é˜…è¯»ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://logz.io/learn/cicd-observability-jenkins&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è§£å†³æ…¢å’Œä¸ç¨³å®šçš„ CI/CD æµæ°´çº¿å§‹äºå¯è§‚æµ‹æ€§&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.linkedin.com/pulse/leveraging-opentelemetry-enhance-ansible-jaeger-tracing-infralovers&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åˆ©ç”¨ OpenTelemetry å¢å¼º Ansible çš„ Jaeger è·Ÿè¸ª&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.splunk.com/en_us/blog/learn/monitoring-ci-cd.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CI/CD æµæ°´çº¿ç›‘æ§ï¼šç®€ä»‹&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;åœ¨&lt;a href=&#34;https://communityinviter.com/apps/cloud-native/cncf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CNCF Slack&lt;/a&gt;çš„&lt;a href=&#34;https://cloud-native.slack.com/archives/C0598R66XAP&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;cicd-o11y&lt;/a&gt;é¢‘é“ä¸­æŸ¥çœ‹æ›´å¤šä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>CNCF å°†æœåŠ¡ç½‘æ ¼æ¥å£ï¼ˆSMIï¼‰é¡¹ç›®å½’æ¡£</title>
      <link>https://cloudnativecn.com/blog/cncf-archives-the-service-mesh-interface-smi-project/</link>
      <pubDate>Tue, 12 Dec 2023 12:30:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/cncf-archives-the-service-mesh-interface-smi-project/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ª &lt;a href=&#34;https://www.cncf.io/blog/2023/10/03/cncf-archives-the-service-mesh-interface-smi-project/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CNCF å®˜æ–¹åšå®¢&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;CNCFï¼ˆ&lt;a href=&#34;https://github.com/cncf/toc&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;æŠ€æœ¯ç›‘ç£å§”å‘˜ä¼šï¼ˆTOCï¼‰&lt;/strong&gt;&lt;/a&gt;ï¼‰å·²ç»æŠ•ç¥¨æ‰¹å‡†&lt;a href=&#34;https://github.com/cncf/toc/pull/1156&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;&lt;strong&gt;å½’æ¡£&lt;/strong&gt;&lt;/a&gt;æœåŠ¡ç½‘æ ¼æ¥å£ï¼ˆSMIï¼‰é¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;SMI è¢«åˆ›å»ºä¸ºåœ¨ Kubernetes ä¸Šä¸ºæœåŠ¡ç½‘æ ¼æä¾›æ ‡å‡†æ¥å£ä»¥åŠæœ€å¸¸è§çš„æœåŠ¡ç½‘æ ¼ç”¨ä¾‹çš„åŸºæœ¬åŠŸèƒ½é›†ã€‚å®ƒäº 2020 å¹´ 3 æœˆè¢«æ¥å—ä¸º CNCF æ²™ç›’é¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;SMI æ˜¯ç¬¬äº”ä¸ªè¢« CNCF å½’æ¡£çš„é¡¹ç›®ã€‚å¼€æºé¡¹ç›®æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œé¡¹ç›®å¯èƒ½å› å„ç§åŸå› è€Œä¸æ´»è·ƒã€‚è¿˜æœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œé¡¹ç›®å¯èƒ½ä¸å†å¸Œæœ›å¾—åˆ° CNCFã€ç»´æŠ¤è€…æˆ– TOC çš„æ”¯æŒã€‚&lt;/p&gt;
&lt;p&gt;CNCF çš„ CTO Chris Aniszczyk è¡¨ç¤ºï¼šâ€œåœ¨ CNCF ä¸­ï¼Œé¡¹ç›®æœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæœ‰æ—¶åŒ…æ‹¬å½’æ¡£é¡¹ç›®ï¼Œç‰¹åˆ«æ˜¯å› ä¸ºæ²™ç›’é¡¹ç›®æ˜¯ç”¨äºå®éªŒçš„ã€‚è¿™å®é™…ä¸Šæ˜¯ç»´æŠ¤ä¸€ä¸ªå¥åº·çš„å¼€æºç”Ÿæ€ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚â€ä»–è¿˜è¯´ï¼šâ€œé¡¹ç›®å°†è‡ªç„¶åœ°åœ¨ç”Ÿå‘½å‘¨æœŸä¸­ç§»åŠ¨ï¼Œå¹¶å¯èƒ½å˜å¾—ä¸å¤ªæ´»è·ƒï¼Œæˆ–è€…å¯èƒ½ä¸å†é€‚åˆæŸä¸ªç”¨ä¾‹ã€‚å°± SMI è€Œè¨€ï¼Œç»´æŠ¤è€…å·²ç»å†³å®šå°†ç²¾åŠ›é›†ä¸­åœ¨ Kubernetes SIG Network å€¡è®®ä¸‹çš„ &lt;a href=&#34;https://kubernetes.io/blog/2023/08/29/gateway-api-v0-8/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GAMMA&lt;/a&gt; æœåŠ¡ç½‘æ ¼ä¸Šã€‚â€&lt;/p&gt;
&lt;p&gt;åœ¨ 2022 å¹´ 7 æœˆï¼ŒSMI å›¢é˜Ÿæ›´æ–°äº†é¡¹ç›®åšå®¢ç«™ç‚¹ï¼š&lt;a href=&#34;https://smi-spec.io/blog/announcing-smi-gateway-api-gamma/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®£å¸ƒ SMI å‚ä¸ Gateway API GAMMA å€¡è®®&lt;/a&gt;ã€‚åœ¨ SMI æ——ä¸‹æ²¡æœ‰è¿›ä¸€æ­¥çš„å·¥ä½œï¼ŒSMI ç»´æŠ¤è€…ç›®å‰å»ºè®®å½’æ¡£ SMI é¡¹ç›®ï¼Œå¹¶é¼“åŠ±äººä»¬å‚ä¸ GAMMA å€¡è®®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦é¡¹ç›®è¢«å½’æ¡£ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;CNCF å°†ä¸å†ä¸ºè¯¥é¡¹ç›®æä¾›æ”¯æŒ&lt;/li&gt;
&lt;li&gt;å®ƒå°†åœ¨ç½‘ä¸Šåˆ—ä¸ºå½’æ¡£é¡¹ç›®&lt;/li&gt;
&lt;li&gt;CNCF å¯ä»¥æä¾›æœåŠ¡ï¼Œå¦‚æ–‡æ¡£æ›´æ–°ï¼Œä»¥å¸®åŠ©ç”¨æˆ·è¿‡æ¸¡ã€‚&lt;/li&gt;
&lt;li&gt;CNCF å°†ä¸å†ä¸ºè¯¥é¡¹ç›®æä¾›å…¶ä»–è¥é”€æ´»åŠ¨&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;CNCF TOC æ„Ÿè°¢ SMI é¡¹ç›®çš„ç»´æŠ¤è€…å’Œè´¡çŒ®è€…åœ¨æ¨åŠ¨äº‘åŸç”ŸæœåŠ¡ç½‘æ ¼æŠ€æœ¯å’Œæ ‡å‡†åŒ–æ–¹é¢å‘æŒ¥çš„é‡è¦ä½œç”¨ã€‚&lt;/p&gt;
&lt;p&gt;äº†è§£æ›´å¤šå…³äº &lt;a href=&#34;https://github.com/cncf/toc/blob/main/process/archiving.md&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;CNCF å½’æ¡£æµç¨‹&lt;/a&gt; çš„ä¿¡æ¯ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>JWT åœ¨ API ç½‘å…³ä¸­çš„è§’è‰²ï¼šæœåŠ¡é—´è®¤è¯çš„æ–°è§†è§’</title>
      <link>https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/</link>
      <pubDate>Fri, 08 Dec 2023 12:30:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://www.solo.io/blog/jwts-authenticate-services-api-gateways/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://www.solo.io/blog/jwts-authenticate-services-api-gateways/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡åšå®¢æ¢è®¨äº†åœ¨äº‘åŸç”Ÿæ¶æ„ä¸­ä½¿ç”¨ JSON Web Tokensï¼ˆJWTsï¼‰è¿›è¡ŒæœåŠ¡é—´é€šä¿¡çš„å¤æ‚æ€§ã€‚å®ƒè¯¦ç»†è®¨è®ºäº†é€šè¿‡ API ç½‘å…³å’ŒæœåŠ¡ç½‘æ ¼å®ç°å®‰å…¨è®¤è¯çš„ä¸¤ç§æ–¹æ³•ï¼Œå¼ºè°ƒäº†ä½¿ç”¨ JWTs çš„æŒ‘æˆ˜ï¼ŒåŒ…æ‹¬å®‰å…¨æ€§ã€å¯†é’¥ç®¡ç†å’Œæ€§èƒ½é—®é¢˜ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;äº‘åŸç”Ÿæ¶æ„ä¸­çš„ API ç½‘å…³ç»„ä»¶è‡³å…³é‡è¦ï¼Œå› ä¸ºå®ƒå°†å…³é”®çš„ API å®‰å…¨æ€§å’Œç­–ç•¥åŠŸèƒ½å¸è½½åˆ°ä¸€ä¸ªå…¬å…±ä½ç½®ï¼Œä½¿åç«¯ API å’ŒæœåŠ¡èƒ½å¤Ÿä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ã€‚API èº«ä»½éªŒè¯ã€æˆæƒã€å®¡è®¡ã€é™æµç­‰ä»»åŠ¡å¯èƒ½ä¼šéå¸¸å¤æ‚ä¸”éš¾ä»¥æ­£ç¡®å®ç°ï¼Œå› æ­¤è®¸å¤šç»„ç»‡é€‰æ‹©ä½¿ç”¨ API ç½‘å…³æ¥å¤„ç†å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå¯¹äºæœåŠ¡ä¸æœåŠ¡ï¼ˆS2Sï¼‰æˆ–å†…éƒ¨ä¸œ/è¥¿æµé‡å‘¢ï¼Ÿå¼ºåˆ¶ S2S æµé‡â€œå›å¤´â€é€šè¿‡ API ç½‘å…³ä¼šå¼•å…¥é¢å¤–çš„è·³è·ƒã€æ›´å¤šçš„å»¶è¿Ÿã€å¢åŠ çš„æµé‡ä»¥åŠæ•ˆç‡é™ä½ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-é€šè¿‡-api-ç½‘å…³çš„-s2s-æµé‡å›å¤´ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;é€šè¿‡ API ç½‘å…³çš„ S2S æµé‡â€œå›å¤´â€ç¤ºæ„å›¾&#34; srcset=&#34;
               /blog/jwts-authenticate-services-api-gateways/hairpin-api-gateway-calls_hu1426462098848652707.webp 400w,
               /blog/jwts-authenticate-services-api-gateways/hairpin-api-gateway-calls_hu12297138726394611442.webp 760w,
               /blog/jwts-authenticate-services-api-gateways/hairpin-api-gateway-calls_hu17562096345058781978.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/hairpin-api-gateway-calls_hu1426462098848652707.webp&#34;
               width=&#34;760&#34;
               height=&#34;570&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      é€šè¿‡ API ç½‘å…³çš„ S2S æµé‡â€œå›å¤´â€ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ï¼Œå¦‚æœæ‚¨è·³è¿‡ API ç½‘å…³ç›´æ¥è°ƒç”¨æœåŠ¡ï¼Œå¦‚ä½•ç¡®ä¿æµé‡çš„å®‰å…¨æ€§ï¼Ÿæ¥æ”¶æœåŠ¡å¦‚ä½•è¿›è¡Œèº«ä»½éªŒè¯å¹¶çŸ¥é“æ˜¯è°åœ¨è°ƒç”¨å®ƒï¼Ÿ&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ˜¾ç¤º-service-b-éœ€è¦å¯¹-service-a-è¿›è¡Œèº«ä»½éªŒè¯çš„ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ˜¾ç¤º Service B éœ€è¦å¯¹ Service A è¿›è¡Œèº«ä»½éªŒè¯çš„ç¤ºæ„å›¾&#34; srcset=&#34;
               /blog/jwts-authenticate-services-api-gateways/service-a-b_hu3331557173496051898.webp 400w,
               /blog/jwts-authenticate-services-api-gateways/service-a-b_hu13480306152317070208.webp 760w,
               /blog/jwts-authenticate-services-api-gateways/service-a-b_hu13309169736882342115.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/service-a-b_hu3331557173496051898.webp&#34;
               width=&#34;760&#34;
               height=&#34;248&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ˜¾ç¤º Service B éœ€è¦å¯¹ Service A è¿›è¡Œèº«ä»½éªŒè¯çš„ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¿éšœ S2S é€šä¿¡çš„ä¸¤ç§å¸¸è§æ–¹å¼æ˜¯ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ä½¿ç”¨ä¼ è¾“å±‚å®‰å…¨æ€§ï¼ˆTLSï¼‰å’Œå®¢æˆ·ç«¯è¯ä¹¦ï¼ˆåŒå‘ TLS æˆ– mTLSï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ç­¾åçš„ JSON Web Tokensï¼ˆJWTï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;a href=&#34;https://www.solo.io/topics/service-mesh/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœåŠ¡ç½‘æ ¼&lt;/a&gt;é€šè¿‡ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ³•è‡ªåŠ¨åŒ–äº†è®¸å¤šæœ€ä½³å®è·µå¹¶å‡è½»äº†ä¸ä¹‹ç›¸å…³çš„&lt;a href=&#34;https://istio.io/latest/blog/2023/secure-apps-with-istio/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é—®é¢˜&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¼€å‘äººå‘˜å¯ä»¥é€‰æ‹©ä½¿ç”¨ JWT è¿›è¡Œ S2S èº«ä»½éªŒè¯ï¼Œä½†è¿™ä¼šâ€œå‰Šå¼±â€API ç½‘å…³çš„é¢„æœŸåŠŸèƒ½ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‚¨æ›¾æœŸæœ› API ç½‘å…³å¤„ç†çš„æ‰€æœ‰å®‰å…¨æ€§å¤æ‚æ€§å’Œè„†å¼±æ€§å¿…é¡»åœ¨æ¯ä¸ª S2S é€šä¿¡çš„å¾®æœåŠ¡ä¸­é‡æ–°åˆ›å»ºå’Œå¤åˆ¶ã€‚è¿™æ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ï¼Œå› ä¸ºä½¿ç”¨ JWT è¿›è¡Œ S2S èº«ä»½éªŒè¯ä¼šå¼•å…¥å¤æ‚æ€§å’Œå¯¹ç»†èŠ‚çš„ä¸¥æ ¼è¦æ±‚ã€‚ï¼ˆæœ‰å…³æ­¤ä¸»é¢˜å’Œä¸‹é¢çš„åœºæ™¯çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·è§‚çœ‹ Hoot ç¬¬ 59 é›†ï¼šâ€œ&lt;a href=&#34;https://youtu.be/Q2KfNUBfnjo&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;JWT ä¸ Service-to-Service èº«ä»½éªŒè¯çš„æ¯”è¾ƒ&lt;/a&gt;â€ã€‚æ‰€æœ‰æ¼”ç¤ºéƒ½å¯ä»¥åœ¨æˆ‘ä»¬çš„&lt;a href=&#34;https://github.com/peterj/jwts-for-services/tree/main&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub ä»“åº“&lt;/a&gt;ä¸­æ‰¾åˆ°ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;è™½ç„¶æœ‰ä¸€äº›å‡ºè‰²çš„å¤„ç† JWT çš„æ¡†æ¶å’Œåº“ï¼Œè€Œ JWT ç¡®å®æœ‰å…¶ç”¨æ­¦ä¹‹åœ°ï¼Œä½†å°† JWT ç”¨äº S2S æµé‡çš„èº«ä»½éªŒè¯æ˜¯å¤æ‚ä¸”ç¹é‡çš„ï¼Œå¹¶ä¸”éœ€è¦å¼€å‘äººå‘˜éå¸¸å‡†ç¡®åœ°å®Œæˆå·¥ä½œã€‚è¿™ç§å¤æ‚æ€§ï¼ˆæˆ–ç¼ºä¹æ„è¯†ï¼‰å¯èƒ½ä¼šé™ä½æ€»ä½“å®‰å…¨æ€§ï¼Œå¦‚æœå¼€å‘äººå‘˜é‡‡å–æ·å¾„æˆ–å¿½è§†å…³é”®å±æ€§ï¼Œå¯èƒ½ä¼šé™ä½æ€»ä½“å®‰å…¨æ€§ã€‚å¼€å‘äººå‘˜è¿˜éœ€è¦ä»¥ç‰¹å®šäºè¯­è¨€å’Œæ¡†æ¶çš„æ–¹å¼æ‰§è¡Œæ­¤æ“ä½œï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ Java è§£å†³æ­¤é—®é¢˜ä¸ä½¿ç”¨ Go æˆ– Node.js ä¸åŒï¼‰ã€‚åœ¨æ‰€æœ‰ä»£ç åº“ä¸­ç»´æŠ¤ã€æ‰“è¡¥ä¸å’Œå®¡æ ¸æ¯ä¸ªå®ç°éƒ½éœ€è¦ä»˜å‡ºæˆæœ¬ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¦‚ä½•ä½¿ç”¨-jwt-è¿›è¡Œ-s2s-é€šä¿¡èº«ä»½éªŒè¯&#34;&gt;å¦‚ä½•ä½¿ç”¨ JWT è¿›è¡Œ S2S é€šä¿¡èº«ä»½éªŒè¯&lt;/h2&gt;
&lt;p&gt;æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥åˆ›å»º JWT ä»¥è¿›è¡Œ S2S é€šä¿¡èº«ä»½éªŒè¯ï¼šä½¿ç”¨èº«ä»½æä¾›è€…ï¼ˆIdPï¼‰ï¼ˆä¹Ÿç§°ä¸ºå®‰å…¨ä»¤ç‰ŒæœåŠ¡æˆ– STSï¼‰æˆ–å…è®¸å„ä¸ªæœåŠ¡è‡ªè¡Œç­¾ç½² JWTã€‚ï¼ˆå¦‚æœæ‚¨å¯¹ JWT æ¦‚å¿µä¸ç†Ÿæ‚‰æˆ–éœ€è¦å¤ä¹ ï¼Œè¯·æŸ¥çœ‹ Auth0 æä¾›çš„&lt;a href=&#34;https://auth0.com/docs/secure/tokens/json-web-tokens&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;JWT æ¦‚è¿°&lt;/a&gt;ã€‚ï¼‰&lt;/p&gt;
&lt;h3 id=&#34;é€‰é¡¹-1ä½¿ç”¨-sts-å‘æ”¾ä»¤ç‰Œ&#34;&gt;é€‰é¡¹ 1ï¼šä½¿ç”¨ STS å‘æ”¾ä»¤ç‰Œ&lt;/h3&gt;
&lt;p&gt;ç¬¬ä¸€ç§æ–¹æ³•æ¶‰åŠä½¿ç”¨å®‰å…¨ä»¤ç‰ŒæœåŠ¡ï¼ˆSTSï¼‰ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯ä¿¡ä»»çš„èº«ä»½æˆ–ä»¤ç‰Œæä¾›è€…ï¼Œä¾‹å¦‚&lt;a href=&#34;https://www.keycloak.org/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Keycloak&lt;/a&gt;ã€&lt;a href=&#34;https://www.okta.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Okta&lt;/a&gt;æˆ–&lt;a href=&#34;https://auth0.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Auth0&lt;/a&gt;ï¼Œç”¨äºå‘æ”¾ä»£è¡¨ç‰¹å®šæœåŠ¡çš„ä»¤ç‰Œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ­¤æ–¹æ³•ä¸­ï¼ŒæœåŠ¡ä½¿ç”¨é•¿æœŸå‡­æ®ï¼ˆä¾‹å¦‚ç”¨æˆ·åå’Œå¯†ç æˆ– OAuth2.0 å®¢æˆ·ç«¯å‡­æ®ï¼‰ä¸ STS äº¤æ¢ JWTï¼Œè¡¨æ˜â€œæˆ‘æ˜¯ Service Aâ€ã€‚&lt;/p&gt;
&lt;p&gt;æ³¨æ„ï¼šé•¿æœŸå‡­æ®åº”å®‰å…¨å­˜å‚¨å¹¶æœ‰é™ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨å¯åŠ¨æ—¶ä½¿ç”¨å®ƒä¸€æ¬¡æ¥å¼•å¯¼èº«ä»½ï¼Œå¹¶ä¸”ä»¥åä¸å†ä½¿ç”¨ã€‚æ­¤å¤–ï¼Œè¿™äº›å‡­æ®åº”ä»…å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;STS ä½¿ç”¨å…¶ç§é’¥ç­¾ç½² JWTï¼Œå¯ä»¥ä½¿ç”¨å…¶å…¬é’¥éªŒè¯ JWTã€‚ç„¶åï¼ŒService A å°† JWT é™„åŠ åˆ°å‘é€ç»™ Service B çš„è¯·æ±‚ä¸­ã€‚ä»è¿™é‡Œï¼ŒService B å¯ä»¥é€šè¿‡ä½¿ç”¨ STS çš„å…¬é’¥éªŒè¯ JWT çš„ç­¾åæ¥éªŒè¯ JWT æ˜¯ç”± STS ç­¾å‘çš„ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æ˜¾ç¤ºæœåŠ¡å¦‚ä½•ç›¸äº’éªŒè¯çš„ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æ˜¾ç¤ºæœåŠ¡å¦‚ä½•ç›¸äº’éªŒè¯çš„ç¤ºæ„å›¾&#34; srcset=&#34;
               /blog/jwts-authenticate-services-api-gateways/authentication_hu18391638308049772176.webp 400w,
               /blog/jwts-authenticate-services-api-gateways/authentication_hu12369651219247502419.webp 760w,
               /blog/jwts-authenticate-services-api-gateways/authentication_hu5449802954201412187.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/authentication_hu18391638308049772176.webp&#34;
               width=&#34;760&#34;
               height=&#34;471&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æ˜¾ç¤ºæœåŠ¡å¦‚ä½•ç›¸äº’éªŒè¯çš„ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿æ­¤å·¥ä½œæ­£å¸¸è¿è¡Œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æµé‡å¿…é¡»åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;æœåŠ¡ B å¿…é¡»æ£€æŸ¥ JWT çš„&lt;code&gt;aud&lt;/code&gt;å£°æ˜ã€è¿‡æœŸæ—¶é—´ã€é¢å‘æ—¶é—´ä»¥åŠä¸æ—©äºæ—¶é—´ã€‚&lt;/li&gt;
&lt;li&gt;å½“ STS ç­¾å‘çš„ JWT ç­¾åå¯†é’¥è½®æ¢æ—¶ï¼ŒæœåŠ¡ B å¿…é¡»å‡†å¤‡å¥½æ›´æ–° STS çš„å…¬é’¥ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;åŠ å¯†æµé‡è‡³å…³é‡è¦ï¼Œå› ä¸ºåœ¨è¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ JWT æ—¶ï¼Œå®ƒä»¬ä»£è¡¨äº†ä¸€ä¸ªâ€œæ‰¿è½½ä»¤ç‰Œâ€ï¼Œå› æ­¤æ‹¥æœ‰ä»¤ç‰Œçš„ä»»ä½•äººéƒ½å¯ä»¥å†’å…… Service Aã€‚åœ¨ Service A å’Œ Service B ä¹‹é—´åŠ å¯†æµé‡ï¼ˆä¾‹å¦‚ä½¿ç”¨å•å‘æœåŠ¡å™¨ TLSï¼‰æœ‰åŠ©äºå‡è½»è¿™ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;Service B è¿˜å¿…é¡»æ£€æŸ¥ JWT çš„è¿‡æœŸæ—¶é—´ï¼ˆ&lt;code&gt;exp&lt;/code&gt;ï¼‰ã€é¢å‘æ—¶é—´ï¼ˆ&lt;code&gt;iat&lt;/code&gt;ï¼‰ã€ä¸æ—©äºæ—¶é—´ï¼ˆ&lt;code&gt;nbf&lt;/code&gt;ï¼‰ä»¥åŠç‰¹åˆ«æ˜¯&lt;code&gt;aud&lt;/code&gt;å£°æ˜ï¼Œä»¥éªŒè¯ä»¤ç‰Œæ˜¯å¦æœ‰æ•ˆï¼ˆæœªè¿‡æœŸï¼Œä½äºå…¶æ—¶é—´çª—å£å†…å¹¶ç”¨äº Service B çš„ä½¿ç”¨ï¼‰ã€‚JWT ä½¿ç”¨è¿™ä¸ªçº¦å®šæ¥é˜²èŒƒé‡æ”¾æ”»å‡»ï¼Œå…¶ä¸­æ”»å‡»è€…å†’å…… Service Bï¼Œä» Service A è·å–ä»¤ç‰Œï¼Œç„¶åå†’å…… Service A æ¥è°ƒç”¨ Service Cã€‚æœ‰æ•ˆçš„ Service C ä¼šæ£€æŸ¥&lt;code&gt;aud&lt;/code&gt;å£°æ˜ï¼Œçœ‹åˆ°ä»£è¡¨ Service A çš„ JWT æ˜¯ä¸º Service B è€Œè®¾è®¡çš„ï¼Œç„¶åæ‹’ç»å®ƒã€‚&lt;/p&gt;
&lt;p&gt;æ¯æ¬¡è°ƒç”¨æœåŠ¡ A éƒ½å¿…é¡»ä½¿ç”¨ä¸åŒçš„ JWTï¼Œå› ä¸º&lt;code&gt;aud&lt;/code&gt;å£°æ˜ä¼šä¸åŒã€‚å°è¯•ä½¿ç”¨æ²¡æœ‰&lt;code&gt;aud&lt;/code&gt;å£°æ˜çš„ JWT æˆ–ä½¿ç”¨é€šé…ç¬¦&lt;code&gt;aud&lt;/code&gt;å£°æ˜ä¼šå¢åŠ  JWT è¢«ç ´åçš„é£é™©ã€‚é¿å…è¿™æ ·åšã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¸¸å¸¸è¢«å¿½ç•¥çš„æ˜¯è½®æ¢ STS çš„å…¬é’¥ã€‚åœ¨è®¡åˆ’çš„å¯†é’¥è½®æ¢æˆ–è®¡åˆ’çš„æ’¤é”€ STS ç”¨äºç­¾ç½² JWT çš„å¯†é’¥æ—¶ï¼ŒService Bï¼ˆæˆ–ä»»ä½•ä¾èµ– STS è¿›è¡ŒéªŒè¯çš„æœåŠ¡ï¼‰å¿…é¡»èƒ½å¤Ÿå¤„ç†æ›´æ–°çš„ç­¾åå…¬é’¥ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é€‰é¡¹-2è®©æœåŠ¡è‡ªè¡Œç­¾ç½²å…¶ä»¤ç‰Œ&#34;&gt;é€‰é¡¹ 2ï¼šè®©æœåŠ¡è‡ªè¡Œç­¾ç½²å…¶ä»¤ç‰Œ&lt;/h3&gt;
&lt;p&gt;ç¬¬äºŒç§æ–¹æ³•ä½¿ç”¨æœåŠ¡ç‰¹å®šçš„å¯†é’¥æ¥ç­¾ç½² JWTã€‚å¯ä»¥ä½¿ç”¨å¯¹ç§°å¯†é’¥æˆ–éå¯¹ç§°å¯†é’¥ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-ä½¿ç”¨ç‰¹å®šäºæœåŠ¡çš„å¯†é’¥è¿›è¡Œ-s2s-èº«ä»½éªŒè¯çš„ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;ä½¿ç”¨ç‰¹å®šäºæœåŠ¡çš„å¯†é’¥è¿›è¡Œ S2S èº«ä»½éªŒè¯çš„ç¤ºæ„å›¾&#34; srcset=&#34;
               /blog/jwts-authenticate-services-api-gateways/authentication-service-specific-keys_hu157616134395954412.webp 400w,
               /blog/jwts-authenticate-services-api-gateways/authentication-service-specific-keys_hu2756756592464593840.webp 760w,
               /blog/jwts-authenticate-services-api-gateways/authentication-service-specific-keys_hu5563519272958140492.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/authentication-service-specific-keys_hu157616134395954412.webp&#34;
               width=&#34;760&#34;
               height=&#34;518&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      ä½¿ç”¨ç‰¹å®šäºæœåŠ¡çš„å¯†é’¥è¿›è¡Œ S2S èº«ä»½éªŒè¯çš„ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒService A ä½¿ç”¨è‡ªå·±çš„å¯†é’¥æ¥ç­¾ç½²å‘é€ç»™ Service Bï¼ˆæˆ–ä»»ä½•å…¶ä»–æœåŠ¡ï¼‰çš„ JWTã€‚Service B å°†éœ€è¦ Service A çš„å…¬é’¥ï¼ˆæˆ–å¯¹ç§°å¯†é’¥ï¼Œç”±äºå¯†é’¥äº¤æ¢å’Œå†’å……é—®é¢˜æ›´åŠ å±é™©ï¼‰æ¥éªŒè¯ Service A å‘é€çš„ JWTã€‚å®é™…ä¸Šï¼ŒService B å°†éœ€è¦æ¯ä¸ªè°ƒç”¨å®ƒçš„æœåŠ¡çš„å…¬é’¥ï¼Œè¿™äº›æœåŠ¡ä½¿ç”¨ JWT ä½œä¸ºèº«ä»½éªŒè¯ä¸»ä½“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ STS ç­¾å‘çš„ JWT ç¤ºä¾‹ä¸€æ ·ï¼ŒæœåŠ¡ä¹‹é—´çš„æµé‡å¿…é¡»åŠ å¯†ï¼ŒService B è¿˜å¿…é¡»æ£€æŸ¥&lt;code&gt;aud&lt;/code&gt;å£°æ˜ï¼Œå¹¶ä¸”æ‚¨éœ€è¦ä¸€ç§ç­¾ç½²å…¬é’¥è½®æ¢çš„æ–¹æ³•ã€‚æ‚¨è¿˜å¿…é¡»ä¸ºæ¯ä¸ªè°ƒç”¨çš„æœåŠ¡ä½¿ç”¨ä¸åŒçš„ JWTã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-æœåŠ¡-b-æ£€æŸ¥-aud-å£°æ˜&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;æœåŠ¡ B æ£€æŸ¥ aud å£°æ˜&#34; srcset=&#34;
               /blog/jwts-authenticate-services-api-gateways/different-jwt-dependent-services_hu3458119914455195249.webp 400w,
               /blog/jwts-authenticate-services-api-gateways/different-jwt-dependent-services_hu6440531814796546159.webp 760w,
               /blog/jwts-authenticate-services-api-gateways/different-jwt-dependent-services_hu7124902659432484959.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/jwts-authenticate-services-api-gateways/different-jwt-dependent-services_hu3458119914455195249.webp&#34;
               width=&#34;760&#34;
               height=&#34;634&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      æœåŠ¡ B æ£€æŸ¥ aud å£°æ˜
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¼€å‘äººå‘˜å¿…é¡»é‡‡å–æªæ–½å¹¶è·Ÿè¸ªè®¸å¤šå†…å®¹ï¼Œä»¥ç¡®ä¿ä¸€åˆ‡æ­£ç¡®ã€‚è¯ä¹¦è¿˜å¿…é¡»è‡³å°‘åˆ†å‘ç»™ä¸€åŠçš„æœåŠ¡ï¼ˆæ¥æ”¶ç«¯çš„æœåŠ¡ï¼‰ä»¥æä¾›è‡³å°‘å•å‘ TLSã€‚æ­¤å¤–ï¼Œæ•´ä¸ªè¿‡ç¨‹çš„å…³é”®æ˜¯å¯†é’¥ç®¡ç†ã€è½®æ¢å’Œå®‰å…¨ä¿ç®¡å¯†é’¥ã€‚&lt;/p&gt;
&lt;h2 id=&#34;jwt-å¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹&#34;&gt;JWT å¯èƒ½å‡ºç°é—®é¢˜çš„åœ°æ–¹&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»ä»‹ç»äº† JWT å¯ç”¨äºè¡¨ç¤ºæœåŠ¡èº«ä»½çš„ä¸€äº›æ–¹å¼ï¼Œå¹¶æå‡ºäº†å…³æ³¨çš„é¢†åŸŸã€‚åœ¨æœåŠ¡æ¶æ„ä¸­ï¼Œæœ‰å‡ ä¸ªéœ€è¦å¯†åˆ‡å…³æ³¨çš„é¢†åŸŸï¼Œä»¥é¿å…å®‰å…¨æ¼æ´ã€‚å¦‚æœè¿™äº›ä¸æ˜¯ç‰¢ä¸å¯ç ´çš„ï¼Œæ‚¨å°†ä¸ºæ”»å‡»è€…æä¾›æœºä¼šæ¥ç ´åæ‚¨çš„ç³»ç»Ÿã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨å®¢æˆ·ç«¯è¯ä¹¦/mTLSï¼ˆä¾‹å¦‚æœåŠ¡ç½‘æ ¼ï¼‰å’ŒJWTè¿›è¡Œèº«ä»½éªŒè¯ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«ä¹‹ä¸€æ˜¯ï¼šJWTé€šè¿‡ç½‘ç»œå‘é€æ•æ„Ÿçš„æ‰¿è½½ä»¤ç‰Œææ–™ï¼Œè€ŒmTLSä¸ä¼šã€‚ä½¿ç”¨mTLSæ—¶ï¼Œåªä¼šå‘é€å…¬é’¥ï¼Œè€Œä¸ä¼šå‘é€ç§é’¥ï¼Œä¼šåå•†ä¼šè¯å¯†é’¥ã€‚å¦‚æœJWTæ³„éœ²ï¼ŒJWTæ˜¯ç§å¯†ææ–™ï¼Œå¯ä»¥è¢«é‡æ”¾ã€‚å¯¹äºè¯ä¹¦ï¼Œåªæœ‰å…¬å…±è¯ä¹¦è¢«å…±äº«ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºé˜²æ­¢é‡æ’­æ‰¿è½½ä»¤ç‰Œï¼Œæ‚¨å¿…é¡»é€šè¿‡è®¾ç½®çŸ­æš‚çš„åˆ°æœŸæ—¶é—´ï¼Œç†æƒ³æƒ…å†µä¸‹åªæœ‰å‡ åˆ†é’Ÿï¼Œæ¥é™åˆ¶å…¶æš´éœ²ã€‚è¿™ä¼šå¢åŠ æœåŠ¡åˆ·æ–°å…¶ JWT ä»¥è¿›è¡Œè¯·æ±‚çš„è´£ä»»ã€‚è®¾ç½®æ•°å°æ—¶ã€æ•°å¤©æˆ–æ•°æœˆçš„åˆ°æœŸæ—¶é—´å‘ç”Ÿå¾—å¤ªé¢‘ç¹ã€‚è¿™æ˜¯ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨éšæ‚£ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªé‡å¤§çš„å®‰å…¨æ¼æ´æ˜¯ï¼Œåœ¨ä½¿ç”¨ STS è·å– JWT ææ–™æ—¶ï¼Œæ‚¨ä¼šå¤šæ¬¡é€šè¿‡ç½‘ç»œå‘é€é•¿æœŸå‡­æ®ï¼ˆä¾‹å¦‚å®¢æˆ·ç«¯å‡­è¯æµç¨‹ï¼‰ã€‚è¿™äº›é•¿æœŸå‡­æ®éå¸¸æ•æ„Ÿï¼Œåº”è°¨æ…ä½¿ç”¨ï¼ˆä¾‹å¦‚ï¼Œåœ¨å¯åŠ¨æ—¶ä½¿ç”¨ï¼‰ï¼Œè€Œä¸åº”è¿ç»­ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æ­¤å¤–ï¼Œä½¿ç”¨é€šé…ç¬¦&lt;code&gt;aud&lt;/code&gt;å£°æ˜æˆ–å®Œå…¨çœç•¥&lt;code&gt;aud&lt;/code&gt;å£°æ˜ä¹Ÿæ˜¯ä¸€ä¸ªé‡å¤§é—®é¢˜ã€‚æœªèƒ½åœ¨æœåŠ¡ä¹‹é—´ä¸€è‡´ä½¿ç”¨è¿™äº›çº¦å®šä»¥è¿›è¡Œèº«ä»½éªŒè¯ä¼šå¯¼è‡´ä¸¥é‡é—®é¢˜ã€‚ç¡®ä¿ä¸º&lt;em&gt;æ¯ä¸ª&lt;/em&gt;è°ƒç”¨çš„æœåŠ¡åˆ›å»ºå…·æœ‰æ­£ç¡®&lt;code&gt;aud&lt;/code&gt;å£°æ˜çš„ JWTã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¯†é’¥è½®æ¢ä¸çŸ­æš‚åˆ°æœŸæ—¶é—´å’Œ aud å£°æ˜æ£€æŸ¥åŒæ ·é‡è¦ã€‚åœ¨å‘ç”Ÿè¿è§„äº‹ä»¶æ—¶ï¼Œä½¿å¯†é’¥æ— æ•ˆæ˜¯æœ€åçš„åŠªåŠ›ï¼Œåº”å°½å¿«ä¸”é«˜æ•ˆåœ°å¤„ç†ã€‚&lt;/p&gt;
&lt;h2 id=&#34;jwt-çš„å¤æ‚æ€§æ˜¯æœåŠ¡ç½‘æ ¼ç®€åŒ–äº‹ç‰©çš„åœ°æ–¹&#34;&gt;JWT çš„å¤æ‚æ€§æ˜¯æœåŠ¡ç½‘æ ¼ç®€åŒ–äº‹ç‰©çš„åœ°æ–¹&lt;/h2&gt;
&lt;p&gt;æœåŠ¡ç½‘æ ¼ç®€åŒ–äº†æœåŠ¡ä¹‹é—´çš„èº«ä»½éªŒè¯ï¼Œå¹¶å…è®¸å¼€å‘äººå‘˜ä¸“æ³¨äºä¸šåŠ¡é€»è¾‘ï¼Œè€Œä¸æ˜¯æ­£ç¡®åœ°å¤„ç† JWT å’Œç§˜å¯†ææ–™ï¼ˆå¸Œæœ›å¦‚æ­¤ï¼‰ã€‚å°±åƒ API ç½‘å…³åº”ç”¨äºå¤„ç†åŒ—/å—å’Œå…¥å£æµé‡çš„å®‰å…¨æ€§ä¸€æ ·ï¼ŒæœåŠ¡ç½‘æ ¼åº”ç”¨äºå¤„ç†ä¸œ/è¥¿å’Œ S2S æµé‡çš„å®‰å…¨æ€§ã€‚ä¿æŒæœåŠ¡å’Œ API ä¸“æ³¨äºå®ƒä»¬å¯ä»¥æä¾›çš„ä¸åŒ iating ä¸šåŠ¡ä»·å€¼ï¼Œè€Œä¸æ˜¯æ¨¡æ¿ï¼ˆä½†æå…¶é‡è¦çš„ï¼‰çš„å®‰å…¨æ€§ä»£ç ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>å°†å‡ºå£æµé‡è·¯ç”±åˆ°é€šé…ç¬¦ç›®æ ‡</title>
      <link>https://cloudnativecn.com/blog/istio-egress-sni/</link>
      <pubDate>Fri, 01 Dec 2023 15:33:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/istio-egress-sni/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://istio.io/latest/blog/2023/egress-sni/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://istio.io/latest/blog/2023/egress-sni/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šä¸€ç§é€šç”¨æ–¹æ³•ï¼Œç”¨äºåŠ¨æ€è®¾ç½®å‡ºå£ç½‘å…³ï¼Œå¯ä»¥å°†æµé‡è·¯ç”±åˆ°ä¸€ç»„å—é™åˆ¶çš„ç›®æ ‡è¿œç¨‹ä¸»æœºï¼ŒåŒ…æ‹¬é€šé…ç¬¦åŸŸåã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;å¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨ Istio å¤„ç†æ¥è‡ªç½‘æ ¼å¤–éƒ¨ç›®æ ‡çš„åº”ç”¨ç¨‹åºå‘èµ·çš„æµé‡ï¼Œé‚£ä¹ˆæ‚¨å¯èƒ½ç†Ÿæ‚‰å‡ºå£ç½‘å…³çš„æ¦‚å¿µã€‚å‡ºå£ç½‘å…³å¯ç”¨äºç›‘æ§å¹¶è½¬å‘æ¥è‡ªç½‘æ ¼å†…åº”ç”¨ç¨‹åºçš„æµé‡åˆ°ç½‘æ ¼å¤–çš„ä½ç½®ã€‚å¦‚æœæ‚¨çš„ç³»ç»Ÿåœ¨å—é™ç¯å¢ƒä¸­è¿è¡Œï¼Œå¹¶ä¸”å¸Œæœ›æ§åˆ¶ä»ç½‘æ ¼åˆ°å…¬å…±äº’è”ç½‘ä¸Šå¯ä»¥è®¿é—®ä»€ä¹ˆï¼Œé‚£ä¹ˆè¿™æ˜¯ä¸€ä¸ªæœ‰ç”¨çš„åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨&lt;a href=&#34;https://archive.istio.io/v1.13/docs/tasks/traffic-management/egress/wildcard-egress-hosts/#wildcard-configuration-for-arbitrary-domains&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®˜æ–¹ Istio æ–‡æ¡£&lt;/a&gt;ä¸­ï¼Œç›´åˆ°ç‰ˆæœ¬ 1.13ï¼ŒåŒ…æ‹¬é…ç½®å‡ºå£ç½‘å…³ä»¥å¤„ç†ä»»æ„é€šé…ç¬¦åŸŸåçš„ç”¨ä¾‹ï¼Œä½†éšåè¢«ç§»é™¤ï¼Œå› ä¸ºæ–‡æ¡£ä¸­çš„è§£å†³æ–¹æ¡ˆæ²¡æœ‰å¾—åˆ°å®˜æ–¹æ”¯æŒæˆ–æ¨èï¼Œè€Œä¸”å¯èƒ½åœ¨å°†æ¥çš„ Istio ç‰ˆæœ¬ä¸­å¤±æ•ˆã€‚å°½ç®¡å¦‚æ­¤ï¼Œæ—§çš„è§£å†³æ–¹æ¡ˆä»ç„¶å¯ä»¥åœ¨ 1.20 ä¹‹å‰çš„ Istio ç‰ˆæœ¬ä¸­ä½¿ç”¨ã€‚ç„¶è€Œï¼ŒIstio 1.20 æ”¾å¼ƒäº†ä¸€äº›å¯¹è¯¥æ–¹æ³•å·¥ä½œæ‰€éœ€çš„ Envoy åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡è¯•å›¾æè¿°æˆ‘ä»¬å¦‚ä½•è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå¹¶é€šè¿‡ä½¿ç”¨ä¸ Istio ç‰ˆæœ¬æ— å…³çš„ç»„ä»¶å’Œ Envoy åŠŸèƒ½ä»¥åŠæ— éœ€å•ç‹¬çš„ Nginx SNI ä»£ç†æ¥å¡«è¡¥è¿™ä¸ªç©ºç™½ã€‚æˆ‘ä»¬çš„æ–¹æ³•å…è®¸æ—§è§£å†³æ–¹æ¡ˆçš„ç”¨æˆ·åœ¨ç³»ç»Ÿé¢ä¸´ Istio 1.20 çš„é‡å¤§å˜åŒ–ä¹‹å‰æ— ç¼è¿ç§»é…ç½®ã€‚&lt;/p&gt;
&lt;h2 id=&#34;éœ€è¦è§£å†³çš„é—®é¢˜&#34;&gt;éœ€è¦è§£å†³çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;å½“å‰æ–‡æ¡£è®°å½•çš„å‡ºå£ç½‘å…³ç”¨ä¾‹ä¾èµ–äºæµé‡çš„ç›®æ ‡ï¼ˆä¸»æœºåï¼‰åœ¨ &lt;code&gt;VirtualService&lt;/code&gt; ä¸­é™æ€é…ç½®ï¼Œå‘Šè¯‰å‡ºå£ç½‘å…³ pod ä¸­çš„ Envoy åœ¨å“ªé‡Œ TCP ä»£ç†åŒ¹é…çš„å‡ºç«™è¿æ¥ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å¤šä¸ªï¼Œç”šè‡³æ˜¯é€šé…ç¬¦çš„ DNS åç§°æ¥åŒ¹é…è·¯ç”±æ¡ä»¶ï¼Œä½†æ˜¯æ‚¨æ— æ³•å°†æµé‡è·¯ç”±åˆ°åº”ç”¨ç¨‹åºè¯·æ±‚ä¸­æŒ‡å®šçš„ç¡®åˆ‡ä½ç½®ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åŒ¹é… &lt;code&gt;*.wikipedia.org&lt;/code&gt; çš„ç›®æ ‡æµé‡ï¼Œä½†ç„¶åæ‚¨éœ€è¦å°†æµé‡è½¬å‘åˆ°å•ä¸ªæœ€ç»ˆç›®æ ‡ï¼Œä¾‹å¦‚ &lt;code&gt;en.wikipedia.org&lt;/code&gt;ã€‚å¦‚æœæœ‰å¦ä¸€ä¸ªæœåŠ¡ï¼Œä¾‹å¦‚ &lt;code&gt;anyservice.wikipedia.org&lt;/code&gt;ï¼Œå®ƒä¸æ˜¯ç”±ä¸ &lt;code&gt;en.wikipedia.org&lt;/code&gt; ç›¸åŒçš„æœåŠ¡å™¨æ‰˜ç®¡çš„ï¼Œé‚£ä¹ˆå¯¹è¯¥ä¸»æœºçš„æµé‡å°†å¤±è´¥ã€‚è¿™æ˜¯å› ä¸ºå°½ç®¡ HTTP è´Ÿè½½çš„ TLS æ¡æ‰‹ä¸­çš„ç›®æ ‡ä¸»æœºååŒ…å« &lt;code&gt;anyservice.wikipedia.org&lt;/code&gt;ï¼Œä½† &lt;code&gt;en.wikipedia.org&lt;/code&gt; æœåŠ¡å™¨å°†æ— æ³•ä¸ºè¯¥è¯·æ±‚æä¾›æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é«˜å±‚æ¬¡ä¸Šï¼Œè§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯åœ¨æ¯ä¸ªæ–°çš„ç½‘å…³è¿æ¥ä¸­æ£€æŸ¥åº”ç”¨ç¨‹åº TLS æ¡æ‰‹ä¸­çš„åŸå§‹æœåŠ¡å™¨åç§°ï¼ˆSNI æ‰©å±•ï¼‰ï¼Œå¹¶å°†å…¶ç”¨ä½œåŠ¨æ€ TCP ä»£ç†ç¦»å¼€ç½‘å…³çš„ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€šè¿‡å‡ºå£ç½‘å…³é™åˆ¶å‡ºå£æµé‡æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é”å®šå‡ºå£ç½‘å…³ï¼Œä»¥ä¾¿åªèƒ½ç”±ç½‘æ ¼å†…çš„å®¢æˆ·ç«¯ä½¿ç”¨ã€‚è¿™é€šè¿‡åœ¨åº”ç”¨ç¨‹åº sidecar å’Œç½‘å…³ä¹‹é—´å¼ºåˆ¶æ‰§è¡Œ &lt;code&gt;ISTIO_MUTUAL&lt;/code&gt;ï¼ˆmTLS å¯¹ç­‰èº«ä»½éªŒè¯ï¼‰æ¥å®ç°ã€‚è¿™æ„å‘³ç€åº”ç”¨ç¨‹åº L7 è´Ÿè½½ä¸Šå°†æœ‰ä¸¤å±‚ TLSã€‚ä¸€å±‚æ˜¯åº”ç”¨ç¨‹åºå‘èµ·çš„ç«¯åˆ°ç«¯ TLS ä¼šè¯ï¼Œç”±æœ€ç»ˆçš„è¿œç¨‹ç›®æ ‡ç»ˆæ­¢ï¼Œå¦ä¸€å±‚æ˜¯ Istio mTLS ä¼šè¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿˜è¦è®°ä½çš„ä¸€ä»¶äº‹æ˜¯ï¼Œä¸ºäº†å‡è½»ä»»ä½•æ½œåœ¨çš„åº”ç”¨ç¨‹åº pod æŸåï¼Œåº”ç”¨ç¨‹åº sidecar å’Œç½‘å…³éƒ½åº”æ‰§è¡Œä¸»æœºååˆ—è¡¨æ£€æŸ¥ã€‚è¿™æ ·ï¼Œä»»ä½•è¢«å…¥ä¾µçš„åº”ç”¨ç¨‹åº pod ä»ç„¶åªèƒ½è®¿é—®å…è®¸çš„ç›®æ ‡ï¼Œè€Œä¸èƒ½è®¿é—®æ›´å¤šå†…å®¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä½çº§åˆ«çš„-envoy-ç¼–ç¨‹æ‹¯æ•‘&#34;&gt;ä½çº§åˆ«çš„ Envoy ç¼–ç¨‹æ‹¯æ•‘&lt;/h2&gt;
&lt;p&gt;æœ€è¿‘çš„ Envoy ç‰ˆæœ¬åŒ…æ‹¬ä¸€ç§åŠ¨æ€ TCP è½¬å‘ä»£ç†è§£å†³æ–¹æ¡ˆï¼Œå®ƒä½¿ç”¨æ¯ä¸ªè¿æ¥çš„ SNI å¤´æ¥ç¡®å®šåº”ç”¨ç¨‹åºè¯·æ±‚çš„ç›®æ ‡ã€‚è™½ç„¶ Istio &lt;code&gt;VirtualService&lt;/code&gt; ä¸èƒ½é…ç½®åƒè¿™æ ·çš„ç›®æ ‡ï¼Œä½†æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ &lt;code&gt;EnvoyFilter&lt;/code&gt; æ¥æ›´æ”¹ Istio ç”Ÿæˆçš„è·¯ç”±æŒ‡ä»¤ï¼Œä»¥ä¾¿ä½¿ç”¨ SNI å¤´æ¥ç¡®å®šç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;è¦ä½¿æ‰€æœ‰è¿™äº›å·¥ä½œï¼Œæˆ‘ä»¬é¦–å…ˆé…ç½®ä¸€ä¸ªè‡ªå®šä¹‰çš„å‡ºå£ç½‘å…³æ¥ç›‘å¬å‡ºç«™æµé‡ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;DestinationRule&lt;/code&gt; å’Œ &lt;code&gt;VirtualService&lt;/code&gt;ï¼Œæˆ‘ä»¬æŒ‡ç¤ºåº”ç”¨ç¨‹åº sidecar å°†æµé‡ï¼ˆé’ˆå¯¹ä¸€ç»„é€‰å®šçš„ä¸»æœºåï¼‰è·¯ç”±åˆ°è¯¥ç½‘å…³ï¼Œä½¿ç”¨ Istio mTLSã€‚åœ¨ç½‘å…³ pod çš„ä¸€ä¾§ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸Šé¢æåˆ°çš„ &lt;code&gt;EnvoyFilter&lt;/code&gt; æ¥æ„å»º SNI è½¬å‘å™¨ï¼Œå¼•å…¥äº†å†…éƒ¨ Envoy ç›‘å¬å™¨å’Œé›†ç¾¤ï¼Œä»¥ä½¿å…¶å…¨éƒ¨å·¥ä½œã€‚æœ€åï¼Œæˆ‘ä»¬å°†ç½‘å…³å®ç°çš„ TCP ä»£ç†çš„å†…éƒ¨ç›®æ ‡è¡¥ä¸åˆ°å†…éƒ¨ SNI è½¬å‘å™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹å›¾è¡¨æ˜¾ç¤ºäº†ç«¯åˆ°ç«¯è¯·æ±‚æµç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å…·æœ‰ä»»æ„åŸŸåçš„å‡ºå£-sni-è·¯ç”±&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å…·æœ‰ä»»æ„åŸŸåçš„å‡ºå£ SNI è·¯ç”±&#34; srcset=&#34;
               /blog/istio-egress-sni/egress-sni-flow_hu5023763245599160818.webp 400w,
               /blog/istio-egress-sni/egress-sni-flow_hu12996239380068762831.webp 760w,
               /blog/istio-egress-sni/egress-sni-flow_hu16568293932530643267.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/istio-egress-sni/egress-sni-flow_hu5023763245599160818.webp&#34;
               width=&#34;709&#34;
               height=&#34;760&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å…·æœ‰ä»»æ„åŸŸåçš„å‡ºå£ SNI è·¯ç”±
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;éƒ¨ç½²ç¤ºä¾‹&#34;&gt;éƒ¨ç½²ç¤ºä¾‹&lt;/h2&gt;
&lt;p&gt;è¦éƒ¨ç½²ç¤ºä¾‹é…ç½®ï¼Œé¦–å…ˆåˆ›å»º &lt;code&gt;istio-egress&lt;/code&gt; å‘½åç©ºé—´ï¼Œç„¶åä½¿ç”¨ä»¥ä¸‹ YAML éƒ¨ç½²ä¸€ä¸ªå‡ºå£ç½‘å…³ï¼Œä»¥åŠä¸€äº› RBAC å’Œå…¶ &lt;code&gt;Service&lt;/code&gt;ã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ç½‘å…³æ³¨å…¥æ–¹æ³•åˆ›å»ºç½‘å…³ã€‚æ ¹æ®æ‚¨çš„å®‰è£…æ–¹æ³•ï¼Œæ‚¨å¯èƒ½å¸Œæœ›ä»¥ä¸åŒçš„æ–¹å¼éƒ¨ç½²å®ƒï¼ˆä¾‹å¦‚ï¼Œä½¿ç”¨ &lt;code&gt;IstioOperator&lt;/code&gt; CR æˆ–ä½¿ç”¨ Helmï¼‰ã€‚&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-yaml&#34; data-lang=&#34;yaml&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;c&#34;&gt;# å°† egressgateway æ”¾å…¥ Service æ³¨å†Œä¸­çš„æ–° k8s é›†ç¾¤æœåŠ¡ï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åº sidecar å¯ä»¥åœ¨ç½‘æ ¼å†…å°†æµé‡è·¯ç”±åˆ°å®ƒã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Service&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;type&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ClusterIP&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;ports&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;port&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;tls-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;targetPort&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;8443&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# ä½¿ç”¨æ³¨å…¥æ–¹æ³•éƒ¨ç½²ç½‘å…³&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;apps/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Deployment&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;selector&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;matchLabels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;template&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;annotations&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;inject.istio.io/templates&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;gateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;labels&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;egressgateway&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;sidecar.istio.io/inject&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;true&amp;#34;&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;    &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;spec&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;containers&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;      &lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-proxy&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;image&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;auto&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# æ¯æ¬¡ pod å¯åŠ¨æ—¶éƒ½ä¼šè‡ªåŠ¨æ›´æ–°é•œåƒã€‚&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;        &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;securityContext&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;capabilities&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;drop&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;            &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;ALL&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runAsUser&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1337&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;          &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;runAsGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;m&#34;&gt;1337&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;c&#34;&gt;# è®¾ç½®è§’è‰²ä»¥å…è®¸è¯»å– TLS å‡­æ®&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Role&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egressgateway-sds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;rules&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;apiGroups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;secrets&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;get&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;watch&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;list&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;apiGroups&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;security.openshift.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resourceNames&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;anyuid&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;resources&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;securitycontextconstraints&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;verbs&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;- &lt;span class=&#34;l&#34;&gt;use&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nn&#34;&gt;---&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiVersion&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io/v1&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;RoleBinding&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;metadata&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egressgateway-sds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;namespace&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egress&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;roleRef&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;apiGroup&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;rbac.authorization.k8s.io&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;Role&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;istio-egressgateway-sds&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;subjects&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;&lt;/span&gt;- &lt;span class=&#34;nt&#34;&gt;kind&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;ServiceAccount&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;w&#34;&gt;  &lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt;&lt;span class=&#34;w&#34;&gt; &lt;/span&gt;&lt;span class=&#34;l&#34;&gt;default&lt;/span&gt;&lt;span class=&#34;w&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;éªŒè¯ &lt;code&gt;istiod&lt;/code&gt; å’Œç½‘å…³æ—¥å¿—æ˜¯å¦å­˜åœ¨ä»»ä½•é”™è¯¯æˆ–è­¦å‘Šã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨çš„ç½‘æ ¼ sidecar ç°åœ¨æ­£åœ¨å°† &lt;code&gt;*.wikipedia.org&lt;/code&gt; è¯·æ±‚è·¯ç”±åˆ°æ‚¨çš„ç½‘å…³ podï¼Œè€Œç½‘å…³ pod ç„¶åå°†å®ƒä»¬è½¬å‘åˆ°åº”ç”¨ç¨‹åºè¯·æ±‚ä¸­æŒ‡å®šçš„ç¡®åˆ‡è¿œç¨‹ä¸»æœºã€‚&lt;/p&gt;
&lt;h2 id=&#34;è¯•ä¸€ä¸‹&#34;&gt;è¯•ä¸€ä¸‹&lt;/h2&gt;
&lt;p&gt;ä¸å…¶ä»– Istio å‡ºå£ç¤ºä¾‹ä¸€æ ·ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ &lt;a href=&#34;https://github.com/istio/istio/tree/release-1.20/samples/sleep&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;sleep&lt;/a&gt; pod ä½œä¸ºå‘é€è¯·æ±‚çš„æµ‹è¯•æºã€‚å‡è®¾åœ¨æ‚¨çš„é»˜è®¤å‘½åç©ºé—´ä¸­å¯ç”¨äº†è‡ªåŠ¨ sidecar æ³¨å…¥ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤éƒ¨ç½²æµ‹è¯•åº”ç”¨ç¨‹åºï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl apply -f https://raw.githubusercontent.com/istio/istio/release-1.20/samples/sleep/sleep.yaml
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è·å–æ‚¨çš„ sleep å’Œç½‘å…³ podsï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;SOURCE_POD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get pod -l &lt;span class=&#34;nv&#34;&gt;app&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;sleep -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;={&lt;/span&gt;.items..metadata.name&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ &lt;span class=&#34;nb&#34;&gt;export&lt;/span&gt; &lt;span class=&#34;nv&#34;&gt;GATEWAY_POD&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;$(&lt;/span&gt;kubectl get pod -n istio-egress -l &lt;span class=&#34;nv&#34;&gt;istio&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;=&lt;/span&gt;egressgateway -o &lt;span class=&#34;nv&#34;&gt;jsonpath&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;={&lt;/span&gt;.items..metadata.name&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿è¡Œä»¥ä¸‹å‘½ä»¤ä»¥ç¡®è®¤æ‚¨èƒ½å¤Ÿè¿æ¥åˆ° &lt;code&gt;wikipedia.org&lt;/code&gt; ç½‘ç«™ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$SOURCE_POD&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -c sleep -- sh -c &lt;span class=&#34;s1&#34;&gt;&amp;#39;curl -s https://en.wikipedia.org/wiki/Main_Page | grep -o &amp;#34;&amp;lt;title&amp;gt;.*&amp;lt;/title&amp;gt;&amp;#34;; curl -s https://de.wikipedia.org/wiki/Wikipedia:Hauptseite | grep -o &amp;#34;&amp;lt;title&amp;gt;.*&amp;lt;/title&amp;gt;&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;title&amp;gt;Wikipedia, the free encyclopedia&amp;lt;/title&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;title&amp;gt;Wikipedia â€“ Die freie EnzyklopÃ¤die&amp;lt;/title&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥è®¿é—®è‹±è¯­å’Œå¾·è¯­çš„ &lt;code&gt;wikipedia.org&lt;/code&gt; å­åŸŸåï¼Œéå¸¸æ£’ï¼&lt;/p&gt;
&lt;p&gt;é€šå¸¸ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæˆ‘ä»¬ä¼š&lt;a href=&#34;https://istio.io/latest/docs/tasks/traffic-management/egress/egress-control/#change-to-the-blocking-by-default-policy&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é˜»æ­¢æœªç»é…ç½®çš„å¤–éƒ¨è¯·æ±‚&lt;/a&gt;ï¼Œè¿™äº›è¯·æ±‚æœªç»è¿‡å‡ºå£ç½‘å…³é‡å®šå‘ã€‚ä½†ç”±äºæˆ‘ä»¬åœ¨æµ‹è¯•ç¯å¢ƒä¸­æ²¡æœ‰è¿™æ ·åšï¼Œè®©æˆ‘ä»¬è®¿é—®å¦ä¸€ä¸ªå¤–éƒ¨ç«™ç‚¹è¿›è¡Œæ¯”è¾ƒï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl &lt;span class=&#34;nb&#34;&gt;exec&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt;&lt;span class=&#34;nv&#34;&gt;$SOURCE_POD&lt;/span&gt;&lt;span class=&#34;s2&#34;&gt;&amp;#34;&lt;/span&gt; -c sleep -- sh -c &lt;span class=&#34;s1&#34;&gt;&amp;#39;curl -s https://cloud.ibm.com/login | grep -o &amp;#34;&amp;lt;title&amp;gt;.*&amp;lt;/title&amp;gt;&amp;#34;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&amp;lt;title&amp;gt;IBM Cloud&amp;lt;/title&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;ç”±äºæˆ‘ä»¬åœ¨æ¸…å•ä¸­å…¨å±€å¯ç”¨äº†è®¿é—®æ—¥å¿—è®°å½•ï¼ˆä½¿ç”¨ &lt;code&gt;Telemetry&lt;/code&gt; CRï¼‰ï¼Œæˆ‘ä»¬ç°åœ¨å¯ä»¥æ£€æŸ¥æ—¥å¿—ä»¥æŸ¥çœ‹ä»£ç†å¦‚ä½•å¤„ç†ä¸Šè¿°è¯·æ±‚ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼Œæ£€æŸ¥ç½‘å…³æ—¥å¿—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl logs -n istio-egress &lt;span class=&#34;nv&#34;&gt;$GATEWAY_POD&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;...&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:52.798Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;813&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;111152&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;55&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;185.15.59.224:443&amp;#34;&lt;/span&gt; dynamic_forward_proxy_cluster 172.17.5.170:48262 envoy://sni_listener/ envoy://internal_client_address/ en.wikipedia.org -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:52.798Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1531&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;111950&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;55&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;envoy://sni_listener/&amp;#34;&lt;/span&gt; sni_cluster envoy://internal_client_address/ 172.17.5.170:8443 172.17.34.35:55102 outbound_.443_.wildcard_.egressgateway.istio-egress.svc.cluster.local -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:53.000Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;821&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;92848&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;49&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;185.15.59.224:443&amp;#34;&lt;/span&gt; dynamic_forward_proxy_cluster 172.17.5.170:48278 envoy://sni_listener/ envoy://internal_client_address/ de.wikipedia.org -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:53.000Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;1539&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;93646&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;50&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;envoy://sni_listener/&amp;#34;&lt;/span&gt; sni_cluster envoy://internal_client_address/ 172.17.5.170:8443 172.17.34.35:55108 outbound_.443_.wildcard_.egressgateway.istio-egress.svc.cluster.local -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;è¿™é‡Œæœ‰å››æ¡æ—¥å¿—æ¡ç›®ï¼Œä»£è¡¨æˆ‘ä»¬ä¸‰ä¸ª curl è¯·æ±‚ä¸­çš„ä¸¤ä¸ªã€‚æ¯ä¸€å¯¹æ˜¾ç¤ºäº†å•ä¸ªè¯·æ±‚å¦‚ä½•é€šè¿‡ envoy æµé‡å¤„ç†ç®¡é“æµåŠ¨ã€‚å®ƒä»¬ä»¥ç›¸åçš„é¡ºåºæ‰“å°ï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç¬¬ 2 å’Œç¬¬ 4 è¡Œæ˜¾ç¤ºè¯·æ±‚åˆ°è¾¾äº†ç½‘å…³æœåŠ¡ï¼Œå¹¶é€šè¿‡å†…éƒ¨çš„ &lt;code&gt;sni_cluster&lt;/code&gt; ç›®æ ‡ã€‚ç¬¬ 1 å’Œç¬¬ 3 è¡Œæ˜¾ç¤ºæœ€ç»ˆç›®æ ‡æ˜¯ä»å†…éƒ¨ SNI å¤´ä¸­ç¡®å®šçš„ï¼Œå³åº”ç”¨ç¨‹åºè®¾ç½®çš„ç›®æ ‡ä¸»æœºã€‚è¯·æ±‚å°†è½¬å‘åˆ° &lt;code&gt;dynamic_forward_proxy_cluster&lt;/code&gt;ï¼Œæœ€ç»ˆä» Envoy å‘é€åˆ°è¿œç¨‹ç›®æ ‡ã€‚&lt;/p&gt;
&lt;p&gt;å¾ˆå¥½ï¼Œä½†æ˜¯ç¬¬ä¸‰ä¸ªè¯·æ±‚åˆ° IBM Cloud åœ¨å“ªé‡Œï¼Ÿè®©æˆ‘ä»¬æ£€æŸ¥ sidecar çš„æ—¥å¿—ï¼š&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre tabindex=&#34;0&#34; class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;$ kubectl logs &lt;span class=&#34;nv&#34;&gt;$SOURCE_POD&lt;/span&gt; -c istio-proxy
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;...&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:52.793Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;813&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;111152&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;61&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.17.5.170:8443&amp;#34;&lt;/span&gt; outbound&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;443&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;wildcard&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;egressgateway.istio-egress.svc.cluster.local 172.17.34.35:55102 208.80.153.224:443 172.17.34.35:37020 en.wikipedia.org -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:52.994Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;821&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;92848&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;55&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;172.17.5.170:8443&amp;#34;&lt;/span&gt; outbound&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;443&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;wildcard&lt;span class=&#34;p&#34;&gt;|&lt;/span&gt;egressgateway.istio-egress.svc.cluster.local 172.17.34.35:55108 208.80.153.224:443 172.17.34.35:37030 de.wikipedia.org -
&lt;/span&gt;&lt;/span&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;cl&#34;&gt;&lt;span class=&#34;o&#34;&gt;[&lt;/span&gt;2023-11-24T13:21:55.197Z&lt;span class=&#34;o&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;- - -&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;0&lt;/span&gt; - - - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;805&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;15199&lt;/span&gt; &lt;span class=&#34;m&#34;&gt;158&lt;/span&gt; - &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;-&amp;#34;&lt;/span&gt; &lt;span class=&#34;s2&#34;&gt;&amp;#34;104.102.54.251:443&amp;#34;&lt;/span&gt; PassthroughCluster 172.17.34.35:45584 104.102.54.251:443 172.17.34.35:45582 cloud.ibm.com -
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;æ­£å¦‚æ‚¨æ‰€çœ‹åˆ°çš„ï¼ŒWikipedia è¯·æ±‚é€šè¿‡ç½‘å…³å‘é€ï¼Œè€Œå¯¹ IBM Cloud çš„è¯·æ±‚ç›´æ¥ä»åº”ç”¨ç¨‹åº pod å‘é€åˆ°äº’è”ç½‘ï¼Œå¦‚ &lt;code&gt;PassthroughCluster&lt;/code&gt; æ—¥å¿—æ‰€ç¤ºã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“è®º&#34;&gt;ç»“è®º&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬ä½¿ç”¨å‡ºå£ç½‘å…³å®ç°äº†å¯¹ egress HTTPS/TLS æµé‡çš„å—æ§è·¯ç”±ï¼Œæ”¯æŒä»»æ„å’Œé€šé…ç¬¦&lt;/p&gt;
&lt;p&gt;åŸŸåã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ¬æ–‡ä¸­æ˜¾ç¤ºçš„ç¤ºä¾‹å°†æ‰©å±•ä»¥æ”¯æŒé«˜å¯ç”¨æ€§è¦æ±‚ï¼ˆä¾‹å¦‚ï¼Œæ·»åŠ åŒºåŸŸæ„ŸçŸ¥ç½‘å…³ &lt;code&gt;Deployment&lt;/code&gt; ç­‰ï¼‰ï¼Œå¹¶é™åˆ¶æ‚¨çš„åº”ç”¨ç¨‹åºç›´æ¥è®¿é—®å¤–éƒ¨ç½‘ç»œï¼Œä»¥ä¾¿åº”ç”¨ç¨‹åºåªèƒ½é€šè¿‡ç½‘å…³è®¿é—®å…¬å…±ç½‘ç»œï¼Œè€Œè¯¥ç½‘å…³ä»…é™äºä¸€ç»„é¢„å®šä¹‰çš„è¿œç¨‹ä¸»æœºåã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¾ˆå®¹æ˜“æ‰©å±•ã€‚æ‚¨å¯ä»¥åœ¨é…ç½®ä¸­åŒ…å«å¤šä¸ªåŸŸåï¼Œå¹¶ä¸”ä¸€æ—¦éƒ¨ç½²ï¼Œå®ƒä»¬å°†è¢«åˆ—å…¥å…è®¸åˆ—è¡¨ï¼æ— éœ€ä¸ºæ¯ä¸ªåŸŸåé…ç½® &lt;code&gt;VirtualService&lt;/code&gt; æˆ–å…¶ä»–è·¯ç”±è¯¦ç»†ä¿¡æ¯ã€‚ä½†æ˜¯ï¼Œè¯·æ³¨æ„ï¼ŒåŸŸååœ¨é…ç½®ä¸­çš„å¤šä¸ªåœ°æ–¹åˆ—å‡ºã€‚å¦‚æœä½¿ç”¨ CI/CD å·¥å…·ï¼ˆä¾‹å¦‚ Kustomizeï¼‰ï¼Œæœ€å¥½å°†åŸŸååˆ—è¡¨æå–åˆ°ä¸€ä¸ªåœ°æ–¹ï¼Œä»¥ä»ä¸­å‘ˆç°æ‰€éœ€çš„é…ç½®èµ„æºã€‚&lt;/p&gt;
&lt;p&gt;å°±æ˜¯è¿™æ ·äº†ï¼å¸Œæœ›è¿™å¯¹æ‚¨æœ‰æ‰€å¸®åŠ©ã€‚å¦‚æœæ‚¨æ˜¯ä¹‹å‰ä½¿ç”¨ Nginx çš„è§£å†³æ–¹æ¡ˆçš„ç°æœ‰ç”¨æˆ·ï¼Œç°åœ¨å¯ä»¥åœ¨å‡çº§åˆ° Istio 1.20 ä¹‹å‰è¿ç§»åˆ°æ­¤æ–¹æ³•ï¼Œå¦åˆ™ä¼šå½±å“æ‚¨å½“å‰çš„è®¾ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ç¥æ‚¨æ„‰å¿«çš„ SNI è·¯ç”±ï¼&lt;/p&gt;
&lt;h2 id=&#34;å‚è€ƒèµ„æ–™&#34;&gt;å‚è€ƒèµ„æ–™&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/configuration/listeners/network_filters/sni_dynamic_forward_proxy_filter&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Envoy å¯¹äº SNI è½¬å‘å™¨çš„æ–‡æ¡£&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://archive.istio.io/v1.13/docs/tasks/traffic-management/egress/wildcard-egress-hosts/#wildcard-configuration-for-arbitrary-domains&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å…ˆå‰çš„è§£å†³æ–¹æ¡ˆï¼Œä½¿ç”¨ Nginx ä½œä¸ºç½‘å…³ä¸­çš„ SNI ä»£ç†å®¹å™¨&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
    <item>
      <title>Ciilium çš„ç›¸äº’è®¤è¯å¦‚ä½•å±åŠå®‰å…¨</title>
      <link>https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/</link>
      <pubDate>Fri, 01 Dec 2023 10:33:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://thenewstack.io/how-ciliums-mutual-authentication-can-compromise-security/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://thenewstack.io/how-ciliums-mutual-authentication-can-compromise-security/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;æ‘˜è¦ï¼šè¿™ç¯‡æ–‡ç« æ˜¯å…³äºå¦‚ä½•ä½¿ç”¨ Cilium æ¥å®ç° äº’ç›¸è®¤è¯ (mTLS) çš„ï¼Œä»¥åŠè¿™ç§æ–¹æ³•å¯èƒ½å¸¦æ¥çš„å®‰å…¨é—®é¢˜ã€‚æ–‡ç« ä»‹ç»äº† Cilium çš„ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼Œä»¥åŠå¦‚ä½•ä½¿ç”¨ Cilium CLI æˆ– Hubble UI æ¥åˆ›å»ºå’Œç®¡ç†è¯ä¹¦å’Œç­–ç•¥ã€‚æ–‡ç« è¿˜åˆ†æäº† Cilium çš„äº’ç›¸è®¤è¯çš„å±€é™å’Œé£é™©ï¼Œä¾‹å¦‚è¯ä¹¦è¿‡æœŸï¼Œæ’¤é”€ï¼Œæ³„éœ²å’Œä¼ªé€ ç­‰ã€‚æ–‡ç« çš„ç›®çš„æ˜¯å¸®åŠ©ç”¨æˆ·äº†è§£å’Œä½¿ç”¨ Cilium æ¥æé«˜æœåŠ¡é—´çš„å®‰å…¨æ€§ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;æœ€è¿‘ï¼ŒCilium é¡¹ç›®å®£å¸ƒæ”¯æŒä¸€ç§&lt;a href=&#34;https://docs.cilium.io/en/latest/network/servicemesh/mutual-authentication/mutual-authentication/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ–°çš„åŒå‘è®¤è¯æœºåˆ¶&lt;/a&gt;ï¼Œå¯ä»¥é€šè¿‡ç®€å•çš„é…ç½®æ ‡å¿—é€æ˜åœ°éƒ¨ç½²åˆ°åº”ç”¨ç¨‹åºä¸­ã€‚ä»è¡¨é¢ä¸Šçœ‹ï¼Œè¿™ä¼¼ä¹æ˜¯ä¸€ç§ç®€å•çš„æ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨ Cilium ä¸º Kubernetes å·¥ä½œè´Ÿè½½å®ç°æœåŠ¡ä¹‹é—´çš„åŒå‘è®¤è¯ã€‚ç„¶è€Œï¼Œè¿™ç§è®¾è®¡å­˜åœ¨ä¸€ä¸ªä¸¥é‡çš„ç¼ºé™·ï¼Œä¸å®¹å¿½è§†ï¼š&lt;/p&gt;
&lt;p&gt;Cilium ä¸­çš„åŒå‘è®¤è¯çš„æ•´ä¸ªåŸºç¡€æ˜¯&lt;em&gt;æœ€ç»ˆä¸€è‡´æ€§&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å®‰å…¨å®ç°çš„æ•°æ®è·¯å¾„ä¸­ï¼Œæœ€ç»ˆä¸€è‡´æ€§å¯èƒ½å¯¼è‡´æ„å›¾ä¸­çš„å®‰å…¨å±æ€§å¤±è´¥ï¼Œå¹¶ä¸”å¯èƒ½å¯¼è‡´åœ¨ä¸åº”è¯¥å…è®¸çš„æƒ…å†µä¸‹æœåŠ¡ä¹‹é—´çš„æµé‡ç»§ç»­ä¼ é€’ã€‚&lt;/p&gt;
&lt;h2 id=&#34;cilium-åŒå‘è®¤è¯çš„å·¥ä½œåŸç†&#34;&gt;Cilium åŒå‘è®¤è¯çš„å·¥ä½œåŸç†&lt;/h2&gt;
&lt;p&gt;Cilium çš„è‡ªå®šä¹‰åŒå‘è®¤è¯æœºåˆ¶ä¼šé€æ˜åœ°å¯¹æœåŠ¡ä¹‹é—´çš„æµè¿›è¡Œèº«ä»½éªŒè¯ï¼Œå¹¶æ„å»ºåœ¨ Cilium çš„ç°æœ‰æ‰©å±•ä¼¯å…‹åˆ©æ•°æ®åŒ…è¿‡æ»¤å™¨ï¼ˆ&lt;a href=&#34;https://thenewstack.io/ebpf-offers-a-new-way-to-secure-cloud-native-systems/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;eBPF&lt;/a&gt;ï¼‰æ•°æ®å¹³é¢ä¹‹ä¸Šã€‚Cilium ä½¿ç”¨ eBPF æ¥å®ç°è¯¸å¦‚æœåŠ¡ç½‘ç»œã€ç½‘ç»œç­–ç•¥å’Œè¿æ¥å¤„ç†ç­‰åŠŸèƒ½ã€‚&lt;/p&gt;
&lt;p&gt;Cilium ä½¿ç”¨â€œæ— åŒå‘ä¼ è¾“å±‚å®‰å…¨ï¼ˆmTLS-lessï¼‰â€ï¼ˆæˆ– mTLessï¼‰æ¥å¯¹æœåŠ¡è¿›è¡Œèº«ä»½éªŒè¯ã€‚æˆ‘ç§°ä¹‹ä¸ºâ€œlessâ€ï¼Œå› ä¸ºå®ƒæ²¡æœ‰ä½¿ç”¨ mTLS æ¥å®Œæˆ mTLS è®¾è®¡çš„ä»»åŠ¡ï¼šéªŒè¯ã€åŠ å¯†å’Œæ£€æŸ¥åœ¨ä¸¤ä¸ªå¯¹ç­‰æ–¹ä¹‹é—´ä¼ è¾“çš„æ•°æ®çš„å®Œæ•´æ€§ã€‚Cilium çš„åŒå‘è®¤è¯å®ç°&lt;em&gt;ä¸æ˜¯ mTLS&lt;/em&gt;ï¼Œæˆ‘å°†åœ¨ä¸‹é¢è§£é‡Šã€‚&lt;/p&gt;
&lt;p&gt;å½“æœåŠ¡ï¼ˆæˆ– Podï¼‰A æƒ³è¦ä¸æœåŠ¡ï¼ˆæˆ– Podï¼‰B é€šä¿¡æ—¶ï¼ŒCilium ä¼šå°è¯•å¯¹è¿™ä¸¤ä¸ªå¯¹ç­‰æ–¹è¿›è¡Œèº«ä»½éªŒè¯ï¼Œç„¶åæ ‡è®°ä¸€ä¸ªç‰¹æ®Šçš„æœ¬åœ°èŠ‚ç‚¹â€œèº«ä»½éªŒè¯ç¼“å­˜â€ï¼ŒæŒ‡ç¤ºæ˜¯å¦å…è®¸ç‰¹å®šæµã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-1ç”±äºæœªç»èº«ä»½éªŒè¯è€Œä¸¢å¼ƒçš„åˆå§‹è¿æ¥&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 1ï¼šç”±äºæœªç»èº«ä»½éªŒè¯è€Œä¸¢å¼ƒçš„åˆå§‹è¿æ¥ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f1_hu9728721819287716679.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f1_hu8515282394999911504.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f1_hu15339383418986846698.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f1_hu9728721819287716679.webp&#34;
               width=&#34;760&#34;
               height=&#34;293&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 1ï¼šç”±äºæœªç»èº«ä»½éªŒè¯è€Œä¸¢å¼ƒçš„åˆå§‹è¿æ¥ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å½“ Pod A æƒ³è¦ä¸ Pod B é€šä¿¡æ—¶ï¼Œå®ƒä¼šé€šè¿‡æ­£å¸¸çš„ Cilium eBPF æ•°æ®å¹³é¢æµåŠ¨ï¼Œä½† eBPF ä»£ç ä¼šæ£€æŸ¥è¯¥è¿æ¥æ˜¯å¦å·²é€šè¿‡æ£€æŸ¥æœ¬åœ°èŠ‚ç‚¹èº«ä»½éªŒè¯ç¼“å­˜è¿›è¡Œèº«ä»½éªŒè¯ã€‚åœ¨ç¬¬ä¸€æ¬¡å°è¯•æ—¶ï¼Œè¯¥è°ƒç”¨å°†ä¸ä¼šå¾—åˆ°èº«ä»½éªŒè¯ï¼Œå› æ­¤&lt;a href=&#34;https://github.com/cilium/cilium/issues/23808&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Cilium å°†ä¸¢å¼ƒæ•°æ®åŒ…&lt;/a&gt;ã€‚ä½†è¿™å°†è§¦å‘ä¸€ä¸ªåœ¨å¹•åè¿›è¡Œçš„æœºåˆ¶ï¼Œå°è¯•å¯¹ Pod A å’Œ Pod B ä¹‹é—´çš„æµè¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœæˆåŠŸï¼Œå®ƒå°†æ›´æ–°æœ¬åœ°èŠ‚ç‚¹èº«ä»½éªŒè¯ç¼“å­˜ã€‚&lt;/p&gt;
&lt;p&gt;æœŸæœ›çš„æ˜¯ï¼Œåœ¨å¹•åçš„æœºåˆ¶èƒ½å¤Ÿå¿«é€Ÿè¿›è¡Œ Pod A å‘¼å« Pod B çš„èº«ä»½éªŒè¯ï¼Œä»¥ä¾¿æœ€åˆä¸¢å¼ƒçš„æ•°æ®åŒ…å°†è¢«é‡è¯•ï¼Œä¸ä¼šå¯¼è‡´å¤ªå¤šå»¶è¿Ÿã€‚åœ¨å¹•åä½¿ç”¨çš„æœºåˆ¶æ˜¯ä»è¿è¡Œåœ¨ Pod B æ‰€åœ¨èŠ‚ç‚¹ä¸Šçš„ cilium-agentï¼ˆä½¿ç”¨&lt;a href=&#34;https://roadmap.sh/golang&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Go&lt;/a&gt;ç¼–å†™ï¼‰åˆ°å¦ä¸€ä¸ª cilium-agent çš„â€œmTLessâ€è¿æ¥ã€‚æ‰€æœ‰è¿™äº›éƒ½ä¸ä¼šåœ¨ eBPF æ•°æ®å¹³é¢ä¸­å‘ç”Ÿï¼Œè€Œæ˜¯åœ¨ç”¨æˆ·ç©ºé—´çš„ Cilium ä»£ç†ä¸­è¿›è¡Œã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-2å¦‚æœä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ä¸Šè¿è¡Œçš„-cilium-agent-ä¹‹é—´çš„-mtls-è¿æ¥æˆåŠŸåˆ™è®¤ä¸ºæµæ˜¯ç»è¿‡èº«ä»½éªŒè¯çš„&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 2ï¼šå¦‚æœä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ cilium-agent ä¹‹é—´çš„ mTLS è¿æ¥æˆåŠŸï¼Œåˆ™è®¤ä¸ºæµæ˜¯ç»è¿‡èº«ä»½éªŒè¯çš„ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f2_hu10070661624759929293.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f2_hu16286326383952627814.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f2_hu17409430451658380993.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f2_hu10070661624759929293.webp&#34;
               width=&#34;760&#34;
               height=&#34;380&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 2ï¼šå¦‚æœä¸¤ä¸ªä¸åŒèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ cilium-agent ä¹‹é—´çš„ mTLS è¿æ¥æˆåŠŸï¼Œåˆ™è®¤ä¸ºæµæ˜¯ç»è¿‡èº«ä»½éªŒè¯çš„ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘å°†è¿™ä¸ªè¿æ¥ç§°ä¸ºâ€œmTLessâ€ï¼Œå› ä¸ºå®ƒç”¨äºæµ‹è¯•èº«ä»½éªŒè¯å¹¶ç«‹å³å…³é—­ï¼Œå¹¶ä¸”æ‰€æœ‰ç”¨äºåŠ å¯†å’Œå®Œæ•´æ€§çš„åå•†çš„ä¼šè¯å¯†é’¥éƒ½ä¼šè¢«ä¸¢å¼ƒã€‚ä¹Ÿå°±æ˜¯è¯´ï¼ŒCilium ä¸ä¼šåœ¨è¿æ¥çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…ä¿ç•™ mTLS å®‰å…¨å±æ€§ï¼›å®ƒåªä½¿ç”¨æ¡æ‰‹çš„èº«ä»½éªŒè¯éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-3åœ¨æ¡æ‰‹åcilium-ç»ˆæ­¢-mtless-è¿æ¥&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 3ï¼šåœ¨æ¡æ‰‹åï¼ŒCilium ç»ˆæ­¢ mTLess è¿æ¥ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f3_hu5450890929644243593.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f3_hu5078158644050773506.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f3_hu1911652993401268773.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f3_hu5450890929644243593.webp&#34;
               width=&#34;760&#34;
               height=&#34;284&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 3ï¼šåœ¨æ¡æ‰‹åï¼ŒCilium ç»ˆæ­¢ mTLess è¿æ¥ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;å¦‚æœæ­¤ mTLess è¿æ¥æˆåŠŸï¼ˆå³æ¡æ‰‹æˆåŠŸï¼‰ï¼ŒCilium å°†è€ƒè™‘å°†æ¥è‡ª Pod A åˆ° Pod B çš„æµç¨‹è§†ä¸ºâ€œå·²éªŒè¯â€ã€‚æ­¤æ—¶ï¼Œæœ¬åœ°èŠ‚ç‚¹èº«ä»½éªŒè¯ç¼“å­˜ä¸­çš„æ¡ç›®å°†è¢«æ›´æ–°ï¼Œä»¥æŒ‡ç¤ºåº”å…è®¸æ¥è‡ª Pod A åˆ° Pod B çš„æµç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-4cilium-æ›´æ–°èº«ä»½éªŒè¯ç¼“å­˜æŒ‡ç¤º-pod-a-å…·æœ‰å‘¼å«-pod-b-çš„èº«ä»½éªŒè¯&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 4ï¼šCilium æ›´æ–°èº«ä»½éªŒè¯ç¼“å­˜ï¼ŒæŒ‡ç¤º Pod A å…·æœ‰å‘¼å« Pod B çš„èº«ä»½éªŒè¯ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f4_hu10284544887028446734.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f4_hu8173082787676185549.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f4_hu3459960760797016323.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f4_hu10284544887028446734.webp&#34;
               width=&#34;760&#34;
               height=&#34;329&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 4ï¼šCilium æ›´æ–°èº«ä»½éªŒè¯ç¼“å­˜ï¼ŒæŒ‡ç¤º Pod A å…·æœ‰å‘¼å« Pod B çš„èº«ä»½éªŒè¯ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ç°åœ¨ï¼Œå½“å®ƒé‡è¯•è¿æ¥æ•°æ®åŒ…æ—¶ï¼Œèº«ä»½éªŒè¯ç¼“å­˜å°†æŒ‡ç¤ºæµç¨‹å·²ç»é€šè¿‡èº«ä»½éªŒè¯ï¼Œåº”å…è®¸è¿æ¥å¹¶ç»§ç»­ eBPF æ•°æ®å¹³é¢çš„å…¶ä½™éƒ¨åˆ†ï¼ˆè¯¥éƒ¨åˆ†å¼ºåˆ¶æ‰§è¡Œç½‘ç»œå’Œå…¶ä»–ç­–ç•¥ï¼‰ã€‚è¿™ä¸ªæœ¬åœ°èŠ‚ç‚¹èº«ä»½éªŒè¯ç¼“å­˜ç¡®å®è¡¨ç°å‡ºæœ€ç»ˆä¸€è‡´æ€§çš„è¿¹è±¡ï¼Œå¯èƒ½ä¼šå¤±å»åŒæ­¥ï¼Œä½†è¿™å¹¶ä¸æ˜¯æœ€ä»¤äººæ‹…å¿§çš„æœ€ç»ˆä¸€è‡´æ€§å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-5ä¸€æ—¦ç¼“å­˜å·²æ›´æ–°å¹¶é‡è¯•æ•°æ®åŒ…è¿æ¥å°†ä¼šæµåŠ¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 5ï¼šä¸€æ—¦ç¼“å­˜å·²æ›´æ–°å¹¶é‡è¯•æ•°æ®åŒ…ï¼Œè¿æ¥å°†ä¼šæµåŠ¨ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f5_hu8875700578379452926.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f5_hu16400022754917321780.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f5_hu8750530588956005851.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f5_hu8875700578379452926.webp&#34;
               width=&#34;760&#34;
               height=&#34;267&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 5ï¼šä¸€æ—¦ç¼“å­˜å·²æ›´æ–°å¹¶é‡è¯•æ•°æ®åŒ…ï¼Œè¿æ¥å°†ä¼šæµåŠ¨ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;cilium-æ–¹æ³•çš„ä¸»è¦é—®é¢˜&#34;&gt;Cilium æ–¹æ³•çš„ä¸»è¦é—®é¢˜&lt;/h2&gt;
&lt;p&gt;å¯¹äºçœŸæ­£çš„ mTLS è¿æ¥ï¼Œåœ¨æˆåŠŸæ¡æ‰‹ä¹‹åï¼Œæ‚¨å¸Œæœ›ä½¿ç”¨åœ¨å‚ä¸å„æ–¹ä¹‹é—´åå•†çš„å¯†é’¥æ¥åŠ å¯†å‰©ä½™çš„æ•°æ®ã€‚Cilium ä¸­æµçš„æˆåŠŸè®¤è¯å¹¶ä¸æ„å‘³ç€å®ƒæ˜¯åŠ å¯†çš„ï¼ˆå®ƒå°†æ˜¯çº¯æ–‡æœ¬ï¼‰ï¼Œä¹Ÿä¸ä¿è¯æµé‡ä»¥ä¸€ç§ä»…å¯¹ç›¸å…³æ–¹å¯è§çš„æ–¹å¼è¿›è¡ŒåŠ å¯†ã€‚å¦‚æœæ‚¨éœ€è¦åŠ å¯†ï¼Œå¯ä»¥ä½¿ç”¨åŸºäº WireGuardï¼ˆæˆ– IPSecï¼‰çš„ Cilium åŠ å¯†é€‰é¡¹ï¼Œä½†è¿™åªæ˜¯ä¸¤ä¸ª Kubernetes èŠ‚ç‚¹ä¹‹é—´çš„åŠ å¯†ï¼Œè€Œä¸æ˜¯ç‰¹å®šçš„å·²è®¤è¯çš„å·¥ä½œè´Ÿè½½ã€‚åœ¨â€œmTLessâ€è¿æ¥æ£€æŸ¥å’Œå°†å®é™…ï¼ˆæ•æ„Ÿï¼‰æ•°æ®æ”¾å…¥çº¿è·¯ä¹‹é—´ï¼Œå¯èƒ½ä¼šå‘ç”Ÿå¾ˆå¤šäº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;éšç€ä¸€äº› Cilium å¼€å‘äººå‘˜ç»§ç»­è¿­ä»£è¿™ä¸ªå®ç°ï¼Œæœ‰å…³å°† mTLS è¿æ¥ä¸­åå•†çš„æŸäº›å¯†é’¥è½¬ç§»åˆ°åº•å±‚èŠ‚ç‚¹åˆ°èŠ‚ç‚¹åŠ å¯†æ–¹æ³•ï¼ˆä¾‹å¦‚ IPSecï¼‰çš„è°ˆè®ºã€‚è¿™ä¸ªå®ç°è¿˜æœ‰å¾…è§‚å¯Ÿã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-6å…·æœ‰ä¸åŒä¼šè¯å¯†é’¥çš„æµé‡&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 6ï¼šå…·æœ‰ä¸åŒä¼šè¯å¯†é’¥çš„æµé‡&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f6_hu1596331468209483764.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f6_hu12770787854073781734.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f6_hu7902297478813327711.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f6_hu1596331468209483764.webp&#34;
               width=&#34;760&#34;
               height=&#34;427&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 6ï¼šå…·æœ‰ä¸åŒä¼šè¯å¯†é’¥çš„æµé‡
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-7åŸºäº-wireguard-çš„åŠ å¯†&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 7ï¼šåŸºäº WireGuard çš„åŠ å¯†ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f7_hu18406516341919106284.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f7_hu17375687142356433346.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f7_hu16409185980720703418.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f7_hu18406516341919106284.webp&#34;
               width=&#34;760&#34;
               height=&#34;423&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 7ï¼šåŸºäº WireGuard çš„åŠ å¯†ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;Cilium æœ€ç»ˆä¸€è‡´æ€§åŒå‘è®¤è¯å®ç°çš„çœŸæ­£é—®é¢˜å‡ºç°åœ¨ Cilium çš„æ ¸å¿ƒèº«ä»½æ¨¡å‹å‘¨å›´ã€‚æˆ‘åœ¨ä¸Šé¢ç®€è¦ä»‹ç»äº† TLS æ¡æ‰‹ï¼Œä½†å¦‚æœæ‚¨é˜…è¯» Cilium æ–‡æ¡£ï¼Œæ‚¨ä¼šçœ‹åˆ°ç”¨äºâ€œmTLessâ€çš„ X509 è¯ä¹¦å…·æœ‰å¯é€‰åŸºäº&lt;a href=&#34;https://thenewstack.io/the-rise-of-workload-identity-in-cloud-native-with-spiffe-spire/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;SPIFFE&lt;/a&gt;ï¼ˆSecure Production Identity Framework For Everyoneï¼‰çš„èº«ä»½æ¨¡å‹ã€‚å®é™…ä¸Šï¼Œåœ¨éƒ¨ç½²å®ç° Cilium åŒå‘è®¤è¯æ‰€éœ€çš„ç»„ä»¶æ—¶ï¼Œæ‚¨å¯ä»¥é€‰æ‹©éƒ¨ç½² SPIFFE Runtime Environmentï¼ˆSPIREï¼‰ï¼Œè¿™æ˜¯ SPIFFE çš„ä¸€ä¸ªå®ç°ï¼ŒCilium ä½¿ç”¨å®ƒæ¥ç”Ÿæˆä»£è¡¨å·¥ä½œè´Ÿè½½åŠå…¶èº«ä»½çš„è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ª SPIFFE èº«ä»½ç”¨äºæ¡æ‰‹æ‰€ä½¿ç”¨çš„è¯ä¹¦ï¼Œ&lt;em&gt;ä½† SPIFFE ä¸æ˜¯ Cilium ä¸­ä½¿ç”¨çš„åŸºç¡€é€šç”¨å·¥ä½œè´Ÿè½½èº«ä»½&lt;/em&gt;ã€‚SPIFFE ç”¨ä½œç‹¬ç«‹çš„èº«ä»½å±‚ï¼Œæ˜ å°„åˆ° Cilium ç°æœ‰èº«ä»½å®ç°ã€‚Cilium åœ¨å…¶&lt;a href=&#34;https://doc.crds.dev/github.com/cilium/cilium/cilium.io/CiliumIdentity/v2@1.9.3&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ ¸å¿ƒèº«ä»½&lt;/a&gt;æ¦‚å¿µå‘¨å›´æ„å»ºäº†æ‰€æœ‰çš„ç½‘ç»œç­–ç•¥ã€‚CiliumIdentity å®ç°å°†ä¸€ä¸ªæ•´æ•°æ˜ å°„åˆ°ä¸€ç»„ IP åœ°å€ï¼ˆä¸ä¸€ç»„ Pod å…³è”çš„ Pod IPï¼‰ã€‚è¿™ä¸ªâ€œæ•´æ•°â€åŠå…¶æ˜ å°„åˆ° Pod IP åœ°å€çš„æ–¹å¼ä»£è¡¨äº†&lt;em&gt;Cilium ä¸­çš„æ ¸å¿ƒèº«ä»½åŸè¯­&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-8cilium-çš„æ ¸å¿ƒèº«ä»½åŸè¯­åŸºäºåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°ç¼“å­˜ä¸­æ˜ å°„åˆ°-ip-åœ°å€çš„æ•´æ•°&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 8ï¼šCilium çš„æ ¸å¿ƒèº«ä»½åŸè¯­åŸºäºåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°ç¼“å­˜ä¸­æ˜ å°„åˆ° IP åœ°å€çš„æ•´æ•°ã€‚&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f8_hu3533446481480882885.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f8_hu1062786511443162722.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f8_hu6217334345361474889.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f8_hu3533446481480882885.webp&#34;
               width=&#34;760&#34;
               height=&#34;371&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 8ï¼šCilium çš„æ ¸å¿ƒèº«ä»½åŸè¯­åŸºäºåœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°ç¼“å­˜ä¸­æ˜ å°„åˆ° IP åœ°å€çš„æ•´æ•°ã€‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨åšå®¢æ–‡ç« â€œ&lt;a href=&#34;https://www.solo.io/blog/could-network-cache-based-identity-be-mistaken/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç½‘ç»œåŸºäºç¼“å­˜çš„èº«ä»½å¯èƒ½ä¼šè¢«è¯¯è§£å—ï¼Ÿ&lt;/a&gt;â€ä¸­è¯¦ç»†è®¨è®ºäº†è¿™ä¸ªé—®é¢˜ã€‚ç”±äºè¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å»ºè®®åœ¨è€ƒè™‘ä½¿ç”¨ä¾èµ–èº«ä»½åˆ° IP åœ°å€æ˜ å°„çš„å®¹å™¨ç½‘ç»œæ¥å£ï¼ˆCNIï¼‰å’Œ&lt;a href=&#34;https://thenewstack.io/secure-your-service-mesh-a-13-item-checklist/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æœåŠ¡ç½‘æ ¼&lt;/a&gt;è¿›è¡Œç½‘ç»œå®‰å…¨æ—¶é‡‡å–æ·±åº¦é˜²å¾¡å§¿æ€ã€‚&lt;/p&gt;
&lt;p&gt;é—®é¢˜çš„å…³é”®åœ¨äºï¼š&lt;/p&gt;
&lt;p&gt;ä¸ºé›†ç¾¤ä¸­çš„æ¯ä¸ªèº«ä»½çš„æ‰€æœ‰ IP æ˜ å°„&lt;em&gt;éƒ½å­˜åœ¨äºé›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°ç¼“å­˜ä¸­&lt;/em&gt;ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-9æ˜¾ç¤ºæ¯ä¸ªèº«ä»½çš„-ip-çš„å›¾è¡¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 9ï¼šæ˜¾ç¤ºæ¯ä¸ªèº«ä»½çš„ IP çš„å›¾è¡¨&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f9_hu286766633997356943.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f9_hu16074494618080885932.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f9_hu8608529016465095533.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f9_hu286766633997356943.webp&#34;
               width=&#34;760&#34;
               height=&#34;461&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 9ï¼šæ˜¾ç¤ºæ¯ä¸ªèº«ä»½çš„ IP çš„å›¾è¡¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å›¾-10æœ€ç»ˆä¸€è‡´æ€§é—®é¢˜çš„å›¾è¡¨&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å›¾ 10ï¼šæœ€ç»ˆä¸€è‡´æ€§é—®é¢˜çš„å›¾è¡¨&#34; srcset=&#34;
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f10_hu10907965185694279089.webp 400w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f10_hu14619749360156476499.webp 760w,
               /blog/how-ciliums-mutual-authentication-can-compromise-security/f10_hu8374157354846843875.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/how-ciliums-mutual-authentication-can-compromise-security/f10_hu10907965185694279089.webp&#34;
               width=&#34;760&#34;
               height=&#34;452&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å›¾ 10ï¼šæœ€ç»ˆä¸€è‡´æ€§é—®é¢˜çš„å›¾è¡¨
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸ºäº†ä½¿ Cilium çš„åŒå‘è®¤è¯å’Œç­–ç•¥æ‰§è¡Œæ­£å¸¸å·¥ä½œï¼Œå¿…é¡»ä½¿ç”¨æ­£ç¡®çš„ IP åˆ°èº«ä»½æ˜ å°„æ›´æ–°è¿™äº›ç¼“å­˜ã€‚ç„¶è€Œï¼Œåœ¨é›†ç¾¤ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹ä¸Šæ›´æ–°å•ç‹¬çš„ç¼“å­˜&lt;em&gt;æ˜¯ä¸€ç§æœ€ç»ˆä¸€è‡´æ€§æ“ä½œ&lt;/em&gt;ã€‚å½“ Cilium çš„ eBPF æ•°æ®å¹³é¢å°è¯•æ¨ç†è¿æ¥ç­–ç•¥æ—¶ï¼Œå®ƒå°†å‚è€ƒå…¶èŠ‚ç‚¹æœ¬åœ°ç¼“å­˜ä¸­çš„ IP åˆ°èº«ä»½æ˜ å°„ã€‚&lt;em&gt;å¦‚æœè¯¥ç¼“å­˜è¿‡æœŸæˆ–å»¶è¿Ÿ&lt;/em&gt;ï¼Œå°†å¯¼è‡´ä¸æ­£ç¡®çš„ç½‘ç»œç­–ç•¥ï¼ˆå¯èƒ½ä¸ç¬¦åˆè¦æ±‚ï¼Œå…è®¸æ¶æ„æ´»åŠ¨ï¼Œå¨èƒæ•°æ®ç­‰ï¼‰ã€‚æ— è®ºæ‚¨æ˜¯å¦ä½¿ç”¨ WireGuard æˆ– IPSec æ¥åŠ å¯†èŠ‚ç‚¹ä¹‹é—´çš„æµé‡ï¼Œè¿™éƒ½ä¸ä¼šå½±å“æ­¤èº«ä»½æ··æ·†åœºæ™¯ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªæ¼”ç¤ºè¯´æ˜äº†åœ¨ä½¿ç”¨ Cilium çš„åŒå‘è®¤è¯æ—¶å¯èƒ½å¯¼è‡´è¿åç½‘ç»œç­–ç•¥çš„èº«ä»½æ··æ·†ï¼š&lt;/p&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å› æ­¤ï¼Œæ€»ç»“ä¸€ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Cilium é¡¹ç›®å¼•å…¥äº†ä¸€ç§æ–°é¢–çš„ Kubernetes å·¥ä½œè´Ÿè½½çš„åŒå‘è®¤è¯æœºåˆ¶ã€‚&lt;/li&gt;
&lt;li&gt;Cilium ä¸­çš„åŒå‘è®¤è¯å»ºç«‹åœ¨æœ€ç»ˆä¸€è‡´æ€§ä¹‹ä¸Šï¼Œå¯èƒ½ä¼šå±åŠå®‰å…¨æ€§ã€‚&lt;/li&gt;
&lt;li&gt;Cilium ä½¿ç”¨â€œmTLessâ€è¿›è¡Œèº«ä»½éªŒè¯ï¼Œä½†ä¸ä¼šç»´æŠ¤æ•´ä¸ªè¿æ¥çš„åŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;Cilium çš„èº«ä»½æ¨¡å‹åŒ…æ‹¬ SPIFFEï¼Œä½†å…¶æ ¸å¿ƒèº«ä»½æ˜¯ä¸€ä¸ªåŸºäºæ•´æ•°çš„å•ç‹¬èº«ä»½å±‚ã€‚&lt;/li&gt;
&lt;li&gt;æ ¸å¿ƒé—®é¢˜åœ¨äºï¼ŒIP åˆ°èº«ä»½çš„æ˜ å°„å­˜å‚¨åœ¨æ¯ä¸ªèŠ‚ç‚¹ä¸Šçš„æœ¬åœ°ç¼“å­˜ä¸­ï¼Œè¿™å¯èƒ½å¯¼è‡´æœ€ç»ˆä¸€è‡´æ€§çš„æ›´æ–°ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨ Cilium çš„åŒå‘è®¤è¯ä¸­çš„æœ€ç»ˆä¸€è‡´æ€§å¯èƒ½å¯¼è‡´ä¸æ­£ç¡®çš„ç½‘ç»œç­–ç•¥å’Œå®‰å…¨æ¼æ´ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;è¦æ­£ç¡®ä½¿ç”¨ä¾èµ–èº«ä»½åˆ° IP åœ°å€æ˜ å°„çš„ CNIï¼Œè¯·è€ƒè™‘é‡‡ç”¨æ·±åº¦é˜²å¾¡å§¿æ€ï¼Œå°†ä¸€ä¸ªæœåŠ¡ç½‘æ ¼ï¼ˆå¦‚ Istio Ambientï¼‰å åŠ åœ¨å…¶ä¸Šã€‚Istio Ambient å®ç°äº†ä¸€ç§æ—  sidecar çš„æœåŠ¡ç½‘æ ¼ï¼Œåœ¨æœåŠ¡ä¹‹é—´çš„æ•°æ®è·¯å¾„ä¸Šä½¿ç”¨ mTLSï¼ˆæ— è®ºå…¶ IP åœ°å€å¦‚ä½•ï¼‰ã€‚åœ¨&lt;a href=&#34;https://thenewstack.io/solo-io-istio-is-winning-the-service-mesh-war/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åƒ Istio è¿™æ ·çš„æœåŠ¡ç½‘æ ¼&lt;/a&gt;ä¸­ï¼Œèº«ä»½æ¨¡å‹æ˜¯ç”± SPIFFE å®šä¹‰çš„ï¼Œå¹¶æ ¹æ®è´Ÿè´£ç­¾ç½²ç”¨äºèº«ä»½éªŒè¯æµé‡çš„è¯ä¹¦çš„è¯ä¹¦é¢å‘æœºæ„å»ºç«‹çš„ã€‚&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>ä½¿ç”¨ç›¸äº’ TLS å’Œ Istio ä¿æŠ¤åº”ç”¨ç¨‹åºé€šä¿¡</title>
      <link>https://cloudnativecn.com/blog/secure-apps-with-istio/</link>
      <pubDate>Mon, 06 Nov 2023 18:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/secure-apps-with-istio/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://istio.io/latest/blog/2023/secure-apps-with-istio/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://istio.io/latest/blog/2023/secure-apps-with-istio/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ‘˜è¦ï¼šæœ¬æ–‡è®¨è®ºäº†ä½¿ç”¨ç›¸äº’ TLS (mTLS) å’Œ Istio ä¿æŠ¤åº”ç”¨ç¨‹åºé€šä¿¡çš„é‡è¦æ€§ã€‚mTLS æä¾›äº†ç«¯åˆ°ç«¯çš„å®‰å…¨æ€§ï¼Œåªæœ‰æºå’Œç›®æ ‡å¯ä»¥è§£å¯†æ•°æ®ï¼Œä»è€Œé˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚ç„¶è€Œï¼Œå¦‚æœæºæˆ–ç›®æ ‡çš„èº«ä»½æ²¡æœ‰åŠ å¯†ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜ã€‚Istio ä¸­çš„ mTLS å¯ä»¥ç®€å•åœ°å¯ç”¨ï¼Œå¹¶ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åº pod æä¾›èº«ä»½è¯ä¹¦ã€‚ä¸ºäº†å¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼çš„ mTLSï¼Œå¯ä»¥ä½¿ç”¨ Istio çš„ PeerAuthentication ç­–ç•¥å’Œ AuthorizationPolicyã€‚æœ€åï¼ŒTLS åè®®æ˜¯æœ€å¹¿æ³›å®¡æŸ¥ã€ä¸“å®¶æ‰¹å‡†ã€ç»è¿‡æˆ˜æ–—æµ‹è¯•çš„æ•°æ®å®‰å…¨åè®®ä¹‹ä¸€ï¼ŒIstio é»˜è®¤åœ¨å†…ç½‘åº”ç”¨ç¨‹åºé€šä¿¡ä¸­ä½¿ç”¨ TLS 1.3 ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”¨æˆ·é‡‡ç”¨æœåŠ¡ç½‘æ ¼çš„æœ€å¤§åŸå› ä¹‹ä¸€æ˜¯ä½¿ç”¨ç›¸äº’ TLSï¼ˆmTLSï¼‰åŸºäºå¯é€šè¿‡åŠ å¯†éªŒè¯çš„èº«ä»½æ¥å¯ç”¨åº”ç”¨ç¨‹åºä¹‹é—´çš„å®‰å…¨é€šä¿¡ã€‚åœ¨æ­¤åšå®¢ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºåº”ç”¨ç¨‹åºä¹‹é—´å®‰å…¨é€šä¿¡çš„è¦æ±‚ï¼Œä»¥åŠ mTLS å¦‚ä½•å®ç°å¹¶æ»¡è¶³æ‰€æœ‰è¿™äº›è¦æ±‚ï¼Œä»¥åŠä½¿ç”¨ Istio å¯ç”¨åº”ç”¨ç¨‹åºä¹‹é—´ mTLS çš„ç®€å•æ­¥éª¤ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‚¨éœ€è¦ä»€ä¹ˆæ¥ä¿æŠ¤åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡&#34;&gt;æ‚¨éœ€è¦ä»€ä¹ˆæ¥ä¿æŠ¤åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;ç°ä»£äº‘åŸç”Ÿåº”ç”¨ç¨‹åºç»å¸¸åˆ†å¸ƒåœ¨å¤šä¸ª Kubernetes é›†ç¾¤æˆ–è™šæ‹Ÿæœºä¸­ã€‚æ–°ç‰ˆæœ¬ç»å¸¸è¿›è¡Œé˜¶æ®µæ€§éƒ¨ç½²ï¼Œå®ƒä»¬å¯ä»¥æ ¹æ®ç”¨æˆ·è¯·æ±‚å¿«é€Ÿæ‰©å±•å’Œç¼©å°ã€‚ç”±äºç°ä»£åº”ç”¨ç¨‹åºé€šè¿‡ä¸ä¾èµ–å…±åŒå®šä½æ¥æé«˜èµ„æºåˆ©ç”¨æ•ˆç‡ï¼Œå› æ­¤èƒ½å¤Ÿåº”ç”¨è®¿é—®ç­–ç•¥å¹¶ä¿æŠ¤è¿™äº›åˆ†å¸ƒå¼åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡è‡³å…³é‡è¦ï¼Œå› ä¸ºå¢åŠ çš„å¤šä¸ªå…¥å£ç‚¹å¯¼è‡´äº†æ›´å¤§çš„æ”»å‡»é¢ã€‚å¿½è§†è¿™ä¸€ç‚¹å°†é‚€è¯·æ•°æ®ä¸¢å¤±ã€æ•°æ®ç›—çªƒã€ä¼ªé€ æ•°æ®æˆ–ç®€å•å¤„ç†ç­‰å·¨å¤§çš„ä¸šåŠ¡é£é™©ã€‚&lt;/p&gt;
&lt;p&gt;ä»¥ä¸‹æ˜¯åº”ç”¨ç¨‹åºä¹‹é—´å®‰å…¨é€šä¿¡çš„å¸¸è§å…³é”®è¦æ±‚ï¼š&lt;/p&gt;
&lt;h3 id=&#34;èº«ä»½&#34;&gt;èº«ä»½&lt;/h3&gt;
&lt;p&gt;èº«ä»½æ˜¯ä»»ä½•å®‰å…¨æ¶æ„çš„åŸºæœ¬ç»„æˆéƒ¨åˆ†ã€‚åœ¨æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä»¥å®‰å…¨åœ°å‘é€æ•°æ®ä¹‹å‰ï¼Œå¿…é¡»ä¸ºåº”ç”¨ç¨‹åºå»ºç«‹&lt;strong&gt;èº«ä»½&lt;/strong&gt;ã€‚è¿™ä¸ªå»ºç«‹èº«ä»½çš„è¿‡ç¨‹è¢«ç§°ä¸º&lt;strong&gt;èº«ä»½éªŒè¯&lt;/strong&gt; - å®ƒæ¶‰åŠç”±æŸä¸ªçŸ¥åçš„ï¼Œå—ä¿¡ä»»çš„&lt;strong&gt;æƒå¨æœºæ„&lt;/strong&gt;å¯¹åº”ç”¨ç¨‹åºå·¥ä½œè´Ÿè½½è¿›è¡Œä¸€æ¬¡æˆ–å¤šæ¬¡æ£€æŸ¥ï¼Œä»¥ç¡®è®¤å®ƒæ˜¯å®ƒæ‰€å£°ç§°çš„é‚£æ ·ã€‚ä¸€æ—¦æƒå¨æœºæ„æ»¡æ„ï¼Œå®ƒå°±ä¼šæˆäºˆå·¥ä½œè´Ÿè½½ä¸€ä¸ªèº«ä»½ã€‚&lt;/p&gt;
&lt;p&gt;è€ƒè™‘å‡ºç¤ºæŠ¤ç…§çš„è¡Œä¸º - ä½ ä¼šå‘æŸä¸ªæƒå¨æœºæ„è¯·æ±‚ä¸€ä¸ªï¼Œé‚£ä¸ªæƒå¨æœºæ„å¯èƒ½ä¼šè¦æ±‚ä½ æä¾›å‡ ä¸ªä¸åŒçš„èº«ä»½éªŒè¯è¯æ˜ä½ æ˜¯ä½ æ‰€è¯´çš„é‚£ä¸ªäºº - å‡ºç”Ÿè¯æ˜ã€ç°ä½å€ã€åŒ»ç–—è®°å½•ç­‰ã€‚ä¸€æ—¦ä½ æ»¡è¶³äº†æ‰€æœ‰çš„èº«ä»½éªŒè¯è¦æ±‚ï¼Œä½ å°†ï¼ˆå¸Œæœ›ï¼‰è¢«æˆäºˆèº«ä»½è¯ä»¶ã€‚ä½ å¯ä»¥å°†é‚£ä¸ªèº«ä»½è¯ä»¶ç»™åˆ«äººä½œä¸ºä½ å·²ç»æ»¡è¶³äº†å‘è¯æœºæ„çš„æ‰€æœ‰èº«ä»½éªŒè¯è¦æ±‚çš„è¯æ®ï¼Œå¦‚æœä»–ä»¬ä¿¡ä»»å‘è¯æœºæ„ï¼ˆå’Œèº«ä»½è¯ä»¶æœ¬èº«ï¼‰ï¼Œä»–ä»¬å°±å¯ä»¥ä¿¡ä»»å…³äºä½ çš„æ‰€æœ‰å†…å®¹ï¼ˆæˆ–è€…ä»–ä»¬å¯ä»¥è”ç³»å—ä¿¡ä»»çš„æƒå¨æœºæ„å¹¶éªŒè¯è¯¥æ–‡ä»¶ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;èº«ä»½å¯ä»¥é‡‡å–ä»»ä½•å½¢å¼ï¼Œä½†æ˜¯ï¼Œå°±åƒä»»ä½•å½¢å¼çš„èº«ä»½è¯æ˜ä¸€æ ·ï¼Œèº«ä»½éªŒè¯è¶Šå¼±ï¼Œä¼ªé€ å°±è¶Šå®¹æ˜“ï¼Œèº«ä»½è¯æ˜å¯¹äºä½¿ç”¨å®ƒè¿›è¡Œå†³ç­–çš„ä»»ä½•äººæ¥è¯´å°±è¶Šæ— ç”¨ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è®¡ç®—ä¸­ï¼Œå¯†ç å¯éªŒè¯çš„èº«ä»½éå¸¸é‡è¦ - å®ƒä»¬ç”±å¯éªŒè¯çš„æƒå¨æœºæ„ç­¾ç½²ï¼Œç±»ä¼¼äºæ‚¨çš„æŠ¤ç…§å’Œé©¾é©¶æ‰§ç…§ã€‚åŸºäºä»»ä½•è¾ƒå°‘çš„èº«ä»½éƒ½æ˜¯ä¸€ä¸ªå¯ä»¥ç›¸å¯¹å®¹æ˜“åœ°åˆ©ç”¨çš„å®‰å…¨å¼±ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨çš„ç³»ç»Ÿå¯èƒ½å…·æœ‰æºè‡ªç½‘ç»œå±æ€§ï¼ˆä¾‹å¦‚ IP åœ°å€ï¼‰çš„èº«ä»½ï¼Œå…·æœ‰åˆ†å¸ƒå¼èº«ä»½ç¼“å­˜ï¼Œè·Ÿè¸ªèº«ä»½ä¸è¿™äº›ç½‘ç»œå±æ€§ä¹‹é—´çš„æ˜ å°„ã€‚è¿™äº›èº«ä»½ä¸åƒå¯†ç å¯éªŒè¯çš„èº«ä»½é‚£æ ·å…·æœ‰å¼ºå¤§çš„ä¿è¯ï¼Œå› ä¸º IP åœ°å€å¯èƒ½è¢«é‡æ–°åˆ†é…ç»™ä¸åŒçš„å·¥ä½œè´Ÿè½½ï¼Œå¹¶ä¸”èº«ä»½ç¼“å­˜å¯èƒ½å¹¶ä¸æ€»æ˜¯æ›´æ–°åˆ°æœ€æ–°çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¸Œæœ›åº”ç”¨ç¨‹åºä½¿ç”¨å¯†ç å¯éªŒè¯çš„èº«ä»½ï¼Œå› ä¸ºåœ¨å»ºç«‹è¿æ¥æ—¶äº¤æ¢åº”ç”¨ç¨‹åºçš„å¯†ç å¯éªŒè¯èº«ä»½æœ¬è´¨ä¸Šæ¯”ä¾èµ–äºå°† IP åœ°å€æ˜ å°„åˆ°èº«ä»½çš„ç³»ç»Ÿæ›´å¯é ï¼Œæ›´å®‰å…¨ã€‚è¿™äº›ç³»ç»Ÿä¾èµ–äºå…·æœ‰æœ€ç»ˆä¸€è‡´æ€§å’Œè¿‡æ—¶é—®é¢˜çš„åˆ†å¸ƒå¼èº«ä»½ç¼“å­˜ï¼Œè¿™å¯èƒ½åœ¨ Kubernetes ä¸­åˆ›å»ºç»“æ„æ€§å¼±ç‚¹ï¼Œå…¶ä¸­é«˜é¢‘ç‡çš„è‡ªåŠ¨ pod è½¬æ¢æ˜¯å¸¸æ€ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æœºå¯†æ€§&#34;&gt;æœºå¯†æ€§&lt;/h3&gt;
&lt;p&gt;åŠ å¯†åº”ç”¨ç¨‹åºä¹‹é—´ä¼ è¾“çš„æ•°æ®è‡³å…³é‡è¦ - å› ä¸ºåœ¨ç ´åå¸¸è§ã€æˆæœ¬é«˜æ˜‚å’Œå®é™…ä¸Šå¾®ä¸è¶³é“çš„ä¸–ç•Œä¸­ï¼Œå®Œå…¨ä¾èµ–äº&lt;em&gt;å®‰å…¨çš„&lt;/em&gt;å†…éƒ¨ç¯å¢ƒæˆ–å…¶ä»–å®‰å…¨è¾¹ç•Œæ—©å·²ä¸å†é€‚ç”¨ã€‚ä¸ºäº†é˜²æ­¢&lt;a href=&#34;https://en.wikipedia.org/wiki/Man-in-the-middle_attack&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ä¸­é—´äººæ”»å‡»&lt;/a&gt;ï¼Œä½ éœ€è¦ä¸ºæº - ç›®æ ‡å¯¹åˆ›å»ºä¸€ä¸ªå”¯ä¸€çš„åŠ å¯†é€šé“ï¼Œå› ä¸ºä½ å¸Œæœ›æœ‰å¼ºå¤§çš„èº«ä»½å”¯ä¸€æ€§ä¿è¯ä»¥é¿å…&lt;a href=&#34;https://en.wikipedia.org/wiki/Confused_deputy_problem&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ··æ·†å‰¯æ‰‹é—®é¢˜&lt;/a&gt;ã€‚æ¢å¥è¯è¯´ï¼Œä»…ä»…åŠ å¯†é€šé“æ˜¯ä¸å¤Ÿçš„ - å®ƒå¿…é¡»ä½¿ç”¨ç›´æ¥ä»å”¯ä¸€æºå’Œç›®æ ‡èº«ä»½æ´¾ç”Ÿçš„å”¯ä¸€å¯†é’¥è¿›è¡ŒåŠ å¯†ï¼Œä»¥ä¾¿åªæœ‰æºå’Œç›®æ ‡å¯ä»¥è§£å¯†æ•°æ®ã€‚æ­¤å¤–ï¼Œæ‚¨å¯èƒ½éœ€è¦æ ¹æ®å®‰å…¨å›¢é˜Ÿçš„è¦æ±‚å®šåˆ¶åŠ å¯†ï¼Œä¾‹å¦‚é€šè¿‡é€‰æ‹©ç‰¹å®šçš„å¯†ç ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å®Œæ•´æ€§&#34;&gt;å®Œæ•´æ€§&lt;/h3&gt;
&lt;p&gt;ä»æºå‘é€åˆ°ç›®æ ‡çš„åŠ å¯†æ•°æ®åœ¨å‘é€åä¸èƒ½è¢«é™¤æºå’Œç›®æ ‡ä¹‹å¤–çš„ä»»ä½•èº«ä»½ä¿®æ”¹ã€‚æ¢å¥è¯è¯´ï¼Œæ¥æ”¶åˆ°çš„æ•°æ®ä¸å‘é€çš„æ•°æ®ç›¸åŒã€‚å¦‚æœä½ æ²¡æœ‰&lt;a href=&#34;https://en.wikipedia.org/wiki/Data_integrity&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;data integrity&lt;/a&gt;ï¼Œé‚£ä¹ˆä¸­é—´çš„äººå¯èƒ½åœ¨æºå’Œç›®æ ‡ä¹‹é—´çš„é€šä¿¡è¿‡ç¨‹ä¸­ä¿®æ”¹ä¸€äº›ä½æˆ–æ•´ä¸ªæ•°æ®çš„å†…å®¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è®¿é—®ç­–ç•¥æ‰§è¡Œ&#34;&gt;è®¿é—®ç­–ç•¥æ‰§è¡Œ&lt;/h3&gt;
&lt;p&gt;åº”ç”¨ç¨‹åºæ‰€æœ‰è€…éœ€è¦å¯¹å…¶åº”ç”¨ç¨‹åºåº”ç”¨è®¿é—®ç­–ç•¥ï¼Œå¹¶æ­£ç¡®ã€ä¸€è‡´ä¸”ä¸å«ç³Šåœ°æ‰§è¡Œå®ƒä»¬ã€‚ä¸ºäº†å¯¹é€šä¿¡æ¸ é“çš„ä¸¤ç«¯åº”ç”¨ç­–ç•¥ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸€ç«¯ç¡®å®šä¸€ä¸ªåº”ç”¨ç¨‹åºèº«ä»½ã€‚ä¸€æ—¦æˆ‘ä»¬ä¸ºå¯èƒ½çš„é€šä¿¡æ¸ é“çš„ä¸¤ç«¯éƒ½æœ‰äº†ä¸€ä¸ªå¯ä»¥é€šè¿‡å¯†ç éªŒè¯çš„èº«ä»½ï¼Œå¹¶ä¸”æ¥æºé“¾æ¡æ˜ç¡®ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹ç¡®å®šè°å¯ä»¥ä¸ä½•ç‰©è¿›è¡Œé€šä¿¡çš„ç­–ç•¥ã€‚æ ‡å‡†çš„ TLSï¼Œè¿™æ˜¯ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„å¯†ç åè®®ï¼Œç”¨äºä¿æŠ¤å®¢æˆ·ç«¯ï¼ˆä¾‹å¦‚ï¼ŒWeb æµè§ˆå™¨ï¼‰å’ŒæœåŠ¡å™¨ï¼ˆä¾‹å¦‚ï¼ŒWeb æœåŠ¡å™¨ï¼‰ä¹‹é—´çš„é€šä¿¡ï¼ŒåªçœŸæ­£éªŒè¯å¹¶è¦æ±‚ä¸€æ–¹çš„èº«ä»½ - æœåŠ¡å™¨ã€‚ä½†æ˜¯ï¼Œå¯¹äºå…¨é¢çš„ç«¯åˆ°ç«¯ç­–ç•¥æ‰§è¡Œï¼Œå¯¹åŒæ–¹ - å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨éƒ½æœ‰ä¸€ä¸ªå¯é ã€å¯éªŒè¯ã€æ˜ç¡®çš„èº«ä»½è‡³å…³é‡è¦ã€‚è¿™å¯¹å†…éƒ¨åº”ç”¨ç¨‹åºæ¥è¯´æ˜¯ä¸€ä¸ªå…±åŒçš„éœ€æ±‚ - æƒ³è±¡ä¸€ä¸‹ï¼Œåªæœ‰ä¸€ä¸ª &lt;code&gt;frontend&lt;/code&gt; åº”ç”¨ç¨‹åºåº”è¯¥è°ƒç”¨åç«¯ &lt;code&gt;checkout&lt;/code&gt; åº”ç”¨ç¨‹åºçš„ &lt;strong&gt;GET&lt;/strong&gt; æ–¹æ³•ï¼Œä½†æ˜¯ä¸åº”è¯¥è¢«å…è®¸è°ƒç”¨ &lt;code&gt;POST&lt;/code&gt; æˆ– &lt;code&gt;DELETE&lt;/code&gt; æ–¹æ³•ã€‚æˆ–è€…ï¼Œåªæœ‰é‚£äº›ç”±ç‰¹å®š JWT å‘è¡Œè€…å‘å‡º JWT ä»¤ç‰Œçš„åº”ç”¨ç¨‹åºæ‰èƒ½è°ƒç”¨ &lt;code&gt;checkout&lt;/code&gt; åº”ç”¨ç¨‹åºçš„ &lt;code&gt;GET&lt;/code&gt; æ–¹æ³•ã€‚é€šè¿‡åˆ©ç”¨åŒç«¯çš„å¯†ç èº«ä»½ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿å¼ºå¤§çš„è®¿é—®ç­–ç•¥è¢«æ­£ç¡®åœ°ã€å®‰å…¨åœ°ã€å¯é åœ°æ‰§è¡Œï¼Œè€Œä¸”æœ‰å¯éªŒè¯çš„å®¡è®¡è½¨è¿¹ã€‚&lt;/p&gt;
&lt;h3 id=&#34;fips-åˆè§„æ€§&#34;&gt;FIPS åˆè§„æ€§&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://www.nist.gov/standardsgov/compliance-faqs-federal-information-processing-standards-fips&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è”é‚¦ä¿¡æ¯å¤„ç†æ ‡å‡† (FIPS)&lt;/a&gt; æ˜¯ç”± &lt;a href=&#34;https://www.nist.gov/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å›½å®¶æ ‡å‡†ä¸æŠ€æœ¯ç ”ç©¶é™¢ (NIST)&lt;/a&gt; åˆ¶å®šçš„è”é‚¦è®¡ç®—æœºç³»ç»Ÿçš„æ ‡å‡†å’ŒæŒ‡å—ã€‚å¹¶éæ¯ä¸ªäººéƒ½éœ€è¦ FIPS åˆè§„æ€§ï¼Œä½† FIPS åˆè§„æ€§æ„å‘³ç€æ»¡è¶³äº†ç¾å›½æ”¿åºœä¸ºä¿æŠ¤æ•æ„Ÿä¿¡æ¯è€Œè®¾ç«‹çš„æ‰€æœ‰å¿…è¦å®‰å…¨è¦æ±‚ã€‚ä¸è”é‚¦æ”¿åºœåˆä½œæ—¶éœ€è¦å®ƒã€‚ä¸ºäº†éµå¾ªç¾å›½æ”¿åºœåˆ¶å®šçš„ä¸ç½‘ç»œå®‰å…¨ç›¸å…³çš„æŒ‡å—ï¼Œè®¸å¤šç§è¥éƒ¨é—¨éƒ½è‡ªæ„¿ä½¿ç”¨è¿™äº› FIPS æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ºäº†è¯´æ˜ä¸Šè¿°å®‰å…¨åº”ç”¨ç¨‹åºè¦æ±‚ï¼ˆèº«ä»½ã€æœºå¯†æ€§å’Œå®Œæ•´æ€§ï¼‰ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ &lt;code&gt;frontend&lt;/code&gt; åº”ç”¨ç¨‹åºè°ƒç”¨ &lt;code&gt;checkout&lt;/code&gt; åº”ç”¨ç¨‹åºçš„ä¾‹å­ã€‚è®°ä½ï¼Œæ‚¨å¯ä»¥æŠŠå›¾ä¸­çš„ &lt;strong&gt;ID&lt;/strong&gt; çœ‹ä½œæ˜¯ä»»ä½•ç±»å‹çš„èº«ä»½è¯æ˜ï¼Œæ¯”å¦‚æ”¿åºœé¢å‘çš„æŠ¤ç…§ã€ç…§ç‰‡è¯†åˆ«å™¨ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„è¦æ±‚&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„è¦æ±‚&#34; srcset=&#34;
               /blog/secure-apps-with-istio/requirements-flow_hu70913618349753992.webp 400w,
               /blog/secure-apps-with-istio/requirements-flow_hu14462431410922327858.webp 760w,
               /blog/secure-apps-with-istio/requirements-flow_hu12094650318813846509.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/secure-apps-with-istio/requirements-flow_hu70913618349753992.webp&#34;
               width=&#34;760&#34;
               height=&#34;475&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„è¦æ±‚
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h2 id=&#34;mtls-å¦‚ä½•æ»¡è¶³ä¸Šè¿°è¦æ±‚&#34;&gt;mTLS å¦‚ä½•æ»¡è¶³ä¸Šè¿°è¦æ±‚ï¼Ÿ&lt;/h2&gt;
&lt;p&gt;TLS 1.3ï¼ˆåœ¨æ’°å†™æœ¬æ–‡æ—¶çš„æœ€æ–° TLS ç‰ˆæœ¬ï¼‰ &lt;a href=&#34;https://datatracker.ietf.org/doc/html/rfc8446&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è§„èŒƒ&lt;/a&gt; çš„ä¸»è¦ç›®æ ‡æ˜¯åœ¨ä¸¤ä¸ªé€šä¿¡å¯¹ç­‰æ–¹ä¹‹é—´æä¾›ä¸€ä¸ªå®‰å…¨é€šé“ã€‚TLS å®‰å…¨é€šé“å…·æœ‰ä»¥ä¸‹å±æ€§ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;éªŒè¯ï¼šé€šé“çš„æœåŠ¡å™¨ç«¯å§‹ç»ˆè¢«éªŒè¯ï¼Œå®¢æˆ·ç«¯å¯é€‰åœ°è¢«éªŒè¯ã€‚å½“å®¢æˆ·ç«¯ä¹Ÿè¢«éªŒè¯æ—¶ï¼Œå®‰å…¨é€šé“æˆä¸ºä¸€ä¸ªç›¸äº’çš„ TLS é€šé“ã€‚&lt;/li&gt;
&lt;li&gt;æœºå¯†æ€§ï¼šæ•°æ®è¢«åŠ å¯†ä¸”åªå¯¹å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨å¯è§ã€‚å¿…é¡»ä½¿ç”¨ä¸æºå’Œç›®æ ‡èº«ä»½è¯æ˜æ— æ­§ä¹‰åœ°å¯†ç ç»‘å®šçš„å¯†é’¥æ¥åŠ å¯†æ•°æ®ï¼Œä»¥ä¾¿å¯é åœ°ä¿æŠ¤åº”ç”¨ç¨‹åºå±‚çš„æµé‡ã€‚&lt;/li&gt;
&lt;li&gt;å®Œæ•´æ€§ï¼šé€šè¿‡é€šé“å‘é€çš„æ•°æ®æ— æ³•åœ¨æœªè¢«æ£€æµ‹åˆ°çš„æƒ…å†µä¸‹è¿›è¡Œä¿®æ”¹ã€‚è¿™æ˜¯é€šè¿‡åªæœ‰æºå’Œç›®æ ‡æ‹¥æœ‰ç»™å®šä¼šè¯çš„åŠ å¯†å’Œè§£å¯†å¯†é’¥çš„äº‹å®æ¥ä¿è¯çš„ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;mtls-å†…éƒ¨é€»è¾‘&#34;&gt;mTLS å†…éƒ¨é€»è¾‘&lt;/h3&gt;
&lt;p&gt;æˆ‘ä»¬å·²ç»ç¡®å®šäº†ï¼Œä½¿ç”¨å¯ä»¥é€šè¿‡åŠ å¯†éªŒè¯çš„èº«ä»½æ ‡è¯†å¯¹äºä¿æŠ¤é€šé“å’Œæ”¯æŒè®¿é—®ç­–ç•¥æ‰§è¡Œè‡³å…³é‡è¦ï¼Œæˆ‘ä»¬ä¹Ÿå·²ç»ç¡®å®šäº†ï¼ŒmTLS æ˜¯ä¸€ç§ç»è¿‡ä¸¥å¯†æµ‹è¯•çš„åè®®ï¼Œå®ƒä¸ºåœ¨é€šé“çš„ä¸¤ç«¯ä½¿ç”¨å¯ä»¥é€šè¿‡åŠ å¯†éªŒè¯çš„èº«ä»½æ ‡è¯†æä¾›äº†ä¸€äº›æå…¶é‡è¦çš„ä¿è¯ - è®©æˆ‘ä»¬æ·±å…¥äº†è§£ä¸€ä¸‹ mTLS åè®®åœ¨å®é™…è¿è¡Œä¸­æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚&lt;/p&gt;
&lt;h3 id=&#34;æ¡æ‰‹åè®®&#34;&gt;æ¡æ‰‹åè®®&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://datatracker.ietf.org/doc/html/rfc8446#section-4&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¡æ‰‹åè®®&lt;/a&gt; éªŒè¯äº†é€šä¿¡åŒæ–¹çš„èº«ä»½ï¼Œåå•†äº†åŠ å¯†æ¨¡å¼å’Œå‚æ•°ï¼Œå¹¶å»ºç«‹äº†å…±äº«çš„å¯†é’¥ææ–™ã€‚æ¢å¥è¯è¯´ï¼Œæ¡æ‰‹çš„è§’è‰²æ˜¯éªŒè¯é€šä¿¡åŒæ–¹çš„èº«ä»½å¹¶åå•†ä¼šè¯å¯†é’¥ï¼Œä»¥ä¾¿è¿æ¥çš„å…¶ä½™éƒ¨åˆ†å¯ä»¥æ ¹æ®ä¼šè¯å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚å½“æ‚¨çš„åº”ç”¨ç¨‹åºå»ºç«‹ mTLS è¿æ¥æ—¶ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯åå•†ä¸€ä¸ªå¯†ç å¥—ä»¶ï¼Œè¯¥å¥—ä»¶è§„å®šäº†æ‚¨çš„åº”ç”¨ç¨‹åºå°†ç”¨äºè¿æ¥å…¶ä½™éƒ¨åˆ†çš„åŠ å¯†ç®—æ³•ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºè¿˜åå•†äº†è¦ä½¿ç”¨çš„åŠ å¯†ä¼šè¯å¯†é’¥ã€‚æ•´ä¸ªæ¡æ‰‹è¿‡ç¨‹éƒ½è¢«è®¾è®¡ä¸ºèƒ½æŠµæŠ—ç¯¡æ”¹ - ä»»ä½•æœªæŒæœ‰ä¸æºå’Œ/æˆ–ç›®æ ‡ç›¸åŒçš„ç‹¬ç‰¹ï¼Œèƒ½å¤Ÿé€šè¿‡åŠ å¯†éªŒè¯çš„èº«ä»½æ–‡æ¡£çš„å®ä½“çš„å¹²æ‰°éƒ½ä¼šè¢«æ‹’ç»ã€‚å› æ­¤ï¼Œåœ¨ä»»ä½•é€šä¿¡æ–¹ç»§ç»­è¿›è¡Œåº”ç”¨ç¨‹åºæ•°æ®ä¹‹å‰ï¼Œéƒ½æœ‰å¿…è¦æ£€æŸ¥æ•´ä¸ªæ¡æ‰‹è¿‡ç¨‹å¹¶éªŒè¯å…¶å®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æ¡æ‰‹å¯ä»¥è¢«è®¤ä¸ºæ˜¯æŒ‰ç…§ TLS 1.3 è§„èŒƒä¸­çš„&lt;a href=&#34;https://datatracker.ietf.org/doc/html/rfc8446#section-2&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ¡æ‰‹åè®®æ¦‚è¿°&lt;/a&gt;æœ‰ä¸‰ä¸ªé˜¶æ®µ - å†æ¬¡ä½¿ç”¨&lt;code&gt;frontend&lt;/code&gt;åº”ç”¨ç¨‹åºè°ƒç”¨åç«¯&lt;code&gt;checkout&lt;/code&gt;åº”ç”¨ç¨‹åºçš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;ç¬¬ä¸€é˜¶æ®µï¼š&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;åå•†å¯ä»¥ç”¨æ¥ä¿æŠ¤æ¡æ‰‹å’Œæµé‡æ•°æ®çš„åŠ å¯†å‚æ•°å’Œå¯†é’¥ã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬äºŒé˜¶æ®µï¼šåœ¨æ­¤é˜¶æ®µå’Œä¹‹åçš„æ‰€æœ‰å†…å®¹éƒ½æ˜¯åŠ å¯†çš„ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œ&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;å»ºç«‹å…¶ä»–æ¡æ‰‹å‚æ•°ï¼Œå¹¶ç¡®å®šæ˜¯å¦ä¹Ÿå¯¹å®¢æˆ·ç«¯è¿›è¡Œèº«ä»½éªŒè¯ - ä¹Ÿå°±æ˜¯è¯´ï¼ŒmTLSã€‚&lt;/li&gt;
&lt;li&gt;ç¬¬ä¸‰é˜¶æ®µï¼š&lt;code&gt;frontend&lt;/code&gt;é€šè¿‡å…¶å¯é€šè¿‡åŠ å¯†éªŒè¯çš„èº«ä»½éªŒè¯&lt;code&gt;checkout&lt;/code&gt;ï¼ˆåœ¨ mTLS ä¸­ï¼Œ&lt;code&gt;checkout&lt;/code&gt;ä»¥ç›¸åŒçš„æ–¹å¼éªŒè¯&lt;code&gt;frontend&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;è‡ª TLS 1.2 ä»¥æ¥ï¼Œä¸æ¡æ‰‹ç›¸å…³çš„æœ‰å‡ ä¸ªä¸»è¦åŒºåˆ«ï¼Œæœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ TLS 1.3 è§„èŒƒï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;æ‰€æœ‰æ¡æ‰‹æ¶ˆæ¯ï¼ˆç¬¬äºŒé˜¶æ®µå’Œç¬¬ä¸‰é˜¶æ®µï¼‰éƒ½ä½¿ç”¨åœ¨ç¬¬ä¸€é˜¶æ®µåå•†çš„åŠ å¯†å¯†é’¥è¿›è¡ŒåŠ å¯†ã€‚&lt;/li&gt;
&lt;li&gt;å·²ç»å‰Šå‡äº†é—ç•™çš„å¯¹ç§°åŠ å¯†ç®—æ³•ã€‚&lt;/li&gt;
&lt;li&gt;æ·»åŠ äº†é›¶å¾€è¿”æ—¶é—´ï¼ˆ0-RTTï¼‰æ¨¡å¼ï¼ŒèŠ‚çœäº†è¿æ¥è®¾ç½®çš„ä¸€ä¸ªå¾€è¿”æ—¶é—´ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;è®°å½•åè®®&#34;&gt;è®°å½•åè®®&lt;/h3&gt;
&lt;p&gt;åœ¨æ¡æ‰‹é˜¶æ®µåå•†äº† TLS åè®®ç‰ˆæœ¬ã€ä¼šè¯å¯†é’¥å’Œ&lt;a href=&#34;https://en.wikipedia.org/wiki/HMAC&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;HMAC&lt;/a&gt;åï¼ŒåŒæ–¹ç°åœ¨å¯ä»¥é€šè¿‡&lt;a href=&#34;https://datatracker.ietf.org/doc/html/rfc8446#section-5&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®°å½•åè®®&lt;/a&gt;å®‰å…¨åœ°äº¤æ¢è¢«åˆ†å—çš„åŠ å¯†æ•°æ®ã€‚ä½¿ç”¨æ¡æ‰‹ä¸­åå•†çš„å®Œå…¨ç›¸åŒçš„å‚æ•°å¯¹æµé‡è¿›è¡ŒåŠ å¯†æ˜¯è‡³å…³é‡è¦çš„ï¼ˆå¹¶ä¸”æ˜¯è§„èŒƒçš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œä»¥ç¡®ä¿æµé‡çš„æœºå¯†æ€§å’Œå®Œæ•´æ€§ã€‚&lt;/p&gt;
&lt;p&gt;å°† TLS 1.3 è§„èŒƒä¸­çš„ä¸¤ä¸ªåè®®æ”¾åœ¨ä¸€èµ·ï¼Œå¹¶ä½¿ç”¨&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;åº”ç”¨ç¨‹åºæ¥è¯´æ˜ä»¥ä¸‹æµç¨‹ï¼š&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-å½“å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„-mtls-æµç¨‹&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;å½“å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„ mTLS æµç¨‹&#34; srcset=&#34;
               /blog/secure-apps-with-istio/mtls-flow_hu16998378200945705627.webp 400w,
               /blog/secure-apps-with-istio/mtls-flow_hu8439544256381280296.webp 760w,
               /blog/secure-apps-with-istio/mtls-flow_hu6895394692600559286.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/secure-apps-with-istio/mtls-flow_hu16998378200945705627.webp&#34;
               width=&#34;760&#34;
               height=&#34;453&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      å½“å‰ç«¯è°ƒç”¨ç»“è´¦åº”ç”¨ç¨‹åºæ—¶çš„ mTLS æµç¨‹
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;è°ä¸º&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;å‘å‡ºèº«ä»½è¯ä¹¦ï¼Ÿå®ƒä»¬é€šå¸¸ç”±å…·æœ‰è‡ªå·±çš„&lt;a href=&#34;https://en.wikipedia.org/wiki/Root_certificate&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ ¹è¯ä¹¦&lt;/a&gt;æˆ–ä½¿ç”¨å…¶æ ¹ CA çš„ä¸­é—´è¯ä¹¦çš„&lt;a href=&#34;https://en.wikipedia.org/wiki/Certificate_authority&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯ä¹¦é¢å‘æœºæ„ï¼ˆCAï¼‰&lt;/a&gt;å‘å‡ºã€‚æ ¹è¯ä¹¦åŸºæœ¬ä¸Šæ˜¯ä¸€ä»½æ ‡è¯†æ ¹ CA çš„å…¬é’¥è¯ä¹¦ï¼Œæ‚¨çš„ç»„ç»‡å¯èƒ½å·²ç»æ‹¥æœ‰æ­¤è¯ä¹¦ã€‚æ ¹è¯ä¹¦ä¼šä¸&lt;code&gt;frontend&lt;/code&gt;ï¼ˆæˆ–&lt;code&gt;checkout&lt;/code&gt;ï¼‰çš„è‡ªå·±çš„æ ¹ç­¾åèº«ä»½è¯ä¹¦ä¸€èµ·åˆ†å‘åˆ°&lt;code&gt;frontend&lt;/code&gt;ã€‚è¿™å°±æ˜¯åŸºæœ¬çš„å…¬é’¥åŸºç¡€è®¾æ–½ï¼ˆPKIï¼‰çš„å·¥ä½œæ–¹å¼ - CA è´Ÿè´£éªŒè¯å®ä½“çš„èº«ä»½æ–‡æ¡£ï¼Œç„¶åä»¥è¯ä¹¦çš„å½¢å¼æˆäºˆå®ƒä¸€ä¸ªæ— æ³•ä¼ªé€ çš„èº«ä»½æ–‡æ¡£ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨å¯ä»¥ä¾èµ–æ‚¨çš„ CA å’Œä¸­é—´ CA ä½œä¸ºèº«ä»½&lt;strong&gt;çœŸç†&lt;/strong&gt;çš„æ¥æºï¼Œä»¥ä¸€ç§ç»´æŒé«˜å¯ç”¨æ€§å¹¶æä¾›ç¨³å®šã€æŒä¹…å¯éªŒè¯çš„èº«ä»½ä¿è¯çš„ç»“æ„åŒ–æ–¹å¼ï¼Œè€Œä¸€ä¸ªåºå¤§çš„åˆ†å¸ƒå¼ IP å’Œèº«ä»½æ˜ å°„ç¼“å­˜åˆ™æ— æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚å½“&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;çš„èº«ä»½è¯ä¹¦ç”±åŒä¸€ä¸ªæ ¹è¯ä¹¦å‘å‡ºæ—¶ï¼Œ&lt;code&gt;frontend&lt;/code&gt;å’Œ&lt;code&gt;checkout&lt;/code&gt;å¯ä»¥å§‹ç»ˆä»¥ä¸€è‡´ä¸”å¯é çš„æ–¹å¼éªŒè¯å…¶å¯¹ç­‰èº«ä»½ï¼Œæ— è®ºå®ƒä»¬è¿è¡Œåœ¨å“ªä¸ªé›†ç¾¤æˆ–èŠ‚ç‚¹æˆ–è§„æ¨¡ä¸­ã€‚&lt;/p&gt;
&lt;p&gt;æ‚¨äº†è§£äº† mTLS å¦‚ä½•æä¾›åŠ å¯†èº«ä»½ã€æœºå¯†æ€§å’Œå®Œæ•´æ€§ï¼Œé‚£ä¹ˆå½“æ‚¨çš„åº”ç”¨ç¨‹åºæ•°é‡å¢é•¿åˆ°æ•°åƒä¸ªæˆ–æ›´å¤šï¼Œå¹¶ä¸”è·¨å¤šä¸ªé›†ç¾¤æ—¶ï¼Œå…¶å¯æ‰©å±•æ€§å¦‚ä½•å‘¢ï¼Ÿå¦‚æœæ‚¨åœ¨å¤šä¸ªé›†ç¾¤ä¸­å»ºç«‹ä¸€ä¸ªå•ä¸€çš„æ ¹è¯ä¹¦ï¼Œé‚£ä¹ˆåªè¦å®ƒè¢«æ ¹è¯ä¹¦ä¿¡ä»»ï¼Œç³»ç»Ÿå°±ä¸éœ€è¦åœ¨åº”ç”¨ç¨‹åºæ”¶åˆ°æ¥è‡ªå¦ä¸€ä¸ªé›†ç¾¤çš„è¿æ¥è¯·æ±‚æ—¶è¿›è¡Œå¤„ç† - ç³»ç»ŸçŸ¥é“è¿æ¥ä¸Šçš„èº«ä»½å·²ç»é€šè¿‡åŠ å¯†è¿›è¡Œäº†éªŒè¯ã€‚å½“æ‚¨çš„åº”ç”¨ç¨‹åº pod æ›´æ”¹ IP æˆ–è¢«é‡æ–°éƒ¨ç½²åˆ°å¦ä¸€ä¸ªé›†ç¾¤æˆ–ç½‘ç»œæ—¶ï¼Œæ‚¨çš„åº”ç”¨ç¨‹åºï¼ˆæˆ–ä»£è¡¨å…¶è¡ŒåŠ¨çš„ç»„ä»¶ï¼‰åªéœ€ä½¿ç”¨å…¶ç”± CA é“¸é€ çš„å—ä¿¡ä»»è¯ä¹¦å‘ç›®æ ‡å‘èµ·æµé‡å³å¯ã€‚æ— è®ºæ˜¯ 500+ç½‘ç»œè·³è½¬è¿˜æ˜¯ç›´æ¥è¿æ¥ï¼Œæ‚¨çš„è®¿é—®ç­–ç•¥éƒ½ä¼šä»¥ç›¸åŒçš„æ–¹å¼æ‰§è¡Œï¼Œæ— éœ€è·Ÿè¸ªèº«ä»½ç¼“å­˜å¹¶è®¡ç®—å“ªä¸ª IP åœ°å€æ˜ å°„åˆ°å“ªä¸ªåº”ç”¨ç¨‹åº podã€‚&lt;/p&gt;
&lt;p&gt;é‚£ä¹ˆå…³äº FIPS åˆè§„æ€§å‘¢ï¼Ÿæ ¹æ® TLS 1.3 è§„èŒƒï¼ŒTLS å…¼å®¹çš„åº”ç”¨ç¨‹åºå¿…é¡»å®ç°&lt;code&gt;TLS_AES_128_GCM_SHA256&lt;/code&gt;å¯†ç å¥—ä»¶ï¼Œå¹¶å»ºè®®å®ç°&lt;code&gt;TLS_AES_256_GCM_SHA384&lt;/code&gt;ï¼Œè¿™ä¸¤è€…éƒ½åœ¨ NIST çš„&lt;a href=&#34;https://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-52r2.pdf&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;TLS æŒ‡å—&lt;/a&gt;ä¸­ã€‚RSA æˆ– ECDSA æœåŠ¡å™¨è¯ä¹¦ä¹Ÿè¢« TLS 1.3 è§„èŒƒå’Œ NIST çš„ TLS æŒ‡å—æ¨èã€‚åªè¦æ‚¨ä¸º mTLS è¿æ¥ä½¿ç”¨ FIPS 140-2 æˆ– 140-3 åˆè§„çš„åŠ å¯†æ¨¡å—ï¼Œæ‚¨å°±ä¼šèµ°ä¸Š&lt;a href=&#34;https://csrc.nist.gov/projects/cryptographic-module-validation-program/validated-modules&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;FIPS 140-2 æˆ– 140-3 éªŒè¯&lt;/a&gt;çš„æ­£ç¡®è·¯å¾„ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¯èƒ½å‡ºç°çš„é—®é¢˜&#34;&gt;å¯èƒ½å‡ºç°çš„é—®é¢˜&lt;/h2&gt;
&lt;p&gt;æŒ‰ç…§ TLS 1.3 è§„èŒƒæ­£ç¡®å®æ–½ mTLS è‡³å…³é‡è¦ã€‚å¦‚æœä¸æŒ‰ç…§ TLS è§„èŒƒæ­£ç¡®ä½¿ç”¨ mTLSï¼Œä»¥ä¸‹æ˜¯ä¸€äº›å¯èƒ½åœ¨æœªè¢«æ£€æµ‹çš„æƒ…å†µä¸‹å‡ºç°çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;h3 id=&#34;å¦‚æœæœ‰äººåœ¨è¿æ¥ä¸­é—´é™é»˜åœ°æ•è·åŠ å¯†æ•°æ®ä¼šæ€ä¹ˆæ ·&#34;&gt;å¦‚æœæœ‰äººåœ¨è¿æ¥ä¸­é—´é™é»˜åœ°æ•è·åŠ å¯†æ•°æ®ä¼šæ€ä¹ˆæ ·ï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¦‚æœè¿æ¥æ²¡æœ‰æŒ‰ç…§ TLS è§„èŒƒä¸­æ¦‚è¿°çš„æ¡æ‰‹å’Œè®°å½•åè®®æ¥è¿›è¡Œï¼Œä¾‹å¦‚ï¼Œè¿æ¥éµå¾ªæ¡æ‰‹åè®®ï¼Œä½†åœ¨è®°å½•åè®®ä¸­æ²¡æœ‰ä½¿ç”¨æ¡æ‰‹ä¸­åå•†çš„ä¼šè¯å¯†é’¥å’Œå‚æ•°ï¼Œæ‚¨å¯èƒ½ä¼šå‘ç°æ‚¨çš„è¿æ¥çš„æ¡æ‰‹å’Œè®°å½•åè®®ä¹‹é—´æ²¡æœ‰å…³è”ï¼Œæ¡æ‰‹å’Œè®°å½•åè®®ä¹‹é—´çš„èº«ä»½å¯èƒ½ä¸åŒã€‚TLS è¦æ±‚æ¡æ‰‹å’Œè®°å½•åè®®åœ¨åŒä¸€è¿æ¥ä¸­å…±äº«ï¼Œå› ä¸ºå°†å®ƒä»¬åˆ†å¼€ä¼šå¢åŠ ä¸­é—´äººæ”»å‡»çš„æ”»å‡»é¢ã€‚&lt;/p&gt;
&lt;p&gt;mTLS è¿æ¥ä»æ¡æ‰‹å¼€å§‹åˆ°ç»“æŸéƒ½å…·æœ‰ä¸€è‡´çš„ç«¯åˆ°ç«¯å®‰å…¨æ€§ã€‚åŠ å¯†æ•°æ®æ˜¯ç”¨è¯ä¹¦ä¸­å…¬é’¥åå•†çš„ä¼šè¯å¯†é’¥åŠ å¯†çš„ã€‚åªæœ‰æºå’Œç›®æ ‡å¯ä»¥ä½¿ç”¨ç§é’¥è§£å¯†æ•°æ®ã€‚æ¢å¥è¯è¯´ï¼Œåªæœ‰æ‹¥æœ‰ç§é’¥çš„è¯ä¹¦æ‰€æœ‰è€…æ‰èƒ½è§£å¯†æ•°æ®ã€‚é™¤éé»‘å®¢æ§åˆ¶äº†è¯ä¹¦çš„ç§é’¥ï¼Œå¦åˆ™ä»–æˆ–å¥¹æ²¡æœ‰åŠæ³•æä¹± mTLS è¿æ¥ä»¥æˆåŠŸæ‰§è¡Œä¸­é—´äººæ”»å‡»ã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¦‚æœæºæˆ–ç›®æ ‡èº«ä»½æ²¡æœ‰åŠ å¯†å®‰å…¨æ€ä¹ˆåŠ&#34;&gt;å¦‚æœæºæˆ–ç›®æ ‡èº«ä»½æ²¡æœ‰åŠ å¯†å®‰å…¨æ€ä¹ˆåŠï¼Ÿ&lt;/h3&gt;
&lt;p&gt;å¦‚æœèº«ä»½åŸºäºç½‘ç»œå±æ€§ï¼Œå¦‚ IP åœ°å€ï¼Œè¿™äº›å±æ€§å¯èƒ½ä¼šé‡æ–°åˆ†é…ç»™å…¶ä»– podï¼Œå°±æ— æ³•ä½¿ç”¨åŠ å¯†æŠ€æœ¯éªŒè¯è¯¥èº«ä»½ã€‚ç”±äºæ­¤ç±»èº«ä»½ä¸åŸºäºåŠ å¯†èº«ä»½ï¼Œå› æ­¤æ‚¨çš„ç³»ç»Ÿå¯èƒ½æœ‰ä¸€ä¸ªèº«ä»½ç¼“å­˜ï¼Œç”¨äºè·Ÿè¸ªèº«ä»½ã€pod çš„ç½‘ç»œæ ‡ç­¾ã€ç›¸åº”çš„ IP åœ°å€å’Œéƒ¨ç½² pod çš„ Kubernetes èŠ‚ç‚¹ä¿¡æ¯ä¹‹é—´çš„æ˜ å°„ã€‚ä½¿ç”¨èº«ä»½ç¼“å­˜ï¼Œæ‚¨å¯èƒ½ä¼šé‡åˆ° pod IP åœ°å€è¢«é‡ç”¨å’Œèº«ä»½é”™è¯¯ï¼Œå½“èº«ä»½ç¼“å­˜åœ¨çŸ­æ—¶é—´å†…åŒæ­¥å‡ºç°é—®é¢˜æ—¶ï¼Œç­–ç•¥å¯èƒ½æ— æ³•æ­£ç¡®æ‰§è¡Œã€‚ä¾‹å¦‚ï¼Œå¦‚æœæ‚¨çš„è¿æ¥ä¹‹é—´çš„å¯¹ç­‰æ–¹æ²¡æœ‰åŠ å¯†èº«ä»½ï¼Œæ‚¨çš„ç³»ç»Ÿå°†ä¸å¾—ä¸ä»å¯èƒ½è¿‡æ—¶æˆ–ä¸å®Œæ•´çš„èº«ä»½ç¼“å­˜ä¸­è·å–èº«ä»½ã€‚&lt;/p&gt;
&lt;p&gt;å°†èº«ä»½æ˜ å°„åˆ°å·¥ä½œè´Ÿè½½ IP çš„è¿™äº›èº«ä»½ç¼“å­˜ä¸æ˜¯ ACIDï¼ˆåŸå­æ€§ã€ä¸€è‡´æ€§ã€éš”ç¦»æ€§å’ŒæŒä¹…æ€§ï¼‰ï¼Œæ‚¨å¸Œæœ›æ‚¨çš„å®‰å…¨ç³»ç»Ÿåº”ç”¨äºå…·æœ‰å¼ºä¿è¯çš„äº‹ç‰©ã€‚è€ƒè™‘ä»¥ä¸‹å±æ€§å’Œæ‚¨å¯èƒ½æƒ³è¦é—®è‡ªå·±çš„é—®é¢˜ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è¿‡æ—¶ï¼šå¯¹ç­‰æ–¹å¦‚ä½•éªŒè¯ç¼“å­˜ä¸­çš„æ¡ç›®æ˜¯å¦æ˜¯&lt;strong&gt;å½“å‰&lt;/strong&gt;çš„ï¼Ÿ&lt;/li&gt;
&lt;li&gt;ä¸å®Œæ•´ï¼šå¦‚æœç¼“å­˜æœªå‘½ä¸­å¹¶ä¸”ç³»ç»Ÿæœªèƒ½å…³é—­è¿æ¥ï¼Œåªæœ‰ç¼“å­˜&lt;strong&gt;åŒæ­¥å™¨&lt;/strong&gt;å¤±è´¥æ—¶ç½‘ç»œæ‰ä¼šå˜å¾—ä¸ç¨³å®šå—ï¼Ÿ&lt;/li&gt;
&lt;li&gt;å¦‚æœæŸä¸ªä¸œè¥¿æ ¹æœ¬æ²¡æœ‰ IP æ€ä¹ˆåŠï¼Ÿä¾‹å¦‚ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒAWS Lambda æœåŠ¡æ²¡æœ‰å…¬å…± IPã€‚&lt;/li&gt;
&lt;li&gt;éäº‹åŠ¡æ€§ï¼šå¦‚æœæ‚¨è¯»å–ä¸¤æ¬¡èº«ä»½ï¼Œä¼šçœ‹åˆ°ç›¸åŒçš„å€¼å—ï¼Ÿå¦‚æœåœ¨è®¿é—®ç­–ç•¥æˆ–å®¡è®¡å®æ–½ä¸­ä¸å°å¿ƒï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´çœŸæ­£çš„é—®é¢˜ã€‚&lt;/li&gt;
&lt;li&gt;è°å°†å®ˆæŠ¤å®ˆæŠ¤è€…è‡ªå·±ï¼Ÿæ˜¯å¦æœ‰æ—¢å®šçš„å®è·µæ¥ä¿æŠ¤ç¼“å­˜ï¼Œå°±åƒ CA æœ‰çš„é‚£æ ·ï¼Ÿæ‚¨æœ‰ä»€ä¹ˆè¯æ®è¯æ˜ç¼“å­˜æ²¡æœ‰è¢«ç¯¡æ”¹å—ï¼Ÿæ‚¨æ˜¯å¦è¢«è¿«å¯¹ä¸€äº›ä¸æ˜¯æ‚¨çš„ CA çš„å¤æ‚åŸºç¡€è®¾æ–½çš„å®‰å…¨æ€§è¿›è¡Œæ¨ç†ï¼ˆå’Œå®¡è®¡ï¼‰ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä»¥ä¸Šé—®é¢˜ä¸­æœ‰äº›æ¯”å…¶ä»–é—®é¢˜æ›´ç³Ÿã€‚æ‚¨å¯ä»¥åº”ç”¨&lt;strong&gt;å¤±è´¥å…³é—­&lt;/strong&gt;åŸåˆ™ï¼Œä½†è¿™å¹¶ä¸èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;èº«ä»½ä¹Ÿç”¨äºæ‰§è¡Œè®¿é—®ç­–ç•¥ï¼Œä¾‹å¦‚æˆæƒç­–ç•¥ï¼Œè¿™äº›è®¿é—®ç­–ç•¥åœ¨è¯·æ±‚è·¯å¾„ä¸­ï¼Œæ‚¨çš„ç³»ç»Ÿå¿…é¡»å¿«é€Ÿåšå‡ºå†³å®šï¼Œå…è®¸æˆ–æ‹’ç»è®¿é—®ã€‚æ¯å½“èº«ä»½å‡ºç°é”™è¯¯æ—¶ï¼Œè®¿é—®ç­–ç•¥å¯èƒ½ä¼šè¢«ç»•è¿‡ï¼Œè€Œæ— æ³•è¢«æ£€æµ‹æˆ–å®¡è®¡ã€‚ä¾‹å¦‚ï¼Œæ‚¨çš„èº«ä»½ç¼“å­˜å¯èƒ½å°†æ‚¨çš„&lt;code&gt;checkout&lt;/code&gt; pod çš„å…ˆå‰åˆ†é…çš„ IP åœ°å€ä½œä¸º&lt;code&gt;checkout&lt;/code&gt;èº«ä»½ä¹‹ä¸€ã€‚å¦‚æœ&lt;code&gt;checkout&lt;/code&gt; pod è¢«å›æ”¶ï¼ŒåŒä¸€ IP åœ°å€åˆšåˆšè¢«åˆ†é…ç»™ä¸€ä¸ª&lt;code&gt;frontend&lt;/code&gt; podï¼Œé‚£ä¹ˆåœ¨ç¼“å­˜æ›´æ–°ä¹‹å‰ï¼Œè¯¥&lt;code&gt;frontend&lt;/code&gt; pod å¯èƒ½å…·æœ‰&lt;code&gt;checkout&lt;/code&gt;çš„èº«ä»½ï¼Œè¿™å¯èƒ½å¯¼è‡´é”™è¯¯çš„è®¿é—®ç­–ç•¥è¢«æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;è®©æˆ‘ä»¬å‡è®¾ä»¥ä¸‹å¤§è§„æ¨¡å¤šé›†ç¾¤éƒ¨ç½²ï¼Œè¯´æ˜èº«ä»½ç¼“å­˜è¿‡æ—¶é—®é¢˜ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;100 ä¸ªé›†ç¾¤ï¼Œæ¯ä¸ªé›†ç¾¤æœ‰ 100 ä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ‰ 20 ä¸ª podã€‚æ€»çš„ pod æ•°é‡æ˜¯ 200,000ã€‚&lt;/li&gt;
&lt;li&gt;0.25% çš„ pod ä¸€ç›´åœ¨å˜åŠ¨ï¼ˆæ»šåŠ¨æ›´æ–°ï¼Œé‡å¯ï¼Œæ¢å¤ï¼ŒèŠ‚ç‚¹å˜åŠ¨ç­‰ï¼‰ï¼Œæ¯æ¬¡å˜åŠ¨çš„çª—å£æ˜¯ 10 ç§’ã€‚&lt;/li&gt;
&lt;li&gt;æ¯ 10 ç§’æœ‰ 500 ä¸ªæ­£åœ¨å˜åŠ¨çš„ pod åˆ†å¸ƒåˆ° 10,000 ä¸ªèŠ‚ç‚¹ï¼ˆç¼“å­˜ï¼‰ã€‚&lt;/li&gt;
&lt;li&gt;å¦‚æœç¼“å­˜åŒæ­¥å™¨åœæ»ï¼Œç³»ç»Ÿåœ¨ 5 åˆ†é’Ÿåè¿‡æ—¶çš„%å¯èƒ½é«˜è¾¾&lt;strong&gt;7.5%&lt;/strong&gt;ï¼&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;ä»¥ä¸Šå‡è®¾ç¼“å­˜åŒæ­¥å™¨å¤„äºç¨³æ€ã€‚å¦‚æœç¼“å­˜åŒæ­¥å™¨å‡ºç°é—®é¢˜ï¼Œä¼šå½±å“å…¶å¥åº·æ£€æŸ¥ï¼Œå¢åŠ å˜åŠ¨ç‡ï¼Œå¯¼è‡´çº§è”ä¸ç¨³å®šã€‚&lt;/p&gt;
&lt;p&gt;CA ä¹Ÿå¯èƒ½è¢«æ”»å‡»è€…&lt;a href=&#34;https://en.wikipedia.org/wiki/Certificate_authority#CA_compromise&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ”»å‡»&lt;/a&gt;ï¼Œæ”»å‡»è€…å‡è£…æ˜¯åˆ«äººï¼Œæ¬ºéª— CA å‘å‡ºè¯ä¹¦ã€‚ç„¶åï¼Œæ”»å‡»è€…å¯ä»¥ä½¿ç”¨è¯¥è¯ä¹¦ä¸å…¶ä»–å¯¹ç­‰æ–¹é€šä¿¡ã€‚è¿™æ˜¯&lt;a href=&#34;https://en.wikipedia.org/wiki/Certificate_authority#Certificate_revocation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¯ä¹¦æ’¤é”€&lt;/a&gt;å¯ä»¥é€šè¿‡æ’¤é”€è¯ä¹¦ä½¿å…¶æ— æ•ˆæ¥è§£å†³é—®é¢˜ã€‚å¦åˆ™ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¢«æ”»å‡»çš„è¯ä¹¦ç›´åˆ°å…¶è¿‡æœŸã€‚ä¿æŒæ ¹è¯ä¹¦çš„ç§é’¥åœ¨ HSM ä¸­è‡³å…³é‡è¦ï¼Œè¯¥ HSM åº”ä¿æŒ&lt;a href=&#34;https://en.wikipedia.org/wiki/Online_and_offline&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¦»çº¿&lt;/a&gt;ï¼Œå¹¶ä½¿ç”¨ä¸­é—´è¯ä¹¦ç­¾ç½²å·¥ä½œè´Ÿè½½è¯ä¹¦ã€‚åœ¨ CA åœé¡¿æˆ–åœæ» 5 åˆ†é’Ÿçš„æƒ…å†µä¸‹ï¼Œæ‚¨å°†æ— æ³•è·å¾—æ–°çš„æˆ–ç»­æœŸçš„å·¥ä½œè´Ÿè½½è¯ä¹¦ï¼Œä½†ä¹‹å‰å‘å‡ºçš„æœ‰æ•ˆè¯ä¹¦å°†ç»§ç»­ä¸ºæ‚¨çš„å·¥ä½œè´Ÿè½½æä¾›å¼ºå¤§çš„èº«ä»½ä¿è¯ã€‚ä¸ºäº†æé«˜å‘è¡Œçš„å¯é æ€§ï¼Œæ‚¨å¯ä»¥å°†ä¸­é—´ CA éƒ¨ç½²åˆ°ä¸åŒçš„åŒºåŸŸå’Œåœ°åŒºã€‚&lt;/p&gt;
&lt;h2 id=&#34;istio-ä¸­çš„-mtls&#34;&gt;Istio ä¸­çš„ mTLS&lt;/h2&gt;
&lt;h3 id=&#34;å¯ç”¨-mtls&#34;&gt;å¯ç”¨ mTLS&lt;/h3&gt;
&lt;p&gt;åœ¨ Istio ä¸­ä¸ºå†…ç½‘åº”ç”¨ç¨‹åºå¯ç”¨ mTLS éå¸¸ç®€å•ã€‚æ‚¨éœ€è¦åšçš„å°±æ˜¯å°†æ‚¨çš„åº”ç”¨ç¨‹åºæ·»åŠ åˆ°ç½‘æ ¼ä¸­ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸ºæ‚¨çš„å‘½åç©ºé—´æ ‡è®°ä¾§è½¦æ³¨å…¥æˆ–ç¯å¢ƒæ¥å®Œæˆã€‚åœ¨ä¾§è½¦çš„æƒ…å†µä¸‹ï¼Œéœ€è¦è¿›è¡Œæ»šåŠ¨é‡å¯ï¼Œä»¥ä¾¿ä¾§è½¦è¢«æ³¨å…¥åˆ°æ‚¨çš„åº”ç”¨ç¨‹åº pod ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&#34;åŠ å¯†èº«ä»½&#34;&gt;åŠ å¯†èº«ä»½&lt;/h3&gt;
&lt;p&gt;åœ¨ Kubernetes ç¯å¢ƒä¸­ï¼Œ&lt;a href=&#34;https://istio.io/latest/docs/concepts/security/#istio-identity&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Istio&lt;/a&gt;æ ¹æ®å…¶æœåŠ¡å¸æˆ·åˆ›å»ºåº”ç”¨ç¨‹åºçš„èº«ä»½ã€‚å°†åº”ç”¨ç¨‹åºæ·»åŠ åˆ°ç½‘æ ¼åï¼Œå°†å‘ç½‘æ ¼ä¸­çš„æ¯ä¸ªåº”ç”¨ç¨‹åº pod æä¾›èº«ä»½è¯ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;é»˜è®¤æƒ…å†µä¸‹ï¼Œæ‚¨çš„ pod çš„èº«ä»½è¯ä¹¦åœ¨ 24 å°æ—¶åè¿‡æœŸï¼ŒIstio æ¯ 12 å°æ—¶æ—‹è½¬ä¸€æ¬¡ pod èº«ä»½è¯ä¹¦ï¼Œä»¥ä¾¿åœ¨å‡ºç°å¦¨å®³è¡Œä¸ºçš„æƒ…å†µä¸‹ï¼ˆä¾‹å¦‚ï¼Œè¢«æ”»å‡»çš„ CA æˆ–è¢«ç›—çš„ pod çš„ç§é’¥ï¼‰ï¼Œè¢«æ”»å‡»çš„è¯ä¹¦åªèƒ½åœ¨è¯ä¹¦è¿‡æœŸå¹¶å› æ­¤é™åˆ¶å…¶å¯èƒ½é€ æˆçš„æŸå®³çš„éå¸¸æœ‰é™çš„æ—¶é—´å†…å·¥ä½œã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼çš„-mtls&#34;&gt;å¼ºåˆ¶æ‰§è¡Œä¸¥æ ¼çš„ mTLS&lt;/h3&gt;
&lt;p&gt;é»˜è®¤çš„ mTLS è¡Œä¸ºæ˜¯å°½å¯èƒ½ä½¿ç”¨ mTLSï¼Œä½†å¹¶ä¸å¼ºåˆ¶æ‰§è¡Œã€‚è¦ä¸¥æ ¼å¼ºåˆ¶æ‚¨çš„åº”ç”¨ç¨‹åºåªæ¥å— mTLS æµé‡ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ Istio çš„&lt;a href=&#34;https://istio.io/latest/docs/reference/config/security/peer_authentication/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;PeerAuthentication&lt;/a&gt;ç­–ç•¥ï¼Œå¯¹æ•´ä¸ªç½‘æ ¼æˆ–æ¯ä¸ªå‘½åç©ºé—´æˆ–å·¥ä½œè´Ÿè½½è¿›è¡Œæ“ä½œã€‚æ­¤å¤–ï¼Œæ‚¨è¿˜å¯ä»¥åº”ç”¨ Istio çš„&lt;a href=&#34;https://istio.io/latest/docs/reference/config/security/authorization-policy/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;AuthorizationPolicy&lt;/a&gt;æ¥æ§åˆ¶æ‚¨çš„å·¥ä½œè´Ÿè½½çš„è®¿é—®ã€‚&lt;/p&gt;
&lt;h3 id=&#34;tls-ç‰ˆæœ¬&#34;&gt;TLS ç‰ˆæœ¬&lt;/h3&gt;
&lt;p&gt;TLS ç‰ˆæœ¬ 1.3 æ˜¯ Istio åœ¨å†…ç½‘åº”ç”¨ç¨‹åºé€šä¿¡ä¸­çš„é»˜è®¤è®¾ç½®ï¼Œä½¿ç”¨ Envoy çš„&lt;a href=&#34;https://www.envoyproxy.io/docs/envoy/latest/api-v3/extensions/transport_sockets/tls/v3/common.proto&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é»˜è®¤å¯†ç å¥—ä»¶&lt;/a&gt;ï¼ˆä¾‹å¦‚ï¼Œå¯¹äº Istio 1.19.0ï¼Œä¸º&lt;code&gt;TLS_AES_256_GCM_SHA384&lt;/code&gt;ï¼‰ã€‚å¦‚æœæ‚¨éœ€è¦æ—§çš„ TLS ç‰ˆæœ¬ï¼Œæ‚¨å¯ä»¥ä¸ºæ‚¨çš„å·¥ä½œè´Ÿè½½&lt;a href=&#34;https://istio.io/latest/docs/tasks/security/tls-configuration/workload-min-tls-version/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é…ç½®ä¸åŒçš„ç½‘æ ¼èŒƒå›´å†…çš„æœ€å° TLS åè®®ç‰ˆæœ¬&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“æŸè¯­&#34;&gt;ç»“æŸè¯­&lt;/h2&gt;
&lt;p&gt;ç”±äº’è”ç½‘å·¥ç¨‹ä»»åŠ¡ç»„ï¼ˆIETFï¼‰åˆ¶å®šçš„ TLS åè®®æ˜¯å­˜åœ¨çš„æœ€å¹¿æ³›å®¡æŸ¥ã€ä¸“å®¶æ‰¹å‡†ã€ç»è¿‡æˆ˜æ–—æµ‹è¯•çš„æ•°æ®å®‰å…¨åè®®ä¹‹ä¸€ã€‚TLS ä¹Ÿåœ¨å…¨çƒå¹¿æ³›ä½¿ç”¨ - æ¯å½“æ‚¨è®¿é—®ä»»ä½•å®‰å…¨ç½‘ç«™ï¼Œæ‚¨éƒ½å¯ä»¥æ”¾å¿ƒè´­ç‰©ï¼Œéƒ¨åˆ†åŸå› æ˜¯å› ä¸ºé”å®šå›¾æ ‡è¡¨æ˜æ‚¨æ­£åœ¨ä½¿ç”¨ TLS å®‰å…¨è¿æ¥åˆ°å—ä¿¡ä»»çš„ç½‘ç«™ã€‚TLS 1.3 åè®®è®¾è®¡å…·æœ‰ç«¯åˆ°ç«¯çš„èº«ä»½éªŒè¯ã€ä¿å¯†æ€§å’Œå®Œæ•´æ€§ï¼Œä»¥ç¡®ä¿æ‚¨çš„åº”ç”¨ç¨‹åºçš„èº«ä»½å’Œé€šä¿¡ä¸è¢«ç ´åï¼Œå¹¶é˜²æ­¢ä¸­é—´äººæ”»å‡»ã€‚ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼ˆå¹¶è¢«è®¤ä¸ºæ˜¯ç¬¦åˆæ ‡å‡†çš„ TLSï¼‰ï¼Œæ­£ç¡®éªŒè¯é€šä¿¡å¯¹ç­‰æ–¹å¹¶ä½¿ç”¨ä»æ¡æ‰‹åå•†çš„å¯†é’¥åŠ å¯†æµé‡ä¸ä»…é‡è¦ï¼Œè€Œä¸”è‡³å…³é‡è¦ã€‚ç°åœ¨æ‚¨çŸ¥é“ mTLS åœ¨æ»¡è¶³æ‚¨çš„å®‰å…¨åº”ç”¨ç¨‹åºé€šä¿¡è¦æ±‚ï¼ˆåŠ å¯†èº«ä»½ã€ä¿å¯†æ€§ã€å®Œæ•´æ€§å’Œè®¿é—®ç­–ç•¥æ‰§è¡Œï¼‰æ–¹é¢è¡¨ç°ä¼˜ç§€ï¼Œæ‚¨å¯ä»¥ç®€å•åœ°ä½¿ç”¨ Istio å°†æ‚¨çš„å†…ç½‘åº”ç”¨ç¨‹åºé€šä¿¡å‡çº§åˆ° mTLS - é…ç½®éå¸¸å°‘ï¼&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ç‰¹åˆ«æ„Ÿè°¢ Louis Ryanã€Ben Leggettã€John Howardã€Christian Postaã€Justin Pettit èŠ±è´¹å¤§é‡æ—¶é—´å®¡æŸ¥å’Œæå‡ºåšå®¢çš„æ›´æ–°ï¼&lt;/em&gt;&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>åˆ›ä¸šæŒ‡å—</title>
      <link>https://cloudnativecn.com/blog/startup-playbook/</link>
      <pubDate>Sun, 05 Nov 2023 18:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/startup-playbook/</guid>
      <description>&lt;p&gt;æœ¬æ–‡è¯‘è‡ªï¼š&lt;a href=&#34;https://playbook.samaltman.com/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://playbook.samaltman.com/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ‘˜è¦ï¼šåˆ›ä¸šæŒ‡å—å¼ºè°ƒäº†å‡ ä¸ªå…³é”®æ–¹é¢ï¼šé¦–å…ˆï¼Œåˆ›ä¸šå…¬å¸åº”å¿«é€Ÿè§£é›‡å¯¹æ–‡åŒ–æœ‰æ¯’çš„å‘˜å·¥ï¼Œå¿½ç•¥ç«äº‰å¯¹æ‰‹ï¼Œç‰¹åˆ«æ˜¯å½“ä»–ä»¬ç­¹é›†å¤§é‡èµ„é‡‘æˆ–åœ¨åª’ä½“ä¸Šåˆ¶é€ å¤§é‡å™ªéŸ³æ—¶ã€‚å…¶æ¬¡ï¼Œåˆ›ä¸šå…¬å¸éœ€è¦æ‰¾åˆ°ç›ˆåˆ©çš„æ–¹æ³•ï¼Œå°½å¿«è¾¾åˆ°â€œæ‹‰é¢ç›ˆåˆ©â€çš„çŠ¶æ€ï¼Œå³èµšè¶³å¤Ÿçš„é’±è®©åˆ›å§‹äººå¯ä»¥é æ‹‰é¢åº¦æ—¥ã€‚æœ€åï¼Œç­¹èµ„æ˜¯å¤§å¤šæ•°åˆ›ä¸šå…¬å¸åœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šé¢ä¸´çš„é—®é¢˜ï¼ŒæˆåŠŸç­¹èµ„çš„ç§˜è¯€æ˜¯æ‹¥æœ‰ä¸€å®¶å¥½å…¬å¸ï¼Œè€Œä¸æ˜¯è¿‡åº¦ä¼˜åŒ–æµç¨‹ã€‚åˆ›ä¸šå…¬å¸åº”è¯¥åœ¨éœ€è¦èµ„é‡‘æˆ–è€…åœ¨æ¡ä»¶å¥½çš„æƒ…å†µä¸‹ç­¹èµ„ï¼Œä½†è¦å°å¿ƒä¸è¦å¤±å»èŠ‚ä¿­ç²¾ç¥ï¼Œæˆ–è€…å¼€å§‹é€šè¿‡æŠ•é’±æ¥è§£å†³é—®é¢˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä½œè€… Sam Altman æ˜¯ä¸€ä½çŸ¥åçš„ä¼ä¸šå®¶å’ŒæŠ•èµ„äººï¼Œä»–æ˜¯ OpenAI çš„åˆ›å§‹äººï¼ŒY Combinatorï¼ˆä¸€å®¶è‘—åçš„åˆ›ä¸šå­µåŒ–å™¨ï¼‰çš„å‰ä»»ä¸»å¸­ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´ä¸ºåˆ›ä¸šå…¬å¸æä¾›å’¨è¯¢ã€‚è™½ç„¶ä¸€å¯¹ä¸€çš„å»ºè®®ä¸€ç›´æ˜¯è‡³å…³é‡è¦çš„ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºï¼Œå¦‚æœæˆ‘ä»¬èƒ½å°†è¿™äº›å»ºè®®ä¸­æœ€èƒ½æ™®éåŒ–çš„éƒ¨åˆ†æç‚¼æˆä¸€ç§å¯ä»¥ç»™ YC å’Œ YC Fellowship å…¬å¸çš„æŒ‡å—ï¼Œå¯èƒ½ä¼šå¸®åŠ©æˆ‘ä»¬æ‰©å¤§ YC çš„è§„æ¨¡ã€‚&lt;/p&gt;
&lt;p&gt;ç„¶åæˆ‘ä»¬æƒ³ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠå®ƒç»™æ‰€æœ‰äººã€‚&lt;/p&gt;
&lt;p&gt;è¿™æœ¬æŒ‡å—ä¸»è¦æ˜¯ä¸ºåˆ›ä¸šä¸–ç•Œçš„æ–°äººå‡†å¤‡çš„ã€‚å¯¹äºå·²ç»é˜…è¯»è¿‡å¾ˆå¤š YC åˆä½œä¼™ä¼´æ‰€å†™çš„å†…å®¹çš„äººæ¥è¯´ï¼Œè¿™é‡Œçš„å¤§éƒ¨åˆ†å†…å®¹å¯èƒ½å¹¶ä¸æ–°é²œâ€”â€”æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æŠŠå®ƒä»¬éƒ½é›†ä¸­åœ¨ä¸€ä¸ªåœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºå¦‚ä½•æ‰©å¤§åˆ›ä¸šå…¬å¸çš„ç¬¬äºŒéƒ¨åˆ†å¯èƒ½ä¼šåœ¨ä»¥åå‘å¸ƒâ€”â€”è¿™éƒ¨åˆ†ä¸»è¦æ¶µç›–äº†å¦‚ä½•å¯åŠ¨ä¸€ä¸ªåˆ›ä¸šå…¬å¸ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å¼•è¨€&#34;&gt;å¼•è¨€&lt;/h2&gt;
&lt;p&gt;å¼•è¨€&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬èŠ±äº†å¾ˆå¤šæ—¶é—´ä¸ºåˆ›ä¸šå…¬å¸æä¾›å’¨è¯¢ã€‚è™½ç„¶ä¸€å¯¹ä¸€çš„å»ºè®®ä¸€ç›´æ˜¯è‡³å…³é‡è¦çš„ï¼Œä½†æˆ‘ä»¬è®¤ä¸ºï¼Œå¦‚æœæˆ‘ä»¬èƒ½å°†è¿™äº›å»ºè®®ä¸­æœ€èƒ½æ™®éåŒ–çš„éƒ¨åˆ†æç‚¼æˆä¸€ç§å¯ä»¥ç»™ YC å’Œ YC Fellowship å…¬å¸çš„æŒ‡å—ï¼Œå¯èƒ½ä¼šå¸®åŠ©æˆ‘ä»¬æ‰©å¤§ YC çš„è§„æ¨¡ã€‚&lt;/p&gt;
&lt;p&gt;æƒ³æ³•&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆè¯¢é—® YC å…¬å¸ä»–ä»¬æ­£åœ¨åšä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆè¦åšã€‚æˆ‘ä»¬åœ¨æ­¤å¤„å¯»æ‰¾æ¸…æ™°ã€ç®€æ´çš„ç­”æ¡ˆã€‚è¿™æ—¢æ˜¯ä¸ºäº†è¯„ä¼°ä½ ä½œä¸ºåˆ›å§‹äººçš„èƒ½åŠ›ï¼Œä¹Ÿæ˜¯ä¸ºäº†è¯„ä¼°æƒ³æ³•æœ¬èº«ã€‚èƒ½å¤Ÿæ¸…æ™°åœ°æ€è€ƒå’Œæ²Ÿé€šå¯¹äºåˆ›å§‹äººæ¥è¯´éå¸¸é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç§€çš„å›¢é˜Ÿ&lt;/p&gt;
&lt;p&gt;å¹³åº¸çš„å›¢é˜Ÿæ— æ³•å»ºç«‹ä¼Ÿå¤§çš„å…¬å¸ã€‚æˆ‘ä»¬æœ€å…³æ³¨çš„äº‹æƒ…ä¹‹ä¸€å°±æ˜¯åˆ›å§‹äººçš„å®åŠ›ã€‚å½“æˆ‘è¿‡å»è¿›è¡ŒåæœŸæŠ•èµ„æ—¶ï¼Œæˆ‘åŒæ ·å…³æ³¨åˆ›å§‹äººæ‰€é›‡ä½£çš„å‘˜å·¥çš„å®åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç§€çš„äº§å“&lt;/p&gt;
&lt;p&gt;è¿™æ˜¯æˆåŠŸçš„ç§˜è¯€ï¼šæ‹¥æœ‰ä¸€ä¸ªä¼˜ç§€çš„äº§å“ã€‚è¿™æ˜¯æ‰€æœ‰ä¼Ÿå¤§å…¬å¸å…±æœ‰çš„å”¯ä¸€ç‰¹ç‚¹ã€‚å¦‚æœä½ æ²¡æœ‰åˆ¶é€ å‡ºç”¨æˆ·å–œçˆ±çš„äº§å“ï¼Œä½ æœ€ç»ˆå°†å¤±è´¥ã€‚ç„¶è€Œï¼Œåˆ›å§‹äººæ€»æ˜¯åœ¨å¯»æ‰¾å…¶ä»–çš„ç§˜è¯€ã€‚åˆ›ä¸šå…¬å¸æ˜¯ä½ ç”Ÿæ´»ä¸­åœæ­¢ä½¿ç”¨å°æŠŠæˆçš„æ—¶æœŸã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç§€çš„æ‰§è¡Œ&lt;/p&gt;
&lt;p&gt;è™½ç„¶å»ºç«‹ä¸€ä¸ªä¼Ÿå¤§çš„äº§å“æ˜¯å¿…è¦çš„ï¼Œä½†è¿™è¿˜ä¸å¤Ÿã€‚ä½ è¿˜éœ€è¦æŠŠå®ƒå˜æˆä¸€å®¶ä¼Ÿå¤§çš„å…¬å¸ï¼Œè€Œä¸”ä½ å¿…é¡»äº²è‡ªå»åšâ€”â€”é›‡ä½£ä¸€ä¸ªâ€œæœ‰ç»éªŒçš„ç®¡ç†è€…â€æ¥å®Œæˆæ‰€æœ‰è¿™äº›å·¥ä½œæ˜¯ä¸€ç§éå¸¸æ™®éçš„å¹»æƒ³ï¼Œä¹Ÿæ˜¯å¤±è´¥å…¬å¸çš„å¢“åœ°ã€‚ä½ ä¸èƒ½å°†è¿™é¡¹å·¥ä½œå¤–åŒ…ç»™å…¶ä»–äººå¾ˆé•¿ä¸€æ®µæ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¢é•¿&lt;/p&gt;
&lt;p&gt;å¢é•¿å’ŒåŠ¨åŠ›æ˜¯æ‰§è¡Œå·¥ä½œçš„å…³é”®ã€‚å¢é•¿ï¼ˆåªè¦ä¸æ˜¯ä»¥ 90 ç¾åˆ†çš„ä»·æ ¼å–ä¸€ç¾å…ƒé’ç¥¨çš„å¢é•¿ï¼‰èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè€Œç¼ºä¹å¢é•¿é™¤äº†å¢é•¿ä¹‹å¤–ï¼Œä¸èƒ½è¢«ä»»ä½•ä¸œè¥¿è§£å†³ã€‚å¦‚æœä½ åœ¨å¢é•¿ï¼Œä½ ä¼šæ„Ÿè§‰åˆ°ä½ æ­£åœ¨èµ¢ï¼Œäººä»¬ä¼šæ„Ÿåˆ°å¿«ä¹ã€‚&lt;/p&gt;
&lt;p&gt;ä¸“æ³¨ä¸å¼ºåº¦&lt;/p&gt;
&lt;p&gt;å¦‚æœæˆ‘å¿…é¡»æŠŠæˆ‘å…³äºå¦‚ä½•è¿ä½œçš„å»ºè®®ç®€åŒ–åˆ°åªæœ‰ä¸¤ä¸ªè¯ï¼Œæˆ‘ä¼šé€‰æ‹©ä¸“æ³¨å’Œå¼ºåº¦ã€‚è¿™äº›è¯ä¼¼ä¹çœŸçš„é€‚ç”¨äºæˆ‘æ‰€è®¤è¯†çš„æœ€å¥½çš„åˆ›å§‹äººã€‚&lt;/p&gt;
&lt;p&gt;CEO çš„èŒåŠ¡&lt;/p&gt;
&lt;p&gt;æˆ‘å‰é¢æåˆ°ï¼ŒCEO çš„å”¯ä¸€æ™®éçš„å·¥ä½œæè¿°æ˜¯ç¡®ä¿å…¬å¸å–èƒœã€‚è™½ç„¶è¿™æ˜¯çœŸçš„ï¼Œæˆ‘æƒ³æ›´å…·ä½“åœ°è°ˆè°ˆ CEO åº”è¯¥å¦‚ä½•åˆ†é…ä»–æˆ–å¥¹çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;æ‹›è˜ä¸ç®¡ç†&lt;/p&gt;
&lt;p&gt;æ‹›è˜æ˜¯ä½ æœ€é‡è¦çš„å·¥ä½œä¹‹ä¸€ï¼Œä¹Ÿæ˜¯å»ºç«‹ä¸€å®¶ä¼Ÿå¤§å…¬å¸ï¼ˆè€Œä¸ä»…ä»…æ˜¯ä¸€æ¬¾ä¼Ÿå¤§çš„äº§å“ï¼‰çš„å…³é”®ã€‚æˆ‘å…³äºæ‹›è˜çš„ç¬¬ä¸€æ¡å»ºè®®æ˜¯ä¸è¦å»åšã€‚æˆ‘ä»¬åœ¨ YC å·¥ä½œè¿‡çš„æœ€æˆåŠŸçš„å…¬å¸åœ¨å¼€å§‹é›‡ä½£å‘˜å·¥ä¹‹å‰éƒ½ç­‰äº†ç›¸å½“é•¿çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ç«äº‰å¯¹æ‰‹&lt;/p&gt;
&lt;p&gt;å…³äºç«äº‰å¯¹æ‰‹çš„ä¸€å¥å¿«é€Ÿçš„è¯ï¼šç«äº‰å¯¹æ‰‹æ˜¯åˆ›ä¸šå…¬å¸çš„é¬¼æ•…äº‹ã€‚é¦–æ¬¡åˆ›ä¸šçš„äººè®¤ä¸ºç«äº‰å¯¹æ‰‹æ˜¯ 99% çš„åˆ›ä¸šå…¬å¸æ­»äº¡çš„åŸå› ã€‚ä½†æ˜¯ï¼Œ99% çš„åˆ›ä¸šå…¬å¸æ˜¯è‡ªæ€ï¼Œè€Œä¸æ˜¯ä»–æ€ã€‚ç›¸åï¼Œä½ åº”è¯¥æ‹…å¿ƒä½ æ‰€æœ‰çš„å†…éƒ¨é—®é¢˜ã€‚å¦‚æœä½ å¤±è´¥ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºä½ æ²¡æœ‰åšå‡ºä¸€ä¸ªä¼Ÿå¤§çš„äº§å“å’Œ/æˆ–æ²¡æœ‰åšå‡ºä¸€ä¸ªä¼Ÿå¤§çš„å…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;èµšé’±&lt;/p&gt;
&lt;p&gt;å“¦ï¼Œæ˜¯çš„ï¼Œèµšé’±ã€‚ä½ éœ€è¦æ‰¾å‡ºå¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™ä¸ªé—®é¢˜çš„ç®€çŸ­ç‰ˆæœ¬æ˜¯ï¼Œä½ å¿…é¡»è®©äººä»¬ä»˜ç»™ä½ çš„é’±å¤šäºä½ æä¾›å•†å“/æœåŠ¡çš„æˆæœ¬ã€‚å‡ºäºæŸç§åŸå› ï¼Œäººä»¬æ€»æ˜¯å¿˜è®°è€ƒè™‘æä¾›å•†å“/æœåŠ¡çš„æˆæœ¬éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;ç­¹èµ„&lt;/p&gt;
&lt;p&gt;å¤§å¤šæ•°åˆ›ä¸šå…¬å¸åœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šç­¹é›†èµ„é‡‘ã€‚å½“ä½ éœ€è¦èµ„é‡‘æˆ–è€…èƒ½ä»¥ä¼˜æƒ æ¡ä»¶è·å¾—èµ„é‡‘æ—¶ï¼Œä½ åº”å½“ç­¹é›†èµ„é‡‘ã€‚å°å¿ƒä¸è¦ä¸§å¤±ä½ çš„èŠ‚ä¿­è§‚å¿µï¼Œæˆ–è€…å¼€å§‹é€šè¿‡æŠ›é’±è§£å†³é—®é¢˜ã€‚èµ„é‡‘ä¸è¶³å¯èƒ½ä¼šå¯¼è‡´é—®é¢˜ï¼Œä½†æ˜¯èµ„é‡‘è¿‡å¤šå‡ ä¹æ€»æ˜¯ä¼šå¸¦æ¥é—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;ç»“æŸè¯­&lt;/p&gt;
&lt;p&gt;è®°ä½ï¼Œæ¯ä¸ªä¼Ÿå¤§çš„æƒ³æ³•éƒ½æœ‰è‡³å°‘ä¸€åƒä¸ªäººæƒ³åˆ°è¿‡ã€‚å…¶ä¸­æœ‰ä¸€äººå®é™…ä¸Šè·å¾—äº†æˆåŠŸã€‚åŒºåˆ«åœ¨äºæ‰§è¡Œã€‚è¿™æ˜¯ä¸€ä¸ªç£¨äººçš„è¿‡ç¨‹ï¼Œæ¯ä¸ªäººéƒ½å¸Œæœ›æœ‰å…¶ä»–çš„æ–¹å¼å°†â€œæƒ³æ³•â€è½¬åŒ–ä¸ºâ€œæˆåŠŸâ€ï¼Œä½†æ˜¯è‡³ä»Šè¿˜æ²¡æœ‰äººæ‰¾åˆ°ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€å®¶åˆ›ä¸šå…¬å¸ï¼Œä½ çš„ç›®æ ‡æ˜¯åˆ›é€ ç”¨æˆ·å–œçˆ±çš„ä¸œè¥¿ã€‚å¦‚æœä½ åšåˆ°äº†è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆä½ å°±å¿…é¡»æƒ³åŠæ³•è·å¾—æ›´å¤šçš„ç”¨æˆ·ã€‚ä½†æ˜¯è¿™ä¸ªç¬¬ä¸€æ­¥æ˜¯è‡³å…³é‡è¦çš„â€”â€”æƒ³æƒ³ä»Šå¤©çš„é‚£äº›éå¸¸æˆåŠŸçš„å…¬å¸ã€‚ä»–ä»¬éƒ½æ˜¯ä»ä¸€ä¸ªæ—©æœŸç”¨æˆ·éå¸¸å–œæ¬¢å¹¶å‘å…¶ä»–äººæ¨èçš„äº§å“å¼€å§‹çš„ã€‚å¦‚æœä½ åšä¸åˆ°è¿™ä¸€ç‚¹ï¼Œä½ å°±ä¼šå¤±è´¥ã€‚å¦‚æœä½ æ¬ºéª—è‡ªå·±ï¼Œè®¤ä¸ºç”¨æˆ·å–œæ¬¢ä½ çš„äº§å“ä½†å®é™…ä¸Šä»–ä»¬å¹¶ä¸å–œæ¬¢ï¼Œä½ ä»ç„¶ä¼šå¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›ä¸šå…¬å¸çš„å¢“åœ°ä¸Šæ•£è½ç€è®¤ä¸ºä»–ä»¬å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥çš„äººä»¬çš„å°¸ä½“ã€‚&lt;/p&gt;
&lt;p&gt;ä¸å¤§é‡ç”¨æˆ·å–œæ¬¢çš„äº§å“ç›¸æ¯”ï¼Œé¦–å…ˆåˆ¶ä½œå‡ºä¸€å°éƒ¨åˆ†ç”¨æˆ·å–œçˆ±çš„äº§å“è¦å¥½å¾—å¤šã€‚å°½ç®¡æ€»ä½“ä¸Šçš„ç§¯ææ„Ÿè§‰æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è·å–æ›´å¤šç”¨æˆ·è¦æ¯”ä»å–œæ¬¢å˜ä¸ºå–œçˆ±å®¹æ˜“å¾—å¤šã€‚&lt;/p&gt;
&lt;p&gt;å…³äºé€‰æ‹©åˆ›ä¸šçš„è­¦å‘Šï¼šè¿™çœŸçš„å¾ˆç³Ÿç³•ï¼æˆ‘ä»¬ä» YC åˆ›å§‹äººé‚£é‡Œå¾—åˆ°çš„æœ€ä¸€è‡´çš„åé¦ˆå°±æ˜¯ï¼Œå®ƒæ¯”ä»–ä»¬æƒ³è±¡ä¸­çš„è¦éš¾ï¼Œå› ä¸ºä»–ä»¬æ²¡æœ‰ä¸€ä¸ªæ¡†æ¶æ¥ç†è§£åˆ›ä¸šéœ€è¦çš„å·¥ä½œå’Œå¼ºåº¦ã€‚åŠ å…¥ä¸€ä¸ªåˆåˆ›é˜¶æ®µã€å‘å±•åŠ¿å¤´å¼ºåŠ²çš„åˆ›ä¸šå…¬å¸é€šå¸¸æ˜¯ä¸€ä¸ªæ›´å¥½çš„è´¢åŠ¡é€‰æ‹©ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€æ–¹é¢ï¼Œåˆ›ä¸šå¯¹ä½ çš„èŒä¸šç”Ÿæ¶¯å®é™…ä¸Šå¹¶ä¸å†’é™©â€”â€”å¦‚æœä½ çœŸçš„æ“…é•¿ç§‘æŠ€ï¼Œå³ä½¿ä½ å¤±è´¥äº†ï¼Œä½ ä¹Ÿè¿˜æœ‰å·¥ä½œæœºä¼šã€‚å¤§å¤šæ•°äººéå¸¸ä¸æ“…é•¿è¯„ä¼°é£é™©ã€‚æˆ‘ä¸ªäººè®¤ä¸ºï¼Œæ›´å†’é™©çš„é€‰é¡¹æ˜¯æ‹¥æœ‰ä¸€ä¸ªä½ éå¸¸çƒ­è¡·çš„æƒ³æ³•æˆ–é¡¹ç›®ï¼Œä½†æ˜¯é€‰æ‹©åœ¨ä¸€ä¸ªå®‰å…¨ã€è½»æ¾ã€æ²¡æœ‰æˆå°±æ„Ÿçš„å·¥ä½œä¸­å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;è¦æˆåŠŸçš„åˆ›ä¸šå…¬å¸éœ€è¦ï¼šä¸€ä¸ªä¼Ÿå¤§çš„æƒ³æ³•ï¼ˆåŒ…æ‹¬ä¸€ä¸ªä¼Ÿå¤§çš„å¸‚åœºï¼‰ã€ä¸€ä¸ªä¼Ÿå¤§çš„å›¢é˜Ÿã€ä¸€ä¸ªä¼Ÿå¤§çš„å“ï¼Œå’Œä¼Ÿå¤§çš„æ‰§è¡ŒåŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç†å¿µ&#34;&gt;ç†å¿µ&lt;/h2&gt;
&lt;p&gt;æˆ‘ä»¬é¦–å…ˆè¯¢é—® YC å…¬å¸çš„æ˜¯ä»–ä»¬æ­£åœ¨åšä»€ä¹ˆä»¥åŠä¸ºä»€ä¹ˆã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨è¿™é‡Œå¯»æ‰¾æ¸…æ™°ï¼Œç®€æ´çš„ç­”æ¡ˆã€‚è¿™æ—¢æ˜¯ä¸ºäº†è¯„ä¼°ä½ ä½œä¸ºåˆ›å§‹äººï¼Œä¹Ÿæ˜¯ä¸ºäº†è¯„ä¼°æƒ³æ³•æœ¬èº«ã€‚ä½œä¸ºåˆ›å§‹äººï¼Œèƒ½å¤Ÿæ¸…æ™°åœ°æ€è€ƒå’Œäº¤æµå¾ˆé‡è¦ - ä½ éœ€è¦ç”¨å®ƒæ¥æ‹›è˜ï¼Œç­¹é›†èµ„é‡‘ï¼Œé”€å”®ç­‰ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæƒ³æ³•éœ€è¦æ¸…æ™°æ‰èƒ½ä¼ æ’­ï¼Œå¤æ‚çš„æƒ³æ³•å‡ ä¹æ€»æ˜¯æ··ä¹±æ€ç»´æˆ–è€…é—®é¢˜çš„æ ‡å¿—ã€‚å¦‚æœæƒ³æ³•ç¬¬ä¸€æ¬¡å¬åˆ°æ—¶å¹¶æœªçœŸæ­£æ¿€å‘èµ·è‡³å°‘ä¸€äº›äººçš„å…´è¶£ï¼Œé‚£å°±ç³Ÿç³•äº†ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜ä¼šé—®è°è¿«åˆ‡éœ€è¦è¿™ä¸ªäº§å“ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„æƒ…å†µæ˜¯ï¼Œä½ è‡ªå·±å°±æ˜¯ç›®æ ‡ç”¨æˆ·ã€‚å…¶æ¬¡æ˜¯ä½ éå¸¸äº†è§£ç›®æ ‡ç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå…¬å¸å·²ç»æœ‰ç”¨æˆ·ï¼Œæˆ‘ä»¬ä¼šè¯¢é—®æœ‰å¤šå°‘ç”¨æˆ·ï¼Œä»¥åŠè¿™ä¸ªæ•°å­—æ­£åœ¨å¦‚ä½•å¢é•¿ã€‚æˆ‘ä»¬è¯•å›¾å¼„æ¸…æ¥šä¸ºä»€ä¹ˆå®ƒæ²¡æœ‰å¢é•¿å¾—æ›´å¿«ï¼Œæˆ‘ä»¬ç‰¹åˆ«è¯•å›¾å¼„æ¸…æ¥šç”¨æˆ·æ˜¯å¦çœŸçš„å–œæ¬¢è¿™ä¸ªäº§å“ã€‚é€šå¸¸ï¼Œè¿™æ„å‘³ç€ä»–ä»¬åœ¨å…¬å¸æ²¡æœ‰æç¤ºçš„æƒ…å†µä¸‹å‘Šè¯‰ä»–ä»¬çš„æœ‹å‹ä½¿ç”¨äº§å“ã€‚æˆ‘ä»¬è¿˜ä¼šé—®å…¬å¸æ˜¯å¦æ­£åœ¨åˆ›æ”¶ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¸ºä»€ä¹ˆæ²¡æœ‰ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœå…¬å¸å°šæ— ç”¨æˆ·ï¼Œæˆ‘ä»¬ä¼šè¯•å›¾ææ¸…æ¥šé¦–å…ˆè¦å»ºç«‹çš„æœ€å°äº‹ç‰© - å³ï¼Œå¦‚æœæˆ‘ä»¬ä»å®Œç¾çš„ä½“éªŒåå‘å·¥ä½œï¼Œæˆ‘ä»¬è¯•å›¾ææ¸…æ¥šä»å“ªä¸ªæ ¸å¿ƒå¼€å§‹ã€‚&lt;/p&gt;
&lt;p&gt;æµ‹è¯•ä¸€ä¸ªæƒ³æ³•çš„æ–¹å¼æ˜¯å¯åŠ¨å®ƒå¹¶çœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼Œæˆ–è€…å°è¯•é”€å”®å®ƒï¼ˆä¾‹å¦‚ï¼Œåœ¨ä½ ç¼–å†™ä¸€è¡Œä»£ç ä¹‹å‰å°è¯•è·å¾—æ„å‘ä¹¦ã€‚ï¼‰å‰è€…æ›´é€‚åˆæ¶ˆè´¹è€…æƒ³æ³•ï¼ˆç”¨æˆ·å¯èƒ½ä¼šå‘Šè¯‰ä½ ä»–ä»¬ä¼šä½¿ç”¨å®ƒï¼Œä½†å®é™…ä¸Šå¯èƒ½æ— æ³•è„±é¢–è€Œå‡ºï¼‰ï¼Œåè€…æ›´é€‚åˆä¼ä¸šæƒ³æ³•ï¼ˆå¦‚æœä¸€å®¶å…¬å¸å‘Šè¯‰ä½ ä»–ä»¬ä¼šè´­ä¹°æŸç‰©ï¼Œé‚£ä¹ˆå°±å»å»ºé€ å®ƒã€‚ï¼‰å…·ä½“æ¥è¯´ï¼Œå¦‚æœä½ æ˜¯ä¸€å®¶ä¼ä¸šå…¬å¸ï¼Œæˆ‘ä»¬ä¼šé¦–å…ˆé—®ä½ çš„é—®é¢˜ä¹‹ä¸€æ˜¯ï¼Œä½ æ˜¯å¦æœ‰ä¸€ä»½æ¥è‡ªå®¢æˆ·çš„æ„å‘ä¹¦ï¼Œç§°ä»–ä»¬ä¼šè´­ä¹°ä½ æ­£åœ¨å»ºé€ çš„ä¸œè¥¿ã€‚å¯¹äºå¤§å¤šæ•°ç”Ÿç‰©æŠ€æœ¯å’Œç¡¬ç§‘æŠ€å…¬å¸ï¼Œæµ‹è¯•æƒ³æ³•çš„æ–¹æ³•æ˜¯é¦–å…ˆä¸æ½œåœ¨å®¢æˆ·äº¤è°ˆï¼Œç„¶åææ¸…æ¥šé¦–å…ˆå¯ä»¥å»ºé€ çš„æŠ€æœ¯çš„æœ€å°å­é›†ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ ä»ç”¨æˆ·é‚£é‡Œå¾—åˆ°åé¦ˆæ—¶ï¼Œè®©ä½ çš„æƒ³æ³•è¿›åŒ–æ˜¯éå¸¸é‡è¦çš„ã€‚å¹¶ä¸”ä½ çœŸçš„éœ€è¦éå¸¸äº†è§£ä½ çš„ç”¨æˆ· - ä½ éœ€è¦è¿™ä¸ªæ¥è¯„ä¼°ä¸€ä¸ªæƒ³æ³•ï¼Œæ‰“é€ ä¸€ä¸ªä¼Ÿå¤§çš„äº§å“ï¼Œå¹¶å»ºç«‹ä¸€ä¸ªä¼Ÿå¤§çš„å…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚å‰æ‰€è¿°ï¼Œåˆ›ä¸šæ˜¯éå¸¸è‰°éš¾çš„ã€‚å®ƒéœ€è¦å¾ˆé•¿çš„æ—¶é—´å’ŒæŒç»­çš„å¼ºçƒˆåŠªåŠ›ã€‚åˆ›å§‹äººå’Œå‘˜å·¥éœ€è¦æœ‰å…±äº«çš„ä½¿å‘½æ„Ÿæ¥æ”¯æŒä»–ä»¬ã€‚æ‰€ä»¥æˆ‘ä»¬è¯¢é—®åˆ›å§‹äººä¸ºä»€ä¹ˆæƒ³è¦åˆ›åŠè¿™ä¸ªç‰¹å®šçš„å…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬è¿˜ä¼šé—®è¿™å®¶å…¬å¸å°†å¦‚ä½•æˆä¸ºä¸€å®¶å„æ–­å…¬å¸ã€‚è¿™æœ‰å¾ˆå¤šä¸åŒçš„æœ¯è¯­ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨å½¼å¾—Â·è’‚å°”ï¼ˆPeter Thielï¼‰çš„ã€‚æ˜¾ç„¶ï¼Œæˆ‘ä»¬ä¸å¸Œæœ›ä½ çš„å…¬å¸å¯¹ç«äº‰å¯¹æ‰‹é‡‡å–ä¸é“å¾·çš„è¡Œä¸ºã€‚ç›¸åï¼Œæˆ‘ä»¬æ­£åœ¨å¯»æ‰¾éšç€è§„æ¨¡çš„æ‰©å¤§å˜å¾—æ›´å¼ºå¤§ä¸”éš¾ä»¥å¤åˆ¶çš„ä¼ä¸šã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œæˆ‘ä»¬æé—®å…³äºå¸‚åœºã€‚æˆ‘ä»¬è¯¢é—®å¸‚åœºä»Šå¤©çš„è§„æ¨¡ï¼Œå¢é•¿é€Ÿåº¦æœ‰å¤šå¿«ï¼Œä»¥åŠä¸ºä»€ä¹ˆåœ¨åå¹´åå®ƒä¼šå˜å¾—å¾ˆå¤§ã€‚æˆ‘ä»¬è¯•å›¾ç†è§£ä¸ºä»€ä¹ˆå¸‚åœºå°†å¿«é€Ÿå¢é•¿ï¼Œä»¥åŠä¸ºä»€ä¹ˆè¿™æ˜¯ä¸€ä¸ªåˆ›ä¸šå…¬å¸åº”è¯¥è¿½æ±‚çš„å¥½å¸‚åœºã€‚æˆ‘ä»¬å–œæ¬¢åœ¨å¤§å¤šæ•°äººè¿˜æ²¡æœ‰æ„è¯†åˆ°çš„æ—¶å€™ï¼Œä¸»è¦çš„æŠ€æœ¯è½¬å˜åˆšåˆšå¼€å§‹â€”â€”å¤§å…¬å¸åœ¨å¤„ç†è¿™äº›é—®é¢˜ä¸Šä¸æ“…é•¿ã€‚è€Œä¸”æœ‰ç‚¹åç›´è§‰çš„æ˜¯ï¼Œæœ€å¥½çš„ç­”æ¡ˆæ˜¯å»è¿½æ±‚ä¸€ä¸ªå°å¸‚åœºçš„å¤§éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºæƒ³æ³•çš„ä¸€äº›å…¶ä»–æƒ³æ³•ï¼š&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ›´å–œæ¬¢æ–°çš„ä¸œè¥¿è€Œä¸æ˜¯è¡ç”Ÿçš„ä¸œè¥¿ã€‚å¤§å¤šæ•°çœŸæ­£çš„å¤§å…¬å¸éƒ½ä»ä¸€äº›æ ¹æœ¬æ–°çš„ä¸œè¥¿å¼€å§‹ï¼ˆæ–°çš„ä¸€ä¸ªå¯æ¥å—çš„å®šä¹‰æ˜¯æ¯”åŸæ¥å¥½ 10 å€ï¼‰ã€‚å¦‚æœæœ‰åä¸ªå…¶ä»–å…¬å¸åŒæ—¶å¼€å§‹å®æ–½åŒæ ·çš„è®¡åˆ’ï¼Œå¹¶ä¸”å¬èµ·æ¥å¾ˆåƒå·²ç»å­˜åœ¨çš„ä¸œè¥¿ï¼Œæˆ‘ä»¬ä¼šæŒæ€€ç–‘æ€åº¦ã€‚&lt;/p&gt;
&lt;p&gt;è¿™å…¶ä¸­ä¸€ä¸ªé‡è¦çš„åç›´è§‰åŸå› æ˜¯ï¼Œåšä¸€äº›æ–°çš„å’Œå›°éš¾çš„äº‹æƒ…æ¯”åšä¸€äº›è¡ç”Ÿçš„å’Œå®¹æ˜“çš„äº‹æƒ…æ›´å®¹æ˜“ã€‚å¦‚æœæ˜¯å‰è€…ï¼Œäººä»¬ä¼šæƒ³è¦å¸®åŠ©ä½ å’ŒåŠ å…¥ä½ ï¼›å¦‚æœæ˜¯åè€…ï¼Œä»–ä»¬ä¸ä¼šã€‚&lt;/p&gt;
&lt;p&gt;å¥½çš„æƒ³æ³•å¬èµ·æ¥ä¸å¥½ï¼Œä½†å®é™…ä¸Šæ˜¯å¥½çš„ã€‚æ‰€ä»¥ï¼Œä½ ä¸éœ€è¦å¯¹ä½ çš„æƒ³æ³•è¿‡äºä¿å¯†â€”â€”å¦‚æœå®ƒå®é™…ä¸Šæ˜¯ä¸ªå¥½ä¸»æ„ï¼Œé‚£ä¹ˆå®ƒå¯èƒ½çœ‹èµ·æ¥ä¸å€¼å¾—å·ã€‚å³ä½¿å®ƒå¬èµ·æ¥å€¼å¾—å·ï¼Œæœ‰å¥½æƒ³æ³•çš„äººè‡³å°‘æ¯”æ„¿æ„ä»˜å‡ºå°†ä¼Ÿå¤§çš„æƒ³æ³•å˜æˆä¼Ÿå¤§å…¬å¸æ‰€éœ€çš„å·¥ä½œçš„äººå¤šä¸€åƒå€ã€‚è€Œä¸”ï¼Œå¦‚æœä½ å‘Šè¯‰äººä»¬ä½ åœ¨åšä»€ä¹ˆï¼Œä»–ä»¬å¯èƒ½ä¼šå¸®åŠ©ã€‚&lt;/p&gt;
&lt;p&gt;è¯´åˆ°å‘Šè¯‰äººä»¬ä½ çš„æƒ³æ³•â€”â€”è™½ç„¶è¿™ä¸ªæƒ³æ³•ç¬¬ä¸€æ¬¡å¬åˆ°æ—¶çœŸçš„è®©ä¸€äº›äººå¾ˆå…´å¥‹æ˜¯å¾ˆé‡è¦çš„ï¼Œä½†å‡ ä¹æ¯ä¸ªäººéƒ½ä¼šå‘Šè¯‰ä½ ï¼Œä½ çš„æƒ³æ³•å¾ˆç³Ÿç³•ã€‚ä¹Ÿè®¸ä»–ä»¬æ˜¯å¯¹çš„ã€‚ä¹Ÿè®¸ä»–ä»¬ä¸æ“…é•¿è¯„ä¼°åˆ›ä¸šå…¬å¸ï¼Œæˆ–è€…ä¹Ÿè®¸ä»–ä»¬åªæ˜¯&lt;/p&gt;
&lt;p&gt;åœ¨è®¨è®ºä½ çš„åˆ›æ„æ—¶ï¼Œä½ éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œå°½ç®¡ä½ çš„åˆ›æ„åœ¨äººä»¬ç¬¬ä¸€æ¬¡å¬åˆ°æ—¶ï¼Œå¯èƒ½ä¼šè®©ä¸€äº›äººæ„Ÿåˆ°éå¸¸å…´å¥‹ï¼Œä½†å‡ ä¹æ‰€æœ‰äººéƒ½ä¼šå‘Šè¯‰ä½ ï¼Œä½ çš„åˆ›æ„å¤ªç³Ÿç³•äº†ã€‚ä¹Ÿè®¸ä»–ä»¬æ˜¯å¯¹çš„ï¼Œä¹Ÿè®¸ä»–ä»¬ä¸æ“…é•¿è¯„ä¼°åˆ›ä¸šå…¬å¸ï¼Œæˆ–è€…ä»–ä»¬åªæ˜¯å«‰å¦’ã€‚æ— è®ºåŸå› æ˜¯ä»€ä¹ˆï¼Œè¿™ç§æƒ…å†µéƒ½ä¼šç»å¸¸å‘ç”Ÿï¼Œä¼šè®©ä½ æ„Ÿåˆ°ç—›è‹¦ï¼Œå³ä½¿ä½ è®¤ä¸ºè‡ªå·±ä¸ä¼šå—åˆ°å®ƒçš„å½±å“ï¼Œä½ è¿˜æ˜¯ä¼šå—åˆ°å½±å“ã€‚ä½ èƒ½å¤Ÿè¶Šå¿«åœ°å»ºç«‹è‡ªæˆ‘ä¿¡å¿µï¼Œä¸è¢«æ†æ¨è€…æ‹–ç´¯ï¼Œä½ å°±ä¼šè¶Šå¥½ã€‚æ— è®ºä½ æœ‰å¤šæˆåŠŸï¼Œæ†æ¨è€…æ°¸è¿œä¸ä¼šæ¶ˆå¤±ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ²¡æœ‰åˆ›æ„ï¼Œä½†æƒ³è¦åˆ›ä¸šï¼Œä¹Ÿè®¸ä½ ä¸åº”è¯¥è¿™ä¹ˆåšã€‚é¦–å…ˆæœ‰åˆ›æ„ï¼Œç„¶ååˆ›ä¸šæ˜¯å°†åˆ›æ„æ¨å‘ä¸–ç•Œçš„æ–¹å¼ï¼Œè¿™æ ·åšä¼šæ›´å¥½ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ›¾ç»å°è¯•è¿‡ä¸€ä¸ªå®éªŒï¼Œæˆ‘ä»¬èµ„åŠ©ä¸€æ‰¹æ²¡æœ‰åˆ›æ„çš„æœ‰å‰é€”çš„åˆ›å§‹å›¢é˜Ÿï¼Œå¸Œæœ›ä»–ä»¬åœ¨æˆ‘ä»¬èµ„åŠ©ä»–ä»¬åèƒ½æ‰¾åˆ°ä¸€ä¸ªæœ‰å‰é€”çš„åˆ›æ„ã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬éƒ½å¤±è´¥äº†ã€‚æˆ‘è®¤ä¸ºé—®é¢˜çš„ä¸€éƒ¨åˆ†æ˜¯ï¼Œå¥½çš„åˆ›å§‹äººé€šå¸¸æœ‰å¾ˆå¤šå¥½çš„åˆ›æ„ï¼ˆé€šå¸¸æ˜¯å¤ªå¤šï¼‰ã€‚ä½†æ›´å¤§çš„é—®é¢˜æ˜¯ï¼Œä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªåˆ›ä¸šå…¬å¸ï¼Œä½ å°±å¿…é¡»èµ¶å¿«æƒ³å‡ºä¸€ä¸ªåˆ›æ„ï¼Œè€Œä¸”å› ä¸ºå®ƒå·²ç»æ˜¯ä¸€ä¸ªæ­£å¼çš„å…¬å¸ï¼Œæ‰€ä»¥åˆ›æ„ä¸èƒ½å¤ªç–¯ç‹‚ã€‚ä½ æœ€ç»ˆä¼šå¾—åˆ°çœ‹èµ·æ¥åˆç†ä½†æ˜¯è¡ç”Ÿçš„åˆ›æ„ã€‚è¿™å°±æ˜¯è½¬å‹çš„å±é™©ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ï¼Œæœ€å¥½ä¸è¦è¿‡äºç§¯æåœ°å¼ºè¿«è‡ªå·±æƒ³å‡ºåˆ›ä¸šåˆ›æ„ã€‚ç›¸åï¼Œå­¦ä¹ ä¸åŒçš„ä¸œè¥¿ã€‚ç»ƒä¹ æ³¨æ„é—®é¢˜ï¼Œçœ‹èµ·æ¥æ•ˆç‡ä½çš„äº‹æƒ…ï¼Œä»¥åŠé‡å¤§çš„æŠ€æœ¯è½¬å˜ã€‚&lt;a href=&#34;http://blog.samaltman.com/projects-and-companies&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;åšä½ æ„Ÿå…´è¶£çš„é¡¹ç›®&lt;/a&gt;ã€‚å°½å¯èƒ½åœ°å’Œèªæ˜ã€æœ‰è¶£çš„äººåœ¨ä¸€èµ·ã€‚åœ¨æŸä¸ªæ—¶å€™ï¼Œåˆ›æ„å°±ä¼šå‡ºç°ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¼˜ç§€çš„å›¢é˜Ÿ&#34;&gt;ä¼˜ç§€çš„å›¢é˜Ÿ&lt;/h2&gt;
&lt;p&gt;å¹³åº¸çš„å›¢é˜Ÿä¸ä¼šå»ºç«‹ä¼Ÿå¤§çš„å…¬å¸ã€‚æˆ‘ä»¬æœ€å…³æ³¨çš„äº‹æƒ…ä¹‹ä¸€æ˜¯åˆ›å§‹äººçš„å®åŠ›ã€‚å½“æˆ‘è¿‡å»åšåæœŸæŠ•èµ„çš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿååˆ†å…³æ³¨åˆ›å§‹äººæ‰€é›‡ä½£çš„å‘˜å·¥çš„å®åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;ä»€ä¹ˆæ‰æ˜¯ä¼˜ç§€çš„åˆ›å§‹äººå‘¢ï¼Ÿæœ€é‡è¦çš„ç‰¹æ€§æ˜¯åšä¸å¯æ‘§ï¼Œå†³å¿ƒï¼Œåšå®å¯é ï¼Œå’Œè¶³æ™ºå¤šè°‹ã€‚æ™ºåŠ›å’Œçƒ­æƒ…ä¹Ÿéå¸¸é‡è¦ã€‚è¿™äº›éƒ½æ¯”ç»éªŒå’Œè¯­è¨€ X æ¡†æ¶ Y çš„â€œä¸“ä¸šçŸ¥è¯†â€æ›´é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬æ³¨æ„åˆ°æœ€æˆåŠŸçš„åˆ›å§‹äººæ˜¯é‚£ç§ä¸ä¹‹åˆä½œå‹åŠ›è¾ƒå°çš„äººï¼Œå› ä¸ºä½ è§‰å¾—â€œæ— è®ºä»€ä¹ˆäº‹ï¼Œä»–/å¥¹éƒ½èƒ½å®Œæˆâ€ã€‚æœ‰æ—¶å€™ï¼Œä½ å¯ä»¥é€šè¿‡ sheer force of will æ¥å–å¾—æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;å¥½çš„åˆ›å§‹äººå…·æœ‰è®¸å¤šçœ‹ä¼¼çŸ›ç›¾çš„ç‰¹è´¨ã€‚ä¸€ä¸ªé‡è¦çš„ä¾‹å­æ˜¯åˆšæŸ”å¹¶æµã€‚ä½ æƒ³è¦æœ‰å…³äºå…¬å¸æ ¸å¿ƒå’Œå…¶ä½¿å‘½çš„å¼ºçƒˆä¿¡å¿µï¼Œä½†æ˜¯åœ¨å‡ ä¹æ‰€æœ‰å…¶ä»–äº‹æƒ…ä¸Šï¼Œä½ è¿˜éœ€è¦éå¸¸çµæ´»å¹¶æ„¿æ„å­¦ä¹ æ–°äº‹ç‰©ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„åˆ›å§‹äººååº”éå¸¸æ•æ·ã€‚è¿™æ˜¯æœæ–­ï¼Œä¸“æ³¨ï¼Œçƒ­æƒ…å’Œæ‰§è¡ŒåŠ›çš„æŒ‡ç¤ºå™¨ã€‚&lt;/p&gt;
&lt;p&gt;ä¸ä¹‹äº¤è°ˆå›°éš¾çš„åˆ›å§‹äººå‡ ä¹æ€»æ˜¯ç³Ÿç³•çš„ã€‚æ²Ÿé€šæ˜¯åˆ›å§‹äººéå¸¸é‡è¦çš„æŠ€èƒ½ - å®é™…ä¸Šï¼Œæˆ‘è®¤ä¸ºè¿™æ˜¯æœ€é‡è¦çš„ä¸€ç§é²œä¸ºäººçŸ¥çš„åˆ›å§‹äººæŠ€èƒ½ã€‚&lt;/p&gt;
&lt;p&gt;ç§‘æŠ€åˆ›ä¸šå…¬å¸è‡³å°‘éœ€è¦ä¸€ä¸ªèƒ½å¤Ÿæ„å»ºå…¬å¸äº§å“æˆ–æœåŠ¡çš„åˆ›å§‹äººï¼Œä»¥åŠè‡³å°‘ä¸€ä¸ªåœ¨é”€å”®å’Œä¸ç”¨æˆ·äº¤è°ˆæ–¹é¢æ˜¯ï¼ˆæˆ–å¯ä»¥æˆä¸ºï¼‰æ“…é•¿çš„åˆ›å§‹äººã€‚è¿™å¯ä»¥æ˜¯åŒä¸€ä¸ªäººã€‚&lt;/p&gt;
&lt;p&gt;åœ¨é€‰æ‹©è”åˆåˆ›å§‹äººæ—¶è€ƒè™‘è¿™äº›æ ‡å‡† - è¿™æ˜¯ä½ å°†åšå‡ºçš„æœ€é‡è¦çš„å†³å®šä¹‹ä¸€ï¼Œè€Œè¿™é€šå¸¸æ˜¯ç›¸å½“éšæœºçš„ã€‚ä½ éœ€è¦äº†è§£ä½ çš„äººï¼Œè€Œä¸æ˜¯ä½ åˆšåœ¨åˆ›å§‹äººçº¦ä¼šä¸Šé‡åˆ°çš„äººã€‚ä½ å¯ä»¥ä½¿ç”¨æ›´å¤šçš„æ•°æ®æ¥è¯„ä¼°ä½ å¯èƒ½ä¸ä¹‹åˆä½œçš„ä»»ä½•äººï¼Œå¹¶ä¸”ä½ çœŸçš„ä¸æƒ³å¾—åˆ°è¿™ä¸ªé”™è¯¯çš„ç­”æ¡ˆã€‚æ­¤å¤–ï¼Œåœ¨æŸä¸ªæ—¶åˆ»ï¼Œåˆ›ä¸šå…¬å¸çš„é¢„æœŸä»·å€¼å¯èƒ½ä¼šä½äº X è½´ã€‚å¦‚æœä½ ä¸ä½ çš„è”åˆåˆ›å§‹äººæœ‰é¢„å…ˆå­˜åœ¨çš„å…³ç³»ï¼Œä½ ä»¬éƒ½ä¸ä¼šå¸Œæœ›è®©å¯¹æ–¹å¤±æœ›ï¼Œä½ ä»¬ä¼šç»§ç»­å‰è¿›ã€‚åˆ›å§‹äººåˆ†æ‰‹æ˜¯æ—©æœŸåˆ›ä¸šå…¬å¸æ­»äº¡çš„ä¸»è¦åŸå› ä¹‹ä¸€ï¼Œæˆ‘ä»¬åœ¨åˆ›å§‹äººä¸ºäº†åˆ›åŠå…¬å¸è€Œè§é¢çš„æƒ…å†µä¸‹çœ‹åˆ°è¿™ç§æƒ…å†µå‘ç”Ÿå¾—éå¸¸éå¸¸é¢‘ç¹ã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„æƒ…å†µï¼Œæ— ç–‘æ˜¯ï¼Œæ‹¥æœ‰ä¸€ä¸ªå¥½çš„è”åˆåˆ›å§‹äººã€‚å…¶æ¬¡æ˜¯æˆä¸ºå•æ‰“ç‹¬æ–—çš„åˆ›å§‹äººã€‚æœ€ç³Ÿç³•çš„æƒ…å†µï¼Œæ— ç–‘æ˜¯ï¼Œæœ‰ä¸€ä¸ªç³Ÿç³•çš„è”åˆåˆ›å§‹äººã€‚å¦‚æœäº‹æƒ…æ²¡æœ‰è¿›å±•ï¼Œä½ åº”è¯¥å°½å¿«åˆ†é“æ‰¬é•³ã€‚&lt;/p&gt;
&lt;p&gt;å…³äºè‚¡æƒçš„ä¸€ä¸ªå¿«é€Ÿæç¤ºï¼šå…³äºè‚¡æƒåˆ†é…çš„è°ˆè¯éšç€æ—¶é—´çš„æ¨ç§»å¹¶æ²¡æœ‰å˜å¾—æ›´å®¹æ˜“ - æœ€å¥½æ—©ç‚¹è®¾ç½®ã€‚å‡ ä¹å¹³ç­‰æ˜¯æœ€å¥½çš„ï¼Œå°½ç®¡åœ¨ä¸¤ä¸ªåˆ›å§‹äººçš„æƒ…å†µä¸‹ï¼Œæœ€å¥½æœ‰ä¸€ä¸ªäººæ‹¥æœ‰é¢å¤–çš„è‚¡ä»½ä»¥é˜²æ­¢åœ¨åˆ›å§‹äººæœ‰åˆ†æ­§æ—¶å‡ºç°åƒµå±€ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ä¼˜ç§€çš„äº§å“&#34;&gt;ä¼˜ç§€çš„äº§å“&lt;/h2&gt;
&lt;p&gt;æˆåŠŸçš„ç§˜è¯€å°±æ˜¯æ‹¥æœ‰ä¸€ä¸ªä¼˜ç§€çš„äº§å“ã€‚è¿™æ˜¯æ‰€æœ‰ä¼Ÿå¤§å…¬å¸çš„å…±åŒç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æ²¡æœ‰å¼€å‘å‡ºç”¨æˆ·å–œçˆ±çš„äº§å“ï¼Œä½ æœ€ç»ˆå°†ä¼šå¤±è´¥ã€‚ç„¶è€Œï¼Œåˆ›å§‹äººæ€»æ˜¯åœ¨å¯»æ‰¾å…¶ä»–çš„ç­–ç•¥ã€‚åˆ›ä¸šæ˜¯ä½ äººç”Ÿä¸­ä¸èƒ½å†ä¾èµ–æŠ€å·§çš„æ—¶æœŸã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç§€çš„äº§å“æ˜¯é•¿æœŸå¢é•¿çš„å”¯ä¸€æ–¹å¼ã€‚æœ€ç»ˆï¼Œä½ çš„å…¬å¸ä¼šå˜å¾—å¦‚æ­¤åºå¤§ï¼Œä»¥è‡³äºæ‰€æœ‰çš„å¢é•¿é»‘å®¢éƒ½æ— æ³•è¿ä½œï¼Œä½ å¿…é¡»ä¾é äººä»¬æƒ³è¦ä½¿ç”¨ä½ çš„äº§å“æ¥å‘å±•ã€‚è¿™æ˜¯ç†è§£è¶…çº§æˆåŠŸå…¬å¸æœ€é‡è¦çš„äº‹æƒ…ã€‚æ²¡æœ‰å…¶ä»–æ–¹å¼ã€‚æƒ³æƒ³æ‰€æœ‰éå¸¸æˆåŠŸçš„ç§‘æŠ€å…¬å¸â€”â€”ä»–ä»¬éƒ½è¿™ä¹ˆåšã€‚&lt;/p&gt;
&lt;p&gt;ä½ éœ€è¦åœ¨ä½ çš„å…¬å¸ä¸­å»ºç«‹ä¸€ä¸ªâ€œäº§å“æ”¹è¿›å¼•æ“â€ã€‚ä½ åº”è¯¥ä¸ä½ çš„ç”¨æˆ·äº¤è°ˆï¼Œè§‚å¯Ÿä»–ä»¬å¦‚ä½•ä½¿ç”¨ä½ çš„äº§å“ï¼Œæ‰¾å‡ºå“ªäº›éƒ¨åˆ†è¡¨ç°ä¸ä½³ï¼Œç„¶åæ”¹è¿›ä½ çš„äº§å“ã€‚ç„¶åå†åšä¸€æ¬¡ã€‚è¿™ä¸ªå‘¨æœŸåº”è¯¥æ˜¯å…¬å¸çš„é¦–è¦å…³æ³¨ç‚¹ï¼Œå®ƒåº”è¯¥æ¨åŠ¨æ‰€æœ‰å…¶ä»–äº‹æƒ…ã€‚å¦‚æœä½ æ¯å‘¨æ”¹è¿›ä½ çš„äº§å“ 5%ï¼Œå®ƒå°†ä¼šäº§ç”ŸçœŸæ­£çš„å¤åˆ©æ•ˆæœã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªå‘¨æœŸçš„é‡å¤é€Ÿç‡è¶Šå¿«ï¼Œå…¬å¸é€šå¸¸ä¼šå˜å¾—è¶Šå¥½ã€‚åœ¨ YC æœŸé—´ï¼Œæˆ‘ä»¬å‘Šè¯‰åˆ›å§‹äººä»–ä»¬åº”è¯¥æ„å»ºäº§å“ï¼Œä¸ç”¨æˆ·äº¤è°ˆï¼Œé™¤äº†åƒé¥­ã€ç¡è§‰ã€é”»ç‚¼å’Œä¸ä»–ä»¬çˆ±çš„äººå…±åº¦æ—¶å…‰ä¹‹å¤–ï¼Œä»–ä»¬ä¸åº”è¯¥åšå…¶ä»–å¤ªå¤šçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;è¦åšå¥½è¿™ä¸ªå‘¨æœŸï¼Œä½ å¿…é¡»éå¸¸äº†è§£ä½ çš„ç”¨æˆ·ã€‚çœŸæ­£è§‚å¯Ÿä»–ä»¬å¦‚ä½•ä½¿ç”¨ä½ çš„äº§å“ã€‚å¦‚æœå¯ä»¥çš„è¯ï¼Œååœ¨ä»–ä»¬çš„åŠå…¬å®¤é‡Œã€‚æ—¢è¦é‡è§†ä»–ä»¬å‘Šè¯‰ä½ çš„å†…å®¹ï¼Œä¹Ÿè¦é‡è§†ä»–ä»¬å®é™…åšçš„äº‹æƒ…ã€‚ä½ ä¸åº”è¯¥è®©ä»»ä½•äººåœ¨åˆ›å§‹äººå’Œç”¨æˆ·ä¹‹é—´ï¼Œå°½å¯èƒ½é•¿çš„æ—¶é—´â€”â€”è¿™æ„å‘³ç€åˆ›å§‹äººéœ€è¦åšé”€å”®ã€å®¢æˆ·æ”¯æŒç­‰å·¥ä½œã€‚&lt;/p&gt;
&lt;p&gt;å°½ä½ æ‰€èƒ½äº†è§£ä½ çš„ç”¨æˆ·ã€‚çœŸæ­£äº†è§£ä»–ä»¬éœ€è¦ä»€ä¹ˆï¼Œåœ¨å“ªé‡Œæ‰¾ä»–ä»¬ï¼Œä»¥åŠä»€ä¹ˆé©±åŠ¨ä»–ä»¬ã€‚&lt;/p&gt;
&lt;p&gt;â€œåšä¸æ˜“æ‰©å±•çš„äº‹æƒ…â€å·²ç»æˆä¸ºåˆ›ä¸šå…¬å¸çš„å£å¤´ç¦…ã€‚ä½ é€šå¸¸éœ€è¦ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ‹›å‹Ÿåˆå§‹ç”¨æˆ·ï¼ˆBen Silbermann è¿‡å»å¸¸å¸¸åœ¨ Palo Alto çš„å’–å•¡åº—é‡Œæ¥è§¦é™Œç”Ÿäººï¼Œè®©ä»–ä»¬è¯•è¯• Pinterestï¼‰ï¼Œç„¶åæ„å»ºä»–ä»¬è¦æ±‚çš„ä¸œè¥¿ã€‚è®¸å¤šåˆ›å§‹äººè®¨åŒè¿™ä¸ªéƒ¨åˆ†ï¼Œåªæƒ³åœ¨åª’ä½“ä¸Šå®£å¸ƒä»–ä»¬çš„äº§å“ã€‚ä½†è¿™å‡ ä¹æ°¸è¿œä¸ä¼šæœ‰æ•ˆã€‚æ‰‹åŠ¨æ‹›å‹Ÿç”¨æˆ·ï¼Œä½¿äº§å“å¦‚æ­¤ä¼˜ç§€ä»¥è‡³äºä½ æ‹›å‹Ÿçš„ç”¨æˆ·ä¼šå‘Šè¯‰ä»–ä»¬çš„æœ‹å‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½ è¿˜éœ€è¦å°†äº‹æƒ…åˆ†è§£æˆéå¸¸å°çš„éƒ¨åˆ†ï¼Œç„¶ååœ¨è¿›è¡Œçš„è¿‡ç¨‹ä¸­è¿›è¡Œè¿­ä»£å’Œé€‚åº”ã€‚ä¸è¦è¯•å›¾&lt;/p&gt;
&lt;p&gt;ä½ éœ€è¦å°†äº‹æƒ…åˆ†è§£æˆå¾ˆå°çš„éƒ¨åˆ†ï¼Œç„¶åè¾¹åšè¾¹è°ƒæ•´ã€‚ä¸è¦è¯•å›¾è¿‡æ—©è§„åˆ’ï¼Œç»å¯¹ä¸è¦æŠŠæ‰€æœ‰äº‹æƒ…éƒ½å †ç§¯åˆ°ä¸€ä¸ªå¤§çš„å…¬å¼€å‘å¸ƒä¸­ã€‚ä½ éœ€è¦ä»éå¸¸ç®€å•çš„ä¸œè¥¿å¼€å§‹â€”â€”å°½å¯èƒ½å°‘çš„æ¥è§¦é¢â€”â€”ç„¶åæ¯”ä½ é¢„æœŸçš„æ›´æ—©å»å‘å¸ƒã€‚äº‹å®ä¸Šï¼Œç®€å•æ€»æ˜¯å¥½çš„ï¼Œä½ åº”è¯¥å§‹ç»ˆä¿æŒä½ çš„äº§å“å’Œå…¬å¸å°½å¯èƒ½åœ°ç®€å•ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬ç»å¸¸å‘é‡åˆ°é—®é¢˜çš„åˆ›ä¸šå…¬å¸æå‡ºä¸€äº›å¸¸è§çš„é—®é¢˜ï¼šç”¨æˆ·æ˜¯å¦ä¼šå¤šæ¬¡ä½¿ç”¨ä½ çš„äº§å“ï¼Ÿä½ ä»¬çš„ç”¨æˆ·å¯¹ä½ ä»¬çš„äº§å“æ˜¯å¦ç‹‚çƒ­ï¼Ÿå¦‚æœä½ çš„å…¬å¸æ¶ˆå¤±äº†ï¼Œä½ çš„ç”¨æˆ·ä¼šçœŸçš„å¾ˆéš¾è¿‡å—ï¼Ÿä½ çš„ç”¨æˆ·æ˜¯å¦ä¼šåœ¨ä½ æ²¡æœ‰è¦æ±‚ä»–ä»¬è¿™æ ·åšçš„æƒ…å†µä¸‹æ¨èä½ ç»™å…¶ä»–äººï¼Ÿå¦‚æœä½ æ˜¯ä¸€ä¸ª B2B å…¬å¸ï¼Œä½ æ˜¯å¦è‡³å°‘æœ‰ 10 ä¸ªä»˜è´¹å®¢æˆ·ï¼Ÿ&lt;/p&gt;
&lt;p&gt;å¦‚æœæ²¡æœ‰ï¼Œé‚£é€šå¸¸å°±æ˜¯æ ¹æœ¬çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¼šå‘Šè¯‰è¿™äº›å…¬å¸å»æ”¹è¿›ä»–ä»¬çš„äº§å“ã€‚æˆ‘å¯¹å¤§å¤šæ•°å…³äºä¸ºä»€ä¹ˆå…¬å¸ä¸å¢é•¿çš„å€Ÿå£éƒ½æŒæ€€ç–‘æ€åº¦â€”â€”éå¸¸å¸¸è§çš„çœŸæ­£åŸå› æ˜¯äº§å“è¿˜ä¸å¤Ÿå¥½ã€‚&lt;/p&gt;
&lt;p&gt;å½“åˆ›ä¸šå…¬å¸å¯¹ä»–ä»¬çš„äº§å“ä¸‹ä¸€æ­¥è¯¥åšä»€ä¹ˆï¼Œæˆ–è€…ä»–ä»¬çš„äº§å“è¿˜ä¸å¤Ÿå¥½çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®©ä»–ä»¬å»å’Œä»–ä»¬çš„ç”¨æˆ·äº¤è°ˆã€‚è¿™åœ¨æ¯ä¸ªæ¡ˆä¾‹ä¸­éƒ½ä¸ä¸€å®šç®¡ç”¨â€”â€”æ¯«æ— ç–‘é—®ï¼Œäººä»¬æœ¬æ¥ä¼šè¦æ±‚ç¦ç‰¹ç”Ÿäº§æ›´å¿«çš„é©¬è½¦â€”â€”ä½†æ˜¯å®ƒé€šå¸¸è¿˜æ˜¯æœ‰æ•ˆçš„ã€‚äº‹å®ä¸Šï¼Œæ›´æ™®éçš„æ˜¯ï¼Œå½“å…¬å¸ä¸­æœ‰ä»»ä½•äº‰è®®çš„æ—¶å€™ï¼Œå»å’Œä½ çš„ç”¨æˆ·äº¤è°ˆã€‚&lt;/p&gt;
&lt;p&gt;æœ€å¥½çš„åˆ›å§‹äººå¯¹äº§å“è´¨é‡ä¼¼ä¹è¿‡äºåœ¨ä¹ï¼Œç”šè‡³å¯¹çœ‹ä¼¼ä¸é‡è¦çš„ç»†èŠ‚ä¹Ÿæ˜¯å¦‚æ­¤ã€‚ä½†æ˜¯å®ƒä¼¼ä¹æœ‰æ•ˆã€‚é¡ºä¾¿è¯´ä¸€å¥ï¼Œâ€œäº§å“â€åŒ…æ‹¬ç”¨æˆ·ä¸å…¬å¸çš„æ‰€æœ‰äº’åŠ¨ã€‚ä½ éœ€è¦æä¾›ä¼˜è´¨çš„æ”¯æŒï¼Œä¼˜è´¨çš„é”€å”®äº’åŠ¨ç­‰ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œå¦‚æœä½ æ²¡æœ‰åšå‡ºä¸€ä¸ªä¼Ÿå¤§çš„äº§å“ï¼Œé‚£ä¹ˆå…¶ä»–ä¸€åˆ‡éƒ½æ— æ³•æ‹¯æ•‘ä½ ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‰§è¡ŒåŠ›&#34;&gt;æ‰§è¡ŒåŠ›&lt;/h2&gt;
&lt;p&gt;è™½ç„¶ä½ éœ€è¦æ‰“é€ ä¸€ä¸ªå‡ºè‰²çš„äº§å“ï¼Œä½†è¿™è¿˜è¿œè¿œä¸å¤Ÿã€‚ä½ è¿˜éœ€è¦æŠŠå®ƒå˜æˆä¸€ä¸ªå‡ºè‰²çš„å…¬å¸ï¼Œå¹¶ä¸”ä½ éœ€è¦è‡ªå·±å»åš&amp;ndash;é›‡ä½£ä¸€ä¸ªâ€œæœ‰ç»éªŒçš„ç®¡ç†è€…â€æ¥åšæ‰€æœ‰è¿™äº›å·¥ä½œçš„å¹»æƒ³æ˜¯éå¸¸æ™®éçš„ï¼Œä¹Ÿæ˜¯è®¸å¤šå¤±è´¥å…¬å¸çš„åŸå¢“ã€‚ä½ é•¿æ—¶é—´å†…ä¸èƒ½æŠŠå·¥ä½œå¤–åŒ…ç»™åˆ«äººã€‚&lt;/p&gt;
&lt;p&gt;è¿™å¬èµ·æ¥å¾ˆæ˜æ˜¾ï¼Œä½†ä½ å¿…é¡»è¦èµšé’±ã€‚ç°åœ¨æ˜¯å¼€å§‹æ€è€ƒå¦‚ä½•å®ç°çš„å¥½æ—¶æœºã€‚&lt;/p&gt;
&lt;p&gt;CEO çš„å”¯ä¸€æ™®éèŒè´£å°±æ˜¯ç¡®ä¿å…¬å¸æˆåŠŸã€‚å³ä½¿ä½ æœ‰è®¸å¤šç¼ºç‚¹ï¼Œé€šå¸¸ä¼šè®©ä½ æ— æ³•èƒœä»» CEO çš„èŒä½ï¼Œåªè¦ä½ é›‡ä½£èƒ½å¼¥è¡¥ä½ è‡ªèº«æŠ€èƒ½çš„äººï¼Œå¹¶è®©ä»–ä»¬åšå¥½è‡ªå·±çš„å·¥ä½œï¼Œä½œä¸ºåˆ›å§‹äººï¼Œä½ å°±èƒ½åšåˆ°è¿™ä¸€ç‚¹ã€‚é‚£äº›æœ‰ç»éªŒçš„ CEOï¼Œæœ‰åä¸½çš„ MBA å­¦ä½ï¼Œå¯èƒ½æ²¡æœ‰ä½ æ‰€æ‹¥æœ‰çš„æŠ€èƒ½ç¼ºå£ï¼Œä½†ä»–æˆ–å¥¹ä¸ä¼šåƒä½ é‚£æ ·ç†è§£ç”¨æˆ·ï¼Œä¸ä¼šæœ‰åŒæ ·çš„äº§å“ç›´è§‰ï¼Œä¹Ÿä¸ä¼šé‚£ä¹ˆåœ¨ä¹ã€‚&lt;/p&gt;
&lt;h2 id=&#34;æˆé•¿&#34;&gt;æˆé•¿&lt;/h2&gt;
&lt;p&gt;æˆé•¿å’ŒåŠ¨åŠ›æ˜¯æ‰§è¡ŒåŠ›çš„å…³é”®ã€‚åªè¦ä¸æ˜¯ä»¥â€œ90 ç¾åˆ†å–å‡º 1 ç¾å…ƒçš„æ–¹å¼â€è·å¾—çš„æˆé•¿ï¼Œæˆé•¿å°±èƒ½è§£å†³æ‰€æœ‰é—®é¢˜ï¼Œè€Œç¼ºä¹æˆé•¿åˆ™åªèƒ½é€šè¿‡æˆé•¿æ¥è§£å†³ã€‚å¦‚æœä½ åœ¨æˆé•¿ï¼Œæ„Ÿè§‰å°±åƒä½ åœ¨èµ¢ï¼Œäººä»¬ä¼šæ„Ÿåˆ°å¿«ä¹ã€‚å¦‚æœä½ åœ¨æˆé•¿ï¼Œæ–°çš„è§’è‰²å’Œè´£ä»»ä¼šä¸æ–­å‡ºç°ï¼Œäººä»¬ä¼šæ„Ÿåˆ°ä»–ä»¬çš„èŒä¸šç”Ÿæ¶¯åœ¨è¿›æ­¥ã€‚å¦‚æœä½ æ²¡æœ‰æˆé•¿ï¼Œå°±æ„Ÿè§‰ä½ åœ¨è¾“ï¼Œäººä»¬ä¼šä¸å¿«ä¹å¹¶ç¦»å¼€ã€‚å¦‚æœä½ æ²¡æœ‰æˆé•¿ï¼Œäººä»¬åªä¼šä¸ºè´£ä»»æ–—äº‰å’Œå½’è´£ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å§‹äººå’Œå‘˜å·¥åœ¨æ²¡æœ‰åŠ¨åŠ›çš„åˆ›ä¸šå…¬å¸ä¸­å‡ ä¹éƒ½ä¼šç–²æƒ«ä¸å ªã€‚è¿™ç§æƒ…å†µçš„æ¶ˆæ²‰ç¨‹åº¦æ˜¯éš¾ä»¥è¨€å–»çš„ã€‚&lt;/p&gt;
&lt;p&gt;æ‰§è¡ŒåŠ›çš„é¦–è¦å‡†åˆ™æ˜¯â€œæ°¸ä¸å¤±å»åŠ¨åŠ›â€ã€‚ä½†æ˜¯å¦‚ä½•åšåˆ°å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;æœ€é‡è¦çš„æ–¹å¼å°±æ˜¯æŠŠå®ƒå½“ä½œä½ çš„é¦–è¦ä»»åŠ¡ã€‚å…¬å¸åšçš„æ˜¯ CEO æ‰€è¡¡é‡çš„ã€‚å¯¹å…¬å¸è¿›è¡Œä¼˜åŒ–çš„å•ä¸€æŒ‡æ ‡æ˜¯æœ‰ä»·å€¼çš„ï¼Œæ‰¾åˆ°æ­£ç¡®çš„æˆé•¿æŒ‡æ ‡æ˜¯å€¼å¾—èŠ±æ—¶é—´çš„ã€‚å¦‚æœä½ å…³å¿ƒæˆé•¿ï¼Œå¹¶è®¾å®šäº†æ‰§è¡Œæ ‡å‡†ï¼Œå…¬å¸çš„å…¶ä»–éƒ¨åˆ†éƒ½ä¼šé›†ä¸­ç²¾åŠ›å»å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰å‡ ä¸ªä¾‹å­ã€‚&lt;/p&gt;
&lt;p&gt;Airbnb çš„åˆ›å§‹äººç”»äº†ä¸€å¹…ä»–ä»¬æƒ³è¦è¾¾åˆ°çš„å¢é•¿å›¾ï¼Œå±•æœ›æœªæ¥ã€‚ä»–ä»¬æŠŠè¿™ç”»æ”¾åœ¨å„å¤„â€”â€”å†°ç®±ä¸Šï¼Œæ¡Œå­ä¸Šï¼Œæµ´å®¤çš„é•œå­ä¸Šã€‚å¦‚æœä»–ä»¬é‚£å‘¨è¾¾åˆ°äº†è¿™ä¸ªæ•°å­—ï¼Œé‚£å°±å¥½ã€‚å¦‚æœæ²¡æœ‰ï¼Œé‚£å°±æ˜¯ä»–ä»¬å”¯ä¸€ä¼šè°ˆè®ºçš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;é©¬å…‹Â·æ‰å…‹ä¼¯æ ¼æ›¾ç»è¯´è¿‡ï¼ŒFacebook æœ€é‡è¦çš„åˆ›æ–°ä¹‹ä¸€æ˜¯ä»–ä»¬åœ¨å¢é•¿æ”¾ç¼“æ—¶å»ºç«‹äº†ä¸€ä¸ªå¢é•¿å°ç»„ã€‚è¿™ä¸ªå°ç»„æ˜¯å…¬å¸ä¸­æœ€æœ‰å£°æœ›çš„å°ç»„ä¹‹ä¸€â€”â€”æ¯ä¸ªäººéƒ½çŸ¥é“å®ƒçš„é‡è¦æ€§ã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒä¸€ä¸ªé˜»ç¢å¢é•¿çš„äº‹æƒ…çš„åˆ—è¡¨ã€‚ä½œä¸ºä¸€ä¸ªå…¬å¸æ¥è®¨è®ºä½ ä»¬å¦‚ä½•èƒ½å¤Ÿæ›´å¿«åœ°å¢é•¿ã€‚å¦‚æœä½ çŸ¥é“ä»€ä¹ˆæ˜¯é™åˆ¶å› ç´ ï¼Œä½ å°±ä¼šè‡ªç„¶åœ°æ€è€ƒå¦‚ä½•è§£å†³å®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºä½ è€ƒè™‘åšçš„ä»»ä½•äº‹æƒ…ï¼Œé—®è‡ªå·±â€œè¿™æ˜¯ä¼˜åŒ–å¢é•¿çš„æœ€å¥½æ–¹å¼å—ï¼Ÿâ€ä¾‹å¦‚ï¼Œå»å‚åŠ ä¸€ä¸ªä¼šè®®é€šå¸¸ä¸æ˜¯ä¼˜åŒ–å¢é•¿çš„æœ€å¥½æ–¹å¼ï¼Œé™¤éä½ æœŸæœ›åœ¨é‚£é‡Œå–å‡ºå¾ˆå¤šäº§å“ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºåº¦é‡ï¼ˆä»¥åŠè´¢åŠ¡ï¼‰æœ‰æç«¯çš„å†…éƒ¨é€æ˜åº¦æ˜¯ä¸€ä»¶å¥½äº‹ã€‚å‡ºäºæŸç§åŸå› ï¼Œåˆ›å§‹äººæ€»æ˜¯å¯¹æ­¤æ„Ÿåˆ°éå¸¸å®³æ€•ã€‚ä½†æ˜¯ï¼Œè¿™å¯¹äºè®©æ•´ä¸ªå…¬å¸ä¸“æ³¨äºå¢é•¿æ˜¯éå¸¸æœ‰ç›Šçš„ã€‚ä¼¼ä¹å…¬å¸å‘˜å·¥å¯¹åº¦é‡çš„å…³æ³¨åº¦ä¸ä»–ä»¬çš„è¡¨ç°ä¹‹é—´å­˜åœ¨ç›´æ¥çš„å…³è”ã€‚å¦‚æœä½ éšè—åº¦é‡ï¼Œäººä»¬å°±å¾ˆéš¾ä¸“æ³¨äºå®ƒä»¬ã€‚&lt;/p&gt;
&lt;p&gt;è¯´åˆ°åº¦é‡ï¼Œä¸è¦ç”¨è™šè£åº¦é‡æ¥æ¬ºéª—è‡ªå·±ã€‚è¿™é‡Œçš„å¸¸è§é”™è¯¯æ˜¯ä¸“æ³¨äºæ³¨å†Œå¹¶å¿½ç•¥ä¿ç•™ã€‚ä½†æ˜¯ï¼Œä¿ç•™å¯¹äºå¢é•¿æ¥è¯´ä¸æ–°ç”¨æˆ·è·å–ä¸€æ ·é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;å»ºç«‹å†…éƒ¨èŠ‚å¥ä»¥ä¿æŒåŠ¨åŠ›ä¹Ÿå¾ˆé‡è¦ã€‚ä½ æƒ³æœ‰ä¸€ä¸ªå¯ä»¥åœ¨å†…å¤–è°ˆè®ºçš„â€œèŠ‚æ‹â€â€”â€”æ–°çš„ç‰¹æ€§ï¼Œå®¢æˆ·ï¼Œé›‡å‘˜ï¼Œæ”¶å…¥é‡Œç¨‹ç¢‘ï¼Œåˆä½œä¼™ä¼´ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥è®¾å®šæ¿€è¿›ä½†è¾¹ç•Œå¯è¾¾çš„ç›®æ ‡ï¼Œå¹¶æ¯æœˆæ£€æŸ¥è¿›åº¦ã€‚åº†ç¥èƒœåˆ©ï¼ä¸€ç›´åœ¨å†…éƒ¨è®¨è®ºç­–ç•¥ï¼Œå‘Šè¯‰æ¯ä¸ªäººä½ ä»å®¢æˆ·é‚£é‡Œå¬åˆ°çš„äº‹æƒ…ç­‰ç­‰ã€‚ä½ åœ¨å†…éƒ¨åˆ†äº«çš„ä¿¡æ¯è¶Šå¤šâ€”â€”æ— è®ºæ˜¯å¥½çš„è¿˜æ˜¯åçš„â€”â€”ä½ å°±ä¼šè¶Šå¥½ã€‚&lt;/p&gt;
&lt;p&gt;æœ‰ä¸€äº›é™·é˜±æ˜¯åˆ›å§‹äººç»å¸¸ä¼šæ‰å…¥çš„ã€‚å…¶ä¸­ä¸€ä¸ªæ˜¯ï¼Œå¦‚æœå…¬å¸çš„å¢é•¿å¦‚ç«å¦‚è¼ï¼Œä½†æ˜¯ä¸€åˆ‡éƒ½çœ‹èµ·æ¥éå¸¸ç ´ç¢å’Œä½æ•ˆï¼Œæ¯ä¸ªäººéƒ½ä¼šæ‹…å¿ƒäº‹æƒ…ä¼šè§£ä½“ã€‚å®é™…ä¸Šï¼Œè¿™ç§æƒ…å†µä¼¼ä¹å¾ˆå°‘å‘ç”Ÿï¼ˆFriendster æ˜¯æˆ‘èƒ½æŒ‡å‡ºçš„æœ€è¿‘ä¸€ä¸ªç”±äºæŠ€æœ¯å€ºåŠ¡è€Œæ­»äº¡çš„åˆ›ä¸šå…¬å¸çš„ä¾‹å­ã€‚ï¼‰è¿åç›´è§‰çš„æ˜¯ï¼Œå¦‚æœä½ çš„å¢é•¿é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•ä¼˜åŒ–â€”â€”ä½ åªéœ€è¦ä¿®å¤å®ƒ&lt;/p&gt;
&lt;p&gt;åˆ›ä¸šè€…å¾€å¾€ä¼šé™·å…¥å‡ ä¸ªå¸¸è§çš„é™·é˜±ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ï¼Œå¦‚æœå…¬å¸çš„å¢é•¿ç–¯ç‹‚ï¼Œä½†ä¸€åˆ‡ä¼¼ä¹éƒ½éå¸¸ç ´çƒ‚å’Œä½æ•ˆï¼Œæ‰€æœ‰äººéƒ½ä¼šæ‹…å¿ƒäº‹æƒ…ä¼šç ´è£‚ã€‚å®é™…ä¸Šï¼Œè¿™ç§æƒ…å†µå¾ˆå°‘å‘ç”Ÿï¼ˆFriendster æ˜¯æˆ‘èƒ½ä¸¾å‡ºçš„æœ€è¿‘ä¸€ä¸ªå› æŠ€æœ¯å€ºåŠ¡è€Œæ­»å»çš„åˆ›ä¸šå…¬å¸çš„ä¾‹å­ï¼‰ã€‚äº‹å®è¯æ˜ï¼Œå¦‚æœä½ çš„å¢é•¿é€Ÿåº¦å¾ˆå¿«ï¼Œä½†æ˜¯æ²¡æœ‰ä»»ä½•ä¸œè¥¿æ˜¯ä¼˜åŒ–çš„ï¼Œè¿™æ˜¯å¥½äº‹â€”â€”ä½ åªéœ€è¦ä¿®å¤å®ƒå°±å¯ä»¥è·å¾—æ›´å¤šçš„å¢é•¿ï¼æˆ‘çš„æœ€å–œæ¬¢çš„æŠ•èµ„å°±æ˜¯é‚£äº›å¢é•¿éå¸¸å¿«ä½†æ˜¯éå¸¸æœªä¼˜åŒ–çš„å…¬å¸â€”â€”å®ƒä»¬è¢«ä¸¥é‡ä½ä¼°äº†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªç›¸å…³çš„é™·é˜±æ˜¯è¿‡å¤šçš„è€ƒè™‘æœªæ¥çš„é—®é¢˜â€”â€”æ¯”å¦‚ï¼Œâ€œæˆ‘ä»¬å¦‚ä½•åœ¨å¤§è§„æ¨¡çš„æƒ…å†µä¸‹åšåˆ°è¿™ä¸€ç‚¹ï¼Ÿâ€ç­”æ¡ˆæ˜¯ï¼Œç­‰ä½ åˆ°è¾¾é‚£é‡Œçš„æ—¶å€™å†å»è§£å†³ã€‚å› ä¸ºåœ¨è¾©è®ºè¿™ä¸ªé—®é¢˜çš„æ—¶å€™æ­»æ‰çš„åˆ›ä¸šå…¬å¸æ¯”å› ä¸ºæ²¡æœ‰è¶³å¤Ÿæ€è€ƒè¿™ä¸ªé—®é¢˜è€Œæ­»æ‰çš„åˆ›ä¸šå…¬å¸è¦å¤šã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯åªè€ƒè™‘åœ¨ä½ ç›®å‰è§„æ¨¡çš„ 10 å€çš„æƒ…å†µä¸‹ï¼Œäº‹æƒ…ä¼šå¦‚ä½•è¿ä½œã€‚å¤§å¤šæ•°æ—©æœŸçš„åˆ›ä¸šå…¬å¸åº”è¯¥å°†â€œåšä¸€äº›ä¸å¯æ‰©å±•çš„äº‹æƒ…â€æŒ‚åœ¨å¢™ä¸Šï¼Œå¹¶æŒ‰ç…§å®ƒæ¥ç”Ÿæ´»ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œä¼Ÿå¤§çš„åˆ›ä¸šå…¬å¸åœ¨æ—©æœŸæ€»æ˜¯æœ‰å¾ˆå¥½çš„å®¢æˆ·æœåŠ¡ï¼Œè€Œç³Ÿç³•çš„åˆ›ä¸šå…¬å¸æ‹…å¿ƒå¯¹å•ä½ç»æµçš„å½±å“ä»¥åŠå®ƒä¸ä¼šæ‰©å±•ã€‚ä½†æ˜¯ï¼Œä¼˜ç§€çš„å®¢æˆ·æœåŠ¡ä¼šè®©æ—©æœŸçš„ç”¨æˆ·å……æ»¡çƒ­æƒ…ï¼Œè€Œä¸”å½“äº§å“å˜å¾—æ›´å¥½çš„æ—¶å€™ï¼Œä½ éœ€è¦çš„æ”¯æŒä¼šæ›´å°‘ï¼Œå› ä¸ºä½ ä¼šçŸ¥é“å®¢æˆ·å¸¸å¸¸åœ¨å“ªäº›åœ°æ–¹æŒ£æ‰ï¼Œå¹¶åœ¨é‚£äº›åœ°æ–¹æ”¹å–„äº§å“/ä½“éªŒã€‚ï¼ˆé¡ºä¾¿è¯´ä¸€ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„ä¾‹å­â€”â€”è¦æœ‰ä¼˜ç§€çš„å®¢æˆ·æ”¯æŒã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæœ‰ä¸€ä¸ªå¤§çš„é™·é˜±â€”â€”â€œåšä¸€äº›ä¸å¯æ‰©å±•çš„äº‹æƒ…â€å¹¶ä¸æ„å‘³ç€ä½ ä¸éœ€è¦æœ€ç»ˆèµšé’±ã€‚åœ¨æ—©æœŸï¼Œä½ çš„å•ä½ç»æµçŠ¶å†µä¸å¥½æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯ä½ å¿…é¡»è¦æœ‰ä¸€ä¸ªå¥½çš„ç†ç”±ï¼Œè§£é‡Šä¸ºä»€ä¹ˆå•ä½ç»æµä¼šåœ¨åæœŸå˜å¥½ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸ªé™·é˜±æ˜¯å› ä¸ºå¢é•¿åœ¨ç»å¯¹æ•°å€¼ä¸Šå¾ˆå·®ï¼Œå³ä½¿åœ¨ç™¾åˆ†æ¯”ä¸Šå¾ˆå¥½ï¼Œä¹Ÿä¼šè®©äººæ„Ÿåˆ°æ²®ä¸§ã€‚äººä»¬å¯¹äºæŒ‡æ•°å¢é•¿çš„ç›´è§‰æ˜¯éå¸¸å·®çš„ã€‚æé†’ä½ çš„å›¢é˜Ÿè¿™ä¸€ç‚¹ï¼Œæ‰€æœ‰çš„å¤§å…¬å¸éƒ½æ˜¯ä»å°æ•°ç›®å¼€å§‹å¢é•¿çš„ã€‚&lt;/p&gt;
&lt;p&gt;åˆ›å§‹äººå¸¸å¸¸é™·å…¥ä¸€äº›é™·é˜±ï¼Œä»–ä»¬è®¤ä¸ºè¿™äº›é™·é˜±ä¼šå¸¦æ¥å¢é•¿ï¼Œä½†å®é™…ä¸Šå‡ ä¹ä»æœªæˆåŠŸï¼Œå´æµªè´¹äº†å¤§é‡çš„æ—¶é—´ã€‚å¸¸è§çš„ä¾‹å­åŒ…æ‹¬ä¸å…¶ä»–å…¬å¸çš„äº¤æ˜“å’Œâ€œå¤§æ–°é—»å‘å¸ƒâ€ã€‚å¯¹è¿™äº›è¦è­¦æƒ•ï¼Œå¹¶ä¸”æ˜ç™½å®ƒä»¬å®é™…ä¸Šæ°¸è¿œä¸ä¼šèµ·ä½œç”¨ã€‚ç›¸åï¼Œåƒæ‰€æœ‰ä¼Ÿå¤§çš„å…¬å¸ä¸€æ ·ï¼Œé€šè¿‡æ‰“é€ ç”¨æˆ·å–œçˆ±çš„äº§å“ã€å…ˆæ‰‹åŠ¨æ‹›å‹Ÿç”¨æˆ·ï¼Œç„¶åæµ‹è¯•å„ç§å¢é•¿ç­–ç•¥ï¼ˆå¦‚å¹¿å‘Šã€æ¨èè®¡åˆ’ã€é”€å”®å’Œè¥é”€ç­‰ï¼‰ï¼Œå¹¶åšæ›´å¤šæœ‰æ•ˆæœçš„äº‹æƒ…ã€‚å‘ä½ çš„å®¢æˆ·è¯¢é—®ä½ å¯ä»¥åœ¨å“ªé‡Œæ‰¾åˆ°æ›´å¤šåƒä»–ä»¬ä¸€æ ·çš„äººã€‚&lt;/p&gt;
&lt;p&gt;è®°ä½ï¼Œé”€å”®å’Œè¥é”€å¹¶ä¸æ˜¯åè¯ã€‚è™½ç„¶å¦‚æœä½ æ²¡æœ‰ä¸€ä¸ªä¼Ÿå¤§çš„äº§å“ï¼Œå®ƒä»¬éƒ½æ— æ³•æ‹¯æ•‘ä½ ï¼Œä½†å®ƒä»¬éƒ½å¯ä»¥å¸®åŠ©ä½ å¤§å¹…åŠ é€Ÿå¢é•¿ã€‚å¦‚æœä½ æ˜¯ä¸€å®¶ä¼ä¸šå…¬å¸ï¼Œä½ çš„å…¬å¸å¯èƒ½éœ€è¦åœ¨è¿™äº›æ–¹é¢åšå¾—å¥½ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¦å®³æ€•é”€å”®ã€‚è‡³å°‘æœ‰ä¸€ä¸ªåˆ›å§‹äººå¿…é¡»æ“…é•¿è¦æ±‚äººä»¬ä½¿ç”¨ä½ çš„äº§å“å¹¶ç»™ä½ é’±ã€‚&lt;/p&gt;
&lt;p&gt;Alex Schultz&lt;a href=&#34;http://startupclass.samaltman.com/courses/lec06/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å¯¹æ¶ˆè´¹äº§å“çš„å¢é•¿ç»™å‡ºäº†ä¸€ä¸ªè®²åº§&lt;/a&gt;ï¼Œå€¼å¾—ä¸€çœ‹ã€‚å¯¹äº B2B äº§å“ï¼Œæˆ‘è®¤ä¸ºå‡ ä¹æ€»æ˜¯è¦è¿½è¸ªæ¯æœˆçš„æ”¶å…¥å¢é•¿ï¼Œè®°ä½é”€å”®å‘¨æœŸè¾ƒé•¿æ„å‘³ç€å‰å‡ ä¸ªæœˆå¯èƒ½çœ‹èµ·æ¥å¾ˆéš¾çœ‹ï¼ˆå°½ç®¡æœ‰æ—¶æŠŠåˆ›ä¸šå…¬å¸ä½œä¸ºåˆå§‹å®¢æˆ·å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èšç„¦ä¸é«˜å¼ºåº¦&#34;&gt;èšç„¦ä¸é«˜å¼ºåº¦&lt;/h2&gt;
&lt;p&gt;å¦‚æœæˆ‘å¿…é¡»å°†æˆ‘çš„å»ºè®®ç²¾ç®€ä¸ºä¸¤ä¸ªè¯ï¼Œæˆ‘ä¼šé€‰æ‹©èšç„¦å’Œé«˜å¼ºåº¦ã€‚è¿™ä¸¤ä¸ªè¯ä¼¼ä¹çœŸçš„é€‚ç”¨äºæˆ‘æ‰€çŸ¥é“çš„æœ€å¥½çš„åˆ›å§‹äººã€‚&lt;/p&gt;
&lt;p&gt;ä»–ä»¬å¯¹è‡ªå·±çš„äº§å“å’Œå¢é•¿ä¿æŒåšå®šä¸ç§»çš„å…³æ³¨ã€‚ä»–ä»¬ä¸è¯•å›¾åšæ‰€æœ‰çš„äº‹æƒ…â€”â€”å®é™…ä¸Šï¼Œä»–ä»¬ç»å¸¸è¯´â€œä¸â€ï¼Œè¿™å¾ˆå›°éš¾ï¼Œå› ä¸ºå¼€å§‹åˆ›ä¸šçš„äººå¾€å¾€å–œæ¬¢å°è¯•æ–°äº‹ç‰©ã€‚&lt;/p&gt;
&lt;p&gt;ä½œä¸ºä¸€ä¸ªæ™®éçš„åŸåˆ™ï¼Œä¸è¦è®©ä½ çš„å…¬å¸å¼€å§‹åšä¸‹ä¸€ä»¶äº‹ï¼Œé™¤éä½ å·²ç»åœ¨ç¬¬ä¸€ä»¶äº‹ä¸Šå–å¾—äº†ä¸»å¯¼åœ°ä½ã€‚æˆ‘æ‰€çŸ¥é“çš„æ‰€æœ‰ä¼Ÿå¤§çš„å…¬å¸éƒ½æ²¡æœ‰ä¸€å¼€å§‹å°±åšå¾ˆå¤šäº‹æƒ…â€”â€”ä»–ä»¬ä»å¯¹ä¸€ä»¶äº‹å……æ»¡ä¿¡å¿µå¼€å§‹ï¼Œç„¶åä¸€è·¯çœ‹ä¸‹å»ã€‚ä½ å¯ä»¥åšçš„äº‹æƒ…æ¯”ä½ æƒ³è±¡çš„è¦å°‘ã€‚åšå¤ªå¤šé”™è¯¯çš„äº‹æƒ…æ˜¯åˆ›ä¸šå…¬å¸æ­»äº¡çš„ä¸€ä¸ªéå¸¸ã€éå¸¸å¸¸è§çš„åŸå› ã€‚ä¼˜å…ˆçº§çš„è®¾å®šæ˜¯å…³é”®ï¼Œä¹Ÿæ˜¯å›°éš¾çš„ã€‚ï¼ˆè®¾å®šå…¬å¸çš„ä¼˜å…ˆçº§å’Œè®¾å®šä½ è‡ªå·±çš„æˆ˜æœ¯ä¼˜å…ˆçº§åŒæ ·é‡è¦ã€‚æˆ‘å‘ç°å¯¹æˆ‘ä¸ªäººæ¥è¯´æœ€æœ‰æ•ˆçš„æ–¹æ³•æ˜¯ä¸ºæ¯ä¸€å¤©åˆ¶å®šä¸€ä»½åŒ…å«å¤§çº¦ 3 ä¸ªä¸»è¦ä»»åŠ¡å’Œå¤§çº¦ 30 ä¸ªæ¬¡è¦ä»»åŠ¡çš„çº¸è´¨æ¸…å•ï¼Œä»¥åŠä¸€ä»½åˆ—å‡ºæ•´ä½“ç›®æ ‡çš„å¹´åº¦å¾…åŠäº‹é¡¹æ¸…å•ã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;è™½ç„¶ä¼Ÿå¤§çš„åˆ›å§‹äººä¸åšå¾ˆå¤šå¤§é¡¹ç›®ï¼Œä½†ä»–ä»¬åšä»»ä½•äº‹éƒ½éå¸¸é«˜å¼ºåº¦ã€‚ä»–ä»¬éå¸¸å¿«åœ°å®Œæˆäº‹æƒ…ã€‚ä»–ä»¬æœæ–­ï¼Œè¿™åœ¨ä½ ç»è¥åˆ›ä¸šå…¬å¸æ—¶å¾ˆå›°éš¾â€”â€”ä½ ä¼šå¾—åˆ°å¾ˆå¤šç›¸äº’çŸ›ç›¾çš„å»ºè®®ï¼Œè¿™æ—¢å› ä¸ºæœ‰å¤šç§æ–¹å¼å¯ä»¥åšäº‹æƒ…ï¼Œä¹Ÿå› ä¸ºå­˜åœ¨å¾ˆå¤šç³Ÿç³•çš„å»ºè®®ã€‚ä¼Ÿå¤§çš„åˆ›å§‹äººä¼šå€¾å¬æ‰€æœ‰çš„å»ºè®®ï¼Œç„¶åè¿…é€Ÿåšå‡ºè‡ªå·±çš„å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;è¯·æ³¨æ„ï¼Œè¿™å¹¶ä¸æ„å‘³ç€è¦å¯¹æ‰€æœ‰äº‹æƒ…éƒ½ä¿æŒé«˜å¼ºåº¦â€”â€”è¿™æ˜¯ä¸å¯èƒ½çš„ã€‚ä½ å¿…é¡»é€‰æ‹©æ­£ç¡®çš„äº‹æƒ…ã€‚æ­£å¦‚ Paul Buchheit æ‰€è¯´ï¼Œæ‰¾åˆ°ç”¨ 10% çš„åŠªåŠ›è·å¾— 90% ä»·å€¼çš„æ–¹æ³•ã€‚å¸‚åœºä¸å…³å¿ƒä½ å·¥ä½œå¤šä¹ˆè¾›è‹¦â€”â€”å®ƒåªå…³å¿ƒä½ æ˜¯å¦åšäº†æ­£ç¡®çš„äº‹æƒ…ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¯¹äº§å“è´¨é‡ç—´è¿·å’Œéå¸¸å¿«é€Ÿåœ°ç§»åŠ¨ä¹‹é—´å–å¾—å¹³è¡¡éå¸¸å›°éš¾ã€‚ä½†è¿™æ˜¯ä¼Ÿå¤§åˆ›å§‹äººçš„æœ€æ˜æ˜¾ç‰¹ç‚¹ä¹‹ä¸€ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»æœªè§è¿‡ä¸€ä¸ªè¡ŒåŠ¨ç¼“æ…¢çš„åˆ›å§‹äººèƒ½å¤Ÿå–å¾—çœŸæ­£çš„æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;ä½ å’Œå…¶ä»–åˆ›ä¸šå…¬å¸æ²¡æœ‰ä»€ä¹ˆä¸¤æ ·ã€‚ä½ ä¾ç„¶éœ€è¦ä¿æŒä¸“æ³¨å¹¶ä¸”å¿«é€Ÿè¡ŒåŠ¨ã€‚é‚£äº›æ„å»ºç«ç®­å’Œæ ¸ååº”å †çš„å…¬å¸ä»ç„¶è®¾æ³•åšåˆ°è¿™ä¸€ç‚¹ã€‚æ‰€æœ‰å¤±è´¥çš„å…¬å¸éƒ½æœ‰ä¸€ä¸ªå® ç‰©è§£é‡Šï¼Œä¸ºä»€ä¹ˆä»–ä»¬ä¸ä¼—ä¸åŒï¼Œä¸éœ€è¦å¿«é€Ÿè¡ŒåŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ å‘ç°æœ‰æ•ˆçš„æ–¹æ³•ï¼Œç»§ç»­è¿™æ ·åšã€‚ä¸è¦åˆ†å¿ƒå»åšå…¶ä»–äº‹æƒ…ã€‚ä¸è¦æ¾æ‡ˆã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¦è¢«åˆæœŸçš„æˆåŠŸæ‰€è¿·æƒ‘â€”â€”ä½ ä¸æ˜¯é€šè¿‡å‚åŠ å¤§é‡çš„ç½‘ç»œæ´»åŠ¨å’Œå‘è¡¨å¤§é‡çš„æ¼”è®²æ‰å–å¾—äº†åˆæ­¥çš„æˆåŠŸã€‚åˆ›ä¸šå…¬å¸çš„åˆ›å§‹äººåœ¨åˆæ­¥å–å¾—æˆåŠŸåæœ‰ä¸¤æ¡è·¯å¾„å¯é€‰ï¼šè¦ä¹ˆä»–ä»¬ç»§ç»­åšä»–ä»¬æ­£åœ¨åšçš„äº‹æƒ…ï¼Œè¦ä¹ˆä»–ä»¬å¼€å§‹èŠ±å¤§é‡çš„æ—¶é—´æ€è€ƒä»–ä»¬çš„â€œä¸ªäººå“ç‰Œâ€å¹¶äº«å—ä½œä¸ºåˆ›å§‹äººçš„åœ°ä½ã€‚&lt;/p&gt;
&lt;p&gt;å‚åŠ ä¼šè®®å’Œæ¥å—åª’ä½“æŠ¥é“çš„è¯±æƒ‘å¾ˆéš¾æŠµæŒ¡â€”â€”ä»–ä»¬è®©äººæ„Ÿè§‰å¾ˆå¥½ï¼Œå°¤å…¶æ˜¯åœ¨çœ‹åˆ°ä½ æ‰€åœ¨é¢†åŸŸçš„å…¶ä»–åˆ›å§‹äººå¾—åˆ°å…³æ³¨æ—¶ã€‚ä½†æ˜¯è¿™ç§æƒ…å†µä¸ä¼šæŒç»­å¾ˆä¹…ã€‚æœ€ç»ˆï¼Œæ–°é—»åª’ä½“ä¼šå¼„æ¸…æ¥šè°æ‰æ˜¯çœŸæ­£çš„èµ¢å®¶ï¼Œå¦‚æœä½ çš„å…¬å¸çœŸçš„æˆåŠŸäº†ï¼Œä½ ä¼šå¾—åˆ°æ¯”ä½ æœŸæœ›çš„æ›´å¤šçš„å…³æ³¨ã€‚æç«¯çš„æƒ…å†µâ€”â€”åˆåˆ›é˜¶æ®µçš„åˆ›å§‹äººæœ‰è‡ªå·±çš„å…¬å…³â€”â€”ä½ å¯èƒ½è®¤ä¸ºè¿™åªä¼šåœ¨ç”µè§†èŠ‚ç›®ä¸­å‡ºç°ï¼Œä½†å®é™…ä¸ŠçœŸçš„å­˜åœ¨ï¼Œè€Œä¸”ä»–ä»¬å‡ ä¹æ€»æ˜¯å¤±è´¥ã€‚&lt;/p&gt;
&lt;p&gt;é•¿æœŸæ¥çœ‹ï¼Œä¸“æ³¨å’Œå¼ºåº¦å°†å–å¾—èƒœåˆ©ã€‚ (Charlie Rose æ›¾ç»è¯´è¿‡ï¼Œä¸–ç•Œä¸Šçš„äº‹æƒ…æ˜¯é€šè¿‡ä¸“æ³¨å’Œäººé™…å…³ç³»çš„ç»“åˆæ¥å®Œæˆçš„ï¼Œè¿™ä¸€ç‚¹ä¸€ç›´è®©æˆ‘è®°å¿†çŠ¹æ–°ã€‚)&lt;/p&gt;
&lt;h2 id=&#34;ceo-çš„èŒè´£&#34;&gt;CEO çš„èŒè´£&lt;/h2&gt;
&lt;p&gt;æˆ‘ä¹‹å‰æåˆ°è¿‡ï¼ŒCEO å”¯ä¸€çš„èŒè´£å°±æ˜¯ç¡®ä¿å…¬å¸å–å¾—èƒœåˆ©ã€‚å°½ç®¡è¿™æ˜¯äº‹å®ï¼Œä½†æˆ‘æƒ³æ›´å…·ä½“åœ°è°ˆè°ˆ CEO åº”è¯¥å¦‚ä½•å®‰æ’ä»–æˆ–å¥¹çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ª CEO éœ€è¦ 1ï¼‰ä¸ºå…¬å¸è®¾å®šæ„¿æ™¯å’Œæˆˆç•¥ï¼›2ï¼‰å‘æ‰€æœ‰äººå®£æ‰¬å…¬å¸ï¼›3ï¼‰æ‹›è˜å’Œç®¡ç†å›¢é˜Ÿï¼Œå°¤å…¶æ˜¯åœ¨ä½ è‡ªå·±æœ‰ç©ºç™½çš„é¢†åŸŸï¼›4ï¼‰ç­¹é›†èµ„é‡‘ï¼›ä»¥åŠ 5ï¼‰è®¾å®šæ‰§è¡Œè´¨é‡æ ‡å‡†ã€‚&lt;/p&gt;
&lt;p&gt;é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è¦æ‰¾å‡ºä½ æœ€å–œæ¬¢çš„å•†ä¸šéƒ¨åˆ†ï¼Œå¹¶ä¿æŒå‚ä¸ã€‚&lt;/p&gt;
&lt;p&gt;æ­£å¦‚æˆ‘ä¸€å¼€å§‹æåˆ°çš„ï¼Œè¿™æ˜¯ä¸€ä»½ç¹é‡çš„å·¥ä½œã€‚å¦‚æœä½ æˆåŠŸäº†ï¼Œå®ƒä¼šåœ¨ä½ æ— æ³•æƒ³è±¡çš„ç¨‹åº¦ä¸Šæ¥ç®¡ä½ çš„ç”Ÿæ´»â€”â€”ä½ ä¼šä¸€ç›´åœ¨æ€è€ƒå…¬å¸çš„äº‹æƒ…ã€‚æåº¦çš„ä¸“æ³¨å’Œå¼ºåº¦æ„å‘³ç€å®ƒå¹¶ä¸æ˜¯å·¥ä½œç”Ÿæ´»å¹³è¡¡çš„æœ€ä½³é€‰æ‹©ã€‚ä½ å¯ä»¥æœ‰å¦ä¸€ä»¶å¤§äº‹â€”â€”ä½ çš„å®¶åº­ï¼Œåšå¾ˆå¤šé“äººä¸‰é¡¹æ¯”èµ›ï¼Œç­‰ç­‰â€”â€”ä½†å¯èƒ½ä¸ä¼šæœ‰æ¯”è¿™æ›´å¤šçš„äº‹æƒ…ã€‚ä½ å¿…é¡»æ—¶åˆ»ä¿æŒè­¦æƒ•ï¼Œæœ‰å¾ˆå¤šå†³ç­–åªæœ‰ä½ å¯ä»¥åšï¼Œæ— è®ºä½ å¦‚ä½•å–„äºå§”æ‰˜ã€‚&lt;/p&gt;
&lt;p&gt;ä½ åº”è¯¥ç›®æ ‡æ˜ç¡®ï¼Œå¯¹ä½ çš„å›¢é˜Ÿå’Œå¤–ç•Œæ€»æ˜¯ååº”è¿…é€Ÿï¼Œæ€»æ˜¯æ¸…æ¥šåœ°è¯´æ˜æˆ˜ç•¥å’Œä¼˜å…ˆäº‹é¡¹ï¼Œå‚åŠ æ‰€æœ‰é‡è¦çš„äº‹æƒ…ï¼Œå¹¶å¿«é€Ÿæ‰§è¡Œï¼ˆå°¤å…¶æ˜¯åœ¨åˆ«äººå› ä¸ºç­‰å¾…ä½ çš„å†³å®šè€Œè¢«é˜»ç¢æ—¶ï¼‰ã€‚ä½ è¿˜åº”è¯¥é‡‡å–ä¸€ç§â€œä¸æ‹©æ‰‹æ®µâ€çš„æ€åº¦â€”â€”ä¼šæœ‰å¾ˆå¤šä»¤äººä¸æ„‰å¿«çš„ç–²åŠ³ã€‚å¦‚æœå›¢é˜Ÿçœ‹åˆ°ä½ åœ¨åšè¿™äº›äº‹æƒ…ï¼Œä»–ä»¬ä¹Ÿä¼šè¿™ä¹ˆåšã€‚&lt;/p&gt;
&lt;p&gt;ç®¡ç†ä½ è‡ªå·±çš„å¿ƒç†æ˜¯æ—¢å›°éš¾åˆé‡è¦çš„ã€‚è¿™åœ¨ç°åœ¨å·²ç»æˆä¸ºé™ˆè¯æ»¥è°ƒï¼Œä½†å®é™…ä¸Šæ˜¯çœŸçš„â€”â€”æƒ…ç»ªçš„é«˜ä½èµ·ä¼éå¸¸å‰§çƒˆï¼Œå¦‚æœä½ æ²¡æœ‰æ‰¾åˆ°åœ¨å®ƒä»¬ä¸­é—´ä¿æŒå¹³è¡¡çš„æ–¹æ³•ï¼Œä½ ä¼šé‡åˆ°å›°éš¾ã€‚åš CEO æ˜¯å­¤ç‹¬çš„ã€‚å½“ä¸€åˆ‡éƒ½åœ¨å´©æºƒæ—¶ï¼Œä½ å¯ä»¥æ‰“ç”µè¯ç»™å…¶ä»– CEO çš„å…³ç³»æ˜¯å¾ˆé‡è¦çš„ï¼ˆYC çš„ä¸€ä¸ªé‡è¦çš„æ„å¤–å‘ç°å°±æ˜¯ä¸ºåˆ›å§‹äººæä¾›äº†ä¸€ä¸ªå¯ä»¥æœ‰åŒè¡Œçš„æ–¹å¼ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸ªæˆåŠŸçš„åˆ›ä¸šå…¬å¸éœ€è¦å¾ˆé•¿çš„æ—¶é—´â€”â€”å½“ç„¶æ¯”å¤§å¤šæ•°åˆ›å§‹äººåœ¨å¼€å§‹æ—¶æƒ³çš„è¦é•¿ã€‚ä½ ä¸èƒ½æŠŠå®ƒå½“ä½œé€šå®µè¾¾æ—¦çš„äº‹æƒ…ã€‚ä½ å¿…é¡»åƒå¥½ï¼Œç¡å¥½ï¼Œåšè¿åŠ¨ã€‚ä½ å¿…é¡»èŠ±æ—¶é—´å’Œä½ çš„å®¶äººå’Œæœ‹å‹åœ¨ä¸€èµ·ã€‚ä½ è¿˜éœ€è¦åœ¨ä½ çœŸæ­£çƒ­è¡·çš„é¢†åŸŸå·¥ä½œâ€”â€”æ²¡æœ‰åˆ«çš„äº‹æƒ…èƒ½æ”¯æŒä½ åå¹´ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€åˆ‡éƒ½ä¼šæ„Ÿè§‰åƒæ˜¯ç ´ç¢çš„â€”â€”ç¾éš¾çš„å¤šæ ·æ€§å’Œç¨‹åº¦ä¼šè®©ä½ æƒŠè®¶ã€‚ä½ çš„å·¥ä½œå°±æ˜¯é¢å¸¦å¾®ç¬‘åœ°ä¿®å¤å®ƒä»¬ï¼Œå¹¶å‘ä½ çš„å›¢é˜Ÿä¿è¯ä¸€åˆ‡éƒ½ä¼šå¥½çš„ã€‚é€šå¸¸äº‹æƒ…æ²¡æœ‰çœ‹èµ·æ¥é‚£ä¹ˆç³Ÿï¼Œä½†æœ‰æ—¶å€™å®ƒä»¬å®é™…ä¸ŠçœŸçš„å¾ˆç³Ÿã€‚æ— è®ºå¦‚ä½•ï¼Œç»§ç»­å‰è¿›ã€‚ç»§ç»­æˆé•¿ã€‚&lt;/p&gt;
&lt;p&gt;CEO ä¸èƒ½æ‰¾å€Ÿå£ã€‚ä¼šæœ‰å¾ˆå¤šåäº‹å’Œä¸å…¬å¹³çš„äº‹æƒ…å‘ç”Ÿã€‚ä½†ä¸è¦è®©è‡ªå·±è¯´ï¼Œå°¤å…¶æ˜¯å¯¹å›¢é˜Ÿè¯´ï¼Œâ€œå¦‚æœæˆ‘ä»¬æœ‰æ›´å¤šçš„é’±â€æˆ–è€…â€œå¦‚æœæˆ‘ä»¬æœ‰å¦ä¸€ä¸ªå·¥ç¨‹å¸ˆâ€ã€‚è¦ä¹ˆæ‰¾å‡ºä¸€ç§æ–¹æ³•æ¥å®ç°ï¼Œè¦ä¹ˆæ‰¾å‡ºä¸éœ€è¦å®ƒçš„æ–¹æ³•åšäº‹ã€‚è®©è‡ªå·±æ‰¾å¾ˆå¤šå€Ÿå£çš„äººé€šå¸¸ä¼šå¤±è´¥ï¼Œåšåˆ›ä¸šå…¬å¸çš„ CEO è¿™æ ·åšå‡ ä¹æ€»æ˜¯ä¼šå¤±è´¥ã€‚è®©è‡ªå·±å¯¹ä¸å…¬æ„Ÿåˆ°æ²®ä¸§ 1 åˆ†é’Ÿï¼Œç„¶åæ„è¯†åˆ°æ‰¾å‡ºè§£å†³æ–¹æ¡ˆå–å†³äºä½ ã€‚åŠªåŠ›è®©äººä»¬åœ¨è°ˆè®ºä½ æ—¶è¯´â€œX æ€»æ˜¯èƒ½å¤Ÿå®Œæˆäº‹æƒ…â€ã€‚&lt;/p&gt;
&lt;p&gt;æ²¡æœ‰ä¸€ä¸ªç¬¬ä¸€æ¬¡åšåˆ›å§‹äººçš„äººçŸ¥é“ä»–æˆ–å¥¹åœ¨åšä»€ä¹ˆã€‚ä½ ä»¥å¤šå¤§çš„ç¨‹åº¦ç†è§£è¿™ä¸€ç‚¹ï¼Œå¹¶å¯»æ±‚å¸®åŠ©ï¼Œä½ å°±ä¼šæ›´å¥½ã€‚èŠ±æ—¶é—´å­¦ä¹ æˆä¸ºä¸€ä¸ªå¥½çš„é¢†å¯¼å’Œç®¡ç†è€…æ˜¯å€¼å¾—çš„ã€‚åšè¿™ä»¶äº‹çš„æœ€å¥½æ–¹æ³•æ˜¯æ‰¾ä¸€ä¸ªå¯¼å¸ˆâ€”â€”è¯»ä¹¦ä¼¼ä¹ä¸å¤ªç®¡ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ YC ç»™å‡ºçš„å¾ˆå¤šå»ºè®®éƒ½æ˜¯â€œç›´æ¥é—®ä»–ä»¬â€æˆ–â€œç›´æ¥å»åšâ€ã€‚ç¬¬ä¸€æ¬¡åšåˆ›å§‹äººçš„äººè®¤ä¸ºå½“ä½ éœ€è¦åˆ«äººçš„ä¸œè¥¿æˆ–è€…ä½ æƒ³åšä¸€äº›æ–°çš„äº‹æƒ…æ—¶ï¼Œä¸€å®šæœ‰ä¸€äº›ç§˜å¯†ã€‚ä½†æ˜¯å†æ¬¡å¼ºè°ƒï¼Œåˆ›ä¸šå…¬å¸æ˜¯éª—æœ¯åœæ­¢å·¥ä½œçš„åœ°æ–¹ã€‚åªè¦ç›´æ¥ç‚¹ï¼Œæ„¿æ„è¦æ±‚ä½ æƒ³è¦çš„ï¼Œä¸è¦åšä¸€ä¸ªæ··è›‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½ éœ€è¦ä¸ºä»–äººæ‰­æ›²ç°å®ï¼Œä½†ä¸æ˜¯ä¸ºä½ è‡ªå·±ã€‚ä½ å¿…é¡»è®©å…¶ä»–äººç›¸ä¿¡ä½ çš„å…¬å¸æœ‰æœ›æˆä¸ºæœ¬åå¹´æœ€é‡è¦çš„åˆ›ä¸šå…¬å¸ï¼Œä½†ä½ è‡ªå·±åº”è¯¥å¯¹å¯èƒ½å‡ºé”™çš„äº‹æƒ…ä¿æŒè­¦æƒ•ã€‚&lt;/p&gt;
&lt;p&gt;åšæŒåˆ°åº•ã€‚å¤§å¤šæ•°åˆ›å§‹äººæ”¾å¼ƒå¾—å¤ªå¿«ï¼Œæˆ–è€…å¤ªå¿«åœ°è½¬å‘ä¸‹ä¸€ä¸ªäº§å“ã€‚å¦‚æœäº‹æƒ…é€šå¸¸ä¸é¡ºåˆ©ï¼Œæ‰¾å‡ºé—®é¢˜çš„æ ¹æœ¬åŸå› ï¼Œå¹¶ç¡®ä¿ä½ è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚åšä¸€ä¸ªæˆåŠŸçš„åˆ›ä¸šå…¬å¸ CEO çš„å¾ˆå¤§ä¸€éƒ¨åˆ†å°±æ˜¯ä¸æ”¾å¼ƒï¼ˆè™½ç„¶ä½ ä¹Ÿä¸æƒ³åœ¨æ‰€æœ‰çš„ç†ç”±éƒ½è¢«å¦å®šåè¿˜å›ºæ‰§åœ°åšæŒâ€”â€”è¿™æ˜¯å¦ä¸€ä¸ªæ˜æ˜¾çš„çŸ›ç›¾ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆéš¾åšå‡ºçš„åˆ¤æ–­ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¿æŒä¹è§‚ã€‚å°½ç®¡å¯èƒ½ä¸–ç•Œä¸Šæœ‰ä¸€ä½ä¼Ÿå¤§çš„æ‚²è§‚ä¸»ä¹‰ CEOï¼Œä½†æˆ‘è¿˜æ²¡é‡åˆ°è¿‡ä»–æˆ–å¥¹ã€‚CEO éœ€è¦æœ‰ä¸€ç§æœªæ¥ä¼šå˜å¾—æ›´å¥½çš„ä¿¡å¿µï¼Œå¹¶ä¸”å…¬å¸å°†åœ¨ä½¿æœªæ¥å˜å¾—æ›´å¥½çš„è¿‡ç¨‹ä¸­å‘æŒ¥é‡è¦ä½œç”¨ï¼Œè¿™å¯¹äº CEO æ¥è¯´å¾ˆé‡è¦ï¼Œä»–ä»¬éœ€è¦å°†è¿™ç§ä¿¡å¿µä¼ æŸ“ç»™å…¬å¸çš„å…¶ä»–æˆå‘˜ã€‚åœ¨ç†è®ºä¸Šè¿™å¾ˆç®€å•ï¼Œä½†åœ¨é¢å¯¹çŸ­æœŸæŒ‘æˆ˜çš„ç°å®ä¸­å´å¾ˆå›°éš¾ã€‚ä¸è¦å¿½è§†é•¿æœŸæ„¿æ™¯ï¼Œç›¸ä¿¡æ—¥å¤ä¸€æ—¥çš„æŒ‘æˆ˜ç»ˆå°†è¢«é—å¿˜ï¼Œè¢«å¹´å¤ä¸€å¹´çš„è¿›æ­¥æ‰€å–ä»£ã€‚&lt;/p&gt;
&lt;p&gt;ä½ æœ€é‡è¦çš„å·¥ä½œä¹‹ä¸€æ˜¯å®šä¹‰ä½¿å‘½å’Œä»·å€¼è§‚ã€‚è¿™å¯èƒ½æ„Ÿè§‰æœ‰ç‚¹åšä½œï¼Œä½†åœ¨åˆæœŸå°±å¼€å§‹åšè¿™ä»¶äº‹æ˜¯å€¼å¾—çš„ã€‚æ— è®ºä½ åœ¨ä¸€å¼€å§‹è®¾ç½®çš„æ˜¯ä»€ä¹ˆï¼Œå‡ å¹´åé€šå¸¸ä»ç„¶æœ‰æ•ˆï¼Œéšç€ä½ çš„æˆé•¿ï¼Œæ¯ä¸€ä¸ªæ–°åŠ å…¥çš„äººéƒ½éœ€è¦é¦–å…ˆæ¥å—å¹¶ç„¶åå‘å…¶ä»–äººæ¨é”€å…¬å¸çš„ä½¿å‘½å’Œä»·å€¼è§‚ã€‚æ‰€ä»¥å°½æ—©å°†ä½ çš„æ–‡åŒ–ä»·å€¼è§‚å’Œä½¿å‘½å†™ä¸‹æ¥ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸ºå€¼å¾—é‡å¤çš„ä¸€ä¸ªè€ç”Ÿå¸¸è°ˆçš„è§‚ç‚¹æ˜¯ï¼šå»ºç«‹ä¸€ä¸ªå…¬å¸æœ‰ç‚¹åƒå»ºç«‹ä¸€ä¸ªå®—æ•™ã€‚å¦‚æœäººä»¬ä¸èƒ½å°†ä»–ä»¬æ—¥å¸¸çš„å·¥ä½œä¸ä»–ä»¬å…³å¿ƒçš„æ›´é«˜ç›®æ ‡è”ç³»èµ·æ¥ï¼Œä»–ä»¬å°±æ— æ³•åšå¥½è‡ªå·±çš„å·¥ä½œã€‚æˆ‘è®¤ä¸ºåœ¨ YC ç½‘ç»œä¸­ï¼ŒAirbnb åœ¨è¿™æ–¹é¢åšå¾—æœ€å¥½ï¼Œæˆ‘å¼ºçƒˆå»ºè®®å¤§å®¶å»çœ‹çœ‹ä»–ä»¬çš„æ–‡åŒ–ä»·å€¼è§‚ã€‚&lt;/p&gt;
&lt;p&gt;CEO ç»å¸¸çŠ¯çš„ä¸€ä¸ªé”™è¯¯æ˜¯åœ¨å•†ä¸šçš„è€è·¯ä¸Šåˆ›æ–°ï¼Œè€Œä¸æ˜¯åœ¨æ–°äº§å“å’Œè§£å†³æ–¹æ¡ˆä¸Šåˆ›æ–°ã€‚ä¾‹å¦‚ï¼Œè®¸å¤šåˆ›å§‹äººè®¤ä¸ºä»–ä»¬åº”è¯¥èŠ±æ—¶é—´å»å‘ç°æ–°çš„äººåŠ›èµ„æºã€è¥é”€ã€é”€å”®ã€èèµ„ã€å…¬å…³ç­‰æ–¹æ³•ã€‚è¿™å‡ ä¹æ€»æ˜¯ä¸å¥½çš„ã€‚åœ¨å·²ç»æœ‰å®šå¼çš„é¢†åŸŸé‡Œï¼Œåšå·²ç»è¢«è¯æ˜æœ‰æ•ˆçš„äº‹æƒ…ï¼Œå°†ä½ çš„åˆ›æ–°ç²¾åŠ›é›†ä¸­åœ¨ä½ æ­£åœ¨æ„å»ºçš„äº§å“æˆ–æœåŠ¡ä¸Šã€‚&lt;/p&gt;
&lt;h2 id=&#34;æ‹›è˜å’Œç®¡ç†&#34;&gt;æ‹›è˜å’Œç®¡ç†&lt;/h2&gt;
&lt;p&gt;æ‹›è˜æ˜¯ä½ æœ€é‡è¦çš„å·¥ä½œä¹‹ä¸€ï¼Œä¹Ÿæ˜¯æ‰“é€ ä¸€å®¶ä¼Ÿå¤§å…¬å¸ï¼ˆè€Œéä¼Ÿå¤§äº§å“ï¼‰çš„å…³é”®ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘å¯¹æ‹›è˜çš„ç¬¬ä¸€æ¡å»ºè®®å°±æ˜¯ä¸è¦å»åšã€‚æˆ‘ä»¬åœ¨ YC åˆä½œè¿‡çš„æœ€æˆåŠŸçš„å…¬å¸éƒ½ç­‰å¾…äº†ç›¸å¯¹è¾ƒé•¿çš„æ—¶é—´æ‰å¼€å§‹é›‡ä½£å‘˜å·¥ã€‚å‘˜å·¥å¾ˆè´µã€‚å‘˜å·¥ä¼šå¢åŠ ç»„ç»‡å¤æ‚æ€§å’Œæ²Ÿé€šå¼€é”€ã€‚æœ‰äº›ä½ å¯ä»¥å¯¹åˆ›å§‹äººè¯´çš„äº‹æƒ…ï¼Œä½ åœ¨å‘˜å·¥é¢å‰å°±ä¸èƒ½è¯´ã€‚å‘˜å·¥è¿˜ä¼šå¢åŠ æƒ¯æ€§â€”â€”éšç€å›¢é˜Ÿäººæ•°çš„å¢åŠ ï¼Œæ”¹å˜æ–¹å‘å°±ä¼šå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚æŠµåˆ¶ä»ä½ çš„å‘˜å·¥æ•°é‡ä¸­å¯»æ±‚è‡ªæˆ‘ä»·å€¼çš„å†²åŠ¨ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ä¼˜ç§€çš„äººæœ‰å¾ˆå¤šæœºä¼šã€‚ä»–ä»¬æƒ³åŠ å…¥ç«ç®­èˆ¬çš„å…¬å¸ã€‚å¦‚æœä½ ä¸€æ— æ‰€æœ‰ï¼Œä½ å¾ˆéš¾è˜è¯·åˆ°ä»–ä»¬ã€‚ä¸€æ—¦ä½ æ˜æ˜¾å¾—èƒœï¼Œä»–ä»¬å°±ä¼šæƒ³åŠ å…¥ä½ ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—é‡ç”³çš„æ˜¯ï¼Œä¼˜ç§€çš„äººæœ‰å¾ˆå¤šé€‰æ‹©ï¼Œè€Œä½ éœ€è¦ä¼˜ç§€çš„äººæ¥æ‰“é€ ä¸€å®¶ä¼Ÿå¤§çš„å…¬å¸ã€‚è¯·æ…·æ…¨åœ°ç»™äºˆè‚¡æƒã€ä¿¡ä»»å’Œè´£ä»»ã€‚æ„¿æ„å»è¿½æ±‚é‚£äº›ä½ è®¤ä¸ºä½ å¯èƒ½æ— æ³•å¾—åˆ°çš„äººã€‚è®°ä½ï¼Œä½ æƒ³è˜è¯·çš„é‚£ç§äººå¦‚æœæ„¿æ„çš„è¯ï¼Œä»–ä»¬å¯ä»¥è‡ªå·±åˆ›åŠå…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;å½“ä½ å¤„äºæ‹›è˜æ¨¡å¼ï¼ˆå³ä»ä½ è·å¾—äº§å“å¸‚åœºå¥‘åˆåº¦åˆ° T æ— ç©·å¤§çš„æ—¶å€™ï¼‰ï¼Œä½ åº”è¯¥èŠ±å¤§çº¦ 25% çš„æ—¶é—´åœ¨è¿™ä¸Šé¢ã€‚è‡³å°‘æœ‰ä¸€ä½åˆ›å§‹äººï¼Œé€šå¸¸æ˜¯ CEOï¼Œéœ€è¦åœ¨æ‹›è˜ä¸Šå˜å¾—å¾ˆæ£’ã€‚è¿™æ˜¯å¤§å¤šæ•° CEO çš„æ—¶é—´æ¶ˆè€—æœ€å¤§çš„æ´»åŠ¨ã€‚æ¯ä¸ªäººéƒ½è¯´ CEO åº”è¯¥èŠ±å¤§é‡çš„æ—¶é—´æ‹›è˜ï¼Œä½†å®é™…ä¸Šï¼Œé™¤äº†æœ€å¥½çš„ CEOï¼Œæ²¡æœ‰äººè¿™ä¹ˆåšã€‚è¿™å¯èƒ½æœ‰ä¸€äº›é“ç†ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¦å¦¥åäºä½ é›‡ä½£çš„äººçš„è´¨é‡ã€‚æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸€ç‚¹ï¼Œç„¶è€Œæ¯ä¸ªäººåœ¨æŸä¸ªç»æœ›çš„æ—¶åˆ»éƒ½å¦¥åè¿‡ã€‚æ¯ä¸ªäººéƒ½ä¼šåæ‚”ï¼Œæœ‰æ—¶è¿™å‡ ä¹ä¼šæ€æ­»å…¬å¸ã€‚å¥½äººå’Œåäººéƒ½æœ‰æ„ŸæŸ“åŠ›ï¼Œå¦‚æœä½ ä»ä¸€å¼€å§‹å°±é›‡ä½£äº†å¹³åº¸çš„äººï¼Œå¹³å‡æ°´å¹³é€šå¸¸ä¸ä¼šä¸Šå‡ã€‚åˆšå¼€å§‹å°±é›‡ä½£äº†å¹³åº¸çš„æ—©æœŸå‘˜å·¥çš„å…¬å¸å‡ ä¹æ°¸è¿œæ— æ³•æ¢å¤ã€‚å¯¹äººçš„ç›´è§‰è¦æœ‰ä¿¡å¿ƒã€‚å¦‚æœä½ æœ‰ç–‘è™‘ï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯ä¸ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¦é›‡ä½£é•¿æœŸæ¶ˆæçš„äººã€‚ä»–ä»¬ä¸é€‚åˆæ—©æœŸåˆ›ä¸šå…¬å¸çš„éœ€æ±‚â€”â€”ä¸–ç•Œå…¶ä»–åœ°æ–¹æ¯å¤©éƒ½ä¼šé¢„æµ‹ä½ çš„å¤±è´¥ï¼Œå…¬å¸å†…éƒ¨éœ€è¦å›¢ç»“ä¸€è‡´ï¼Œç›¸ä¿¡åå…¶é“è€Œè¡Œä¹‹ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå‡ ä¹æ‰€æœ‰çš„è§’è‰²ï¼Œéƒ½åº”ä¼˜å…ˆè€ƒè™‘èƒ½åŠ›è€Œéç»éªŒã€‚å¯»æ‰¾å…·æœ‰åŸå§‹æ™ºåŠ›å¹¶ä¸”æœ‰å®Œäº‹ä¸šæˆæœçš„äººã€‚å¯»æ‰¾ä½ å–œæ¬¢çš„äººâ€”â€”ä½ ä»¬ä¼šä¸€èµ·åº¦è¿‡å¾ˆå¤šæ—¶é—´ï¼Œè€Œä¸”ç»å¸¸å¤„äºç´§å¼ çš„æƒ…å†µã€‚å¯¹äºä½ ä¸ç†Ÿæ‚‰çš„äººï¼Œå°è¯•åœ¨ä»–ä»¬å…¨èŒåŠ å…¥ä¹‹å‰ä¸€èµ·åšä¸€ä¸ªé¡¹ç›®ã€‚&lt;/p&gt;
&lt;p&gt;æŠ•å…¥æ—¶é—´æˆä¸ºä¸€ä¸ªå¥½çš„ç®¡ç†è€…ã€‚è¿™å¯¹å¤§å¤šæ•°åˆ›å§‹äººæ¥è¯´éƒ½å¾ˆå›°éš¾ï¼Œè€Œä¸”è‚¯å®šæ˜¯åç›´è§‰çš„ã€‚ä½†è¿™æ˜¯éå¸¸é‡è¦çš„ã€‚æ‰¾åˆ°å¯ä»¥åœ¨è¿™æ–¹é¢å¸®åŠ©ä½ çš„å¯¼å¸ˆã€‚å¦‚æœä½ åœ¨è¿™æ–¹é¢åšå¾—ä¸å¥½ï¼Œä½ ä¼šå¾ˆå¿«å¤±å»å‘˜å·¥ï¼Œå¦‚æœä½ ä¸èƒ½ç•™ä½å‘˜å·¥ï¼Œä½ æ— è®ºä½ æ˜¯ä¸–ç•Œä¸Šæœ€å¥½çš„æ‹›è˜è€…ï¼Œéƒ½æ²¡å…³ç³»ã€‚å…³äºå¦‚ä½•åšä¸€ä¸ªå¥½çš„ç®¡ç†è€…çš„åŸåˆ™å·²ç»è®¨è®ºå¾—å¾ˆå¤šäº†ï¼Œä½†æˆ‘ä»æœªçœ‹åˆ°è¿‡è®¨è®ºâ€œä¸è¦è¿›å…¥è‹±é›„æ¨¡å¼â€çš„ã€‚å¤§å¤šæ•°åˆæ¬¡å½“ç®¡ç†è€…çš„äººåœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šæˆä¸ºè¿™ç§æ¨¡å¼çš„å—å®³è€…ï¼Œå°è¯•è‡ªå·±åšæ‰€æœ‰çš„äº‹æƒ…ï¼Œå¹¶å¯¹ä»–ä»¬çš„å‘˜å·¥ä¸å¯æ¥è¿‘ã€‚è¿™é€šå¸¸ä»¥å´©æºƒå‘Šç»ˆã€‚æŠµåˆ¶ä»»ä½•è¿›å…¥è¿™ç§æ¨¡å¼çš„è¯±æƒ‘ï¼Œå¹¶æ„¿æ„æ¥å—é¡¹ç›®å»¶æœŸä»¥æœ‰ä¸€ä¸ªè¿ä½œè‰¯å¥½çš„å›¢é˜Ÿã€‚&lt;/p&gt;
&lt;p&gt;è¯´åˆ°ç®¡ç†ï¼Œå°½åŠ›è®©æ‰€æœ‰äººéƒ½åœ¨åŒä¸€ä¸ªåŠå…¬å®¤ã€‚ä¸çŸ¥ä¸ºä½•ï¼Œåˆ›ä¸šå…¬å¸æ€»æ˜¯åœ¨è¿™æ–¹é¢å¦¥åã€‚ä½†å‡ ä¹æ‰€æœ‰æœ€æˆåŠŸçš„åˆ›ä¸šå…¬å¸å¼€å§‹çš„æ—¶å€™éƒ½åœ¨ä¸€èµ·ã€‚æˆ‘è®¤ä¸ºè¿œç¨‹å·¥ä½œå¯¹äºå¤§å…¬å¸å¯èƒ½å¾ˆå¥½ï¼Œä½†å¯¹äºåˆ›ä¸šå…¬å¸æ¥è¯´ï¼Œå®ƒå¹¶ä¸æ˜¯æˆåŠŸçš„ç§˜è¯€ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œå¿«é€Ÿè§£é›‡ã€‚æ¯ä¸ªäººéƒ½çŸ¥é“è¿™ä¸€ç‚¹ï¼Œä½†æ²¡äººä¼šåšã€‚ä½†æˆ‘è¿˜æ˜¯æƒ³è¯´ä¸€ä¸‹ã€‚å¦å¤–ï¼Œæ— è®ºä»–ä»¬åœ¨åšä»€ä¹ˆäº‹æƒ…ä¸Šæœ‰å¤šå¥½ï¼Œåªè¦ä»–ä»¬å¯¹æ–‡åŒ–æœ‰æ¯’ï¼Œå°±è§£é›‡ä»–ä»¬ã€‚æ–‡åŒ–æ˜¯ç”±ä½ é›‡ä½£ã€è§£é›‡å’Œæå‡çš„äººæ¥å®šä¹‰çš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&#34;http://blog.samaltman.com/how-to-hire&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æˆ‘å†™äº†ä¸€ç¯‡æ›´è¯¦ç»†çš„åšå®¢æ–‡ç« ã€‚&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&#34;ç«äº‰å¯¹æ‰‹&#34;&gt;ç«äº‰å¯¹æ‰‹&lt;/h2&gt;
&lt;p&gt;å…³äºç«äº‰å¯¹æ‰‹çš„ä¸€å¥è¯ï¼šç«äº‰å¯¹æ‰‹æ˜¯åˆ›ä¸šå…¬å¸çš„é¬¼æ•…äº‹ã€‚åˆ›ä¸šå…¬å¸è®¤ä¸ºå®ƒä»¬æ˜¯æ€æ­» 99% çš„åˆ›ä¸šå…¬å¸çš„åŸå› ã€‚ä½† 99% çš„åˆ›ä¸šå…¬å¸æ˜¯è‡ªæ€ï¼Œè€Œéä»–æ€ã€‚ä½ åº”è¯¥æ›´æ‹…å¿ƒä½ æ‰€æœ‰çš„å†…éƒ¨é—®é¢˜ã€‚å¦‚æœä½ å¤±è´¥ï¼Œå¾ˆå¯èƒ½æ˜¯å› ä¸ºä½ æ²¡èƒ½åˆ¶é€ å‡ºä¸€ä¸ªä¼Ÿå¤§çš„äº§å“ï¼Œå’Œ/æˆ–æ²¡èƒ½æ‰“é€ å‡ºä¸€ä¸ªä¼Ÿå¤§çš„å…¬å¸ã€‚&lt;/p&gt;
&lt;p&gt;99% çš„æ—¶é—´ï¼Œä½ åº”è¯¥å¿½ç•¥ç«äº‰å¯¹æ‰‹ã€‚ç‰¹åˆ«æ˜¯å½“ä»–ä»¬ç­¹é›†å¤§é‡èµ„é‡‘æˆ–åœ¨åª’ä½“ä¸Šåˆ¶é€ å¤§é‡å™ªéŸ³æ—¶ï¼Œæ›´åº”è¯¥å¿½ç•¥ä»–ä»¬ã€‚åœ¨ä»–ä»¬ç”¨ä¸€ä¸ªçœŸå®çš„ï¼Œå·²ç»å‘å¸ƒçš„äº§å“å‡»è´¥ä½ ä¹‹å‰ï¼Œä¸è¦æ‹…å¿ƒç«äº‰å¯¹æ‰‹ã€‚æ–°é—»å‘å¸ƒæ¯”å†™ä»£ç æ›´å®¹æ˜“ï¼Œå†™ä»£ç åˆæ¯”åˆ¶ä½œä¼Ÿå¤§çš„äº§å“æ›´å®¹æ˜“ã€‚ç”¨äº¨åˆ©Â·ç¦ç‰¹çš„è¯æ¥è¯´ï¼šâ€œåº”å½“å®³æ€•çš„ç«äº‰è€…æ˜¯é‚£äº›å®Œå…¨ä¸ç†ä¼šä½ ï¼Œåªæ˜¯ä¸€ç›´åœ¨æ”¹å–„ä»–ä»¬è‡ªå·±çš„ä¸šåŠ¡çš„äººã€‚â€&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ªå·¨å¤´å…¬å¸åœ¨ä»–ä»¬å°æ—¶å€™éƒ½é¢å¯¹è¿‡æ¯”ä½ ç°åœ¨é¢ä¸´çš„æ›´ä¸¥é‡çš„ç«äº‰å¨èƒï¼Œè€Œä»–ä»¬éƒ½å¾ˆå¥½çš„åº¦è¿‡äº†ã€‚æ€»æ˜¯æœ‰å¯¹ç­–ã€‚&lt;/p&gt;
&lt;h2 id=&#34;èµšé’±&#34;&gt;èµšé’±&lt;/h2&gt;
&lt;p&gt;å“¦ï¼Œèµšé’±ã€‚ä½ éœ€è¦å¼„æ¸…æ¥šå¦‚ä½•å»åšã€‚&lt;/p&gt;
&lt;p&gt;è¿™ä¸ªçš„ç®€çŸ­ç‰ˆæœ¬æ˜¯ï¼Œä½ å¿…é¡»è®©äººä»¬æ”¯ä»˜ç»™ä½ çš„é’±è¶…è¿‡ä½ æä¾›å•†å“/æœåŠ¡çš„æˆæœ¬ã€‚ä¸çŸ¥ä¸ºä½•ï¼Œäººä»¬æ€»æ˜¯å¿˜è®°è€ƒè™‘æä¾›æœåŠ¡çš„æˆæœ¬éƒ¨åˆ†ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€ä¸ªå…è´¹çš„äº§å“ï¼Œä¸è¦è®¡åˆ’é€šè¿‡è´­ä¹°ç”¨æˆ·æ¥å¢é•¿ã€‚å¯¹äºä¾èµ–å¹¿å‘Šçš„ä¸šåŠ¡æ¥è¯´ï¼Œè¿™çœŸçš„å¾ˆéš¾ã€‚ä½ éœ€è¦åˆ¶ä½œä¸€äº›äººä»¬ä¼šå’Œæœ‹å‹åˆ†äº«çš„ä¸œè¥¿ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€ä¸ªä»˜è´¹äº§å“ï¼Œä½†å®¢æˆ·ç”Ÿå‘½å‘¨æœŸä»·å€¼ (LTV) å°äº 500 ç¾å…ƒï¼Œä½ é€šå¸¸æ— æ³•è´Ÿæ‹…é”€å”®ã€‚è¯•éªŒä¸åŒçš„ç”¨æˆ·è·å–æ–¹æ³•ï¼Œå¦‚ SEO/SEMï¼Œå¹¿å‘Šï¼Œé‚®ä»¶ç­‰ï¼Œä½†å°½é‡åœ¨ 3 ä¸ªæœˆå†…å›æ”¶ä½ çš„å®¢æˆ·è·å–æˆæœ¬ (CAC)ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰ä¸€ä¸ªä»˜è´¹äº§å“ï¼Œå…¶ LTVï¼ˆå‡€æ”¶å…¥ï¼‰è¶…è¿‡ 500 ç¾å…ƒï¼Œä½ é€šå¸¸å¯ä»¥è´Ÿæ‹…å¾—èµ·ç›´é”€ã€‚å°è¯•å…ˆè‡ªå·±é”€å”®äº§å“ï¼Œäº†è§£ä»€ä¹ˆæ˜¯æœ‰æ•ˆçš„ã€‚ã€ŠHacking Salesã€‹æ˜¯ä¸€æœ¬æœ‰ç”¨çš„ä¹¦ã€‚&lt;/p&gt;
&lt;p&gt;æ— è®ºå¦‚ä½•ï¼Œå°½å¿«è¾¾åˆ°â€œæ‹‰é¢ç›ˆåˆ©â€â€”â€”å³ï¼Œèµšè¶³å¤Ÿçš„é’±è®©åˆ›å§‹äººå¯ä»¥é æ‹‰é¢åº¦æ—¥â€”â€”çš„çŠ¶æ€ã€‚å½“ä½ åˆ°è¾¾è¿™é‡Œï¼Œä½ å°±æŒæ¡äº†è‡ªå·±çš„å‘½è¿ï¼Œä¸å†å—æŠ•èµ„è€…å’Œé‡‘èå¸‚åœºçš„æ‘†å¸ƒã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ç›´å…³æ³¨ä½ çš„ç°é‡‘æµã€‚è™½ç„¶è¿™å¬èµ·æ¥éš¾ä»¥ç½®ä¿¡ï¼Œä½†æˆ‘ä»¬å·²ç»çœ‹åˆ°è¿‡åˆ›å§‹äººåœ¨æ²¡æœ‰æ„è¯†åˆ°çš„æƒ…å†µä¸‹ç”¨å…‰äº†èµ„é‡‘ï¼ˆå¹¶ä¸”&lt;a href=&#34;http://paulgraham.com/aord.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;é˜…è¯» Paul Graham çš„æ–‡ç« &lt;/a&gt;ï¼‰ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç­¹èµ„&#34;&gt;ç­¹èµ„&lt;/h2&gt;
&lt;p&gt;å¤§å¤šæ•°åˆ›ä¸šå…¬å¸åœ¨æŸä¸ªæ—¶å€™éƒ½ä¼šç­¹èµ„ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ä½ éœ€è¦èµ„é‡‘æˆ–è€…åœ¨æ¡ä»¶å¥½çš„æƒ…å†µä¸‹å¯ä»¥è·å¾—èµ„é‡‘æ—¶ï¼Œä½ åº”è¯¥ç­¹èµ„ã€‚å°å¿ƒä¸è¦å¤±å»ä½ çš„èŠ‚ä¿­ç²¾ç¥ï¼Œæˆ–è€…å¼€å§‹é€šè¿‡æŠ•é’±æ¥è§£å†³é—®é¢˜ã€‚æ²¡æœ‰è¶³å¤Ÿçš„é’±å¯èƒ½ä¼šå¾ˆç³Ÿç³•ï¼Œä½†æ˜¯æœ‰å¤ªå¤šçš„é’±å‡ ä¹æ€»æ˜¯ç³Ÿç³•çš„ã€‚&lt;/p&gt;
&lt;p&gt;æˆåŠŸç­¹èµ„çš„ç§˜è¯€æ˜¯æ‹¥æœ‰ä¸€å®¶å¥½å…¬å¸ã€‚æ‰€æœ‰å…¶ä»–çš„åˆ›å§‹äººè¯•å›¾è¿‡åº¦ä¼˜åŒ–æµç¨‹çš„ä¸œè¥¿å¯èƒ½åªåœ¨ 5% çš„æ—¶é—´é‡Œæœ‰ç”¨ã€‚æŠ•èµ„è€…æ­£åœ¨å¯»æ‰¾çš„æ˜¯é‚£äº›æ— è®ºä»–ä»¬æ˜¯å¦æŠ•èµ„ï¼Œéƒ½ä¼šéå¸¸æˆåŠŸï¼Œä½†æœ‰äº†å¤–éƒ¨èµ„æœ¬å¯ä»¥æ›´å¿«å‘å±•çš„å…¬å¸ã€‚â€œéå¸¸æˆåŠŸâ€çš„éƒ¨åˆ†å¾ˆé‡è¦â€”â€”å› ä¸ºæŠ•èµ„è€…çš„å›æŠ¥ä¸»è¦æ˜¯ç”±å¤§æˆåŠŸé©±åŠ¨çš„ï¼Œå¦‚æœä¸€ä¸ªæŠ•èµ„è€…è®¤ä¸ºä½ æœ‰ 100% çš„æœºä¼šåˆ›é€ ä¸€ä¸ª 1000 ä¸‡ç¾å…ƒçš„å…¬å¸ï¼Œä½†å‡ ä¹æ²¡æœ‰æœºä¼šå»ºç«‹ä¸€ä¸ªæ›´å¤§çš„å…¬å¸ï¼Œä»–/å¥¹å³ä½¿åœ¨éå¸¸ä½çš„ä¼°å€¼ä¸‹ä¹Ÿå¯èƒ½ä¸ä¼šæŠ•èµ„ã€‚æ€»æ˜¯è§£é‡Šä¸ºä»€ä¹ˆä½ å¯èƒ½ä¼šè·å¾—å·¨å¤§çš„æˆåŠŸã€‚&lt;/p&gt;
&lt;p&gt;æŠ•èµ„è€…å—åˆ°é”™è¿‡ä¸‹ä¸€ä¸ªè°·æ­Œå’Œå®³æ€•åœ¨çœ‹èµ·æ¥æ˜æ˜¾æ„šè ¢çš„äº‹æƒ…ä¸ŠæŸå¤±é’±çš„åŒé‡ææƒ§çš„é©±åŠ¨ã€‚ï¼ˆå¯¹äºæœ€å¥½çš„å…¬å¸ï¼Œä»–ä»¬åŒæ—¶å®³æ€•è¿™ä¸¤ä¸ªã€‚ï¼‰&lt;/p&gt;
&lt;p&gt;åœ¨ä½ çš„å…¬å¸å¤„äºä¸è¶³ä»¥å¸å¼•èµ„æœ¬çš„çŠ¶æ€æ—¶ï¼Œè¯•å›¾ç­¹èµ„æ˜¯ä¸ªåä¸»æ„ã€‚ä½ ä¼šçƒ§é’±å¹¶æµªè´¹æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åœ¨ç­¹èµ„æ–¹é¢æŒ£æ‰ï¼Œä¸è¦å¤±å»ä¿¡å¿ƒã€‚è®¸å¤šæœ€å¥½çš„å…¬å¸éƒ½æ›¾åœ¨è¿™æ–¹é¢æŒ£æ‰ï¼Œå› ä¸ºæœ€å¥½çš„å…¬å¸é€šå¸¸åœ¨ä¸€å¼€å§‹çœ‹èµ·æ¥å¾ˆç³Ÿç³•ï¼ˆè€Œä¸”ä»–ä»¬å‡ ä¹æ€»æ˜¯çœ‹èµ·æ¥ä¸åˆæ—¶å®œï¼‰ã€‚å½“æŠ•èµ„è€…å¯¹ä½ è¯´ä¸çš„æ—¶å€™ï¼Œç›¸ä¿¡ä»–ä»¬è¯´çš„â€œä¸â€ï¼Œä½†ä¸è¦ç›¸ä¿¡ä»–ä»¬çš„ç†ç”±ã€‚å¹¶è®°ä½ï¼Œé™¤äº†â€œæ˜¯â€ï¼Œä»»ä½•ä¸œè¥¿éƒ½æ˜¯â€œä¸â€â€”â€”æŠ•èµ„è€…æœ‰ä¸€ç§è®©â€œä¸â€å¬èµ·æ¥åƒâ€œå¯èƒ½æ˜¯â€çš„èƒ½åŠ›ã€‚&lt;/p&gt;
&lt;p&gt;è¿›è¡Œç­¹æ¬¾è°ˆåˆ¤æ—¶ï¼Œä½ éœ€è¦å¹¶è¡Œè¿›è¡Œï¼Œè€Œä¸æ˜¯é¡ºåºåœ°æŒ‰ç…§ä½ æœ€å–œæ¬¢çš„æŠ•èµ„è€…åå•è¿›è¡Œã€‚è®©æŠ•èµ„è€…é‡‡å–è¡ŒåŠ¨çš„é€”å¾„ï¼Œå°±æ˜¯å®³æ€•å…¶ä»–æŠ•èµ„è€…ä¼šæŠ¢èµ°ä»–ä»¬çš„æœºä¼šã€‚&lt;/p&gt;
&lt;p&gt;æŠŠç­¹æ¬¾çœ‹ä½œæ˜¯ä¸€ç§å¿…è¦çš„æ¶ï¼Œå°½å¿«å®Œæˆã€‚æœ‰äº›åˆ›å§‹äººçƒ­è¡·äºç­¹æ¬¾ï¼›è¿™æ€»æ˜¯ä¸å¥½çš„ã€‚æœ€å¥½å°†è¿™é¡¹ä»»åŠ¡äº¤ç»™ä¸€ä½åˆ›å§‹äººï¼Œè¿™æ ·å…¬å¸å°±ä¸ä¼šåœæ»ä¸å‰ã€‚&lt;/p&gt;
&lt;p&gt;è¯·è®°ä½ï¼Œå¤§å¤šæ•°é£é™©æŠ•èµ„äººå¯¹å¤§å¤šæ•°è¡Œä¸šäº†è§£ä¸æ·±ã€‚æ•°æ®æ°¸è¿œæ˜¯æœ€æœ‰è¯´æœåŠ›çš„ã€‚&lt;/p&gt;
&lt;p&gt;è¿™ç§æƒ…å†µå¼€å§‹æœ‰æ‰€æ”¹å˜ï¼Œä½†ä¸å¹¸çš„æ˜¯ï¼Œå¤§å¤šæ•°æŠ•èµ„è€…ï¼ˆå°¤å…¶æ˜¯ Y Combinatorï¼‰ä»ç„¶éœ€è¦ä½ ä»¬å…±åŒè®¤è¯†çš„äººçš„ä»‹ç»ï¼Œä»–ä»¬æ‰ä¼šè®¤çœŸå¯¹å¾…ä½ ã€‚&lt;/p&gt;
&lt;p&gt;åšæŒä½¿ç”¨ç®€æ´çš„æ¡æ¬¾ï¼ˆå¤æ‚çš„æ¡æ¬¾ä¼šç´¯ç§¯å¹¶åœ¨æ¯ä¸€è½®æŠ•èµ„ä¸­å˜å¾—æ›´ç³Ÿï¼‰ï¼Œä½†ä¸è¦è¿‡åº¦ä¼˜åŒ–ï¼Œç‰¹åˆ«æ˜¯åœ¨ä¼°å€¼æ–¹é¢ã€‚ä¼°å€¼æ˜¯å¯ä»¥é‡åŒ–ç«äº‰çš„ä¸œè¥¿ï¼Œæ‰€ä»¥åˆ›å§‹äººå–œæ¬¢äº‰å¤ºæœ€é«˜ä¼°å€¼ã€‚ä½†ä¸­ç­‰ä¼°å€¼å¹¶ä¸é‡è¦ã€‚&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€ç¬”èµ„é‡‘æœ€éš¾è·å¾—ï¼Œæ‰€ä»¥åº”è¯¥é›†ä¸­ç²¾åŠ›è·å–ï¼Œè¿™é€šå¸¸æ„å‘³ç€ä½ éœ€è¦å°†æ³¨æ„åŠ›é›†ä¸­åœ¨æœ€å–œæ¬¢ä½ çš„äººèº«ä¸Šã€‚å§‹ç»ˆè¦æœ‰å¤šä¸ªè®¡åˆ’ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ä¸ç­¹é›†ä»»ä½•èµ„é‡‘ï¼Œæ ¹æ®å…´è¶£çµæ´»è°ƒæ•´â€”â€”å¦‚æœä½ èƒ½æ›´å¥½åœ°ä½¿ç”¨æ›´å¤šçš„èµ„é‡‘ï¼Œå¹¶ä¸”å®ƒåœ¨åˆç†çš„æ¡æ¬¾ä¸‹å¯ç”¨ï¼Œé‚£ä¹ˆè¯·è€ƒè™‘æ¥å—ã€‚&lt;/p&gt;
&lt;p&gt;æ“…é•¿æ¨é”€çš„ä¸€ä¸ªé‡è¦ç§˜è¯€æ˜¯ï¼Œè®©ä½ çš„æ•…äº‹å°½å¯èƒ½æ¸…æ™°ã€æ˜“æ‡‚ã€‚å½“ç„¶ï¼Œæœ€é‡è¦çš„ç§˜è¯€æ˜¯ï¼Œä½ çœŸçš„éœ€è¦æœ‰ä¸€ä¸ªå¥½å…¬å¸ã€‚å…³äºæ¨é”€å†…å®¹æœ‰å¾ˆå¤šæƒ³æ³•ï¼Œä½†è‡³å°‘ä½ éœ€è¦åŒ…æ‹¬ï¼šä½¿å‘½ã€é—®é¢˜ã€äº§å“/æœåŠ¡ã€å•†ä¸šæ¨¡å¼ã€å›¢é˜Ÿã€å¸‚åœºå’Œå¸‚åœºå¢é•¿ç‡ã€è´¢åŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;è¦è®°ä½ï¼Œæ¯ä¸€è½®ç­¹èµ„çš„æ ‡å‡†éƒ½ä¼šæ›´é«˜ã€‚å¦‚æœä½ åœ¨ç§å­è½®æ—¶åªæ˜¯ä¸€ä¸ªå¼•äººæ³¨ç›®çš„æ¼”è®²è€…ï¼Œé‚£ä¹ˆåœ¨ A è½®ç­¹èµ„æ—¶å¯èƒ½å°±æ²¡æœ‰æ•ˆæœäº†ã€‚&lt;/p&gt;
&lt;p&gt;å¥½çš„æŠ•èµ„è€…ç¡®å®èƒ½å¸¦æ¥å¾ˆå¤§çš„ä»·å€¼ã€‚åçš„æŠ•èµ„è€…ä¼šå¸¦æ¥å¾ˆå¤§çš„è´Ÿé¢å½±å“ã€‚å¤§å¤šæ•°æŠ•èµ„è€…å¤„äºä¸­é—´åœ°ä½ï¼Œæ—¢æ²¡æœ‰å¢åŠ ä¹Ÿæ²¡æœ‰å‡å°‘ã€‚åªæŠ•èµ„å°‘é‡èµ„é‡‘çš„æŠ•èµ„è€…é€šå¸¸ä¸ä¼šå¯¹ä½ æœ‰ä»»ä½•å¸®åŠ©ï¼ˆå³ï¼Œè¦è­¦æƒ•èšä¼šè½®æŠ•èµ„ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¼˜ç§€çš„è‘£äº‹ä¼šæˆå‘˜æ˜¯å…¬å¸å¤–éƒ¨é©±åŠ¨åŠ›ä¸­æœ€å¥½çš„ä¸€ç§ï¼Œé™¤äº†ç”¨æˆ·ä¹‹å¤–ï¼Œå¤–éƒ¨é©±åŠ¨åŠ›æ¯”å¤§å¤šæ•°åˆ›å§‹äººæƒ³è±¡çš„æ›´æœ‰ä»·å€¼ã€‚æ„¿æ„æ¥å—è¾ƒä½çš„ä¼°å€¼ï¼Œä»¥è·å–æ„¿æ„ç§¯æå‚ä¸çš„ä¼˜ç§€è‘£äº‹ä¼šæˆå‘˜ã€‚&lt;/p&gt;
&lt;p&gt;æˆ‘è®¤ä¸º&lt;a href=&#34;http://paulgraham.com/fr.html&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Paul Graham çš„è¿™ç¯‡æ–‡ç« &lt;/a&gt; æ˜¯å…³äºç­¹æ¬¾çš„æœ€å¥½çš„æ–‡ç« ã€‚&lt;/p&gt;
&lt;h2 id=&#34;ç»“æŸè¯­&#34;&gt;ç»“æŸè¯­&lt;/h2&gt;
&lt;p&gt;è¦è®°ä½ï¼Œæ¯ä¸€ä¸ªä¼Ÿå¤§çš„æƒ³æ³•éƒ½æœ‰è‡³å°‘ä¸€åƒäººæœ‰ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªäººä¼šæˆåŠŸã€‚åŒºåˆ«åœ¨äºæ‰§è¡Œã€‚è¿™æ˜¯ä¸€ç§ç£¨ç£¨è¹­è¹­çš„è¿‡ç¨‹ï¼Œæ¯ä¸ªäººéƒ½å¸Œæœ›æœ‰å…¶ä»–æ–¹å¼å°†â€œæƒ³æ³•â€è½¬åŒ–ä¸ºâ€œæˆåŠŸâ€ï¼Œä½†æ˜¯è¿˜æ²¡æœ‰äººæ‰¾åˆ°æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;æ‰€ä»¥ä½ éœ€è¦çš„å°±æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„æƒ³æ³•ï¼Œä¸€ä¸ªä¼Ÿå¤§çš„å›¢é˜Ÿï¼Œä¸€ä¸ªä¼Ÿå¤§çš„äº§å“ï¼Œä»¥åŠä¼Ÿå¤§çš„æ‰§è¡ŒåŠ›ã€‚é‚£ä¹ˆç®€å•ï¼;)&lt;/p&gt;
</description>
    </item>
    
    <item>
      <title>Kubernetes Gateway API æ­£å¼å‘å¸ƒå¹¶å¼•å…¥ ingress2gateway é¡¹ç›®ç”¨äºç®€åŒ– Gateway API å‡çº§</title>
      <link>https://cloudnativecn.com/blog/gateway-api-ingress2gateway/</link>
      <pubDate>Wed, 01 Nov 2023 08:00:00 +0800</pubDate>
      <guid>https://cloudnativecn.com/blog/gateway-api-ingress2gateway/</guid>
      <description>&lt;p&gt;è¿‘æ—¥ Kubernetes Gateway API &lt;a href=&#34;https://kubernetes.io/blog/2023/10/31/gateway-api-ga/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®£å¸ƒ GA&lt;/a&gt;ï¼Œæ­¤ç‰ˆæœ¬åŒ…æ‹¬å°† Gatewayã€GatewayClass å’Œ HTTPRoute å‡çº§åˆ° v1ï¼Œè¿™æ„å‘³ç€å®ƒä»¬ç°åœ¨å·²å…¨é¢å¯ç”¨ (GA)ã€‚æ­¤ API ç‰ˆæœ¬è¡¨ç¤ºå¯¹ API è¡¨é¢çš„é«˜åº¦ä¿¡ä»»ï¼Œå¹¶æä¾›å‘åå…¼å®¹æ€§çš„ä¿è¯ã€‚è¯·æ³¨æ„ï¼Œå°½ç®¡æ ‡å‡†é€šé“ä¸­åŒ…å«çš„è¿™äº› API çš„ç‰ˆæœ¬ç°åœ¨è¢«è®¤ä¸ºæ˜¯ç¨³å®šçš„ï¼Œä½†è¿™å¹¶ä¸æ„å‘³ç€å®ƒä»¬æ˜¯å®Œæ•´çš„ã€‚å½“è¿™äº› API æ»¡è¶³æ¯•ä¸šæ ‡å‡†æ—¶ï¼Œå°†ç»§ç»­é€šè¿‡å®éªŒæ¸ é“æ¥æ”¶æ–°åŠŸèƒ½ã€‚æœ‰å…³æ‰€æœ‰è¿™äº›å·¥ä½œåŸç†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…ç½‘å…³ API ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-kubernetes-gateway-api-logo&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Kubernetes Gateway API logo&#34; srcset=&#34;
               /blog/gateway-api-ingress2gateway/gateway-api-logo_hu11496939917740245163.webp 400w,
               /blog/gateway-api-ingress2gateway/gateway-api-logo_hu11498100786488952324.webp 760w,
               /blog/gateway-api-ingress2gateway/gateway-api-logo_hu3847394361086080631.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/gateway-api-ingress2gateway/gateway-api-logo_hu11496939917740245163.webp&#34;
               width=&#34;760&#34;
               height=&#34;211&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Kubernetes Gateway API logo
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;p&gt;ä¸æ­¤åŒæ—¶ Gateway API é¡¹ç›®ç»„å‘å¸ƒäº† &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt; å·¥å…·ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ ä» &lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ingress&lt;/a&gt; è¿ç§»åˆ° &lt;a href=&#34;https://gateway-api.sigs.k8s.io/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API&lt;/a&gt;ã€‚Gateway API è·ç¦» GAï¼ˆGeneral Availabilityï¼Œæ­£å¼ç‰ˆæœ¬ï¼‰å‘å¸ƒåªæœ‰å‡ å‘¨çš„æ—¶é—´ï¼Œå¦‚æœä½ è¿˜æ²¡æœ‰è¿›è¡Œå‡çº§ï¼Œç°åœ¨æ˜¯æ—¶å€™è€ƒè™‘ä¸€ä¸‹äº†ï¼&lt;/p&gt;
&lt;h2 id=&#34;èƒŒæ™¯&#34;&gt;èƒŒæ™¯&lt;/h2&gt;
&lt;p&gt;åœ¨ä¸æ–­å‘å±•çš„ Kubernetes ä¸–ç•Œä¸­ï¼Œç½‘ç»œåœ¨å…¶ä¸­èµ·ç€è‡³å…³é‡è¦çš„ä½œç”¨ã€‚éšç€è¶Šæ¥è¶Šå¤šçš„åº”ç”¨ç¨‹åºéƒ¨ç½²åœ¨ Kubernetes é›†ç¾¤ä¸­ï¼Œå°†è¿™äº›æœåŠ¡æœ‰æ•ˆåœ°æš´éœ²ç»™å®¢æˆ·ç«¯æˆä¸ºä¸€ä¸ªå…³é”®é—®é¢˜ã€‚å¦‚æœä½ ä¸€ç›´åœ¨ä½¿ç”¨ Kubernetesï¼Œä½ å¯èƒ½å¯¹ &lt;a href=&#34;https://kubernetes.io/docs/concepts/services-networking/ingress/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Ingress API&lt;/a&gt; éå¸¸ç†Ÿæ‚‰ï¼Œè¿™ä¸€ç›´æ˜¯ç®¡ç†å¯¹å¤–è®¿é—®æœåŠ¡çš„é¦–é€‰è§£å†³æ–¹æ¡ˆã€‚&lt;/p&gt;
&lt;p&gt;Ingress API æä¾›äº†ä¸€ç§å°†å¤–éƒ¨æµé‡è·¯ç”±åˆ°é›†ç¾¤å†…éƒ¨åº”ç”¨ç¨‹åºçš„æ–¹å¼ï¼Œä½¿å…¶æˆä¸ºè®¸å¤š Kubernetes ç”¨æˆ·ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚ç„¶è€Œï¼ŒIngress ä¹Ÿæœ‰å…¶å±€é™æ€§ï¼Œéšç€åº”ç”¨ç¨‹åºå˜å¾—è¶Šæ¥è¶Šå¤æ‚ï¼Œå¯¹ Kubernetes é›†ç¾¤çš„éœ€æ±‚ä¹Ÿå¢åŠ ï¼Œè¿™äº›å±€é™æ€§å¯èƒ½æˆä¸ºç“¶é¢ˆã€‚&lt;/p&gt;
&lt;p&gt;å…¶ä¸­ä¸€äº›å±€é™æ€§åŒ…æ‹¬ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¶³çš„å…±åŒåŸºå‡†&lt;/strong&gt; - é€šè¿‡å°è¯•ä¸ºå„ç§ HTTP ä»£ç†å»ºç«‹ä¸€ä¸ªå…±åŒåŸºå‡†ï¼ŒIngress åªèƒ½å®¹çº³åŸºæœ¬çš„ HTTP è·¯ç”±ï¼Œå°†å½“ä»£ä»£ç†çš„æ›´å¤šåŠŸèƒ½ï¼ˆå¦‚æµé‡æ‹†åˆ†å’Œæ ‡å¤´åŒ¹é…ï¼‰å¼ºåˆ¶è½¬ç§»åˆ°ç‰¹å®šäºæä¾›å•†çš„ã€ä¸å¯ä¼ é€’çš„æ³¨é‡Šä¸­ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;ä¸è¶³çš„æƒé™æ¨¡å‹&lt;/strong&gt; - Ingress è§„èŒƒåœ¨ä¸€ä¸ªå¯¹è±¡ä¸­åŒæ—¶é…ç½®åŸºç¡€è®¾æ–½å’Œåº”ç”¨ç¨‹åºé…ç½®ã€‚åœ¨ Ingress ä¸­ï¼Œé›†ç¾¤æ“ä½œå‘˜å’Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜åœ¨åŒä¸€ä¸ª Ingress å¯¹è±¡ä¸Šè¿›è¡Œæ“ä½œï¼Œè€Œå½¼æ­¤çš„è§’è‰²å¹¶ä¸æ¸…æ¥šã€‚è¿™å¯¼è‡´äº†ä¸è¶³çš„åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶ï¼Œå¹¶ä¸”å¾ˆå®¹æ˜“å‡ºç°è®¾ç½®é”™è¯¯ã€‚&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;åè®®å¤šæ ·æ€§çš„ç¼ºä¹&lt;/strong&gt; - Ingress ä¸»è¦å…³æ³¨ HTTP(S) è·¯ç”±ï¼Œå¹¶æ²¡æœ‰åŸç”Ÿæ”¯æŒå…¶ä»–åè®®ï¼Œæ¯”å¦‚ TCPã€UDP å’Œ gRPCã€‚è¿™ä¸ªå±€é™æ€§ä½¿å¾—å®ƒåœ¨å¤„ç†é HTTP å·¥ä½œè´Ÿè½½æ–¹é¢ä¸å¤ªé€‚ç”¨ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;gateway-api&#34;&gt;Gateway API&lt;/h2&gt;
&lt;p&gt;ä¸ºäº†å…‹æœè¿™äº›é—®é¢˜ï¼ŒGateway API è®¾è®¡äº†ä¸€ç§æ›´çµæ´»ã€å¯æ‰©å±•å’Œå¼ºå¤§çš„æ–¹å¼æ¥ç®¡ç†æµé‡åˆ°ä½ çš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;Gateway API è·ç¦» GAï¼ˆæ­£å¼ç‰ˆæœ¬ï¼‰å‘å¸ƒåªæœ‰å‡ å‘¨çš„æ—¶é—´ã€‚å®ƒæä¾›äº†ä¸€ä¸ªæ ‡å‡†çš„ Kubernetes API æ¥æ§åˆ¶å…¥å£æµé‡ã€‚å®ƒæä¾›äº†æ‰©å±•çš„åŠŸèƒ½ã€æ”¹è¿›çš„è‡ªå®šä¹‰æ€§å’Œæ›´å¤§çš„çµæ´»æ€§ã€‚é€šè¿‡å…³æ³¨æ¨¡å—åŒ–å’Œè¡¨è¾¾èƒ½åŠ›å¼ºå¤§çš„ API èµ„æºï¼ŒGateway API å¯ä»¥æè¿°æ›´å¹¿æ³›çš„è·¯ç”±é…ç½®å’Œæ¨¡å‹ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨ Kubernetes ä¸­ä» Ingress API è¿ç§»åˆ° Gateway API çš„è¿‡ç¨‹æ˜¯ç”± Gateway API æä¾›çš„ä¼˜åŠ¿å’Œé«˜çº§åŠŸèƒ½é©±åŠ¨çš„ï¼Œå®ƒçš„åŸºç¡€å»ºç«‹åœ¨å››ä¸ªæ ¸å¿ƒåŸåˆ™ä¸Šï¼šé¢å‘è§’è‰²çš„æ–¹æ³•ã€å¯ç§»æ¤æ€§ã€è¡¨è¾¾æ€§å’Œå¯æ‰©å±•æ€§ã€‚&lt;/p&gt;
&lt;h3 id=&#34;é¢å‘è§’è‰²çš„æ–¹æ³•&#34;&gt;é¢å‘è§’è‰²çš„æ–¹æ³•&lt;/h3&gt;
&lt;p&gt;Gateway API ä½¿ç”¨é¢å‘è§’è‰²çš„æ–¹æ³•ï¼Œä½¿å…¶ä¸å‚ä¸é…ç½® Kubernetes æœåŠ¡ç½‘ç»œçš„ç»„ç»‡ä¸­çš„ä¼ ç»Ÿè§’è‰²ä¿æŒä¸€è‡´ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—åŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆã€é›†ç¾¤æ“ä½œå‘˜å’Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜å¯ä»¥å…±åŒè§£å†³ Gateway API çš„ä¸åŒæ–¹é¢ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼ŒåŸºç¡€è®¾æ–½å·¥ç¨‹å¸ˆåœ¨éƒ¨ç½² GatewayClasses æ—¶å‘æŒ¥ç€å…³é”®ä½œç”¨ï¼ŒGatewayClasses æ˜¯é›†ç¾¤èŒƒå›´çš„èµ„æºï¼Œå®ƒä»¬ä½œä¸ºæ¨¡æ¿æ˜ç¡®å®šä¹‰äº†ä»å®ƒä»¬æ´¾ç”Ÿçš„ Gateways çš„è¡Œä¸ºï¼Œä¸ºå¼ºå¤§çš„æœåŠ¡ç½‘ç»œå¥ å®šäº†åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;éšåï¼Œé›†ç¾¤æ“ä½œå‘˜ä½¿ç”¨è¿™äº› GatewayClasses æ¥éƒ¨ç½²ç½‘å…³ã€‚Kubernetes çš„ Gateway API ä¸­çš„ Gateway å®šä¹‰äº†å¦‚ä½•å°†å¤–éƒ¨æµé‡å¯¼å‘é›†ç¾¤å†…çš„æœåŠ¡ï¼Œä»æœ¬è´¨ä¸Šè®²ï¼Œå°†é Kubernetes æºä¸ Kubernetes æ„ŸçŸ¥ç›®æ ‡è¿æ¥èµ·æ¥ã€‚å®ƒä»£è¡¨äº†å¯¹ä¸ GatewayClass è§„èŒƒå¯¹é½çš„è´Ÿè½½å‡è¡¡å™¨é…ç½®çš„è¯·æ±‚ã€‚Gateway è§„èŒƒå¯èƒ½ä¸æ˜¯è¯¦å°½æ— é—çš„ï¼Œå› ä¸ºä¸€äº›ç»†èŠ‚å¯ä»¥ç”± GatewayClass æ§åˆ¶å™¨æä¾›ï¼Œä»¥ç¡®ä¿å¯ç§»æ¤æ€§ã€‚æ­¤å¤–ï¼Œä¸€ä¸ª Gateway å¯ä»¥ä¸å¤šä¸ª Route å¼•ç”¨å…³è”èµ·æ¥ï¼Œå°†ç‰¹å®šçš„æµé‡å­é›†é€šé“åˆ°æŒ‡å®šçš„æœåŠ¡ã€‚&lt;/p&gt;
&lt;p&gt;æœ€åï¼Œåº”ç”¨ç¨‹åºå¼€å‘äººå‘˜é…ç½®è·¯ç”±èµ„æºï¼ˆä¾‹å¦‚ HTTPRoutesï¼‰ï¼Œç”¨äºç®¡ç†é…ç½®ï¼ˆä¾‹å¦‚è¶…æ—¶ã€è¯·æ±‚åŒ¹é…/è¿‡æ»¤ï¼‰å’ŒæœåŠ¡ç»„åˆï¼ˆä¾‹å¦‚å°†è·¯å¾„è·¯ç”±åˆ°åç«¯ï¼‰ã€‚è·¯ç”±èµ„æºä¸ºä» Gateway åˆ° Kubernetes æœåŠ¡çš„è¯·æ±‚å®šä¹‰äº†åè®®ç‰¹å®šçš„è§„åˆ™ã€‚HTTPRoute ç”¨äºå¤ç”¨ HTTP æˆ–ç»ˆæ­¢çš„ HTTPS è¿æ¥ï¼Œå®ƒé€‚ç”¨äºä½ æƒ³è¦æ£€æŸ¥ HTTP æµå¹¶ä½¿ç”¨ HTTP è¯·æ±‚æ•°æ®è¿›è¡Œè·¯ç”±æˆ–ä¿®æ”¹çš„æƒ…å†µï¼Œä¾‹å¦‚ä½¿ç”¨ HTTP æ ‡å¤´è¿›è¡Œè·¯ç”±ï¼Œæˆ–åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å¯¹å…¶è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;p&gt;















&lt;figure  id=&#34;figure-gateway-api-ç¤ºæ„å›¾&#34;&gt;
  &lt;div class=&#34;d-flex justify-content-center&#34;&gt;
    &lt;div class=&#34;w-100&#34; &gt;&lt;img alt=&#34;Gateway API ç¤ºæ„å›¾&#34; srcset=&#34;
               /blog/gateway-api-ingress2gateway/api_hu3204875267413736596.webp 400w,
               /blog/gateway-api-ingress2gateway/api_hu1441749040838845284.webp 760w,
               /blog/gateway-api-ingress2gateway/api_hu5481256887444101388.webp 1200w&#34;
               src=&#34;https://cloudnativecn.com/blog/gateway-api-ingress2gateway/api_hu3204875267413736596.webp&#34;
               width=&#34;760&#34;
               height=&#34;453&#34;
               loading=&#34;lazy&#34; data-zoomable /&gt;&lt;/div&gt;
  &lt;/div&gt;&lt;figcaption&gt;
      Gateway API ç¤ºæ„å›¾
    &lt;/figcaption&gt;&lt;/figure&gt;
&lt;/p&gt;
&lt;h3 id=&#34;å¯ç§»æ¤æ€§&#34;&gt;å¯ç§»æ¤æ€§&lt;/h3&gt;
&lt;p&gt;é€šè¿‡è¶…è¿‡ 20 ä¸ª &lt;a href=&#34;https://gateway-api.sigs.k8s.io/implementations/#implementations&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;API å®ç°&lt;/a&gt;ï¼ŒGateway API æ—¨åœ¨åœ¨ä¸åŒçš„å®ç°ã€é›†ç¾¤å’Œç¯å¢ƒä¸­æ›´æ˜“äºç§»æ¤ã€‚å®ƒæœ‰åŠ©äºå‡å°‘ Ingress å¯¹éå¯ç§»æ¤ã€ç‰¹å®šäºæä¾›å•†çš„æ³¨é‡Šçš„ä¾èµ–ï¼Œä½¿ä½ çš„é…ç½®æ›´ä¸€è‡´ï¼Œæ›´å®¹æ˜“åœ¨å¤šä¸ªé›†ç¾¤ä¸­ç®¡ç†ã€‚&lt;/p&gt;
&lt;p&gt;Gateway API è‡´åŠ›äºæ”¯æŒæœ€æ–°çš„ 5 ä¸ª Kubernetes æ¬¡è¦ç‰ˆæœ¬ã€‚è¿™æ„å‘³ç€ Gateway API ç›®å‰æ”¯æŒ Kubernetes 1.24+ã€‚&lt;/p&gt;
&lt;h3 id=&#34;è¡¨è¾¾æ€§&#34;&gt;è¡¨è¾¾æ€§&lt;/h3&gt;
&lt;p&gt;Gateway API æä¾›äº†å¯¹è®¸å¤šåŠŸèƒ½çš„æ ‡å‡†åŒ–ã€åŸºäº Kubernetes çš„æ”¯æŒï¼Œä¾‹å¦‚åŸºäºæ ‡å¤´çš„åŒ¹é…ã€æµé‡æ‹†åˆ†ã€åŸºäºæƒé‡çš„è·¯ç”±ã€è¯·æ±‚é•œåƒç­‰ç­‰ã€‚è€Œåœ¨ Ingress ä¸­ï¼Œè¿™äº›åŠŸèƒ½éœ€è¦ä½¿ç”¨è‡ªå®šä¹‰çš„ç‰¹å®šäºæä¾›å•†çš„æ³¨é‡Šã€‚&lt;/p&gt;
&lt;h3 id=&#34;å¯æ‰©å±•æ€§&#34;&gt;å¯æ‰©å±•æ€§&lt;/h3&gt;
&lt;p&gt;Gateway API çš„è®¾è®¡ä¸­å…·æœ‰å¯æ‰©å±•æ€§ä½œä¸ºæ ¸å¿ƒç‰¹æ€§ã€‚å®ƒä¸å¼ºåˆ¶ä½¿ç”¨ä¸€ç§å¤§å°é€‚åº”æ‰€æœ‰çš„æ¨¡å‹ï¼Œè€Œæ˜¯æä¾›äº†åœ¨ API æ¡†æ¶çš„å¤šä¸ªå±‚æ¬¡ä¸Šé“¾æ¥è‡ªå®šä¹‰èµ„æºçš„çµæ´»æ€§ã€‚è¿™ç§åˆ†å±‚çš„è‡ªå®šä¹‰æ–¹æ³•ç¡®ä¿ç”¨æˆ·å¯ä»¥æ ¹æ®è‡ªå·±çš„ç‰¹å®šéœ€æ±‚è°ƒæ•´é…ç½®ï¼Œè€Œä¸ä¼šæ·¹æ²¡ä¸»è¦ç»“æ„ã€‚é€šè¿‡è¿™æ ·åšï¼ŒGateway API å®ç°äº†æ›´ç²¾ç»†å’Œä¸Šä¸‹æ–‡æ•æ„Ÿçš„è°ƒæ•´ï¼Œå…è®¸åœ¨æ ‡å‡†åŒ–å’Œé€‚åº”æ€§ä¹‹é—´å®ç°ç²¾ç¡®çš„å¹³è¡¡ã€‚åœ¨ç‰¹å®šçš„äº‘åŸç”Ÿç¯å¢ƒä¸­ï¼Œç‰¹å®šçš„ç”¨ä¾‹éœ€è¦ç»†å¾®çš„é…ç½®ï¼Œè¿™ä¸€ç‚¹å°¤ä¸ºé‡è¦ã€‚ä¸€ä¸ªå…³é”®çš„åŒºåˆ«æ˜¯ï¼ŒGateway API å…·æœ‰æ›´å¹¿æ³›çš„åŸºç¡€åŠŸèƒ½é›†å’Œä¸€ä¸ªæ ‡å‡†çš„æ‰©å±•æ¨¡å¼ï¼Œæ¯” Ingress ä¸Šçš„æ³¨é‡Šæ›´å…·è¡¨ç°åŠ›ã€‚&lt;/p&gt;
&lt;h2 id=&#34;å‡çº§åˆ°-gateway&#34;&gt;å‡çº§åˆ° Gateway&lt;/h2&gt;
&lt;p&gt;ä» Ingress è¿ç§»åˆ° Gateway API å¯èƒ½çœ‹èµ·æ¥ä»¤äººç”Ÿç•ï¼Œä½†å¹¸è¿çš„æ˜¯ï¼ŒKubernetes åˆšåˆšå‘å¸ƒäº†ä¸€ä¸ªç®€åŒ–è¯¥è¿‡ç¨‹çš„å·¥å…·ã€‚&lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt; é€šè¿‡å°†ç°æœ‰çš„ Ingress èµ„æºè½¬æ¢ä¸º Gateway API èµ„æºæ¥å¸®åŠ©è¿›è¡Œè¿ç§»ã€‚ä»¥ä¸‹æ˜¯ä½ å¯ä»¥å¼€å§‹ä½¿ç”¨ Gateway API å’Œ ingress2gateway çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href=&#34;https://gateway-api.sigs.k8s.io/guides/#installing-a-gateway-controller&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;å®‰è£… Gateway æ§åˆ¶å™¨&lt;/a&gt; æˆ–è€…&lt;a href=&#34;https://gateway-api.sigs.k8s.io/guides/#installing-gateway-api&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;æ‰‹åŠ¨å®‰è£… Gateway API CRD&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£… &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ åœ¨æœ¬åœ°æœ‰ Go å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£… &lt;code&gt;ingress2gateway&lt;/code&gt;ï¼š&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;go install github.com/kubernetes-sigs/ingress2gateway@v0.1.0
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;è¿™å°† &lt;code&gt;ingress2gateway&lt;/code&gt; å®‰è£…åˆ° &lt;code&gt;$(go env GOPATH)/bin/ingress2gateway&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;æˆ–è€…ï¼Œå¯ä»¥æŒ‰ç…§&lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway#installation&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è¿™é‡Œ&lt;/a&gt;çš„å®‰è£…æŒ‡å—è¿›è¡Œæ“ä½œã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å®‰è£…å·¥å…·åï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒå°†é›†ç¾¤ä¸­çš„ Ingress èµ„æºè½¬æ¢ä¸º Gateway API èµ„æºã€‚&lt;/p&gt;
&lt;pre tabindex=&#34;0&#34;&gt;&lt;code&gt;ingress2gateway print
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;ä¸Šè¿°å‘½ä»¤å°†æ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åŠ è½½å½“å‰çš„ Kubernetes å®¢æˆ·ç«¯é…ç½®ï¼ŒåŒ…æ‹¬æ´»åŠ¨ä¸Šä¸‹æ–‡ã€å‘½åç©ºé—´å’Œèº«ä»½éªŒè¯è¯¦ç»†ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;li&gt;åœ¨è¯¥å‘½åç©ºé—´ä¸­æœç´¢ Ingress å’Œç‰¹å®šäºæä¾›å•†çš„èµ„æºã€‚&lt;/li&gt;
&lt;li&gt;å°†å®ƒä»¬è½¬æ¢ä¸º Gateway API èµ„æºï¼ˆç›®å‰ä»…æ”¯æŒ Gateways å’Œ HTTPRoutesï¼‰ã€‚æœ‰å…³å…¶ä»–é€‰é¡¹ï¼Œä½ å¯ä»¥è¿è¡Œå¸¦æœ‰ &lt;code&gt;h&lt;/code&gt; çš„å·¥å…·ï¼Œæˆ–å‚è€ƒ &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway#options&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;https://github.com/kubernetes-sigs/ingress2gateway#options&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ£€æŸ¥è½¬æ¢åçš„ Gateway API èµ„æºï¼ŒéªŒè¯å®ƒä»¬ï¼Œç„¶åå°†å…¶åº”ç”¨åˆ°é›†ç¾¤ä¸­ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;å‘ä½ çš„ Gateway å‘é€æµ‹è¯•è¯·æ±‚ï¼Œä»¥æ£€æŸ¥å…¶æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚ä½ å¯ä»¥ä½¿ç”¨ &lt;code&gt;kubectl get gateway &amp;lt;gateway-name&amp;gt; -n &amp;lt;namespace&amp;gt; -o jsonpath=&#39;{.status.addresses}{&amp;quot;\n&amp;quot;}&#39;&lt;/code&gt; å‘½ä»¤è·å– Gateway çš„åœ°å€ã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;æ›´æ–°ä½ çš„ DNSï¼Œå°†å…¶æŒ‡å‘æ–°çš„ Gatewayã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ç¡®è®¤ä¸å†æœ‰æµé‡é€šè¿‡ä½ çš„ Ingress é…ç½®åï¼Œä½ å¯ä»¥å®‰å…¨åœ°åˆ é™¤å®ƒã€‚&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h2 id=&#34;æ€»ç»“&#34;&gt;æ€»ç»“&lt;/h2&gt;
&lt;p&gt;å®ç°å¯é ã€å¯æ‰©å±•å’Œå¯æ‰©å±•çš„ç½‘ç»œä¸€ç›´æ˜¯ä¸€ä¸ªå…·æœ‰æŒ‘æˆ˜æ€§çš„ç›®æ ‡ã€‚Gateway API æ—¨åœ¨æ”¹è¿›å½“å‰çš„ Kubernetes ç½‘ç»œæ ‡å‡†ï¼Œå¦‚ Ingressï¼Œå¹¶å‡å°‘å¯¹å®ç°ç‰¹å®šæ³¨é‡Šå’Œ CRD çš„ä¾èµ–ã€‚&lt;/p&gt;
&lt;p&gt;å®ƒæ˜¯ä¸€ä¸ª Kubernetes æ ‡å‡† APIï¼Œåœ¨ä¸åŒçš„å¹³å°å’Œå®ç°ä¸­ä¿æŒä¸€è‡´ï¼Œæœ€é‡è¦çš„æ˜¯å®ƒæ˜¯æœªæ¥çš„ã€‚Gateway API æ˜¯ Ingress API çš„ä¸‹ä¸€ä»£ï¼Œä½†å…¶èŒƒå›´æ›´å¹¿ï¼Œè¿˜æ‰©å±•åˆ°äº†ç½‘æ ¼å’Œç¬¬å››å±‚è·¯ç”±ã€‚Gateway API å’Œ ingress2gateway å¾—åˆ°äº† SIG Network ä¸‹çš„ä¸“é—¨å›¢é˜Ÿçš„æ”¯æŒï¼Œä»–ä»¬ç§¯æå‚ä¸å…¶ä¸­å¹¶ç®¡ç†ç”Ÿæ€ç³»ç»Ÿã€‚å®ƒè¿˜å¯èƒ½è·å¾—æ›´å¤šçš„æ›´æ–°å’Œç¤¾åŒºæ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&#34;å±•æœ›æœªæ¥&#34;&gt;å±•æœ›æœªæ¥&lt;/h3&gt;
&lt;p&gt;ingress2gateway åˆšåˆšå¼€å§‹ã€‚æˆ‘ä»¬è®¡åˆ’æ¥å…¥æ›´å¤šæä¾›å•†ï¼Œå¼•å…¥å¯¹æ›´å¤šç±»å‹çš„ Gateway API è·¯ç”±çš„æ”¯æŒï¼Œå¹¶ç¡®ä¿ä¸€åˆ‡ä¸ Gateway API çš„æŒç»­å¼€å‘é¡ºåˆ©åŒæ­¥ã€‚&lt;/p&gt;
&lt;p&gt;ä»¤äººå…´å¥‹çš„æ˜¯ï¼ŒGateway API ä¹Ÿåœ¨å–å¾—é‡å¤§è¿›å±•ã€‚è™½ç„¶ v1.0 å³å°†å‘å¸ƒï¼Œä½†å‰æ–¹ä»æœ‰å¤§é‡å·¥ä½œç­‰å¾…ç€æˆ‘ä»¬ã€‚æ­¤ç‰ˆæœ¬åŒ…å«è®¸å¤šæ–°çš„å®éªŒæ€§åŠŸèƒ½ï¼Œé¢å¤–çš„åŠŸèƒ½ç›®å‰æ­£å¤„äºè§„åˆ’å’Œå¼€å‘çš„æ—©æœŸé˜¶æ®µã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä½ æœ‰å…´è¶£å¸®åŠ©åšå‡ºè´¡çŒ®ï¼Œæˆ‘ä»¬éå¸¸æ¬¢è¿ä½ ï¼è¯·è®¿é—®&lt;a href=&#34;https://gateway-api.sigs.k8s.io/contributing/community/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ç¤¾åŒºé¡µé¢&lt;/a&gt;ï¼Œå…¶ä¸­åŒ…å« Slack é¢‘é“å’Œç¤¾åŒºä¼šè®®çš„é“¾æ¥ã€‚æˆ‘ä»¬æœŸå¾…ä¸ä½ è§é¢ï¼&lt;/p&gt;
&lt;h3 id=&#34;æœ‰ç”¨çš„é“¾æ¥&#34;&gt;æœ‰ç”¨çš„é“¾æ¥&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨&lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;GitHub&lt;/a&gt;ä¸Šå‚ä¸ Ingress2Gateway é¡¹ç›®&lt;/li&gt;
&lt;li&gt;æå‡ºæ–°é—®é¢˜ - &lt;a href=&#34;https://github.com/kubernetes-sigs/ingress2gateway/issues/new/choose&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;ingress2gateway&lt;/a&gt;ï¼Œ&lt;a href=&#34;https://github.com/kubernetes-sigs/gateway-api/issues/new/choose&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;åŠ å…¥æˆ‘ä»¬çš„&lt;a href=&#34;https://github.com/kubernetes-sigs/gateway-api/discussions&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;è®¨è®º&lt;/a&gt;ã€‚&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gateway-api.sigs.k8s.io/guides/&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API å…¥é—¨æŒ‡å—&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://gateway-api.sigs.k8s.io/implementations/#gateways&#34; target=&#34;_blank&#34; rel=&#34;noopener&#34;&gt;Gateway API å®ç°&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
    </item>
    
  </channel>
</rss>
